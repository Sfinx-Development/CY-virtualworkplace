var pV=Object.defineProperty;var hV=(o,i,et)=>i in o?pV(o,i,{enumerable:!0,configurable:!0,writable:!0,value:et}):o[i]=et;var Ul=(o,i,et)=>(hV(o,typeof i!="symbol"?i+"":i,et),et);function _mergeNamespaces(o,i){for(var et=0;et<i.length;et++){const nt=i[et];if(typeof nt!="string"&&!Array.isArray(nt)){for(const ot in nt)if(ot!=="default"&&!(ot in o)){const st=Object.getOwnPropertyDescriptor(nt,ot);st&&Object.defineProperty(o,ot,st.get?st:{enumerable:!0,get:()=>nt[ot]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const ot of document.querySelectorAll('link[rel="modulepreload"]'))nt(ot);new MutationObserver(ot=>{for(const st of ot)if(st.type==="childList")for(const lt of st.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&nt(lt)}).observe(document,{childList:!0,subtree:!0});function et(ot){const st={};return ot.integrity&&(st.integrity=ot.integrity),ot.referrerPolicy&&(st.referrerPolicy=ot.referrerPolicy),ot.crossOrigin==="use-credentials"?st.credentials="include":ot.crossOrigin==="anonymous"?st.credentials="omit":st.credentials="same-origin",st}function nt(ot){if(ot.ep)return;ot.ep=!0;const st=et(ot);fetch(ot.href,st)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var i=o.default;if(typeof i=="function"){var et=function nt(){return this instanceof nt?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};et.prototype=i.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(o).forEach(function(nt){var ot=Object.getOwnPropertyDescriptor(o,nt);Object.defineProperty(et,nt,ot.get?ot:{enumerable:!0,get:function(){return o[nt]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(o){return o===null||typeof o!="object"?null:(o=z$2&&o[z$2]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,i,et){this.props=o,this.context=i,this.refs=D$1,this.updater=et||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,i){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,i,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,i,et){this.props=o,this.context=i,this.refs=D$1,this.updater=et||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(o,i,et){var nt,ot={},st=null,lt=null;if(i!=null)for(nt in i.ref!==void 0&&(lt=i.ref),i.key!==void 0&&(st=""+i.key),i)J.call(i,nt)&&!L$1.hasOwnProperty(nt)&&(ot[nt]=i[nt]);var ht=arguments.length-2;if(ht===1)ot.children=et;else if(1<ht){for(var ft=Array(ht),St=0;St<ht;St++)ft[St]=arguments[St+2];ot.children=ft}if(o&&o.defaultProps)for(nt in ht=o.defaultProps,ht)ot[nt]===void 0&&(ot[nt]=ht[nt]);return{$$typeof:l$3,type:o,key:st,ref:lt,props:ot,_owner:K$1.current}}function N$1(o,i){return{$$typeof:l$3,type:o.type,key:i,ref:o.ref,props:o.props,_owner:o._owner}}function O$1(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$3}function escape(o){var i={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(et){return i[et]})}var P$1=/\/+/g;function Q$1(o,i){return typeof o=="object"&&o!==null&&o.key!=null?escape(""+o.key):i.toString(36)}function R$1(o,i,et,nt,ot){var st=typeof o;(st==="undefined"||st==="boolean")&&(o=null);var lt=!1;if(o===null)lt=!0;else switch(st){case"string":case"number":lt=!0;break;case"object":switch(o.$$typeof){case l$3:case n$4:lt=!0}}if(lt)return lt=o,ot=ot(lt),o=nt===""?"."+Q$1(lt,0):nt,I$1(ot)?(et="",o!=null&&(et=o.replace(P$1,"$&/")+"/"),R$1(ot,i,et,"",function(St){return St})):ot!=null&&(O$1(ot)&&(ot=N$1(ot,et+(!ot.key||lt&&lt.key===ot.key?"":(""+ot.key).replace(P$1,"$&/")+"/")+o)),i.push(ot)),1;if(lt=0,nt=nt===""?".":nt+":",I$1(o))for(var ht=0;ht<o.length;ht++){st=o[ht];var ft=nt+Q$1(st,ht);lt+=R$1(st,i,et,ft,ot)}else if(ft=A$2(o),typeof ft=="function")for(o=ft.call(o),ht=0;!(st=o.next()).done;)st=st.value,ft=nt+Q$1(st,ht++),lt+=R$1(st,i,et,ft,ot);else if(st==="object")throw i=String(o),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return lt}function S$1(o,i,et){if(o==null)return o;var nt=[],ot=0;return R$1(o,nt,"","",function(st){return i.call(et,st,ot++)}),nt}function T$1(o){if(o._status===-1){var i=o._result;i=i(),i.then(function(et){(o._status===0||o._status===-1)&&(o._status=1,o._result=et)},function(et){(o._status===0||o._status===-1)&&(o._status=2,o._result=et)}),o._status===-1&&(o._status=0,o._result=i)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(o,i,et){S$1(o,function(){i.apply(this,arguments)},et)},count:function(o){var i=0;return S$1(o,function(){i++}),i},toArray:function(o){return S$1(o,function(i){return i})||[]},only:function(o){if(!O$1(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$5;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(o,i,et){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var nt=C$1({},o.props),ot=o.key,st=o.ref,lt=o._owner;if(i!=null){if(i.ref!==void 0&&(st=i.ref,lt=K$1.current),i.key!==void 0&&(ot=""+i.key),o.type&&o.type.defaultProps)var ht=o.type.defaultProps;for(ft in i)J.call(i,ft)&&!L$1.hasOwnProperty(ft)&&(nt[ft]=i[ft]===void 0&&ht!==void 0?ht[ft]:i[ft])}var ft=arguments.length-2;if(ft===1)nt.children=et;else if(1<ft){ht=Array(ft);for(var St=0;St<ft;St++)ht[St]=arguments[St+2];nt.children=ht}return{$$typeof:l$3,type:o.type,key:ot,ref:st,props:nt,_owner:lt}};react_production_min.createContext=function(o){return o={$$typeof:u$2,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t$3,_context:o},o.Consumer=o};react_production_min.createElement=M$1;react_production_min.createFactory=function(o){var i=M$1.bind(null,o);return i.type=o,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$4,render:o}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(o){return{$$typeof:y$1,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,i){return{$$typeof:x$1,type:o,compare:i===void 0?null:i}};react_production_min.startTransition=function(o){var i=V$1.transition;V$1.transition={};try{o()}finally{V$1.transition=i}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(o,i){return U$1.current.useCallback(o,i)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,i){return U$1.current.useEffect(o,i)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,i,et){return U$1.current.useImperativeHandle(o,i,et)};react_production_min.useInsertionEffect=function(o,i){return U$1.current.useInsertionEffect(o,i)};react_production_min.useLayoutEffect=function(o,i){return U$1.current.useLayoutEffect(o,i)};react_production_min.useMemo=function(o,i){return U$1.current.useMemo(o,i)};react_production_min.useReducer=function(o,i,et){return U$1.current.useReducer(o,i,et)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,i,et){return U$1.current.useSyncExternalStore(o,i,et)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$3=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$3(o,i,et){var nt,ot={},st=null,lt=null;et!==void 0&&(st=""+et),i.key!==void 0&&(st=""+i.key),i.ref!==void 0&&(lt=i.ref);for(nt in i)m$3.call(i,nt)&&!p$4.hasOwnProperty(nt)&&(ot[nt]=i[nt]);if(o&&o.defaultProps)for(nt in i=o.defaultProps,i)ot[nt]===void 0&&(ot[nt]=i[nt]);return{$$typeof:k$2,type:o,key:st,ref:lt,props:ot,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;function sheetForTag(o){if(o.sheet)return o.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===o)return document.styleSheets[i]}function createStyleElement(o){var i=document.createElement("style");return i.setAttribute("data-emotion",o.key),o.nonce!==void 0&&i.setAttribute("nonce",o.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}var StyleSheet=function(){function o(et){var nt=this;this._insertTag=function(ot){var st;nt.tags.length===0?nt.insertionPoint?st=nt.insertionPoint.nextSibling:nt.prepend?st=nt.container.firstChild:st=nt.before:st=nt.tags[nt.tags.length-1].nextSibling,nt.container.insertBefore(ot,st),nt.tags.push(ot)},this.isSpeedy=et.speedy===void 0?!0:et.speedy,this.tags=[],this.ctr=0,this.nonce=et.nonce,this.key=et.key,this.container=et.container,this.prepend=et.prepend,this.insertionPoint=et.insertionPoint,this.before=null}var i=o.prototype;return i.hydrate=function(nt){nt.forEach(this._insertTag)},i.insert=function(nt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var ot=this.tags[this.tags.length-1];if(this.isSpeedy){var st=sheetForTag(ot);try{st.insertRule(nt,st.cssRules.length)}catch{}}else ot.appendChild(document.createTextNode(nt));this.ctr++},i.flush=function(){this.tags.forEach(function(nt){return nt.parentNode&&nt.parentNode.removeChild(nt)}),this.tags=[],this.ctr=0},o}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(o,i){return charat(o,0)^45?(((i<<2^charat(o,0))<<2^charat(o,1))<<2^charat(o,2))<<2^charat(o,3):0}function trim(o){return o.trim()}function match$1(o,i){return(o=i.exec(o))?o[0]:o}function replace(o,i,et){return o.replace(i,et)}function indexof(o,i){return o.indexOf(i)}function charat(o,i){return o.charCodeAt(i)|0}function substr(o,i,et){return o.slice(i,et)}function strlen(o){return o.length}function sizeof(o){return o.length}function append(o,i){return i.push(o),o}function combine(o,i){return o.map(i).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(o,i,et,nt,ot,st,lt){return{value:o,root:i,parent:et,type:nt,props:ot,children:st,line,column,length:lt,return:""}}function copy(o,i){return assign(node("",null,null,"",null,null,0),o,{length:-o.length},i)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek$1(){return charat(characters,position)}function caret(){return position}function slice(o,i){return substr(characters,o,i)}function token(o){switch(o){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(o){return line=column=1,length=strlen(characters=o),position=0,[]}function dealloc(o){return characters="",o}function delimit(o){return trim(slice(position-1,delimiter(o===91?o+2:o===40?o+1:o)))}function whitespace(o){for(;(character=peek$1())&&character<33;)next();return token(o)>2||token(character)>3?"":" "}function escaping(o,i){for(;--i&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(o,caret()+(i<6&&peek$1()==32&&next()==32))}function delimiter(o){for(;next();)switch(character){case o:return position;case 34:case 39:o!==34&&o!==39&&delimiter(character);break;case 40:o===41&&delimiter(o);break;case 92:next();break}return position}function commenter(o,i){for(;next()&&o+character!==57;)if(o+character===84&&peek$1()===47)break;return"/*"+slice(i,position-1)+"*"+from(o===47?o:next())}function identifier(o){for(;!token(peek$1());)next();return slice(o,position)}function compile(o){return dealloc(parse("",null,null,null,[""],o=alloc(o),0,[0],o))}function parse(o,i,et,nt,ot,st,lt,ht,ft){for(var St=0,vt=0,Rt=lt,wt=0,$t=0,Dt=0,Pt=1,Ut=1,Ot=1,Lt=0,xt="",jt=ot,Ht=st,qt=nt,Kt=xt;Ut;)switch(Dt=Lt,Lt=next()){case 40:if(Dt!=108&&charat(Kt,Rt-1)==58){indexof(Kt+=replace(delimit(Lt),"&","&\f"),"&\f")!=-1&&(Ot=-1);break}case 34:case 39:case 91:Kt+=delimit(Lt);break;case 9:case 10:case 13:case 32:Kt+=whitespace(Dt);break;case 92:Kt+=escaping(caret()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append(comment(commenter(next(),caret()),i,et),ft);break;default:Kt+="/"}break;case 123*Pt:ht[St++]=strlen(Kt)*Ot;case 125*Pt:case 59:case 0:switch(Lt){case 0:case 125:Ut=0;case 59+vt:Ot==-1&&(Kt=replace(Kt,/\f/g,"")),$t>0&&strlen(Kt)-Rt&&append($t>32?declaration(Kt+";",nt,et,Rt-1):declaration(replace(Kt," ","")+";",nt,et,Rt-2),ft);break;case 59:Kt+=";";default:if(append(qt=ruleset(Kt,i,et,St,vt,ot,ht,xt,jt=[],Ht=[],Rt),st),Lt===123)if(vt===0)parse(Kt,i,qt,qt,jt,st,Rt,ht,Ht);else switch(wt===99&&charat(Kt,3)===110?100:wt){case 100:case 108:case 109:case 115:parse(o,qt,qt,nt&&append(ruleset(o,qt,qt,0,0,ot,ht,xt,ot,jt=[],Rt),Ht),ot,Ht,Rt,ht,nt?jt:Ht);break;default:parse(Kt,qt,qt,qt,[""],Ht,0,ht,Ht)}}St=vt=$t=0,Pt=Ot=1,xt=Kt="",Rt=lt;break;case 58:Rt=1+strlen(Kt),$t=Dt;default:if(Pt<1){if(Lt==123)--Pt;else if(Lt==125&&Pt++==0&&prev()==125)continue}switch(Kt+=from(Lt),Lt*Pt){case 38:Ot=vt>0?1:(Kt+="\f",-1);break;case 44:ht[St++]=(strlen(Kt)-1)*Ot,Ot=1;break;case 64:peek$1()===45&&(Kt+=delimit(next())),wt=peek$1(),vt=Rt=strlen(xt=Kt+=identifier(caret())),Lt++;break;case 45:Dt===45&&strlen(Kt)==2&&(Pt=0)}}return st}function ruleset(o,i,et,nt,ot,st,lt,ht,ft,St,vt){for(var Rt=ot-1,wt=ot===0?st:[""],$t=sizeof(wt),Dt=0,Pt=0,Ut=0;Dt<nt;++Dt)for(var Ot=0,Lt=substr(o,Rt+1,Rt=abs(Pt=lt[Dt])),xt=o;Ot<$t;++Ot)(xt=trim(Pt>0?wt[Ot]+" "+Lt:replace(Lt,/&\f/g,wt[Ot])))&&(ft[Ut++]=xt);return node(o,i,et,ot===0?RULESET:ht,ft,St,vt)}function comment(o,i,et){return node(o,i,et,COMMENT,from(char()),substr(o,2,-2),0)}function declaration(o,i,et,nt){return node(o,i,et,DECLARATION,substr(o,0,nt),substr(o,nt+1,-1),nt)}function serialize(o,i){for(var et="",nt=sizeof(o),ot=0;ot<nt;ot++)et+=i(o[ot],ot,o,i)||"";return et}function stringify(o,i,et,nt){switch(o.type){case LAYER:if(o.children.length)break;case IMPORT:case DECLARATION:return o.return=o.return||o.value;case COMMENT:return"";case KEYFRAMES:return o.return=o.value+"{"+serialize(o.children,nt)+"}";case RULESET:o.value=o.props.join(",")}return strlen(et=serialize(o.children,nt))?o.return=o.value+"{"+et+"}":""}function middleware(o){var i=sizeof(o);return function(et,nt,ot,st){for(var lt="",ht=0;ht<i;ht++)lt+=o[ht](et,nt,ot,st)||"";return lt}}function rulesheet(o){return function(i){i.root||(i=i.return)&&o(i)}}var weakMemoize=function(i){var et=new WeakMap;return function(nt){if(et.has(nt))return et.get(nt);var ot=i(nt);return et.set(nt,ot),ot}};function memoize$1(o){var i=Object.create(null);return function(et){return i[et]===void 0&&(i[et]=o(et)),i[et]}}var identifierWithPointTracking=function(i,et,nt){for(var ot=0,st=0;ot=st,st=peek$1(),ot===38&&st===12&&(et[nt]=1),!token(st);)next();return slice(i,position)},toRules=function(i,et){var nt=-1,ot=44;do switch(token(ot)){case 0:ot===38&&peek$1()===12&&(et[nt]=1),i[nt]+=identifierWithPointTracking(position-1,et,nt);break;case 2:i[nt]+=delimit(ot);break;case 4:if(ot===44){i[++nt]=peek$1()===58?"&\f":"",et[nt]=i[nt].length;break}default:i[nt]+=from(ot)}while(ot=next());return i},getRules=function(i,et){return dealloc(toRules(alloc(i),et))},fixedElements=new WeakMap,compat=function(i){if(!(i.type!=="rule"||!i.parent||i.length<1)){for(var et=i.value,nt=i.parent,ot=i.column===nt.column&&i.line===nt.line;nt.type!=="rule";)if(nt=nt.parent,!nt)return;if(!(i.props.length===1&&et.charCodeAt(0)!==58&&!fixedElements.get(nt))&&!ot){fixedElements.set(i,!0);for(var st=[],lt=getRules(et,st),ht=nt.props,ft=0,St=0;ft<lt.length;ft++)for(var vt=0;vt<ht.length;vt++,St++)i.props[St]=st[ft]?lt[ft].replace(/&\f/g,ht[vt]):ht[vt]+" "+lt[ft]}}},removeLabel=function(i){if(i.type==="decl"){var et=i.value;et.charCodeAt(0)===108&&et.charCodeAt(2)===98&&(i.return="",i.value="")}};function prefix(o,i){switch(hash$2(o,i)){case 5103:return WEBKIT+"print-"+o+o;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+o+o;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+o+MOZ+o+MS+o+o;case 6828:case 4268:return WEBKIT+o+MS+o+o;case 6165:return WEBKIT+o+MS+"flex-"+o+o;case 5187:return WEBKIT+o+replace(o,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+o;case 5443:return WEBKIT+o+MS+"flex-item-"+replace(o,/flex-|-self/,"")+o;case 4675:return WEBKIT+o+MS+"flex-line-pack"+replace(o,/align-content|flex-|-self/,"")+o;case 5548:return WEBKIT+o+MS+replace(o,"shrink","negative")+o;case 5292:return WEBKIT+o+MS+replace(o,"basis","preferred-size")+o;case 6060:return WEBKIT+"box-"+replace(o,"-grow","")+WEBKIT+o+MS+replace(o,"grow","positive")+o;case 4554:return WEBKIT+replace(o,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+o;case 6187:return replace(replace(replace(o,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),o,"")+o;case 5495:case 3959:return replace(o,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(o,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+o+o;case 4095:case 3583:case 4068:case 2532:return replace(o,/(.+)-inline(.+)/,WEBKIT+"$1$2")+o;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(o)-1-i>6)switch(charat(o,i+1)){case 109:if(charat(o,i+4)!==45)break;case 102:return replace(o,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(o,i+3)==108?"$3":"$2-$3"))+o;case 115:return~indexof(o,"stretch")?prefix(replace(o,"stretch","fill-available"),i)+o:o}break;case 4949:if(charat(o,i+1)!==115)break;case 6444:switch(charat(o,strlen(o)-3-(~indexof(o,"!important")&&10))){case 107:return replace(o,":",":"+WEBKIT)+o;case 101:return replace(o,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(o,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+o}break;case 5936:switch(charat(o,i+11)){case 114:return WEBKIT+o+MS+replace(o,/[svh]\w+-[tblr]{2}/,"tb")+o;case 108:return WEBKIT+o+MS+replace(o,/[svh]\w+-[tblr]{2}/,"tb-rl")+o;case 45:return WEBKIT+o+MS+replace(o,/[svh]\w+-[tblr]{2}/,"lr")+o}return WEBKIT+o+MS+o+o}return o}var prefixer=function(i,et,nt,ot){if(i.length>-1&&!i.return)switch(i.type){case DECLARATION:i.return=prefix(i.value,i.length);break;case KEYFRAMES:return serialize([copy(i,{value:replace(i.value,"@","@"+WEBKIT)})],ot);case RULESET:if(i.length)return combine(i.props,function(st){switch(match$1(st,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(i,{props:[replace(st,/:(read-\w+)/,":"+MOZ+"$1")]})],ot);case"::placeholder":return serialize([copy(i,{props:[replace(st,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(i,{props:[replace(st,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(i,{props:[replace(st,/:(plac\w+)/,MS+"input-$1")]})],ot)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(i){var et=i.key;if(et==="css"){var nt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(nt,function(Pt){var Ut=Pt.getAttribute("data-emotion");Ut.indexOf(" ")!==-1&&(document.head.appendChild(Pt),Pt.setAttribute("data-s",""))})}var ot=i.stylisPlugins||defaultStylisPlugins,st={},lt,ht=[];lt=i.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+et+' "]'),function(Pt){for(var Ut=Pt.getAttribute("data-emotion").split(" "),Ot=1;Ot<Ut.length;Ot++)st[Ut[Ot]]=!0;ht.push(Pt)});var ft,St=[compat,removeLabel];{var vt,Rt=[stringify,rulesheet(function(Pt){vt.insert(Pt)})],wt=middleware(St.concat(ot,Rt)),$t=function(Ut){return serialize(compile(Ut),wt)};ft=function(Ut,Ot,Lt,xt){vt=Lt,$t(Ut?Ut+"{"+Ot.styles+"}":Ot.styles),xt&&(Dt.inserted[Ot.name]=!0)}}var Dt={key:et,sheet:new StyleSheet({key:et,container:lt,nonce:i.nonce,speedy:i.speedy,prepend:i.prepend,insertionPoint:i.insertionPoint}),nonce:i.nonce,inserted:st,registered:{},insert:ft};return Dt.sheet.hydrate(ht),Dt};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var et=arguments[i];for(var nt in et)Object.prototype.hasOwnProperty.call(et,nt)&&(o[nt]=et[nt])}return o},_extends$3.apply(this,arguments)}var reactIs$1={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$1=b$1?Symbol.for("react.strict_mode"):60108,g$2=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$2=b$1?Symbol.for("react.concurrent_mode"):60111,n$2=b$1?Symbol.for("react.forward_ref"):60112,p$3=b$1?Symbol.for("react.suspense"):60113,q$2=b$1?Symbol.for("react.suspense_list"):60120,r$2=b$1?Symbol.for("react.memo"):60115,t$2=b$1?Symbol.for("react.lazy"):60116,v$3=b$1?Symbol.for("react.block"):60121,w=b$1?Symbol.for("react.fundamental"):60117,x=b$1?Symbol.for("react.responder"):60118,y=b$1?Symbol.for("react.scope"):60119;function z$1(o){if(typeof o=="object"&&o!==null){var i=o.$$typeof;switch(i){case c$1:switch(o=o.type,o){case l$1:case m$2:case e$1:case g$2:case f$1:case p$3:return o;default:switch(o=o&&o.$$typeof,o){case k$1:case n$2:case t$2:case r$2:case h$1:return o;default:return i}}case d$1:return i}}}function A$1(o){return z$1(o)===m$2}reactIs_production_min$1.AsyncMode=l$1;reactIs_production_min$1.ConcurrentMode=m$2;reactIs_production_min$1.ContextConsumer=k$1;reactIs_production_min$1.ContextProvider=h$1;reactIs_production_min$1.Element=c$1;reactIs_production_min$1.ForwardRef=n$2;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t$2;reactIs_production_min$1.Memo=r$2;reactIs_production_min$1.Portal=d$1;reactIs_production_min$1.Profiler=g$2;reactIs_production_min$1.StrictMode=f$1;reactIs_production_min$1.Suspense=p$3;reactIs_production_min$1.isAsyncMode=function(o){return A$1(o)||z$1(o)===l$1};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function(o){return z$1(o)===k$1};reactIs_production_min$1.isContextProvider=function(o){return z$1(o)===h$1};reactIs_production_min$1.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===c$1};reactIs_production_min$1.isForwardRef=function(o){return z$1(o)===n$2};reactIs_production_min$1.isFragment=function(o){return z$1(o)===e$1};reactIs_production_min$1.isLazy=function(o){return z$1(o)===t$2};reactIs_production_min$1.isMemo=function(o){return z$1(o)===r$2};reactIs_production_min$1.isPortal=function(o){return z$1(o)===d$1};reactIs_production_min$1.isProfiler=function(o){return z$1(o)===g$2};reactIs_production_min$1.isStrictMode=function(o){return z$1(o)===f$1};reactIs_production_min$1.isSuspense=function(o){return z$1(o)===p$3};reactIs_production_min$1.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===e$1||o===m$2||o===g$2||o===f$1||o===p$3||o===q$2||typeof o=="object"&&o!==null&&(o.$$typeof===t$2||o.$$typeof===r$2||o.$$typeof===h$1||o.$$typeof===k$1||o.$$typeof===n$2||o.$$typeof===w||o.$$typeof===x||o.$$typeof===y||o.$$typeof===v$3)};reactIs_production_min$1.typeOf=z$1;reactIs$1.exports=reactIs_production_min$1;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$1=!0;function getRegisteredStyles(o,i,et){var nt="";return et.split(" ").forEach(function(ot){o[ot]!==void 0?i.push(o[ot]+";"):nt+=ot+" "}),nt}var registerStyles=function(i,et,nt){var ot=i.key+"-"+et.name;(nt===!1||isBrowser$1===!1)&&i.registered[ot]===void 0&&(i.registered[ot]=et.styles)},insertStyles=function(i,et,nt){registerStyles(i,et,nt);var ot=i.key+"-"+et.name;if(i.inserted[et.name]===void 0){var st=et;do i.insert(et===st?"."+ot:"",st,i.sheet,!0),st=st.next;while(st!==void 0)}};function murmur2(o){for(var i=0,et,nt=0,ot=o.length;ot>=4;++nt,ot-=4)et=o.charCodeAt(nt)&255|(o.charCodeAt(++nt)&255)<<8|(o.charCodeAt(++nt)&255)<<16|(o.charCodeAt(++nt)&255)<<24,et=(et&65535)*1540483477+((et>>>16)*59797<<16),et^=et>>>24,i=(et&65535)*1540483477+((et>>>16)*59797<<16)^(i&65535)*1540483477+((i>>>16)*59797<<16);switch(ot){case 3:i^=(o.charCodeAt(nt+2)&255)<<16;case 2:i^=(o.charCodeAt(nt+1)&255)<<8;case 1:i^=o.charCodeAt(nt)&255,i=(i&65535)*1540483477+((i>>>16)*59797<<16)}return i^=i>>>13,i=(i&65535)*1540483477+((i>>>16)*59797<<16),((i^i>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(i){return i.charCodeAt(1)===45},isProcessableValue=function(i){return i!=null&&typeof i!="boolean"},processStyleName=memoize$1(function(o){return isCustomProperty(o)?o:o.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(i,et){switch(i){case"animation":case"animationName":if(typeof et=="string")return et.replace(animationRegex,function(nt,ot,st){return cursor={name:ot,styles:st,next:cursor},ot})}return unitlessKeys[i]!==1&&!isCustomProperty(i)&&typeof et=="number"&&et!==0?et+"px":et},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(o,i,et){if(et==null)return"";if(et.__emotion_styles!==void 0)return et;switch(typeof et){case"boolean":return"";case"object":{if(et.anim===1)return cursor={name:et.name,styles:et.styles,next:cursor},et.name;if(et.styles!==void 0){var nt=et.next;if(nt!==void 0)for(;nt!==void 0;)cursor={name:nt.name,styles:nt.styles,next:cursor},nt=nt.next;var ot=et.styles+";";return ot}return createStringFromObject(o,i,et)}case"function":{if(o!==void 0){var st=cursor,lt=et(o);return cursor=st,handleInterpolation(o,i,lt)}break}}if(i==null)return et;var ht=i[et];return ht!==void 0?ht:et}function createStringFromObject(o,i,et){var nt="";if(Array.isArray(et))for(var ot=0;ot<et.length;ot++)nt+=handleInterpolation(o,i,et[ot])+";";else for(var st in et){var lt=et[st];if(typeof lt!="object")i!=null&&i[lt]!==void 0?nt+=st+"{"+i[lt]+"}":isProcessableValue(lt)&&(nt+=processStyleName(st)+":"+processStyleValue(st,lt)+";");else if(Array.isArray(lt)&&typeof lt[0]=="string"&&(i==null||i[lt[0]]===void 0))for(var ht=0;ht<lt.length;ht++)isProcessableValue(lt[ht])&&(nt+=processStyleName(st)+":"+processStyleValue(st,lt[ht])+";");else{var ft=handleInterpolation(o,i,lt);switch(st){case"animation":case"animationName":{nt+=processStyleName(st)+":"+ft+";";break}default:nt+=st+"{"+ft+"}"}}}return nt}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(i,et,nt){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var ot=!0,st="";cursor=void 0;var lt=i[0];lt==null||lt.raw===void 0?(ot=!1,st+=handleInterpolation(nt,et,lt)):st+=lt[0];for(var ht=1;ht<i.length;ht++)st+=handleInterpolation(nt,et,i[ht]),ot&&(st+=lt[ht]);labelPattern.lastIndex=0;for(var ft="",St;(St=labelPattern.exec(st))!==null;)ft+="-"+St[1];var vt=murmur2(st)+ft;return{name:vt,styles:st,next:cursor}},syncFallback=function(i){return i()},useInsertionEffect=React$2.useInsertionEffect?React$2.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(i){return reactExports.forwardRef(function(et,nt){var ot=reactExports.useContext(EmotionCacheContext);return i(et,ot,nt)})},ThemeContext=reactExports.createContext({}),getTheme=function(i,et){if(typeof et=="function"){var nt=et(i);return nt}return _extends$3({},i,et)},createCacheWithTheme=weakMemoize(function(o){return weakMemoize(function(i){return getTheme(o,i)})}),ThemeProvider=function(i){var et=reactExports.useContext(ThemeContext);return i.theme!==et&&(et=createCacheWithTheme(et)(i.theme)),reactExports.createElement(ThemeContext.Provider,{value:et},i.children)},Global=withEmotionCache(function(o,i){var et=o.styles,nt=serializeStyles([et],void 0,reactExports.useContext(ThemeContext)),ot=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var st=i.key+"-global",lt=new i.sheet.constructor({key:st,nonce:i.sheet.nonce,container:i.sheet.container,speedy:i.sheet.isSpeedy}),ht=!1,ft=document.querySelector('style[data-emotion="'+st+" "+nt.name+'"]');return i.sheet.tags.length&&(lt.before=i.sheet.tags[0]),ft!==null&&(ht=!0,ft.setAttribute("data-emotion",st),lt.hydrate([ft])),ot.current=[lt,ht],function(){lt.flush()}},[i]),useInsertionEffectWithLayoutFallback(function(){var st=ot.current,lt=st[0],ht=st[1];if(ht){st[1]=!1;return}if(nt.next!==void 0&&insertStyles(i,nt.next,!0),lt.tags.length){var ft=lt.tags[lt.tags.length-1].nextElementSibling;lt.before=ft,lt.flush()}i.insert("",nt,lt,!1)},[i,nt.name]),null});function css(){for(var o=arguments.length,i=new Array(o),et=0;et<o;et++)i[et]=arguments[et];return serializeStyles(i)}var keyframes=function(){var i=css.apply(void 0,arguments),et="animation-"+i.name;return{name:et,styles:"@keyframes "+et+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(gn,_n){var bn=gn.length;gn.push(_n);e:for(;0<bn;){var tr=bn-1>>>1,Zn=gn[tr];if(0<ot(Zn,_n))gn[tr]=_n,gn[bn]=Zn,bn=tr;else break e}}function et(gn){return gn.length===0?null:gn[0]}function nt(gn){if(gn.length===0)return null;var _n=gn[0],bn=gn.pop();if(bn!==_n){gn[0]=bn;e:for(var tr=0,Zn=gn.length,Pr=Zn>>>1;tr<Pr;){var Wn=2*(tr+1)-1,pr=gn[Wn],or=Wn+1,Qr=gn[or];if(0>ot(pr,bn))or<Zn&&0>ot(Qr,pr)?(gn[tr]=Qr,gn[or]=bn,tr=or):(gn[tr]=pr,gn[Wn]=bn,tr=Wn);else if(or<Zn&&0>ot(Qr,bn))gn[tr]=Qr,gn[or]=bn,tr=or;else break e}}return _n}function ot(gn,_n){var bn=gn.sortIndex-_n.sortIndex;return bn!==0?bn:gn.id-_n.id}if(typeof performance=="object"&&typeof performance.now=="function"){var st=performance;o.unstable_now=function(){return st.now()}}else{var lt=Date,ht=lt.now();o.unstable_now=function(){return lt.now()-ht}}var ft=[],St=[],vt=1,Rt=null,wt=3,$t=!1,Dt=!1,Pt=!1,Ut=typeof setTimeout=="function"?setTimeout:null,Ot=typeof clearTimeout=="function"?clearTimeout:null,Lt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(gn){for(var _n=et(St);_n!==null;){if(_n.callback===null)nt(St);else if(_n.startTime<=gn)nt(St),_n.sortIndex=_n.expirationTime,i(ft,_n);else break;_n=et(St)}}function jt(gn){if(Pt=!1,xt(gn),!Dt)if(et(ft)!==null)Dt=!0,Rn(Ht);else{var _n=et(St);_n!==null&&Ln(jt,_n.startTime-gn)}}function Ht(gn,_n){Dt=!1,Pt&&(Pt=!1,Ot(nn),nn=-1),$t=!0;var bn=wt;try{for(xt(_n),Rt=et(ft);Rt!==null&&(!(Rt.expirationTime>_n)||gn&&!dn());){var tr=Rt.callback;if(typeof tr=="function"){Rt.callback=null,wt=Rt.priorityLevel;var Zn=tr(Rt.expirationTime<=_n);_n=o.unstable_now(),typeof Zn=="function"?Rt.callback=Zn:Rt===et(ft)&&nt(ft),xt(_n)}else nt(ft);Rt=et(ft)}if(Rt!==null)var Pr=!0;else{var Wn=et(St);Wn!==null&&Ln(jt,Wn.startTime-_n),Pr=!1}return Pr}finally{Rt=null,wt=bn,$t=!1}}var qt=!1,Kt=null,nn=-1,Zt=5,tn=-1;function dn(){return!(o.unstable_now()-tn<Zt)}function wn(){if(Kt!==null){var gn=o.unstable_now();tn=gn;var _n=!0;try{_n=Kt(!0,gn)}finally{_n?In():(qt=!1,Kt=null)}}else qt=!1}var In;if(typeof Lt=="function")In=function(){Lt(wn)};else if(typeof MessageChannel<"u"){var Sn=new MessageChannel,Nn=Sn.port2;Sn.port1.onmessage=wn,In=function(){Nn.postMessage(null)}}else In=function(){Ut(wn,0)};function Rn(gn){Kt=gn,qt||(qt=!0,In())}function Ln(gn,_n){nn=Ut(function(){gn(o.unstable_now())},_n)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(gn){gn.callback=null},o.unstable_continueExecution=function(){Dt||$t||(Dt=!0,Rn(Ht))},o.unstable_forceFrameRate=function(gn){0>gn||125<gn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Zt=0<gn?Math.floor(1e3/gn):5},o.unstable_getCurrentPriorityLevel=function(){return wt},o.unstable_getFirstCallbackNode=function(){return et(ft)},o.unstable_next=function(gn){switch(wt){case 1:case 2:case 3:var _n=3;break;default:_n=wt}var bn=wt;wt=_n;try{return gn()}finally{wt=bn}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(gn,_n){switch(gn){case 1:case 2:case 3:case 4:case 5:break;default:gn=3}var bn=wt;wt=gn;try{return _n()}finally{wt=bn}},o.unstable_scheduleCallback=function(gn,_n,bn){var tr=o.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?tr+bn:tr):bn=tr,gn){case 1:var Zn=-1;break;case 2:Zn=250;break;case 5:Zn=1073741823;break;case 4:Zn=1e4;break;default:Zn=5e3}return Zn=bn+Zn,gn={id:vt++,callback:_n,priorityLevel:gn,startTime:bn,expirationTime:Zn,sortIndex:-1},bn>tr?(gn.sortIndex=bn,i(St,gn),et(ft)===null&&gn===et(St)&&(Pt?(Ot(nn),nn=-1):Pt=!0,Ln(jt,bn-tr))):(gn.sortIndex=Zn,i(ft,gn),Dt||$t||(Dt=!0,Rn(Ht))),gn},o.unstable_shouldYield=dn,o.unstable_wrapCallback=function(gn){var _n=wt;return function(){var bn=wt;wt=_n;try{return gn.apply(this,arguments)}finally{wt=bn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$2(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,et=1;et<arguments.length;et++)i+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea={};function fa(o,i){ha(o,i),ha(o+"Capture",i)}function ha(o,i){for(ea[o]=i,o=0;o<i.length;o++)da$1.add(i[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,i,et,nt){if(et!==null&&et.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return nt?!1:et!==null?!et.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,i,et,nt){if(i===null||typeof i>"u"||pa(o,i,et,nt))return!0;if(nt)return!1;if(et!==null)switch(et.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v$2(o,i,et,nt,ot,st,lt){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=nt,this.attributeNamespace=ot,this.mustUseProperty=et,this.propertyName=o,this.type=i,this.sanitizeURL=st,this.removeEmptyString=lt}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v$2(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];z[i]=new v$2(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v$2(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v$2(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v$2(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v$2(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v$2(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v$2(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v$2(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(ra,sa);z[i]=new v$2(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(ra,sa);z[i]=new v$2(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(ra,sa);z[i]=new v$2(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v$2(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v$2(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta(o,i,et,nt){var ot=z.hasOwnProperty(i)?z[i]:null;(ot!==null?ot.type!==0:nt||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa(i,et,ot,nt)&&(et=null),nt||ot===null?oa(i)&&(et===null?o.removeAttribute(i):o.setAttribute(i,""+et)):ot.mustUseProperty?o[ot.propertyName]=et===null?ot.type===3?!1:"":et:(i=ot.attributeName,nt=ot.attributeNamespace,et===null?o.removeAttribute(i):(ot=ot.type,et=ot===3||ot===4&&et===!0?"":""+et,nt?o.setAttributeNS(nt,i,et):o.setAttribute(i,et))))}var ua=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(et){var i=et.stack.trim().match(/\n( *(at )?)/);La=i&&i[1]||""}return`
`+La+o}var Na=!1;function Oa(o,i){if(!o||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(St){var nt=St}Reflect.construct(o,[],i)}else{try{i.call()}catch(St){nt=St}o.call(i.prototype)}else{try{throw Error()}catch(St){nt=St}o()}}catch(St){if(St&&nt&&typeof St.stack=="string"){for(var ot=St.stack.split(`
`),st=nt.stack.split(`
`),lt=ot.length-1,ht=st.length-1;1<=lt&&0<=ht&&ot[lt]!==st[ht];)ht--;for(;1<=lt&&0<=ht;lt--,ht--)if(ot[lt]!==st[ht]){if(lt!==1||ht!==1)do if(lt--,ht--,0>ht||ot[lt]!==st[ht]){var ft=`
`+ot[lt].replace(" at new "," at ");return o.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",o.displayName)),ft}while(1<=lt&&0<=ht);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return i=o.displayName||null,i!==null?i:Qa(o.type)||"Memo";case Ha:i=o._payload,o=o._init;try{return Qa(o(i))}catch{}}return null}function Ra(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(i);case 8:return i===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua(o){var i=Ta(o)?"checked":"value",et=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),nt=""+o[i];if(!o.hasOwnProperty(i)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var ot=et.get,st=et.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return ot.call(this)},set:function(lt){nt=""+lt,st.call(this,lt)}}),Object.defineProperty(o,i,{enumerable:et.enumerable}),{getValue:function(){return nt},setValue:function(lt){nt=""+lt},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var et=i.getValue(),nt="";return o&&(nt=Ta(o)?o.checked?"true":"false":o.value),o=nt,o!==et?(i.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,i){var et=i.checked;return A({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??o._wrapperState.initialChecked})}function Za(o,i){var et=i.defaultValue==null?"":i.defaultValue,nt=i.checked!=null?i.checked:i.defaultChecked;et=Sa(i.value!=null?i.value:et),o._wrapperState={initialChecked:nt,initialValue:et,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab(o,i){i=i.checked,i!=null&&ta(o,"checked",i,!1)}function bb(o,i){ab(o,i);var et=Sa(i.value),nt=i.type;if(et!=null)nt==="number"?(et===0&&o.value===""||o.value!=et)&&(o.value=""+et):o.value!==""+et&&(o.value=""+et);else if(nt==="submit"||nt==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?cb(o,i.type,et):i.hasOwnProperty("defaultValue")&&cb(o,i.type,Sa(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function db(o,i,et){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var nt=i.type;if(!(nt!=="submit"&&nt!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,et||i===o.value||(o.value=i),o.defaultValue=i}et=o.name,et!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,et!==""&&(o.name=et)}function cb(o,i,et){(i!=="number"||Xa(o.ownerDocument)!==o)&&(et==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+et&&(o.defaultValue=""+et))}var eb=Array.isArray;function fb(o,i,et,nt){if(o=o.options,i){i={};for(var ot=0;ot<et.length;ot++)i["$"+et[ot]]=!0;for(et=0;et<o.length;et++)ot=i.hasOwnProperty("$"+o[et].value),o[et].selected!==ot&&(o[et].selected=ot),ot&&nt&&(o[et].defaultSelected=!0)}else{for(et=""+Sa(et),i=null,ot=0;ot<o.length;ot++){if(o[ot].value===et){o[ot].selected=!0,nt&&(o[ot].defaultSelected=!0);return}i!==null||o[ot].disabled||(i=o[ot])}i!==null&&(i.selected=!0)}}function gb(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,i){var et=i.value;if(et==null){if(et=i.children,i=i.defaultValue,et!=null){if(i!=null)throw Error(p$2(92));if(eb(et)){if(1<et.length)throw Error(p$2(93));et=et[0]}i=et}i==null&&(i=""),et=i}o._wrapperState={initialValue:Sa(et)}}function ib(o,i){var et=Sa(i.value),nt=Sa(i.defaultValue);et!=null&&(et=""+et,et!==o.value&&(o.value=et),i.defaultValue==null&&o.defaultValue!==et&&(o.defaultValue=et)),nt!=null&&(o.defaultValue=""+nt)}function jb(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,et,nt,ot){MSApp.execUnsafeLocalFunction(function(){return o(i,et,nt,ot)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function ob(o,i){if(i){var et=o.firstChild;if(et&&et===o.lastChild&&et.nodeType===3){et.nodeValue=i;return}}o.textContent=i}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),pb[i]=pb[o]})});function rb(o,i,et){return i==null||typeof i=="boolean"||i===""?"":et||typeof i!="number"||i===0||pb.hasOwnProperty(o)&&pb[o]?(""+i).trim():i+"px"}function sb(o,i){o=o.style;for(var et in i)if(i.hasOwnProperty(et)){var nt=et.indexOf("--")===0,ot=rb(et,i[et],nt);et==="float"&&(et="cssFloat"),nt?o.setProperty(et,ot):o[et]=ot}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,i){if(i){if(tb[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p$2(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p$2(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p$2(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p$2(62))}}function vb(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p$2(280));var i=o.stateNode;i&&(i=Db(i),yb(o.stateNode,o.type,i))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,i=Ab;if(Ab=zb=null,Bb(o),i)for(o=0;o<i.length;o++)Bb(i[o])}}function Gb(o,i){return o(i)}function Hb(){}var Ib=!1;function Jb(o,i,et){if(Ib)return o(i,et);Ib=!0;try{return Gb(o,i,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,i){var et=o.stateNode;if(et===null)return null;var nt=Db(et);if(nt===null)return null;et=nt[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(o=o.type,nt=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!nt;break e;default:o=!1}if(o)return null;if(et&&typeof et!="function")throw Error(p$2(231,i,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,i,et,nt,ot,st,lt,ht,ft){var St=Array.prototype.slice.call(arguments,3);try{i.apply(et,St)}catch(vt){this.onError(vt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,i,et,nt,ot,st,lt,ht,ft){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,i,et,nt,ot,st,lt,ht,ft){if(Tb.apply(this,arguments),Ob){if(Ob){var St=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=St)}}function Vb(o){var i=o,et=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(et=i.return),o=i.return;while(o)}return i.tag===3?et:null}function Wb(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p$2(188))}function Yb(o){var i=o.alternate;if(!i){if(i=Vb(o),i===null)throw Error(p$2(188));return i!==o?null:o}for(var et=o,nt=i;;){var ot=et.return;if(ot===null)break;var st=ot.alternate;if(st===null){if(nt=ot.return,nt!==null){et=nt;continue}break}if(ot.child===st.child){for(st=ot.child;st;){if(st===et)return Xb(ot),o;if(st===nt)return Xb(ot),i;st=st.sibling}throw Error(p$2(188))}if(et.return!==nt.return)et=ot,nt=st;else{for(var lt=!1,ht=ot.child;ht;){if(ht===et){lt=!0,et=ot,nt=st;break}if(ht===nt){lt=!0,nt=ot,et=st;break}ht=ht.sibling}if(!lt){for(ht=st.child;ht;){if(ht===et){lt=!0,et=st,nt=ot;break}if(ht===nt){lt=!0,nt=st,et=ot;break}ht=ht.sibling}if(!lt)throw Error(p$2(189))}}if(et.alternate!==nt)throw Error(p$2(190))}if(et.tag!==3)throw Error(p$2(188));return et.stateNode.current===et?o:i}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=$b(o);if(i!==null)return i;o=o.sibling}return null}var ac=ca$1.unstable_scheduleCallback,bc=ca$1.unstable_cancelCallback,cc=ca$1.unstable_shouldYield,dc=ca$1.unstable_requestPaint,B=ca$1.unstable_now,ec=ca$1.unstable_getCurrentPriorityLevel,fc=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc=ca$1.unstable_NormalPriority,ic=ca$1.unstable_LowPriority,jc=ca$1.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,i){var et=o.pendingLanes;if(et===0)return 0;var nt=0,ot=o.suspendedLanes,st=o.pingedLanes,lt=et&268435455;if(lt!==0){var ht=lt&~ot;ht!==0?nt=tc(ht):(st&=lt,st!==0&&(nt=tc(st)))}else lt=et&~ot,lt!==0?nt=tc(lt):st!==0&&(nt=tc(st));if(nt===0)return 0;if(i!==0&&i!==nt&&!(i&ot)&&(ot=nt&-nt,st=i&-i,ot>=st||ot===16&&(st&4194240)!==0))return i;if(nt&4&&(nt|=et&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=nt;0<i;)et=31-oc(i),ot=1<<et,nt|=o[et],i&=~ot;return nt}function vc(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,i){for(var et=o.suspendedLanes,nt=o.pingedLanes,ot=o.expirationTimes,st=o.pendingLanes;0<st;){var lt=31-oc(st),ht=1<<lt,ft=ot[lt];ft===-1?(!(ht&et)||ht&nt)&&(ot[lt]=vc(ht,i)):ft<=i&&(o.expiredLanes|=ht),st&=~ht}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var i=[],et=0;31>et;et++)i.push(o);return i}function Ac(o,i,et){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-oc(i),o[i]=et}function Bc(o,i){var et=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var nt=o.eventTimes;for(o=o.expirationTimes;0<et;){var ot=31-oc(et),st=1<<ot;i[ot]=0,nt[ot]=-1,o[ot]=-1,et&=~st}}function Cc(o,i){var et=o.entangledLanes|=i;for(o=o.entanglements;et;){var nt=31-oc(et),ot=1<<nt;ot&i|o[nt]&i&&(o[nt]|=i),et&=~ot}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,i){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(i.pointerId)}}function Tc$1(o,i,et,nt,ot,st){return o===null||o.nativeEvent!==st?(o={blockedOn:i,domEventName:et,eventSystemFlags:nt,nativeEvent:st,targetContainers:[ot]},i!==null&&(i=Cb(i),i!==null&&Fc(i)),o):(o.eventSystemFlags|=nt,i=o.targetContainers,ot!==null&&i.indexOf(ot)===-1&&i.push(ot),o)}function Uc(o,i,et,nt,ot){switch(i){case"focusin":return Lc=Tc$1(Lc,o,i,et,nt,ot),!0;case"dragenter":return Mc=Tc$1(Mc,o,i,et,nt,ot),!0;case"mouseover":return Nc=Tc$1(Nc,o,i,et,nt,ot),!0;case"pointerover":var st=ot.pointerId;return Oc.set(st,Tc$1(Oc.get(st)||null,o,i,et,nt,ot)),!0;case"gotpointercapture":return st=ot.pointerId,Pc.set(st,Tc$1(Pc.get(st)||null,o,i,et,nt,ot)),!0}return!1}function Vc(o){var i=Wc(o.target);if(i!==null){var et=Vb(i);if(et!==null){if(i=et.tag,i===13){if(i=Wb(et),i!==null){o.blockedOn=i,Ic(o.priority,function(){Gc(et)});return}}else if(i===3&&et.stateNode.current.memoizedState.isDehydrated){o.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var et=Yc(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(et===null){et=o.nativeEvent;var nt=new et.constructor(et.type,et);wb=nt,et.target.dispatchEvent(nt),wb=null}else return i=Cb(et),i!==null&&Fc(i),o.blockedOn=et,!1;i.shift()}return!0}function Zc(o,i,et){Xc(o)&&et.delete(i)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,i){o.blockedOn===i&&(o.blockedOn=null,Jc||(Jc=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c)))}function bd(o){function i(ot){return ad(ot,o)}if(0<Kc.length){ad(Kc[0],o);for(var et=1;et<Kc.length;et++){var nt=Kc[et];nt.blockedOn===o&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(i),Pc.forEach(i),et=0;et<Qc.length;et++)nt=Qc[et],nt.blockedOn===o&&(nt.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(o,i,et,nt){var ot=C,st=cd.transition;cd.transition=null;try{C=1,fd(o,i,et,nt)}finally{C=ot,cd.transition=st}}function gd(o,i,et,nt){var ot=C,st=cd.transition;cd.transition=null;try{C=4,fd(o,i,et,nt)}finally{C=ot,cd.transition=st}}function fd(o,i,et,nt){if(dd){var ot=Yc(o,i,et,nt);if(ot===null)hd(o,i,nt,id,et),Sc(o,nt);else if(Uc(ot,o,i,et,nt))nt.stopPropagation();else if(Sc(o,nt),i&4&&-1<Rc.indexOf(o)){for(;ot!==null;){var st=Cb(ot);if(st!==null&&Ec(st),st=Yc(o,i,et,nt),st===null&&hd(o,i,nt,id,et),st===ot)break;ot=st}ot!==null&&nt.stopPropagation()}else hd(o,i,nt,null,et)}}var id=null;function Yc(o,i,et,nt){if(id=null,o=xb(nt),o=Wc(o),o!==null)if(i=Vb(o),i===null)o=null;else if(et=i.tag,et===13){if(o=Wb(i),o!==null)return o;o=null}else if(et===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc$1:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,i=ld,et=i.length,nt,ot="value"in kd?kd.value:kd.textContent,st=ot.length;for(o=0;o<et&&i[o]===ot[o];o++);var lt=et-o;for(nt=1;nt<=lt&&i[et-nt]===ot[st-nt];nt++);return md=ot.slice(o,1<nt?1-nt:void 0)}function od(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function i(et,nt,ot,st,lt){this._reactName=et,this._targetInst=ot,this.type=nt,this.nativeEvent=st,this.target=lt,this.currentTarget=null;for(var ht in o)o.hasOwnProperty(ht)&&(et=o[ht],this[ht]=et?et(st):st[ht]);return this.isDefaultPrevented=(st.defaultPrevented!=null?st.defaultPrevented:st.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),i}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=Od[o])?!!i[o]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(o){if(o.key){var i=Md[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,i){switch(o){case"keyup":return $d.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je(o,i){switch(o){case"compositionend":return he(i);case"keypress":return i.which!==32?null:(fe=!0,ee);case"textInput":return o=i.data,o===ee&&fe?null:o;default:return null}}function ke(o,i){if(ie)return o==="compositionend"||!ae&&ge(o,i)?(o=nd(),md=ld=kd=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!le[o.type]:i==="textarea"}function ne(o,i,et,nt){Eb(nt),i=oe(i,"onChange"),0<i.length&&(et=new td("onChange","change",null,et,nt),o.push({event:et,listeners:i}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var i=ue(o);if(Wa(i))return o}function ve(o,i){if(o==="change")return i}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var i=[];ne(i,qe,o,xb(o)),Jb(re,i)}}function Ce(o,i,et){o==="focusin"?(Ae(),pe=i,qe=et,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,i){if(o==="click")return te(i)}function Fe(o,i){if(o==="input"||o==="change")return te(i)}function Ge(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,i){if(He(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var et=Object.keys(o),nt=Object.keys(i);if(et.length!==nt.length)return!1;for(nt=0;nt<et.length;nt++){var ot=et[nt];if(!ja.call(i,ot)||!He(o[ot],i[ot]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,i){var et=Je(o);o=0;for(var nt;et;){if(et.nodeType===3){if(nt=o+et.textContent.length,o<=i&&nt>=i)return{node:et,offset:i-o};o=nt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?Le(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function Me$1(){for(var o=window,i=Xa();i instanceof o.HTMLIFrameElement;){try{var et=typeof i.contentWindow.location.href=="string"}catch{et=!1}if(et)o=i.contentWindow;else break;i=Xa(o.document)}return i}function Ne(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function Oe(o){var i=Me$1(),et=o.focusedElem,nt=o.selectionRange;if(i!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(nt!==null&&Ne(et)){if(i=nt.start,o=nt.end,o===void 0&&(o=i),"selectionStart"in et)et.selectionStart=i,et.selectionEnd=Math.min(o,et.value.length);else if(o=(i=et.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var ot=et.textContent.length,st=Math.min(nt.start,ot);nt=nt.end===void 0?st:Math.min(nt.end,ot),!o.extend&&st>nt&&(ot=nt,nt=st,st=ot),ot=Ke(et,st);var lt=Ke(et,nt);ot&&lt&&(o.rangeCount!==1||o.anchorNode!==ot.node||o.anchorOffset!==ot.offset||o.focusNode!==lt.node||o.focusOffset!==lt.offset)&&(i=i.createRange(),i.setStart(ot.node,ot.offset),o.removeAllRanges(),st>nt?(o.addRange(i),o.extend(lt.node,lt.offset)):(i.setEnd(lt.node,lt.offset),o.addRange(i)))}}for(i=[],o=et;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<i.length;et++)o=i[et],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue$1(o,i,et){var nt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe(Re,"onSelect"),0<nt.length&&(i=new td("onSelect","select",null,i,et),o.push({event:i,listeners:nt}),i.target=Qe)))}function Ve(o,i){var et={};return et[o.toLowerCase()]=i.toLowerCase(),et["Webkit"+o]="webkit"+i,et["Moz"+o]="moz"+i,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var i=We[o],et;for(et in i)if(i.hasOwnProperty(et)&&et in Ye)return Xe[o]=i[et];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,i){df.set(o,i),fa(i,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,i,et){var nt=o.type||"unknown-event";o.currentTarget=et,Ub(nt,i,void 0,o),o.currentTarget=null}function se(o,i){i=(i&4)!==0;for(var et=0;et<o.length;et++){var nt=o[et],ot=nt.event;nt=nt.listeners;e:{var st=void 0;if(i)for(var lt=nt.length-1;0<=lt;lt--){var ht=nt[lt],ft=ht.instance,St=ht.currentTarget;if(ht=ht.listener,ft!==st&&ot.isPropagationStopped())break e;nf(ot,ht,St),st=ft}else for(lt=0;lt<nt.length;lt++){if(ht=nt[lt],ft=ht.instance,St=ht.currentTarget,ht=ht.listener,ft!==st&&ot.isPropagationStopped())break e;nf(ot,ht,St),st=ft}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,i){var et=i[of];et===void 0&&(et=i[of]=new Set);var nt=o+"__bubble";et.has(nt)||(pf(i,o,2,!1),et.add(nt))}function qf(o,i,et){var nt=0;i&&(nt|=4),pf(et,o,nt,i)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da$1.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,o),qf(et,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[rf]||(i[rf]=!0,qf("selectionchange",!1,i))}}function pf(o,i,et,nt){switch(jd(i)){case 1:var ot=ed;break;case 4:ot=gd;break;default:ot=fd}et=ot.bind(null,i,et,o),ot=void 0,!Lb||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(ot=!0),nt?ot!==void 0?o.addEventListener(i,et,{capture:!0,passive:ot}):o.addEventListener(i,et,!0):ot!==void 0?o.addEventListener(i,et,{passive:ot}):o.addEventListener(i,et,!1)}function hd(o,i,et,nt,ot){var st=nt;if(!(i&1)&&!(i&2)&&nt!==null)e:for(;;){if(nt===null)return;var lt=nt.tag;if(lt===3||lt===4){var ht=nt.stateNode.containerInfo;if(ht===ot||ht.nodeType===8&&ht.parentNode===ot)break;if(lt===4)for(lt=nt.return;lt!==null;){var ft=lt.tag;if((ft===3||ft===4)&&(ft=lt.stateNode.containerInfo,ft===ot||ft.nodeType===8&&ft.parentNode===ot))return;lt=lt.return}for(;ht!==null;){if(lt=Wc(ht),lt===null)return;if(ft=lt.tag,ft===5||ft===6){nt=st=lt;continue e}ht=ht.parentNode}}nt=nt.return}Jb(function(){var St=st,vt=xb(et),Rt=[];e:{var wt=df.get(o);if(wt!==void 0){var $t=td,Dt=o;switch(o){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":$t=Rd;break;case"focusin":Dt="focus",$t=Fd;break;case"focusout":Dt="blur",$t=Fd;break;case"beforeblur":case"afterblur":$t=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=Vd;break;case $e:case af:case bf:$t=Hd;break;case cf:$t=Xd;break;case"scroll":$t=vd;break;case"wheel":$t=Zd;break;case"copy":case"cut":case"paste":$t=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=Td}var Pt=(i&4)!==0,Ut=!Pt&&o==="scroll",Ot=Pt?wt!==null?wt+"Capture":null:wt;Pt=[];for(var Lt=St,xt;Lt!==null;){xt=Lt;var jt=xt.stateNode;if(xt.tag===5&&jt!==null&&(xt=jt,Ot!==null&&(jt=Kb(Lt,Ot),jt!=null&&Pt.push(tf(Lt,jt,xt)))),Ut)break;Lt=Lt.return}0<Pt.length&&(wt=new $t(wt,Dt,null,et,vt),Rt.push({event:wt,listeners:Pt}))}}if(!(i&7)){e:{if(wt=o==="mouseover"||o==="pointerover",$t=o==="mouseout"||o==="pointerout",wt&&et!==wb&&(Dt=et.relatedTarget||et.fromElement)&&(Wc(Dt)||Dt[uf]))break e;if(($t||wt)&&(wt=vt.window===vt?vt:(wt=vt.ownerDocument)?wt.defaultView||wt.parentWindow:window,$t?(Dt=et.relatedTarget||et.toElement,$t=St,Dt=Dt?Wc(Dt):null,Dt!==null&&(Ut=Vb(Dt),Dt!==Ut||Dt.tag!==5&&Dt.tag!==6)&&(Dt=null)):($t=null,Dt=St),$t!==Dt)){if(Pt=Bd,jt="onMouseLeave",Ot="onMouseEnter",Lt="mouse",(o==="pointerout"||o==="pointerover")&&(Pt=Td,jt="onPointerLeave",Ot="onPointerEnter",Lt="pointer"),Ut=$t==null?wt:ue($t),xt=Dt==null?wt:ue(Dt),wt=new Pt(jt,Lt+"leave",$t,et,vt),wt.target=Ut,wt.relatedTarget=xt,jt=null,Wc(vt)===St&&(Pt=new Pt(Ot,Lt+"enter",Dt,et,vt),Pt.target=xt,Pt.relatedTarget=Ut,jt=Pt),Ut=jt,$t&&Dt)t:{for(Pt=$t,Ot=Dt,Lt=0,xt=Pt;xt;xt=vf(xt))Lt++;for(xt=0,jt=Ot;jt;jt=vf(jt))xt++;for(;0<Lt-xt;)Pt=vf(Pt),Lt--;for(;0<xt-Lt;)Ot=vf(Ot),xt--;for(;Lt--;){if(Pt===Ot||Ot!==null&&Pt===Ot.alternate)break t;Pt=vf(Pt),Ot=vf(Ot)}Pt=null}else Pt=null;$t!==null&&wf(Rt,wt,$t,Pt,!1),Dt!==null&&Ut!==null&&wf(Rt,Ut,Dt,Pt,!0)}}e:{if(wt=St?ue(St):window,$t=wt.nodeName&&wt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&wt.type==="file")var Ht=ve;else if(me(wt))if(we)Ht=Fe;else{Ht=De;var qt=Ce}else($t=wt.nodeName)&&$t.toLowerCase()==="input"&&(wt.type==="checkbox"||wt.type==="radio")&&(Ht=Ee);if(Ht&&(Ht=Ht(o,St))){ne(Rt,Ht,et,vt);break e}qt&&qt(o,wt,St),o==="focusout"&&(qt=wt._wrapperState)&&qt.controlled&&wt.type==="number"&&cb(wt,"number",wt.value)}switch(qt=St?ue(St):window,o){case"focusin":(me(qt)||qt.contentEditable==="true")&&(Qe=qt,Re=St,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue$1(Rt,et,vt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(Rt,et,vt)}var Kt;if(ae)e:{switch(o){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else ie?ge(o,et)&&(nn="onCompositionEnd"):o==="keydown"&&et.keyCode===229&&(nn="onCompositionStart");nn&&(de&&et.locale!=="ko"&&(ie||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&ie&&(Kt=nd()):(kd=vt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),qt=oe(St,nn),0<qt.length&&(nn=new Ld(nn,o,null,et,vt),Rt.push({event:nn,listeners:qt}),Kt?nn.data=Kt:(Kt=he(et),Kt!==null&&(nn.data=Kt)))),(Kt=ce?je(o,et):ke(o,et))&&(St=oe(St,"onBeforeInput"),0<St.length&&(vt=new Ld("onBeforeInput","beforeinput",null,et,vt),Rt.push({event:vt,listeners:St}),vt.data=Kt))}se(Rt,i)})}function tf(o,i,et){return{instance:o,listener:i,currentTarget:et}}function oe(o,i){for(var et=i+"Capture",nt=[];o!==null;){var ot=o,st=ot.stateNode;ot.tag===5&&st!==null&&(ot=st,st=Kb(o,et),st!=null&&nt.unshift(tf(o,st,ot)),st=Kb(o,i),st!=null&&nt.push(tf(o,st,ot))),o=o.return}return nt}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,i,et,nt,ot){for(var st=i._reactName,lt=[];et!==null&&et!==nt;){var ht=et,ft=ht.alternate,St=ht.stateNode;if(ft!==null&&ft===nt)break;ht.tag===5&&St!==null&&(ht=St,ot?(ft=Kb(et,st),ft!=null&&lt.unshift(tf(et,ft,ht))):ot||(ft=Kb(et,st),ft!=null&&lt.push(tf(et,ft,ht)))),et=et.return}lt.length!==0&&o.push({event:i,listeners:lt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,i,et){if(i=zf(i),zf(o)!==i&&et)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,i){var et=i,nt=0;do{var ot=et.nextSibling;if(o.removeChild(et),ot&&ot.nodeType===8)if(et=ot.data,et==="/$"){if(nt===0){o.removeChild(ot),bd(i);return}nt--}else et!=="$"&&et!=="$?"&&et!=="$!"||nt++;et=ot}while(et);bd(i)}function Lf(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var et=o.data;if(et==="$"||et==="$!"||et==="$?"){if(i===0)return o;i--}else et==="/$"&&i++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var i=o[Of];if(i)return i;for(var et=o.parentNode;et;){if(i=et[uf]||et[Of]){if(et=i.alternate,i.child!==null||et!==null&&et.child!==null)for(o=Mf(o);o!==null;){if(et=o[Of])return et;o=Mf(o)}return i}o=et,et=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p$2(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,i){Tf++,Sf[Tf]=o.current,o.current=i}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,i){var et=o.type.contextTypes;if(!et)return Vf;var nt=o.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===i)return nt.__reactInternalMemoizedMaskedChildContext;var ot={},st;for(st in et)ot[st]=i[st];return nt&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=ot),ot}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,i,et){if(H.current!==Vf)throw Error(p$2(168));G(H,i),G(Wf,et)}function bg(o,i,et){var nt=o.stateNode;if(i=i.childContextTypes,typeof nt.getChildContext!="function")return et;nt=nt.getChildContext();for(var ot in nt)if(!(ot in i))throw Error(p$2(108,Ra(o)||"Unknown",ot));return A({},et,nt)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,i,et){var nt=o.stateNode;if(!nt)throw Error(p$2(169));et?(o=bg(o,i,Xf),nt.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,i=C;try{var et=eg;for(C=1;o<et.length;o++){var nt=et[o];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(ot){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),ot}finally{C=i,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,i){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=i}function ug(o,i,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var nt=rg;o=sg;var ot=32-oc(nt)-1;nt&=~(1<<ot),et+=1;var st=32-oc(i)+ot;if(30<st){var lt=ot-ot%5;st=(nt&(1<<lt)-1).toString(32),nt>>=lt,ot-=lt,rg=1<<32-oc(i)+ot|et<<ot|nt,sg=st+o}else rg=1<<st|et<<ot|nt,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(o,i){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=i,et.return=o,i=o.deletions,i===null?(o.deletions=[et],o.flags|=16):i.push(et)}function Cg(o,i){switch(o.tag){case 5:var et=o.type;return i=i.nodeType!==1||et.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,xg=o,yg=Lf(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,xg=o,yg=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(et=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:i,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=i,et.return=o,o.child=et,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I){var i=yg;if(i){var et=i;if(!Cg(o,i)){if(Dg(o))throw Error(p$2(418));i=Lf(et.nextSibling);var nt=xg;i&&Cg(o,i)?Ag(nt,et):(o.flags=o.flags&-4097|2,I=!1,xg=o)}}else{if(Dg(o))throw Error(p$2(418));o.flags=o.flags&-4097|2,I=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I)return Fg(o),I=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!Ef(o.type,o.memoizedProps)),i&&(i=yg)){if(Dg(o))throw Hg(),Error(p$2(418));for(;i;)Ag(o,i),i=Lf(i.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p$2(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var et=o.data;if(et==="/$"){if(i===0){yg=Lf(o.nextSibling);break e}i--}else et!=="$"&&et!=="$!"&&et!=="$?"||i++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua.ReactCurrentBatchConfig;function Lg(o,i){if(o&&o.defaultProps){i=A({},i),o=o.defaultProps;for(var et in o)i[et]===void 0&&(i[et]=o[et]);return i}return i}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(o){var i=Mg.current;E(Mg),o._currentValue=i}function Sg(o,i,et){for(;o!==null;){var nt=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,nt!==null&&(nt.childLanes|=i)):nt!==null&&(nt.childLanes&i)!==i&&(nt.childLanes|=i),o===et)break;o=o.return}}function Tg(o,i){Ng=o,Pg=Og=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(Ug=!0),o.firstContext=null)}function Vg(o){var i=o._currentValue;if(Pg!==o)if(o={context:o,memoizedValue:i,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=o,Ng.dependencies={lanes:0,firstContext:o}}else Og=Og.next=o;return i}var Wg=null;function Xg(o){Wg===null?Wg=[o]:Wg.push(o)}function Yg(o,i,et,nt){var ot=i.interleaved;return ot===null?(et.next=et,Xg(i)):(et.next=ot.next,ot.next=et),i.interleaved=et,Zg(o,nt)}function Zg(o,i){o.lanes|=i;var et=o.alternate;for(et!==null&&(et.lanes|=i),et=o,o=o.return;o!==null;)o.childLanes|=i,et=o.alternate,et!==null&&(et.childLanes|=i),et=o,o=o.return;return et.tag===3?et.stateNode:null}var $g=!1;function ah(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ch(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function dh(o,i,et){var nt=o.updateQueue;if(nt===null)return null;if(nt=nt.shared,K&2){var ot=nt.pending;return ot===null?i.next=i:(i.next=ot.next,ot.next=i),nt.pending=i,Zg(o,et)}return ot=nt.interleaved,ot===null?(i.next=i,Xg(nt)):(i.next=ot.next,ot.next=i),nt.interleaved=i,Zg(o,et)}function eh(o,i,et){if(i=i.updateQueue,i!==null&&(i=i.shared,(et&4194240)!==0)){var nt=i.lanes;nt&=o.pendingLanes,et|=nt,i.lanes=et,Cc(o,et)}}function fh(o,i){var et=o.updateQueue,nt=o.alternate;if(nt!==null&&(nt=nt.updateQueue,et===nt)){var ot=null,st=null;if(et=et.firstBaseUpdate,et!==null){do{var lt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};st===null?ot=st=lt:st=st.next=lt,et=et.next}while(et!==null);st===null?ot=st=i:st=st.next=i}else ot=st=i;et={baseState:nt.baseState,firstBaseUpdate:ot,lastBaseUpdate:st,shared:nt.shared,effects:nt.effects},o.updateQueue=et;return}o=et.lastBaseUpdate,o===null?et.firstBaseUpdate=i:o.next=i,et.lastBaseUpdate=i}function gh(o,i,et,nt){var ot=o.updateQueue;$g=!1;var st=ot.firstBaseUpdate,lt=ot.lastBaseUpdate,ht=ot.shared.pending;if(ht!==null){ot.shared.pending=null;var ft=ht,St=ft.next;ft.next=null,lt===null?st=St:lt.next=St,lt=ft;var vt=o.alternate;vt!==null&&(vt=vt.updateQueue,ht=vt.lastBaseUpdate,ht!==lt&&(ht===null?vt.firstBaseUpdate=St:ht.next=St,vt.lastBaseUpdate=ft))}if(st!==null){var Rt=ot.baseState;lt=0,vt=St=ft=null,ht=st;do{var wt=ht.lane,$t=ht.eventTime;if((nt&wt)===wt){vt!==null&&(vt=vt.next={eventTime:$t,lane:0,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null});e:{var Dt=o,Pt=ht;switch(wt=i,$t=et,Pt.tag){case 1:if(Dt=Pt.payload,typeof Dt=="function"){Rt=Dt.call($t,Rt,wt);break e}Rt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Pt.payload,wt=typeof Dt=="function"?Dt.call($t,Rt,wt):Dt,wt==null)break e;Rt=A({},Rt,wt);break e;case 2:$g=!0}}ht.callback!==null&&ht.lane!==0&&(o.flags|=64,wt=ot.effects,wt===null?ot.effects=[ht]:wt.push(ht))}else $t={eventTime:$t,lane:wt,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null},vt===null?(St=vt=$t,ft=Rt):vt=vt.next=$t,lt|=wt;if(ht=ht.next,ht===null){if(ht=ot.shared.pending,ht===null)break;wt=ht,ht=wt.next,wt.next=null,ot.lastBaseUpdate=wt,ot.shared.pending=null}}while(!0);if(vt===null&&(ft=Rt),ot.baseState=ft,ot.firstBaseUpdate=St,ot.lastBaseUpdate=vt,i=ot.shared.interleaved,i!==null){ot=i;do lt|=ot.lane,ot=ot.next;while(ot!==i)}else st===null&&(ot.shared.lanes=0);hh|=lt,o.lanes=lt,o.memoizedState=Rt}}function ih(o,i,et){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var nt=o[i],ot=nt.callback;if(ot!==null){if(nt.callback=null,nt=et,typeof ot!="function")throw Error(p$2(191,ot));ot.call(nt)}}}var jh=new aa$1.Component().refs;function kh(o,i,et,nt){i=o.memoizedState,et=et(nt,i),et=et==null?i:A({},i,et),o.memoizedState=et,o.lanes===0&&(o.updateQueue.baseState=et)}var nh={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,i,et){o=o._reactInternals;var nt=L(),ot=lh(o),st=ch(nt,ot);st.payload=i,et!=null&&(st.callback=et),i=dh(o,st,ot),i!==null&&(mh(i,o,ot,nt),eh(i,o,ot))},enqueueReplaceState:function(o,i,et){o=o._reactInternals;var nt=L(),ot=lh(o),st=ch(nt,ot);st.tag=1,st.payload=i,et!=null&&(st.callback=et),i=dh(o,st,ot),i!==null&&(mh(i,o,ot,nt),eh(i,o,ot))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var et=L(),nt=lh(o),ot=ch(et,nt);ot.tag=2,i!=null&&(ot.callback=i),i=dh(o,ot,nt),i!==null&&(mh(i,o,nt,et),eh(i,o,nt))}};function oh(o,i,et,nt,ot,st,lt){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(nt,st,lt):i.prototype&&i.prototype.isPureReactComponent?!Ie(et,nt)||!Ie(ot,st):!0}function ph(o,i,et){var nt=!1,ot=Vf,st=i.contextType;return typeof st=="object"&&st!==null?st=Vg(st):(ot=Zf(i)?Xf:H.current,nt=i.contextTypes,st=(nt=nt!=null)?Yf(o,ot):Vf),i=new i(et,st),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=nh,o.stateNode=i,i._reactInternals=o,nt&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=ot,o.__reactInternalMemoizedMaskedChildContext=st),i}function qh(o,i,et,nt){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(et,nt),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(et,nt),i.state!==o&&nh.enqueueReplaceState(i,i.state,null)}function rh(o,i,et,nt){var ot=o.stateNode;ot.props=et,ot.state=o.memoizedState,ot.refs=jh,ah(o);var st=i.contextType;typeof st=="object"&&st!==null?ot.context=Vg(st):(st=Zf(i)?Xf:H.current,ot.context=Yf(o,st)),ot.state=o.memoizedState,st=i.getDerivedStateFromProps,typeof st=="function"&&(kh(o,i,st,et),ot.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof ot.getSnapshotBeforeUpdate=="function"||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(i=ot.state,typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount(),i!==ot.state&&nh.enqueueReplaceState(ot,ot.state,null),gh(o,et,ot,nt),ot.state=o.memoizedState),typeof ot.componentDidMount=="function"&&(o.flags|=4194308)}function sh(o,i,et){if(o=et.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$2(309));var nt=et.stateNode}if(!nt)throw Error(p$2(147,o));var ot=nt,st=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===st?i.ref:(i=function(lt){var ht=ot.refs;ht===jh&&(ht=ot.refs={}),lt===null?delete ht[st]:ht[st]=lt},i._stringRef=st,i)}if(typeof o!="string")throw Error(p$2(284));if(!et._owner)throw Error(p$2(290,o))}return o}function th(o,i){throw o=Object.prototype.toString.call(i),Error(p$2(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function uh(o){var i=o._init;return i(o._payload)}function vh(o){function i(Ot,Lt){if(o){var xt=Ot.deletions;xt===null?(Ot.deletions=[Lt],Ot.flags|=16):xt.push(Lt)}}function et(Ot,Lt){if(!o)return null;for(;Lt!==null;)i(Ot,Lt),Lt=Lt.sibling;return null}function nt(Ot,Lt){for(Ot=new Map;Lt!==null;)Lt.key!==null?Ot.set(Lt.key,Lt):Ot.set(Lt.index,Lt),Lt=Lt.sibling;return Ot}function ot(Ot,Lt){return Ot=wh(Ot,Lt),Ot.index=0,Ot.sibling=null,Ot}function st(Ot,Lt,xt){return Ot.index=xt,o?(xt=Ot.alternate,xt!==null?(xt=xt.index,xt<Lt?(Ot.flags|=2,Lt):xt):(Ot.flags|=2,Lt)):(Ot.flags|=1048576,Lt)}function lt(Ot){return o&&Ot.alternate===null&&(Ot.flags|=2),Ot}function ht(Ot,Lt,xt,jt){return Lt===null||Lt.tag!==6?(Lt=xh(xt,Ot.mode,jt),Lt.return=Ot,Lt):(Lt=ot(Lt,xt),Lt.return=Ot,Lt)}function ft(Ot,Lt,xt,jt){var Ht=xt.type;return Ht===ya?vt(Ot,Lt,xt.props.children,jt,xt.key):Lt!==null&&(Lt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Ha&&uh(Ht)===Lt.type)?(jt=ot(Lt,xt.props),jt.ref=sh(Ot,Lt,xt),jt.return=Ot,jt):(jt=yh(xt.type,xt.key,xt.props,null,Ot.mode,jt),jt.ref=sh(Ot,Lt,xt),jt.return=Ot,jt)}function St(Ot,Lt,xt,jt){return Lt===null||Lt.tag!==4||Lt.stateNode.containerInfo!==xt.containerInfo||Lt.stateNode.implementation!==xt.implementation?(Lt=zh(xt,Ot.mode,jt),Lt.return=Ot,Lt):(Lt=ot(Lt,xt.children||[]),Lt.return=Ot,Lt)}function vt(Ot,Lt,xt,jt,Ht){return Lt===null||Lt.tag!==7?(Lt=Ah(xt,Ot.mode,jt,Ht),Lt.return=Ot,Lt):(Lt=ot(Lt,xt),Lt.return=Ot,Lt)}function Rt(Ot,Lt,xt){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return Lt=xh(""+Lt,Ot.mode,xt),Lt.return=Ot,Lt;if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case va:return xt=yh(Lt.type,Lt.key,Lt.props,null,Ot.mode,xt),xt.ref=sh(Ot,null,Lt),xt.return=Ot,xt;case wa:return Lt=zh(Lt,Ot.mode,xt),Lt.return=Ot,Lt;case Ha:var jt=Lt._init;return Rt(Ot,jt(Lt._payload),xt)}if(eb(Lt)||Ka(Lt))return Lt=Ah(Lt,Ot.mode,xt,null),Lt.return=Ot,Lt;th(Ot,Lt)}return null}function wt(Ot,Lt,xt,jt){var Ht=Lt!==null?Lt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ht!==null?null:ht(Ot,Lt,""+xt,jt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===Ht?ft(Ot,Lt,xt,jt):null;case wa:return xt.key===Ht?St(Ot,Lt,xt,jt):null;case Ha:return Ht=xt._init,wt(Ot,Lt,Ht(xt._payload),jt)}if(eb(xt)||Ka(xt))return Ht!==null?null:vt(Ot,Lt,xt,jt,null);th(Ot,xt)}return null}function $t(Ot,Lt,xt,jt,Ht){if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Ot=Ot.get(xt)||null,ht(Lt,Ot,""+jt,Ht);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case va:return Ot=Ot.get(jt.key===null?xt:jt.key)||null,ft(Lt,Ot,jt,Ht);case wa:return Ot=Ot.get(jt.key===null?xt:jt.key)||null,St(Lt,Ot,jt,Ht);case Ha:var qt=jt._init;return $t(Ot,Lt,xt,qt(jt._payload),Ht)}if(eb(jt)||Ka(jt))return Ot=Ot.get(xt)||null,vt(Lt,Ot,jt,Ht,null);th(Lt,jt)}return null}function Dt(Ot,Lt,xt,jt){for(var Ht=null,qt=null,Kt=Lt,nn=Lt=0,Zt=null;Kt!==null&&nn<xt.length;nn++){Kt.index>nn?(Zt=Kt,Kt=null):Zt=Kt.sibling;var tn=wt(Ot,Kt,xt[nn],jt);if(tn===null){Kt===null&&(Kt=Zt);break}o&&Kt&&tn.alternate===null&&i(Ot,Kt),Lt=st(tn,Lt,nn),qt===null?Ht=tn:qt.sibling=tn,qt=tn,Kt=Zt}if(nn===xt.length)return et(Ot,Kt),I&&tg(Ot,nn),Ht;if(Kt===null){for(;nn<xt.length;nn++)Kt=Rt(Ot,xt[nn],jt),Kt!==null&&(Lt=st(Kt,Lt,nn),qt===null?Ht=Kt:qt.sibling=Kt,qt=Kt);return I&&tg(Ot,nn),Ht}for(Kt=nt(Ot,Kt);nn<xt.length;nn++)Zt=$t(Kt,Ot,nn,xt[nn],jt),Zt!==null&&(o&&Zt.alternate!==null&&Kt.delete(Zt.key===null?nn:Zt.key),Lt=st(Zt,Lt,nn),qt===null?Ht=Zt:qt.sibling=Zt,qt=Zt);return o&&Kt.forEach(function(dn){return i(Ot,dn)}),I&&tg(Ot,nn),Ht}function Pt(Ot,Lt,xt,jt){var Ht=Ka(xt);if(typeof Ht!="function")throw Error(p$2(150));if(xt=Ht.call(xt),xt==null)throw Error(p$2(151));for(var qt=Ht=null,Kt=Lt,nn=Lt=0,Zt=null,tn=xt.next();Kt!==null&&!tn.done;nn++,tn=xt.next()){Kt.index>nn?(Zt=Kt,Kt=null):Zt=Kt.sibling;var dn=wt(Ot,Kt,tn.value,jt);if(dn===null){Kt===null&&(Kt=Zt);break}o&&Kt&&dn.alternate===null&&i(Ot,Kt),Lt=st(dn,Lt,nn),qt===null?Ht=dn:qt.sibling=dn,qt=dn,Kt=Zt}if(tn.done)return et(Ot,Kt),I&&tg(Ot,nn),Ht;if(Kt===null){for(;!tn.done;nn++,tn=xt.next())tn=Rt(Ot,tn.value,jt),tn!==null&&(Lt=st(tn,Lt,nn),qt===null?Ht=tn:qt.sibling=tn,qt=tn);return I&&tg(Ot,nn),Ht}for(Kt=nt(Ot,Kt);!tn.done;nn++,tn=xt.next())tn=$t(Kt,Ot,nn,tn.value,jt),tn!==null&&(o&&tn.alternate!==null&&Kt.delete(tn.key===null?nn:tn.key),Lt=st(tn,Lt,nn),qt===null?Ht=tn:qt.sibling=tn,qt=tn);return o&&Kt.forEach(function(wn){return i(Ot,wn)}),I&&tg(Ot,nn),Ht}function Ut(Ot,Lt,xt,jt){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:e:{for(var Ht=xt.key,qt=Lt;qt!==null;){if(qt.key===Ht){if(Ht=xt.type,Ht===ya){if(qt.tag===7){et(Ot,qt.sibling),Lt=ot(qt,xt.props.children),Lt.return=Ot,Ot=Lt;break e}}else if(qt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Ha&&uh(Ht)===qt.type){et(Ot,qt.sibling),Lt=ot(qt,xt.props),Lt.ref=sh(Ot,qt,xt),Lt.return=Ot,Ot=Lt;break e}et(Ot,qt);break}else i(Ot,qt);qt=qt.sibling}xt.type===ya?(Lt=Ah(xt.props.children,Ot.mode,jt,xt.key),Lt.return=Ot,Ot=Lt):(jt=yh(xt.type,xt.key,xt.props,null,Ot.mode,jt),jt.ref=sh(Ot,Lt,xt),jt.return=Ot,Ot=jt)}return lt(Ot);case wa:e:{for(qt=xt.key;Lt!==null;){if(Lt.key===qt)if(Lt.tag===4&&Lt.stateNode.containerInfo===xt.containerInfo&&Lt.stateNode.implementation===xt.implementation){et(Ot,Lt.sibling),Lt=ot(Lt,xt.children||[]),Lt.return=Ot,Ot=Lt;break e}else{et(Ot,Lt);break}else i(Ot,Lt);Lt=Lt.sibling}Lt=zh(xt,Ot.mode,jt),Lt.return=Ot,Ot=Lt}return lt(Ot);case Ha:return qt=xt._init,Ut(Ot,Lt,qt(xt._payload),jt)}if(eb(xt))return Dt(Ot,Lt,xt,jt);if(Ka(xt))return Pt(Ot,Lt,xt,jt);th(Ot,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,Lt!==null&&Lt.tag===6?(et(Ot,Lt.sibling),Lt=ot(Lt,xt),Lt.return=Ot,Ot=Lt):(et(Ot,Lt),Lt=xh(xt,Ot.mode,jt),Lt.return=Ot,Ot=Lt),lt(Ot)):et(Ot,Lt)}return Ut}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(o){if(o===Dh)throw Error(p$2(174));return o}function Ih(o,i){switch(G(Gh,i),G(Fh,o),G(Eh,Dh),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=lb(i,o)}E(Eh),G(Eh,i)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(o){Hh(Gh.current);var i=Hh(Eh.current),et=lb(i,o.type);i!==et&&(G(Fh,o),G(Eh,et))}function Lh(o){Fh.current===o&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(o){for(var i=o;i!==null;){if(i.tag===13){var et=i.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nh=[];function Oh(){for(var o=0;o<Nh.length;o++)Nh[o]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$2(321))}function Wh(o,i){if(i===null)return!1;for(var et=0;et<i.length&&et<o.length;et++)if(!He(o[et],i[et]))return!1;return!0}function Xh(o,i,et,nt,ot,st){if(Rh=st,N=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ph.current=o===null||o.memoizedState===null?Yh:Zh,o=et(nt,ot),Th){st=0;do{if(Th=!1,Uh=0,25<=st)throw Error(p$2(301));st+=1,P=O=null,i.updateQueue=null,Ph.current=$h,o=et(nt,ot)}while(Th)}if(Ph.current=ai,i=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,i)throw Error(p$2(300));return o}function bi(){var o=Uh!==0;return Uh=0,o}function ci(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=o:P=P.next=o,P}function di(){if(O===null){var o=N.alternate;o=o!==null?o.memoizedState:null}else o=O.next;var i=P===null?N.memoizedState:P.next;if(i!==null)P=i,O=o;else{if(o===null)throw Error(p$2(310));O=o,o={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=o:P=P.next=o}return P}function ei(o,i){return typeof i=="function"?i(o):i}function fi(o){var i=di(),et=i.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=o;var nt=O,ot=nt.baseQueue,st=et.pending;if(st!==null){if(ot!==null){var lt=ot.next;ot.next=st.next,st.next=lt}nt.baseQueue=ot=st,et.pending=null}if(ot!==null){st=ot.next,nt=nt.baseState;var ht=lt=null,ft=null,St=st;do{var vt=St.lane;if((Rh&vt)===vt)ft!==null&&(ft=ft.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),nt=St.hasEagerState?St.eagerState:o(nt,St.action);else{var Rt={lane:vt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};ft===null?(ht=ft=Rt,lt=nt):ft=ft.next=Rt,N.lanes|=vt,hh|=vt}St=St.next}while(St!==null&&St!==st);ft===null?lt=nt:ft.next=ht,He(nt,i.memoizedState)||(Ug=!0),i.memoizedState=nt,i.baseState=lt,i.baseQueue=ft,et.lastRenderedState=nt}if(o=et.interleaved,o!==null){ot=o;do st=ot.lane,N.lanes|=st,hh|=st,ot=ot.next;while(ot!==o)}else ot===null&&(et.lanes=0);return[i.memoizedState,et.dispatch]}function gi(o){var i=di(),et=i.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=o;var nt=et.dispatch,ot=et.pending,st=i.memoizedState;if(ot!==null){et.pending=null;var lt=ot=ot.next;do st=o(st,lt.action),lt=lt.next;while(lt!==ot);He(st,i.memoizedState)||(Ug=!0),i.memoizedState=st,i.baseQueue===null&&(i.baseState=st),et.lastRenderedState=st}return[st,nt]}function hi(){}function ii(o,i){var et=N,nt=di(),ot=i(),st=!He(nt.memoizedState,ot);if(st&&(nt.memoizedState=ot,Ug=!0),nt=nt.queue,ji(ki.bind(null,et,nt,o),[o]),nt.getSnapshot!==i||st||P!==null&&P.memoizedState.tag&1){if(et.flags|=2048,li(9,mi.bind(null,et,nt,ot,i),void 0,null),R===null)throw Error(p$2(349));Rh&30||ni$1(et,i,ot)}return ot}function ni$1(o,i,et){o.flags|=16384,o={getSnapshot:i,value:et},i=N.updateQueue,i===null?(i={lastEffect:null,stores:null},N.updateQueue=i,i.stores=[o]):(et=i.stores,et===null?i.stores=[o]:et.push(o))}function mi(o,i,et,nt){i.value=et,i.getSnapshot=nt,oi(i)&&pi(o)}function ki(o,i,et){return et(function(){oi(i)&&pi(o)})}function oi(o){var i=o.getSnapshot;o=o.value;try{var et=i();return!He(o,et)}catch{return!0}}function pi(o){var i=Zg(o,1);i!==null&&mh(i,o,1,-1)}function qi(o){var i=ci();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:o},i.queue=o,o=o.dispatch=ri.bind(null,N,o),[i.memoizedState,o]}function li(o,i,et,nt){return o={tag:o,create:i,destroy:et,deps:nt,next:null},i=N.updateQueue,i===null?(i={lastEffect:null,stores:null},N.updateQueue=i,i.lastEffect=o.next=o):(et=i.lastEffect,et===null?i.lastEffect=o.next=o:(nt=et.next,et.next=o,o.next=nt,i.lastEffect=o)),o}function si(){return di().memoizedState}function ti(o,i,et,nt){var ot=ci();N.flags|=o,ot.memoizedState=li(1|i,et,void 0,nt===void 0?null:nt)}function ui(o,i,et,nt){var ot=di();nt=nt===void 0?null:nt;var st=void 0;if(O!==null){var lt=O.memoizedState;if(st=lt.destroy,nt!==null&&Wh(nt,lt.deps)){ot.memoizedState=li(i,et,st,nt);return}}N.flags|=o,ot.memoizedState=li(1|i,et,st,nt)}function vi(o,i){return ti(8390656,8,o,i)}function ji(o,i){return ui(2048,8,o,i)}function wi(o,i){return ui(4,2,o,i)}function xi(o,i){return ui(4,4,o,i)}function yi$1(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function zi(o,i,et){return et=et!=null?et.concat([o]):null,ui(4,4,yi$1.bind(null,i,o),et)}function Ai(){}function Bi(o,i){var et=di();i=i===void 0?null:i;var nt=et.memoizedState;return nt!==null&&i!==null&&Wh(i,nt[1])?nt[0]:(et.memoizedState=[o,i],o)}function Ci(o,i){var et=di();i=i===void 0?null:i;var nt=et.memoizedState;return nt!==null&&i!==null&&Wh(i,nt[1])?nt[0]:(o=o(),et.memoizedState=[o,i],o)}function Di(o,i,et){return Rh&21?(He(et,i)||(et=yc(),N.lanes|=et,hh|=et,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,Ug=!0),o.memoizedState=et)}function Ei(o,i){var et=C;C=et!==0&&4>et?et:4,o(!0);var nt=Qh.transition;Qh.transition={};try{o(!1),i()}finally{C=et,Qh.transition=nt}}function Fi(){return di().memoizedState}function Gi(o,i,et){var nt=lh(o);if(et={lane:nt,action:et,hasEagerState:!1,eagerState:null,next:null},Hi(o))Ii(i,et);else if(et=Yg(o,i,et,nt),et!==null){var ot=L();mh(et,o,nt,ot),Ji(et,i,nt)}}function ri(o,i,et){var nt=lh(o),ot={lane:nt,action:et,hasEagerState:!1,eagerState:null,next:null};if(Hi(o))Ii(i,ot);else{var st=o.alternate;if(o.lanes===0&&(st===null||st.lanes===0)&&(st=i.lastRenderedReducer,st!==null))try{var lt=i.lastRenderedState,ht=st(lt,et);if(ot.hasEagerState=!0,ot.eagerState=ht,He(ht,lt)){var ft=i.interleaved;ft===null?(ot.next=ot,Xg(i)):(ot.next=ft.next,ft.next=ot),i.interleaved=ot;return}}catch{}finally{}et=Yg(o,i,ot,nt),et!==null&&(ot=L(),mh(et,o,nt,ot),Ji(et,i,nt))}}function Hi(o){var i=o.alternate;return o===N||i!==null&&i===N}function Ii(o,i){Th=Sh=!0;var et=o.pending;et===null?i.next=i:(i.next=et.next,et.next=i),o.pending=i}function Ji(o,i,et){if(et&4194240){var nt=i.lanes;nt&=o.pendingLanes,et|=nt,i.lanes=et,Cc(o,et)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(o,i){return ci().memoizedState=[o,i===void 0?null:i],o},useContext:Vg,useEffect:vi,useImperativeHandle:function(o,i,et){return et=et!=null?et.concat([o]):null,ti(4194308,4,yi$1.bind(null,i,o),et)},useLayoutEffect:function(o,i){return ti(4194308,4,o,i)},useInsertionEffect:function(o,i){return ti(4,2,o,i)},useMemo:function(o,i){var et=ci();return i=i===void 0?null:i,o=o(),et.memoizedState=[o,i],o},useReducer:function(o,i,et){var nt=ci();return i=et!==void 0?et(i):i,nt.memoizedState=nt.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},nt.queue=o,o=o.dispatch=Gi.bind(null,N,o),[nt.memoizedState,o]},useRef:function(o){var i=ci();return o={current:o},i.memoizedState=o},useState:qi,useDebugValue:Ai,useDeferredValue:function(o){return ci().memoizedState=o},useTransition:function(){var o=qi(!1),i=o[0];return o=Ei.bind(null,o[1]),ci().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,et){var nt=N,ot=ci();if(I){if(et===void 0)throw Error(p$2(407));et=et()}else{if(et=i(),R===null)throw Error(p$2(349));Rh&30||ni$1(nt,i,et)}ot.memoizedState=et;var st={value:et,getSnapshot:i};return ot.queue=st,vi(ki.bind(null,nt,st,o),[o]),nt.flags|=2048,li(9,mi.bind(null,nt,st,et,i),void 0,null),et},useId:function(){var o=ci(),i=R.identifierPrefix;if(I){var et=sg,nt=rg;et=(nt&~(1<<32-oc(nt)-1)).toString(32)+et,i=":"+i+"R"+et,et=Uh++,0<et&&(i+="H"+et.toString(32)),i+=":"}else et=Vh++,i=":"+i+"r"+et.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(o){var i=di();return Di(i,O.memoizedState,o)},useTransition:function(){var o=fi(ei)[0],i=di().memoizedState;return[o,i]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(o){var i=di();return O===null?i.memoizedState=o:Di(i,O.memoizedState,o)},useTransition:function(){var o=gi(ei)[0],i=di().memoizedState;return[o,i]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki$1(o,i){try{var et="",nt=i;do et+=Pa(nt),nt=nt.return;while(nt);var ot=et}catch(st){ot=`
Error generating stack: `+st.message+`
`+st.stack}return{value:o,source:i,stack:ot,digest:null}}function Li(o,i,et){return{value:o,source:null,stack:et??null,digest:i??null}}function Mi(o,i){try{console.error(i.value)}catch(et){setTimeout(function(){throw et})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(o,i,et){et=ch(-1,et),et.tag=3,et.payload={element:null};var nt=i.value;return et.callback=function(){Pi||(Pi=!0,Qi=nt),Mi(o,i)},et}function Ri(o,i,et){et=ch(-1,et),et.tag=3;var nt=o.type.getDerivedStateFromError;if(typeof nt=="function"){var ot=i.value;et.payload=function(){return nt(ot)},et.callback=function(){Mi(o,i)}}var st=o.stateNode;return st!==null&&typeof st.componentDidCatch=="function"&&(et.callback=function(){Mi(o,i),typeof nt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var lt=i.stack;this.componentDidCatch(i.value,{componentStack:lt!==null?lt:""})}),et}function Ti(o,i,et){var nt=o.pingCache;if(nt===null){nt=o.pingCache=new Ni;var ot=new Set;nt.set(i,ot)}else ot=nt.get(i),ot===void 0&&(ot=new Set,nt.set(i,ot));ot.has(et)||(ot.add(et),o=Ui.bind(null,o,i,et),i.then(o,o))}function Vi(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function Wi(o,i,et,nt,ot){return o.mode&1?(o.flags|=65536,o.lanes=ot,o):(o===i?o.flags|=65536:(o.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(i=ch(-1,1),i.tag=2,dh(et,i,1))),et.lanes|=1),o)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(o,i,et,nt){i.child=o===null?Ch(i,null,et,nt):Bh(i,o.child,et,nt)}function Zi(o,i,et,nt,ot){et=et.render;var st=i.ref;return Tg(i,ot),nt=Xh(o,i,et,nt,st,ot),et=bi(),o!==null&&!Ug?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~ot,$i(o,i,ot)):(I&&et&&vg(i),i.flags|=1,Yi(o,i,nt,ot),i.child)}function aj(o,i,et,nt,ot){if(o===null){var st=et.type;return typeof st=="function"&&!bj(st)&&st.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(i.tag=15,i.type=st,cj(o,i,st,nt,ot)):(o=yh(et.type,null,nt,i,i.mode,ot),o.ref=i.ref,o.return=i,i.child=o)}if(st=o.child,!(o.lanes&ot)){var lt=st.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(lt,nt)&&o.ref===i.ref)return $i(o,i,ot)}return i.flags|=1,o=wh(st,nt),o.ref=i.ref,o.return=i,i.child=o}function cj(o,i,et,nt,ot){if(o!==null){var st=o.memoizedProps;if(Ie(st,nt)&&o.ref===i.ref)if(Ug=!1,i.pendingProps=nt=st,(o.lanes&ot)!==0)o.flags&131072&&(Ug=!0);else return i.lanes=o.lanes,$i(o,i,ot)}return dj(o,i,et,nt,ot)}function ej(o,i,et){var nt=i.pendingProps,ot=nt.children,st=o!==null?o.memoizedState:null;if(nt.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=et;else{if(!(et&1073741824))return o=st!==null?st.baseLanes|et:et,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,G(fj,gj),gj|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=st!==null?st.baseLanes:et,G(fj,gj),gj|=nt}else st!==null?(nt=st.baseLanes|et,i.memoizedState=null):nt=et,G(fj,gj),gj|=nt;return Yi(o,i,ot,et),i.child}function hj(o,i){var et=i.ref;(o===null&&et!==null||o!==null&&o.ref!==et)&&(i.flags|=512,i.flags|=2097152)}function dj(o,i,et,nt,ot){var st=Zf(et)?Xf:H.current;return st=Yf(i,st),Tg(i,ot),et=Xh(o,i,et,nt,st,ot),nt=bi(),o!==null&&!Ug?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~ot,$i(o,i,ot)):(I&&nt&&vg(i),i.flags|=1,Yi(o,i,et,ot),i.child)}function ij(o,i,et,nt,ot){if(Zf(et)){var st=!0;cg(i)}else st=!1;if(Tg(i,ot),i.stateNode===null)jj(o,i),ph(i,et,nt),rh(i,et,nt,ot),nt=!0;else if(o===null){var lt=i.stateNode,ht=i.memoizedProps;lt.props=ht;var ft=lt.context,St=et.contextType;typeof St=="object"&&St!==null?St=Vg(St):(St=Zf(et)?Xf:H.current,St=Yf(i,St));var vt=et.getDerivedStateFromProps,Rt=typeof vt=="function"||typeof lt.getSnapshotBeforeUpdate=="function";Rt||typeof lt.UNSAFE_componentWillReceiveProps!="function"&&typeof lt.componentWillReceiveProps!="function"||(ht!==nt||ft!==St)&&qh(i,lt,nt,St),$g=!1;var wt=i.memoizedState;lt.state=wt,gh(i,nt,lt,ot),ft=i.memoizedState,ht!==nt||wt!==ft||Wf.current||$g?(typeof vt=="function"&&(kh(i,et,vt,nt),ft=i.memoizedState),(ht=$g||oh(i,et,ht,nt,wt,ft,St))?(Rt||typeof lt.UNSAFE_componentWillMount!="function"&&typeof lt.componentWillMount!="function"||(typeof lt.componentWillMount=="function"&&lt.componentWillMount(),typeof lt.UNSAFE_componentWillMount=="function"&&lt.UNSAFE_componentWillMount()),typeof lt.componentDidMount=="function"&&(i.flags|=4194308)):(typeof lt.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=nt,i.memoizedState=ft),lt.props=nt,lt.state=ft,lt.context=St,nt=ht):(typeof lt.componentDidMount=="function"&&(i.flags|=4194308),nt=!1)}else{lt=i.stateNode,bh(o,i),ht=i.memoizedProps,St=i.type===i.elementType?ht:Lg(i.type,ht),lt.props=St,Rt=i.pendingProps,wt=lt.context,ft=et.contextType,typeof ft=="object"&&ft!==null?ft=Vg(ft):(ft=Zf(et)?Xf:H.current,ft=Yf(i,ft));var $t=et.getDerivedStateFromProps;(vt=typeof $t=="function"||typeof lt.getSnapshotBeforeUpdate=="function")||typeof lt.UNSAFE_componentWillReceiveProps!="function"&&typeof lt.componentWillReceiveProps!="function"||(ht!==Rt||wt!==ft)&&qh(i,lt,nt,ft),$g=!1,wt=i.memoizedState,lt.state=wt,gh(i,nt,lt,ot);var Dt=i.memoizedState;ht!==Rt||wt!==Dt||Wf.current||$g?(typeof $t=="function"&&(kh(i,et,$t,nt),Dt=i.memoizedState),(St=$g||oh(i,et,St,nt,wt,Dt,ft)||!1)?(vt||typeof lt.UNSAFE_componentWillUpdate!="function"&&typeof lt.componentWillUpdate!="function"||(typeof lt.componentWillUpdate=="function"&&lt.componentWillUpdate(nt,Dt,ft),typeof lt.UNSAFE_componentWillUpdate=="function"&&lt.UNSAFE_componentWillUpdate(nt,Dt,ft)),typeof lt.componentDidUpdate=="function"&&(i.flags|=4),typeof lt.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof lt.componentDidUpdate!="function"||ht===o.memoizedProps&&wt===o.memoizedState||(i.flags|=4),typeof lt.getSnapshotBeforeUpdate!="function"||ht===o.memoizedProps&&wt===o.memoizedState||(i.flags|=1024),i.memoizedProps=nt,i.memoizedState=Dt),lt.props=nt,lt.state=Dt,lt.context=ft,nt=St):(typeof lt.componentDidUpdate!="function"||ht===o.memoizedProps&&wt===o.memoizedState||(i.flags|=4),typeof lt.getSnapshotBeforeUpdate!="function"||ht===o.memoizedProps&&wt===o.memoizedState||(i.flags|=1024),nt=!1)}return kj(o,i,et,nt,st,ot)}function kj(o,i,et,nt,ot,st){hj(o,i);var lt=(i.flags&128)!==0;if(!nt&&!lt)return ot&&dg(i,et,!1),$i(o,i,st);nt=i.stateNode,Xi.current=i;var ht=lt&&typeof et.getDerivedStateFromError!="function"?null:nt.render();return i.flags|=1,o!==null&&lt?(i.child=Bh(i,o.child,null,st),i.child=Bh(i,null,ht,st)):Yi(o,i,ht,st),i.memoizedState=nt.state,ot&&dg(i,et,!0),i.child}function lj(o){var i=o.stateNode;i.pendingContext?ag(o,i.pendingContext,i.pendingContext!==i.context):i.context&&ag(o,i.context,!1),Ih(o,i.containerInfo)}function mj(o,i,et,nt,ot){return Ig(),Jg(ot),i.flags|=256,Yi(o,i,et,nt),i.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(o){return{baseLanes:o,cachePool:null,transitions:null}}function pj(o,i,et){var nt=i.pendingProps,ot=M.current,st=!1,lt=(i.flags&128)!==0,ht;if((ht=lt)||(ht=o!==null&&o.memoizedState===null?!1:(ot&2)!==0),ht?(st=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(ot|=1),G(M,ot&1),o===null)return Eg(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(lt=nt.children,o=nt.fallback,st?(nt=i.mode,st=i.child,lt={mode:"hidden",children:lt},!(nt&1)&&st!==null?(st.childLanes=0,st.pendingProps=lt):st=qj(lt,nt,0,null),o=Ah(o,nt,et,null),st.return=i,o.return=i,st.sibling=o,i.child=st,i.child.memoizedState=oj(et),i.memoizedState=nj,o):rj(i,lt));if(ot=o.memoizedState,ot!==null&&(ht=ot.dehydrated,ht!==null))return sj(o,i,lt,nt,ht,ot,et);if(st){st=nt.fallback,lt=i.mode,ot=o.child,ht=ot.sibling;var ft={mode:"hidden",children:nt.children};return!(lt&1)&&i.child!==ot?(nt=i.child,nt.childLanes=0,nt.pendingProps=ft,i.deletions=null):(nt=wh(ot,ft),nt.subtreeFlags=ot.subtreeFlags&14680064),ht!==null?st=wh(ht,st):(st=Ah(st,lt,et,null),st.flags|=2),st.return=i,nt.return=i,nt.sibling=st,i.child=nt,nt=st,st=i.child,lt=o.child.memoizedState,lt=lt===null?oj(et):{baseLanes:lt.baseLanes|et,cachePool:null,transitions:lt.transitions},st.memoizedState=lt,st.childLanes=o.childLanes&~et,i.memoizedState=nj,nt}return st=o.child,o=st.sibling,nt=wh(st,{mode:"visible",children:nt.children}),!(i.mode&1)&&(nt.lanes=et),nt.return=i,nt.sibling=null,o!==null&&(et=i.deletions,et===null?(i.deletions=[o],i.flags|=16):et.push(o)),i.child=nt,i.memoizedState=null,nt}function rj(o,i){return i=qj({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function tj(o,i,et,nt){return nt!==null&&Jg(nt),Bh(i,o.child,null,et),o=rj(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function sj(o,i,et,nt,ot,st,lt){if(et)return i.flags&256?(i.flags&=-257,nt=Li(Error(p$2(422))),tj(o,i,lt,nt)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(st=nt.fallback,ot=i.mode,nt=qj({mode:"visible",children:nt.children},ot,0,null),st=Ah(st,ot,lt,null),st.flags|=2,nt.return=i,st.return=i,nt.sibling=st,i.child=nt,i.mode&1&&Bh(i,o.child,null,lt),i.child.memoizedState=oj(lt),i.memoizedState=nj,st);if(!(i.mode&1))return tj(o,i,lt,null);if(ot.data==="$!"){if(nt=ot.nextSibling&&ot.nextSibling.dataset,nt)var ht=nt.dgst;return nt=ht,st=Error(p$2(419)),nt=Li(st,nt,void 0),tj(o,i,lt,nt)}if(ht=(lt&o.childLanes)!==0,Ug||ht){if(nt=R,nt!==null){switch(lt&-lt){case 4:ot=2;break;case 16:ot=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ot=32;break;case 536870912:ot=268435456;break;default:ot=0}ot=ot&(nt.suspendedLanes|lt)?0:ot,ot!==0&&ot!==st.retryLane&&(st.retryLane=ot,Zg(o,ot),mh(nt,o,ot,-1))}return uj(),nt=Li(Error(p$2(421))),tj(o,i,lt,nt)}return ot.data==="$?"?(i.flags|=128,i.child=o.child,i=vj.bind(null,o),ot._reactRetry=i,null):(o=st.treeContext,yg=Lf(ot.nextSibling),xg=i,I=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=i),i=rj(i,nt.children),i.flags|=4096,i)}function wj(o,i,et){o.lanes|=i;var nt=o.alternate;nt!==null&&(nt.lanes|=i),Sg(o.return,i,et)}function xj(o,i,et,nt,ot){var st=o.memoizedState;st===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:nt,tail:et,tailMode:ot}:(st.isBackwards=i,st.rendering=null,st.renderingStartTime=0,st.last=nt,st.tail=et,st.tailMode=ot)}function yj(o,i,et){var nt=i.pendingProps,ot=nt.revealOrder,st=nt.tail;if(Yi(o,i,nt.children,et),nt=M.current,nt&2)nt=nt&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&wj(o,et,i);else if(o.tag===19)wj(o,et,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}nt&=1}if(G(M,nt),!(i.mode&1))i.memoizedState=null;else switch(ot){case"forwards":for(et=i.child,ot=null;et!==null;)o=et.alternate,o!==null&&Mh(o)===null&&(ot=et),et=et.sibling;et=ot,et===null?(ot=i.child,i.child=null):(ot=et.sibling,et.sibling=null),xj(i,!1,ot,et,st);break;case"backwards":for(et=null,ot=i.child,i.child=null;ot!==null;){if(o=ot.alternate,o!==null&&Mh(o)===null){i.child=ot;break}o=ot.sibling,ot.sibling=et,et=ot,ot=o}xj(i,!0,et,null,st);break;case"together":xj(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function jj(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function $i(o,i,et){if(o!==null&&(i.dependencies=o.dependencies),hh|=i.lanes,!(et&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(p$2(153));if(i.child!==null){for(o=i.child,et=wh(o,o.pendingProps),i.child=et,et.return=i;o.sibling!==null;)o=o.sibling,et=et.sibling=wh(o,o.pendingProps),et.return=i;et.sibling=null}return i.child}function zj(o,i,et){switch(i.tag){case 3:lj(i),Ig();break;case 5:Kh(i);break;case 1:Zf(i.type)&&cg(i);break;case 4:Ih(i,i.stateNode.containerInfo);break;case 10:var nt=i.type._context,ot=i.memoizedProps.value;G(Mg,nt._currentValue),nt._currentValue=ot;break;case 13:if(nt=i.memoizedState,nt!==null)return nt.dehydrated!==null?(G(M,M.current&1),i.flags|=128,null):et&i.child.childLanes?pj(o,i,et):(G(M,M.current&1),o=$i(o,i,et),o!==null?o.sibling:null);G(M,M.current&1);break;case 19:if(nt=(et&i.childLanes)!==0,o.flags&128){if(nt)return yj(o,i,et);i.flags|=128}if(ot=i.memoizedState,ot!==null&&(ot.rendering=null,ot.tail=null,ot.lastEffect=null),G(M,M.current),nt)break;return null;case 22:case 23:return i.lanes=0,ej(o,i,et)}return $i(o,i,et)}var Aj,Bj,Cj,Dj;Aj=function(o,i){for(var et=i.child;et!==null;){if(et.tag===5||et.tag===6)o.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===i)break;for(;et.sibling===null;){if(et.return===null||et.return===i)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Bj=function(){};Cj=function(o,i,et,nt){var ot=o.memoizedProps;if(ot!==nt){o=i.stateNode,Hh(Eh.current);var st=null;switch(et){case"input":ot=Ya(o,ot),nt=Ya(o,nt),st=[];break;case"select":ot=A({},ot,{value:void 0}),nt=A({},nt,{value:void 0}),st=[];break;case"textarea":ot=gb(o,ot),nt=gb(o,nt),st=[];break;default:typeof ot.onClick!="function"&&typeof nt.onClick=="function"&&(o.onclick=Bf)}ub(et,nt);var lt;et=null;for(St in ot)if(!nt.hasOwnProperty(St)&&ot.hasOwnProperty(St)&&ot[St]!=null)if(St==="style"){var ht=ot[St];for(lt in ht)ht.hasOwnProperty(lt)&&(et||(et={}),et[lt]="")}else St!=="dangerouslySetInnerHTML"&&St!=="children"&&St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&St!=="autoFocus"&&(ea.hasOwnProperty(St)?st||(st=[]):(st=st||[]).push(St,null));for(St in nt){var ft=nt[St];if(ht=ot!=null?ot[St]:void 0,nt.hasOwnProperty(St)&&ft!==ht&&(ft!=null||ht!=null))if(St==="style")if(ht){for(lt in ht)!ht.hasOwnProperty(lt)||ft&&ft.hasOwnProperty(lt)||(et||(et={}),et[lt]="");for(lt in ft)ft.hasOwnProperty(lt)&&ht[lt]!==ft[lt]&&(et||(et={}),et[lt]=ft[lt])}else et||(st||(st=[]),st.push(St,et)),et=ft;else St==="dangerouslySetInnerHTML"?(ft=ft?ft.__html:void 0,ht=ht?ht.__html:void 0,ft!=null&&ht!==ft&&(st=st||[]).push(St,ft)):St==="children"?typeof ft!="string"&&typeof ft!="number"||(st=st||[]).push(St,""+ft):St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&(ea.hasOwnProperty(St)?(ft!=null&&St==="onScroll"&&D("scroll",o),st||ht===ft||(st=[])):(st=st||[]).push(St,ft))}et&&(st=st||[]).push("style",et);var St=st;(i.updateQueue=St)&&(i.flags|=4)}};Dj=function(o,i,et,nt){et!==nt&&(i.flags|=4)};function Ej(o,i){if(!I)switch(o.tailMode){case"hidden":i=o.tail;for(var et=null;i!==null;)i.alternate!==null&&(et=i),i=i.sibling;et===null?o.tail=null:et.sibling=null;break;case"collapsed":et=o.tail;for(var nt=null;et!==null;)et.alternate!==null&&(nt=et),et=et.sibling;nt===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:nt.sibling=null}}function S(o){var i=o.alternate!==null&&o.alternate.child===o.child,et=0,nt=0;if(i)for(var ot=o.child;ot!==null;)et|=ot.lanes|ot.childLanes,nt|=ot.subtreeFlags&14680064,nt|=ot.flags&14680064,ot.return=o,ot=ot.sibling;else for(ot=o.child;ot!==null;)et|=ot.lanes|ot.childLanes,nt|=ot.subtreeFlags,nt|=ot.flags,ot.return=o,ot=ot.sibling;return o.subtreeFlags|=nt,o.childLanes=et,i}function Fj(o,i,et){var nt=i.pendingProps;switch(wg(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(i),null;case 1:return Zf(i.type)&&$f(),S(i),null;case 3:return nt=i.stateNode,Jh(),E(Wf),E(H),Oh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(o===null||o.child===null)&&(Gg(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(o,i),S(i),null;case 5:Lh(i);var ot=Hh(Gh.current);if(et=i.type,o!==null&&i.stateNode!=null)Cj(o,i,et,nt,ot),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!nt){if(i.stateNode===null)throw Error(p$2(166));return S(i),null}if(o=Hh(Eh.current),Gg(i)){nt=i.stateNode,et=i.type;var st=i.memoizedProps;switch(nt[Of]=i,nt[Pf]=st,o=(i.mode&1)!==0,et){case"dialog":D("cancel",nt),D("close",nt);break;case"iframe":case"object":case"embed":D("load",nt);break;case"video":case"audio":for(ot=0;ot<lf.length;ot++)D(lf[ot],nt);break;case"source":D("error",nt);break;case"img":case"image":case"link":D("error",nt),D("load",nt);break;case"details":D("toggle",nt);break;case"input":Za(nt,st),D("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!st.multiple},D("invalid",nt);break;case"textarea":hb(nt,st),D("invalid",nt)}ub(et,st),ot=null;for(var lt in st)if(st.hasOwnProperty(lt)){var ht=st[lt];lt==="children"?typeof ht=="string"?nt.textContent!==ht&&(st.suppressHydrationWarning!==!0&&Af(nt.textContent,ht,o),ot=["children",ht]):typeof ht=="number"&&nt.textContent!==""+ht&&(st.suppressHydrationWarning!==!0&&Af(nt.textContent,ht,o),ot=["children",""+ht]):ea.hasOwnProperty(lt)&&ht!=null&&lt==="onScroll"&&D("scroll",nt)}switch(et){case"input":Va(nt),db(nt,st,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof st.onClick=="function"&&(nt.onclick=Bf)}nt=ot,i.updateQueue=nt,nt!==null&&(i.flags|=4)}else{lt=ot.nodeType===9?ot:ot.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(et)),o==="http://www.w3.org/1999/xhtml"?et==="script"?(o=lt.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof nt.is=="string"?o=lt.createElement(et,{is:nt.is}):(o=lt.createElement(et),et==="select"&&(lt=o,nt.multiple?lt.multiple=!0:nt.size&&(lt.size=nt.size))):o=lt.createElementNS(o,et),o[Of]=i,o[Pf]=nt,Aj(o,i,!1,!1),i.stateNode=o;e:{switch(lt=vb(et,nt),et){case"dialog":D("cancel",o),D("close",o),ot=nt;break;case"iframe":case"object":case"embed":D("load",o),ot=nt;break;case"video":case"audio":for(ot=0;ot<lf.length;ot++)D(lf[ot],o);ot=nt;break;case"source":D("error",o),ot=nt;break;case"img":case"image":case"link":D("error",o),D("load",o),ot=nt;break;case"details":D("toggle",o),ot=nt;break;case"input":Za(o,nt),ot=Ya(o,nt),D("invalid",o);break;case"option":ot=nt;break;case"select":o._wrapperState={wasMultiple:!!nt.multiple},ot=A({},nt,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,nt),ot=gb(o,nt),D("invalid",o);break;default:ot=nt}ub(et,ot),ht=ot;for(st in ht)if(ht.hasOwnProperty(st)){var ft=ht[st];st==="style"?sb(o,ft):st==="dangerouslySetInnerHTML"?(ft=ft?ft.__html:void 0,ft!=null&&nb(o,ft)):st==="children"?typeof ft=="string"?(et!=="textarea"||ft!=="")&&ob(o,ft):typeof ft=="number"&&ob(o,""+ft):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?ft!=null&&st==="onScroll"&&D("scroll",o):ft!=null&&ta(o,st,ft,lt))}switch(et){case"input":Va(o),db(o,nt,!1);break;case"textarea":Va(o),jb(o);break;case"option":nt.value!=null&&o.setAttribute("value",""+Sa(nt.value));break;case"select":o.multiple=!!nt.multiple,st=nt.value,st!=null?fb(o,!!nt.multiple,st,!1):nt.defaultValue!=null&&fb(o,!!nt.multiple,nt.defaultValue,!0);break;default:typeof ot.onClick=="function"&&(o.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S(i),null;case 6:if(o&&i.stateNode!=null)Dj(o,i,o.memoizedProps,nt);else{if(typeof nt!="string"&&i.stateNode===null)throw Error(p$2(166));if(et=Hh(Gh.current),Hh(Eh.current),Gg(i)){if(nt=i.stateNode,et=i.memoizedProps,nt[Of]=i,(st=nt.nodeValue!==et)&&(o=xg,o!==null))switch(o.tag){case 3:Af(nt.nodeValue,et,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,et,(o.mode&1)!==0)}st&&(i.flags|=4)}else nt=(et.nodeType===9?et:et.ownerDocument).createTextNode(nt),nt[Of]=i,i.stateNode=nt}return S(i),null;case 13:if(E(M),nt=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I&&yg!==null&&i.mode&1&&!(i.flags&128))Hg(),Ig(),i.flags|=98560,st=!1;else if(st=Gg(i),nt!==null&&nt.dehydrated!==null){if(o===null){if(!st)throw Error(p$2(318));if(st=i.memoizedState,st=st!==null?st.dehydrated:null,!st)throw Error(p$2(317));st[Of]=i}else Ig(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S(i),st=!1}else zg!==null&&(Gj(zg),zg=null),st=!0;if(!st)return i.flags&65536?i:null}return i.flags&128?(i.lanes=et,i):(nt=nt!==null,nt!==(o!==null&&o.memoizedState!==null)&&nt&&(i.child.flags|=8192,i.mode&1&&(o===null||M.current&1?T===0&&(T=3):uj())),i.updateQueue!==null&&(i.flags|=4),S(i),null);case 4:return Jh(),Bj(o,i),o===null&&sf(i.stateNode.containerInfo),S(i),null;case 10:return Rg(i.type._context),S(i),null;case 17:return Zf(i.type)&&$f(),S(i),null;case 19:if(E(M),st=i.memoizedState,st===null)return S(i),null;if(nt=(i.flags&128)!==0,lt=st.rendering,lt===null)if(nt)Ej(st,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(lt=Mh(o),lt!==null){for(i.flags|=128,Ej(st,!1),nt=lt.updateQueue,nt!==null&&(i.updateQueue=nt,i.flags|=4),i.subtreeFlags=0,nt=et,et=i.child;et!==null;)st=et,o=nt,st.flags&=14680066,lt=st.alternate,lt===null?(st.childLanes=0,st.lanes=o,st.child=null,st.subtreeFlags=0,st.memoizedProps=null,st.memoizedState=null,st.updateQueue=null,st.dependencies=null,st.stateNode=null):(st.childLanes=lt.childLanes,st.lanes=lt.lanes,st.child=lt.child,st.subtreeFlags=0,st.deletions=null,st.memoizedProps=lt.memoizedProps,st.memoizedState=lt.memoizedState,st.updateQueue=lt.updateQueue,st.type=lt.type,o=lt.dependencies,st.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),et=et.sibling;return G(M,M.current&1|2),i.child}o=o.sibling}st.tail!==null&&B()>Hj&&(i.flags|=128,nt=!0,Ej(st,!1),i.lanes=4194304)}else{if(!nt)if(o=Mh(lt),o!==null){if(i.flags|=128,nt=!0,et=o.updateQueue,et!==null&&(i.updateQueue=et,i.flags|=4),Ej(st,!0),st.tail===null&&st.tailMode==="hidden"&&!lt.alternate&&!I)return S(i),null}else 2*B()-st.renderingStartTime>Hj&&et!==1073741824&&(i.flags|=128,nt=!0,Ej(st,!1),i.lanes=4194304);st.isBackwards?(lt.sibling=i.child,i.child=lt):(et=st.last,et!==null?et.sibling=lt:i.child=lt,st.last=lt)}return st.tail!==null?(i=st.tail,st.rendering=i,st.tail=i.sibling,st.renderingStartTime=B(),i.sibling=null,et=M.current,G(M,nt?et&1|2:et&1),i):(S(i),null);case 22:case 23:return Ij(),nt=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==nt&&(i.flags|=8192),nt&&i.mode&1?gj&1073741824&&(S(i),i.subtreeFlags&6&&(i.flags|=8192)):S(i),null;case 24:return null;case 25:return null}throw Error(p$2(156,i.tag))}function Jj(o,i){switch(wg(i),i.tag){case 1:return Zf(i.type)&&$f(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return Jh(),E(Wf),E(H),Oh(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return Lh(i),null;case 13:if(E(M),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(p$2(340));Ig()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(i.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(o,i){var et=o.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(nt){W(o,i,nt)}else et.current=null}function Nj(o,i,et){try{et()}catch(nt){W(o,i,nt)}}var Oj=!1;function Pj(o,i){if(Cf=dd,o=Me$1(),Ne(o)){if("selectionStart"in o)var et={start:o.selectionStart,end:o.selectionEnd};else e:{et=(et=o.ownerDocument)&&et.defaultView||window;var nt=et.getSelection&&et.getSelection();if(nt&&nt.rangeCount!==0){et=nt.anchorNode;var ot=nt.anchorOffset,st=nt.focusNode;nt=nt.focusOffset;try{et.nodeType,st.nodeType}catch{et=null;break e}var lt=0,ht=-1,ft=-1,St=0,vt=0,Rt=o,wt=null;t:for(;;){for(var $t;Rt!==et||ot!==0&&Rt.nodeType!==3||(ht=lt+ot),Rt!==st||nt!==0&&Rt.nodeType!==3||(ft=lt+nt),Rt.nodeType===3&&(lt+=Rt.nodeValue.length),($t=Rt.firstChild)!==null;)wt=Rt,Rt=$t;for(;;){if(Rt===o)break t;if(wt===et&&++St===ot&&(ht=lt),wt===st&&++vt===nt&&(ft=lt),($t=Rt.nextSibling)!==null)break;Rt=wt,wt=Rt.parentNode}Rt=$t}et=ht===-1||ft===-1?null:{start:ht,end:ft}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:o,selectionRange:et},dd=!1,V=i;V!==null;)if(i=V,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,V=o;else for(;V!==null;){i=V;try{var Dt=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Dt!==null){var Pt=Dt.memoizedProps,Ut=Dt.memoizedState,Ot=i.stateNode,Lt=Ot.getSnapshotBeforeUpdate(i.elementType===i.type?Pt:Lg(i.type,Pt),Ut);Ot.__reactInternalSnapshotBeforeUpdate=Lt}break;case 3:var xt=i.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(jt){W(i,i.return,jt)}if(o=i.sibling,o!==null){o.return=i.return,V=o;break}V=i.return}return Dt=Oj,Oj=!1,Dt}function Qj(o,i,et){var nt=i.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var ot=nt=nt.next;do{if((ot.tag&o)===o){var st=ot.destroy;ot.destroy=void 0,st!==void 0&&Nj(i,et,st)}ot=ot.next}while(ot!==nt)}}function Rj(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var et=i=i.next;do{if((et.tag&o)===o){var nt=et.create;et.destroy=nt()}et=et.next}while(et!==i)}}function Sj(o){var i=o.ref;if(i!==null){var et=o.stateNode;switch(o.tag){case 5:o=et;break;default:o=et}typeof i=="function"?i(o):i.current=o}}function Tj(o){var i=o.alternate;i!==null&&(o.alternate=null,Tj(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[Of],delete i[Pf],delete i[of],delete i[Qf],delete i[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Uj(o){return o.tag===5||o.tag===3||o.tag===4}function Vj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Uj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wj(o,i,et){var nt=o.tag;if(nt===5||nt===6)o=o.stateNode,i?et.nodeType===8?et.parentNode.insertBefore(o,i):et.insertBefore(o,i):(et.nodeType===8?(i=et.parentNode,i.insertBefore(o,et)):(i=et,i.appendChild(o)),et=et._reactRootContainer,et!=null||i.onclick!==null||(i.onclick=Bf));else if(nt!==4&&(o=o.child,o!==null))for(Wj(o,i,et),o=o.sibling;o!==null;)Wj(o,i,et),o=o.sibling}function Xj(o,i,et){var nt=o.tag;if(nt===5||nt===6)o=o.stateNode,i?et.insertBefore(o,i):et.appendChild(o);else if(nt!==4&&(o=o.child,o!==null))for(Xj(o,i,et),o=o.sibling;o!==null;)Xj(o,i,et),o=o.sibling}var X=null,Yj=!1;function Zj(o,i,et){for(et=et.child;et!==null;)ak(o,i,et),et=et.sibling}function ak(o,i,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U||Mj(et,i);case 6:var nt=X,ot=Yj;X=null,Zj(o,i,et),X=nt,Yj=ot,X!==null&&(Yj?(o=X,et=et.stateNode,o.nodeType===8?o.parentNode.removeChild(et):o.removeChild(et)):X.removeChild(et.stateNode));break;case 18:X!==null&&(Yj?(o=X,et=et.stateNode,o.nodeType===8?Kf(o.parentNode,et):o.nodeType===1&&Kf(o,et),bd(o)):Kf(X,et.stateNode));break;case 4:nt=X,ot=Yj,X=et.stateNode.containerInfo,Yj=!0,Zj(o,i,et),X=nt,Yj=ot;break;case 0:case 11:case 14:case 15:if(!U&&(nt=et.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){ot=nt=nt.next;do{var st=ot,lt=st.destroy;st=st.tag,lt!==void 0&&(st&2||st&4)&&Nj(et,i,lt),ot=ot.next}while(ot!==nt)}Zj(o,i,et);break;case 1:if(!U&&(Mj(et,i),nt=et.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=et.memoizedProps,nt.state=et.memoizedState,nt.componentWillUnmount()}catch(ht){W(et,i,ht)}Zj(o,i,et);break;case 21:Zj(o,i,et);break;case 22:et.mode&1?(U=(nt=U)||et.memoizedState!==null,Zj(o,i,et),U=nt):Zj(o,i,et);break;default:Zj(o,i,et)}}function bk(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var et=o.stateNode;et===null&&(et=o.stateNode=new Lj),i.forEach(function(nt){var ot=ck.bind(null,o,nt);et.has(nt)||(et.add(nt),nt.then(ot,ot))})}}function dk(o,i){var et=i.deletions;if(et!==null)for(var nt=0;nt<et.length;nt++){var ot=et[nt];try{var st=o,lt=i,ht=lt;e:for(;ht!==null;){switch(ht.tag){case 5:X=ht.stateNode,Yj=!1;break e;case 3:X=ht.stateNode.containerInfo,Yj=!0;break e;case 4:X=ht.stateNode.containerInfo,Yj=!0;break e}ht=ht.return}if(X===null)throw Error(p$2(160));ak(st,lt,ot),X=null,Yj=!1;var ft=ot.alternate;ft!==null&&(ft.return=null),ot.return=null}catch(St){W(ot,i,St)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ek(i,o),i=i.sibling}function ek(o,i){var et=o.alternate,nt=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(dk(i,o),fk(o),nt&4){try{Qj(3,o,o.return),Rj(3,o)}catch(Pt){W(o,o.return,Pt)}try{Qj(5,o,o.return)}catch(Pt){W(o,o.return,Pt)}}break;case 1:dk(i,o),fk(o),nt&512&&et!==null&&Mj(et,et.return);break;case 5:if(dk(i,o),fk(o),nt&512&&et!==null&&Mj(et,et.return),o.flags&32){var ot=o.stateNode;try{ob(ot,"")}catch(Pt){W(o,o.return,Pt)}}if(nt&4&&(ot=o.stateNode,ot!=null)){var st=o.memoizedProps,lt=et!==null?et.memoizedProps:st,ht=o.type,ft=o.updateQueue;if(o.updateQueue=null,ft!==null)try{ht==="input"&&st.type==="radio"&&st.name!=null&&ab(ot,st),vb(ht,lt);var St=vb(ht,st);for(lt=0;lt<ft.length;lt+=2){var vt=ft[lt],Rt=ft[lt+1];vt==="style"?sb(ot,Rt):vt==="dangerouslySetInnerHTML"?nb(ot,Rt):vt==="children"?ob(ot,Rt):ta(ot,vt,Rt,St)}switch(ht){case"input":bb(ot,st);break;case"textarea":ib(ot,st);break;case"select":var wt=ot._wrapperState.wasMultiple;ot._wrapperState.wasMultiple=!!st.multiple;var $t=st.value;$t!=null?fb(ot,!!st.multiple,$t,!1):wt!==!!st.multiple&&(st.defaultValue!=null?fb(ot,!!st.multiple,st.defaultValue,!0):fb(ot,!!st.multiple,st.multiple?[]:"",!1))}ot[Pf]=st}catch(Pt){W(o,o.return,Pt)}}break;case 6:if(dk(i,o),fk(o),nt&4){if(o.stateNode===null)throw Error(p$2(162));ot=o.stateNode,st=o.memoizedProps;try{ot.nodeValue=st}catch(Pt){W(o,o.return,Pt)}}break;case 3:if(dk(i,o),fk(o),nt&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(i.containerInfo)}catch(Pt){W(o,o.return,Pt)}break;case 4:dk(i,o),fk(o);break;case 13:dk(i,o),fk(o),ot=o.child,ot.flags&8192&&(st=ot.memoizedState!==null,ot.stateNode.isHidden=st,!st||ot.alternate!==null&&ot.alternate.memoizedState!==null||(gk=B())),nt&4&&bk(o);break;case 22:if(vt=et!==null&&et.memoizedState!==null,o.mode&1?(U=(St=U)||vt,dk(i,o),U=St):dk(i,o),fk(o),nt&8192){if(St=o.memoizedState!==null,(o.stateNode.isHidden=St)&&!vt&&o.mode&1)for(V=o,vt=o.child;vt!==null;){for(Rt=V=vt;V!==null;){switch(wt=V,$t=wt.child,wt.tag){case 0:case 11:case 14:case 15:Qj(4,wt,wt.return);break;case 1:Mj(wt,wt.return);var Dt=wt.stateNode;if(typeof Dt.componentWillUnmount=="function"){nt=wt,et=wt.return;try{i=nt,Dt.props=i.memoizedProps,Dt.state=i.memoizedState,Dt.componentWillUnmount()}catch(Pt){W(nt,et,Pt)}}break;case 5:Mj(wt,wt.return);break;case 22:if(wt.memoizedState!==null){hk(Rt);continue}}$t!==null?($t.return=wt,V=$t):hk(Rt)}vt=vt.sibling}e:for(vt=null,Rt=o;;){if(Rt.tag===5){if(vt===null){vt=Rt;try{ot=Rt.stateNode,St?(st=ot.style,typeof st.setProperty=="function"?st.setProperty("display","none","important"):st.display="none"):(ht=Rt.stateNode,ft=Rt.memoizedProps.style,lt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null,ht.style.display=rb("display",lt))}catch(Pt){W(o,o.return,Pt)}}}else if(Rt.tag===6){if(vt===null)try{Rt.stateNode.nodeValue=St?"":Rt.memoizedProps}catch(Pt){W(o,o.return,Pt)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===o)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===o)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===o)break e;vt===Rt&&(vt=null),Rt=Rt.return}vt===Rt&&(vt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:dk(i,o),fk(o),nt&4&&bk(o);break;case 21:break;default:dk(i,o),fk(o)}}function fk(o){var i=o.flags;if(i&2){try{e:{for(var et=o.return;et!==null;){if(Uj(et)){var nt=et;break e}et=et.return}throw Error(p$2(160))}switch(nt.tag){case 5:var ot=nt.stateNode;nt.flags&32&&(ob(ot,""),nt.flags&=-33);var st=Vj(o);Xj(o,st,ot);break;case 3:case 4:var lt=nt.stateNode.containerInfo,ht=Vj(o);Wj(o,ht,lt);break;default:throw Error(p$2(161))}}catch(ft){W(o,o.return,ft)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function ik(o,i,et){V=o,jk(o)}function jk(o,i,et){for(var nt=(o.mode&1)!==0;V!==null;){var ot=V,st=ot.child;if(ot.tag===22&&nt){var lt=ot.memoizedState!==null||Kj;if(!lt){var ht=ot.alternate,ft=ht!==null&&ht.memoizedState!==null||U;ht=Kj;var St=U;if(Kj=lt,(U=ft)&&!St)for(V=ot;V!==null;)lt=V,ft=lt.child,lt.tag===22&&lt.memoizedState!==null?kk(ot):ft!==null?(ft.return=lt,V=ft):kk(ot);for(;st!==null;)V=st,jk(st),st=st.sibling;V=ot,Kj=ht,U=St}lk(o)}else ot.subtreeFlags&8772&&st!==null?(st.return=ot,V=st):lk(o)}}function lk(o){for(;V!==null;){var i=V;if(i.flags&8772){var et=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U||Rj(5,i);break;case 1:var nt=i.stateNode;if(i.flags&4&&!U)if(et===null)nt.componentDidMount();else{var ot=i.elementType===i.type?et.memoizedProps:Lg(i.type,et.memoizedProps);nt.componentDidUpdate(ot,et.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var st=i.updateQueue;st!==null&&ih(i,st,nt);break;case 3:var lt=i.updateQueue;if(lt!==null){if(et=null,i.child!==null)switch(i.child.tag){case 5:et=i.child.stateNode;break;case 1:et=i.child.stateNode}ih(i,lt,et)}break;case 5:var ht=i.stateNode;if(et===null&&i.flags&4){et=ht;var ft=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ft.autoFocus&&et.focus();break;case"img":ft.src&&(et.src=ft.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var St=i.alternate;if(St!==null){var vt=St.memoizedState;if(vt!==null){var Rt=vt.dehydrated;Rt!==null&&bd(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||i.flags&512&&Sj(i)}catch(wt){W(i,i.return,wt)}}if(i===o){V=null;break}if(et=i.sibling,et!==null){et.return=i.return,V=et;break}V=i.return}}function hk(o){for(;V!==null;){var i=V;if(i===o){V=null;break}var et=i.sibling;if(et!==null){et.return=i.return,V=et;break}V=i.return}}function kk(o){for(;V!==null;){var i=V;try{switch(i.tag){case 0:case 11:case 15:var et=i.return;try{Rj(4,i)}catch(ft){W(i,et,ft)}break;case 1:var nt=i.stateNode;if(typeof nt.componentDidMount=="function"){var ot=i.return;try{nt.componentDidMount()}catch(ft){W(i,ot,ft)}}var st=i.return;try{Sj(i)}catch(ft){W(i,st,ft)}break;case 5:var lt=i.return;try{Sj(i)}catch(ft){W(i,lt,ft)}}}catch(ft){W(i,i.return,ft)}if(i===o){V=null;break}var ht=i.sibling;if(ht!==null){ht.return=i.return,V=ht;break}V=i.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(o){return o.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function mh(o,i,et,nt){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(o,et,nt),(!(K&2)||o!==R)&&(o===R&&(!(K&2)&&(rk|=et),T===4&&Dk(o,Z)),Ek(o,nt),et===1&&K===0&&!(i.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(o,i){var et=o.callbackNode;wc(o,i);var nt=uc(o,o===R?Z:0);if(nt===0)et!==null&&bc(et),o.callbackNode=null,o.callbackPriority=0;else if(i=nt&-nt,o.callbackPriority!==i){if(et!=null&&bc(et),i===1)o.tag===0?ig(Fk.bind(null,o)):hg(Fk.bind(null,o)),Jf(function(){!(K&6)&&jg()}),et=null;else{switch(Dc(nt)){case 1:et=fc;break;case 4:et=gc$1;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Gk(et,Hk.bind(null,o))}o.callbackPriority=i,o.callbackNode=et}}function Hk(o,i){if(Bk=-1,Ck=0,K&6)throw Error(p$2(327));var et=o.callbackNode;if(Ik()&&o.callbackNode!==et)return null;var nt=uc(o,o===R?Z:0);if(nt===0)return null;if(nt&30||nt&o.expiredLanes||i)i=Jk(o,nt);else{i=nt;var ot=K;K|=2;var st=Kk();(R!==o||Z!==i)&&(vk=null,Hj=B()+500,Lk(o,i));do try{Mk();break}catch(ht){Nk(o,ht)}while(!0);Qg(),nk.current=st,K=ot,Y!==null?i=0:(R=null,Z=0,i=T)}if(i!==0){if(i===2&&(ot=xc(o),ot!==0&&(nt=ot,i=Ok(o,ot))),i===1)throw et=qk,Lk(o,0),Dk(o,nt),Ek(o,B()),et;if(i===6)Dk(o,nt);else{if(ot=o.current.alternate,!(nt&30)&&!Pk(ot)&&(i=Jk(o,nt),i===2&&(st=xc(o),st!==0&&(nt=st,i=Ok(o,st))),i===1))throw et=qk,Lk(o,0),Dk(o,nt),Ek(o,B()),et;switch(o.finishedWork=ot,o.finishedLanes=nt,i){case 0:case 1:throw Error(p$2(345));case 2:Qk(o,uk,vk);break;case 3:if(Dk(o,nt),(nt&130023424)===nt&&(i=gk+500-B(),10<i)){if(uc(o,0)!==0)break;if(ot=o.suspendedLanes,(ot&nt)!==nt){L(),o.pingedLanes|=o.suspendedLanes&ot;break}o.timeoutHandle=Ff(Qk.bind(null,o,uk,vk),i);break}Qk(o,uk,vk);break;case 4:if(Dk(o,nt),(nt&4194240)===nt)break;for(i=o.eventTimes,ot=-1;0<nt;){var lt=31-oc(nt);st=1<<lt,lt=i[lt],lt>ot&&(ot=lt),nt&=~st}if(nt=ot,nt=B()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*mk(nt/1960))-nt,10<nt){o.timeoutHandle=Ff(Qk.bind(null,o,uk,vk),nt);break}Qk(o,uk,vk);break;case 5:Qk(o,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(o,B()),o.callbackNode===et?Hk.bind(null,o):null}function Ok(o,i){var et=tk;return o.current.memoizedState.isDehydrated&&(Lk(o,i).flags|=256),o=Jk(o,i),o!==2&&(i=uk,uk=et,i!==null&&Gj(i)),o}function Gj(o){uk===null?uk=o:uk.push.apply(uk,o)}function Pk(o){for(var i=o;;){if(i.flags&16384){var et=i.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var nt=0;nt<et.length;nt++){var ot=et[nt],st=ot.getSnapshot;ot=ot.value;try{if(!He(st(),ot))return!1}catch{return!1}}}if(et=i.child,i.subtreeFlags&16384&&et!==null)et.return=i,i=et;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Dk(o,i){for(i&=~sk,i&=~rk,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var et=31-oc(i),nt=1<<et;o[et]=-1,i&=~nt}}function Fk(o){if(K&6)throw Error(p$2(327));Ik();var i=uc(o,0);if(!(i&1))return Ek(o,B()),null;var et=Jk(o,i);if(o.tag!==0&&et===2){var nt=xc(o);nt!==0&&(i=nt,et=Ok(o,nt))}if(et===1)throw et=qk,Lk(o,0),Dk(o,i),Ek(o,B()),et;if(et===6)throw Error(p$2(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,Qk(o,uk,vk),Ek(o,B()),null}function Rk(o,i){var et=K;K|=1;try{return o(i)}finally{K=et,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(o){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var i=K;K|=1;var et=pk.transition,nt=C;try{if(pk.transition=null,C=1,o)return o()}finally{C=nt,pk.transition=et,K=i,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(o,i){o.finishedWork=null,o.finishedLanes=0;var et=o.timeoutHandle;if(et!==-1&&(o.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var nt=et;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(nt);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(nt.type._context);break;case 22:case 23:Ij()}et=et.return}if(R=o,Y=o=wh(o.current,null),Z=gj=i,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(i=0;i<Wg.length;i++)if(et=Wg[i],nt=et.interleaved,nt!==null){et.interleaved=null;var ot=nt.next,st=et.pending;if(st!==null){var lt=st.next;st.next=ot,nt.next=lt}et.pending=nt}Wg=null}return o}function Nk(o,i){do{var et=Y;try{if(Qg(),Ph.current=ai,Sh){for(var nt=N.memoizedState;nt!==null;){var ot=nt.queue;ot!==null&&(ot.pending=null),nt=nt.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,et===null||et.return===null){T=1,qk=i,Y=null;break}e:{var st=o,lt=et.return,ht=et,ft=i;if(i=Z,ht.flags|=32768,ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var St=ft,vt=ht,Rt=vt.tag;if(!(vt.mode&1)&&(Rt===0||Rt===11||Rt===15)){var wt=vt.alternate;wt?(vt.updateQueue=wt.updateQueue,vt.memoizedState=wt.memoizedState,vt.lanes=wt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var $t=Vi(lt);if($t!==null){$t.flags&=-257,Wi($t,lt,ht,st,i),$t.mode&1&&Ti(st,St,i),i=$t,ft=St;var Dt=i.updateQueue;if(Dt===null){var Pt=new Set;Pt.add(ft),i.updateQueue=Pt}else Dt.add(ft);break e}else{if(!(i&1)){Ti(st,St,i),uj();break e}ft=Error(p$2(426))}}else if(I&&ht.mode&1){var Ut=Vi(lt);if(Ut!==null){!(Ut.flags&65536)&&(Ut.flags|=256),Wi(Ut,lt,ht,st,i),Jg(Ki$1(ft,ht));break e}}st=ft=Ki$1(ft,ht),T!==4&&(T=2),tk===null?tk=[st]:tk.push(st),st=lt;do{switch(st.tag){case 3:st.flags|=65536,i&=-i,st.lanes|=i;var Ot=Oi(st,ft,i);fh(st,Ot);break e;case 1:ht=ft;var Lt=st.type,xt=st.stateNode;if(!(st.flags&128)&&(typeof Lt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Si===null||!Si.has(xt)))){st.flags|=65536,i&=-i,st.lanes|=i;var jt=Ri(st,ht,i);fh(st,jt);break e}}st=st.return}while(st!==null)}Tk(et)}catch(Ht){i=Ht,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(!0)}function Kk(){var o=nk.current;return nk.current=ai,o===null?ai:o}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(o,i){var et=K;K|=2;var nt=Kk();(R!==o||Z!==i)&&(vk=null,Lk(o,i));do try{Uk();break}catch(ot){Nk(o,ot)}while(!0);if(Qg(),K=et,nk.current=nt,Y!==null)throw Error(p$2(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(o){var i=Wk(o.alternate,o,gj);o.memoizedProps=o.pendingProps,i===null?Tk(o):Y=i,ok.current=null}function Tk(o){var i=o;do{var et=i.alternate;if(o=i.return,i.flags&32768){if(et=Jj(et,i),et!==null){et.flags&=32767,Y=et;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(et=Fj(et,i,gj),et!==null){Y=et;return}if(i=i.sibling,i!==null){Y=i;return}Y=i=o}while(i!==null);T===0&&(T=5)}function Qk(o,i,et){var nt=C,ot=pk.transition;try{pk.transition=null,C=1,Xk(o,i,et,nt)}finally{pk.transition=ot,C=nt}return null}function Xk(o,i,et,nt){do Ik();while(xk!==null);if(K&6)throw Error(p$2(327));et=o.finishedWork;var ot=o.finishedLanes;if(et===null)return null;if(o.finishedWork=null,o.finishedLanes=0,et===o.current)throw Error(p$2(177));o.callbackNode=null,o.callbackPriority=0;var st=et.lanes|et.childLanes;if(Bc(o,st),o===R&&(Y=R=null,Z=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),st=(et.flags&15990)!==0,et.subtreeFlags&15990||st){st=pk.transition,pk.transition=null;var lt=C;C=1;var ht=K;K|=4,ok.current=null,Pj(o,et),ek(et,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=et,ik(et),dc(),K=ht,C=lt,pk.transition=st}else o.current=et;if(wk&&(wk=!1,xk=o,yk=ot),st=o.pendingLanes,st===0&&(Si=null),mc(et.stateNode),Ek(o,B()),i!==null)for(nt=o.onRecoverableError,et=0;et<i.length;et++)ot=i[et],nt(ot.value,{componentStack:ot.stack,digest:ot.digest});if(Pi)throw Pi=!1,o=Qi,Qi=null,o;return yk&1&&o.tag!==0&&Ik(),st=o.pendingLanes,st&1?o===Ak?zk++:(zk=0,Ak=o):zk=0,jg(),null}function Ik(){if(xk!==null){var o=Dc(yk),i=pk.transition,et=C;try{if(pk.transition=null,C=16>o?16:o,xk===null)var nt=!1;else{if(o=xk,xk=null,yk=0,K&6)throw Error(p$2(331));var ot=K;for(K|=4,V=o.current;V!==null;){var st=V,lt=st.child;if(V.flags&16){var ht=st.deletions;if(ht!==null){for(var ft=0;ft<ht.length;ft++){var St=ht[ft];for(V=St;V!==null;){var vt=V;switch(vt.tag){case 0:case 11:case 15:Qj(8,vt,st)}var Rt=vt.child;if(Rt!==null)Rt.return=vt,V=Rt;else for(;V!==null;){vt=V;var wt=vt.sibling,$t=vt.return;if(Tj(vt),vt===St){V=null;break}if(wt!==null){wt.return=$t,V=wt;break}V=$t}}}var Dt=st.alternate;if(Dt!==null){var Pt=Dt.child;if(Pt!==null){Dt.child=null;do{var Ut=Pt.sibling;Pt.sibling=null,Pt=Ut}while(Pt!==null)}}V=st}}if(st.subtreeFlags&2064&&lt!==null)lt.return=st,V=lt;else e:for(;V!==null;){if(st=V,st.flags&2048)switch(st.tag){case 0:case 11:case 15:Qj(9,st,st.return)}var Ot=st.sibling;if(Ot!==null){Ot.return=st.return,V=Ot;break e}V=st.return}}var Lt=o.current;for(V=Lt;V!==null;){lt=V;var xt=lt.child;if(lt.subtreeFlags&2064&&xt!==null)xt.return=lt,V=xt;else e:for(lt=Lt;V!==null;){if(ht=V,ht.flags&2048)try{switch(ht.tag){case 0:case 11:case 15:Rj(9,ht)}}catch(Ht){W(ht,ht.return,Ht)}if(ht===lt){V=null;break e}var jt=ht.sibling;if(jt!==null){jt.return=ht.return,V=jt;break e}V=ht.return}}if(K=ot,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}nt=!0}return nt}finally{C=et,pk.transition=i}}return!1}function Yk(o,i,et){i=Ki$1(et,i),i=Oi(o,i,1),o=dh(o,i,1),i=L(),o!==null&&(Ac(o,1,i),Ek(o,i))}function W(o,i,et){if(o.tag===3)Yk(o,o,et);else for(;i!==null;){if(i.tag===3){Yk(i,o,et);break}else if(i.tag===1){var nt=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Si===null||!Si.has(nt))){o=Ki$1(et,o),o=Ri(i,o,1),i=dh(i,o,1),o=L(),i!==null&&(Ac(i,1,o),Ek(i,o));break}}i=i.return}}function Ui(o,i,et){var nt=o.pingCache;nt!==null&&nt.delete(i),i=L(),o.pingedLanes|=o.suspendedLanes&et,R===o&&(Z&et)===et&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(o,0):sk|=et),Ek(o,i)}function Zk(o,i){i===0&&(o.mode&1?(i=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):i=1);var et=L();o=Zg(o,i),o!==null&&(Ac(o,i,et),Ek(o,et))}function vj(o){var i=o.memoizedState,et=0;i!==null&&(et=i.retryLane),Zk(o,et)}function ck(o,i){var et=0;switch(o.tag){case 13:var nt=o.stateNode,ot=o.memoizedState;ot!==null&&(et=ot.retryLane);break;case 19:nt=o.stateNode;break;default:throw Error(p$2(314))}nt!==null&&nt.delete(i),Zk(o,et)}var Wk;Wk=function(o,i,et){if(o!==null)if(o.memoizedProps!==i.pendingProps||Wf.current)Ug=!0;else{if(!(o.lanes&et)&&!(i.flags&128))return Ug=!1,zj(o,i,et);Ug=!!(o.flags&131072)}else Ug=!1,I&&i.flags&1048576&&ug(i,ng,i.index);switch(i.lanes=0,i.tag){case 2:var nt=i.type;jj(o,i),o=i.pendingProps;var ot=Yf(i,H.current);Tg(i,et),ot=Xh(null,i,nt,o,ot,et);var st=bi();return i.flags|=1,typeof ot=="object"&&ot!==null&&typeof ot.render=="function"&&ot.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf(nt)?(st=!0,cg(i)):st=!1,i.memoizedState=ot.state!==null&&ot.state!==void 0?ot.state:null,ah(i),ot.updater=nh,i.stateNode=ot,ot._reactInternals=i,rh(i,nt,o,et),i=kj(null,i,nt,!0,st,et)):(i.tag=0,I&&st&&vg(i),Yi(null,i,ot,et),i=i.child),i;case 16:nt=i.elementType;e:{switch(jj(o,i),o=i.pendingProps,ot=nt._init,nt=ot(nt._payload),i.type=nt,ot=i.tag=$k(nt),o=Lg(nt,o),ot){case 0:i=dj(null,i,nt,o,et);break e;case 1:i=ij(null,i,nt,o,et);break e;case 11:i=Zi(null,i,nt,o,et);break e;case 14:i=aj(null,i,nt,Lg(nt.type,o),et);break e}throw Error(p$2(306,nt,""))}return i;case 0:return nt=i.type,ot=i.pendingProps,ot=i.elementType===nt?ot:Lg(nt,ot),dj(o,i,nt,ot,et);case 1:return nt=i.type,ot=i.pendingProps,ot=i.elementType===nt?ot:Lg(nt,ot),ij(o,i,nt,ot,et);case 3:e:{if(lj(i),o===null)throw Error(p$2(387));nt=i.pendingProps,st=i.memoizedState,ot=st.element,bh(o,i),gh(i,nt,null,et);var lt=i.memoizedState;if(nt=lt.element,st.isDehydrated)if(st={element:nt,isDehydrated:!1,cache:lt.cache,pendingSuspenseBoundaries:lt.pendingSuspenseBoundaries,transitions:lt.transitions},i.updateQueue.baseState=st,i.memoizedState=st,i.flags&256){ot=Ki$1(Error(p$2(423)),i),i=mj(o,i,nt,et,ot);break e}else if(nt!==ot){ot=Ki$1(Error(p$2(424)),i),i=mj(o,i,nt,et,ot);break e}else for(yg=Lf(i.stateNode.containerInfo.firstChild),xg=i,I=!0,zg=null,et=Ch(i,null,nt,et),i.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),nt===ot){i=$i(o,i,et);break e}Yi(o,i,nt,et)}i=i.child}return i;case 5:return Kh(i),o===null&&Eg(i),nt=i.type,ot=i.pendingProps,st=o!==null?o.memoizedProps:null,lt=ot.children,Ef(nt,ot)?lt=null:st!==null&&Ef(nt,st)&&(i.flags|=32),hj(o,i),Yi(o,i,lt,et),i.child;case 6:return o===null&&Eg(i),null;case 13:return pj(o,i,et);case 4:return Ih(i,i.stateNode.containerInfo),nt=i.pendingProps,o===null?i.child=Bh(i,null,nt,et):Yi(o,i,nt,et),i.child;case 11:return nt=i.type,ot=i.pendingProps,ot=i.elementType===nt?ot:Lg(nt,ot),Zi(o,i,nt,ot,et);case 7:return Yi(o,i,i.pendingProps,et),i.child;case 8:return Yi(o,i,i.pendingProps.children,et),i.child;case 12:return Yi(o,i,i.pendingProps.children,et),i.child;case 10:e:{if(nt=i.type._context,ot=i.pendingProps,st=i.memoizedProps,lt=ot.value,G(Mg,nt._currentValue),nt._currentValue=lt,st!==null)if(He(st.value,lt)){if(st.children===ot.children&&!Wf.current){i=$i(o,i,et);break e}}else for(st=i.child,st!==null&&(st.return=i);st!==null;){var ht=st.dependencies;if(ht!==null){lt=st.child;for(var ft=ht.firstContext;ft!==null;){if(ft.context===nt){if(st.tag===1){ft=ch(-1,et&-et),ft.tag=2;var St=st.updateQueue;if(St!==null){St=St.shared;var vt=St.pending;vt===null?ft.next=ft:(ft.next=vt.next,vt.next=ft),St.pending=ft}}st.lanes|=et,ft=st.alternate,ft!==null&&(ft.lanes|=et),Sg(st.return,et,i),ht.lanes|=et;break}ft=ft.next}}else if(st.tag===10)lt=st.type===i.type?null:st.child;else if(st.tag===18){if(lt=st.return,lt===null)throw Error(p$2(341));lt.lanes|=et,ht=lt.alternate,ht!==null&&(ht.lanes|=et),Sg(lt,et,i),lt=st.sibling}else lt=st.child;if(lt!==null)lt.return=st;else for(lt=st;lt!==null;){if(lt===i){lt=null;break}if(st=lt.sibling,st!==null){st.return=lt.return,lt=st;break}lt=lt.return}st=lt}Yi(o,i,ot.children,et),i=i.child}return i;case 9:return ot=i.type,nt=i.pendingProps.children,Tg(i,et),ot=Vg(ot),nt=nt(ot),i.flags|=1,Yi(o,i,nt,et),i.child;case 14:return nt=i.type,ot=Lg(nt,i.pendingProps),ot=Lg(nt.type,ot),aj(o,i,nt,ot,et);case 15:return cj(o,i,i.type,i.pendingProps,et);case 17:return nt=i.type,ot=i.pendingProps,ot=i.elementType===nt?ot:Lg(nt,ot),jj(o,i),i.tag=1,Zf(nt)?(o=!0,cg(i)):o=!1,Tg(i,et),ph(i,nt,ot),rh(i,nt,ot,et),kj(null,i,nt,!0,o,et);case 19:return yj(o,i,et);case 22:return ej(o,i,et)}throw Error(p$2(156,i.tag))};function Gk(o,i){return ac(o,i)}function al(o,i,et,nt){this.tag=o,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,i,et,nt){return new al(o,i,et,nt)}function bj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function $k(o){if(typeof o=="function")return bj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function wh(o,i){var et=o.alternate;return et===null?(et=Bg(o.tag,i,o.key,o.mode),et.elementType=o.elementType,et.type=o.type,et.stateNode=o.stateNode,et.alternate=o,o.alternate=et):(et.pendingProps=i,et.type=o.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=o.flags&14680064,et.childLanes=o.childLanes,et.lanes=o.lanes,et.child=o.child,et.memoizedProps=o.memoizedProps,et.memoizedState=o.memoizedState,et.updateQueue=o.updateQueue,i=o.dependencies,et.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},et.sibling=o.sibling,et.index=o.index,et.ref=o.ref,et}function yh(o,i,et,nt,ot,st){var lt=2;if(nt=o,typeof o=="function")bj(o)&&(lt=1);else if(typeof o=="string")lt=5;else e:switch(o){case ya:return Ah(et.children,ot,st,i);case za:lt=8,ot|=8;break;case Aa:return o=Bg(12,et,i,ot|2),o.elementType=Aa,o.lanes=st,o;case Ea:return o=Bg(13,et,i,ot),o.elementType=Ea,o.lanes=st,o;case Fa:return o=Bg(19,et,i,ot),o.elementType=Fa,o.lanes=st,o;case Ia:return qj(et,ot,st,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:lt=10;break e;case Ca:lt=9;break e;case Da:lt=11;break e;case Ga:lt=14;break e;case Ha:lt=16,nt=null;break e}throw Error(p$2(130,o==null?o:typeof o,""))}return i=Bg(lt,et,i,ot),i.elementType=o,i.type=nt,i.lanes=st,i}function Ah(o,i,et,nt){return o=Bg(7,o,nt,i),o.lanes=et,o}function qj(o,i,et,nt){return o=Bg(22,o,nt,i),o.elementType=Ia,o.lanes=et,o.stateNode={isHidden:!1},o}function xh(o,i,et){return o=Bg(6,o,null,i),o.lanes=et,o}function zh(o,i,et){return i=Bg(4,o.children!==null?o.children:[],o.key,i),i.lanes=et,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function bl(o,i,et,nt,ot){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=ot,this.mutableSourceEagerHydrationData=null}function cl(o,i,et,nt,ot,st,lt,ht,ft){return o=new bl(o,i,et,ht,ft),i===1?(i=1,st===!0&&(i|=8)):i=0,st=Bg(3,null,null,i),o.current=st,st.stateNode=o,st.memoizedState={element:nt,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(st),o}function dl(o,i,et){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:o,containerInfo:i,implementation:et}}function el(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p$2(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p$2(171))}if(o.tag===1){var et=o.type;if(Zf(et))return bg(o,et,i)}return i}function fl(o,i,et,nt,ot,st,lt,ht,ft){return o=cl(et,nt,!0,o,ot,st,lt,ht,ft),o.context=el(null),et=o.current,nt=L(),ot=lh(et),st=ch(nt,ot),st.callback=i??null,dh(et,st,ot),o.current.lanes=ot,Ac(o,ot,nt),Ek(o,nt),o}function gl(o,i,et,nt){var ot=i.current,st=L(),lt=lh(ot);return et=el(et),i.context===null?i.context=et:i.pendingContext=et,i=ch(st,lt),i.payload={element:o},nt=nt===void 0?null:nt,nt!==null&&(i.callback=nt),o=dh(ot,i,lt),o!==null&&(mh(o,ot,lt,st),eh(o,ot,lt)),lt}function hl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function il(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var et=o.retryLane;o.retryLane=et!==0&&et<i?et:i}}function jl(o,i){il(o,i),(o=o.alternate)&&il(o,i)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(o){console.error(o)};function ml(o){this._internalRoot=o}nl.prototype.render=ml.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(p$2(409));gl(o,i,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;Sk(function(){gl(null,o,null,null)}),i[uf]=null}};function nl(o){this._internalRoot=o}nl.prototype.unstable_scheduleHydration=function(o){if(o){var i=Hc();o={blockedOn:null,target:o,priority:i};for(var et=0;et<Qc.length&&i!==0&&i<Qc[et].priority;et++);Qc.splice(et,0,o),et===0&&Vc(o)}};function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function pl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(o,i,et,nt,ot){if(ot){if(typeof nt=="function"){var st=nt;nt=function(){var St=hl(lt);st.call(St)}}var lt=fl(i,nt,o,0,null,!1,!1,"",ql);return o._reactRootContainer=lt,o[uf]=lt.current,sf(o.nodeType===8?o.parentNode:o),Sk(),lt}for(;ot=o.lastChild;)o.removeChild(ot);if(typeof nt=="function"){var ht=nt;nt=function(){var St=hl(ft);ht.call(St)}}var ft=cl(o,0,!1,null,null,!1,!1,"",ql);return o._reactRootContainer=ft,o[uf]=ft.current,sf(o.nodeType===8?o.parentNode:o),Sk(function(){gl(i,ft,et,nt)}),ft}function sl(o,i,et,nt,ot){var st=et._reactRootContainer;if(st){var lt=st;if(typeof ot=="function"){var ht=ot;ot=function(){var ft=hl(lt);ht.call(ft)}}gl(i,lt,o,ot)}else lt=rl(et,i,o,ot,nt);return hl(lt)}Ec=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var et=tc(i.pendingLanes);et!==0&&(Cc(i,et|1),Ek(i,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var nt=Zg(o,1);if(nt!==null){var ot=L();mh(nt,o,1,ot)}}),jl(o,1)}};Fc=function(o){if(o.tag===13){var i=Zg(o,134217728);if(i!==null){var et=L();mh(i,o,134217728,et)}jl(o,134217728)}};Gc=function(o){if(o.tag===13){var i=lh(o),et=Zg(o,i);if(et!==null){var nt=L();mh(et,o,i,nt)}jl(o,i)}};Hc=function(){return C};Ic=function(o,i){var et=C;try{return C=o,i()}finally{C=et}};yb=function(o,i,et){switch(i){case"input":if(bb(o,et),i=et.name,et.type==="radio"&&i!=null){for(et=o;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<et.length;i++){var nt=et[i];if(nt!==o&&nt.form===o.form){var ot=Db(nt);if(!ot)throw Error(p$2(90));Wa(nt),bb(nt,ot)}}}break;case"textarea":ib(o,et);break;case"select":i=et.value,i!=null&&fb(o,!!et.multiple,i,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc=wl$1.inject(vl),lc=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(o,i){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(i))throw Error(p$2(200));return dl(o,i,null,et)};reactDom_production_min.createRoot=function(o,i){if(!ol(o))throw Error(p$2(299));var et=!1,nt="",ot=ll;return i!=null&&(i.unstable_strictMode===!0&&(et=!0),i.identifierPrefix!==void 0&&(nt=i.identifierPrefix),i.onRecoverableError!==void 0&&(ot=i.onRecoverableError)),i=cl(o,1,!1,null,null,et,!1,nt,ot),o[uf]=i.current,sf(o.nodeType===8?o.parentNode:o),new ml(i)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(p$2(188)):(o=Object.keys(o).join(","),Error(p$2(268,o)));return o=Zb(i),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Sk(o)};reactDom_production_min.hydrate=function(o,i,et){if(!pl(i))throw Error(p$2(200));return sl(null,o,i,!0,et)};reactDom_production_min.hydrateRoot=function(o,i,et){if(!ol(o))throw Error(p$2(405));var nt=et!=null&&et.hydratedSources||null,ot=!1,st="",lt=ll;if(et!=null&&(et.unstable_strictMode===!0&&(ot=!0),et.identifierPrefix!==void 0&&(st=et.identifierPrefix),et.onRecoverableError!==void 0&&(lt=et.onRecoverableError)),i=fl(i,null,o,1,et??null,ot,!1,st,lt),o[uf]=i.current,sf(o),nt)for(o=0;o<nt.length;o++)et=nt[o],ot=et._getVersion,ot=ot(et._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[et,ot]:i.mutableSourceEagerHydrationData.push(et,ot);return new nl(i)};reactDom_production_min.render=function(o,i,et){if(!pl(i))throw Error(p$2(200));return sl(null,o,i,!1,et)};reactDom_production_min.unmountComponentAtNode=function(o){if(!pl(o))throw Error(p$2(40));return o._reactRootContainer?(Sk(function(){sl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,i,et,nt){if(!pl(et))throw Error(p$2(200));if(o==null||o._reactInternals===void 0)throw Error(p$2(38));return sl(o,i,et,!1,nt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var withSelector={exports:{}},useSyncExternalStoreWithSelector_production_min={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g$1=reactExports;function n$1(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var p$1=typeof Object.is=="function"?Object.is:n$1,q$1=g$1.useSyncExternalStore,r$1=g$1.useRef,t$1=g$1.useEffect,u$1=g$1.useMemo,v$1=g$1.useDebugValue;useSyncExternalStoreWithSelector_production_min.useSyncExternalStoreWithSelector=function(o,i,et,nt,ot){var st=r$1(null);if(st.current===null){var lt={hasValue:!1,value:null};st.current=lt}else lt=st.current;st=u$1(function(){function ft($t){if(!St){if(St=!0,vt=$t,$t=nt($t),ot!==void 0&&lt.hasValue){var Dt=lt.value;if(ot(Dt,$t))return Rt=Dt}return Rt=$t}if(Dt=Rt,p$1(vt,$t))return Dt;var Pt=nt($t);return ot!==void 0&&ot(Dt,Pt)?Dt:(vt=$t,Rt=Pt)}var St=!1,vt,Rt,wt=et===void 0?null:et;return[function(){return ft(i())},wt===null?void 0:function(){return ft(wt())}]},[i,et,nt,ot]);var ht=q$1(o,st[0],st[1]);return t$1(function(){lt.hasValue=!0,lt.value=ht},[ht]),v$1(ht),ht};withSelector.exports=useSyncExternalStoreWithSelector_production_min;var withSelectorExports=withSelector.exports,React="default"in React$2?React$1:React$2,ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!React.createContext)return{};const o=gT[ContextKey]??(gT[ContextKey]=new Map);let i=o.get(React.createContext);return i||(i=React.createContext(null),o.set(React.createContext,i)),i}var ReactReduxContext=getContext(),notInitialized=()=>{throw new Error("uSES not initialized!")};function createReduxContextHook(o=ReactReduxContext){return function(){return React.useContext(o)}}var useReduxContext=createReduxContextHook(),useSyncExternalStoreWithSelector=notInitialized,initializeUseSelector=o=>{useSyncExternalStoreWithSelector=o},refEquality=(o,i)=>o===i;function createSelectorHook(o=ReactReduxContext){const i=o===ReactReduxContext?useReduxContext:createReduxContextHook(o),et=(nt,ot={})=>{const{equalityFn:st=refEquality,devModeChecks:lt={}}=typeof ot=="function"?{equalityFn:ot}:ot,{store:ht,subscription:ft,getServerState:St,stabilityCheck:vt,identityFunctionCheck:Rt}=i();React.useRef(!0);const wt=React.useCallback({[nt.name](Dt){return nt(Dt)}}[nt.name],[nt,vt,lt.stabilityCheck]),$t=useSyncExternalStoreWithSelector(ft.addNestedSub,ht.getState,St||ht.getState,wt,st);return React.useDebugValue($t),$t};return Object.assign(et,{withTypes:()=>et}),et}var useSelector=createSelectorHook();function defaultNoopBatch(o){o()}function createListenerCollection(){let o=null,i=null;return{clear(){o=null,i=null},notify(){defaultNoopBatch(()=>{let et=o;for(;et;)et.callback(),et=et.next})},get(){const et=[];let nt=o;for(;nt;)et.push(nt),nt=nt.next;return et},subscribe(et){let nt=!0;const ot=i={callback:et,next:null,prev:i};return ot.prev?ot.prev.next=ot:o=ot,function(){!nt||o===null||(nt=!1,ot.next?ot.next.prev=ot.prev:i=ot.prev,ot.prev?ot.prev.next=ot.next:o=ot.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(o,i){let et,nt=nullListeners,ot=0,st=!1;function lt(Pt){vt();const Ut=nt.subscribe(Pt);let Ot=!1;return()=>{Ot||(Ot=!0,Ut(),Rt())}}function ht(){nt.notify()}function ft(){Dt.onStateChange&&Dt.onStateChange()}function St(){return st}function vt(){ot++,et||(et=i?i.addNestedSub(ft):o.subscribe(ft),nt=createListenerCollection())}function Rt(){ot--,et&&ot===0&&(et(),et=void 0,nt.clear(),nt=nullListeners)}function wt(){st||(st=!0,vt())}function $t(){st&&(st=!1,Rt())}const Dt={addNestedSub:lt,notifyNestedSubs:ht,handleChangeWrapper:ft,isSubscribed:St,trySubscribe:wt,tryUnsubscribe:$t,getListeners:()=>nt};return Dt}var canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect$1=canUseDOM?React.useLayoutEffect:React.useEffect;function Provider({store:o,context:i,children:et,serverState:nt,stabilityCheck:ot="once",identityFunctionCheck:st="once"}){const lt=React.useMemo(()=>{const St=createSubscription(o);return{store:o,subscription:St,getServerState:nt?()=>nt:void 0,stabilityCheck:ot,identityFunctionCheck:st}},[o,nt,ot,st]),ht=React.useMemo(()=>o.getState(),[o]);useIsomorphicLayoutEffect$1(()=>{const{subscription:St}=lt;return St.onStateChange=St.notifyNestedSubs,St.trySubscribe(),ht!==o.getState()&&St.notifyNestedSubs(),()=>{St.tryUnsubscribe(),St.onStateChange=void 0}},[lt,ht]);const ft=i||ReactReduxContext;return React.createElement(ft.Provider,{value:lt},et)}var Provider_default=Provider;function createStoreHook(o=ReactReduxContext){const i=o===ReactReduxContext?useReduxContext:createReduxContextHook(o),et=()=>{const{store:nt}=i();return nt};return Object.assign(et,{withTypes:()=>et}),et}var useStore=createStoreHook();function createDispatchHook(o=ReactReduxContext){const i=o===ReactReduxContext?useStore:createStoreHook(o),et=()=>i().dispatch;return Object.assign(et,{withTypes:()=>et}),et}var useDispatch=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var et=arguments[i];for(var nt in et)Object.prototype.hasOwnProperty.call(et,nt)&&(o[nt]=et[nt])}return o},_extends$2.apply(this,arguments)}var Action;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(o){o===void 0&&(o={});function i(nt,ot){let{pathname:st,search:lt,hash:ht}=nt.location;return createLocation("",{pathname:st,search:lt,hash:ht},ot.state&&ot.state.usr||null,ot.state&&ot.state.key||"default")}function et(nt,ot){return typeof ot=="string"?ot:createPath(ot)}return getUrlBasedHistory(i,et,null,o)}function invariant(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function warning(o,i){if(!o){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(o,i){return{usr:o.state,key:o.key,idx:i}}function createLocation(o,i,et,nt){return et===void 0&&(et=null),_extends$2({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof i=="string"?parsePath(i):i,{state:et,key:i&&i.key||nt||createKey()})}function createPath(o){let{pathname:i="/",search:et="",hash:nt=""}=o;return et&&et!=="?"&&(i+=et.charAt(0)==="?"?et:"?"+et),nt&&nt!=="#"&&(i+=nt.charAt(0)==="#"?nt:"#"+nt),i}function parsePath(o){let i={};if(o){let et=o.indexOf("#");et>=0&&(i.hash=o.substr(et),o=o.substr(0,et));let nt=o.indexOf("?");nt>=0&&(i.search=o.substr(nt),o=o.substr(0,nt)),o&&(i.pathname=o)}return i}function getUrlBasedHistory(o,i,et,nt){nt===void 0&&(nt={});let{window:ot=document.defaultView,v5Compat:st=!1}=nt,lt=ot.history,ht=Action.Pop,ft=null,St=vt();St==null&&(St=0,lt.replaceState(_extends$2({},lt.state,{idx:St}),""));function vt(){return(lt.state||{idx:null}).idx}function Rt(){ht=Action.Pop;let Ut=vt(),Ot=Ut==null?null:Ut-St;St=Ut,ft&&ft({action:ht,location:Pt.location,delta:Ot})}function wt(Ut,Ot){ht=Action.Push;let Lt=createLocation(Pt.location,Ut,Ot);et&&et(Lt,Ut),St=vt()+1;let xt=getHistoryState(Lt,St),jt=Pt.createHref(Lt);try{lt.pushState(xt,"",jt)}catch(Ht){if(Ht instanceof DOMException&&Ht.name==="DataCloneError")throw Ht;ot.location.assign(jt)}st&&ft&&ft({action:ht,location:Pt.location,delta:1})}function $t(Ut,Ot){ht=Action.Replace;let Lt=createLocation(Pt.location,Ut,Ot);et&&et(Lt,Ut),St=vt();let xt=getHistoryState(Lt,St),jt=Pt.createHref(Lt);lt.replaceState(xt,"",jt),st&&ft&&ft({action:ht,location:Pt.location,delta:0})}function Dt(Ut){let Ot=ot.location.origin!=="null"?ot.location.origin:ot.location.href,Lt=typeof Ut=="string"?Ut:createPath(Ut);return invariant(Ot,"No window.location.(origin|href) available to create URL for href: "+Lt),new URL(Lt,Ot)}let Pt={get action(){return ht},get location(){return o(ot,lt)},listen(Ut){if(ft)throw new Error("A history only accepts one active listener");return ot.addEventListener(PopStateEventType,Rt),ft=Ut,()=>{ot.removeEventListener(PopStateEventType,Rt),ft=null}},createHref(Ut){return i(ot,Ut)},createURL:Dt,encodeLocation(Ut){let Ot=Dt(Ut);return{pathname:Ot.pathname,search:Ot.search,hash:Ot.hash}},push:wt,replace:$t,go(Ut){return lt.go(Ut)}};return Pt}var ResultType;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(ResultType||(ResultType={}));function matchRoutes(o,i,et){et===void 0&&(et="/");let nt=typeof i=="string"?parsePath(i):i,ot=stripBasename(nt.pathname||"/",et);if(ot==null)return null;let st=flattenRoutes(o);rankRouteBranches(st);let lt=null;for(let ht=0;lt==null&&ht<st.length;++ht)lt=matchRouteBranch(st[ht],safelyDecodeURI(ot));return lt}function flattenRoutes(o,i,et,nt){i===void 0&&(i=[]),et===void 0&&(et=[]),nt===void 0&&(nt="");let ot=(st,lt,ht)=>{let ft={relativePath:ht===void 0?st.path||"":ht,caseSensitive:st.caseSensitive===!0,childrenIndex:lt,route:st};ft.relativePath.startsWith("/")&&(invariant(ft.relativePath.startsWith(nt),'Absolute route path "'+ft.relativePath+'" nested under path '+('"'+nt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ft.relativePath=ft.relativePath.slice(nt.length));let St=joinPaths([nt,ft.relativePath]),vt=et.concat(ft);st.children&&st.children.length>0&&(invariant(st.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+St+'".')),flattenRoutes(st.children,i,vt,St)),!(st.path==null&&!st.index)&&i.push({path:St,score:computeScore(St,st.index),routesMeta:vt})};return o.forEach((st,lt)=>{var ht;if(st.path===""||!((ht=st.path)!=null&&ht.includes("?")))ot(st,lt);else for(let ft of explodeOptionalSegments(st.path))ot(st,lt,ft)}),i}function explodeOptionalSegments(o){let i=o.split("/");if(i.length===0)return[];let[et,...nt]=i,ot=et.endsWith("?"),st=et.replace(/\?$/,"");if(nt.length===0)return ot?[st,""]:[st];let lt=explodeOptionalSegments(nt.join("/")),ht=[];return ht.push(...lt.map(ft=>ft===""?st:[st,ft].join("/"))),ot&&ht.push(...lt),ht.map(ft=>o.startsWith("/")&&ft===""?"/":ft)}function rankRouteBranches(o){o.sort((i,et)=>i.score!==et.score?et.score-i.score:compareIndexes(i.routesMeta.map(nt=>nt.childrenIndex),et.routesMeta.map(nt=>nt.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=o=>o==="*";function computeScore(o,i){let et=o.split("/"),nt=et.length;return et.some(isSplat)&&(nt+=splatPenalty),i&&(nt+=indexRouteValue),et.filter(ot=>!isSplat(ot)).reduce((ot,st)=>ot+(paramRe.test(st)?dynamicSegmentValue:st===""?emptySegmentValue:staticSegmentValue),nt)}function compareIndexes(o,i){return o.length===i.length&&o.slice(0,-1).every((nt,ot)=>nt===i[ot])?o[o.length-1]-i[i.length-1]:0}function matchRouteBranch(o,i){let{routesMeta:et}=o,nt={},ot="/",st=[];for(let lt=0;lt<et.length;++lt){let ht=et[lt],ft=lt===et.length-1,St=ot==="/"?i:i.slice(ot.length)||"/",vt=matchPath({path:ht.relativePath,caseSensitive:ht.caseSensitive,end:ft},St);if(!vt)return null;Object.assign(nt,vt.params);let Rt=ht.route;st.push({params:nt,pathname:joinPaths([ot,vt.pathname]),pathnameBase:normalizePathname(joinPaths([ot,vt.pathnameBase])),route:Rt}),vt.pathnameBase!=="/"&&(ot=joinPaths([ot,vt.pathnameBase]))}return st}function matchPath(o,i){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[et,nt]=compilePath(o.path,o.caseSensitive,o.end),ot=i.match(et);if(!ot)return null;let st=ot[0],lt=st.replace(/(.)\/+$/,"$1"),ht=ot.slice(1);return{params:nt.reduce((St,vt,Rt)=>{let{paramName:wt,isOptional:$t}=vt;if(wt==="*"){let Pt=ht[Rt]||"";lt=st.slice(0,st.length-Pt.length).replace(/(.)\/+$/,"$1")}const Dt=ht[Rt];return $t&&!Dt?St[wt]=void 0:St[wt]=safelyDecodeURIComponent(Dt||"",wt),St},{}),pathname:st,pathnameBase:lt,pattern:o}}function compilePath(o,i,et){i===void 0&&(i=!1),et===void 0&&(et=!0),warning(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let nt=[],ot="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(lt,ht,ft)=>(nt.push({paramName:ht,isOptional:ft!=null}),ft?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(nt.push({paramName:"*"}),ot+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?ot+="\\/*$":o!==""&&o!=="/"&&(ot+="(?:(?=\\/|$))"),[new RegExp(ot,i?void 0:"i"),nt]}function safelyDecodeURI(o){try{return decodeURI(o)}catch(i){return warning(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),o}}function safelyDecodeURIComponent(o,i){try{return decodeURIComponent(o)}catch(et){return warning(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+o+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+et+").")),o}}function stripBasename(o,i){if(i==="/")return o;if(!o.toLowerCase().startsWith(i.toLowerCase()))return null;let et=i.endsWith("/")?i.length-1:i.length,nt=o.charAt(et);return nt&&nt!=="/"?null:o.slice(et)||"/"}function resolvePath(o,i){i===void 0&&(i="/");let{pathname:et,search:nt="",hash:ot=""}=typeof o=="string"?parsePath(o):o;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,i):i,search:normalizeSearch(nt),hash:normalizeHash(ot)}}function resolvePathname(o,i){let et=i.replace(/\/+$/,"").split("/");return o.split("/").forEach(ot=>{ot===".."?et.length>1&&et.pop():ot!=="."&&et.push(ot)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(o,i,et,nt){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(nt)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(o){return o.filter((i,et)=>et===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(o,i){let et=getPathContributingMatches(o);return i?et.map((nt,ot)=>ot===o.length-1?nt.pathname:nt.pathnameBase):et.map(nt=>nt.pathnameBase)}function resolveTo(o,i,et,nt){nt===void 0&&(nt=!1);let ot;typeof o=="string"?ot=parsePath(o):(ot=_extends$2({},o),invariant(!ot.pathname||!ot.pathname.includes("?"),getInvalidPathError("?","pathname","search",ot)),invariant(!ot.pathname||!ot.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ot)),invariant(!ot.search||!ot.search.includes("#"),getInvalidPathError("#","search","hash",ot)));let st=o===""||ot.pathname==="",lt=st?"/":ot.pathname,ht;if(lt==null)ht=et;else{let Rt=i.length-1;if(!nt&&lt.startsWith("..")){let wt=lt.split("/");for(;wt[0]==="..";)wt.shift(),Rt-=1;ot.pathname=wt.join("/")}ht=Rt>=0?i[Rt]:"/"}let ft=resolvePath(ot,ht),St=lt&&lt!=="/"&&lt.endsWith("/"),vt=(st||lt===".")&&et.endsWith("/");return!ft.pathname.endsWith("/")&&(St||vt)&&(ft.pathname+="/"),ft}const joinPaths=o=>o.join("/").replace(/\/\/+/g,"/"),normalizePathname=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,normalizeHash=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function isRouteErrorResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var et=arguments[i];for(var nt in et)Object.prototype.hasOwnProperty.call(et,nt)&&(o[nt]=et[nt])}return o},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(o,i){let{relative:et}=i===void 0?{}:i;useInRouterContext()||invariant(!1);let{basename:nt,navigator:ot}=reactExports.useContext(NavigationContext),{hash:st,pathname:lt,search:ht}=useResolvedPath(o,{relative:et}),ft=lt;return nt!=="/"&&(ft=lt==="/"?nt:joinPaths([nt,lt])),ot.createHref({pathname:ft,search:ht,hash:st})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(o){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(o)}function useNavigate(){let{isDataRoute:o}=reactExports.useContext(RouteContext);return o?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let o=reactExports.useContext(DataRouterContext),{basename:i,future:et,navigator:nt}=reactExports.useContext(NavigationContext),{matches:ot}=reactExports.useContext(RouteContext),{pathname:st}=useLocation(),lt=JSON.stringify(getResolveToMatches(ot,et.v7_relativeSplatPath)),ht=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{ht.current=!0}),reactExports.useCallback(function(St,vt){if(vt===void 0&&(vt={}),!ht.current)return;if(typeof St=="number"){nt.go(St);return}let Rt=resolveTo(St,JSON.parse(lt),st,vt.relative==="path");o==null&&i!=="/"&&(Rt.pathname=Rt.pathname==="/"?i:joinPaths([i,Rt.pathname])),(vt.replace?nt.replace:nt.push)(Rt,vt.state,vt)},[i,nt,lt,st,o])}const OutletContext=reactExports.createContext(null);function useOutlet(o){let i=reactExports.useContext(RouteContext).outlet;return i&&reactExports.createElement(OutletContext.Provider,{value:o},i)}function useParams(){let{matches:o}=reactExports.useContext(RouteContext),i=o[o.length-1];return i?i.params:{}}function useResolvedPath(o,i){let{relative:et}=i===void 0?{}:i,{future:nt}=reactExports.useContext(NavigationContext),{matches:ot}=reactExports.useContext(RouteContext),{pathname:st}=useLocation(),lt=JSON.stringify(getResolveToMatches(ot,nt.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(o,JSON.parse(lt),st,et==="path"),[o,lt,st,et])}function useRoutes(o,i){return useRoutesImpl(o,i)}function useRoutesImpl(o,i,et,nt){useInRouterContext()||invariant(!1);let{navigator:ot}=reactExports.useContext(NavigationContext),{matches:st}=reactExports.useContext(RouteContext),lt=st[st.length-1],ht=lt?lt.params:{};lt&&lt.pathname;let ft=lt?lt.pathnameBase:"/";lt&&lt.route;let St=useLocation(),vt;if(i){var Rt;let Ut=typeof i=="string"?parsePath(i):i;ft==="/"||(Rt=Ut.pathname)!=null&&Rt.startsWith(ft)||invariant(!1),vt=Ut}else vt=St;let wt=vt.pathname||"/",$t=ft==="/"?wt:wt.slice(ft.length)||"/",Dt=matchRoutes(o,{pathname:$t}),Pt=_renderMatches(Dt&&Dt.map(Ut=>Object.assign({},Ut,{params:Object.assign({},ht,Ut.params),pathname:joinPaths([ft,ot.encodeLocation?ot.encodeLocation(Ut.pathname).pathname:Ut.pathname]),pathnameBase:Ut.pathnameBase==="/"?ft:joinPaths([ft,ot.encodeLocation?ot.encodeLocation(Ut.pathnameBase).pathname:Ut.pathnameBase])})),st,et,nt);return i&&Pt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},vt),navigationType:Action.Pop}},Pt):Pt}function DefaultErrorComponent(){let o=useRouteError(),i=isRouteErrorResponse(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),et=o instanceof Error?o.stack:null,ot={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),et?reactExports.createElement("pre",{style:ot},et):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,et){return et.location!==i.location||et.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:et.error,location:et.location,revalidation:i.revalidation||et.revalidation}}componentDidCatch(i,et){console.error("React Router caught the following error during render",i,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(o){let{routeContext:i,match:et,children:nt}=o,ot=reactExports.useContext(DataRouterContext);return ot&&ot.static&&ot.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(ot.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:i},nt)}function _renderMatches(o,i,et,nt){var ot;if(i===void 0&&(i=[]),et===void 0&&(et=null),nt===void 0&&(nt=null),o==null){var st;if((st=et)!=null&&st.errors)o=et.matches;else return null}let lt=o,ht=(ot=et)==null?void 0:ot.errors;if(ht!=null){let vt=lt.findIndex(Rt=>Rt.route.id&&(ht==null?void 0:ht[Rt.route.id]));vt>=0||invariant(!1),lt=lt.slice(0,Math.min(lt.length,vt+1))}let ft=!1,St=-1;if(et&&nt&&nt.v7_partialHydration)for(let vt=0;vt<lt.length;vt++){let Rt=lt[vt];if((Rt.route.HydrateFallback||Rt.route.hydrateFallbackElement)&&(St=vt),Rt.route.id){let{loaderData:wt,errors:$t}=et,Dt=Rt.route.loader&&wt[Rt.route.id]===void 0&&(!$t||$t[Rt.route.id]===void 0);if(Rt.route.lazy||Dt){ft=!0,St>=0?lt=lt.slice(0,St+1):lt=[lt[0]];break}}}return lt.reduceRight((vt,Rt,wt)=>{let $t,Dt=!1,Pt=null,Ut=null;et&&($t=ht&&Rt.route.id?ht[Rt.route.id]:void 0,Pt=Rt.route.errorElement||defaultErrorElement,ft&&(St<0&&wt===0?(warningOnce("route-fallback",!1),Dt=!0,Ut=null):St===wt&&(Dt=!0,Ut=Rt.route.hydrateFallbackElement||null)));let Ot=i.concat(lt.slice(0,wt+1)),Lt=()=>{let xt;return $t?xt=Pt:Dt?xt=Ut:Rt.route.Component?xt=reactExports.createElement(Rt.route.Component,null):Rt.route.element?xt=Rt.route.element:xt=vt,reactExports.createElement(RenderedRoute,{match:Rt,routeContext:{outlet:vt,matches:Ot,isDataRoute:et!=null},children:xt})};return et&&(Rt.route.ErrorBoundary||Rt.route.errorElement||wt===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:Pt,error:$t,children:Lt(),routeContext:{outlet:null,matches:Ot,isDataRoute:!0}}):Lt()},null)}var DataRouterHook$1=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(DataRouterHook$1||{}),DataRouterStateHook$1=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}(DataRouterStateHook$1||{});function useDataRouterContext(o){let i=reactExports.useContext(DataRouterContext);return i||invariant(!1),i}function useDataRouterState(o){let i=reactExports.useContext(DataRouterStateContext);return i||invariant(!1),i}function useRouteContext(o){let i=reactExports.useContext(RouteContext);return i||invariant(!1),i}function useCurrentRouteId(o){let i=useRouteContext(),et=i.matches[i.matches.length-1];return et.route.id||invariant(!1),et.route.id}function useRouteError(){var o;let i=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),nt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return i!==void 0?i:(o=et.errors)==null?void 0:o[nt]}function useNavigateStable(){let{router:o}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),i=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{et.current=!0}),reactExports.useCallback(function(ot,st){st===void 0&&(st={}),et.current&&(typeof ot=="number"?o.navigate(ot):o.navigate(ot,_extends$1({fromRouteId:i},st)))},[o,i])}const alreadyWarned={};function warningOnce(o,i,et){!i&&!alreadyWarned[o]&&(alreadyWarned[o]=!0)}function Outlet(o){return useOutlet(o.context)}function Route(o){invariant(!1)}function Router(o){let{basename:i="/",children:et=null,location:nt,navigationType:ot=Action.Pop,navigator:st,static:lt=!1,future:ht}=o;useInRouterContext()&&invariant(!1);let ft=i.replace(/^\/*/,"/"),St=reactExports.useMemo(()=>({basename:ft,navigator:st,static:lt,future:_extends$1({v7_relativeSplatPath:!1},ht)}),[ft,ht,st,lt]);typeof nt=="string"&&(nt=parsePath(nt));let{pathname:vt="/",search:Rt="",hash:wt="",state:$t=null,key:Dt="default"}=nt,Pt=reactExports.useMemo(()=>{let Ut=stripBasename(vt,ft);return Ut==null?null:{location:{pathname:Ut,search:Rt,hash:wt,state:$t,key:Dt},navigationType:ot}},[ft,vt,Rt,wt,$t,Dt,ot]);return Pt==null?null:reactExports.createElement(NavigationContext.Provider,{value:St},reactExports.createElement(LocationContext.Provider,{children:et,value:Pt}))}function Routes(o){let{children:i,location:et}=o;return useRoutes(createRoutesFromChildren(i),et)}new Promise(()=>{});function createRoutesFromChildren(o,i){i===void 0&&(i=[]);let et=[];return reactExports.Children.forEach(o,(nt,ot)=>{if(!reactExports.isValidElement(nt))return;let st=[...i,ot];if(nt.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(nt.props.children,st));return}nt.type!==Route&&invariant(!1),!nt.props.index||!nt.props.children||invariant(!1);let lt={id:nt.props.id||st.join("-"),caseSensitive:nt.props.caseSensitive,element:nt.props.element,Component:nt.props.Component,index:nt.props.index,path:nt.props.path,loader:nt.props.loader,action:nt.props.action,errorElement:nt.props.errorElement,ErrorBoundary:nt.props.ErrorBoundary,hasErrorBoundary:nt.props.ErrorBoundary!=null||nt.props.errorElement!=null,shouldRevalidate:nt.props.shouldRevalidate,handle:nt.props.handle,lazy:nt.props.lazy};nt.props.children&&(lt.children=createRoutesFromChildren(nt.props.children,st)),et.push(lt)}),et}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var et=arguments[i];for(var nt in et)Object.prototype.hasOwnProperty.call(et,nt)&&(o[nt]=et[nt])}return o},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(o,i){if(o==null)return{};var et={},nt=Object.keys(o),ot,st;for(st=0;st<nt.length;st++)ot=nt[st],!(i.indexOf(ot)>=0)&&(et[ot]=o[ot]);return et}function isModifiedEvent(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function shouldProcessLinkClick(o,i){return o.button===0&&(!i||i==="_self")&&!isModifiedEvent(o)}const _excluded$V=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(o){let{basename:i,children:et,future:nt,window:ot}=o,st=reactExports.useRef();st.current==null&&(st.current=createBrowserHistory({window:ot,v5Compat:!0}));let lt=st.current,[ht,ft]=reactExports.useState({action:lt.action,location:lt.location}),{v7_startTransition:St}=nt||{},vt=reactExports.useCallback(Rt=>{St&&startTransitionImpl?startTransitionImpl(()=>ft(Rt)):ft(Rt)},[ft,St]);return reactExports.useLayoutEffect(()=>lt.listen(vt),[lt,vt]),reactExports.createElement(Router,{basename:i,children:et,location:ht.location,navigationType:ht.action,navigator:lt,future:nt})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$2=reactExports.forwardRef(function(i,et){let{onClick:nt,relative:ot,reloadDocument:st,replace:lt,state:ht,target:ft,to:St,preventScrollReset:vt,unstable_viewTransition:Rt}=i,wt=_objectWithoutPropertiesLoose$1(i,_excluded$V),{basename:$t}=reactExports.useContext(NavigationContext),Dt,Pt=!1;if(typeof St=="string"&&ABSOLUTE_URL_REGEX.test(St)&&(Dt=St,isBrowser))try{let xt=new URL(window.location.href),jt=St.startsWith("//")?new URL(xt.protocol+St):new URL(St),Ht=stripBasename(jt.pathname,$t);jt.origin===xt.origin&&Ht!=null?St=Ht+jt.search+jt.hash:Pt=!0}catch{}let Ut=useHref(St,{relative:ot}),Ot=useLinkClickHandler(St,{replace:lt,state:ht,target:ft,preventScrollReset:vt,relative:ot,unstable_viewTransition:Rt});function Lt(xt){nt&&nt(xt),xt.defaultPrevented||Ot(xt)}return reactExports.createElement("a",_extends({},wt,{href:Dt||Ut,onClick:Pt||st?nt:Lt,ref:et,target:ft}))});var DataRouterHook;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(o,i){let{target:et,replace:nt,state:ot,preventScrollReset:st,relative:lt,unstable_viewTransition:ht}=i===void 0?{}:i,ft=useNavigate(),St=useLocation(),vt=useResolvedPath(o,{relative:lt});return reactExports.useCallback(Rt=>{if(shouldProcessLinkClick(Rt,et)){Rt.preventDefault();let wt=nt!==void 0?nt:createPath(St)===createPath(vt);ft(o,{replace:wt,state:ot,preventScrollReset:st,relative:lt,unstable_viewTransition:ht})}},[St,ft,vt,nt,ot,et,o,st,lt,ht])}/**
 * @license agora-rtc-react
 * @version 2.1.0
 *
 * Copyright (c) Agora, Inc.
 *
 * This source code is licensed under the MIT license.
 */var $U=Object.create,G_=Object.defineProperty,t2=Object.getOwnPropertyDescriptor,e2=Object.getOwnPropertyNames,i2=Object.getPrototypeOf,n2=Object.prototype.hasOwnProperty,r2=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),s2=(o,i)=>{for(var et in i)G_(o,et,{get:i[et],enumerable:!0})},j_=(o,i,et,nt)=>{if(i&&typeof i=="object"||typeof i=="function")for(let ot of e2(i))!n2.call(o,ot)&&ot!==et&&G_(o,ot,{get:()=>i[ot],enumerable:!(nt=t2(i,ot))||nt.enumerable});return o},_r=(o,i,et)=>(j_(o,i,"default"),et&&j_(et,i,"default")),no=(o,i,et)=>(et=o!=null?$U(i2(o)):{},j_(i||!o||!o.__esModule?G_(et,"default",{value:o,enumerable:!0}):et,o)),Ts=r2((o,i)=>{(function(et,nt){typeof o=="object"&&typeof i<"u"?i.exports=nt():typeof define=="function"&&define.amd?define(nt):(et=typeof globalThis<"u"?globalThis:et||self).AgoraRTC=nt()})(o,function(){function et(j,s){return s.forEach(function($){$&&typeof $!="string"&&!Array.isArray($)&&Object.keys($).forEach(function(_e){if(_e!=="default"&&!(_e in j)){var tt=Object.getOwnPropertyDescriptor($,_e);Object.defineProperty(j,_e,tt.get?tt:{enumerable:!0,get:function(){return $[_e]}})}})}),Object.freeze(j)}var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}var st=function(j){try{return!!j()}catch{return!0}},lt=!st(function(){var j=(function(){}).bind();return typeof j!="function"||j.hasOwnProperty("prototype")}),ht=lt,ft=Function.prototype,St=ft.call,vt=ht&&ft.bind.bind(St,St),Rt=ht?vt:function(j){return function(){return St.apply(j,arguments)}},wt=Rt({}.isPrototypeOf),$t=function(j){return j&&j.Math==Math&&j},Dt=$t(typeof globalThis=="object"&&globalThis)||$t(typeof window=="object"&&window)||$t(typeof self=="object"&&self)||$t(typeof nt=="object"&&nt)||function(){return this}()||nt||Function("return this")(),Pt=lt,Ut=Function.prototype,Ot=Ut.apply,Lt=Ut.call,xt=typeof Reflect=="object"&&Reflect.apply||(Pt?Lt.bind(Ot):function(){return Lt.apply(Ot,arguments)}),jt=Rt,Ht=jt({}.toString),qt=jt("".slice),Kt=function(j){return qt(Ht(j),8,-1)},nn=Kt,Zt=Rt,tn=function(j){if(nn(j)==="Function")return Zt(j)},dn=typeof document=="object"&&document.all,wn={all:dn,IS_HTMLDDA:dn===void 0&&dn!==void 0},In=wn.all,Sn=wn.IS_HTMLDDA?function(j){return typeof j=="function"||j===In}:function(j){return typeof j=="function"},Nn={},Rn=!st(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Ln=lt,gn=Function.prototype.call,_n=Ln?gn.bind(gn):function(){return gn.apply(gn,arguments)},bn={},tr={}.propertyIsEnumerable,Zn=Object.getOwnPropertyDescriptor,Pr=Zn&&!tr.call({1:2},1);bn.f=Pr?function(j){var s=Zn(this,j);return!!s&&s.enumerable}:tr;var Wn,pr,or=function(j,s){return{enumerable:!(1&j),configurable:!(2&j),writable:!(4&j),value:s}},Qr=st,Br=Kt,xr=Object,Fo=Rt("".split),ur=Qr(function(){return!xr("z").propertyIsEnumerable(0)})?function(j){return Br(j)=="String"?Fo(j,""):xr(j)}:xr,Hr=function(j){return j==null},fr=Hr,Ur=TypeError,Cr=function(j){if(fr(j))throw Ur("Can't call method on "+j);return j},Es=ur,as=Cr,co=function(j){return Es(as(j))},cs=Sn,So=wn.all,gr=wn.IS_HTMLDDA?function(j){return typeof j=="object"?j!==null:cs(j)||j===So}:function(j){return typeof j=="object"?j!==null:cs(j)},go={},No=go,Lr=Dt,Zo=Sn,Go=function(j){return Zo(j)?j:void 0},Zr=function(j,s){return arguments.length<2?Go(No[j])||Go(Lr[j]):No[j]&&No[j][s]||Lr[j]&&Lr[j][s]},Ar=typeof navigator<"u"&&String(navigator.userAgent)||"",er=Dt,jo=Ar,Fl=er.process,Ws=er.Deno,Qn=Fl&&Fl.versions||Ws&&Ws.version,Yr=Qn&&Qn.v8;Yr&&(pr=(Wn=Yr.split("."))[0]>0&&Wn[0]<4?1:+(Wn[0]+Wn[1])),!pr&&jo&&(!(Wn=jo.match(/Edge\/(\d+)/))||Wn[1]>=74)&&(Wn=jo.match(/Chrome\/(\d+)/))&&(pr=+Wn[1]);var eo=pr,_l=eo,Pp=st,T0=Dt.String,zu=!!Object.getOwnPropertySymbols&&!Pp(function(){var j=Symbol();return!T0(j)||!(Object(j)instanceof Symbol)||!Symbol.sham&&_l&&_l<41}),v0=zu&&!Symbol.sham&&typeof Symbol.iterator=="symbol",VE=Zr,C0=Sn,b0=wt,R0=Object,Ku=v0?function(j){return typeof j=="symbol"}:function(j){var s=VE("Symbol");return C0(s)&&b0(s.prototype,R0(j))},I0=String,Iu=function(j){try{return I0(j)}catch{return"Object"}},BE=Sn,GE=Iu,WE=TypeError,bs=function(j){if(BE(j))return j;throw WE(GE(j)+" is not a function")},HE=bs,Dp=Hr,xp=function(j,s){var $=j[s];return Dp($)?void 0:HE($)},$s=_n,Au=Sn,u1=gr,Lp=TypeError,um={exports:{}},p1=Dt,A0=Object.defineProperty,N0=function(j,s){try{A0(p1,j,{value:s,configurable:!0,writable:!0})}catch{p1[j]=s}return s},h1="__core-js_shared__",f1=Dt[h1]||N0(h1,{}),w0=f1;(um.exports=function(j,s){return w0[j]||(w0[j]=s!==void 0?s:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Yu=um.exports,zE=Cr,Dr=Object,Wo=function(j){return Dr(zE(j))},QO=Wo,ZO=Rt({}.hasOwnProperty),Is=Object.hasOwn||function(j,s){return ZO(QO(j),s)},eP=Rt,tP=0,nP=Math.random(),rP=eP(1 .toString),KE=function(j){return"Symbol("+(j===void 0?"":j)+")_"+rP(++tP+nP,36)},oP=Yu,Rv=Is,iP=KE,sP=zu,aP=v0,pm=Dt.Symbol,YE=oP("wks"),cP=aP?pm.for||pm:pm&&pm.withoutSetter||iP,Po=function(j){return Rv(YE,j)||(YE[j]=sP&&Rv(pm,j)?pm[j]:cP("Symbol."+j)),YE[j]},lP=_n,Iv=gr,Av=Ku,dP=xp,uP=function(j,s){var $,_e;if(s==="string"&&Au($=j.toString)&&!u1(_e=$s($,j))||Au($=j.valueOf)&&!u1(_e=$s($,j))||s!=="string"&&Au($=j.toString)&&!u1(_e=$s($,j)))return _e;throw Lp("Can't convert object to primitive value")},pP=TypeError,hP=Po("toPrimitive"),fP=function(j,s){if(!Iv(j)||Av(j))return j;var $,_e=dP(j,hP);if(_e){if(s===void 0&&(s="default"),$=lP(_e,j,s),!Iv($)||Av($))return $;throw pP("Can't convert object to primitive value")}return s===void 0&&(s="number"),uP(j,s)},gP=Ku,O0=function(j){var s=fP(j,"string");return gP(s)?s:s+""},Nv=gr,qE=Dt.document,mP=Nv(qE)&&Nv(qE.createElement),XE=function(j){return mP?qE.createElement(j):{}},_P=XE,wv=!Rn&&!st(function(){return Object.defineProperty(_P("div"),"a",{get:function(){return 7}}).a!=7}),EP=Rn,yP=_n,SP=bn,TP=or,vP=co,CP=O0,bP=Is,RP=wv,Ov=Object.getOwnPropertyDescriptor;Nn.f=EP?Ov:function(j,s){if(j=vP(j),s=CP(s),RP)try{return Ov(j,s)}catch{}if(bP(j,s))return TP(!yP(SP.f,j,s),j[s])};var IP=st,AP=Sn,NP=/#|\.prototype\./,g1=function(j,s){var $=OP[wP(j)];return $==DP||$!=PP&&(AP(s)?IP(s):!!s)},wP=g1.normalize=function(j){return String(j).replace(NP,".").toLowerCase()},OP=g1.data={},PP=g1.NATIVE="N",DP=g1.POLYFILL="P",Pv=g1,xP=bs,LP=lt,kP=tn(tn.bind),m1=function(j,s){return xP(j),s===void 0?j:LP?kP(j,s):function(){return j.apply(s,arguments)}},Vl={},Dv=Rn&&st(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),$P=gr,MP=String,UP=TypeError,_d=function(j){if($P(j))return j;throw UP(MP(j)+" is not an object")},FP=Rn,jP=wv,VP=Dv,P0=_d,xv=O0,BP=TypeError,JE=Object.defineProperty,GP=Object.getOwnPropertyDescriptor,QE="enumerable",ZE="configurable",ny="writable";Vl.f=FP?VP?function(j,s,$){if(P0(j),s=xv(s),P0($),typeof j=="function"&&s==="prototype"&&"value"in $&&ny in $&&!$[ny]){var _e=GP(j,s);_e&&_e[ny]&&(j[s]=$.value,$={configurable:ZE in $?$[ZE]:_e[ZE],enumerable:QE in $?$[QE]:_e[QE],writable:!1})}return JE(j,s,$)}:JE:function(j,s,$){if(P0(j),s=xv(s),P0($),jP)try{return JE(j,s,$)}catch{}if("get"in $||"set"in $)throw BP("Accessors not supported");return"value"in $&&(j[s]=$.value),j};var WP=Vl,HP=or,qu=Rn?function(j,s,$){return WP.f(j,s,HP(1,$))}:function(j,s,$){return j[s]=$,j},D0=Dt,zP=xt,KP=tn,YP=Sn,qP=Nn.f,XP=Pv,hm=go,JP=m1,fm=qu,Lv=Is,QP=function(j){var s=function($,_e,tt){if(this instanceof s){switch(arguments.length){case 0:return new j;case 1:return new j($);case 2:return new j($,_e)}return new j($,_e,tt)}return zP(j,this,arguments)};return s.prototype=j.prototype,s},qr=function(j,s){var $,_e,tt,rt,it,at,ct,dt,ut,pt=j.target,mt=j.global,yt=j.stat,At=j.proto,Ct=mt?D0:yt?D0[pt]:(D0[pt]||{}).prototype,It=mt?hm:hm[pt]||fm(hm,pt,{})[pt],kt=It.prototype;for(rt in s)_e=!($=XP(mt?rt:pt+(yt?".":"#")+rt,j.forced))&&Ct&&Lv(Ct,rt),at=It[rt],_e&&(ct=j.dontCallGetSet?(ut=qP(Ct,rt))&&ut.value:Ct[rt]),it=_e&&ct?ct:s[rt],_e&&typeof at==typeof it||(dt=j.bind&&_e?JP(it,D0):j.wrap&&_e?QP(it):At&&YP(it)?KP(it):it,(j.sham||it&&it.sham||at&&at.sham)&&fm(dt,"sham",!0),fm(It,rt,dt),At&&(Lv(hm,tt=pt+"Prototype")||fm(hm,tt,{}),fm(hm[tt],rt,it),j.real&&kt&&($||!kt[rt])&&fm(kt,rt,it)))},ZP=Math.ceil,e5=Math.floor,t5=Math.trunc||function(j){var s=+j;return(s>0?e5:ZP)(s)},cy=function(j){var s=+j;return s!=s||s===0?0:t5(s)},n5=cy,r5=Math.max,o5=Math.min,kv=function(j,s){var $=n5(j);return $<0?r5($+s,0):o5($,s)},i5=cy,s5=Math.min,a5=function(j){return j>0?s5(i5(j),9007199254740991):0},kp=function(j){return a5(j.length)},c5=co,l5=kv,d5=kp,$v=function(j){return function(s,$,_e){var tt,rt=c5(s),it=d5(rt),at=l5(_e,it);if(j&&$!=$){for(;it>at;)if((tt=rt[at++])!=tt)return!0}else for(;it>at;at++)if((j||at in rt)&&rt[at]===$)return j||at||0;return!j&&-1}},ly={includes:$v(!0),indexOf:$v(!1)},u5=ly.includes;qr({target:"Array",proto:!0,forced:st(function(){return!Array(1).includes()})},{includes:function(j){return u5(this,j,arguments.length>1?arguments[1]:void 0)}});var p5=go,Xu=function(j){return p5[j+"Prototype"]},h5=Xu("Array").includes,f5=gr,g5=Kt,m5=Po("match"),_5=function(j){var s;return f5(j)&&((s=j[m5])!==void 0?!!s:g5(j)=="RegExp")},E5=TypeError,Mv={};Mv[Po("toStringTag")]="z";var dy=String(Mv)==="[object z]",y5=dy,S5=Sn,x0=Kt,T5=Po("toStringTag"),v5=Object,C5=x0(function(){return arguments}())=="Arguments",$p=y5?x0:function(j){var s,$,_e;return j===void 0?"Undefined":j===null?"Null":typeof($=function(tt,rt){try{return tt[rt]}catch{}}(s=v5(j),T5))=="string"?$:C5?x0(s):(_e=x0(s))=="Object"&&S5(s.callee)?"Arguments":_e},b5=$p,R5=String,Nu=function(j){if(b5(j)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return R5(j)},I5=Po("match"),A5=qr,N5=function(j){if(_5(j))throw E5("The method doesn't accept regular expressions");return j},w5=Cr,Uv=Nu,O5=function(j){var s=/./;try{"/./"[j](s)}catch{try{return s[I5]=!1,"/./"[j](s)}catch{}}return!1},P5=Rt("".indexOf);A5({target:"String",proto:!0,forced:!O5("includes")},{includes:function(j){return!!~P5(Uv(w5(this)),Uv(N5(j)),arguments.length>1?arguments[1]:void 0)}});var D5=Xu("String").includes,Fv=wt,x5=h5,L5=D5,uy=Array.prototype,fy=String.prototype,vn=ot(function(j){var s=j.includes;return j===uy||Fv(uy,j)&&s===uy.includes?x5:typeof j=="string"||j===fy||Fv(fy,j)&&s===fy.includes?L5:s});let jv=!0,Vv=!0;function L0(j,s,$){let _e=j.match(s);return _e&&_e.length>=$&&parseInt(_e[$],10)}function Mp(j,s,$){if(!j.RTCPeerConnection)return;let _e=j.RTCPeerConnection.prototype,tt=_e.addEventListener;_e.addEventListener=function(it,at){if(it!==s)return tt.apply(this,arguments);let ct=dt=>{let ut=$(dt);ut&&(at.handleEvent?at.handleEvent(ut):at(ut))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set(at,ct),tt.apply(this,[it,ct])};let rt=_e.removeEventListener;_e.removeEventListener=function(it,at){if(it!==s||!this._eventMap||!this._eventMap[s])return rt.apply(this,arguments);if(!this._eventMap[s].has(at))return rt.apply(this,arguments);let ct=this._eventMap[s].get(at);return this._eventMap[s].delete(at),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,rt.apply(this,[it,ct])},Object.defineProperty(_e,"on"+s,{get(){return this["_on"+s]},set(it){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),it&&this.addEventListener(s,this["_on"+s]=it)},enumerable:!0,configurable:!0})}function k5(j){return typeof j!="boolean"?new Error("Argument type: "+typeof j+". Please use a boolean."):(jv=j,j?"adapter.js logging disabled":"adapter.js logging enabled")}function $5(j){return typeof j!="boolean"?new Error("Argument type: "+typeof j+". Please use a boolean."):(Vv=!j,"adapter.js deprecation warnings "+(j?"disabled":"enabled"))}function Bv(){if(typeof window=="object"){if(jv)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function gy(j,s){Vv&&console.warn(j+" is deprecated, please use "+s+" instead.")}function Gv(j){return Object.prototype.toString.call(j)==="[object Object]"}function Wv(j){return Gv(j)?Object.keys(j).reduce(function(s,$){let _e=Gv(j[$]),tt=_e?Wv(j[$]):j[$],rt=_e&&!Object.keys(tt).length;return tt===void 0||rt?s:Object.assign(s,{[$]:tt})},{}):j}function my(j,s,$){s&&!$.has(s.id)&&($.set(s.id,s),Object.keys(s).forEach(_e=>{_e.endsWith("Id")?my(j,j.get(s[_e]),$):_e.endsWith("Ids")&&s[_e].forEach(tt=>{my(j,j.get(tt),$)})}))}function Hv(j,s,$){let _e=$?"outbound-rtp":"inbound-rtp",tt=new Map;if(s===null)return tt;let rt=[];return j.forEach(it=>{it.type==="track"&&it.trackIdentifier===s.id&&rt.push(it)}),rt.forEach(it=>{j.forEach(at=>{at.type===_e&&at.trackId===it.id&&my(j,at,tt)})}),tt}let Kv=Bv;function Yv(j,s){let $=j&&j.navigator;if(!$.mediaDevices)return;let _e=function(it){if(typeof it!="object"||it.mandatory||it.optional)return it;let at={};return Object.keys(it).forEach(ct=>{if(ct==="require"||ct==="advanced"||ct==="mediaSource")return;let dt=typeof it[ct]=="object"?it[ct]:{ideal:it[ct]};dt.exact!==void 0&&typeof dt.exact=="number"&&(dt.min=dt.max=dt.exact);let ut=function(pt,mt){return pt?pt+mt.charAt(0).toUpperCase()+mt.slice(1):mt==="deviceId"?"sourceId":mt};if(dt.ideal!==void 0){at.optional=at.optional||[];let pt={};typeof dt.ideal=="number"?(pt[ut("min",ct)]=dt.ideal,at.optional.push(pt),pt={},pt[ut("max",ct)]=dt.ideal,at.optional.push(pt)):(pt[ut("",ct)]=dt.ideal,at.optional.push(pt))}dt.exact!==void 0&&typeof dt.exact!="number"?(at.mandatory=at.mandatory||{},at.mandatory[ut("",ct)]=dt.exact):["min","max"].forEach(pt=>{dt[pt]!==void 0&&(at.mandatory=at.mandatory||{},at.mandatory[ut(pt,ct)]=dt[pt])})}),it.advanced&&(at.optional=(at.optional||[]).concat(it.advanced)),at},tt=function(it,at){if(s.version>=61)return at(it);if((it=JSON.parse(JSON.stringify(it)))&&typeof it.audio=="object"){let ct=function(dt,ut,pt){ut in dt&&!(pt in dt)&&(dt[pt]=dt[ut],delete dt[ut])};ct((it=JSON.parse(JSON.stringify(it))).audio,"autoGainControl","googAutoGainControl"),ct(it.audio,"noiseSuppression","googNoiseSuppression"),it.audio=_e(it.audio)}if(it&&typeof it.video=="object"){let ct=it.video.facingMode;ct=ct&&(typeof ct=="object"?ct:{ideal:ct});let dt=s.version<66;if(ct&&(ct.exact==="user"||ct.exact==="environment"||ct.ideal==="user"||ct.ideal==="environment")&&(!$.mediaDevices.getSupportedConstraints||!$.mediaDevices.getSupportedConstraints().facingMode||dt)){let ut;if(delete it.video.facingMode,ct.exact==="environment"||ct.ideal==="environment"?ut=["back","rear"]:ct.exact!=="user"&&ct.ideal!=="user"||(ut=["front"]),ut)return $.mediaDevices.enumerateDevices().then(pt=>{let mt=(pt=pt.filter(yt=>yt.kind==="videoinput")).find(yt=>ut.some(At=>yt.label.toLowerCase().includes(At)));return!mt&&pt.length&&ut.includes("back")&&(mt=pt[pt.length-1]),mt&&(it.video.deviceId=ct.exact?{exact:mt.deviceId}:{ideal:mt.deviceId}),it.video=_e(it.video),Kv("chrome: "+JSON.stringify(it)),at(it)})}it.video=_e(it.video)}return Kv("chrome: "+JSON.stringify(it)),at(it)},rt=function(it){return s.version>=64?it:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[it.name]||it.name,message:it.message,constraint:it.constraint||it.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if($.getUserMedia=(function(it,at,ct){tt(it,dt=>{$.webkitGetUserMedia(dt,at,ut=>{ct&&ct(rt(ut))})})}).bind($),$.mediaDevices.getUserMedia){let it=$.mediaDevices.getUserMedia.bind($.mediaDevices);$.mediaDevices.getUserMedia=function(at){return tt(at,ct=>it(ct).then(dt=>{if(ct.audio&&!dt.getAudioTracks().length||ct.video&&!dt.getVideoTracks().length)throw dt.getTracks().forEach(ut=>{ut.stop()}),new DOMException("","NotFoundError");return dt},dt=>Promise.reject(rt(dt))))}}}function qv(j){j.MediaStream=j.MediaStream||j.webkitMediaStream}function Xv(j){if(typeof j=="object"&&j.RTCPeerConnection&&!("ontrack"in j.RTCPeerConnection.prototype)){Object.defineProperty(j.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set($){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=$)},enumerable:!0,configurable:!0});let s=j.RTCPeerConnection.prototype.setRemoteDescription;j.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=$=>{$.stream.addEventListener("addtrack",_e=>{let tt;tt=j.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(it=>it.track&&it.track.id===_e.track.id):{track:_e.track};let rt=new Event("track");rt.track=_e.track,rt.receiver=tt,rt.transceiver={receiver:tt},rt.streams=[$.stream],this.dispatchEvent(rt)}),$.stream.getTracks().forEach(_e=>{let tt;tt=j.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(it=>it.track&&it.track.id===_e.id):{track:_e};let rt=new Event("track");rt.track=_e,rt.receiver=tt,rt.transceiver={receiver:tt},rt.streams=[$.stream],this.dispatchEvent(rt)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else Mp(j,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function Jv(j){if(typeof j=="object"&&j.RTCPeerConnection&&!("getSenders"in j.RTCPeerConnection.prototype)&&"createDTMFSender"in j.RTCPeerConnection.prototype){let s=function(tt,rt){return{track:rt,get dtmf(){return this._dtmf===void 0&&(rt.kind==="audio"?this._dtmf=tt.createDTMFSender(rt):this._dtmf=null),this._dtmf},_pc:tt}};if(!j.RTCPeerConnection.prototype.getSenders){j.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let tt=j.RTCPeerConnection.prototype.addTrack;j.RTCPeerConnection.prototype.addTrack=function(it,at){let ct=tt.apply(this,arguments);return ct||(ct=s(this,it),this._senders.push(ct)),ct};let rt=j.RTCPeerConnection.prototype.removeTrack;j.RTCPeerConnection.prototype.removeTrack=function(it){rt.apply(this,arguments);let at=this._senders.indexOf(it);at!==-1&&this._senders.splice(at,1)}}let $=j.RTCPeerConnection.prototype.addStream;j.RTCPeerConnection.prototype.addStream=function(tt){this._senders=this._senders||[],$.apply(this,[tt]),tt.getTracks().forEach(rt=>{this._senders.push(s(this,rt))})};let _e=j.RTCPeerConnection.prototype.removeStream;j.RTCPeerConnection.prototype.removeStream=function(tt){this._senders=this._senders||[],_e.apply(this,[tt]),tt.getTracks().forEach(rt=>{let it=this._senders.find(at=>at.track===rt);it&&this._senders.splice(this._senders.indexOf(it),1)})}}else if(typeof j=="object"&&j.RTCPeerConnection&&"getSenders"in j.RTCPeerConnection.prototype&&"createDTMFSender"in j.RTCPeerConnection.prototype&&j.RTCRtpSender&&!("dtmf"in j.RTCRtpSender.prototype)){let s=j.RTCPeerConnection.prototype.getSenders;j.RTCPeerConnection.prototype.getSenders=function(){let $=s.apply(this,[]);return $.forEach(_e=>_e._pc=this),$},Object.defineProperty(j.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Zv(j){if(!j.RTCPeerConnection)return;let s=j.RTCPeerConnection.prototype.getStats;j.RTCPeerConnection.prototype.getStats=function(){let[$,_e,tt]=arguments;if(arguments.length>0&&typeof $=="function")return s.apply(this,arguments);if(s.length===0&&(arguments.length===0||typeof $!="function"))return s.apply(this,[]);let rt=function(at){let ct={};return at.result().forEach(dt=>{let ut={id:dt.id,timestamp:dt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[dt.type]||dt.type};dt.names().forEach(pt=>{ut[pt]=dt.stat(pt)}),ct[ut.id]=ut}),ct},it=function(at){return new Map(Object.keys(at).map(ct=>[ct,at[ct]]))};if(arguments.length>=2){let at=function(ct){_e(it(rt(ct)))};return s.apply(this,[at,$])}return new Promise((at,ct)=>{s.apply(this,[function(dt){at(it(rt(dt)))},ct])}).then(_e,tt)}}function eC(j){if(!(typeof j=="object"&&j.RTCPeerConnection&&j.RTCRtpSender&&j.RTCRtpReceiver))return;if(!("getStats"in j.RTCRtpSender.prototype)){let $=j.RTCPeerConnection.prototype.getSenders;$&&(j.RTCPeerConnection.prototype.getSenders=function(){let tt=$.apply(this,[]);return tt.forEach(rt=>rt._pc=this),tt});let _e=j.RTCPeerConnection.prototype.addTrack;_e&&(j.RTCPeerConnection.prototype.addTrack=function(){let tt=_e.apply(this,arguments);return tt._pc=this,tt}),j.RTCRtpSender.prototype.getStats=function(){let tt=this;return this._pc.getStats().then(rt=>Hv(rt,tt.track,!0))}}if(!("getStats"in j.RTCRtpReceiver.prototype)){let $=j.RTCPeerConnection.prototype.getReceivers;$&&(j.RTCPeerConnection.prototype.getReceivers=function(){let _e=$.apply(this,[]);return _e.forEach(tt=>tt._pc=this),_e}),Mp(j,"track",_e=>(_e.receiver._pc=_e.srcElement,_e)),j.RTCRtpReceiver.prototype.getStats=function(){let _e=this;return this._pc.getStats().then(tt=>Hv(tt,_e.track,!1))}}if(!("getStats"in j.RTCRtpSender.prototype)||!("getStats"in j.RTCRtpReceiver.prototype))return;let s=j.RTCPeerConnection.prototype.getStats;j.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof j.MediaStreamTrack){let $=arguments[0],_e,tt,rt;return this.getSenders().forEach(it=>{it.track===$&&(_e?rt=!0:_e=it)}),this.getReceivers().forEach(it=>(it.track===$&&(tt?rt=!0:tt=it),it.track===$)),rt||_e&&tt?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):_e?_e.getStats():tt?tt.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function tC(j){j.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(rt=>this._shimmedLocalStreams[rt][0])};let s=j.RTCPeerConnection.prototype.addTrack;j.RTCPeerConnection.prototype.addTrack=function(rt,it){if(!it)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let at=s.apply(this,arguments);return this._shimmedLocalStreams[it.id]?this._shimmedLocalStreams[it.id].indexOf(at)===-1&&this._shimmedLocalStreams[it.id].push(at):this._shimmedLocalStreams[it.id]=[it,at],at};let $=j.RTCPeerConnection.prototype.addStream;j.RTCPeerConnection.prototype.addStream=function(rt){this._shimmedLocalStreams=this._shimmedLocalStreams||{},rt.getTracks().forEach(ct=>{if(this.getSenders().find(dt=>dt.track===ct))throw new DOMException("Track already exists.","InvalidAccessError")});let it=this.getSenders();$.apply(this,arguments);let at=this.getSenders().filter(ct=>it.indexOf(ct)===-1);this._shimmedLocalStreams[rt.id]=[rt].concat(at)};let _e=j.RTCPeerConnection.prototype.removeStream;j.RTCPeerConnection.prototype.removeStream=function(rt){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[rt.id],_e.apply(this,arguments)};let tt=j.RTCPeerConnection.prototype.removeTrack;j.RTCPeerConnection.prototype.removeTrack=function(rt){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},rt&&Object.keys(this._shimmedLocalStreams).forEach(it=>{let at=this._shimmedLocalStreams[it].indexOf(rt);at!==-1&&this._shimmedLocalStreams[it].splice(at,1),this._shimmedLocalStreams[it].length===1&&delete this._shimmedLocalStreams[it]}),tt.apply(this,arguments)}}function nC(j,s){if(!j.RTCPeerConnection)return;if(j.RTCPeerConnection.prototype.addTrack&&s.version>=65)return tC(j);let $=j.RTCPeerConnection.prototype.getLocalStreams;j.RTCPeerConnection.prototype.getLocalStreams=function(){let ct=$.apply(this);return this._reverseStreams=this._reverseStreams||{},ct.map(dt=>this._reverseStreams[dt.id])};let _e=j.RTCPeerConnection.prototype.addStream;j.RTCPeerConnection.prototype.addStream=function(ct){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ct.getTracks().forEach(dt=>{if(this.getSenders().find(ut=>ut.track===dt))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[ct.id]){let dt=new j.MediaStream(ct.getTracks());this._streams[ct.id]=dt,this._reverseStreams[dt.id]=ct,ct=dt}_e.apply(this,[ct])};let tt=j.RTCPeerConnection.prototype.removeStream;function rt(ct,dt){let ut=dt.sdp;return Object.keys(ct._reverseStreams||[]).forEach(pt=>{let mt=ct._reverseStreams[pt],yt=ct._streams[mt.id];ut=ut.replace(new RegExp(yt.id,"g"),mt.id)}),new RTCSessionDescription({type:dt.type,sdp:ut})}j.RTCPeerConnection.prototype.removeStream=function(ct){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},tt.apply(this,[this._streams[ct.id]||ct]),delete this._reverseStreams[this._streams[ct.id]?this._streams[ct.id].id:ct.id],delete this._streams[ct.id]},j.RTCPeerConnection.prototype.addTrack=function(ct,dt){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let ut=[].slice.call(arguments,1);if(ut.length!==1||!ut[0].getTracks().find(mt=>mt===ct))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(mt=>mt.track===ct))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let pt=this._streams[dt.id];if(pt)pt.addTrack(ct),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let mt=new j.MediaStream([ct]);this._streams[dt.id]=mt,this._reverseStreams[mt.id]=dt,this.addStream(mt)}return this.getSenders().find(mt=>mt.track===ct)},["createOffer","createAnswer"].forEach(function(ct){let dt=j.RTCPeerConnection.prototype[ct],ut={[ct](){let pt=arguments;return arguments.length&&typeof arguments[0]=="function"?dt.apply(this,[mt=>{let yt=rt(this,mt);pt[0].apply(null,[yt])},mt=>{pt[1]&&pt[1].apply(null,mt)},arguments[2]]):dt.apply(this,arguments).then(mt=>rt(this,mt))}};j.RTCPeerConnection.prototype[ct]=ut[ct]});let it=j.RTCPeerConnection.prototype.setLocalDescription;j.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(ct,dt){let ut=dt.sdp;return Object.keys(ct._reverseStreams||[]).forEach(pt=>{let mt=ct._reverseStreams[pt],yt=ct._streams[mt.id];ut=ut.replace(new RegExp(mt.id,"g"),yt.id)}),new RTCSessionDescription({type:dt.type,sdp:ut})}(this,arguments[0]),it.apply(this,arguments)):it.apply(this,arguments)};let at=Object.getOwnPropertyDescriptor(j.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(j.RTCPeerConnection.prototype,"localDescription",{get(){let ct=at.get.apply(this);return ct.type===""?ct:rt(this,ct)}}),j.RTCPeerConnection.prototype.removeTrack=function(ct){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!ct._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(ct._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let dt;this._streams=this._streams||{},Object.keys(this._streams).forEach(ut=>{this._streams[ut].getTracks().find(pt=>ct.track===pt)&&(dt=this._streams[ut])}),dt&&(dt.getTracks().length===1?this.removeStream(this._reverseStreams[dt.id]):dt.removeTrack(ct.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _y(j,s){!j.RTCPeerConnection&&j.webkitRTCPeerConnection&&(j.RTCPeerConnection=j.webkitRTCPeerConnection),j.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function($){let _e=j.RTCPeerConnection.prototype[$],tt={[$](){return arguments[0]=new($==="addIceCandidate"?j.RTCIceCandidate:j.RTCSessionDescription)(arguments[0]),_e.apply(this,arguments)}};j.RTCPeerConnection.prototype[$]=tt[$]})}function rC(j,s){Mp(j,"negotiationneeded",$=>{let _e=$.target;if(!(s.version<72||_e.getConfiguration&&_e.getConfiguration().sdpSemantics==="plan-b")||_e.signalingState==="stable")return $})}var oC=Object.freeze({__proto__:null,fixNegotiationNeeded:rC,shimAddTrackRemoveTrack:nC,shimAddTrackRemoveTrackWithNative:tC,shimGetDisplayMedia:function(j,s){j.navigator.mediaDevices&&"getDisplayMedia"in j.navigator.mediaDevices||j.navigator.mediaDevices&&(typeof s=="function"?j.navigator.mediaDevices.getDisplayMedia=function($){return s($).then(_e=>{let tt=$.video&&$.video.width,rt=$.video&&$.video.height,it=$.video&&$.video.frameRate;return $.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:_e,maxFrameRate:it||3}},tt&&($.video.mandatory.maxWidth=tt),rt&&($.video.mandatory.maxHeight=rt),j.navigator.mediaDevices.getUserMedia($)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:Jv,shimGetStats:Zv,shimGetUserMedia:Yv,shimMediaStream:qv,shimOnTrack:Xv,shimPeerConnection:_y,shimSenderReceiverGetStats:eC});function iC(j,s){let $=j&&j.navigator,_e=j&&j.MediaStreamTrack;if($.getUserMedia=function(tt,rt,it){gy("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),$.mediaDevices.getUserMedia(tt).then(rt,it)},!(s.version>55&&"autoGainControl"in $.mediaDevices.getSupportedConstraints())){let tt=function(it,at,ct){at in it&&!(ct in it)&&(it[ct]=it[at],delete it[at])},rt=$.mediaDevices.getUserMedia.bind($.mediaDevices);if($.mediaDevices.getUserMedia=function(it){return typeof it=="object"&&typeof it.audio=="object"&&(it=JSON.parse(JSON.stringify(it)),tt(it.audio,"autoGainControl","mozAutoGainControl"),tt(it.audio,"noiseSuppression","mozNoiseSuppression")),rt(it)},_e&&_e.prototype.getSettings){let it=_e.prototype.getSettings;_e.prototype.getSettings=function(){let at=it.apply(this,arguments);return tt(at,"mozAutoGainControl","autoGainControl"),tt(at,"mozNoiseSuppression","noiseSuppression"),at}}if(_e&&_e.prototype.applyConstraints){let it=_e.prototype.applyConstraints;_e.prototype.applyConstraints=function(at){return this.kind==="audio"&&typeof at=="object"&&(at=JSON.parse(JSON.stringify(at)),tt(at,"autoGainControl","mozAutoGainControl"),tt(at,"noiseSuppression","mozNoiseSuppression")),it.apply(this,[at])}}}}function sC(j){typeof j=="object"&&j.RTCTrackEvent&&"receiver"in j.RTCTrackEvent.prototype&&!("transceiver"in j.RTCTrackEvent.prototype)&&Object.defineProperty(j.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ey(j,s){if(typeof j!="object"||!j.RTCPeerConnection&&!j.mozRTCPeerConnection)return;!j.RTCPeerConnection&&j.mozRTCPeerConnection&&(j.RTCPeerConnection=j.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(tt){let rt=j.RTCPeerConnection.prototype[tt],it={[tt](){return arguments[0]=new(tt==="addIceCandidate"?j.RTCIceCandidate:j.RTCSessionDescription)(arguments[0]),rt.apply(this,arguments)}};j.RTCPeerConnection.prototype[tt]=it[tt]});let $={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},_e=j.RTCPeerConnection.prototype.getStats;j.RTCPeerConnection.prototype.getStats=function(){let[tt,rt,it]=arguments;return _e.apply(this,[tt||null]).then(at=>{if(s.version<53&&!rt)try{at.forEach(ct=>{ct.type=$[ct.type]||ct.type})}catch(ct){if(ct.name!=="TypeError")throw ct;at.forEach((dt,ut)=>{at.set(ut,Object.assign({},dt,{type:$[dt.type]||dt.type}))})}return at}).then(rt,it)}}function aC(j){if(typeof j!="object"||!j.RTCPeerConnection||!j.RTCRtpSender||j.RTCRtpSender&&"getStats"in j.RTCRtpSender.prototype)return;let s=j.RTCPeerConnection.prototype.getSenders;s&&(j.RTCPeerConnection.prototype.getSenders=function(){let _e=s.apply(this,[]);return _e.forEach(tt=>tt._pc=this),_e});let $=j.RTCPeerConnection.prototype.addTrack;$&&(j.RTCPeerConnection.prototype.addTrack=function(){let _e=$.apply(this,arguments);return _e._pc=this,_e}),j.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function cC(j){if(typeof j!="object"||!j.RTCPeerConnection||!j.RTCRtpSender||j.RTCRtpSender&&"getStats"in j.RTCRtpReceiver.prototype)return;let s=j.RTCPeerConnection.prototype.getReceivers;s&&(j.RTCPeerConnection.prototype.getReceivers=function(){let $=s.apply(this,[]);return $.forEach(_e=>_e._pc=this),$}),Mp(j,"track",$=>($.receiver._pc=$.srcElement,$)),j.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function lC(j){j.RTCPeerConnection&&!("removeStream"in j.RTCPeerConnection.prototype)&&(j.RTCPeerConnection.prototype.removeStream=function(s){gy("removeStream","removeTrack"),this.getSenders().forEach($=>{$.track&&s.getTracks().includes($.track)&&this.removeTrack($)})})}function dC(j){j.DataChannel&&!j.RTCDataChannel&&(j.RTCDataChannel=j.DataChannel)}function uC(j){if(typeof j!="object"||!j.RTCPeerConnection)return;let s=j.RTCPeerConnection.prototype.addTransceiver;s&&(j.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let $=arguments[1]&&arguments[1].sendEncodings;$===void 0&&($=[]),$=[...$];let _e=$.length>0;_e&&$.forEach(rt=>{if("rid"in rt&&!/^[a-z0-9]{0,16}$/i.test(rt.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in rt&&!(parseFloat(rt.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in rt&&!(parseFloat(rt.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});let tt=s.apply(this,arguments);if(_e){let{sender:rt}=tt,it=rt.getParameters();(!("encodings"in it)||it.encodings.length===1&&Object.keys(it.encodings[0]).length===0)&&(it.encodings=$,rt.sendEncodings=$,this.setParametersPromises.push(rt.setParameters(it).then(()=>{delete rt.sendEncodings}).catch(()=>{delete rt.sendEncodings})))}return tt})}function pC(j){if(typeof j!="object"||!j.RTCRtpSender)return;let s=j.RTCRtpSender.prototype.getParameters;s&&(j.RTCRtpSender.prototype.getParameters=function(){let $=s.apply(this,arguments);return"encodings"in $||($.encodings=[].concat(this.sendEncodings||[{}])),$})}function hC(j){if(typeof j!="object"||!j.RTCPeerConnection)return;let s=j.RTCPeerConnection.prototype.createOffer;j.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function fC(j){if(typeof j!="object"||!j.RTCPeerConnection)return;let s=j.RTCPeerConnection.prototype.createAnswer;j.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}var gC=Object.freeze({__proto__:null,shimAddTransceiver:uC,shimCreateAnswer:fC,shimCreateOffer:hC,shimGetDisplayMedia:function(j,s){j.navigator.mediaDevices&&"getDisplayMedia"in j.navigator.mediaDevices||j.navigator.mediaDevices&&(j.navigator.mediaDevices.getDisplayMedia=function($){if(!$||!$.video){let _e=new DOMException("getDisplayMedia without video constraints is undefined");return _e.name="NotFoundError",_e.code=8,Promise.reject(_e)}return $.video===!0?$.video={mediaSource:s}:$.video.mediaSource=s,j.navigator.mediaDevices.getUserMedia($)})},shimGetParameters:pC,shimGetUserMedia:iC,shimOnTrack:sC,shimPeerConnection:Ey,shimRTCDataChannel:dC,shimReceiverGetStats:cC,shimRemoveStream:lC,shimSenderGetStats:aC});function mC(j){if(typeof j=="object"&&j.RTCPeerConnection){if("getLocalStreams"in j.RTCPeerConnection.prototype||(j.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in j.RTCPeerConnection.prototype)){let s=j.RTCPeerConnection.prototype.addTrack;j.RTCPeerConnection.prototype.addStream=function($){this._localStreams||(this._localStreams=[]),this._localStreams.includes($)||this._localStreams.push($),$.getAudioTracks().forEach(_e=>s.call(this,_e,$)),$.getVideoTracks().forEach(_e=>s.call(this,_e,$))},j.RTCPeerConnection.prototype.addTrack=function($,..._e){return _e&&_e.forEach(tt=>{this._localStreams?this._localStreams.includes(tt)||this._localStreams.push(tt):this._localStreams=[tt]}),s.apply(this,arguments)}}"removeStream"in j.RTCPeerConnection.prototype||(j.RTCPeerConnection.prototype.removeStream=function(s){this._localStreams||(this._localStreams=[]);let $=this._localStreams.indexOf(s);if($===-1)return;this._localStreams.splice($,1);let _e=s.getTracks();this.getSenders().forEach(tt=>{_e.includes(tt.track)&&this.removeTrack(tt)})})}}function _C(j){if(typeof j=="object"&&j.RTCPeerConnection&&("getRemoteStreams"in j.RTCPeerConnection.prototype||(j.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in j.RTCPeerConnection.prototype))){Object.defineProperty(j.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set($){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=$),this.addEventListener("track",this._onaddstreampoly=_e=>{_e.streams.forEach(tt=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(tt))return;this._remoteStreams.push(tt);let rt=new Event("addstream");rt.stream=tt,this.dispatchEvent(rt)})})}});let s=j.RTCPeerConnection.prototype.setRemoteDescription;j.RTCPeerConnection.prototype.setRemoteDescription=function(){let $=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(_e){_e.streams.forEach(tt=>{if($._remoteStreams||($._remoteStreams=[]),$._remoteStreams.indexOf(tt)>=0)return;$._remoteStreams.push(tt);let rt=new Event("addstream");rt.stream=tt,$.dispatchEvent(rt)})}),s.apply($,arguments)}}}function EC(j){if(typeof j!="object"||!j.RTCPeerConnection)return;let s=j.RTCPeerConnection.prototype,$=s.createOffer,_e=s.createAnswer,tt=s.setLocalDescription,rt=s.setRemoteDescription,it=s.addIceCandidate;s.createOffer=function(ct,dt){let ut=arguments.length>=2?arguments[2]:arguments[0],pt=$.apply(this,[ut]);return dt?(pt.then(ct,dt),Promise.resolve()):pt},s.createAnswer=function(ct,dt){let ut=arguments.length>=2?arguments[2]:arguments[0],pt=_e.apply(this,[ut]);return dt?(pt.then(ct,dt),Promise.resolve()):pt};let at=function(ct,dt,ut){let pt=tt.apply(this,[ct]);return ut?(pt.then(dt,ut),Promise.resolve()):pt};s.setLocalDescription=at,at=function(ct,dt,ut){let pt=rt.apply(this,[ct]);return ut?(pt.then(dt,ut),Promise.resolve()):pt},s.setRemoteDescription=at,at=function(ct,dt,ut){let pt=it.apply(this,[ct]);return ut?(pt.then(dt,ut),Promise.resolve()):pt},s.addIceCandidate=at}function yC(j){let s=j&&j.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){let $=s.mediaDevices,_e=$.getUserMedia.bind($);s.mediaDevices.getUserMedia=tt=>_e(SC(tt))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=(function($,_e,tt){s.mediaDevices.getUserMedia($).then(_e,tt)}).bind(s))}function SC(j){return j&&j.video!==void 0?Object.assign({},j,{video:Wv(j.video)}):j}function TC(j){if(!j.RTCPeerConnection)return;let s=j.RTCPeerConnection;j.RTCPeerConnection=function($,_e){if($&&$.iceServers){let tt=[];for(let rt=0;rt<$.iceServers.length;rt++){let it=$.iceServers[rt];!it.hasOwnProperty("urls")&&it.hasOwnProperty("url")?(gy("RTCIceServer.url","RTCIceServer.urls"),it=JSON.parse(JSON.stringify(it)),it.urls=it.url,delete it.url,tt.push(it)):tt.push($.iceServers[rt])}$.iceServers=tt}return new s($,_e)},j.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(j.RTCPeerConnection,"generateCertificate",{get:()=>s.generateCertificate})}function vC(j){typeof j=="object"&&j.RTCTrackEvent&&"receiver"in j.RTCTrackEvent.prototype&&!("transceiver"in j.RTCTrackEvent.prototype)&&Object.defineProperty(j.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function CC(j){let s=j.RTCPeerConnection.prototype.createOffer;j.RTCPeerConnection.prototype.createOffer=function($){if($){$.offerToReceiveAudio!==void 0&&($.offerToReceiveAudio=!!$.offerToReceiveAudio);let _e=this.getTransceivers().find(rt=>rt.receiver.track.kind==="audio");$.offerToReceiveAudio===!1&&_e?_e.direction==="sendrecv"?_e.setDirection?_e.setDirection("sendonly"):_e.direction="sendonly":_e.direction==="recvonly"&&(_e.setDirection?_e.setDirection("inactive"):_e.direction="inactive"):$.offerToReceiveAudio!==!0||_e||this.addTransceiver("audio",{direction:"recvonly"}),$.offerToReceiveVideo!==void 0&&($.offerToReceiveVideo=!!$.offerToReceiveVideo);let tt=this.getTransceivers().find(rt=>rt.receiver.track.kind==="video");$.offerToReceiveVideo===!1&&tt?tt.direction==="sendrecv"?tt.setDirection?tt.setDirection("sendonly"):tt.direction="sendonly":tt.direction==="recvonly"&&(tt.setDirection?tt.setDirection("inactive"):tt.direction="inactive"):$.offerToReceiveVideo!==!0||tt||this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function bC(j){typeof j!="object"||j.AudioContext||(j.AudioContext=j.webkitAudioContext)}var RC=Object.freeze({__proto__:null,shimAudioContext:bC,shimCallbacksAPI:EC,shimConstraints:SC,shimCreateOfferLegacy:CC,shimGetUserMedia:yC,shimLocalStreamsAPI:mC,shimRTCIceServerUrls:TC,shimRemoteStreamsAPI:_C,shimTrackEventTransceiver:vC}),IC={exports:{}};(function(j){let s={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};s.localCName=s.generateIdentifier(),s.splitLines=function($){return $.trim().split(`
`).map(_e=>_e.trim())},s.splitSections=function($){return $.split(`
m=`).map((_e,tt)=>(tt>0?"m="+_e:_e).trim()+`\r
`)},s.getDescription=function($){let _e=s.splitSections($);return _e&&_e[0]},s.getMediaSections=function($){let _e=s.splitSections($);return _e.shift(),_e},s.matchPrefix=function($,_e){return s.splitLines($).filter(tt=>tt.indexOf(_e)===0)},s.parseCandidate=function($){let _e;_e=$.indexOf("a=candidate:")===0?$.substring(12).split(" "):$.substring(10).split(" ");let tt={foundation:_e[0],component:{1:"rtp",2:"rtcp"}[_e[1]]||_e[1],protocol:_e[2].toLowerCase(),priority:parseInt(_e[3],10),ip:_e[4],address:_e[4],port:parseInt(_e[5],10),type:_e[7]};for(let rt=8;rt<_e.length;rt+=2)switch(_e[rt]){case"raddr":tt.relatedAddress=_e[rt+1];break;case"rport":tt.relatedPort=parseInt(_e[rt+1],10);break;case"tcptype":tt.tcpType=_e[rt+1];break;case"ufrag":tt.ufrag=_e[rt+1],tt.usernameFragment=_e[rt+1];break;default:tt[_e[rt]]===void 0&&(tt[_e[rt]]=_e[rt+1])}return tt},s.writeCandidate=function($){let _e=[];_e.push($.foundation);let tt=$.component;tt==="rtp"?_e.push(1):tt==="rtcp"?_e.push(2):_e.push(tt),_e.push($.protocol.toUpperCase()),_e.push($.priority),_e.push($.address||$.ip),_e.push($.port);let rt=$.type;return _e.push("typ"),_e.push(rt),rt!=="host"&&$.relatedAddress&&$.relatedPort&&(_e.push("raddr"),_e.push($.relatedAddress),_e.push("rport"),_e.push($.relatedPort)),$.tcpType&&$.protocol.toLowerCase()==="tcp"&&(_e.push("tcptype"),_e.push($.tcpType)),($.usernameFragment||$.ufrag)&&(_e.push("ufrag"),_e.push($.usernameFragment||$.ufrag)),"candidate:"+_e.join(" ")},s.parseIceOptions=function($){return $.substring(14).split(" ")},s.parseRtpMap=function($){let _e=$.substring(9).split(" "),tt={payloadType:parseInt(_e.shift(),10)};return _e=_e[0].split("/"),tt.name=_e[0],tt.clockRate=parseInt(_e[1],10),tt.channels=_e.length===3?parseInt(_e[2],10):1,tt.numChannels=tt.channels,tt},s.writeRtpMap=function($){let _e=$.payloadType;$.preferredPayloadType!==void 0&&(_e=$.preferredPayloadType);let tt=$.channels||$.numChannels||1;return"a=rtpmap:"+_e+" "+$.name+"/"+$.clockRate+(tt!==1?"/"+tt:"")+`\r
`},s.parseExtmap=function($){let _e=$.substring(9).split(" ");return{id:parseInt(_e[0],10),direction:_e[0].indexOf("/")>0?_e[0].split("/")[1]:"sendrecv",uri:_e[1],attributes:_e.slice(2).join(" ")}},s.writeExtmap=function($){return"a=extmap:"+($.id||$.preferredId)+($.direction&&$.direction!=="sendrecv"?"/"+$.direction:"")+" "+$.uri+($.attributes?" "+$.attributes:"")+`\r
`},s.parseFmtp=function($){let _e={},tt,rt=$.substring($.indexOf(" ")+1).split(";");for(let it=0;it<rt.length;it++)tt=rt[it].trim().split("="),_e[tt[0].trim()]=tt[1];return _e},s.writeFmtp=function($){let _e="",tt=$.payloadType;if($.preferredPayloadType!==void 0&&(tt=$.preferredPayloadType),$.parameters&&Object.keys($.parameters).length){let rt=[];Object.keys($.parameters).forEach(it=>{$.parameters[it]!==void 0?rt.push(it+"="+$.parameters[it]):rt.push(it)}),_e+="a=fmtp:"+tt+" "+rt.join(";")+`\r
`}return _e},s.parseRtcpFb=function($){let _e=$.substring($.indexOf(" ")+1).split(" ");return{type:_e.shift(),parameter:_e.join(" ")}},s.writeRtcpFb=function($){let _e="",tt=$.payloadType;return $.preferredPayloadType!==void 0&&(tt=$.preferredPayloadType),$.rtcpFeedback&&$.rtcpFeedback.length&&$.rtcpFeedback.forEach(rt=>{_e+="a=rtcp-fb:"+tt+" "+rt.type+(rt.parameter&&rt.parameter.length?" "+rt.parameter:"")+`\r
`}),_e},s.parseSsrcMedia=function($){let _e=$.indexOf(" "),tt={ssrc:parseInt($.substring(7,_e),10)},rt=$.indexOf(":",_e);return rt>-1?(tt.attribute=$.substring(_e+1,rt),tt.value=$.substring(rt+1)):tt.attribute=$.substring(_e+1),tt},s.parseSsrcGroup=function($){let _e=$.substring(13).split(" ");return{semantics:_e.shift(),ssrcs:_e.map(tt=>parseInt(tt,10))}},s.getMid=function($){let _e=s.matchPrefix($,"a=mid:")[0];if(_e)return _e.substring(6)},s.parseFingerprint=function($){let _e=$.substring(14).split(" ");return{algorithm:_e[0].toLowerCase(),value:_e[1].toUpperCase()}},s.getDtlsParameters=function($,_e){return{role:"auto",fingerprints:s.matchPrefix($+_e,"a=fingerprint:").map(s.parseFingerprint)}},s.writeDtlsParameters=function($,_e){let tt="a=setup:"+_e+`\r
`;return $.fingerprints.forEach(rt=>{tt+="a=fingerprint:"+rt.algorithm+" "+rt.value+`\r
`}),tt},s.parseCryptoLine=function($){let _e=$.substring(9).split(" ");return{tag:parseInt(_e[0],10),cryptoSuite:_e[1],keyParams:_e[2],sessionParams:_e.slice(3)}},s.writeCryptoLine=function($){return"a=crypto:"+$.tag+" "+$.cryptoSuite+" "+(typeof $.keyParams=="object"?s.writeCryptoKeyParams($.keyParams):$.keyParams)+($.sessionParams?" "+$.sessionParams.join(" "):"")+`\r
`},s.parseCryptoKeyParams=function($){if($.indexOf("inline:")!==0)return null;let _e=$.substring(7).split("|");return{keyMethod:"inline",keySalt:_e[0],lifeTime:_e[1],mkiValue:_e[2]?_e[2].split(":")[0]:void 0,mkiLength:_e[2]?_e[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function($){return $.keyMethod+":"+$.keySalt+($.lifeTime?"|"+$.lifeTime:"")+($.mkiValue&&$.mkiLength?"|"+$.mkiValue+":"+$.mkiLength:"")},s.getCryptoParameters=function($,_e){return s.matchPrefix($+_e,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function($,_e){let tt=s.matchPrefix($+_e,"a=ice-ufrag:")[0],rt=s.matchPrefix($+_e,"a=ice-pwd:")[0];return tt&&rt?{usernameFragment:tt.substring(12),password:rt.substring(10)}:null},s.writeIceParameters=function($){let _e="a=ice-ufrag:"+$.usernameFragment+`\r
a=ice-pwd:`+$.password+`\r
`;return $.iceLite&&(_e+=`a=ice-lite\r
`),_e},s.parseRtpParameters=function($){let _e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},tt=s.splitLines($)[0].split(" ");_e.profile=tt[2];for(let it=3;it<tt.length;it++){let at=tt[it],ct=s.matchPrefix($,"a=rtpmap:"+at+" ")[0];if(ct){let dt=s.parseRtpMap(ct),ut=s.matchPrefix($,"a=fmtp:"+at+" ");switch(dt.parameters=ut.length?s.parseFmtp(ut[0]):{},dt.rtcpFeedback=s.matchPrefix($,"a=rtcp-fb:"+at+" ").map(s.parseRtcpFb),_e.codecs.push(dt),dt.name.toUpperCase()){case"RED":case"ULPFEC":_e.fecMechanisms.push(dt.name.toUpperCase())}}}s.matchPrefix($,"a=extmap:").forEach(it=>{_e.headerExtensions.push(s.parseExtmap(it))});let rt=s.matchPrefix($,"a=rtcp-fb:* ").map(s.parseRtcpFb);return _e.codecs.forEach(it=>{rt.forEach(at=>{it.rtcpFeedback.find(ct=>ct.type===at.type&&ct.parameter===at.parameter)||it.rtcpFeedback.push(at)})}),_e},s.writeRtpDescription=function($,_e){let tt="";tt+="m="+$+" ",tt+=_e.codecs.length>0?"9":"0",tt+=" "+(_e.profile||"UDP/TLS/RTP/SAVPF")+" ",tt+=_e.codecs.map(it=>it.preferredPayloadType!==void 0?it.preferredPayloadType:it.payloadType).join(" ")+`\r
`,tt+=`c=IN IP4 0.0.0.0\r
`,tt+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,_e.codecs.forEach(it=>{tt+=s.writeRtpMap(it),tt+=s.writeFmtp(it),tt+=s.writeRtcpFb(it)});let rt=0;return _e.codecs.forEach(it=>{it.maxptime>rt&&(rt=it.maxptime)}),rt>0&&(tt+="a=maxptime:"+rt+`\r
`),_e.headerExtensions&&_e.headerExtensions.forEach(it=>{tt+=s.writeExtmap(it)}),tt},s.parseRtpEncodingParameters=function($){let _e=[],tt=s.parseRtpParameters($),rt=tt.fecMechanisms.indexOf("RED")!==-1,it=tt.fecMechanisms.indexOf("ULPFEC")!==-1,at=s.matchPrefix($,"a=ssrc:").map(mt=>s.parseSsrcMedia(mt)).filter(mt=>mt.attribute==="cname"),ct=at.length>0&&at[0].ssrc,dt,ut=s.matchPrefix($,"a=ssrc-group:FID").map(mt=>mt.substring(17).split(" ").map(yt=>parseInt(yt,10)));ut.length>0&&ut[0].length>1&&ut[0][0]===ct&&(dt=ut[0][1]),tt.codecs.forEach(mt=>{if(mt.name.toUpperCase()==="RTX"&&mt.parameters.apt){let yt={ssrc:ct,codecPayloadType:parseInt(mt.parameters.apt,10)};ct&&dt&&(yt.rtx={ssrc:dt}),_e.push(yt),rt&&(yt=JSON.parse(JSON.stringify(yt)),yt.fec={ssrc:ct,mechanism:it?"red+ulpfec":"red"},_e.push(yt))}}),_e.length===0&&ct&&_e.push({ssrc:ct});let pt=s.matchPrefix($,"b=");return pt.length&&(pt=pt[0].indexOf("b=TIAS:")===0?parseInt(pt[0].substring(7),10):pt[0].indexOf("b=AS:")===0?1e3*parseInt(pt[0].substring(5),10)*.95-16e3:void 0,_e.forEach(mt=>{mt.maxBitrate=pt})),_e},s.parseRtcpParameters=function($){let _e={},tt=s.matchPrefix($,"a=ssrc:").map(at=>s.parseSsrcMedia(at)).filter(at=>at.attribute==="cname")[0];tt&&(_e.cname=tt.value,_e.ssrc=tt.ssrc);let rt=s.matchPrefix($,"a=rtcp-rsize");_e.reducedSize=rt.length>0,_e.compound=rt.length===0;let it=s.matchPrefix($,"a=rtcp-mux");return _e.mux=it.length>0,_e},s.writeRtcpParameters=function($){let _e="";return $.reducedSize&&(_e+=`a=rtcp-rsize\r
`),$.mux&&(_e+=`a=rtcp-mux\r
`),$.ssrc!==void 0&&$.cname&&(_e+="a=ssrc:"+$.ssrc+" cname:"+$.cname+`\r
`),_e},s.parseMsid=function($){let _e,tt=s.matchPrefix($,"a=msid:");if(tt.length===1)return _e=tt[0].substring(7).split(" "),{stream:_e[0],track:_e[1]};let rt=s.matchPrefix($,"a=ssrc:").map(it=>s.parseSsrcMedia(it)).filter(it=>it.attribute==="msid");return rt.length>0?(_e=rt[0].value.split(" "),{stream:_e[0],track:_e[1]}):void 0},s.parseSctpDescription=function($){let _e=s.parseMLine($),tt=s.matchPrefix($,"a=max-message-size:"),rt;tt.length>0&&(rt=parseInt(tt[0].substring(19),10)),isNaN(rt)&&(rt=65536);let it=s.matchPrefix($,"a=sctp-port:");if(it.length>0)return{port:parseInt(it[0].substring(12),10),protocol:_e.fmt,maxMessageSize:rt};let at=s.matchPrefix($,"a=sctpmap:");if(at.length>0){let ct=at[0].substring(10).split(" ");return{port:parseInt(ct[0],10),protocol:ct[1],maxMessageSize:rt}}},s.writeSctpDescription=function($,_e){let tt=[];return tt=$.protocol!=="DTLS/SCTP"?["m="+$.kind+" 9 "+$.protocol+" "+_e.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+_e.port+`\r
`]:["m="+$.kind+" 9 "+$.protocol+" "+_e.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+_e.port+" "+_e.protocol+` 65535\r
`],_e.maxMessageSize!==void 0&&tt.push("a=max-message-size:"+_e.maxMessageSize+`\r
`),tt.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,22)},s.writeSessionBoilerplate=function($,_e,tt){let rt,it=_e!==void 0?_e:2;return rt=$||s.generateSessionId(),`v=0\r
o=`+(tt||"thisisadapterortc")+" "+rt+" "+it+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},s.getDirection=function($,_e){let tt=s.splitLines($);for(let rt=0;rt<tt.length;rt++)switch(tt[rt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return tt[rt].substring(2)}return _e?s.getDirection(_e):"sendrecv"},s.getKind=function($){return s.splitLines($)[0].split(" ")[0].substring(2)},s.isRejected=function($){return $.split(" ",2)[1]==="0"},s.parseMLine=function($){let _e=s.splitLines($)[0].substring(2).split(" ");return{kind:_e[0],port:parseInt(_e[1],10),protocol:_e[2],fmt:_e.slice(3).join(" ")}},s.parseOLine=function($){let _e=s.matchPrefix($,"o=")[0].substring(2).split(" ");return{username:_e[0],sessionId:_e[1],sessionVersion:parseInt(_e[2],10),netType:_e[3],addressType:_e[4],address:_e[5]}},s.isValidSDP=function($){if(typeof $!="string"||$.length===0)return!1;let _e=s.splitLines($);for(let tt=0;tt<_e.length;tt++)if(_e[tt].length<2||_e[tt].charAt(1)!=="=")return!1;return!0},j.exports=s})(IC);var AC=IC.exports,gm=ot(AC),M5=et({__proto__:null,default:gm},[AC]);function k0(j){if(!j.RTCIceCandidate||j.RTCIceCandidate&&"foundation"in j.RTCIceCandidate.prototype)return;let s=j.RTCIceCandidate;j.RTCIceCandidate=function($){if(typeof $=="object"&&$.candidate&&$.candidate.indexOf("a=")===0&&(($=JSON.parse(JSON.stringify($))).candidate=$.candidate.substr(2)),$.candidate&&$.candidate.length){let _e=new s($),tt=gm.parseCandidate($.candidate),rt=Object.assign(_e,tt);return rt.toJSON=function(){return{candidate:rt.candidate,sdpMid:rt.sdpMid,sdpMLineIndex:rt.sdpMLineIndex,usernameFragment:rt.usernameFragment}},rt}return new s($)},j.RTCIceCandidate.prototype=s.prototype,Mp(j,"icecandidate",$=>($.candidate&&Object.defineProperty($,"candidate",{value:new j.RTCIceCandidate($.candidate),writable:"false"}),$))}function yy(j){!j.RTCIceCandidate||j.RTCIceCandidate&&"relayProtocol"in j.RTCIceCandidate.prototype||Mp(j,"icecandidate",s=>{if(s.candidate){let $=gm.parseCandidate(s.candidate.candidate);$.type==="relay"&&(s.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[$.priority>>24])}return s})}function $0(j,s){if(!j.RTCPeerConnection)return;"sctp"in j.RTCPeerConnection.prototype||Object.defineProperty(j.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});let $=function(at){if(!at||!at.sdp)return!1;let ct=gm.splitSections(at.sdp);return ct.shift(),ct.some(dt=>{let ut=gm.parseMLine(dt);return ut&&ut.kind==="application"&&ut.protocol.indexOf("SCTP")!==-1})},_e=function(at){let ct=at.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(ct===null||ct.length<2)return-1;let dt=parseInt(ct[1],10);return dt!=dt?-1:dt},tt=function(at){let ct=65536;return s.browser==="firefox"&&(ct=s.version<57?at===-1?16384:2147483637:s.version<60?s.version===57?65535:65536:2147483637),ct},rt=function(at,ct){let dt=65536;s.browser==="firefox"&&s.version===57&&(dt=65535);let ut=gm.matchPrefix(at.sdp,"a=max-message-size:");return ut.length>0?dt=parseInt(ut[0].substr(19),10):s.browser==="firefox"&&ct!==-1&&(dt=2147483637),dt},it=j.RTCPeerConnection.prototype.setRemoteDescription;j.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){let{sdpSemantics:at}=this.getConfiguration();at==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if($(arguments[0])){let at=_e(arguments[0]),ct=tt(at),dt=rt(arguments[0],at),ut;ut=ct===0&&dt===0?Number.POSITIVE_INFINITY:ct===0||dt===0?Math.max(ct,dt):Math.min(ct,dt);let pt={};Object.defineProperty(pt,"maxMessageSize",{get:()=>ut}),this._sctp=pt}return it.apply(this,arguments)}}function M0(j){if(!j.RTCPeerConnection||!("createDataChannel"in j.RTCPeerConnection.prototype))return;function s(_e,tt){let rt=_e.send;_e.send=function(){let it=arguments[0],at=it.length||it.size||it.byteLength;if(_e.readyState==="open"&&tt.sctp&&at>tt.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+tt.sctp.maxMessageSize+" bytes)");return rt.apply(_e,arguments)}}let $=j.RTCPeerConnection.prototype.createDataChannel;j.RTCPeerConnection.prototype.createDataChannel=function(){let _e=$.apply(this,arguments);return s(_e,this),_e},Mp(j,"datachannel",_e=>(s(_e.channel,_e.target),_e))}function Sy(j){if(!j.RTCPeerConnection||"connectionState"in j.RTCPeerConnection.prototype)return;let s=j.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set($){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),$&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=$)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach($=>{let _e=s[$];s[$]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=tt=>{let rt=tt.target;if(rt._lastConnectionState!==rt.connectionState){rt._lastConnectionState=rt.connectionState;let it=new Event("connectionstatechange",tt);rt.dispatchEvent(it)}return tt},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),_e.apply(this,arguments)}})}function Ty(j,s){if(!j.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s.version>=605)return;let $=j.RTCPeerConnection.prototype.setRemoteDescription;j.RTCPeerConnection.prototype.setRemoteDescription=function(_e){if(_e&&_e.sdp&&_e.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){let tt=_e.sdp.split(`
`).filter(rt=>rt.trim()!=="a=extmap-allow-mixed").join(`
`);j.RTCSessionDescription&&_e instanceof j.RTCSessionDescription?arguments[0]=new j.RTCSessionDescription({type:_e.type,sdp:tt}):_e.sdp=tt}return $.apply(this,arguments)}}function U0(j,s){if(!j.RTCPeerConnection||!j.RTCPeerConnection.prototype)return;let $=j.RTCPeerConnection.prototype.addIceCandidate;$&&$.length!==0&&(j.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():$.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function F0(j,s){if(!j.RTCPeerConnection||!j.RTCPeerConnection.prototype)return;let $=j.RTCPeerConnection.prototype.setLocalDescription;$&&$.length!==0&&(j.RTCPeerConnection.prototype.setLocalDescription=function(){let _e=arguments[0]||{};if(typeof _e!="object"||_e.type&&_e.sdp)return $.apply(this,arguments);if(_e={type:_e.type,sdp:_e.sdp},!_e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":_e.type="offer";break;default:_e.type="answer"}return _e.sdp||_e.type!=="offer"&&_e.type!=="answer"?$.apply(this,[_e]):(_e.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(tt=>$.apply(this,[tt]))})}var U5=Object.freeze({__proto__:null,removeExtmapAllowMixed:Ty,shimAddIceCandidateNullOrEmpty:U0,shimConnectionState:Sy,shimMaxMessageSize:$0,shimParameterlessSetLocalDescription:F0,shimRTCIceCandidate:k0,shimRTCIceCandidateRelayProtocol:yy,shimSendThrowTypeError:M0});(function({window:j}={},s={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){let $=Bv,_e=function(rt){let it={browser:null,version:null};if(rt===void 0||!rt.navigator)return it.browser="Not a browser.",it;let{navigator:at}=rt;if(at.mozGetUserMedia)it.browser="firefox",it.version=L0(at.userAgent,/Firefox\/(\d+)\./,1);else if(at.webkitGetUserMedia||rt.isSecureContext===!1&&rt.webkitRTCPeerConnection)it.browser="chrome",it.version=L0(at.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!rt.RTCPeerConnection||!at.userAgent.match(/AppleWebKit\/(\d+)\./))return it.browser="Not a supported browser.",it;it.browser="safari",it.version=L0(at.userAgent,/AppleWebKit\/(\d+)\./,1),it.supportsUnifiedPlan=rt.RTCRtpTransceiver&&"currentDirection"in rt.RTCRtpTransceiver.prototype}return it}(j),tt={browserDetails:_e,commonShim:U5,extractVersion:L0,disableLog:k5,disableWarnings:$5,sdp:M5};switch(_e.browser){case"chrome":if(!oC||!_y||!s.shimChrome)return $("Chrome shim is not included in this adapter release."),tt;if(_e.version===null)return $("Chrome shim can not determine version, not shimming."),tt;$("adapter.js shimming chrome."),tt.browserShim=oC,U0(j,_e),F0(j),Yv(j,_e),qv(j),_y(j,_e),Xv(j),nC(j,_e),Jv(j),Zv(j),eC(j),rC(j,_e),k0(j),yy(j),Sy(j),$0(j,_e),M0(j),Ty(j,_e);break;case"firefox":if(!gC||!Ey||!s.shimFirefox)return $("Firefox shim is not included in this adapter release."),tt;$("adapter.js shimming firefox."),tt.browserShim=gC,U0(j,_e),F0(j),iC(j,_e),Ey(j,_e),sC(j),lC(j),aC(j),cC(j),dC(j),uC(j),pC(j),hC(j),fC(j),k0(j),Sy(j),$0(j,_e),M0(j);break;case"safari":if(!RC||!s.shimSafari)return $("Safari shim is not included in this adapter release."),tt;$("adapter.js shimming safari."),tt.browserShim=RC,U0(j,_e),F0(j),TC(j),CC(j),EC(j),mC(j),_C(j),vC(j),yC(j),bC(j),k0(j),yy(j),$0(j,_e),M0(j),Ty(j,_e);break;default:$("Unsupported browser!")}})({window:typeof window>"u"?void 0:window});var NC={exports:{}},F5=qr,j5=Rn,wC=Vl.f;F5({target:"Object",stat:!0,forced:Object.defineProperty!==wC,sham:!j5},{defineProperty:wC});var OC=go.Object,V5=NC.exports=function(j,s,$){return OC.defineProperty(j,s,$)};OC.defineProperty.sham&&(V5.sham=!0);var B5=ot(NC.exports),G5=Kt,vy=Array.isArray||function(j){return G5(j)=="Array"},W5=TypeError,H5=O0,z5=Vl,K5=or,PC=function(j,s,$){var _e=H5(s);_e in j?z5.f(j,_e,K5(0,$)):j[_e]=$},Y5=Sn,Cy=f1,q5=Rt(Function.toString);Y5(Cy.inspectSource)||(Cy.inspectSource=function(j){return q5(j)});var DC=Cy.inspectSource,X5=Rt,J5=st,xC=Sn,Q5=$p,Z5=DC,LC=function(){},e8=[],kC=Zr("Reflect","construct"),by=/^\s*(?:class|function)\b/,t8=X5(by.exec),n8=!by.exec(LC),_1=function(j){if(!xC(j))return!1;try{return kC(LC,e8,j),!0}catch{return!1}},$C=function(j){if(!xC(j))return!1;switch(Q5(j)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return n8||!!t8(by,Z5(j))}catch{return!0}};$C.sham=!0;var MC=!kC||J5(function(){var j;return _1(_1.call)||!_1(Object)||!_1(function(){j=!0})||j})?$C:_1,UC=vy,r8=MC,o8=gr,i8=Po("species"),FC=Array,s8=function(j){var s;return UC(j)&&(s=j.constructor,(r8(s)&&(s===FC||UC(s.prototype))||o8(s)&&(s=s[i8])===null)&&(s=void 0)),s===void 0?FC:s},jC=function(j,s){return new(s8(j))(s===0?0:s)},a8=st,c8=eo,l8=Po("species"),d8=qr,u8=st,p8=vy,h8=gr,f8=Wo,g8=kp,VC=function(j){if(j>9007199254740991)throw W5("Maximum allowed index exceeded");return j},BC=PC,m8=jC,_8=function(j){return c8>=51||!a8(function(){var s=[];return(s.constructor={})[l8]=function(){return{foo:1}},s[j](Boolean).foo!==1})},E8=eo,GC=Po("isConcatSpreadable"),y8=E8>=51||!u8(function(){var j=[];return j[GC]=!1,j.concat()[0]!==j}),S8=function(j){if(!h8(j))return!1;var s=j[GC];return s!==void 0?!!s:p8(j)};d8({target:"Array",proto:!0,arity:1,forced:!y8||!_8("concat")},{concat:function(j){var s,$,_e,tt,rt,it=f8(this),at=m8(it,0),ct=0;for(s=-1,_e=arguments.length;s<_e;s++)if(S8(rt=s===-1?it:arguments[s]))for(tt=g8(rt),VC(ct+tt),$=0;$<tt;$++,ct++)$ in rt&&BC(at,ct,rt[$]);else VC(ct+1),BC(at,ct++,rt);return at.length=ct,at}});var Ry={},j0={},Iy=Is,T8=co,v8=ly.indexOf,C8=j0,WC=Rt([].push),HC=function(j,s){var $,_e=T8(j),tt=0,rt=[];for($ in _e)!Iy(C8,$)&&Iy(_e,$)&&WC(rt,$);for(;s.length>tt;)Iy(_e,$=s[tt++])&&(~v8(rt,$)||WC(rt,$));return rt},Ay=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],b8=HC,R8=Ay,Ny=Object.keys||function(j){return b8(j,R8)},I8=Rn,A8=Dv,N8=Vl,w8=_d,O8=co,P8=Ny;Ry.f=I8&&!A8?Object.defineProperties:function(j,s){w8(j);for(var $,_e=O8(s),tt=P8(s),rt=tt.length,it=0;rt>it;)N8.f(j,$=tt[it++],_e[$]);return j};var V0,zC=Zr("document","documentElement"),D8=KE,KC=Yu("keys"),B0=function(j){return KC[j]||(KC[j]=D8(j))},x8=_d,L8=Ry,YC=Ay,k8=j0,$8=zC,M8=XE,wy="prototype",Oy="script",qC=B0("IE_PROTO"),Py=function(){},XC=function(j){return"<"+Oy+">"+j+"</"+Oy+">"},JC=function(j){j.write(XC("")),j.close();var s=j.parentWindow.Object;return j=null,s},G0=function(){try{V0=new ActiveXObject("htmlfile")}catch{}var j,s,$;G0=typeof document<"u"?document.domain&&V0?JC(V0):(s=M8("iframe"),$="java"+Oy+":",s.style.display="none",$8.appendChild(s),s.src=String($),(j=s.contentWindow.document).open(),j.write(XC("document.F=Object")),j.close(),j.F):JC(V0);for(var _e=YC.length;_e--;)delete G0[wy][YC[_e]];return G0()};k8[qC]=!0;var W0=Object.create||function(j,s){var $;return j!==null?(Py[wy]=x8(j),$=new Py,Py[wy]=null,$[qC]=j):$=G0(),s===void 0?$:L8.f($,s)},H0={},U8=HC,F8=Ay.concat("length","prototype");H0.f=Object.getOwnPropertyNames||function(j){return U8(j,F8)};var QC={},ZC=kv,j8=kp,V8=PC,B8=Array,G8=Math.max,_b=function(j,s,$){for(var _e=j8(j),tt=ZC(s,_e),rt=ZC($===void 0?_e:$,_e),it=B8(G8(rt-tt,0)),at=0;tt<rt;tt++,at++)V8(it,at,j[tt]);return it.length=at,it},W8=Kt,H8=co,eR=H0.f,z8=_b,tR=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];QC.f=function(j){return tR&&W8(j)=="Window"?function(s){try{return eR(s)}catch{return z8(tR)}}(j):eR(H8(j))};var z0={};z0.f=Object.getOwnPropertySymbols;var K8=qu,E1=function(j,s,$,_e){return _e&&_e.enumerable?j[s]=$:K8(j,s,$),j},Y8=Vl,nR=function(j,s,$){return Y8.f(j,s,$)},mm={},q8=Po;mm.f=q8;var K0,y1,Y0,rR=go,X8=Is,J8=mm,Q8=Vl.f,Ho=function(j){var s=rR.Symbol||(rR.Symbol={});X8(s,j)||Q8(s,j,{value:J8.f(j)})},Z8=_n,e9=Zr,t9=Po,n9=E1,oR=function(){var j=e9("Symbol"),s=j&&j.prototype,$=s&&s.valueOf,_e=t9("toPrimitive");s&&!s[_e]&&n9(s,_e,function(tt){return Z8($,this)},{arity:1})},r9=$p,o9=dy?{}.toString:function(){return"[object "+r9(this)+"]"},i9=dy,s9=Vl.f,a9=qu,c9=Is,l9=o9,iR=Po("toStringTag"),_m=function(j,s,$,_e){if(j){var tt=$?j:j.prototype;c9(tt,iR)||s9(tt,iR,{configurable:!0,value:s}),_e&&!i9&&a9(tt,"toString",l9)}},d9=Sn,sR=Dt.WeakMap,u9=d9(sR)&&/native code/.test(String(sR)),aR=Dt,p9=gr,h9=qu,Dy=Is,xy=f1,f9=B0,g9=j0,cR="Object already initialized",Ly=aR.TypeError,m9=aR.WeakMap;if(u9||xy.state){var lu=xy.state||(xy.state=new m9);lu.get=lu.get,lu.has=lu.has,lu.set=lu.set,K0=function(j,s){if(lu.has(j))throw Ly(cR);return s.facade=j,lu.set(j,s),s},y1=function(j){return lu.get(j)||{}},Y0=function(j){return lu.has(j)}}else{var Em=f9("state");g9[Em]=!0,K0=function(j,s){if(Dy(j,Em))throw Ly(cR);return s.facade=j,h9(j,Em,s),s},y1=function(j){return Dy(j,Em)?j[Em]:{}},Y0=function(j){return Dy(j,Em)}}var q0={set:K0,get:y1,has:Y0,enforce:function(j){return Y0(j)?y1(j):K0(j,{})},getterFor:function(j){return function(s){var $;if(!p9(s)||($=y1(s)).type!==j)throw Ly("Incompatible receiver, "+j+" required");return $}}},_9=m1,E9=ur,y9=Wo,S9=kp,T9=jC,lR=Rt([].push),Ju=function(j){var s=j==1,$=j==2,_e=j==3,tt=j==4,rt=j==6,it=j==7,at=j==5||rt;return function(ct,dt,ut,pt){for(var mt,yt,At=y9(ct),Ct=E9(At),It=_9(dt,ut),kt=S9(Ct),Vt=0,Bt=pt||T9,en=s?Bt(ct,kt):$||it?Bt(ct,0):void 0;kt>Vt;Vt++)if((at||Vt in Ct)&&(yt=It(mt=Ct[Vt],Vt,At),j))if(s)en[Vt]=yt;else if(yt)switch(j){case 3:return!0;case 5:return mt;case 6:return Vt;case 2:lR(en,mt)}else switch(j){case 4:return!1;case 7:lR(en,mt)}return rt?-1:_e||tt?tt:en}},v9={forEach:Ju(0),map:Ju(1),filter:Ju(2),some:Ju(3),every:Ju(4),find:Ju(5),findIndex:Ju(6),filterReject:Ju(7)},X0=qr,ky=Dt,$y=_n,C9=Rt,ym=Rn,Sm=zu,b9=st,ps=Is,R9=wt,My=_d,J0=co,Uy=O0,I9=Nu,Fy=or,S1=W0,dR=Ny,A9=H0,uR=QC,N9=z0,pR=Nn,hR=Vl,w9=Ry,fR=bn,gR=E1,O9=nR,jy=Yu,mR=j0,_R=KE,P9=Po,D9=mm,x9=Ho,L9=oR,k9=_m,ER=q0,Q0=v9.forEach,Hs=B0("hidden"),Z0="Symbol",T1="prototype",$9=ER.set,yR=ER.getterFor(Z0),eu=Object[T1],Up=ky.Symbol,e_=Up&&Up[T1],M9=ky.TypeError,Vy=ky.QObject,SR=pR.f,Fp=hR.f,TR=uR.f,U9=fR.f,vR=C9([].push),wu=jy("symbols"),v1=jy("op-symbols"),F9=jy("wks"),By=!Vy||!Vy[T1]||!Vy[T1].findChild,Gy=ym&&b9(function(){return S1(Fp({},"a",{get:function(){return Fp(this,"a",{value:7}).a}})).a!=7})?function(j,s,$){var _e=SR(eu,s);_e&&delete eu[s],Fp(j,s,$),_e&&j!==eu&&Fp(eu,s,_e)}:Fp,Wy=function(j,s){var $=wu[j]=S1(e_);return $9($,{type:Z0,tag:j,description:s}),ym||($.description=s),$},t_=function(j,s,$){j===eu&&t_(v1,s,$),My(j);var _e=Uy(s);return My($),ps(wu,_e)?($.enumerable?(ps(j,Hs)&&j[Hs][_e]&&(j[Hs][_e]=!1),$=S1($,{enumerable:Fy(0,!1)})):(ps(j,Hs)||Fp(j,Hs,Fy(1,{})),j[Hs][_e]=!0),Gy(j,_e,$)):Fp(j,_e,$)},Hy=function(j,s){My(j);var $=J0(s),_e=dR($).concat(IR($));return Q0(_e,function(tt){ym&&!$y(CR,$,tt)||t_(j,tt,$[tt])}),j},CR=function(j){var s=Uy(j),$=$y(U9,this,s);return!(this===eu&&ps(wu,s)&&!ps(v1,s))&&(!($||!ps(this,s)||!ps(wu,s)||ps(this,Hs)&&this[Hs][s])||$)},bR=function(j,s){var $=J0(j),_e=Uy(s);if($!==eu||!ps(wu,_e)||ps(v1,_e)){var tt=SR($,_e);return!tt||!ps(wu,_e)||ps($,Hs)&&$[Hs][_e]||(tt.enumerable=!0),tt}},RR=function(j){var s=TR(J0(j)),$=[];return Q0(s,function(_e){ps(wu,_e)||ps(mR,_e)||vR($,_e)}),$},IR=function(j){var s=j===eu,$=TR(s?v1:J0(j)),_e=[];return Q0($,function(tt){!ps(wu,tt)||s&&!ps(eu,tt)||vR(_e,wu[tt])}),_e};Sm||(Up=function(){if(R9(e_,this))throw M9("Symbol is not a constructor");var j=arguments.length&&arguments[0]!==void 0?I9(arguments[0]):void 0,s=_R(j),$=function(_e){this===eu&&$y($,v1,_e),ps(this,Hs)&&ps(this[Hs],s)&&(this[Hs][s]=!1),Gy(this,s,Fy(1,_e))};return ym&&By&&Gy(eu,s,{configurable:!0,set:$}),Wy(s,j)},gR(e_=Up[T1],"toString",function(){return yR(this).tag}),gR(Up,"withoutSetter",function(j){return Wy(_R(j),j)}),fR.f=CR,hR.f=t_,w9.f=Hy,pR.f=bR,A9.f=uR.f=RR,N9.f=IR,D9.f=function(j){return Wy(P9(j),j)},ym&&O9(e_,"description",{configurable:!0,get:function(){return yR(this).description}})),X0({global:!0,constructor:!0,wrap:!0,forced:!Sm,sham:!Sm},{Symbol:Up}),Q0(dR(F9),function(j){x9(j)}),X0({target:Z0,stat:!0,forced:!Sm},{useSetter:function(){By=!0},useSimple:function(){By=!1}}),X0({target:"Object",stat:!0,forced:!Sm,sham:!ym},{create:function(j,s){return s===void 0?S1(j):Hy(S1(j),s)},defineProperty:t_,defineProperties:Hy,getOwnPropertyDescriptor:bR}),X0({target:"Object",stat:!0,forced:!Sm},{getOwnPropertyNames:RR}),L9(),k9(Up,Z0),mR[Hs]=!0;var AR=zu&&!!Symbol.for&&!!Symbol.keyFor,j9=qr,V9=Zr,B9=Is,G9=Nu,NR=Yu,W9=AR,zy=NR("string-to-symbol-registry"),H9=NR("symbol-to-string-registry");j9({target:"Symbol",stat:!0,forced:!W9},{for:function(j){var s=G9(j);if(B9(zy,s))return zy[s];var $=V9("Symbol")(s);return zy[s]=$,H9[$]=s,$}});var z9=qr,K9=Is,Y9=Ku,q9=Iu,X9=AR,wR=Yu("symbol-to-string-registry");z9({target:"Symbol",stat:!0,forced:!X9},{keyFor:function(j){if(!Y9(j))throw TypeError(q9(j)+" is not a symbol");if(K9(wR,j))return wR[j]}});var OR=Rt([].slice),PR=vy,J9=Sn,DR=Kt,Q9=Nu,xR=Rt([].push),Z9=qr,LR=Zr,kR=xt,e6=_n,C1=Rt,$R=st,MR=Sn,UR=Ku,FR=OR,t6=function(j){if(J9(j))return j;if(PR(j)){for(var s=j.length,$=[],_e=0;_e<s;_e++){var tt=j[_e];typeof tt=="string"?xR($,tt):typeof tt!="number"&&DR(tt)!="Number"&&DR(tt)!="String"||xR($,Q9(tt))}var rt=$.length,it=!0;return function(at,ct){if(it)return it=!1,ct;if(PR(this))return ct;for(var dt=0;dt<rt;dt++)if($[dt]===at)return ct}}},n6=zu,r6=String,Qu=LR("JSON","stringify"),n_=C1(/./.exec),jR=C1("".charAt),o6=C1("".charCodeAt),i6=C1("".replace),s6=C1(1 .toString),a6=/[\uD800-\uDFFF]/g,VR=/^[\uD800-\uDBFF]$/,BR=/^[\uDC00-\uDFFF]$/,GR=!n6||$R(function(){var j=LR("Symbol")();return Qu([j])!="[null]"||Qu({a:j})!="{}"||Qu(Object(j))!="{}"}),WR=$R(function(){return Qu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Qu("\uDEAD")!=='"\\udead"'}),c6=function(j,s){var $=FR(arguments),_e=t6(s);if(MR(_e)||j!==void 0&&!UR(j))return $[1]=function(tt,rt){if(MR(_e)&&(rt=e6(_e,this,r6(tt),rt)),!UR(rt))return rt},kR(Qu,null,$)},l6=function(j,s,$){var _e=jR($,s-1),tt=jR($,s+1);return n_(VR,j)&&!n_(BR,tt)||n_(BR,j)&&!n_(VR,_e)?"\\u"+s6(o6(j,0),16):j};Qu&&Z9({target:"JSON",stat:!0,arity:3,forced:GR||WR},{stringify:function(j,s,$){var _e=FR(arguments),tt=kR(GR?c6:Qu,null,_e);return WR&&typeof tt=="string"?i6(tt,a6,l6):tt}});var HR=z0,d6=Wo;qr({target:"Object",stat:!0,forced:!zu||st(function(){HR.f(1)})},{getOwnPropertySymbols:function(j){var s=HR.f;return s?s(d6(j)):[]}}),Ho("asyncIterator"),Ho("hasInstance"),Ho("isConcatSpreadable"),Ho("iterator"),Ho("match"),Ho("matchAll"),Ho("replace"),Ho("search"),Ho("species"),Ho("split");var u6=oR;Ho("toPrimitive"),u6();var p6=Zr,h6=_m;Ho("toStringTag"),h6(p6("Symbol"),"Symbol"),Ho("unscopables"),_m(Dt.JSON,"JSON",!0);var jp,zR,KR,f6=go.Symbol,Tm={},Ky=Rn,g6=Is,YR=Function.prototype,m6=Ky&&Object.getOwnPropertyDescriptor,Yy=g6(YR,"name"),qR={EXISTS:Yy,PROPER:Yy&&(function(){}).name==="something",CONFIGURABLE:Yy&&(!Ky||Ky&&m6(YR,"name").configurable)},_6=!st(function(){function j(){}return j.prototype.constructor=null,Object.getPrototypeOf(new j)!==j.prototype}),E6=Is,y6=Sn,S6=Wo,T6=_6,XR=B0("IE_PROTO"),qy=Object,v6=qy.prototype,Xy=T6?qy.getPrototypeOf:function(j){var s=S6(j);if(E6(s,XR))return s[XR];var $=s.constructor;return y6($)&&s instanceof $?$.prototype:s instanceof qy?v6:null},C6=st,b6=Sn,R6=gr,I6=W0,JR=Xy,A6=E1,Jy=Po("iterator"),QR=!1;[].keys&&("next"in(KR=[].keys())?(zR=JR(JR(KR)))!==Object.prototype&&(jp=zR):QR=!0);var N6=!R6(jp)||C6(function(){var j={};return jp[Jy].call(j)!==j});b6((jp=N6?{}:I6(jp))[Jy])||A6(jp,Jy,function(){return this});var ZR={IteratorPrototype:jp,BUGGY_SAFARI_ITERATORS:QR},w6=ZR.IteratorPrototype,O6=W0,P6=or,D6=_m,x6=Tm,L6=function(){return this},k6=Rt,$6=bs,M6=Sn,U6=String,F6=TypeError,j6=function(j,s,$){try{return k6($6(Object.getOwnPropertyDescriptor(j,s)[$]))}catch{}},V6=_d,B6=function(j){if(typeof j=="object"||M6(j))return j;throw F6("Can't set "+U6(j)+" as a prototype")},G6=Object.setPrototypeOf||("__proto__"in{}?function(){var j,s=!1,$={};try{(j=j6(Object.prototype,"__proto__","set"))($,[]),s=$ instanceof Array}catch{}return function(_e,tt){return V6(_e),B6(tt),s?j(_e,tt):_e.__proto__=tt,_e}}():void 0),W6=qr,H6=_n,z6=qR,K6=function(j,s,$,_e){var tt=s+" Iterator";return j.prototype=O6(w6,{next:P6(+!_e,$)}),D6(j,tt,!1,!0),x6[tt]=L6,j},Y6=Xy,q6=_m,e3=E1,t3=Tm,X6=ZR,J6=z6.PROPER,r_=X6.BUGGY_SAFARI_ITERATORS,Qy=Po("iterator"),n3="keys",o_="values",r3="entries",Q6=function(){return this},o3=function(j,s,$,_e,tt,rt,it){K6($,s,_e);var at,ct,dt,ut=function(kt){if(kt===tt&&Ct)return Ct;if(!r_&&kt in yt)return yt[kt];switch(kt){case n3:case o_:case r3:return function(){return new $(this,kt)}}return function(){return new $(this)}},pt=s+" Iterator",mt=!1,yt=j.prototype,At=yt[Qy]||yt["@@iterator"]||tt&&yt[tt],Ct=!r_&&At||ut(tt),It=s=="Array"&&yt.entries||At;if(It&&(at=Y6(It.call(new j)))!==Object.prototype&&at.next&&(q6(at,pt,!0,!0),t3[pt]=Q6),J6&&tt==o_&&At&&At.name!==o_&&(mt=!0,Ct=function(){return H6(At,this)}),tt)if(ct={values:ut(o_),keys:rt?Ct:ut(n3),entries:ut(r3)},it)for(dt in ct)(r_||mt||!(dt in yt))&&e3(yt,dt,ct[dt]);else W6({target:s,proto:!0,forced:r_||mt},ct);return it&&yt[Qy]!==Ct&&e3(yt,Qy,Ct,{name:tt}),t3[s]=Ct,ct},i3=function(j,s){return{value:j,done:s}},Z6=co,s3=Tm,a3=q0;Vl.f;var eD=o3,c3=i3,l3="Array Iterator",tD=a3.set,nD=a3.getterFor(l3);eD(Array,"Array",function(j,s){tD(this,{type:l3,target:Z6(j),index:0,kind:s})},function(){var j=nD(this),s=j.target,$=j.kind,_e=j.index++;return!s||_e>=s.length?(j.target=void 0,c3(void 0,!0)):c3($=="keys"?_e:$=="values"?s[_e]:[_e,s[_e]],!1)},"values"),s3.Arguments=s3.Array;var rD={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},oD=Dt,iD=$p,sD=qu,d3=Tm,u3=Po("toStringTag");for(var Zy in rD){var p3=oD[Zy],a2=p3&&p3.prototype;a2&&iD(a2)!==u3&&sD(a2,u3,Zy),d3[Zy]=d3.Array}var aD=f6,cD=Po,lD=Vl.f,h3=cD("metadata"),f3=Function.prototype;f3[h3]===void 0&&lD(f3,h3,{value:null}),Ho("dispose"),Ho("metadata");var dD=aD;Ho("asyncDispose");var uD=Rt,c2=Zr("Symbol"),pD=c2.keyFor,hD=uD(c2.prototype.valueOf),g3=c2.isRegisteredSymbol||function(j){try{return pD(hD(j))!==void 0}catch{return!1}};qr({target:"Symbol",stat:!0},{isRegisteredSymbol:g3});for(var fD=Yu,m3=Zr,gD=Rt,mD=Ku,_D=Po,i_=m3("Symbol"),_3=i_.isWellKnownSymbol,E3=m3("Object","getOwnPropertyNames"),ED=gD(i_.prototype.valueOf),y3=fD("wks"),d2=0,S3=E3(i_),yD=S3.length;d2<yD;d2++)try{var T3=S3[d2];mD(i_[T3])&&_D(T3)}catch{}var v3=function(j){if(_3&&_3(j))return!0;try{for(var s=ED(j),$=0,_e=E3(y3),tt=_e.length;$<tt;$++)if(y3[_e[$]]==s)return!0}catch{}return!1};qr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:v3}),Ho("matcher"),Ho("observable"),qr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:g3}),qr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:v3}),Ho("metadataKey"),Ho("patternMatch"),Ho("replaceAll");var vm=ot(dD),g2=Rt,SD=cy,TD=Nu,vD=Cr,CD=g2("".charAt),C3=g2("".charCodeAt),bD=g2("".slice),b3=function(j){return function(s,$){var _e,tt,rt=TD(vD(s)),it=SD($),at=rt.length;return it<0||it>=at?j?"":void 0:(_e=C3(rt,it))<55296||_e>56319||it+1===at||(tt=C3(rt,it+1))<56320||tt>57343?j?CD(rt,it):_e:j?bD(rt,it,it+2):tt-56320+(_e-55296<<10)+65536}},RD={codeAt:b3(!1),charAt:b3(!0)}.charAt,ID=Nu,R3=q0,AD=o3,I3=i3,A3="String Iterator",ND=R3.set,wD=R3.getterFor(A3);AD(String,"String",function(j){ND(this,{type:A3,string:ID(j),index:0})},function(){var j,s=wD(this),$=s.string,_e=s.index;return _e>=$.length?I3(void 0,!0):(j=RD($,_e),s.index+=j.length,I3(j,!1))});var N3=ot(mm.f("iterator"));function b1(j){return b1=typeof vm=="function"&&typeof N3=="symbol"?function(s){return typeof s}:function(s){return s&&typeof vm=="function"&&s.constructor===vm&&s!==vm.prototype?"symbol":typeof s},b1(j)}var OD=ot(mm.f("toPrimitive"));function PD(j){var s=function($,_e){if(b1($)!=="object"||$===null)return $;var tt=$[OD];if(tt!==void 0){var rt=tt.call($,_e||"default");if(b1(rt)!=="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)($)}(j,"string");return b1(s)==="symbol"?s:String(s)}function gt(j,s,$){return(s=PD(s))in j?B5(j,s,{value:$,enumerable:!0,configurable:!0,writable:!0}):j[s]=$,j}var DD=Xu("Array").keys,xD=$p,LD=Is,kD=wt,$D=DD,_2=Array.prototype,MD={DOMTokenList:!0,NodeList:!0},zs=ot(function(j){var s=j.keys;return j===_2||kD(_2,j)&&s===_2.keys||LD(MD,xD(j))?$D:s}),w3=Iu,UD=TypeError,O3=_b,FD=Math.floor,E2=function(j,s){var $=j.length,_e=FD($/2);return $<8?jD(j,s):VD(j,E2(O3(j,0,_e),s),E2(O3(j,_e),s),s)},jD=function(j,s){for(var $,_e,tt=j.length,rt=1;rt<tt;){for(_e=rt,$=j[rt];_e&&s(j[_e-1],$)>0;)j[_e]=j[--_e];_e!==rt++&&(j[_e]=$)}return j},VD=function(j,s,$,_e){for(var tt=s.length,rt=$.length,it=0,at=0;it<tt||at<rt;)j[it+at]=it<tt&&at<rt?_e(s[it],$[at])<=0?s[it++]:$[at++]:it<tt?s[it++]:$[at++];return j},BD=E2,GD=st,y2=function(j,s){var $=[][j];return!!$&&GD(function(){$.call(null,s||function(){return 1},1)})},P3=Ar.match(/firefox\/(\d+)/i),WD=!!P3&&+P3[1],HD=/MSIE|Trident/.test(Ar),D3=Ar.match(/AppleWebKit\/(\d+)\./),zD=!!D3&&+D3[1],KD=qr,x3=Rt,YD=bs,qD=Wo,L3=kp,XD=function(j,s){if(!delete j[s])throw UD("Cannot delete property "+w3(s)+" of "+w3(j))},k3=Nu,S2=st,JD=BD,QD=y2,$3=WD,ZD=HD,M3=eo,U3=zD,Zu=[],F3=x3(Zu.sort),ex=x3(Zu.push),tx=S2(function(){Zu.sort(void 0)}),rx=S2(function(){Zu.sort(null)}),ox=QD("sort"),j3=!S2(function(){if(M3)return M3<70;if(!($3&&$3>3)){if(ZD)return!0;if(U3)return U3<603;var j,s,$,_e,tt="";for(j=65;j<76;j++){switch(s=String.fromCharCode(j),j){case 66:case 69:case 70:case 72:$=3;break;case 68:case 71:$=4;break;default:$=2}for(_e=0;_e<47;_e++)Zu.push({k:s+_e,v:$})}for(Zu.sort(function(rt,it){return it.v-rt.v}),_e=0;_e<Zu.length;_e++)s=Zu[_e].k.charAt(0),tt.charAt(tt.length-1)!==s&&(tt+=s);return tt!=="DGBEFHACIJK"}});KD({target:"Array",proto:!0,forced:tx||!rx||!ox||!j3},{sort:function(j){j!==void 0&&YD(j);var s=qD(this);if(j3)return j===void 0?F3(s):F3(s,j);var $,_e,tt=[],rt=L3(s);for(_e=0;_e<rt;_e++)_e in s&&ex(tt,s[_e]);for(JD(tt,function(it){return function(at,ct){return ct===void 0?-1:at===void 0?1:it!==void 0?+it(at,ct)||0:k3(at)>k3(ct)?1:-1}}(j)),$=L3(tt),_e=0;_e<$;)s[_e]=tt[_e++];for(;_e<rt;)XD(s,_e++);return s}});var sx=Xu("Array").sort,ax=wt,cx=sx,T2=Array.prototype,R1=ot(function(j){var s=j.sort;return j===T2||ax(T2,j)&&s===T2.sort?cx:s}),dx=Zr,px=H0,hx=z0,fx=_d,gx=Rt([].concat),mx=dx("Reflect","ownKeys")||function(j){var s=px.f(fx(j)),$=hx.f;return $?gx(s,$(j)):s},V3=Is,Ex=mx,yx=Nn,Tx=Vl,vx=gr,bx=qu,B3=Error,Rx=Rt("".replace),Ax=String(B3("zxcasd").stack),G3=/\n\s*at [^:]*:[^\n]*/,Nx=G3.test(Ax),wx=or,Ox=!st(function(){var j=Error("a");return!("stack"in j)||(Object.defineProperty(j,"stack",wx(1,7)),j.stack!==7)}),Px=qu,Dx=function(j,s){if(Nx&&typeof j=="string"&&!B3.prepareStackTrace)for(;s--;)j=Rx(j,G3,"");return j},xx=Ox,W3=Error.captureStackTrace,Lx=Tm,kx=Po("iterator"),$x=Array.prototype,Mx=$p,H3=xp,Ux=Hr,Fx=Tm,jx=Po("iterator"),z3=function(j){if(!Ux(j))return H3(j,jx)||H3(j,"@@iterator")||Fx[Mx(j)]},Vx=_n,Bx=bs,Gx=_d,Wx=Iu,Hx=z3,zx=TypeError,Kx=_n,K3=_d,Yx=xp,qx=m1,Xx=_n,Jx=_d,Qx=Iu,Zx=function(j){return j!==void 0&&(Lx.Array===j||$x[kx]===j)},eL=kp,Y3=wt,tL=function(j,s){var $=arguments.length<2?Hx(j):s;if(Bx($))return Gx(Vx($,j));throw zx(Wx(j)+" is not iterable")},nL=z3,q3=function(j,s,$){var _e,tt;K3(j);try{if(!(_e=Yx(j,"return"))){if(s==="throw")throw $;return $}_e=Kx(_e,j)}catch(rt){tt=!0,_e=rt}if(s==="throw")throw $;if(tt)throw _e;return K3(_e),$},rL=TypeError,s_=function(j,s){this.stopped=j,this.result=s},X3=s_.prototype,I1=function(j,s,$){var _e,tt,rt,it,at,ct,dt,ut=$&&$.that,pt=!(!$||!$.AS_ENTRIES),mt=!(!$||!$.IS_RECORD),yt=!(!$||!$.IS_ITERATOR),At=!(!$||!$.INTERRUPTED),Ct=qx(s,ut),It=function(Vt){return _e&&q3(_e,"normal",Vt),new s_(!0,Vt)},kt=function(Vt){return pt?(Jx(Vt),At?Ct(Vt[0],Vt[1],It):Ct(Vt[0],Vt[1])):At?Ct(Vt,It):Ct(Vt)};if(mt)_e=j.iterator;else if(yt)_e=j;else{if(!(tt=nL(j)))throw rL(Qx(j)+" is not iterable");if(Zx(tt)){for(rt=0,it=eL(j);it>rt;rt++)if((at=kt(j[rt]))&&Y3(X3,at))return at;return new s_(!1)}_e=tL(j,tt)}for(ct=mt?j.next:_e.next;!(dt=Xx(ct,_e)).done;){try{at=kt(dt.value)}catch(Vt){q3(_e,"throw",Vt)}if(typeof at=="object"&&at&&Y3(X3,at))return at}return new s_(!1)},oL=Nu,iL=qr,sL=wt,aL=Xy,a_=G6,cL=function(j,s,$){for(var _e=Ex(s),tt=Tx.f,rt=yx.f,it=0;it<_e.length;it++){var at=_e[it];V3(j,at)||$&&V3($,at)||tt(j,at,rt(s,at))}},J3=W0,v2=qu,b2=or,lL=function(j,s){vx(s)&&"cause"in s&&bx(j,"cause",s.cause)},dL=function(j,s,$,_e){xx&&(W3?W3(j,s):Px(j,"stack",Dx($,_e)))},uL=I1,pL=function(j,s){return j===void 0?arguments.length<2?"":s:oL(j)},hL=Po("toStringTag"),c_=Error,fL=[].push,Cm=function(j,s){var $,_e=sL(I2,this);a_?$=a_(c_(),_e?aL(this):I2):($=_e?this:J3(I2),v2($,hL,"Error")),s!==void 0&&v2($,"message",pL(s)),dL($,Cm,$.stack,1),arguments.length>2&&lL($,arguments[2]);var tt=[];return uL(j,fL,{that:tt}),v2($,"errors",tt),$};a_?a_(Cm,c_):cL(Cm,c_,{name:!0});var I2=Cm.prototype=J3(c_.prototype,{constructor:b2(1,Cm),message:b2(1,""),name:b2(1,"AggregateError")});iL({global:!0,constructor:!0,arity:2},{AggregateError:Cm});var A1,bm,Q3,N2,N1=typeof process<"u"&&Kt(process)=="process",gL=Zr,mL=nR,_L=Rn,Z3=Po("species"),EL=wt,yL=TypeError,SL=MC,TL=Iu,vL=TypeError,eI=_d,CL=function(j){if(SL(j))return j;throw vL(TL(j)+" is not a constructor")},bL=Hr,RL=Po("species"),tI=function(j,s){var $,_e=eI(j).constructor;return _e===void 0||bL($=eI(_e)[RL])?s:CL($)},IL=TypeError,nI=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ar),El=Dt,AL=xt,NL=m1,rI=Sn,wL=Is,oI=st,iI=zC,OL=OR,sI=XE,PL=function(j,s){if(j<s)throw IL("Not enough arguments");return j},DL=nI,xL=N1,w2=El.setImmediate,O2=El.clearImmediate,LL=El.process,P2=El.Dispatch,kL=El.Function,aI=El.MessageChannel,$L=El.String,x2=0,w1={},cI="onreadystatechange";oI(function(){A1=El.location});var k2=function(j){if(wL(w1,j)){var s=w1[j];delete w1[j],s()}},M2=function(j){return function(){k2(j)}},lI=function(j){k2(j.data)},dI=function(j){El.postMessage($L(j),A1.protocol+"//"+A1.host)};w2&&O2||(w2=function(j){PL(arguments.length,1);var s=rI(j)?j:kL(j),$=OL(arguments,1);return w1[++x2]=function(){AL(s,void 0,$)},bm(x2),x2},O2=function(j){delete w1[j]},xL?bm=function(j){LL.nextTick(M2(j))}:P2&&P2.now?bm=function(j){P2.now(M2(j))}:aI&&!DL?(N2=(Q3=new aI).port2,Q3.port1.onmessage=lI,bm=NL(N2.postMessage,N2)):El.addEventListener&&rI(El.postMessage)&&!El.importScripts&&A1&&A1.protocol!=="file:"&&!oI(dI)?(bm=dI,El.addEventListener("message",lI,!1)):bm=cI in sI("script")?function(j){iI.appendChild(sI("script"))[cI]=function(){iI.removeChild(this),k2(j)}}:function(j){setTimeout(M2(j),0)});var uI={set:w2,clear:O2},pI=function(){this.head=null,this.tail=null};pI.prototype={add:function(j){var s={item:j,next:null},$=this.tail;$?$.next=s:this.head=s,this.tail=s},get:function(){var j=this.head;if(j)return(this.head=j.next)===null&&(this.tail=null),j.item}};var Rm,F2,B2,H2,hI,fI=pI,ML=/ipad|iphone|ipod/i.test(Ar)&&typeof Pebble<"u",UL=/web0s(?!.*chrome)/i.test(Ar),Vp=Dt,gI=m1,FL=Nn.f,z2=uI.set,jL=fI,VL=nI,BL=ML,GL=UL,Y2=N1,mI=Vp.MutationObserver||Vp.WebKitMutationObserver,_I=Vp.document,EI=Vp.process,l_=Vp.Promise,yI=FL(Vp,"queueMicrotask"),X2=yI&&yI.value;if(!X2){var d_=new jL,u_=function(){var j,s;for(Y2&&(j=EI.domain)&&j.exit();s=d_.get();)try{s()}catch($){throw d_.head&&Rm(),$}j&&j.enter()};VL||Y2||GL||!mI||!_I?!BL&&l_&&l_.resolve?((H2=l_.resolve(void 0)).constructor=l_,hI=gI(H2.then,H2),Rm=function(){hI(u_)}):Y2?Rm=function(){EI.nextTick(u_)}:(z2=gI(z2,Vp),Rm=function(){z2(u_)}):(F2=!0,B2=_I.createTextNode(""),new mI(u_).observe(B2,{characterData:!0}),Rm=function(){B2.data=F2=!F2}),X2=function(j){d_.head||Rm(),d_.add(j)}}var WL=X2,Im=function(j){try{return{error:!1,value:j()}}catch(s){return{error:!0,value:s}}},Bp=Dt.Promise,SI=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",HL=!SI&&!N1&&typeof window=="object"&&typeof document=="object",zL=Dt,O1=Bp,KL=Sn,YL=Pv,qL=DC,XL=Po,JL=HL,QL=SI,J2=eo,TI=O1&&O1.prototype,ZL=XL("species"),vI=!1,CI=KL(zL.PromiseRejectionEvent),e7=YL("Promise",function(){var j=qL(O1),s=j!==String(O1);if(!s&&J2===66||!TI.catch||!TI.finally)return!0;if(!J2||J2<51||!/native code/.test(j)){var $=new O1(function(tt){tt(1)}),_e=function(tt){tt(function(){},function(){})};if(($.constructor={})[ZL]=_e,!(vI=$.then(function(){})instanceof _e))return!0}return!s&&(JL||QL)&&!CI}),P1={CONSTRUCTOR:e7,REJECTION_EVENT:CI,SUBCLASSING:vI},du={},bI=bs,t7=TypeError,n7=function(j){var s,$;this.promise=new j(function(_e,tt){if(s!==void 0||$!==void 0)throw t7("Bad Promise constructor");s=_e,$=tt}),this.resolve=bI(s),this.reject=bI($)};du.f=function(j){return new n7(j)};var Q2,RI,r7=qr,p_=N1,ep=Dt,D1=_n,o7=E1,i7=_m,s7=function(j){var s=gL(j);_L&&s&&!s[Z3]&&mL(s,Z3,{configurable:!0,get:function(){return this}})},a7=bs,eS=Sn,c7=gr,l7=function(j,s){if(EL(s,j))return j;throw yL("Incorrect invocation")},d7=tI,II=uI.set,tS=WL,u7=function(j,s){try{arguments.length==1?console.error(j):console.error(j,s)}catch{}},p7=Im,h7=fI,AI=q0,nS=Bp,NI=P1,wI=du,h_="Promise",OI=NI.CONSTRUCTOR,f7=NI.REJECTION_EVENT,rS=AI.getterFor(h_),g7=AI.set,m7=nS&&nS.prototype,x1=nS,oS=m7,PI=ep.TypeError,iS=ep.document,sS=ep.process,aS=wI.f,_7=aS,E7=!!(iS&&iS.createEvent&&ep.dispatchEvent),DI="unhandledrejection",xI=function(j){var s;return!(!c7(j)||!eS(s=j.then))&&s},LI=function(j,s){var $,_e,tt,rt=s.value,it=s.state==1,at=it?j.ok:j.fail,ct=j.resolve,dt=j.reject,ut=j.domain;try{at?(it||(s.rejection===2&&S7(s),s.rejection=1),at===!0?$=rt:(ut&&ut.enter(),$=at(rt),ut&&(ut.exit(),tt=!0)),$===j.promise?dt(PI("Promise-chain cycle")):(_e=xI($))?D1(_e,$,ct,dt):ct($)):dt(rt)}catch(pt){ut&&!tt&&ut.exit(),dt(pt)}},kI=function(j,s){j.notified||(j.notified=!0,tS(function(){for(var $,_e=j.reactions;$=_e.get();)LI($,j);j.notified=!1,s&&!j.rejection&&y7(j)}))},$I=function(j,s,$){var _e,tt;E7?((_e=iS.createEvent("Event")).promise=s,_e.reason=$,_e.initEvent(j,!1,!0),ep.dispatchEvent(_e)):_e={promise:s,reason:$},!f7&&(tt=ep["on"+j])?tt(_e):j===DI&&u7("Unhandled promise rejection",$)},y7=function(j){D1(II,ep,function(){var s,$=j.facade,_e=j.value;if(MI(j)&&(s=p7(function(){p_?sS.emit("unhandledRejection",_e,$):$I(DI,$,_e)}),j.rejection=p_||MI(j)?2:1,s.error))throw s.value})},MI=function(j){return j.rejection!==1&&!j.parent},S7=function(j){D1(II,ep,function(){var s=j.facade;p_?sS.emit("rejectionHandled",s):$I("rejectionhandled",s,j.value)})},Am=function(j,s,$){return function(_e){j(s,_e,$)}},Nm=function(j,s,$){j.done||(j.done=!0,$&&(j=$),j.value=s,j.state=2,kI(j,!0))},cS=function(j,s,$){if(!j.done){j.done=!0,$&&(j=$);try{if(j.facade===s)throw PI("Promise can't be resolved itself");var _e=xI(s);_e?tS(function(){var tt={done:!1};try{D1(_e,s,Am(cS,tt,j),Am(Nm,tt,j))}catch(rt){Nm(tt,rt,j)}}):(j.value=s,j.state=1,kI(j,!1))}catch(tt){Nm({done:!1},tt,j)}}};OI&&(oS=(x1=function(j){l7(this,oS),a7(j),D1(Q2,this);var s=rS(this);try{j(Am(cS,s),Am(Nm,s))}catch($){Nm(s,$)}}).prototype,(Q2=function(j){g7(this,{type:h_,done:!1,notified:!1,parent:!1,reactions:new h7,rejection:!1,state:0,value:void 0})}).prototype=o7(oS,"then",function(j,s){var $=rS(this),_e=aS(d7(this,x1));return $.parent=!0,_e.ok=!eS(j)||j,_e.fail=eS(s)&&s,_e.domain=p_?sS.domain:void 0,$.state==0?$.reactions.add(_e):tS(function(){LI(_e,$)}),_e.promise}),RI=function(){var j=new Q2,s=rS(j);this.promise=j,this.resolve=Am(cS,s),this.reject=Am(Nm,s)},wI.f=aS=function(j){return j===x1||j===void 0?new RI(j):_7(j)}),r7({global:!0,constructor:!0,wrap:!0,forced:OI},{Promise:x1}),i7(x1,h_,!1,!0),s7(h_);var UI=Po("iterator"),FI=!1;try{var T7=0,jI={next:function(){return{done:!!T7++}},return:function(){FI=!0}};jI[UI]=function(){return this},Array.from(jI,function(){throw 2})}catch{}var v7=Bp,C7=function(j,s){if(!s&&!FI)return!1;var $=!1;try{var _e={};_e[UI]=function(){return{next:function(){return{done:$=!0}}}},j(_e)}catch{}return $},f_=P1.CONSTRUCTOR||!C7(function(j){v7.all(j).then(void 0,function(){})}),b7=_n,R7=bs,I7=du,A7=Im,N7=I1;qr({target:"Promise",stat:!0,forced:f_},{all:function(j){var s=this,$=I7.f(s),_e=$.resolve,tt=$.reject,rt=A7(function(){var it=R7(s.resolve),at=[],ct=0,dt=1;N7(j,function(ut){var pt=ct++,mt=!1;dt++,b7(it,s,ut).then(function(yt){mt||(mt=!0,at[pt]=yt,--dt||_e(at))},tt)}),--dt||_e(at)});return rt.error&&tt(rt.value),$.promise}});var w7=qr,O7=P1.CONSTRUCTOR;Bp&&Bp.prototype,w7({target:"Promise",proto:!0,forced:O7,real:!0},{catch:function(j){return this.then(void 0,j)}});var P7=_n,D7=bs,x7=du,L7=Im,k7=I1;qr({target:"Promise",stat:!0,forced:f_},{race:function(j){var s=this,$=x7.f(s),_e=$.reject,tt=L7(function(){var rt=D7(s.resolve);k7(j,function(it){P7(rt,s,it).then($.resolve,_e)})});return tt.error&&_e(tt.value),$.promise}});var $7=_n,M7=du;qr({target:"Promise",stat:!0,forced:P1.CONSTRUCTOR},{reject:function(j){var s=M7.f(this);return $7(s.reject,void 0,j),s.promise}});var U7=_d,F7=gr,j7=du,VI=function(j,s){if(U7(j),F7(s)&&s.constructor===j)return s;var $=j7.f(j);return(0,$.resolve)(s),$.promise},V7=qr,B7=Bp,G7=P1.CONSTRUCTOR,W7=VI,H7=Zr("Promise"),z7=!G7;V7({target:"Promise",stat:!0,forced:!0},{resolve:function(j){return W7(z7&&this===H7?B7:this,j)}});var K7=_n,Y7=bs,q7=du,X7=Im,J7=I1;qr({target:"Promise",stat:!0,forced:f_},{allSettled:function(j){var s=this,$=q7.f(s),_e=$.resolve,tt=$.reject,rt=X7(function(){var it=Y7(s.resolve),at=[],ct=0,dt=1;J7(j,function(ut){var pt=ct++,mt=!1;dt++,K7(it,s,ut).then(function(yt){mt||(mt=!0,at[pt]={status:"fulfilled",value:yt},--dt||_e(at))},function(yt){mt||(mt=!0,at[pt]={status:"rejected",reason:yt},--dt||_e(at))})}),--dt||_e(at)});return rt.error&&tt(rt.value),$.promise}});var Q7=_n,Z7=bs,_k=Zr,e$=du,t$=Im,n$=I1,BI="No one promise resolved";qr({target:"Promise",stat:!0,forced:f_},{any:function(j){var s=this,$=_k("AggregateError"),_e=e$.f(s),tt=_e.resolve,rt=_e.reject,it=t$(function(){var at=Z7(s.resolve),ct=[],dt=0,ut=1,pt=!1;n$(j,function(mt){var yt=dt++,At=!1;ut++,Q7(at,s,mt).then(function(Ct){At||pt||(pt=!0,tt(Ct))},function(Ct){At||pt||(At=!0,ct[yt]=Ct,--ut||rt(new $(ct,BI)))})}),--ut||rt(new $(ct,BI))});return it.error&&rt(it.value),_e.promise}});var r$=qr,lS=Bp,o$=st,i$=Zr,s$=Sn,a$=tI,GI=VI,c$=lS&&lS.prototype;r$({target:"Promise",proto:!0,real:!0,forced:!!lS&&o$(function(){c$.finally.call({then:function(){}},function(){})})},{finally:function(j){var s=a$(this,i$("Promise")),$=s$(j);return this.then($?function(_e){return GI(s,j()).then(function(){return _e})}:j,$?function(_e){return GI(s,j()).then(function(){throw _e})}:j)}});var WI=go.Promise,Jt=ot(WI);let l$=()=>{};function L1(){let j={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:l$};return j.promise=new Jt((s,$)=>{j.resolve=_e=>{j.isFinished||(j.isResolved=!0,j.isFinished=!0,s(_e),j.value=_e)},j.reject=_e=>{j.isFinished||(j.isRejected=!0,j.isFinished=!0,$(_e))}}),j}let g_=new Map,m_=new Map,uu=new Map;var To,lr;(function(j){j.WIN_10="Windows 10",j.WIN_81="Windows 8.1",j.WIN_8="Windows 8",j.WIN_7="Windows 7",j.WIN_VISTA="Windows Vista",j.WIN_SERVER_2003="Windows Server 2003",j.WIN_XP="Windows XP",j.WIN_2000="Windows 2000",j.ANDROID="Android",j.HARMONY_OS="HarmonyOS",j.OPEN_BSD="Open BSD",j.SUN_OS="Sun OS",j.LINUX="Linux",j.IOS="iOS",j.MAC_OS="Mac OS",j.CHROMIUM_OS="Chromium OS",j.QNX="QNX",j.UNIX="UNIX",j.BEOS="BeOS",j.OS_2="OS/2",j.SEARCH_BOT="Search Bot"})(To||(To={})),function(j){j.CHROME="Chrome",j.SAFARI="Safari",j.EDGE="Edge",j.FIREFOX="Firefox",j.OPERA="OPR",j.QQ="QQBrowser",j.WECHAT="MicroMessenger"}(lr||(lr={}));var dS={exports:{}};(function(j,s){(function($,_e){var tt="function",rt="undefined",it="object",at="string",ct="major",dt="model",ut="name",pt="type",mt="vendor",yt="version",At="architecture",Ct="console",It="mobile",kt="tablet",Vt="smarttv",Bt="wearable",en="embedded",zt="Amazon",Yt="Apple",Qt="ASUS",Xt="BlackBerry",cn="Browser",hn="Chrome",Mn="Firefox",Gn="Google",Or="Huawei",Eo="LG",$r="Microsoft",Vs="Motorola",sn="Opera",fn="Samsung",Tn="Sharp",Fn="Sony",sr="Xiaomi",mn="Zebra",Tt="Facebook",Mt="Chromium OS",Gt="Mac OS",pn=function(oo){for(var yo={},Mr=0;Mr<oo.length;Mr++)yo[oo[Mr].toUpperCase()]=oo[Mr];return yo},jn=function(oo,yo){return typeof oo===at&&Vr(yo).indexOf(Vr(oo))!==-1},Vr=function(oo){return oo.toLowerCase()},Qo=function(oo,yo){if(typeof oo===at)return oo=oo.replace(/^\s\s*/,""),typeof yo===rt?oo:oo.substring(0,350)},Bs=function(oo,yo){for(var Mr,Gs,Ru,io,ar,ks,Op=0;Op<yo.length&&!ar;){var cu=yo[Op],JO=yo[Op+1];for(Mr=Gs=0;Mr<cu.length&&!ar&&cu[Mr];)if(ar=cu[Mr++].exec(oo))for(Ru=0;Ru<JO.length;Ru++)ks=ar[++Gs],typeof(io=JO[Ru])===it&&io.length>0?io.length===2?typeof io[1]==tt?this[io[0]]=io[1].call(this,ks):this[io[0]]=io[1]:io.length===3?typeof io[1]!==tt||io[1].exec&&io[1].test?this[io[0]]=ks?ks.replace(io[1],io[2]):_e:this[io[0]]=ks?io[1].call(this,ks,io[2]):_e:io.length===4&&(this[io[0]]=ks?io[3].call(this,ks.replace(io[1],io[2])):_e):this[io]=ks||_e;Op+=2}},Hu=function(oo,yo){for(var Mr in yo)if(typeof yo[Mr]===it&&yo[Mr].length>0){for(var Gs=0;Gs<yo[Mr].length;Gs++)if(jn(yo[Mr][Gs],oo))return Mr==="?"?_e:Mr}else if(jn(yo[Mr],oo))return Mr==="?"?_e:Mr;return oo},FE={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},jE={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[yt,[ut,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[yt,[ut,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ut,yt],[/opios[\/ ]+([\w\.]+)/i],[yt,[ut,sn+" Mini"]],[/\bopr\/([\w\.]+)/i],[yt,[ut,sn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[ut,yt],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[yt,[ut,"UC"+cn]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[yt,[ut,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[yt,[ut,"WeChat"]],[/konqueror\/([\w\.]+)/i],[yt,[ut,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[yt,[ut,"IE"]],[/yabrowser\/([\w\.]+)/i],[yt,[ut,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[ut,/(.+)/,"$1 Secure "+cn],yt],[/\bfocus\/([\w\.]+)/i],[yt,[ut,Mn+" Focus"]],[/\bopt\/([\w\.]+)/i],[yt,[ut,sn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[yt,[ut,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[yt,[ut,"Dolphin"]],[/coast\/([\w\.]+)/i],[yt,[ut,sn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[yt,[ut,"MIUI "+cn]],[/fxios\/([-\w\.]+)/i],[yt,[ut,Mn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ut,"360 "+cn]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[ut,/(.+)/,"$1 "+cn],yt],[/(comodo_dragon)\/([\w\.]+)/i],[[ut,/_/g," "],yt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[ut,yt],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[ut],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ut,Tt],yt],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[ut,yt],[/\bgsa\/([\w\.]+) .*safari\//i],[yt,[ut,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[yt,[ut,hn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ut,hn+" WebView"],yt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[yt,[ut,"Android "+cn]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ut,yt],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[yt,[ut,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[yt,ut],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ut,[yt,Hu,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[ut,yt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ut,"Netscape"],yt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[yt,[ut,Mn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[ut,yt],[/(cobalt)\/([\w\.]+)/i],[ut,[yt,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[At,"amd64"]],[/(ia32(?=;))/i],[[At,Vr]],[/((?:i[346]|x)86)[;\)]/i],[[At,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[At,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[At,"armhf"]],[/windows (ce|mobile); ppc;/i],[[At,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[At,/ower/,"",Vr]],[/(sun4\w)[;\)]/i],[[At,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[At,Vr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[dt,[mt,fn],[pt,kt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[dt,[mt,fn],[pt,It]],[/\((ip(?:hone|od)[\w ]*);/i],[dt,[mt,Yt],[pt,It]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[dt,[mt,Yt],[pt,kt]],[/(macintosh);/i],[dt,[mt,Yt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[dt,[mt,Tn],[pt,It]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[dt,[mt,Or],[pt,kt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[dt,[mt,Or],[pt,It]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[dt,/_/g," "],[mt,sr],[pt,It]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[dt,/_/g," "],[mt,sr],[pt,kt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[dt,[mt,"OPPO"],[pt,It]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[dt,[mt,"Vivo"],[pt,It]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[dt,[mt,"Realme"],[pt,It]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[dt,[mt,Vs],[pt,It]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[dt,[mt,Vs],[pt,kt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[dt,[mt,Eo],[pt,kt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[dt,[mt,Eo],[pt,It]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[dt,[mt,"Lenovo"],[pt,kt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[dt,/_/g," "],[mt,"Nokia"],[pt,It]],[/(pixel c)\b/i],[dt,[mt,Gn],[pt,kt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[dt,[mt,Gn],[pt,It]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[dt,[mt,Fn],[pt,It]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[dt,"Xperia Tablet"],[mt,Fn],[pt,kt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[dt,[mt,"OnePlus"],[pt,It]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[dt,[mt,zt],[pt,kt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[dt,/(.+)/g,"Fire Phone $1"],[mt,zt],[pt,It]],[/(playbook);[-\w\),; ]+(rim)/i],[dt,mt,[pt,kt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[dt,[mt,Xt],[pt,It]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[dt,[mt,Qt],[pt,kt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[dt,[mt,Qt],[pt,It]],[/(nexus 9)/i],[dt,[mt,"HTC"],[pt,kt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[mt,[dt,/_/g," "],[pt,It]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[dt,[mt,"Acer"],[pt,kt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[dt,[mt,"Meizu"],[pt,It]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[mt,dt,[pt,It]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[mt,dt,[pt,kt]],[/(surface duo)/i],[dt,[mt,$r],[pt,kt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[dt,[mt,"Fairphone"],[pt,It]],[/(u304aa)/i],[dt,[mt,"AT&T"],[pt,It]],[/\bsie-(\w*)/i],[dt,[mt,"Siemens"],[pt,It]],[/\b(rct\w+) b/i],[dt,[mt,"RCA"],[pt,kt]],[/\b(venue[\d ]{2,7}) b/i],[dt,[mt,"Dell"],[pt,kt]],[/\b(q(?:mv|ta)\w+) b/i],[dt,[mt,"Verizon"],[pt,kt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[dt,[mt,"Barnes & Noble"],[pt,kt]],[/\b(tm\d{3}\w+) b/i],[dt,[mt,"NuVision"],[pt,kt]],[/\b(k88) b/i],[dt,[mt,"ZTE"],[pt,kt]],[/\b(nx\d{3}j) b/i],[dt,[mt,"ZTE"],[pt,It]],[/\b(gen\d{3}) b.+49h/i],[dt,[mt,"Swiss"],[pt,It]],[/\b(zur\d{3}) b/i],[dt,[mt,"Swiss"],[pt,kt]],[/\b((zeki)?tb.*\b) b/i],[dt,[mt,"Zeki"],[pt,kt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[mt,"Dragon Touch"],dt,[pt,kt]],[/\b(ns-?\w{0,9}) b/i],[dt,[mt,"Insignia"],[pt,kt]],[/\b((nxa|next)-?\w{0,9}) b/i],[dt,[mt,"NextBook"],[pt,kt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[mt,"Voice"],dt,[pt,It]],[/\b(lvtel\-)?(v1[12]) b/i],[[mt,"LvTel"],dt,[pt,It]],[/\b(ph-1) /i],[dt,[mt,"Essential"],[pt,It]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[dt,[mt,"Envizen"],[pt,kt]],[/\b(trio[-\w\. ]+) b/i],[dt,[mt,"MachSpeed"],[pt,kt]],[/\btu_(1491) b/i],[dt,[mt,"Rotor"],[pt,kt]],[/(shield[\w ]+) b/i],[dt,[mt,"Nvidia"],[pt,kt]],[/(sprint) (\w+)/i],[mt,dt,[pt,It]],[/(kin\.[onetw]{3})/i],[[dt,/\./g," "],[mt,$r],[pt,It]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[dt,[mt,mn],[pt,kt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[dt,[mt,mn],[pt,It]],[/smart-tv.+(samsung)/i],[mt,[pt,Vt]],[/hbbtv.+maple;(\d+)/i],[[dt,/^/,"SmartTV"],[mt,fn],[pt,Vt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[mt,Eo],[pt,Vt]],[/(apple) ?tv/i],[mt,[dt,Yt+" TV"],[pt,Vt]],[/crkey/i],[[dt,hn+"cast"],[mt,Gn],[pt,Vt]],[/droid.+aft(\w)( bui|\))/i],[dt,[mt,zt],[pt,Vt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[dt,[mt,Tn],[pt,Vt]],[/(bravia[\w ]+)( bui|\))/i],[dt,[mt,Fn],[pt,Vt]],[/(mitv-\w{5}) bui/i],[dt,[mt,sr],[pt,Vt]],[/Hbbtv.*(technisat) (.*);/i],[mt,dt,[pt,Vt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[mt,Qo],[dt,Qo],[pt,Vt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,Vt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[mt,dt,[pt,Ct]],[/droid.+; (shield) bui/i],[dt,[mt,"Nvidia"],[pt,Ct]],[/(playstation [345portablevi]+)/i],[dt,[mt,Fn],[pt,Ct]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[dt,[mt,$r],[pt,Ct]],[/((pebble))app/i],[mt,dt,[pt,Bt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[dt,[mt,Yt],[pt,Bt]],[/droid.+; (glass) \d/i],[dt,[mt,Gn],[pt,Bt]],[/droid.+; (wt63?0{2,3})\)/i],[dt,[mt,mn],[pt,Bt]],[/(quest( 2| pro)?)/i],[dt,[mt,Tt],[pt,Bt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[mt,[pt,en]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[dt,[pt,It]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[dt,[pt,kt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,kt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,It]],[/(android[-\w\. ]{0,9});.+buil/i],[dt,[mt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[yt,[ut,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[yt,[ut,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[ut,yt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[yt,ut]],os:[[/microsoft (windows) (vista|xp)/i],[ut,yt],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[ut,[yt,Hu,FE]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[ut,"Windows"],[yt,Hu,FE]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[yt,/_/g,"."],[ut,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ut,Gt],[yt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[yt,ut],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ut,yt],[/\(bb(10);/i],[yt,[ut,Xt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[yt,[ut,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[yt,[ut,Mn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[yt,[ut,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[yt,[ut,"watchOS"]],[/crkey\/([\d\.]+)/i],[yt,[ut,hn+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[ut,Mt],yt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ut,yt],[/(sunos) ?([\w\.\d]*)/i],[[ut,"Solaris"],yt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[ut,yt]]},Ml=function(oo,yo){if(typeof oo===it&&(yo=oo,oo=_e),!(this instanceof Ml))return new Ml(oo,yo).getResult();var Mr=typeof $!==rt&&$.navigator?$.navigator:_e,Gs=oo||(Mr&&Mr.userAgent?Mr.userAgent:""),Ru=Mr&&Mr.userAgentData?Mr.userAgentData:_e,io=yo?function(ar,ks){var Op={};for(var cu in ar)ks[cu]&&ks[cu].length%2==0?Op[cu]=ks[cu].concat(ar[cu]):Op[cu]=ar[cu];return Op}(jE,yo):jE;return this.getBrowser=function(){var ar={};return ar[ut]=_e,ar[yt]=_e,Bs.call(ar,Gs,io.browser),ar[ct]=function(ks){return typeof ks===at?ks.replace(/[^\d\.]/g,"").split(".")[0]:_e}(ar[yt]),Mr&&Mr.brave&&typeof Mr.brave.isBrave==tt&&(ar[ut]="Brave"),ar},this.getCPU=function(){var ar={};return ar[At]=_e,Bs.call(ar,Gs,io.cpu),ar},this.getDevice=function(){var ar={};return ar[mt]=_e,ar[dt]=_e,ar[pt]=_e,Bs.call(ar,Gs,io.device),!ar[pt]&&Ru&&Ru.mobile&&(ar[pt]=It),ar[dt]=="Macintosh"&&Mr&&typeof Mr.standalone!==rt&&Mr.maxTouchPoints&&Mr.maxTouchPoints>2&&(ar[dt]="iPad",ar[pt]=kt),ar},this.getEngine=function(){var ar={};return ar[ut]=_e,ar[yt]=_e,Bs.call(ar,Gs,io.engine),ar},this.getOS=function(){var ar={};return ar[ut]=_e,ar[yt]=_e,Bs.call(ar,Gs,io.os),!ar[ut]&&Ru&&Ru.platform!="Unknown"&&(ar[ut]=Ru.platform.replace(/chrome os/i,Mt).replace(/macos/i,Gt)),ar},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Gs},this.setUA=function(ar){return Gs=typeof ar===at&&ar.length>350?Qo(ar,350):ar,this},this.setUA(Gs),this};Ml.VERSION="0.7.34",Ml.BROWSER=pn([ut,yt,ct]),Ml.CPU=pn([At]),Ml.DEVICE=pn([dt,mt,pt,Ct,It,Vt,kt,Bt,en]),Ml.ENGINE=Ml.OS=pn([ut,yt]),j.exports&&(s=j.exports=Ml),s.UAParser=Ml;var wp=typeof $!==rt&&($.jQuery||$.Zepto);if(wp&&!wp.ua){var l1=new Ml;wp.ua=l1.getResult(),wp.ua.get=function(){return l1.getUA()},wp.ua.set=function(oo){l1.setUA(oo);var yo=l1.getResult();for(var Mr in yo)wp.ua[Mr]=yo[Mr]}}})(typeof window=="object"?window:nt)})(dS,dS.exports);let uS=new(ot(dS.exports)),Ou=uS.getResult(),pS=null;function ir(j){if(!pS){j&&uS.setUA(j),Ou=uS.getResult();let s=function(rt){if(rt.engine.name==="Blink"&&rt.browser.name!=="WeChat")return lr.CHROME;switch(rt.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return lr.CHROME;case"Safari":case"Mobile Safari":return lr.SAFARI;case"Edge":return lr.EDGE;case"Firefox":return lr.FIREFOX;case"QQBrowser":return lr.QQ;case"Opera":return lr.OPERA;case"WeChat":return lr.WECHAT;default:return rt.browser.name||""}}(Ou),$=function(rt){let it;return it=rt.engine.name==="Blink"?rt.engine.version||"":rt.browser.version||"",it.split(".")[0]}(Ou),_e=function(rt){return rt.os.name==="Windows"?rt.os.version?rt.os.name+" "+rt.os.version:rt.os.name:rt.os.name||""}(Ou),tt=Ou.os.version;if(!(s&&$&&_e&&tt))return{name:s,version:$,os:_e,osVersion:tt};pS={name:s,version:$,os:_e,osVersion:tt}}return pS}function __(){return ir().os}function HI(){let j=ir();return"".concat(j.os," ").concat(j.osVersion)}function E_(){let j=ir();return!!(Ou.engine.name==="WebKit"&&j.os===To.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&j.name!==lr.SAFARI||ds()&&j.name!==lr.SAFARI)}function d$(){let j=ir();if(E_()){if(j.os===To.MAC_OS)return!0;if(j.os===To.IOS){let s=Ou.os.version&&Ou.os.version.split(".");if(s&&Number(s[0])===14&&s[1]&&Number(s[1])>=3||s&&Number(s[0])>14)return!0}}return!1}function u$(){return Ou.engine.name==="WebKit"}function k1(){return ir().name===lr.CHROME}function ls(){return ir().name===lr.SAFARI}function br(){return ir().name===lr.FIREFOX}function ds(){return ir().os===To.IOS}function hS(j){let s=ir();return!(s.name!==lr.CHROME||!s.osVersion)&&Number(s.version)>=j}function zI(j){let s=ir();return!(s.name!==lr.EDGE||!s.osVersion)&&Number(s.version)>=j}function KI(j){let s=ir();return!(s.name!==lr.OPERA||!s.osVersion)&&Number(s.version)>=j}function YI(){let j=ir();return!(j.name!==lr.CHROME||!j.osVersion)&&Number(j.version)<=90}function qI(){let j=ir();if(j.os!==To.IOS||!j.osVersion)return!1;let s=j.osVersion.split(".");return Number(s[0])<14||Number(s[0])===14&&Number(s[1])<=6}function wm(){let j=ir();if(j.os!==To.IOS||!j.osVersion)return!1;let s=j.osVersion.split(".");return Number(s[0])===15}function fS(){let j=ir();if(j.os!==To.IOS||!j.osVersion)return!1;let s=j.osVersion.split(".");return Number(s[0])===16}function XI(){let j=ir();if(j.os!==To.IOS||!j.osVersion)return!1;let s=j.osVersion.split(".");return Number(s[0])===15&&Number(s[1])>=1}function pu(){return ls()&&navigator.maxTouchPoints>0}function JI(){return ir().name===lr.WECHAT}function QI(){return window.navigator.appVersion&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)!==null&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function tp(){let j=ir();return j.name===lr.EDGE||j.name===lr.SAFARI?!1:!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function y_(){return __()===To.ANDROID}function $1(){let j=ir();return y_()&&(j.name===lr.CHROME||j.name===lr.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}var Nt;(function(j){j.UNEXPECTED_ERROR="UNEXPECTED_ERROR",j.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",j.TIMEOUT="TIMEOUT",j.INVALID_PARAMS="INVALID_PARAMS",j.NOT_READABLE="NOT_READABLE",j.NOT_SUPPORTED="NOT_SUPPORTED",j.INVALID_OPERATION="INVALID_OPERATION",j.OPERATION_ABORTED="OPERATION_ABORTED",j.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",j.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",j.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",j.DATACHANNEL_FAILED="DATACHANNEL_FAILED",j.NETWORK_ERROR="NETWORK_ERROR",j.NETWORK_TIMEOUT="NETWORK_TIMEOUT",j.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",j.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",j.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",j.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",j.ELECTRON_IS_NULL="ELECTRON_IS_NULL",j.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",j.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",j.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",j.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",j.PERMISSION_DENIED="PERMISSION_DENIED",j.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",j.TRACK_IS_DISABLED="TRACK_IS_DISABLED",j.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",j.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",j.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",j.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",j.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",j.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",j.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",j.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",j.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",j.UID_CONFLICT="UID_CONFLICT",j.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",j.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",j.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",j.INVALID_TRACK="INVALID_TRACK",j.SENDER_NOT_FOUND="SENDER_NOT_FOUND",j.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",j.SET_ANSWER_FAILED="SET_ANSWER_FAILED",j.ICE_FAILED="ICE_FAILED",j.PC_CLOSED="PC_CLOSED",j.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",j.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",j.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",j.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",j.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",j.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",j.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",j.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",j.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",j.INVALID_REMOTE_USER="INVALID_REMOTE_USER",j.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",j.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",j.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",j.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",j.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",j.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",j.WS_ABORT="WS_ABORT",j.WS_DISCONNECT="WS_DISCONNECT",j.WS_ERR="WS_ERR",j.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",j.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",j.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",j.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",j.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",j.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",j.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",j.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",j.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",j.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",j.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",j.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",j.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",j.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",j.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",j.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",j.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",j.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",j.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",j.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",j.INVALID_PLUGIN="INVALID_PLUGIN",j.DISCONNECT_P2P="DISCONNECT_P2P",j.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",j.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",j.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",j.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",j.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",j.PROHIBITED_OPERATION="PROHIBITED_OPERATION",j.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",j.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED"})(Nt||(Nt={}));let rn=class extends Error{constructor(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",$=arguments.length>2?arguments[2]:void 0;super(s),gt(this,"code",void 0),gt(this,"message",void 0),gt(this,"data",void 0),gt(this,"name","AgoraRTCException"),this.code=j,this.message="AgoraRTCError ".concat(this.code,": ").concat(s),this.data=$}toString(){return this.data?"data: ".concat(JSON.stringify(this.data),`
`).concat(this.stack):"".concat(this.stack)}print(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error",s=arguments.length>1?arguments[1]:void 0;return j==="error"&&(s||console).error(this.toString()),j==="warning"&&(s||console).warn(this.toString()),this}throw(j){throw this.print("error",j),this}};function np(j,s){if(typeof j!="boolean")throw new rn(Nt.INVALID_PARAMS,"Invalid ".concat(s,": The value is of the boolean type."))}function vo(j,s,$){if(!vn($).call($,j))throw new rn(Nt.INVALID_PARAMS,"".concat(s," can only be set as ").concat(JSON.stringify($)))}function Sr(j,s){let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e4;if(j<$||j>_e||(!(arguments.length>4&&arguments[4]!==void 0)||arguments[4])&&!function(tt){return typeof tt=="number"&&tt%1==0}(j))throw new rn(Nt.INVALID_PARAMS,"invalid ".concat(s,": the value range is [").concat($,", ").concat(_e,"]. integer only"))}function gS(j,s){if(typeof j!="number"){if(!(j.min||j.max||j.ideal||j.exact))throw new rn(Nt.INVALID_PARAMS,"".concat(s," is not a valid ConstrainLong"));j.min!==void 0&&Sr(j.min,"".concat(s,".min"),0,1/0),j.max!==void 0&&Sr(j.max,"".concat(s,".max"),1,1/0),j.exact!==void 0&&Sr(j.exact,"".concat(s,".exact"),1,1/0),j.ideal!==void 0&&Sr(j.ideal,"".concat(s,".ideal"),1,1/0)}else Sr(j,s,1,1/0)}function zo(j,s){let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,tt=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(j==null)throw new rn(Nt.INVALID_PARAMS,"".concat(s||"param"," cannot be empty"));if(!ZI(j,$,_e,tt))throw new rn(Nt.INVALID_PARAMS,"Invalid ".concat(s||"string param",": Length of the string: [").concat($,",").concat(_e,"].").concat(tt?" ASCII characters only.":""))}function Pu(j,s){if(!Array.isArray(j))throw new rn(Nt.INVALID_PARAMS,"".concat(s," should be an array"))}function Gr(j){return j==null}function ZI(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:255,_e=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return typeof j=="string"&&j.length<=$&&j.length>=s&&(!_e||function(tt){if(typeof tt!="string")return!1;for(let rt=0;rt<tt.length;rt+=1){let it=tt.charCodeAt(rt);if(it<0||it>255)return!1}return!0}(j))}function eA(j,s,$){if("getBigUint64"in DataView.prototype)return j.getBigUint64(s,$);let _e=j.getUint32(s,$),tt=j.getUint32(s+4,$),rt=+!!$,it=+!$;return BigInt(_e*it+tt*rt)<<BigInt(32)|BigInt(_e*rt+tt*it)}function tA(j,s,$,_e){if("setBigUint64"in DataView.prototype)return j.setBigUint64(s,$,_e);let tt=Number($>>BigInt(32)),rt=Number($&BigInt(4294967295));_e?(j.setUint32(s+4,tt,_e),j.setUint32(s,rt,_e)):(j.setUint32(s,tt,_e),j.setUint32(s+4,rt,_e))}var Om,S_;(function(j){j.COVERED="COVERED",j.POSITION="POSITION",j.SIZE="SIZE",j.STYLE="STYLE"})(Om||(Om={})),function(j){j.UNMOUNTED="UNMOUNTED",j.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(S_||(S_={}));let nA=new class{constructor(){gt(this,"_clientSize",null),gt(this,"getClientWidth",()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth),gt(this,"getClientHeight",()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight),gt(this,"getStyle",j=>window.getComputedStyle(j,null)),gt(this,"checkCssVisibleProperty",j=>{var s;let $=!0,_e=this.getStyle(j),{display:tt,visibility:rt,opacity:it,filter:at}=_e;return(tt==="none"||vn(s=["hidden","collapse"]).call(s,rt)||Number(it)<.1)&&($=!1),$?(at&&at.split(" ").filter(ct=>{var dt;let ut=ct.split("(")[0];return vn(dt=["brightness","blur","opacity"]).call(dt,ut)}).map(ct=>{let[dt,ut]=ct.split(/\(|\)/);return[dt,Number(ut.match(/^[0-9\.]+/))]}).forEach(ct=>{let[dt,ut]=ct;switch(dt){case"brightness":(ut<.1||ut>3)&&($=!1);break;case"blur":ut>3&&($=!1);break;case"opacity":ut<.1&&($=!1)}}),$):!1}),gt(this,"checkPropertyUpToAllParentNodes",(j,s)=>{let $=!0,_e=!0,tt=it=>s(it),rt=j;for(;rt&&_e;)tt(rt)||($=!1,_e=!1),rt=rt.parentElement,rt||(_e=!1);return $}),gt(this,"checkActualCssVisibleIncludeInherit",j=>this.checkPropertyUpToAllParentNodes(j,this.checkCssVisibleProperty)),gt(this,"getSizeAboutClient",j=>{let{width:s,height:$,left:_e,right:tt,top:rt,bottom:it}=j.getBoundingClientRect(),at=this.getClientWidth(),ct=this.getClientHeight();return{width:s,height:$,left:_e,right:tt,top:rt,bottom:it,clientWidth:at,clientHeight:ct,clientMin:Math.min(at,ct)}}),gt(this,"checkActualSize",()=>{let{width:j,height:s,clientMin:$}=this._clientSize;return this.checkSizeIsVisible(j,s,$)}),gt(this,"elementFromPoint",(j,s)=>document.elementFromPoint?document.elementFromPoint(j,s):null),gt(this,"checkCoverForAPoint",(j,s,$)=>{let _e=this.elementFromPoint(j,s);return _e!==null&&_e!==$}),gt(this,"getPointPositionList",()=>{let{width:j,height:s,left:$,top:_e}=this._clientSize,tt=j/6,rt=s/6,it=[],at=10**6;for(let ct=0;ct<5;ct++)for(let dt=0;dt<5;dt++){let ut=($*at+(ct===0?.1:ct===4?(tt*ct*at-1e5)/at:tt*ct)*at)/at,pt=(_e*at+(dt===0?.1:dt===4?(rt*dt*at-1e5)/at:rt*dt)*at)/at;it.push({x:ut,y:pt})}return[...it]}),gt(this,"checkElementCover",j=>this.getPointPositionList().map(s=>this.checkCoverForAPoint(s.x,s.y,j)).filter(s=>!!s).length>6),gt(this,"checkSizeIsVisible",(j,s,$)=>(j>50||$/j<=10)&&(s>50||$/s<=10)),gt(this,"checkSizeOfPartInClient",()=>{let{left:j,right:s,top:$,bottom:_e,clientHeight:tt,clientWidth:rt,clientMin:it}=this._clientSize,at,ct,dt,ut;if(j<0)at=0;else{if(!(j<rt))return!1;at=j}if(s<0)return!1;if(ct=s<rt?s:rt,$<0)dt=0;else{if(!($<tt))return!1;dt=$}if(_e<0)return!1;ut=_e<tt?_e:tt;let pt=ct-at,mt=ut-dt;return this.checkSizeIsVisible(pt,mt,it)}),gt(this,"returnHiddenResult",j=>(this._clientSize=null,{visible:!1,reason:j})),gt(this,"checkOneElementVisible",j=>{if(j instanceof HTMLElement){if(this.checkElementIsMountedOnDom(j)){if(this.checkActualCssVisibleIncludeInherit(j)){if(this._clientSize=this.getSizeAboutClient(j),this.checkElementCover(j))return this.returnHiddenResult(Om.COVERED);{let s=this.checkActualSize(),$=this.checkSizeOfPartInClient();return s&&!$?this.returnHiddenResult(Om.POSITION):s?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Om.SIZE)}}return this.returnHiddenResult(Om.STYLE)}return this.returnHiddenResult(S_.UNMOUNTED)}return this.returnHiddenResult(S_.INVALID_HTML_ELEMENT)}),gt(this,"checkElementIsMountedOnDom",j=>this.checkPropertyUpToAllParentNodes(j,s=>s.nodeName.toUpperCase()!=="HTML"?s.parentElement!==null:!!document.documentElement))}};function mS(j){return new TextEncoder().encode(j)}let rA=function(j,s){let $=new Uint8Array(j.byteLength+s.byteLength);return $.set(new Uint8Array(j),0),$.set(new Uint8Array(s),j.byteLength),$},p$=async j=>{let s=function(rt){let it=window.atob(rt),at=new Uint8Array(new ArrayBuffer(it.length));for(let ct=0;ct<it.length;ct+=1)at[ct]=it.charCodeAt(ct);return at}(`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu
STM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+
HvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy
xQiYDz3vqa6bP29adwIDAQAB`),$=await window.crypto.subtle.importKey("spki",s,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),_e=mS(j),tt=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},$,_e);return function(rt){let it="";for(let at=0;at<rt.length;at+=1)it+=String.fromCharCode(rt[at]);return window.btoa(it)}(new Uint8Array(tt))},_S=async j=>function(s,$){let _e="";return new Uint8Array(s).forEach(tt=>{_e+=tt.toString($).padStart(2,"0")}),_e}(await crypto.subtle.digest("SHA-256",mS(j)),16);class Fr{constructor(){gt(this,"_events",{}),gt(this,"addListener",this.on)}getListeners(s){return this._events[s]?this._events[s].map($=>$.listener):[]}on(s,$){this._events[s]||(this._events[s]=[]);let _e=this._events[s];this._indexOfListener(_e,$)===-1&&_e.push({listener:$,once:!1})}once(s,$){this._events[s]||(this._events[s]=[]);let _e=this._events[s];this._indexOfListener(_e,$)===-1&&_e.push({listener:$,once:!0})}off(s,$){if(!this._events[s])return;let _e=this._events[s],tt=this._indexOfListener(_e,$);tt!==-1&&_e.splice(tt,1),this._events[s].length===0&&delete this._events[s]}removeAllListeners(s){s?delete this._events[s]:this._events={}}emit(s){this._events[s]||(this._events[s]=[]);let $=this._events[s].map(it=>it);for(var _e=arguments.length,tt=new Array(_e>1?_e-1:0),rt=1;rt<_e;rt++)tt[rt-1]=arguments[rt];for(let it=0;it<$.length;it+=1){let at=$[it];at.once&&this.off(s,at.listener),at.listener.apply(this,tt||[])}}safeEmit(s){for(var $=arguments.length,_e=new Array($>1?$-1:0),tt=1;tt<$;tt++)_e[tt-1]=arguments[tt];[...this._events[s]||[]].forEach(rt=>{rt.once&&this.off(s,rt.listener);try{rt.listener.apply(this,_e)}catch(it){console.error("safeEmit event:".concat(s," error ").concat(it==null?void 0:it.toString()))}})}_indexOfListener(s,$){let _e=s.length;for(;_e--;)if(s[_e].listener===$)return _e;return-1}}let M1=null;function oA(){if(M1)return M1;if(window.electron)return M1=window.electron;if(!window.require)return null;try{return M1=window.require("electron"),M1}catch{return null}}var mo,Wr,ES,Xn,Jn,Do,us,Du;function iA(j){return Sr(j.timeout,"config.timeout",0,1e5),Sr(j.timeoutFactor,"config.timeoutFactor",0,100,!1),Sr(j.maxRetryCount,"config.maxRetryConfig",0,1/0),Sr(j.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Pm(j){if(!Array.isArray(j)||j.length<1)return!1;try{j.forEach(s=>{if(!s.urls)throw Error()})}catch{return!1}return!0}function sA(j){return zo(j.turnServerURL,"turnServerURL"),zo(j.username,"username"),zo(j.password,"password"),j.udpport&&Sr(j.udpport,"udpport",1,99999,!0),j.forceturn&&np(j.forceturn,"forceturn"),j.security&&np(j.security,"security"),j.tcpport&&Sr(j.tcpport,"tcpport",1,99999,!0),!0}function aA(j){return j.level!==void 0&&vo(j.level,"level",[1,2,3]),j.delay!==void 0&&Sr(j.delay,"delay",0,3e3,!0),!0}function lo(j,s){for(var $=arguments.length,_e=new Array($>2?$-2:0),tt=2;tt<$;tt++)_e[tt-2]=arguments[tt];return j.getListeners(s).length===0?Jt.reject(new rn(Nt.UNEXPECTED_ERROR,"can not emit promise")):new Jt((rt,it)=>{j.emit(s,..._e,rt,it)})}function Rr(j,s){if(j.getListeners(s).length===0)return Jt.resolve();for(var $=arguments.length,_e=new Array($>2?$-2:0),tt=2;tt<$;tt++)_e[tt-2]=arguments[tt];return lo(j,s,..._e)}function Ms(j,s){if(j.getListeners(s).length===0)return null;for(var $=arguments.length,_e=new Array($>2?$-2:0),tt=2;tt<$;tt++)_e[tt-2]=arguments[tt];return Gp(j,s,..._e)}function Gp(j,s){let $=null,_e=null;for(var tt=arguments.length,rt=new Array(tt>2?tt-2:0),it=2;it<tt;it++)rt[it-2]=arguments[it];if(j.emit(s,...rt,at=>{$=at},at=>{_e=at}),_e!==null)throw _e;if($===null)throw new rn(Nt.UNEXPECTED_ERROR,"handler is not sync");return $}(function(j){j.CREATE_CLIENT="createClient",j.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",j.SET_AREA="setArea",j.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",j.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",j.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",j.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",j.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",j.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",j.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",j.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",j.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",j.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",j.START_PROXY_SERVER="Client.startProxyServer",j.STOP_PROXY_SERVER="Client.stopProxyServer",j.SET_PROXY_SERVER="Client.setProxyServer",j.SET_TURN_SERVER="Client.setTurnServer",j.SET_CLIENT_ROLE="Client.setClientRole",j.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",j.ENABLE_DUAL_STREAM="Client.enableDualStream",j.DISABLE_DUAL_STREAM="Client.disableDualStream",j.JOIN="Client.join",j.LEAVE="Client.leave",j.PUBLISH="Client.publish",j.UNPUBLISH="Client.unpublish",j.SUBSCRIBE="Client.subscribe",j.MASS_SUBSCRIBE="Client.massSubscribe",j.MASS_UNSUBSCRIBE="Client.massUnsubscribe",j.UNSUBSCRIBE="Client.unsubscribe",j.RENEW_TOKEN="Client.renewToken",j.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",j.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",j.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",j.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",j.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",j.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",j.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",j.DATACHANNEL_FAILBACK="Client._datachannelFailback",j.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",j.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",j.START_LIVE_STREAMING="Client.startLiveStreaming",j.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",j.STOP_LIVE_STREAMING="Client.stopLiveStreaming",j.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",j.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",j.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",j.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",j.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",j.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",j.SET_CONFIG_DISTRIBUTE="_configDistribute",j.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",j.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",j.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",j.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",j.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",j.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",j.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",j.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",j.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",j.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",j.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",j.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",j.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",j.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",j.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",j.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",j.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",j.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",j.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",j.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",j.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",j.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",j.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",j.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",j.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",j.STREAM_TYPE_CHANGE="streamTypeChange",j.CONNECTION_STATE_CHANGE="connectionStateChange",j.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",j.IMAGE_MODERATION_UPLOAD="imageModerationUpload"})(mo||(mo={})),function(j){j.TRACER="tracer"}(Wr||(Wr={})),function(j){j[j.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",j[j.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",j[j.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(ES||(ES={})),function(j){j.LEAVE="LEAVE",j.NETWORK_ERROR="NETWORK_ERROR",j.SERVER_ERROR="SERVER_ERROR",j.UID_BANNED="UID_BANNED",j.IP_BANNED="IP_BANNED",j.CHANNEL_BANNED="CHANNEL_BANNED",j.FALLBACK="FALLBACK",j.LICENSE_MISSING="LICENSE_MISSING",j.LICENSE_EXPIRED="LICENSE_EXPIRED",j.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",j.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",j.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",j.LICENSE_ILLEGAL="LICENSE_ILLEGAL",j.TOKEN_EXPIRE="TOKEN_EXPIRE"}(Xn||(Xn={})),function(j){j.CONNECTION_STATE_CHANGE="connection-state-change",j.MEDIA_RECONNECT_START="media-reconnect-start",j.MEDIA_RECONNECT_END="media-reconnect-end",j.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",j.USER_JOINED="user-joined",j.USER_LEAVED="user-left",j.USER_PUBLISHED="user-published",j.USER_UNPUBLISHED="user-unpublished",j.USER_INFO_UPDATED="user-info-updated",j.CLIENT_BANNED="client-banned",j.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",j.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",j.VOLUME_INDICATOR="volume-indicator",j.CRYPT_ERROR="crypt-error",j.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",j.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",j.NETWORK_QUALITY="network-quality",j.STREAM_TYPE_CHANGED="stream-type-changed",j.STREAM_FALLBACK="stream-fallback",j.RECEIVE_METADATA="receive-metadata",j.STREAM_MESSAGE="stream-message",j.LIVE_STREAMING_ERROR="live-streaming-error",j.LIVE_STREAMING_WARNING="live-streaming-warning",j.INJECT_STREAM_STATUS="stream-inject-status",j.EXCEPTION="exception",j.ERROR="error",j.P2P_LOST="p2p_lost",j.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",j.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",j.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",j.PUBLISHED_USER_LIST="published-user-list",j.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",j.CONTENT_INSPECT_ERROR="content-inspect-error",j.CONTENT_INSPECT_RESULT="content-inspect-result",j.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change"}(Jn||(Jn={})),function(j){j.NETWORK_ERROR="NETWORK_ERROR",j.SERVER_ERROR="SERVER_ERROR",j.MULTI_IP="MULTI_IP",j.TIMEOUT="TIMEOUT",j.OFFLINE="OFFLINE",j.LEAVE="LEAVE",j.P2P_FAILED="P2P_FAILED",j.FALLBACK="FALLBACK"}(Do||(Do={})),function(j){j.ONLINE="ONLINE",j.OFFLINE="OFFLINE"}(us||(us={})),function(j){j.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",j.ONLINE="ONLINE",j.OFFLINE="OFFLINE"}(Du||(Du={}));let uo=new class extends Fr{set networkState(j){this.emit(Du.NETWORK_STATE_CHANGE,j,this._networkState),j===us.ONLINE?this.emit(Du.ONLINE):j===us.OFFLINE&&(this.onlineWaiter=new Jt(s=>{this.once(Du.ONLINE,()=>{this.onlineWaiter=void 0,s(us.ONLINE)})}),this.emit(Du.OFFLINE)),this._networkState=j}get networkState(){return this._networkState}get isOnline(){return this._networkState===us.ONLINE}constructor(){super(),gt(this,"_moduleName","network-indicator"),gt(this,"_networkState",us.ONLINE),gt(this,"onlineWaiter",void 0),window.addEventListener("online",()=>{this.networkState=us.ONLINE}),window.addEventListener("offline",()=>{this.networkState=us.OFFLINE})}};function cA(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Wp(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?cA(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):cA(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function T_(j,s){let $=j.indexOf(s);$!==-1&&j.splice($,1)}function Dm(j){let s=[];return j.forEach($=>{s.indexOf($)===-1&&s.push($)}),s}function v_(j){Jt!==void 0?Jt.resolve().then(j):setTimeout(j,0)}function Nr(j){return JSON.parse(JSON.stringify(j))}function Hp(j){try{return Nr(j)}catch{return j}}let lA={};function U1(j,s){lA[s]||(lA[s]=!0,j())}function C_(j){let s=window.atob(j),$=new Uint8Array(new ArrayBuffer(s.length));for(let _e=0;_e<s.length;_e+=1)$[_e]=s.charCodeAt(_e);return $}function xm(j){let s="";for(let $=0;$<j.length;$+=1)s+=String.fromCharCode(j[$]);return window.btoa(s)}function hu(j){return window.TextEncoder?new TextEncoder().encode(j).length:j.length}function dA(j){let s=0;return/DingTalk/i.test(navigator.userAgent)&&j.realFormData&&(j=j.realFormData),j.forEach($=>{s+=typeof $=="string"?hu($):$.size}),s+138}function h$(j){let s=new rn(Nt.TIMEOUT,"timeout");return new Jt(($,_e)=>{window.setTimeout(()=>_e(s),j)})}function xo(j){return new Jt(s=>{window.setTimeout(s,j)})}function Ir(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:7,s=arguments.length>1?arguments[1]:void 0,$=Math.random().toString(16).substr(2,j).toLowerCase();return $.length===j?"".concat(s).concat($):"".concat(s).concat($)+Ir(j-$.length,"")}function yS(){return Ir(32,"").toUpperCase()}let b_=()=>{},uA=new class{constructor(){gt(this,"fnMap",new Map)}throttleByKey(j,s,$,_e){for(var tt=arguments.length,rt=new Array(tt>4?tt-4:0),it=4;it<tt;it++)rt[it-4]=arguments[it];if(this.fnMap.has(s)){let at=this.fnMap.get(s);if(at.threshold!==$){at.fn(...at.args),clearTimeout(at.timer);let ct=window.setTimeout(()=>{let dt=this.fnMap.get(s);dt&&dt.fn(...dt.args),this.fnMap.delete(s)},$);this.fnMap.set(s,{fn:j,threshold:$,timer:ct,args:rt,skipFn:_e})}else at.skipFn&&at.skipFn(...at.args),this.fnMap.set(s,Wp(Wp({},at),{},{fn:j,args:rt,skipFn:_e}))}else{let at=window.setTimeout(()=>{let ct=this.fnMap.get(s);ct&&ct.fn(...ct.args),this.fnMap.delete(s)},$);this.fnMap.set(s,{fn:j,threshold:$,timer:at,args:rt,skipFn:_e})}}},pA=uA.throttleByKey.bind(uA);function hA(j){return typeof j=="object"&&j!==null&&!(j instanceof RegExp)}function SS(j,s){if(!hA(j)||!hA(s)||Array.isArray(j)&&!Array.isArray(s)||!Array.isArray(j)&&Array.isArray(s))return s;if(Array.isArray(s)&&Array.isArray(j)){let $=[...j];for(let _e=0;_e<s.length;_e++)$[_e]=SS(j[_e],s[_e]);return $}{let $=Wp({},j);for(let _e in s)Object.prototype.hasOwnProperty.call(s,_e)&&(Object.prototype.hasOwnProperty.call(j,_e)?$[_e]=SS(j[_e],s[_e]):$[_e]=s[_e]);return $}}let f$=1,R_=console;class Lo{static setLogger(s){R_=s}constructor(s){gt(this,"lockingPromise",Jt.resolve()),gt(this,"locks",0),gt(this,"name",""),gt(this,"lockId",void 0),this.lockId=f$++,s&&(this.name=s),R_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(s){let $;this.locks+=1,R_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat(typeof s=="string"?s:""));let _e=new Jt(rt=>{$=()=>{this.locks-=1,R_.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is not locked, current queue ").concat(this.locks,". ").concat(typeof s=="string"?s:"")),rt()}}),tt=this.lockingPromise.then(()=>$);return this.lockingPromise=this.lockingPromise.then(()=>_e),tt}}function Lm(j,s){return function($,_e,tt){let rt=tt.value;if(typeof rt!="function")throw new Error("Cannot use mutex on object property.");return tt.value=async function(){let it=this[s];if(!it)throw new Error("mutex property key ".concat(s," doesn't exist on ").concat(j));let at=await it.lock("From ".concat(j,".").concat(_e));try{for(var ct=arguments.length,dt=new Array(ct),ut=0;ut<ct;ut++)dt[ut]=arguments[ut];return await rt.apply(this,dt)}finally{at()}},tt}}let po={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function I_(j,s){let $=Math.floor(s.timeout*Math.pow(s.timeoutFactor,j));return Math.min(s.maxRetryTimeout,$)}function tu(j,s,$,_e){let tt=Object.assign({},po,_e),rt=tt.timeout,it=async()=>{await function(dt){return new Jt(ut=>{window.setTimeout(ut,dt)})}(rt),rt*=tt.timeoutFactor,rt=Math.min(tt.maxRetryTimeout,rt)},at=!1,ct=new Jt(async(dt,ut)=>{s=s||(()=>!1),$=$||(()=>!0);for(let pt=0;pt<tt.maxRetryCount;pt+=1){if(at)return ut(new rn(Nt.OPERATION_ABORTED));try{let mt=await j();if(!s(mt,pt)||pt+1===tt.maxRetryCount)return dt(mt);await it()}catch(mt){if(!$(mt,pt)||pt+1===tt.maxRetryCount)return ut(mt);await it()}}});return ct.cancel=()=>at=!0,ct}var g$=bs,m$=Wo,_$=ur,E$=kp,y$=TypeError,fA=function(j){return function(s,$,_e,tt){g$($);var rt=m$(s),it=_$(rt),at=E$(rt),ct=j?at-1:0,dt=j?-1:1;if(_e<2)for(;;){if(ct in it){tt=it[ct],ct+=dt;break}if(ct+=dt,j?ct<0:at<=ct)throw y$("Reduce of empty array with no initial value")}for(;j?ct>=0:at>ct;ct+=dt)ct in it&&(tt=$(tt,it[ct],ct,rt));return tt}},S$={left:fA(!1),right:fA(!0)}.left;qr({target:"Array",proto:!0,forced:!N1&&eo>79&&eo<83||!y2("reduce")},{reduce:function(j){var s=arguments.length;return S$(this,j,s,s>1?arguments[1]:void 0)}});var T$=Xu("Array").reduce,v$=wt,C$=T$,TS=Array.prototype,zp=ot(function(j){var s=j.reduce;return j===TS||v$(TS,j)&&s===TS.reduce?C$:s});let vS=class{constructor(j){gt(this,"input",[]),gt(this,"size",void 0),this.size=j}add(j){this.input.push(j),this.input.length>this.size&&this.input.splice(0,1)}mean(){var j;return this.input.length===0?0:zp(j=this.input).call(j,(s,$)=>s+$)/this.input.length}};var CS,bS={exports:{}},gA=function(j,s){return function(){for(var $=new Array(arguments.length),_e=0;_e<$.length;_e++)$[_e]=arguments[_e];return j.apply(s,$)}},b$=gA,RS=Object.prototype.toString,IS=(CS=Object.create(null),function(j){var s=RS.call(j);return CS[s]||(CS[s]=s.slice(8,-1).toLowerCase())});function Kp(j){return j=j.toLowerCase(),function(s){return IS(s)===j}}function AS(j){return Array.isArray(j)}function A_(j){return j===void 0}var mA=Kp("ArrayBuffer");function _A(j){return j!==null&&typeof j=="object"}function N_(j){if(IS(j)!=="object")return!1;var s=Object.getPrototypeOf(j);return s===null||s===Object.prototype}var R$=Kp("Date"),I$=Kp("File"),A$=Kp("Blob"),N$=Kp("FileList");function NS(j){return RS.call(j)==="[object Function]"}var w$=Kp("URLSearchParams");function wS(j,s){if(j!=null)if(typeof j!="object"&&(j=[j]),AS(j))for(var $=0,_e=j.length;$<_e;$++)s.call(null,j[$],$,j);else for(var tt in j)Object.prototype.hasOwnProperty.call(j,tt)&&s.call(null,j[tt],tt,j)}var OS,O$=(OS=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(j){return OS&&j instanceof OS}),ys={isArray:AS,isArrayBuffer:mA,isBuffer:function(j){return j!==null&&!A_(j)&&j.constructor!==null&&!A_(j.constructor)&&typeof j.constructor.isBuffer=="function"&&j.constructor.isBuffer(j)},isFormData:function(j){var s="[object FormData]";return j&&(typeof FormData=="function"&&j instanceof FormData||RS.call(j)===s||NS(j.toString)&&j.toString()===s)},isArrayBufferView:function(j){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(j):j&&j.buffer&&mA(j.buffer)},isString:function(j){return typeof j=="string"},isNumber:function(j){return typeof j=="number"},isObject:_A,isPlainObject:N_,isUndefined:A_,isDate:R$,isFile:I$,isBlob:A$,isFunction:NS,isStream:function(j){return _A(j)&&NS(j.pipe)},isURLSearchParams:w$,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:wS,merge:function j(){var s={};function $(rt,it){N_(s[it])&&N_(rt)?s[it]=j(s[it],rt):N_(rt)?s[it]=j({},rt):AS(rt)?s[it]=rt.slice():s[it]=rt}for(var _e=0,tt=arguments.length;_e<tt;_e++)wS(arguments[_e],$);return s},extend:function(j,s,$){return wS(s,function(_e,tt){j[tt]=$&&typeof _e=="function"?b$(_e,$):_e}),j},trim:function(j){return j.trim?j.trim():j.replace(/^\s+|\s+$/g,"")},stripBOM:function(j){return j.charCodeAt(0)===65279&&(j=j.slice(1)),j},inherits:function(j,s,$,_e){j.prototype=Object.create(s.prototype,_e),j.prototype.constructor=j,$&&Object.assign(j.prototype,$)},toFlatObject:function(j,s,$){var _e,tt,rt,it={};s=s||{};do{for(tt=(_e=Object.getOwnPropertyNames(j)).length;tt-- >0;)it[rt=_e[tt]]||(s[rt]=j[rt],it[rt]=!0);j=Object.getPrototypeOf(j)}while(j&&(!$||$(j,s))&&j!==Object.prototype);return s},kindOf:IS,kindOfTest:Kp,endsWith:function(j,s,$){j=String(j),($===void 0||$>j.length)&&($=j.length),$-=s.length;var _e=j.indexOf(s,$);return _e!==-1&&_e===$},toArray:function(j){if(!j)return null;var s=j.length;if(A_(s))return null;for(var $=new Array(s);s-- >0;)$[s]=j[s];return $},isTypedArray:O$,isFileList:N$},km=ys;function EA(j){return encodeURIComponent(j).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var yA=function(j,s,$){if(!s)return j;var _e;if($)_e=$(s);else if(km.isURLSearchParams(s))_e=s.toString();else{var tt=[];km.forEach(s,function(it,at){it!=null&&(km.isArray(it)?at+="[]":it=[it],km.forEach(it,function(ct){km.isDate(ct)?ct=ct.toISOString():km.isObject(ct)&&(ct=JSON.stringify(ct)),tt.push(EA(at)+"="+EA(ct))}))}),_e=tt.join("&")}if(_e){var rt=j.indexOf("#");rt!==-1&&(j=j.slice(0,rt)),j+=(j.indexOf("?")===-1?"?":"&")+_e}return j},P$=ys;function w_(){this.handlers=[]}w_.prototype.use=function(j,s,$){return this.handlers.push({fulfilled:j,rejected:s,synchronous:!!$&&$.synchronous,runWhen:$?$.runWhen:null}),this.handlers.length-1},w_.prototype.eject=function(j){this.handlers[j]&&(this.handlers[j]=null)},w_.prototype.forEach=function(j){P$.forEach(this.handlers,function(s){s!==null&&j(s)})};var SA,TA,D$=w_,x$=ys;function $m(){if(TA)return SA;TA=1;var j=ys;function s(tt,rt,it,at,ct){Error.call(this),this.message=tt,this.name="AxiosError",rt&&(this.code=rt),it&&(this.config=it),at&&(this.request=at),ct&&(this.response=ct)}j.inherits(s,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var $=s.prototype,_e={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(tt){_e[tt]={value:tt}}),Object.defineProperties(s,_e),Object.defineProperty($,"isAxiosError",{value:!0}),s.from=function(tt,rt,it,at,ct,dt){var ut=Object.create($);return j.toFlatObject(tt,ut,function(pt){return pt!==Error.prototype}),s.call(ut,tt.message,rt,it,at,ct),ut.name=tt.name,dt&&Object.assign(ut,dt),ut},SA=s}var PS,vA,CA,bA,DS,RA,IA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};function AA(){if(vA)return PS;vA=1;var j=ys;return PS=function(s,$){$=$||new FormData;var _e=[];function tt(rt){return rt===null?"":j.isDate(rt)?rt.toISOString():j.isArrayBuffer(rt)||j.isTypedArray(rt)?typeof Blob=="function"?new Blob([rt]):Buffer.from(rt):rt}return function rt(it,at){if(j.isPlainObject(it)||j.isArray(it)){if(_e.indexOf(it)!==-1)throw Error("Circular reference detected in "+at);_e.push(it),j.forEach(it,function(ct,dt){if(!j.isUndefined(ct)){var ut,pt=at?at+"."+dt:dt;if(ct&&!at&&typeof ct=="object"){if(j.endsWith(dt,"{}"))ct=JSON.stringify(ct);else if(j.endsWith(dt,"[]")&&(ut=j.toArray(ct)))return void ut.forEach(function(mt){!j.isUndefined(mt)&&$.append(pt,tt(mt))})}rt(ct,pt)}}),_e.pop()}else $.append(at,tt(it))}(s),$},PS}function L$(){if(bA)return CA;bA=1;var j=$m();return CA=function(s,$,_e){var tt=_e.config.validateStatus;_e.status&&tt&&!tt(_e.status)?$(new j("Request failed with status code "+_e.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(_e.status/100)-4],_e.config,_e.request,_e)):s(_e)}}function k$(){if(RA)return DS;RA=1;var j=ys;return DS=j.isStandardBrowserEnv()?{write:function(s,$,_e,tt,rt,it){var at=[];at.push(s+"="+encodeURIComponent($)),j.isNumber(_e)&&at.push("expires="+new Date(_e).toGMTString()),j.isString(tt)&&at.push("path="+tt),j.isString(rt)&&at.push("domain="+rt),it===!0&&at.push("secure"),document.cookie=at.join("; ")},read:function(s){var $=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return $?decodeURIComponent($[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},DS}var xS,NA,wA,OA,PA,DA,xA,LA,LS,kA,$A,MA,$$=function(j){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(j)},M$=function(j,s){return s?j.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):j},UA=function(j,s){return j&&!$$(s)?M$(j,s):s};function U$(){if(NA)return xS;NA=1;var j=ys,s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return xS=function($){var _e,tt,rt,it={};return $&&j.forEach($.split(`
`),function(at){if(rt=at.indexOf(":"),_e=j.trim(at.substr(0,rt)).toLowerCase(),tt=j.trim(at.substr(rt+1)),_e){if(it[_e]&&s.indexOf(_e)>=0)return;it[_e]=_e==="set-cookie"?(it[_e]?it[_e]:[]).concat([tt]):it[_e]?it[_e]+", "+tt:tt}}),it},xS}function F$(){if(OA)return wA;OA=1;var j=ys;return wA=j.isStandardBrowserEnv()?function(){var s,$=/(msie|trident)/i.test(navigator.userAgent),_e=document.createElement("a");function tt(rt){var it=rt;return $&&(_e.setAttribute("href",it),it=_e.href),_e.setAttribute("href",it),{href:_e.href,protocol:_e.protocol?_e.protocol.replace(/:$/,""):"",host:_e.host,search:_e.search?_e.search.replace(/^\?/,""):"",hash:_e.hash?_e.hash.replace(/^#/,""):"",hostname:_e.hostname,port:_e.port,pathname:_e.pathname.charAt(0)==="/"?_e.pathname:"/"+_e.pathname}}return s=tt(window.location.href),function(rt){var it=j.isString(rt)?tt(rt):rt;return it.protocol===s.protocol&&it.host===s.host}}():function(){return!0}}function O_(){if(DA)return PA;DA=1;var j=$m();function s($){j.call(this,$??"canceled",j.ERR_CANCELED),this.name="CanceledError"}return ys.inherits(s,j,{__CANCEL__:!0}),PA=s}function j$(){return LA||(LA=1,xA=function(j){var s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(j);return s&&s[1]||""}),xA}function V$(){if(kA)return LS;kA=1;var j=ys,s=L$(),$=k$(),_e=yA,tt=UA,rt=U$(),it=F$(),at=IA,ct=$m(),dt=O_(),ut=j$();return LS=function(pt){return new Promise(function(mt,yt){var At,Ct=pt.data,It=pt.headers,kt=pt.responseType;function Vt(){pt.cancelToken&&pt.cancelToken.unsubscribe(At),pt.signal&&pt.signal.removeEventListener("abort",At)}j.isFormData(Ct)&&j.isStandardBrowserEnv()&&delete It["Content-Type"];var Bt=new XMLHttpRequest;if(pt.auth){var en=pt.auth.username||"",zt=pt.auth.password?unescape(encodeURIComponent(pt.auth.password)):"";It.Authorization="Basic "+btoa(en+":"+zt)}var Yt=tt(pt.baseURL,pt.url);function Qt(){if(Bt){var hn="getAllResponseHeaders"in Bt?rt(Bt.getAllResponseHeaders()):null,Mn={data:kt&&kt!=="text"&&kt!=="json"?Bt.response:Bt.responseText,status:Bt.status,statusText:Bt.statusText,headers:hn,config:pt,request:Bt};s(function(Gn){mt(Gn),Vt()},function(Gn){yt(Gn),Vt()},Mn),Bt=null}}if(Bt.open(pt.method.toUpperCase(),_e(Yt,pt.params,pt.paramsSerializer),!0),Bt.timeout=pt.timeout,"onloadend"in Bt?Bt.onloadend=Qt:Bt.onreadystatechange=function(){Bt&&Bt.readyState===4&&(Bt.status!==0||Bt.responseURL&&Bt.responseURL.indexOf("file:")===0)&&setTimeout(Qt)},Bt.onabort=function(){Bt&&(yt(new ct("Request aborted",ct.ECONNABORTED,pt,Bt)),Bt=null)},Bt.onerror=function(){yt(new ct("Network Error",ct.ERR_NETWORK,pt,Bt,Bt)),Bt=null},Bt.ontimeout=function(){var hn=pt.timeout?"timeout of "+pt.timeout+"ms exceeded":"timeout exceeded",Mn=pt.transitional||at;pt.timeoutErrorMessage&&(hn=pt.timeoutErrorMessage),yt(new ct(hn,Mn.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,pt,Bt)),Bt=null},j.isStandardBrowserEnv()){var Xt=(pt.withCredentials||it(Yt))&&pt.xsrfCookieName?$.read(pt.xsrfCookieName):void 0;Xt&&(It[pt.xsrfHeaderName]=Xt)}"setRequestHeader"in Bt&&j.forEach(It,function(hn,Mn){Ct===void 0&&Mn.toLowerCase()==="content-type"?delete It[Mn]:Bt.setRequestHeader(Mn,hn)}),j.isUndefined(pt.withCredentials)||(Bt.withCredentials=!!pt.withCredentials),kt&&kt!=="json"&&(Bt.responseType=pt.responseType),typeof pt.onDownloadProgress=="function"&&Bt.addEventListener("progress",pt.onDownloadProgress),typeof pt.onUploadProgress=="function"&&Bt.upload&&Bt.upload.addEventListener("progress",pt.onUploadProgress),(pt.cancelToken||pt.signal)&&(At=function(hn){Bt&&(yt(!hn||hn&&hn.type?new dt:hn),Bt.abort(),Bt=null)},pt.cancelToken&&pt.cancelToken.subscribe(At),pt.signal&&(pt.signal.aborted?At():pt.signal.addEventListener("abort",At))),Ct||(Ct=null);var cn=ut(Yt);cn&&["http","https","file"].indexOf(cn)===-1?yt(new ct("Unsupported protocol "+cn+":",ct.ERR_BAD_REQUEST,pt)):Bt.send(Ct)})},LS}var hs=ys,FA=function(j,s){x$.forEach(j,function($,_e){_e!==s&&_e.toUpperCase()===s.toUpperCase()&&(j[s]=$,delete j[_e])})},jA=$m(),B$=IA,G$=AA(),W$={"Content-Type":"application/x-www-form-urlencoded"};function VA(j,s){!hs.isUndefined(j)&&hs.isUndefined(j["Content-Type"])&&(j["Content-Type"]=s)}var BA,P_={transitional:B$,adapter:((typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(BA=V$()),BA),transformRequest:[function(j,s){if(FA(s,"Accept"),FA(s,"Content-Type"),hs.isFormData(j)||hs.isArrayBuffer(j)||hs.isBuffer(j)||hs.isStream(j)||hs.isFile(j)||hs.isBlob(j))return j;if(hs.isArrayBufferView(j))return j.buffer;if(hs.isURLSearchParams(j))return VA(s,"application/x-www-form-urlencoded;charset=utf-8"),j.toString();var $,_e=hs.isObject(j),tt=s&&s["Content-Type"];if(($=hs.isFileList(j))||_e&&tt==="multipart/form-data"){var rt=this.env&&this.env.FormData;return G$($?{"files[]":j}:j,rt&&new rt)}return _e||tt==="application/json"?(VA(s,"application/json"),function(it,at,ct){if(hs.isString(it))try{return(at||JSON.parse)(it),hs.trim(it)}catch(dt){if(dt.name!=="SyntaxError")throw dt}return(ct||JSON.stringify)(it)}(j)):j}],transformResponse:[function(j){var s=this.transitional||P_.transitional,$=s&&s.silentJSONParsing,_e=s&&s.forcedJSONParsing,tt=!$&&this.responseType==="json";if(tt||_e&&hs.isString(j)&&j.length)try{return JSON.parse(j)}catch(rt){if(tt)throw rt.name==="SyntaxError"?jA.from(rt,jA.ERR_BAD_RESPONSE,this,null,this.response):rt}return j}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:MA?$A:(MA=1,$A=null)},validateStatus:function(j){return j>=200&&j<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};hs.forEach(["delete","get","head"],function(j){P_.headers[j]={}}),hs.forEach(["post","put","patch"],function(j){P_.headers[j]=hs.merge(W$)});var GA,WA,kS=P_,H$=ys,z$=kS;function HA(){return WA?GA:(WA=1,GA=function(j){return!(!j||!j.__CANCEL__)})}var zA=ys,$S=function(j,s,$){var _e=this||z$;return H$.forEach($,function(tt){j=tt.call(_e,j,s)}),j},K$=HA(),Y$=kS,q$=O_();function US(j){if(j.cancelToken&&j.cancelToken.throwIfRequested(),j.signal&&j.signal.aborted)throw new q$}var KA,YA,yl=ys,qA=function(j,s){s=s||{};var $={};function _e(dt,ut){return yl.isPlainObject(dt)&&yl.isPlainObject(ut)?yl.merge(dt,ut):yl.isPlainObject(ut)?yl.merge({},ut):yl.isArray(ut)?ut.slice():ut}function tt(dt){return yl.isUndefined(s[dt])?yl.isUndefined(j[dt])?void 0:_e(void 0,j[dt]):_e(j[dt],s[dt])}function rt(dt){if(!yl.isUndefined(s[dt]))return _e(void 0,s[dt])}function it(dt){return yl.isUndefined(s[dt])?yl.isUndefined(j[dt])?void 0:_e(void 0,j[dt]):_e(void 0,s[dt])}function at(dt){return dt in s?_e(j[dt],s[dt]):dt in j?_e(void 0,j[dt]):void 0}var ct={url:rt,method:rt,data:rt,baseURL:it,transformRequest:it,transformResponse:it,paramsSerializer:it,timeout:it,timeoutMessage:it,withCredentials:it,adapter:it,responseType:it,xsrfCookieName:it,xsrfHeaderName:it,onUploadProgress:it,onDownloadProgress:it,decompress:it,maxContentLength:it,maxBodyLength:it,beforeRedirect:it,transport:it,httpAgent:it,httpsAgent:it,cancelToken:it,socketPath:it,responseEncoding:it,validateStatus:at};return yl.forEach(Object.keys(j).concat(Object.keys(s)),function(dt){var ut=ct[dt]||tt,pt=ut(dt);yl.isUndefined(pt)&&ut!==at||($[dt]=pt)}),$};function XA(){return YA?KA:(YA=1,KA={version:"0.27.2"})}var X$=XA().version,rp=$m(),FS={};["object","boolean","number","function","string","symbol"].forEach(function(j,s){FS[j]=function($){return typeof $===j||"a"+(s<1?"n ":" ")+j}});var JA={};FS.transitional=function(j,s,$){function _e(tt,rt){return"[Axios v"+X$+"] Transitional option '"+tt+"'"+rt+($?". "+$:"")}return function(tt,rt,it){if(j===!1)throw new rp(_e(rt," has been removed"+(s?" in "+s:"")),rp.ERR_DEPRECATED);return s&&!JA[rt]&&(JA[rt]=!0,console.warn(_e(rt," has been deprecated since v"+s+" and will be removed in the near future"))),!j||j(tt,rt,it)}};var QA,ZA,eN,tN,nN,rN,J$={assertOptions:function(j,s,$){if(typeof j!="object")throw new rp("options must be an object",rp.ERR_BAD_OPTION_VALUE);for(var _e=Object.keys(j),tt=_e.length;tt-- >0;){var rt=_e[tt],it=s[rt];if(it){var at=j[rt],ct=at===void 0||it(at,rt,j);if(ct!==!0)throw new rp("option "+rt+" must be "+ct,rp.ERR_BAD_OPTION_VALUE)}else if($!==!0)throw new rp("Unknown option "+rt,rp.ERR_BAD_OPTION)}},validators:FS},oN=ys,Q$=yA,iN=D$,sN=function(j){return US(j),j.headers=j.headers||{},j.data=$S.call(j,j.data,j.headers,j.transformRequest),j.headers=zA.merge(j.headers.common||{},j.headers[j.method]||{},j.headers),zA.forEach(["delete","get","head","post","put","patch","common"],function(s){delete j.headers[s]}),(j.adapter||Y$.adapter)(j).then(function(s){return US(j),s.data=$S.call(j,s.data,s.headers,j.transformResponse),s},function(s){return K$(s)||(US(j),s&&s.response&&(s.response.data=$S.call(j,s.response.data,s.response.headers,j.transformResponse))),Promise.reject(s)})},D_=qA,Z$=UA,aN=J$,Mm=aN.validators;function Um(j){this.defaults=j,this.interceptors={request:new iN,response:new iN}}Um.prototype.request=function(j,s){typeof j=="string"?(s=s||{}).url=j:s=j||{},(s=D_(this.defaults,s)).method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var $=s.transitional;$!==void 0&&aN.assertOptions($,{silentJSONParsing:Mm.transitional(Mm.boolean),forcedJSONParsing:Mm.transitional(Mm.boolean),clarifyTimeoutError:Mm.transitional(Mm.boolean)},!1);var _e=[],tt=!0;this.interceptors.request.forEach(function(pt){typeof pt.runWhen=="function"&&pt.runWhen(s)===!1||(tt=tt&&pt.synchronous,_e.unshift(pt.fulfilled,pt.rejected))});var rt,it=[];if(this.interceptors.response.forEach(function(pt){it.push(pt.fulfilled,pt.rejected)}),!tt){var at=[sN,void 0];for(Array.prototype.unshift.apply(at,_e),at=at.concat(it),rt=Promise.resolve(s);at.length;)rt=rt.then(at.shift(),at.shift());return rt}for(var ct=s;_e.length;){var dt=_e.shift(),ut=_e.shift();try{ct=dt(ct)}catch(pt){ut(pt);break}}try{rt=sN(ct)}catch(pt){return Promise.reject(pt)}for(;it.length;)rt=rt.then(it.shift(),it.shift());return rt},Um.prototype.getUri=function(j){j=D_(this.defaults,j);var s=Z$(j.baseURL,j.url);return Q$(s,j.params,j.paramsSerializer)},oN.forEach(["delete","get","head","options"],function(j){Um.prototype[j]=function(s,$){return this.request(D_($||{},{method:j,url:s,data:($||{}).data}))}}),oN.forEach(["post","put","patch"],function(j){function s($){return function(_e,tt,rt){return this.request(D_(rt||{},{method:j,headers:$?{"Content-Type":"multipart/form-data"}:{},url:_e,data:tt}))}}Um.prototype[j]=s(),Um.prototype[j+"Form"]=s(!0)});var cN=ys,eM=gA,x_=Um,tM=qA,Ks=function j(s){var $=new x_(s),_e=eM(x_.prototype.request,$);return cN.extend(_e,x_.prototype,$),cN.extend(_e,$),_e.create=function(tt){return j(tM(s,tt))},_e}(kS);Ks.Axios=x_,Ks.CanceledError=O_(),Ks.CancelToken=function(){if(ZA)return QA;ZA=1;var j=O_();function s($){if(typeof $!="function")throw new TypeError("executor must be a function.");var _e;this.promise=new Promise(function(rt){_e=rt});var tt=this;this.promise.then(function(rt){if(tt._listeners){var it,at=tt._listeners.length;for(it=0;it<at;it++)tt._listeners[it](rt);tt._listeners=null}}),this.promise.then=function(rt){var it,at=new Promise(function(ct){tt.subscribe(ct),it=ct}).then(rt);return at.cancel=function(){tt.unsubscribe(it)},at},$(function(rt){tt.reason||(tt.reason=new j(rt),_e(tt.reason))})}return s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.prototype.subscribe=function($){this.reason?$(this.reason):this._listeners?this._listeners.push($):this._listeners=[$]},s.prototype.unsubscribe=function($){if(this._listeners){var _e=this._listeners.indexOf($);_e!==-1&&this._listeners.splice(_e,1)}},s.source=function(){var $;return{token:new s(function(_e){$=_e}),cancel:$}},QA=s}(),Ks.isCancel=HA(),Ks.VERSION=XA().version,Ks.toFormData=AA(),Ks.AxiosError=$m(),Ks.Cancel=Ks.CanceledError,Ks.all=function(j){return Promise.all(j)},Ks.spread=tN?eN:(tN=1,eN=function(j){return function(s){return j.apply(null,s)}}),Ks.isAxiosError=function(){if(rN)return nN;rN=1;var j=ys;return nN=function(s){return j.isObject(s)&&s.isAxiosError===!0}}(),bS.exports=Ks,bS.exports.default=Ks;var As=ot(bS.exports);function lN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function dN(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?lN(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):lN(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}let L_,k_=0,jS=0;function VS(j,s,$,_e){return new Jt((tt,rt)=>{s.responseType=s.responseType||"json",s.data&&!$?(s.data=JSON.stringify(s.data),k_+=hu(s.data)):$&&(s.data.size?k_+=s.data.size:s.data instanceof FormData?k_+=dA(s.data):k_+=hu(JSON.stringify(s.data))),s.headers=s.headers||{},s.headers["Content-Type"]=s.headers["Content-Type"]||"application/json",s.method="POST",s.url=j,As.request(s).then(it=>{typeof it.data=="string"?jS+=hu(it.data):it.data instanceof ArrayBuffer||it.data instanceof Uint8Array?jS+=it.data.byteLength:jS+=hu(JSON.stringify(it.data)),_e&&tt({data:it.data,headers:it.headers}),tt(it.data)}).catch(it=>{As.isCancel(it)?rt(new rn(Nt.OPERATION_ABORTED,"cancel token canceled")):it.code==="ECONNABORTED"?rt(new rn(Nt.NETWORK_TIMEOUT,it.message)):it.response?rt(new rn(Nt.NETWORK_RESPONSE_ERROR,it.response.status)):rt(new rn(Nt.NETWORK_ERROR,it.message))})})}async function nM(j,s){let $=new Blob([s.data],{type:"buffer"});return await VS(j,dN(dN({},s),{},{data:$,headers:{"Content-Type":"application/octet-stream"}}),!0)}let rM=()=>(L_||L_||(L_=(window.location.protocol.split(":")[0]||"").toUpperCase(),L_))==="HTTPS",uN=()=>window.isSecureContext!==void 0,Sl=function(j){if(j.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return j;let s=j.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(s&&s[1]&&s[2]){let _e=s[1],tt=s[2];return"".concat(_e,".").concat(tt)}let $=j.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if($&&$[1]&&$[2]){let _e=$[1],tt=$[2];return"".concat(_e,".").concat(100*(Number(tt)+1))}return"4.0.0.999"}("4.20.0"),BS=function(){try{return JSON.parse("true")===!0}catch{return!0}}();var xu;(function(j){j.Default="default",j.Auto="auto",j.Relay="relay",j.SdRtn="sd-rtn"})(xu||(xu={}));let GS="v4.20.0-0-g334e514b-dirty(12/8/2023, 3:48:29 PM)",fs={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:100,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,DISABLE_FEC:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,ENABLE_DATASTREAM_2:!1,DATASTREAM_MAX_RETRANSMITS:10,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,ENABLE_INSTANT_VIDEO:!1,ENABLE_NTP_REPORT:!1,USE_XR:!1,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],PLUGIN_INFO:[]};function Tr(j,s,$){var _e,tt;vn(_e=Object.keys(fs)).call(_e,j)&&(!$&&vn(tt=Object.keys(op)).call(tt,j)||(fs[j]=s))}function Ft(j){return fs[j]}let op={};function pN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function On(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?pN(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):pN(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}var Yn;(function(j){j.SET_SESSION_ID="SET_SESSION_ID",j.SET_P2P_ID="SET_P2P_id",j.SET_DC_ID="SET_DC_id",j.SET_UID="SET_UID",j.SET_INT_UID="SET_INT_UID",j.SET_PUB_ID="SET_PUB_ID",j.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",j.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",j.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",j.AVOID_JOIN_START="AVOID_JOIN_START",j.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",j.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",j.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",j.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",j.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",j.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",j.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",j.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",j.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",j.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",j.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",j.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",j.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",j.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",j.RESET_KEY_METRICS="RESET_KEY_METRICS",j.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL",j.SET_USE_P2P="SET_USE_P2P",j.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE"})(Yn||(Yn={}));class oM{constructor(s,$,_e,tt){gt(this,"state",void 0),this.state={codec:s,audioCodec:$,mode:_e,clientId:tt,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1,useP2P:!1,p2pTransport:xu.Default}}dispatch(s){this.state=function($,_e){switch(_e.type){case Yn.SET_SESSION_ID:return On(On({},$),{},{sessionId:_e.sessionId});case Yn.SET_P2P_ID:return On(On({},$),{},{p2pId:_e.p2pId});case Yn.SET_UID:return On(On({},$),{},{uid:_e.uid});case Yn.SET_INT_UID:return On(On({},$),{},{intUid:_e.intUid});case Yn.SET_PUB_ID:return On(On({},$),{},{pubId:_e.pubId});case Yn.KEY_METRIC_CLIENT_CREATED:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{clientCreated:_e.metric})});case Yn.KEY_METRIC_JOIN_START:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{joinStart:_e.metric})});case Yn.AVOID_JOIN_START:return On(On({},$),{},{avoidJoinStart:_e.avoidJoinStart});case Yn.KEY_METRIC_JOIN_END:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{joinEnd:_e.metric})});case Yn.KEY_METRIC_REQUEST_AP_START:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{requestAPStart:_e.metric})});case Yn.KEY_METRIC_REQUEST_AP_END:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{requestAPEnd:_e.metric})});case Yn.KEY_METRIC_JOIN_GATEWAY_START:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{joinGatewayStart:_e.metric})});case Yn.KEY_METRIC_JOIN_GATEWAY_END:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{joinGatewayEnd:_e.metric})});case Yn.KEY_METRIC_PEER_CONNECTION_START:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{peerConnectionStart:_e.metric})});case Yn.KEY_METRIC_PEER_CONNECTION_END:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{peerConnectionEnd:_e.metric})});case Yn.KEY_METRIC_DESCRIPTION_START:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{descriptionStart:_e.metric})});case Yn.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{signalChannelOpen:_e.metric})});case Yn.KEY_METRIC_ICE_CONNECTION_END:return On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{iceConnectionEnd:_e.metric})});case Yn.KEY_METRIC_PUBLISH:{let tt=$.keyMetrics.publish,rt=tt.findIndex(it=>it.trackId===_e.metric.trackId);return rt!==-1?(tt[rt]=On(On({},tt[rt]),_e.metric),On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{publish:[...tt]})})):On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{publish:[...$.keyMetrics.publish,_e.metric]})})}case Yn.KEY_METRIC_SUBSCRIBE:{let tt=$.keyMetrics.subscribe,rt=tt.findIndex(it=>it.userId===_e.metric.userId&&it.type===_e.metric.type);return rt!==-1?(tt[rt]=On(On({},tt[rt]),_e.metric),On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{subscribe:[...tt]})})):On(On({},$),{},{keyMetrics:On(On({},$.keyMetrics),{},{subscribe:[...$.keyMetrics.subscribe,_e.metric]})})}case Yn.SET_CLOUD_PROXY_SERVER_MODE:return $.cloudProxyServerMode=_e.mode,$;case Yn.RECORD_JOIN_CHANNEL_SERVICE:return typeof _e.index!="number"?$.joinChannelServiceRecords=[...$.joinChannelServiceRecords,_e.record]:($.joinChannelServiceRecords[_e.index]=On(On({},$.joinChannelServiceRecords[_e.index]),_e.record),$.joinChannelServiceRecords=[...$.joinChannelServiceRecords]),$;case Yn.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return $.joinChannelServiceRecords=[],$;case Yn.RESET_KEY_METRICS:return $.keyMetrics={publish:[],subscribe:[]},$;case Yn.SET_USE_DATACHANNEL:return On(On({},$),{},{useDataChannel:_e.val});case Yn.SET_USE_P2P:return On(On({},$),{},{useP2P:_e.val});case Yn.SET_TRANSPORT_TYPE:return On(On({},$),{},{p2pTransport:_e.val});default:return $}}(this.state,s)}set sessionId(s){this.dispatch({type:Yn.SET_SESSION_ID,sessionId:s})}get sessionId(){return this.state.sessionId}set codec(s){this.state.codec=s}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(s){this.dispatch({type:Yn.SET_P2P_ID,p2pId:s})}get p2pId(){return this.state.p2pId}set dcId(s){this.dispatch({type:Yn.SET_DC_ID,dcId:s})}get dcId(){return this.state.dcId}set uid(s){this.dispatch({type:Yn.SET_UID,uid:s})}get uid(){return this.state.uid}set intUid(s){this.dispatch({type:Yn.SET_INT_UID,intUid:s})}get intUid(){return this.state.intUid}set pubId(s){this.dispatch({type:Yn.SET_PUB_ID,pubId:s})}get pubId(){return this.state.pubId}set cloudProxyServerMode(s){this.dispatch({type:Yn.SET_CLOUD_PROXY_SERVER_MODE,mode:s})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useDataChannel(s){this.dispatch({type:Yn.SET_USE_DATACHANNEL,val:s})}get useDataChannel(){return this.state.useDataChannel}set useP2P(s){this.dispatch({type:Yn.SET_USE_P2P,val:s})}get useP2P(){return this.state.useP2P}set p2pTransport(s){this.dispatch({type:Yn.SET_TRANSPORT_TYPE,val:s})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:Yn.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:Yn.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:Yn.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:Yn.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:Yn.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:Yn.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:Yn.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:Yn.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:Yn.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:Yn.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:Yn.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:Yn.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(s,$,_e,tt){this.dispatch({type:Yn.KEY_METRIC_PUBLISH,metric:On(On({trackId:s,type:$},_e&&{publishStart:_e}),tt&&{publishEnd:tt})})}subscribe(s,$,_e,tt,rt,it,at){this.dispatch({type:Yn.KEY_METRIC_SUBSCRIBE,metric:On(On(On(On(On({userId:s,type:$},_e&&{subscribeStart:_e}),tt&&{subscribeEnd:tt}),rt&&{firstFrame:rt}),it&&{streamAdded:it}),at&&{firstDecoded:at})})}massSubscribe(s,$,_e,tt){s.forEach(rt=>{this.dispatch({type:Yn.KEY_METRIC_SUBSCRIBE,metric:On(On(On({userId:rt.userId,type:rt.type},$&&{subscribeStart:$}),_e&&{subscribeEnd:_e}),tt&&{firstFrame:tt})})})}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(s,$){s.service==="gateway"&&Array.isArray(s.urls)&&(s.urls=s.urls.map(_e=>_e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")));try{return typeof $!="number"?(this.dispatch({type:Yn.RECORD_JOIN_CHANNEL_SERVICE,record:On(On({},s),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):($<0||$>=this.state.joinChannelServiceRecords.length||this.dispatch({type:Yn.RECORD_JOIN_CHANNEL_SERVICE,record:s,index:$}),$)}catch{return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:Yn.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:Yn.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch{return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(s){this.dispatch({type:Yn.AVOID_JOIN_START,avoidJoinStart:s})}}var ip,hN;(function(j){j.h264="h264",j.h265="h265",j.vp8="vp8",j.vp9="vp9",j.av1="av1"})(ip||(ip={})),function(j){j.opus="opus",j.pcma="pcma",j.pcmu="pcmu",j.g722="g722"}(hN||(hN={}));let M_=new class extends Fr{reportLogUploadError(j){this.emit("REPORT_LOG_UPLOAD",j)}};class iM{constructor(s){gt(this,"logger",void 0),gt(this,"prefixLists",[]),this.logger=s}debug(){for(var s=arguments.length,$=new Array(s),_e=0;_e<s;_e++)$[_e]=arguments[_e];this.logger.debug(...this.prefixLists,...$)}info(){for(var s=arguments.length,$=new Array(s),_e=0;_e<s;_e++)$[_e]=arguments[_e];this.logger.info(...this.prefixLists,...$)}warning(){for(var s=arguments.length,$=new Array(s),_e=0;_e<s;_e++)$[_e]=arguments[_e];this.logger.warning(...this.prefixLists,...$)}error(){for(var s=arguments.length,$=new Array(s),_e=0;_e<s;_e++)$[_e]=arguments[_e];this.logger.error(...this.prefixLists,...$)}prefix(s){return this.prefixLists.push(s),this}popPrefix(){return this.prefixLists.pop(),this}}function WS(){let j=new Date;return j.toTimeString().split(" ")[0]+":"+j.getMilliseconds()}function fN(){let j=new Date,s=/((\d+:){2}\d+)/.exec(new Date().toUTCString());return s?(s==null?void 0:s[0])+":"+j.getUTCMilliseconds():j.toTimeString().split(" ")[0]+":"+j.getMilliseconds()}let Tl={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},U_=Date.now(),F1=j=>{for(let s in Tl)if(Object.prototype.hasOwnProperty.call(Tl,s)&&Tl[s]===j)return s;return"DEFAULT"},Et=new class{constructor(){gt(this,"proxyServerURL",void 0),gt(this,"logLevel",Tl.DEBUG),gt(this,"uploadState","collecting"),gt(this,"uploadLogWaitingList",[]),gt(this,"uploadLogUploadingList",[]),gt(this,"uploadErrorCount",0),gt(this,"currentLogID",0),gt(this,"url",void 0),gt(this,"extLog",(j,s)=>{this.appendLogToWaitingList(j,...s)})}debug(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];let _e=[Tl.DEBUG].concat(s);this.log.apply(this,_e)}info(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];let _e=[Tl.INFO].concat(s);this.log.apply(this,_e)}warning(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];let _e=[Tl.WARNING].concat(s);this.log.apply(this,_e)}warn(){this.warning(...arguments)}error(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];let _e=[Tl.ERROR].concat(s);this.log.apply(this,_e)}upload(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];let _e=[Tl.DEBUG].concat(s);this.uploadLog.apply(this,_e)}setLogLevel(j){j=Math.min(Math.max(0,j),4),this.logLevel=j}enableLogUpload(){Tr("UPLOAD_LOG",!0)}disableLogUpload(){Tr("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(j){this.proxyServerURL=j}prefix(j){return new iM(this).prefix(j)}log(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];if(Date.now()-U_<100)return void setTimeout(()=>{this.log(...s)},Date.now()-U_);let _e=Math.max(0,Math.min(4,s[0]));if(s[0]=WS()+" Agora-SDK [".concat(F1(_e),"]:"),this.appendLogToWaitingList(_e,...s),_e<this.logLevel)return;let tt=WS()+" %cAgora-SDK [".concat(F1(_e),"]:"),rt=[];if(!Ft("USE_NEW_LOG"))switch(_e){case Tl.DEBUG:rt=[tt,"color: #64B5F6;"].concat(s.slice(1)),console.log.apply(console,rt);break;case Tl.INFO:rt=[tt,"color: #1E88E5; font-weight: bold;"].concat(s.slice(1)),console.log.apply(console,rt);break;case Tl.WARNING:rt=[tt,"color: #FB8C00; font-weight: bold;"].concat(s.slice(1)),console.warn.apply(console,rt);break;case Tl.ERROR:rt=[tt,"color: #B00020; font-weight: bold;"].concat(s.slice(1)),console.error.apply(console,rt)}}uploadLog(){for(var j=arguments.length,s=new Array(j),$=0;$<j;$++)s[$]=arguments[$];if(Date.now()-U_<100)return void setTimeout(()=>{this.uploadLog(...s)},Date.now()-U_);let _e=Math.max(0,Math.min(4,s[0]));s[0]=WS()+" Agora-SDK [".concat(F1(_e),"]:"),this.appendLogToWaitingList(_e,...s)}appendLogToWaitingList(j){if(!Ft("UPLOAD_LOG"))return;for(var s=arguments.length,$=new Array(s>1?s-1:0),_e=1;_e<s;_e++)$[_e-1]=arguments[_e];Array.isArray($[0])?$[0][0]=fN()+" Agora-SDK [".concat(F1(j),"]:"):$[0]=fN()+" Agora-SDK [".concat(F1(j),"]:");let tt="";$.forEach(rt=>{typeof rt=="object"&&(rt=JSON.stringify(rt)),tt+="".concat(rt," ")}),this.uploadLogWaitingList.push({payload_str:tt,log_level:j,log_item_id:this.currentLogID++}),this.uploadState==="uploading"&&this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",this.uploadLogUploadingList.length===0&&this.uploadLogInterval()}async uploadLogs(){let j=this.uploadLogUploadingList,s={sdk_version:Sl,process_id:Ft("PROCESS_ID"),payload:JSON.stringify(j)};return tu(async()=>{let $=await As.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(Ft("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Ft("LOG_UPLOAD_SERVER"),"/upload/v1")),s,{responseType:"text"});if($.data!=="OK"){let _e=new Error("unexpected upload log response");throw _e.response=$,_e}},()=>(this.uploadLogUploadingList=[],!1),$=>($.response?M_.reportLogUploadError({status:$.response.status,data:$.response.data,headers:$.response.headers,message:$.message}):$.request?M_.reportLogUploadError({status:$.request.status,message:$.message}):M_.reportLogUploadError({status:-1,message:$.message}),!0),{timeout:Ft("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:Ft("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){this.uploadLogUploadingList.length===0&&this.uploadLogWaitingList.length===0||(this.uploadLogUploadingList.length===0&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,Ft("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),Ft("UPLOAD_LOG_INTERVAL"))}).catch(j=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),Ft("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout(()=>this.uploadLogInterval(),Ft("UPLOAD_LOG_RETRY_INTERVAL_V1"))}))}};var gN,mN;function sM(j){return zo(j.reportId,"params.reportId",0,100,!1),zo(j.category,"params.category",0,100,!1),zo(j.event,"params.event",0,100,!1),zo(j.label,"params.label",0,100,!1),Sr(j.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(function(j){j.FREE="free",j.UPLOADING="uploading"})(gN||(gN={})),function(j){j[j.MISC=0]="MISC",j[j.INTERNAL_EVENT=1]="INTERNAL_EVENT",j[j.PUBLIC_EVENT=2]="PUBLIC_EVENT",j[j.WEB_EVENT=3]="WEB_EVENT",j[j.INTERNAL_API=4]="INTERNAL_API",j[j.WEB_API=5]="WEB_API",j[j.PUBLIC_API=6]="PUBLIC_API"}(mN||(mN={}));let aM={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var Co,kr,_N,EN;function yN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Vn(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?yN(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):yN(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}(function(j){j.PUBLISH="publish",j.SUBSCRIBE="subscribe",j.WS_COMPRESSOR_INIT="ws_compressor_init",j.SESSION_INIT="session_init",j.JOIN_CHOOSE_SERVER="join_choose_server",j.REQ_USER_ACCOUNT="req_user_account",j.JOIN_GATEWAY="join_gateway",j.REJOIN_GATEWAY="rejoin_gateway",j.STREAM_SWITCH="stream_switch",j.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",j.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",j.FIRST_VIDEO_RECEIVED="first_video_received",j.FIRST_AUDIO_RECEIVED="first_audio_received",j.FIRST_VIDEO_DECODE="first_video_decode",j.FIRST_AUDIO_DECODE="first_audio_decode",j.ON_ADD_AUDIO_STREAM="on_add_audio_stream",j.ON_ADD_VIDEO_STREAM="on_add_video_stream",j.ON_UPDATE_STREAM="on_update_stream",j.ON_REMOVE_STREAM="on_remove_stream",j.USER_ANALYTICS="req_user_analytics",j.PC_STATS="pc_stats",j.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities"})(Co||(Co={})),function(j){j.SESSION="io.agora.pb.Wrtc.Session",j.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",j.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",j.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",j.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",j.PUBLISH="io.agora.pb.Wrtc.Publish",j.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",j.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",j.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",j.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",j.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",j.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",j.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",j.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",j.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",j.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",j.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",j.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",j.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",j.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",j.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",j.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",j.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",j.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",j.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",j.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",j.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",j.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",j.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",j.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",j.PC_STATS="io.agora.pb.Wrtc.PCStats",j.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities"}(kr||(kr={})),function(j){j[j.WORKER_EVENT=156]="WORKER_EVENT",j[j.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(_N||(_N={})),function(j){j[j.SESSION=26]="SESSION",j[j.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",j[j.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",j[j.JOIN_GATEWAY=28]="JOIN_GATEWAY",j[j.PUBLISH=30]="PUBLISH",j[j.SUBSCRIBE=29]="SUBSCRIBE",j[j.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",j[j.STREAM_SWITCH=32]="STREAM_SWITCH",j[j.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",j[j.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",j[j.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",j[j.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",j[j.API_INVOKE=41]="API_INVOKE",j[j.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",j[j.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",j[j.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",j[j.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",j[j.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",j[j.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",j[j.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",j[j.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",j[j.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",j[j.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",j[j.WORKER_EVENT=156]="WORKER_EVENT",j[j.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",j[j.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",j[j.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",j[j.USER_ANALYTICS=1e4]="USER_ANALYTICS",j[j.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(EN||(EN={}));class j1{constructor(){gt(this,"baseInfoMap",new Map),gt(this,"proxyServer",void 0),gt(this,"eventUploadTimer",void 0),gt(this,"setSessionIdTimer",void 0),gt(this,"url",void 0),gt(this,"backupUrl",void 0),gt(this,"_appId",void 0),gt(this,"keyEventUploadPendingItems",[]),gt(this,"normalEventUploadPendingItems",[]),gt(this,"apiInvokeUploadPendingItems",[]),gt(this,"apiInvokeCount",0),gt(this,"ltsList",[]),gt(this,"lastSendNormalEventTime",Date.now()),gt(this,"customReportCounterTimer",void 0),gt(this,"customReportCount",0),gt(this,"extApiInvoke",async s=>{for(let $ of s){let _e=Vn(Vn({},$),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Wr.TRACER});this.sendApiInvoke(_e)}}),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),Ft("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),Ft("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(s){return this.baseInfoMap.get(s)}adjustSessionStartTime(s){if(!this.baseInfoMap.has(s)&&!this.baseInfoMap.get(s))return void Et.error("adjust session ".concat(s," start time, sid is not exist or info is undefined"));let $=this.baseInfoMap.get(s),_e=Date.now(),tt=$.startTime;$.startTime=_e,Et.debug("rewrite session ".concat(s," startTime: ").concat(_e," , ").concat(_e-tt,"ms")),this.baseInfoMap.set(s,$)}setAppId(s){this._appId=s}reportApiInvoke(s,$,_e){$.timeout=$.timeout||6e4,$.reportResult=$.reportResult===void 0||$.reportResult;let tt=Date.now();this.apiInvokeCount+=1;let rt=this.apiInvokeCount,it=()=>({tag:$.tag,invokeId:rt,sid:s,name:$.name,apiInvokeTime:tt,options:$.options,states:$.states||null}),at=!!Ft("SHOW_REPORT_INVOKER_LOG");at&&Et.info("".concat($.name," start"),$.options);let ct=!1;xo($.timeout).then(()=>{ct||(this.sendApiInvoke(Vn(Vn({},it()),{},{error:Nt.API_INVOKE_TIMEOUT,success:!1})),Et.debug("".concat($.name," timeout")))});let dt=new rn(Nt.UNEXPECTED_ERROR,"".concat($.name,": this api invoke is end"));return{onSuccess:ut=>{let pt=()=>{if(ct)throw dt;return ct=!0,this.sendApiInvoke(Vn(Vn({},it()),{},{success:!0},$.reportResult&&{result:ut})),at&&Et.info("".concat($.name," onSuccess")),ut};return _e?pA(pt,$.name+"Success",_e,()=>ct=!0):pt()},onError:ut=>{let pt=()=>{if(ct)throw ut;ct=!0,this.sendApiInvoke(Vn(Vn({},it()),{},{success:!1,error:ut})),at&&Et.info("".concat($.name," onFailure"),ut.toString())};return _e?pA(pt,$.name+"Error",_e,()=>ct=!0):pt()}}}sessionInit(s,$){if(this.baseInfoMap.has(s))return;let _e=Date.now(),tt=this.createBaseInfo(s,_e);tt.cname=$.cname;let rt=Object.assign({},{willUploadConsoleLog:Ft("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:BS?"global":"oversea",areas:Ft("AREAS")&&Ft("AREAS").join(",")},$.extend),{stringUid:it,channelProfile:at,channelMode:ct,isABTestSuccess:dt,lsid:ut,clientRole:pt}=$,mt=Date.now(),yt=Vn(Vn({},tt),{},{eventType:Co.SESSION_INIT,appid:$.appid,browser:navigator.userAgent,build:GS,lts:mt,elapse:mt-_e,extend:JSON.stringify(rt),mode:$.mode,process:Ft("PROCESS_ID"),appType:Ft("APP_TYPE"),success:!0,version:Sl,stringUid:it,channelProfile:at,channelMode:ct,isABTestSuccess:dt,lsid:ut,clientType:20,clientRole:pt,serviceId:Ft("PROCESS_ID"),extensionID:Ft("PLUGIN_INFO").join(",")||""});this.send({type:kr.SESSION,data:yt},!0)}joinChooseServer(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{eventType:Co.JOIN_CHOOSE_SERVER,lts:rt,eventElapse:rt-$.lts,chooseServerAddr:$.csAddr,errorCode:$.ec,elapse:rt-_e.startTime,success:$.succ,chooseServerAddrList:JSON.stringify($.serverList),uid:$.uid?parseInt($.uid):null,cid:$.cid?parseInt($.cid):null,chooseServerIp:$.csIp||"",opid:$.opid,unilbsServerIds:$.unilbsServerIds,extend:$.extend||void 0,isHttp3:$.isHttp3});this.send({type:kr.JOIN_CHOOSE_SERVER,data:it},!0)}reqUserAccount(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{eventType:Co.REQ_USER_ACCOUNT,lts:rt,success:$.success,serverAddress:$.serverAddr,stringUid:$.stringUid,uid:$.uid,errorCode:$.errorCode,elapse:rt-_e.startTime,eventElapse:rt-$.lts,extend:JSON.stringify($.extend)});this.send({type:kr.REQ_USER_ACCOUNT,data:it},!0)}joinGateway(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info;$.vid&&(tt.vid=$.vid),tt.uid=$.uid,tt.cid=$.cid;let rt=Date.now(),{firstSuccess:it,avoidJoinStartTime:at,isProxy:ct,addr:dt}=$,ut=rt-(it&&at?at:_e.startTime),pt=Vn(Vn({},tt),{},{eventType:Co.JOIN_GATEWAY,lts:rt,gatewayAddr:$.addr,success:$.succ,errorCode:$.ec,elapse:ut,eventElapse:rt-$.lts,firstSuccess:it,signalChannel:$.signalChannel}),mt=pt.success?1:0;if($.succ&&(_e.lastJoinSuccessTime=rt),it)this.send({type:kr.JOIN_GATEWAY,data:pt},!0);else{let yt;if(dt)if(ct){let Ct=dt.match(/h=(\d{1,3}-){3}\d{1,3}/g),It=dt.match(/p=[0-9]{1,6}/g);yt={isSuccess:mt,gatewayIp:Ct&&Ct.length?Ct[0].split("=")[1].replace(/-/g,"."):"",port:It&&It.length?It[0].split("=")[1]:"",isProxy:ct?1:0}}else{let Ct=dt.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),It=dt.match(/(:|p=)[0-9]{1,6}/g);yt={isSuccess:mt,gatewayIp:Ct&&Ct.length?Ct[0].split("//")[1].replace(/-/g,"."):"",port:It&&It.length?It[0].split(/:|p=/g)[1]:"",isProxy:ct?1:0}}else yt={isSuccess:mt,gatewayIp:"",port:"",isProxy:ct?1:0};delete pt.success,delete pt.eventType,delete pt.firstSuccess,pt.vid=Number(pt.vid);let At=Object.assign({},pt,yt,{eventType:Co.REJOIN_GATEWAY});this.send({type:kr.RE_JOIN_GATEWAY,data:At},!0)}}joinChannelTimeout(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=Date.now(),rt=Vn(Vn({},_e.info),{},{lts:tt,timeout:$,elapse:tt-_e.startTime});this.send({type:kr.JOIN_CHANNEL_TIMEOUT,data:rt},!0)}publish(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{eventType:Co.PUBLISH,lts:rt,eventElapse:$.eventElapse,elapse:rt-_e.startTime,success:$.succ,errorCode:$.ec,videoName:$.videoName,audioName:$.audioName,screenName:$.screenName,screenshare:$.screenshare,audio:$.audio,video:$.video,p2pid:$.p2pid,publishRequestid:$.publishRequestid});this.send({type:kr.PUBLISH,data:it},!0)}subscribe(s,$,_e){let tt=this.baseInfoMap.get(s);if(!tt)return;let rt=tt.info,it=Date.now(),at=Vn(Vn({},rt),{},{eventType:Co.SUBSCRIBE,lts:it,eventElapse:$.eventElapse,elapse:it-tt.startTime,success:$.succ,errorCode:$.ec,video:$.video,audio:$.audio,subscribeRequestid:$.subscribeRequestid,p2pid:$.p2pid},_e&&{extend:JSON.stringify({isMassSubscribe:!0})});typeof $.peerid=="string"?at.peerSuid=$.peerid:at.peer=$.peerid,this.send({type:kr.SUBSCRIBE,data:at},!0)}wsCompressorInit(s){var $;let _e=[...zs($=this.baseInfoMap).call($)],tt=_e.length?_e[0]:"UnableToGetSid",rt=this.baseInfoMap.get(tt);if(!rt)return;let it=rt.info,at=Date.now(),ct=Vn(Vn({},it),{},{eventType:Co.WS_COMPRESSOR_INIT,lts:at,eventElapse:s.eventElapse,elapse:at-rt.startTime,status:s.status?1:2});this.send({type:kr.WS_COMPRESSOR_INIT,data:ct},!0)}firstRemoteVideoDecode(s,$,_e,tt){let rt=this.baseInfoMap.get(s);if(!rt)return;let it=rt.info,at=Date.now(),ct=Vn(Vn(Vn({},it),tt),{},{elapse:at-rt.startTime,eventType:$,lts:at,firstDecodeFrame:Math.max(at-rt.startTime,0),apEnd:Math.max(tt.apEnd-rt.startTime,0),apStart:Math.max(tt.apStart-rt.startTime,0),joinGwEnd:Math.max(tt.joinGwEnd-rt.startTime,0),joinGwStart:Math.max(tt.joinGwStart-rt.startTime,0),pcEnd:Math.max(tt.pcEnd-rt.startTime,0),pcStart:Math.max(tt.pcStart-rt.startTime,0),subscriberEnd:Math.max(tt.subscriberEnd-rt.startTime,0),subscriberStart:Math.max(tt.subscriberStart-rt.startTime,0),videoAddNotify:Math.max(tt.videoAddNotify-rt.startTime,0)});this.send({type:_e,data:ct},!0)}firstRemoteFrame(s,$,_e,tt){let rt=this.baseInfoMap.get(s);if(!rt)return;let it=rt.info,at=Date.now(),ct=Vn(Vn(Vn({},it),tt),{},{elapse:at-rt.startTime,eventType:$,lts:at});this.send({type:_e,data:ct},!0)}pcStats(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn(Vn({},tt),$),{},{vid:tt.vid===void 0?0:Number(tt.vid),elapse:rt-_e.startTime,eventType:Co.PC_STATS,lts:rt});this.send({type:kr.PC_STATS,data:it},!0)}updateRemoteRTPCapabilities(s,$){if(s){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn(Vn({},tt),$),{},{vid:tt.vid===void 0?0:Number(tt.vid),eventType:Co.UPDATE_REMOTE_RTPCAPABILITIES,lts:rt});this.send({type:kr.UPDATE_REMOTE_RTPCAPABILITIES,data:it},!0)}}onGatewayStream(s,$,_e,tt){let rt=this.baseInfoMap.get(s);if(!rt)return;let it=rt.info,at=Date.now(),ct=Vn(Vn(Vn({},it),tt),{},{eventType:$,lts:at});this.send({type:_e,data:ct},!0)}streamSwitch(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{eventType:Co.STREAM_SWITCH,lts:rt,isDual:$.isdual,elapse:rt-_e.startTime,success:$.succ});this.send({type:kr.STREAM_SWITCH,data:it},!0)}requestProxyAppCenter(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{eventType:Co.REQUEST_PROXY_APPCENTER,lts:rt,eventElapse:rt-$.lts,elapse:rt-_e.startTime,APAddr:$.APAddr,workerManagerList:$.workerManagerList,response:$.response,errorCode:$.ec,success:$.succ});this.send({type:kr.REQUEST_PROXY_APPCENTER,data:it},!0)}requestProxyWorkerManager(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{eventType:Co.REQUEST_PROXY_WORKER_MANAGER,lts:rt,eventElapse:rt-$.lts,elapse:rt-_e.startTime,workerManagerAddr:$.workerManagerAddr,response:$.response,errorCode:$.ec,success:$.succ});this.send({type:kr.REQUEST_PROXY_WORKER_MANAGER,data:it},!0)}setProxyServer(s){this.proxyServer=s,s?Et.debug("reportProxyServerurl: ".concat(s)):Et.debug("disable reportProxyServerurl: ".concat(s))}peerPublishStatus(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn({},tt),{},{subscribeElapse:$.subscribeElapse,peer:$.peer,peerPublishDuration:Math.max($.audioPublishDuration,$.videoPublishDuration),audiotag:$.audioPublishDuration>0?1:-1,videotag:$.videoPublishDuration>0?1:-1,lts:rt,elapse:rt-_e.startTime,joinChannelSuccessElapse:rt-(_e.lastJoinSuccessTime||rt),peerPublishDurationVideo:$.videoPublishDuration,peerPublishDurationAudio:$.audioPublishDuration});this.send({type:kr.PEER_PUBLISH_STATUS,data:it},!0)}workerEvent(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now();(function(it,at,ct){let dt=it[at];if(!dt||typeof dt!="string")return[it];it[at]="";let ut=hu(JSON.stringify(it)),pt=0,mt=[],yt=0;for(let At=0;At<dt.length;At++)yt+=dt.charCodeAt(At)<=127?1:3,yt<=ct-ut||(mt[mt.length]=Wp(Wp({},it),{},{[at]:dt.substring(pt,At)}),pt=At,yt=dt.charCodeAt(At)<=127?1:3);return pt!==dt.length-1&&(mt[mt.length]=Wp(Wp({},it),{},{[at]:dt.substring(pt)})),mt})(Vn(Vn(Vn({},tt),$),{},{elapse:rt-_e.startTime,lts:rt,productType:"WebRTC"}),"payload",1300).forEach(it=>this.send({type:kr.WORKER_EVENT,data:it},!0))}apworkerEvent(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn(Vn({},tt),$),{},{elapse:rt-_e.startTime,lts:rt});this.send({type:kr.AP_WORKER_EVENT,data:it},!0)}joinWebProxyAP(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn(Vn({},tt),$),{},{elapse:rt-_e.startTime,lts:rt,extend:$.extend||void 0});this.send({type:kr.JOIN_WEB_PROXY_AP,data:it},!0)}WebSocketQuit(s,$){let _e=this.baseInfoMap.get(s);if(!_e)return;let tt=_e.info,rt=Date.now(),it=Vn(Vn(Vn({},tt),$),{},{elapse:rt-_e.startTime,lts:rt});this.send({type:kr.WEBSOCKET_QUIT,data:it},!0)}async sendCustomReportMessage(s,$){if(this.customReportCount+=$.length,this.customReportCount>Ft("CUSTOM_REPORT_LIMIT"))throw new rn(Nt.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));let _e=Date.now(),tt=$.map(rt=>({type:kr.USER_ANALYTICS,data:Vn(Vn({sid:s},rt),{},{lts:_e})}));try{Ft("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(tt):await this.postDataToStatsCollector(tt)}catch(rt){throw Et.error("send custom report message failed",rt.toString()),new rn(Nt.CUSTOM_REPORT_SEND_FAILED,rt.message)}}sendApiInvoke(s){let $=Ft("NOT_REPORT_EVENT");if(s.tag&&vn($)&&vn($).call($,s.tag))return!1;if(s.sid===null)return this.apiInvokeUploadPendingItems.push(s),!1;let _e=this.baseInfoMap.get(s.sid);if(!_e)return this.apiInvokeUploadPendingItems.push(s),!1;let{cname:tt,uid:rt,cid:it}=_e.info,at;if(s.lts=s.lts||Date.now(),s.error)if(s.error instanceof rn){let{code:dt,message:ut}=s.error;at=dt||ut||s.error.toString()}else at=s.error.toString();let ct={invokeId:s.invokeId,sid:s.sid,cname:tt,cid:it,uid:rt,lts:s.lts,success:s.success,elapse:s.lts-_e.startTime,execElapse:s.lts-s.apiInvokeTime,apiName:s.name,options:s.options?JSON.stringify(s.options):void 0,execStates:s.states?JSON.stringify(s.states):void 0,execResult:s.result?JSON.stringify(s.result):void 0,errorCode:s.error?at:void 0,errorMsg:s.error?JSON.stringify(s.error):void 0};return this.send({type:kr.API_INVOKE,data:ct},!1),!0}appendSessionId(){j1.__CLIENT_LIST__.forEach(s=>{if(s._sessionId){let $=this.apiInvokeUploadPendingItems.length;for(let _e=0;_e<$;_e++){let tt=this.apiInvokeUploadPendingItems.shift();tt&&(tt.sid=s._sessionId,this.sendApiInvoke(Object.assign({},tt)))}}})}send(s,$){if($)return this.keyEventUploadPendingItems.push(s),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(s),this.normalEventUploadPendingItems.length>Ft("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(s,$){let _e=[],tt=[];for(;s.length;){let it=s.shift();_e.length<20?_e.push(it):tt.push(it)}s.push(...tt);for(let it of[..._e]){var rt;this.ltsList.indexOf(it.data.lts)!==-1?(it.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(it.data.lts)):(this.ltsList.push(it.data.lts),R1(rt=this.ltsList).call(rt,(at,ct)=>at-ct))}return $||(this.lastSendNormalEventTime=Date.now()),Ft("ENABLE_EVENT_REPORT")&&_e.length&&(Ft("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(_e):this.postDataToStatsCollector(_e)).catch((it=>at=>{Ft("EVENT_REPORT_RETRY")&&($?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(it):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(it),this.normalEventUploadPendingItems.length>Ft("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-Ft("NORMAL_EVENT_QUEUE_CAPACITY")),Et.warning("report: drop normal events"))))})(_e)),s}async postDataToStatsCollector2(s){uo.networkState===us.OFFLINE&&await Jt.race([uo.onlineWaiter,xo(2*po.maxRetryTimeout)]);let $=rt=>{let it=new Uint8Array;return rt.forEach(at=>{let ct=mS(JSON.stringify(at.data)),dt=new ArrayBuffer(5),ut=(mt=>{let yt=0;return Object.entries(kr).forEach(At=>{let[Ct,It]=At;It===mt.type&&(yt=EventNameToID[Ct])}),yt})(at),pt=new DataView(dt);pt.setUint16(0,ct.byteLength,!0),pt.setUint8(2,255&ut),pt.setUint8(3,ut>>>8&255),pt.setUint8(4,ut>>>16&255),it=rA(it,new Uint8Array(dt)),it=rA(it,ct)}),it},_e="event",tt=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Ft("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(_e):"https://".concat(Ft("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(_e);for(let rt=0;rt<2;rt+=1){rt===1&&(tt=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Ft("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(_e):"https://".concat(Ft("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(_e));try{await VS(tt,{timeout:1e4,data:$(s),headers:Vn(Vn({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(it){if(rt===1)throw it;continue}return}}async postDataToStatsCollector(s){let $=arguments.length>1&&arguments[1]!==void 0&&arguments[1],_e={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:s.map(it=>JSON.stringify(it)),vid:(it=>{let at=it&&it.data.sid&&this.baseInfoMap.get(it.data.sid);return at&&at.info.vid&&+at.info.vid||0})(s[0])};uo.networkState===us.OFFLINE&&await Jt.race([uo.onlineWaiter,xo(2*po.maxRetryTimeout)]);let tt=$?"/events/proto-raws":"/events/messages",rt=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Ft("EVENT_REPORT_DOMAIN"),"&p=").concat(Ft("STATS_COLLECTOR_PORT"),"&d=").concat(tt):"https://".concat(Ft("EVENT_REPORT_DOMAIN"),":").concat(Ft("STATS_COLLECTOR_PORT")).concat(tt));for(let it=0;it<2;it+=1){it===1&&(rt=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(Ft("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(Ft("STATS_COLLECTOR_PORT"),"&d=").concat(tt):"https://".concat(Ft("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(Ft("STATS_COLLECTOR_PORT")).concat(tt)));try{$?await nM(rt,{timeout:1e4,data:_e}):await VS(rt,{timeout:1e4,data:_e})}catch(at){if(it===1)throw at;continue}return}}createBaseInfo(s,$){let _e=Object.assign({},aM);return _e.sid=s,this.baseInfoMap.set(s,{info:_e,startTime:$}),_e}reportResourceTiming(s,$){let _e=performance.getEntriesByName(s),tt=_e[_e.length-1];tt&&this.reportApiInvoke($,{name:"Client.resourceTiming",options:tt,tag:Wr.TRACER}).onSuccess()}}function xn(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(s,$,_e){let tt=_e.value;if(typeof tt=="function"){let rt=j.className||s.__className__||(s.constructor.name==="AgoraRTCClient"?"Client":s.constructor.name);_e.value=function(){for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];let dt=at;if(j.argsMap)try{dt=j.argsMap(this,...at)}catch(pt){Et.warning(pt),dt=[]}try{JSON.stringify(dt)}catch{Et.warning("arguments for method ".concat(rt,".").concat(String($)," not serializable for apiInvoke.")),dt=[]}let ut=(j.report||An).reportApiInvoke(this._sessionId||null,{name:"".concat(rt,".").concat(String($)),options:dt,tag:Wr.TRACER,reportResult:j.reportResult},j.throttleTime);try{let pt=tt.apply(this,at);return pt instanceof Jt?pt.then(mt=>(ut.onSuccess(j.reportResult&&mt),mt)).catch(mt=>{throw ut.onError(mt),mt}):(ut.onSuccess(j.reportResult&&pt),pt)}catch(pt){throw ut.onError(pt),pt}}}return _e}}gt(j1,"__CLIENT_LIST__",[]);let An=new j1;M_.on("REPORT_LOG_UPLOAD",j=>{j.networkState=uo.networkState,An.reportApiInvoke(null,{name:"logUploadError",options:j,tag:Wr.TRACER})});let cM=["CHINA","GLOBAL"],gs=function(){let j="us".concat("erna","me"),s="pa".concat("sswo","rd"),$=["t","s","t"];$.splice(1,0,"e");let _e=$.join(""),tt=[];for(let at=0;at<6;at++)tt.push("1");let rt=tt.join(""),it={};return it[j]=_e,it[s]=rt,Object.assign(it,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=gs,BS||(fs.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],fs.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],fs.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],fs.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],fs.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],fs.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],fs.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",fs.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",fs.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",fs.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",fs.AREAS=["NORTH_AMERICA","OVERSEA"]);let SN=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],sp=[];function Yp(j,s){return!!s&&sp.some($=>$.uid===j&&$.channelName===s)}j1.__CLIENT_LIST__=sp;var HS,Ns,Fm,V1,Ys,_i,Dn,Kn,En,Pn,Lu,Un,TN,es,$n,bo,ap,lM=Xu("Array").values,dM=$p,uM=Is,pM=wt,hM=lM,zS=Array.prototype,fM={DOMTokenList:!0,NodeList:!0},nu=ot(function(j){var s=j.values;return j===zS||pM(zS,j)&&s===zS.values||uM(fM,dM(j))?hM:s});function on(j,s,$,_e){var tt,rt=arguments.length,it=rt<3?s:_e===null?_e=Object.getOwnPropertyDescriptor(s,$):_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")it=Reflect.decorate(j,s,$,_e);else for(var at=j.length-1;at>=0;at--)(tt=j[at])&&(it=(rt<3?tt(it):rt>3?tt(s,$,it):tt(s,$))||it);return rt>3&&it&&Object.defineProperty(s,$,it),it}function bt(j,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(j,s)}(function(j){j.L1T1="L1T1",j.L1T2="L1T2",j.L1T3="L1T3",j.L2T1_KEY="L2T1_KEY",j.L2T2_KEY="L2T2_KEY",j.L2T3_KEY="L2T3_KEY",j.L3T1_KEY="L3T1_KEY",j.L3T2_KEY="L3T2_KEY",j.L3T3_KEY="L3T3_KEY"})(HS||(HS={})),function(j){j.CERTIFICATE="certificate",j.CODEC="codec",j.CANDIDATE_PAIR="candidate-pair",j.LOCAL_CANDIDATE="local-candidate",j.REMOTE_CANDIDATE="remote-candidate",j.INBOUND="inbound-rtp",j.TRACK="track",j.OUTBOUND="outbound-rtp",j.PC="peer-connection",j.REMOTE_INBOUND="remote-inbound-rtp",j.REMOTE_OUTBOUND="remote-outbound-rtp",j.TRANSPORT="transport",j.CSRC="csrc",j.DATA_CHANNEL="data-channel",j.STREAM="stream",j.SENDER="sender",j.RECEIVER="receiver"}(Ns||(Ns={})),function(j){j[j.ACCESS_POINT=101]="ACCESS_POINT",j[j.UNILBS=201]="UNILBS",j[j.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Fm||(Fm={})),function(j){j[j.IIIEGAL_APPID=1]="IIIEGAL_APPID",j[j.IIIEGAL_UID=2]="IIIEGAL_UID",j[j.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(V1||(V1={})),function(j){j[j.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",j[j.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",j[j.INTERNAL_ERROR=8]="INTERNAL_ERROR",j[j.NO_AUTHORIZED=9]="NO_AUTHORIZED",j[j.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",j[j.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",j[j.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",j[j.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",j[j.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",j[j.USER_OVERLOAD=16]="USER_OVERLOAD",j[j.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",j[j.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Ys||(Ys={})),function(j){j[j.NO_FLAG_SET=100]="NO_FLAG_SET",j[j.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",j[j.INVALID_FALG_SET=102]="INVALID_FALG_SET",j[j.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",j[j.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",j[j.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",j[j.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",j[j.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",j[j.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",j[j.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",j[j.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",j[j.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",j[j.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",j[j.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",j[j.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",j[j.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",j[j.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",j[j.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",j[j.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(_i||(_i={})),function(j){j[j.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",j[j.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",j[j.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",j[j.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",j[j.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",j[j.K_TICKET_INVALID=7]="K_TICKET_INVALID",j[j.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",j[j.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",j[j.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",j[j.K_UID_BANNED=14]="K_UID_BANNED",j[j.K_IP_BANNED=15]="K_IP_BANNED",j[j.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",j[j.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",j[j.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",j[j.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",j[j.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",j[j.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",j[j.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",j[j.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",j[j.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",j[j.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",j[j.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",j[j.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",j[j.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",j[j.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",j[j.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",j[j.ERR_INVALID_UID=117]="ERR_INVALID_UID",j[j.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",j[j.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",j[j.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",j[j.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",j[j.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",j[j.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",j[j.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",j[j.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",j[j.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",j[j.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",j[j.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",j[j.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",j[j.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",j[j.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",j[j.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",j[j.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",j[j.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",j[j.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",j[j.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",j[j.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",j[j.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",j[j.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",j[j.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",j[j.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",j[j.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",j[j.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",j[j.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",j[j.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",j[j.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",j[j.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",j[j.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",j[j.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",j[j.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",j[j.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",j[j.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",j[j.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",j[j.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Dn||(Dn={})),function(j){j.CONNECTING="connecting",j.CONNECTED="connected",j.RECONNECTING="reconnecting",j.CLOSED="closed"}(Kn||(Kn={})),function(j){j.WS_CONNECTED="ws_connected",j.WS_RECONNECTING="ws_reconnecting",j.WS_CLOSED="ws_closed",j.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",j.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",j.ON_BINARY_DATA="on_binary_data",j.REQUEST_RECOVER="request_recover",j.REQUEST_JOIN_INFO="request_join_info",j.REQUEST_REJOIN_INFO="req_rejoin_info",j.IS_P2P_DISCONNECTED="is_p2p_dis",j.DISCONNECT_P2P="dis_p2p",j.ABORT_P2P_EXECUTION="abort_p2p_execution",j.NEED_RENEW_SESSION="need-sid",j.REPORT_JOIN_GATEWAY="report_join_gateway",j.REQUEST_TIMEOUT="request_timeout",j.REQUEST_SUCCESS="request_success",j.JOIN_RESPONSE="join_response",j.DATACHANNEL_PRECONNECT="datachannel_preconnect",j.DATACHANNEL_CONNECTING="datachannel_connecting",j.DATACHANNEL_FAILBACK="datachannel_failback",j.P2P_CONNECTION="p2p_connection",j.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",j.P2P_SUBSCRIBE="p2p_subscribe",j.P2P_UNSUBSCRIBE="p2p_unsubscribe",j.P2P_EXCHANGE_SDP="p2p_exchange_sdp",j.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",j.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream"}(En||(En={})),function(j){j.PING="ping",j.PING_BACK="ping_back",j.JOIN="join_v3",j.REJOIN="rejoin_v3",j.LEAVE="leave",j.SET_CLIENT_ROLE="set_client_role",j.PUBLISH="publish",j.PUBLISH_DATASTREAM="publish_datastream",j.UNPUBLISH="unpublish",j.UNPUBLISH_DATASTREAM="unpublish_datastream",j.SUBSCRIBE="subscribe",j.PRE_SUBSCRIBE="pre_subscribe",j.SUBSCRIBE_DATASTREAM="subscribe_datastream",j.SUBSCRIBE_STREAMS="subscribe_streams",j.UNSUBSCRIBE="unsubscribe",j.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",j.UNSUBSCRIBE_STREAMS="unsubscribe_streams",j.SUBSCRIBE_CHANGE="subscribe_change",j.TRAFFIC_STATS="traffic_stats",j.RENEW_TOKEN="renew_token",j.SWITCH_VIDEO_STREAM="switch_video_stream",j.DEFAULT_VIDEO_STREAM="default_video_stream",j.SET_FALLBACK_OPTION="set_fallback_option",j.GATEWAY_INFO="gateway_info",j.CONTROL="control",j.SEND_METADATA="send_metadata",j.DATA_STREAM="data_stream",j.PICK_SVC_LAYER="pick_svc_layer",j.RESTART_ICE="restart_ice",j.CONNECT_PC="connect_pc",j.SET_VIDEO_PROFILE="set_video_profile",j.SET_PARAMETER="set_parameter",j.SET_RTM2_FLAG="set_rtm2_flag"}(Pn||(Pn={})),function(j){j.WRTC_STATS="wrtc_stats",j.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",j.DENOISER_STATS="denoiser_stats",j.EXTENSION_USAGE_STATS="extension_usage_stats"}(Lu||(Lu={})),function(j){j.ON_USER_ONLINE="on_user_online",j.ON_USER_OFFLINE="on_user_offline",j.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",j.ON_PUBLISH_STREAM="on_publish_stream",j.ON_UPLINK_STATS="on_uplink_stats",j.ON_P2P_LOST="on_p2p_lost",j.ON_REMOVE_STREAM="on_remove_stream",j.ON_ADD_AUDIO_STREAM="on_add_audio_stream",j.ON_ADD_VIDEO_STREAM="on_add_video_stream",j.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",j.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",j.ON_USER_BANNED="on_user_banned",j.ON_USER_LICENSE_BANNED="on_user_license_banned",j.ON_NOTIFICATION="on_notification",j.ON_CRYPT_ERROR="on_crypt_error",j.MUTE_AUDIO="mute_audio",j.MUTE_VIDEO="mute_video",j.UNMUTE_AUDIO="unmute_audio",j.UNMUTE_VIDEO="unmute_video",j.ON_P2P_OK="on_p2p_ok",j.RECEIVE_METADATA="receive_metadata",j.ON_DATA_STREAM="on_data_stream",j.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",j.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",j.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",j.ENABLE_LOCAL_VIDEO="enable_local_video",j.DISABLE_LOCAL_VIDEO="disable_local_video",j.ENABLE_LOCAL_AUDIO="enable_local_audio",j.DISABLE_LOCAL_AUDIO="disable_local_audio",j.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Un||(Un={})),function(j){j.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",j.NEED_ANSWER="NEED_ANSWER",j.NEED_RENEGOTIATE="NEED_RENEGOTIATE",j.P2P_LOST="P2P_LOST",j.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",j.NEED_UNPUB="NEED_UNPUB",j.NEED_UNSUB="NEED_UNSUB",j.NEED_UPLOAD="NEED_UPLOAD",j.NEED_CONTROL="NEED_CONTROL",j.START_RECONNECT="START_RECONNECT",j.END_RECONNECT="END_RECONNECT",j.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(TN||(TN={})),function(j){j.SEND_ONLY="SEND_ONLY",j.RECEIVE_ONLY="RECEIVE_ONLY"}(es||(es={})),function(j){j.CONNECTED="websocket:connected",j.RECONNECTING="websocket:reconnecting",j.WILL_RECONNECT="websocket:will_reconnect",j.CLOSED="websocket:closed",j.FAILED="websocket:failed",j.ON_MESSAGE="websocket:on_message",j.REQUEST_NEW_URLS="websocket:request_new_urls",j.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",j.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",j.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}($n||($n={}));class Wt extends rn{constructor(s){super(s,arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",arguments.length>2?arguments[2]:void 0),gt(this,"name","AgoraRTCException")}print(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";return super.print(s,Et)}throw(){super.throw(Et)}}function KS(j){if(typeof j!="string"||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(j))throw Et.error("Invalid Channel Name ".concat(j)),new Wt(Nt.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function YS(j){if(s=j,!(typeof s=="number"&&Math.floor(s)===s&&0<=s&&s<=4294967295||ZI(j,1,255)))throw new Wt(Nt.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var s;typeof j=="string"&&Et.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}(function(j){j.TRANSCODE="mix_streaming",j.RAW="raw_streaming",j.INJECT="inject_streaming"})(bo||(bo={})),function(j){j[j.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",j[j.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",j[j.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",j[j.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",j[j.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",j[j.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",j[j.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",j[j.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",j[j.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",j[j.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",j[j.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(ap||(ap={}));let gM={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},qS={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function XS(j,s){zo(j.url,"".concat(s,".url"),1,1e3,!1),Gr(j.x)||Sr(j.x,"".concat(s,".x"),0,1e4),Gr(j.y)||Sr(j.y,"".concat(s,".y"),0,1e4),Gr(j.width)||Sr(j.width,"".concat(s,".width"),0,1e4),Gr(j.height)||Sr(j.height,"".concat(s,".height"),0,1e4),Gr(j.zOrder)||Sr(j.zOrder,"".concat(s,".zOrder"),0,255),Gr(j.alpha)||Sr(j.alpha,"".concat(s,".alpha"),0,1,!1)}let mM={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},_M={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var Bl,jm,so,vN,ts,ru,ms,cp,cr,zr,qp,_o,F_,rr;function CN(j){if(!j.channelName)throw new Wt(Nt.INVALID_PARAMS,"invalid channelName in info");if(typeof j.uid!="number")throw new Wt(Nt.INVALID_PARAMS,"invalid uid in info, uid must be a number");return j.token&&zo(j.token,"info.token",1,2047),YS(j.uid),KS(j.channelName),!0}(function(j){j.WARNING="@live_uap-warning",j.ERROR="@line_uap-error",j.PUBLISH_STREAM_STATUS="@live_uap-publish-status",j.INJECT_STREAM_STATUS="@live_uap-inject-status",j.WORKER_STATUS="@live_uap-worker-status",j.REQUEST_NEW_ADDRESS="@live_uap-request-address"})(Bl||(Bl={})),function(j){j.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(jm||(jm={})),function(j){j[j.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",j[j.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",j[j.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",j[j.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",j[j.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",j[j.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",j[j.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",j[j.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",j[j.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",j[j.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",j[j.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",j[j.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",j[j.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",j[j.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",j[j.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",j[j.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",j[j.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",j[j.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",j[j.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",j[j.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",j[j.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(so||(so={})),function(j){j.CONNECT_FAILED="connect failed",j.CONNECT_TIMEOUT="connect timeout",j.WS_DISCONNECTED="websocket disconnected",j.REQUEST_TIMEOUT="request timeout",j.REQUEST_FAILED="request failed",j.WAIT_STATUS_TIMEOUT="wait status timeout",j.WAIT_STATUS_ERROR="wait status error",j.BAD_STATE="bad state",j.WS_ABORT="ws abort",j.AP_REQUEST_TIMEOUT="AP request timeout",j.AP_JSON_PARSE_ERROR="AP json parse error",j.AP_REQUEST_ERROR="AP request error",j.AP_REQUEST_ABORT="AP request abort"}(vN||(vN={})),function(j){j[j.SetSdkProfile=0]="SetSdkProfile",j[j.SetSourceChannel=1]="SetSourceChannel",j[j.SetSourceUserId=2]="SetSourceUserId",j[j.SetDestChannel=3]="SetDestChannel",j[j.StartPacketTransfer=4]="StartPacketTransfer",j[j.StopPacketTransfer=5]="StopPacketTransfer",j[j.UpdateDestChannel=6]="UpdateDestChannel",j[j.Reconnect=7]="Reconnect",j[j.SetVideoProfile=8]="SetVideoProfile"}(ts||(ts={})),function(j){j.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",j.NETWORK_CONNECTED="NETWORK_CONNECTED",j.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",j.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",j.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",j.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",j.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",j.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",j.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",j.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(ru||(ru={})),function(j){j.RELAY_STATE_IDLE="RELAY_STATE_IDLE",j.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",j.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",j.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(ms||(ms={})),function(j){j.RELAY_OK="RELAY_OK",j.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",j.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",j.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(cp||(cp={})),function(j){j.High="high",j.Low="low",j.Audio="audio",j.Screen="screen",j.ScreenLow="screen_low"}(cr||(cr={})),function(j){j.DISCONNECT="disconnect",j.CONNECTION_STATE_CHANGE="connection-state-change",j.NETWORK_QUALITY="network-quality",j.STREAM_TYPE_CHANGE="stream-type-change",j.IS_P2P_DISCONNECTED="is-p2p-dis",j.DISCONNECT_P2P="dis-p2p",j.REQUEST_NEW_GATEWAY_LIST="req-gate-url",j.NEED_RENEW_SESSION="need-sid",j.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",j.JOIN_RESPONSE="join-response",j.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",j.RESET_CONNECTION_EVENTS="reset-connection-events",j.DATACHANNEL_PRECONNECT="datachannel_preconnect",j.DATACHANNEL_FAILBACK="datachannel_failback",j.RESET_SIGNAL="reset-signal"}(zr||(zr={})),function(j){j.P2P_DISCONNECTED="P2P_DISCONNECTED",j.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",j.TIMEOUT="TIMEOUT",j.UNKNOWN_REASON="UNKNOWN_REASON"}(qp||(qp={})),function(j){j[j.Nothing=0]="Nothing",j[j.Audio=1]="Audio",j[j.LwoVideo=2]="LwoVideo",j[j.Video=4]="Video",j[j.Data=8]="Data",j[j.DataStream0=256]="DataStream0",j[j.DataStream1=512]="DataStream1",j[j.DataStream2=1024]="DataStream2",j[j.DataStream3=2048]="DataStream3",j[j.DataStream4=4096]="DataStream4",j[j.DataStream5=8192]="DataStream5",j[j.DataStream6=16384]="DataStream6",j[j.DataStream7=32768]="DataStream7"}(_o||(_o={})),function(j){j[j.websocket=0]="websocket",j[j.datachannel=1]="datachannel"}(F_||(F_={})),function(j){j.CHINA="CHINA",j.ASIA="ASIA",j.NORTH_AMERICA="NORTH_AMERICA",j.EUROPE="EUROPE",j.JAPAN="JAPAN",j.INDIA="INDIA",j.KOREA="KOREA",j.HKMC="HKMC",j.US="US",j.OCEANIA="OCEANIA",j.SOUTH_AMERICA="SOUTH_AMERICA",j.AFRICA="AFRICA",j.OVERSEA="OVERSEA",j.GLOBAL="GLOBAL",j.EXTENSIONS="EXTENSIONS"}(rr||(rr={}));let bN=[rr.AFRICA,rr.ASIA,rr.CHINA,rr.EUROPE,rr.GLOBAL,rr.INDIA,rr.JAPAN,rr.NORTH_AMERICA,rr.OCEANIA,rr.OVERSEA,rr.SOUTH_AMERICA];var Vo;(function(j){j.CHINA="CN",j.ASIA="AS",j.NORTH_AMERICA="NA",j.EUROPE="EU",j.JAPAN="JP",j.INDIA="IN",j.KOREA="KR",j.HKMC="HK",j.US="US",j.OCEANIA="OC",j.SOUTH_AMERICA="SA",j.AFRICA="AF",j.OVERSEA="OVERSEA",j.GLOBAL="GLOBAL",j.EXTENSIONS="GLOBAL"})(Vo||(Vo={}));let V_={CHINA:{},ASIA:{CODE:Vo.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Vo.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Vo.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Vo.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Vo.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Vo.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Vo.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Vo.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Vo.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Vo.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Vo.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Vo.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Vo.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};var B1,RN,Cn,Ko,ou,an,mr,kn,IN,qs,Xs,Ro,fu,to,Gl,AN,Us,Cl,lp,Kr,dp,gu,NN,JS;BS&&(V_.CHINA={CODE:Vo.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(j){j.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(B1||(B1={}));class wN extends Fr{constructor(s,$){super(),gt(this,"onICEConnectionStateChange",void 0),gt(this,"onConnectionStateChange",void 0),gt(this,"onDTLSTransportStateChange",void 0),gt(this,"onDTLSTransportError",void 0),gt(this,"onICETransportStateChange",void 0),gt(this,"onFirstAudioReceived",void 0),gt(this,"onFirstVideoReceived",void 0),gt(this,"onFirstAudioDecoded",void 0),gt(this,"onFirstVideoDecoded",void 0),gt(this,"onFirstVideoDecodedTimeout",void 0),gt(this,"onSelectedLocalCandidateChanged",void 0),gt(this,"onSelectedRemoteCandidateChanged",void 0)}}class B_ extends wN{constructor(s,$){super(s,$)}}(function(j){j.SEND="sendonly",j.RECV="recvonly",j.SENDRECV="sendrecv",j.INACTIVE="inactive"})(RN||(RN={})),function(j){j.VIDEO="video",j.AUDIO="audio"}(Cn||(Cn={})),function(j){j[j.UDP=0]="UDP",j[j.TCP=1]="TCP",j[j.RELAY=2]="RELAY"}(Ko||(Ko={})),function(j){j[j.FIRST_CONNECTION=0]="FIRST_CONNECTION",j[j.TCP_RESTART=1]="TCP_RESTART",j[j.RELAY_RESTART=2]="RELAY_RESTART",j[j.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",j[j.OLD_RESTART=11]="OLD_RESTART",j[j.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(ou||(ou={})),function(j){j.LocalVideoTrack="videoTrack",j.LocalAudioTrack="audioTrack",j.LocalVideoLowTrack="videoLowTrack"}(an||(an={})),function(j){j.New="new",j.Connected="connected",j.Reconnecting="reconnecting",j.Disconnected="disconnected"}(mr||(mr={})),function(j){j.StateChange="stateChange",j.IceConnectionStateChange="iceConnectionStateChange",j.RequestMuteLocal="requestMuteLocal",j.RequestUnmuteLocal="requestUnmuteLocal",j.RequestRePublish="requestRePublish",j.RequestRePublishDataChannel="requestRePublishDataChannel",j.RequestReSubscribe="requestReSubscribe",j.RequestUploadStats="requestUploadStats",j.RequestUpload="requestUpload",j.MediaReconnectStart="MediaReconnectStart",j.MediaReconnectEnd="MediaReconnectEnd",j.NeedSignalRTT="NeedSignalRTT",j.RequestRestartICE="RequestRestartIce",j.PeerConnectionStateChange="PeerConnectionStateChange",j.RequestReconnect="RequestReconnect",j.RequestReconnectPC="RequestReconnectPC",j.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",j.P2PLost="P2PLost",j.UpdateVideoEncoder="UpdateVideoEncoder",j.ConnectionTypeChange="ConnectionTypeChange",j.RequestLowStreamParameter="RequestLowStreamParameter",j.QueryClientConnectionState="QueryClientConnectionState",j.LocalCandidate="LocalCandidate",j.RequestP2PMuteLocal="requestP2PMuteLocal",j.RequestP2PUnPublish="RequestP2PUnPublish",j.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",j.RequestP2PMuteRemote="RequestP2PMuteRemote",j.RequestP2PRestartICE="RequestP2PRestartICE"}(kn||(kn={})),function(j){j.MUTE_LOCAL_VIDEO="mute_local_video",j.MUTE_LOCAL_AUDIO="mute_local_audio",j.UNMUTE_LOCAL_VIDEO="unmute_local_video",j.UNMUTE_LOCAL_AUDIO="unmute_local_audio",j.MUTE_REMOTE_VIDEO="mute_remote_video",j.MUTE_REMOTE_AUDIO="mute_remote_audio",j.UNMUTE_REMOTE_VIDEO="unmute_remote_video",j.UNMUTE_REMOTE_AUDIO="unmute_remote_audio"}(IN||(IN={})),function(j){j.CONNECTING="CONNECTING",j.RECONNECTING="RECONNECTING",j.CONNECTED="CONNECTED",j.CLOSED="CLOSED"}(qs||(qs={})),function(j){j[j.CONNECT_AP=0]="CONNECT_AP",j[j.AP_CONNECTED=1]="AP_CONNECTED",j[j.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",j[j.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",j[j.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",j[j.CONNECT_WORKER=5]="CONNECT_WORKER",j[j.WORKER_CONNECTED=6]="WORKER_CONNECTED",j[j.CLOSED=7]="CLOSED"}(Xs||(Xs={})),function(j){j.CONNECTION_STATE_CHANGE="connection-state-change",j.STATE_CHANGE="state-change",j.INSPECT_RESULT="inspect-result",j.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",j.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Ro||(Ro={})),function(j){j.NETWORK_ERROR="NETWORK_ERROR",j.SERVER_ERROR="SERVER_ERROR",j.MULTI_IP="MULTI_IP",j.TIMEOUT="TIMEOUT",j.OFFLINE="OFFLINE",j.LEAVE="LEAVE",j.P2P_FAILED="P2P_FAILED",j.FALLBACK="FALLBACK"}(fu||(fu={})),function(j){j.CONNECTED="transmitter:connected",j.RECONNECTING="transmitter:reconnecting",j.WILL_RECONNECT="transmitter:will_reconnect",j.CLOSED="transmitter:closed",j.FAILED="transmitter:failed",j.ON_MESSAGE="transmitter:on_message",j.REQUEST_NEW_URLS="transmitter:request_new_urls",j.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",j.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",j.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",j.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",j.FAILBACK="transmitter:failback"}(to||(to={})),function(j){j.CAMERA_CHANGED="camera-changed",j.MICROPHONE_CHANGED="microphone-changed",j.PLAYBACK_DEVICE_CHANGED="playback-device-changed",j.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",j.AUTOPLAY_FAILED="autoplay-failed",j.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",j.SECURITY_POLICY_VIOLATION="security-policy-violation"}(Gl||(Gl={})),function(j){j[j.APP_TYPE_INVALID_VALUE=-1]="APP_TYPE_INVALID_VALUE",j[j.APP_TYPE_NATIVE=0]="APP_TYPE_NATIVE",j[j.APP_TYPE_NATIVE_COCOS=1]="APP_TYPE_NATIVE_COCOS",j[j.APP_TYPE_NATIVE_UNITY=2]="APP_TYPE_NATIVE_UNITY",j[j.APP_TYPE_NATIVE_ELECTRON=3]="APP_TYPE_NATIVE_ELECTRON",j[j.APP_TYPE_NATIVE_FLUTTER=4]="APP_TYPE_NATIVE_FLUTTER",j[j.APP_TYPE_NATIVE_UNREAL=5]="APP_TYPE_NATIVE_UNREAL",j[j.APP_TYPE_NATIVE_XAMARIN=6]="APP_TYPE_NATIVE_XAMARIN",j[j.APP_TYPE_NATIVE_API_CLOUD=7]="APP_TYPE_NATIVE_API_CLOUD",j[j.APP_TYPE_NATIVE_REACT_NATIVE=8]="APP_TYPE_NATIVE_REACT_NATIVE",j[j.APP_TYPE_NATIVE_PYTHON=9]="APP_TYPE_NATIVE_PYTHON",j[j.APP_TYPE_NATIVE_COCOS_CREATOR=10]="APP_TYPE_NATIVE_COCOS_CREATOR",j[j.APP_TYPE_NATIVE_RUST=11]="APP_TYPE_NATIVE_RUST",j[j.APP_TYPE_NATIVE_C_SHARP=12]="APP_TYPE_NATIVE_C_SHARP",j[j.APP_TYPE_NATIVE_CEF=13]="APP_TYPE_NATIVE_CEF",j[j.APP_TYPE_NATIVE_UNI_APP=14]="APP_TYPE_NATIVE_UNI_APP",j[j.APP_TYPE_WEBRTC=1e3]="APP_TYPE_WEBRTC",j[j.APP_TYPE_WEBRTC_REACT=1001]="APP_TYPE_WEBRTC_REACT",j[j.APP_TYPE_WEBRTC_VUE=1002]="APP_TYPE_WEBRTC_VUE",j[j.APP_TYPE_WEBRTC_ANGULAR=1003]="APP_TYPE_WEBRTC_ANGULAR"}(AN||(AN={})),function(j){j.CONNECTING="CONNECTING",j.RECONNECTING="RECONNECTING",j.CONNECTED="CONNECTED",j.CLOSED="CLOSED"}(Us||(Us={})),function(j){j.CONNECTION_STATE_CHANGE="connection-state-change",j.STATE_CHANGE="state-change",j.INSPECT_RESULT="inspect-result",j.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",j.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(Cl||(Cl={})),function(j){j[j.CONNECT_AP=0]="CONNECT_AP",j[j.AP_CONNECTED=1]="AP_CONNECTED",j[j.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",j[j.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",j[j.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",j[j.CONNECT_WORKER=5]="CONNECT_WORKER",j[j.WORKER_CONNECTED=6]="WORKER_CONNECTED",j[j.CLOSED=7]="CLOSED"}(lp||(lp={})),function(j){j.CALL="call",j.CANDIDATE="candidate",j.PUBLISH="publish",j.UNPUBLISH="unpublish",j.CONTROL="control",j.RESTART_ICE="restart_ice",j.ACK="ack",j.RESPONSE="response",j.JOIN="join",j.CHECK="check"}(Kr||(Kr={})),function(j){j.ABORT="abort"}(dp||(dp={})),function(j){j.MUTE_LOCAL_AUDIO="mute_local_audio",j.MUTE_LOCAL_VIDEO="mute_local_video",j.UNMUTE_LOCAL_AUDIO="unmute_local_audio",j.UNMUTE_LOCAL_VIDEO="unmute_local_video"}(gu||(gu={})),function(j){j[j.SUCCESS=1]="SUCCESS",j[j.FAILED=0]="FAILED"}(NN||(NN={})),function(j){j.P2P_TOKEN_TIMEOUT="p2p_token_timeout",j.P2P_TOKEN_CHANGED="p2p_token_changed"}(JS||(JS={}));let EM={[Fm.ACCESS_POINT]:{[_i.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[_i.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[_i.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[_i.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[_i.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[_i.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[_i.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Fm.UNILBS]:{[Ys.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Ys.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Ys.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Ys.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Ys.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Ys.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Ys.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Ys.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Ys.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Ys.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Ys.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Ys.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Fm.STRING_UID_ALLOCATOR]:{[V1.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[V1.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[V1.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function W_(j){let s=EM[Math.floor(j/1e4)];if(!s)return{desc:"unkonw error",retry:!1};let $=s[j%1e4];if(!$){if(Math.floor(j/1e4)===Fm.ACCESS_POINT){let _e=j%1e4;if(_e.toString()[0]==="1")return{desc:j.toString(),retry:!1};if(_e.toString()[0]==="2")return{desc:j.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return $}let yM={[Dn.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Dn.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Dn.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Dn.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Dn.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Dn.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Dn.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Dn.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Dn.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Dn.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Dn.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Dn.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[Dn.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Dn.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Dn.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Dn.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Dn.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Dn.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Dn.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Dn.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Dn.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Dn.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Dn.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Dn.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Dn.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Dn.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Dn.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Dn.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Dn.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Dn.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Dn.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Dn.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Dn.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Dn.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Dn.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Dn.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Dn.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Dn.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Dn.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Dn.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Dn.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Dn.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Dn.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Dn.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Dn.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Dn.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Dn.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Dn.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Dn.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Dn.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Dn.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Dn.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Dn.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Dn.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Dn.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[Dn.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[Dn.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[Dn.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[Dn.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[Dn.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[Dn.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[Dn.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[Dn.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function Xp(j){return yM[j]||{desc:"UNKNOW_ERROR_".concat(j),action:"failed"}}function ON(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function QS(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?ON(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):ON(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function PN(j){return j.every(s=>s.readyState===WebSocket.CLOSED||s.readyState===WebSocket.CLOSING)}function DN(j,s){if(typeof j=="string")return j;let{proxy:$,host:_e,port:tt}=j;if(s){let rt=Ft("JOIN_GATEWAY_FALLBACK_PORT")||443;return rt===443?"wss://".concat(_e,"/ws/?p=").concat(Number(tt)+150):"wss://".concat(_e,":").concat(rt,"/ws/?p=").concat(Number(tt)+150)}return $?"wss://".concat($,"/ws/?h=").concat(_e,"&p=").concat(tt):"wss://".concat(_e,":").concat(tt)}let SM=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,TM=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,vM=/wss:\/\/(.+):([0-9]+)\/?/,CM=/wss:\/\/(.[^\/]+)\/?/,bM=0;class RM{constructor(s,$){gt(this,"id",0),gt(this,"store",void 0),gt(this,"recordIndex",void 0),gt(this,"websockets",[]),gt(this,"try443PortDuration",2e3),gt(this,"forceCloseWSDuration",5e3),gt(this,"try443PortTimeout",null),gt(this,"forceCloseTimeout",null),gt(this,"isTry443PortFailed",!1),gt(this,"isNormalPortFailed",!1),gt(this,"useDoubleDomain",!1),gt(this,"useProxy",!1),gt(this,"startTime",Date.now()),this.id=++bM,this.try443PortDuration=Ft("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=s||5e3,this.store=$}closeAllWebsockets(){this.websockets.forEach(s=>{s.onopen=null,s.onclose=null,s.onmessage=null,s.close()}),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var s;let $=Date.now()-this.startTime;for(var _e=arguments.length,tt=new Array(_e),rt=0;rt<_e;rt++)tt[rt]=arguments[rt];Et.debug("[choose-best-ws ".concat((s=this.store)===null||s===void 0?void 0:s.clientId," ").concat(this.id,"] ").concat($,"ms:"),...tt)}createWebSocket(s,$,_e){this.logger("createWebSocket:",s,{isTry443Port:$,hasTimeoutDetection:_e});let tt=Ft("GATEWAY_DOMAINS"),rt=Date.now(),it=[],at=tt.find(ut=>{var pt;return vn(pt=s.host).call(pt,ut)});at||(this.useDoubleDomain=!1);let ct=[];if(this.useDoubleDomain)tt.forEach(ut=>{ct.push(DN(QS(QS({},s),{},{host:s.host.replace(at,ut)}),$))});else{let ut=QS({},s);if($&&at){let pt=tt.find(mt=>mt!==at);pt&&(ut.host=ut.host.replace(at,pt))}ct.push(DN(ut,$))}try{ct.forEach(ut=>{let pt=new WebSocket(ut);pt.binaryType="arraybuffer",it.push(pt),this.logger("ws is connecting:",pt.url)})}catch(ut){if(this.logger("ws create failed"),it.forEach(pt=>pt.close()),it.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(s,$,_e);if(!$&&Number(s.port)!==443)return this.createWebSocket(s,!0,_e);throw new Wt(Nt.WS_ERR,"init websocket failed! Error: ".concat(ut.toString()))}let dt=L1();return this.store&&this.store.recordJoinChannelService({urls:it.map(ut=>ut.url),service:"gateway"},this.recordIndex),it.forEach(ut=>{ut.onopen=()=>{this.logger("onopen: ws ".concat(ut.url," open cost ").concat(Date.now()-rt,"ms")),this.websockets.forEach(pt=>{pt!==ut&&(pt.onopen=null,pt.onclose=null,pt.onmessage=null,pt.close(),this.logger("close backup websocket: ".concat(pt.url)))}),this.websockets.length=0,dt.resolve(ut)},ut.onclose=pt=>{this.logger("onclose: ws ".concat(ut.url," closed cost ").concat(Date.now()-rt,"ms state: ").concat(ut.readyState)),$?this.isTry443PortFailed=PN(it):this.isNormalPortFailed=PN(it),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),($&&this.isTry443PortFailed||!$&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(pt.reason)),dt.reject({code:pt.code,reason:qp.A_ROUND_WS_FAILED}))},ut.onmessage=pt=>this.logger("".concat(ut.url," onmessage: ").concat(pt.data))}),this.websockets.push(...it),_e||(()=>{let ut=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",dt.isResolved),this.websockets.forEach(pt=>pt.readyState!==WebSocket.OPEN&&pt.close())};if($||this.useProxy)return this.logger("add 5s timeout at ".concat($?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(ut,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout(()=>{if(this.logger("2s timeout, isWebsocket created: ",dt.isResolved),dt.isResolved)return ut();ir().os===To.MAC_OS&&br()&&ut(),this.createWebSocket(s,!0,!0).then(pt=>dt.resolve(pt)).catch(pt=>{this.isNormalPortFailed&&dt.reject(pt),this.logger("try 443 port to create ws failed")}),this.forceCloseTimeout=window.setTimeout(ut,this.forceCloseWSDuration)},this.try443PortDuration)})(),dt.promise}chooseBestWebsocket(s,$,_e,tt){return this.useDoubleDomain=!!$,typeof s=="string"&&(s=function(rt){let it,at,ct;return[,it,at,ct]=rt.match(SM)||[],it||([,at,ct]=rt.match(TM)||[]),at&&ct||([,at,ct]=rt.match(vM)||[]),at&&ct||([,at]=rt.match(CM)||[]),at||Et.warning("un-destructible url: ",rt),{proxy:it,host:at,port:ct||"443"}}(s)),this.recordIndex=tt,this.useProxy=!!s.proxy,_e&&this.useProxy&&(Et.warn("cannot use 443 only when use proxy"),_e=!1),this.createWebSocket(s,!!_e,!1).finally(()=>this.clearTimeout())}}function xN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}class LN extends Fr{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(s){var $;vn($=["tryNext","recover"]).call($,s)&&this.resetReconnectCount(s),this._reconnectMode=s}get state(){return this._state}set state(s){s!==this._state&&(this._state=s,this._state==="reconnecting"?this.emit($n.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit($n.CONNECTED):this._state==="closed"?this.emit($n.CLOSED):this._state==="failed"&&this.emit($n.FAILED))}resetReconnectCount(s){Et.debug("websocket reset reconnect count, reason: "+s),this.reconnectCount=0}constructor(s,$){let _e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],tt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],rt=arguments.length>4&&arguments[4]!==void 0&&arguments[4],it=arguments.length>5?arguments[5]:void 0;super(),gt(this,"connectionID",0),gt(this,"currentURLIndex",0),gt(this,"urls",[]),gt(this,"_reconnectMode","tryNext"),gt(this,"reconnectReason",void 0),gt(this,"_initMutex",new Lo("websocket")),gt(this,"name",void 0),gt(this,"_state","closed"),gt(this,"reconnectInterrupter",void 0),gt(this,"websocket",void 0),gt(this,"retryConfig",void 0),gt(this,"reconnectCount",0),gt(this,"forceCloseTimeout",5e3),gt(this,"onlineReconnectListener",void 0),gt(this,"useCompress",void 0),gt(this,"tryDoubleDomain",!1),gt(this,"use443PortOnly",!1),gt(this,"wsInflateLength",0),gt(this,"wsDeflateLength",0),gt(this,"closeEstablishingWs",()=>{}),gt(this,"store",void 0),gt(this,"joinGatewayRecordIndex",void 0),this.store=it,this.name=s,this.retryConfig=function(pt){for(var mt=1;mt<arguments.length;mt++){var yt=arguments[mt]!=null?arguments[mt]:{};mt%2?xN(Object(yt),!0).forEach(function(At){gt(pt,At,yt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pt,Object.getOwnPropertyDescriptors(yt)):xN(Object(yt)).forEach(function(At){Object.defineProperty(pt,At,Object.getOwnPropertyDescriptor(yt,At))})}return pt}({},$),this.useCompress=_e,this.tryDoubleDomain=tt,this.use443PortOnly=rt;let{timeout:at,timeoutFactor:ct}=$,dt=Math.max(300,Math.floor(3*at/5)),ut=Math.max(1.2,Math.floor(8*ct)/10);us.ONLINE&&(this.retryConfig.timeout=dt,this.retryConfig.timeoutFactor=ut),uo.on(Du.NETWORK_STATE_CHANGE,(pt,mt)=>{pt!==mt&&(this.resetReconnectCount("network state change: ".concat(mt," -> ").concat(pt)),pt===us.ONLINE?(this.retryConfig.timeout=dt,this.retryConfig.timeoutFactor=ut):(this.retryConfig.timeout=at,this.retryConfig.timeoutFactor=ct))})}getConnection(){return this.websocket||void 0}async init(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,_e=await this._initMutex.lock();this.forceCloseTimeout=$,this.urls=s,this.state="connecting";try{let tt=L1(),rt=this.urls[this.currentURLIndex];this.createWebSocketConnection(rt).then(tt.resolve).catch(tt.reject),this.once($n.CLOSED,()=>{tt.reject(new rn(Nt.WS_DISCONNECT))}),this.once($n.CONNECTED,tt.resolve),await tt.promise}catch{}finally{_e()}}close(s,$){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;let _e=this.websocket;$?setTimeout(()=>_e.close(),500):_e.close(),this.websocket=void 0}this.state=s?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(s,$){if(!this.websocket)return void Et.warning("[".concat(this.name,"] can not reconnect, no websocket"));s!==void 0&&(this.reconnectMode=s),Et.debug("[".concat(this.name,"] reconnect is triggered initiative")),typeof this.joinGatewayRecordIndex=="number"&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error($)]},this.joinGatewayRecordIndex);let _e=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),_e&&_e.bind(this.websocket)({code:9999,reason:$})}sendMessage(s){let $=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new rn(Nt.WS_ABORT,"websocket is not ready");try{$||(s=JSON.stringify(s)),this.websocket.send(s)}catch(_e){throw new rn(Nt.WS_ERR,"send websocket message error"+_e.toString())}}setWsInflateData(s){this.wsDeflateLength=this.wsDeflateLength+s.originLength,this.wsInflateLength=this.wsInflateLength+s.compressedLength}getWsInflateData(){let s=this.wsInflateLength,$=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:s,wsDeflateLength:$}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(s){var $;let _e=L1();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;let tt=ut=>{var pt;(pt=this.store)===null||pt===void 0||pt.signalChannelOpen(),Et.debug("[".concat(this.name,"] websocket opened:"),ut),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),_e.resolve()},rt=async ut=>{var pt;if(Et.debug("[".concat(this.name,"] websocket close ").concat((pt=this.websocket)===null||pt===void 0?void 0:pt.url,", code: ").concat(ut.code,", reason: ").concat(ut.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)_e.reject(new rn(Nt.WS_DISCONNECT,"websocket close: ".concat(ut.code))),this.close();else{this.state==="connected"&&(this.reconnectReason=ut.reason,this.state="reconnecting");let mt=Ms(this,$n.WILL_RECONNECT,this.reconnectMode,ut.reason)||this.reconnectMode,yt=await this.reconnectWithAction(mt);if(this.state==="closed")return void Et.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!yt)return _e.reject(new rn(Nt.WS_DISCONNECT,"websocket reconnect failed: ".concat(ut.code))),this.close(!0);_e.resolve()}},it=ut=>{this.emit($n.ON_MESSAGE,ut)},at=ut=>{Et.warn("[".concat(this.connectionID,"] ws open error ").concat(ut))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),Ft("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(s=Ft("GATEWAY_WSS_ADDRESS")),Et.debug("[".concat(this.name,"] start connect, url:"),s);let ct=($=this.store)===null||$===void 0?void 0:$.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var dt;let ut=await this.chooseBestWebsocketConnection(s);this.websocket=ut,tt&&tt(this.websocket.url),this.websocket.onclose=rt,this.websocket.onmessage=it,this.websocket.onerror=at,(dt=this.store)===null||dt===void 0||dt.recordJoinChannelService({endTs:Date.now(),status:"success"},ct),this.joinGatewayRecordIndex=ct}catch(ut){let pt=this.state==="closed",mt=ut instanceof rn,yt=mt&&ut.code===Nt.WS_ABORT,At=mt&&ut.code===Nt.WS_ERR,Ct=mt?ut.message:ut&&(ut.reason||ut.toString());Et.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(Ct)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:yt?"aborted":"error",errors:[ut]},ct),pt||At?(_e.reject(pt?new rn(Nt.WS_DISCONNECT,"websocket is closed: ".concat(Ct)):new rn(Nt.WS_ERR,"init websocket failed: ".concat(Ct))),At&&Et.error("[".concat(this.name,"] init websocket failed: ").concat(Ct))):rt&&rt(ut)}return _e.promise}async reconnectWithAction(s){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount||this.urls.length===0||this.state==="closed")return!1;Et.warning("[choose-best-ws] action: =>",s),this.onlineReconnectListener||uo.isOnline||!uo.onlineWaiter||(this.onlineReconnectListener=uo.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));let _e=!0;if(this.reconnectInterrupter=()=>_e=!1,$){let it=I_(this.reconnectCount,this.retryConfig);Et.debug("[".concat(this.name,"] wait ").concat(it,"ms to reconnect websocket, mode: ").concat(s)),await Jt.race([xo(it),this.onlineReconnectListener||new Jt(()=>{})])}if(this._state==="closed"||!_e)return!1;this.reconnectCount+=1;let tt=async(it,at)=>{this.emit($n.RECONNECT_CREATE_CONNECTION,at),await this.createWebSocketConnection(it)};try{if(s==="retry")this.emit($n.RECONNECT_WAITTING_FINISH,s),await tt(this.urls[this.currentURLIndex],s);else if(s==="tryNext"){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);Et.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),this.emit($n.RECONNECT_WAITTING_FINISH,s),await tt(this.urls[this.currentURLIndex],s)}else s==="recover"&&(Et.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit($n.RECONNECT_WAITTING_FINISH,s),this.urls=await lo(this,$n.REQUEST_NEW_URLS),this.currentURLIndex=0,await tt(this.urls[this.currentURLIndex],s))}catch(it){var rt;Et.error("[".concat(this.name,"] reconnect failed ").concat(it&&it.toString()));let at=it==null||(rt=it.data)===null||rt===void 0?void 0:rt.desc;return Array.isArray(at)&&vn(at).call(at,"dynamic key expired")?(this.emit($n.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(s,$)}return!0}}class G1 extends LN{constructor(s,$){super(s,$,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(s,$){let _e=L1(),tt=function(it,at){return new RM(it,at)}(this.forceCloseTimeout,this.store);this.closeEstablishingWs=()=>{Et.debug("[choose-best-ws] close establishing websockets"),tt.closeAllWebsockets(),_e.reject(new rn(Nt.WS_ABORT,"choose best websocket aborted"))};let rt=Ft("GATEWAY_DOMAINS");return Et.debug("[choose-best-ws] currentDomain: ",s,", domains: ",rt,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),tt.chooseBestWebsocket(s,this.tryDoubleDomain,this.use443PortOnly,$).then(_e.resolve).catch(_e.reject),_e.promise.finally(()=>{this.closeEstablishingWs=void 0})}}class W1 extends LN{constructor(s,$){super(s,$,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3&&arguments[3]!==void 0&&arguments[3],arguments.length>4&&arguments[4]!==void 0&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(s,$){return new Jt((_e,tt)=>{let rt=!1,it=[];this.closeEstablishingWs=()=>{Et.debug("[choose-best-ws] close establishing websockets"),it.forEach(At=>{At.onclose=null,At.onopen=null,At.onmessage=null,At.close()}),tt(new rn(Nt.WS_ABORT,"choose best websocket aborted"))};let at=Ft("GATEWAY_DOMAINS"),ct,dt=s.indexOf("?h="),ut=at.find(At=>dt!==-1?vn(s).call(s,At,dt):vn(s).call(s,At));Et.debug("[choose-best-ws] currentDomain: ",ut,", domains: ",at);let pt=!this.tryDoubleDomain||!ut;if(!pt&&ut){var mt;let At=Date.now();try{at.forEach(Ct=>{let It=dt===-1?s.replace(ut,Ct):s.substr(0,dt)+s.substr(dt).replace(ut,Ct),kt=new WebSocket(It);kt.binaryType="arraybuffer",it.push(kt),Et.debug("[choose-best-ws] ws is connecting:",kt.url)})}catch{for(Et.debug("[choose-best-ws] ws create failed, fallback to single url"),it.forEach(Ct=>Ct.close());it.length;)it.pop();pt=!0}(mt=this.store)===null||mt===void 0||mt.recordJoinChannelService({urls:it.map(Ct=>Ct.url),service:"gateway"},$),it.forEach(Ct=>{Ct.onopen=()=>{if(rt)return;let It=Date.now()-At;Et.debug("[choose-best-ws] ws open cost ".concat(It,"ms")),it.filter(kt=>kt!==Ct).forEach(kt=>{Et.debug("[choose-best-ws]close backup websocket: ".concat(kt.url)),kt.close()}),rt=!0,_e(Ct)},Ct.onclose=It=>{ct=It,!rt&&(it.find(kt=>!(kt.readyState===WebSocket.CLOSED||kt.readyState===WebSocket.CLOSING))||(Et.debug("[choose-best-ws] all websocket is closed"),rt=!0,tt(ct)))},Ct.onmessage=It=>{Et.debug("[choose-best-ws]".concat(Ct.url," onmessage: ").concat(It.data))}}),xo(this.forceCloseTimeout).then(()=>{it.forEach(Ct=>{Ct.readyState!==WebSocket.OPEN&&Ct.close()})})}if(pt){var yt;let At;Et.debug("[choose-best-ws] use single url: ",s),(yt=this.store)===null||yt===void 0||yt.recordJoinChannelService({urls:[s],service:"gateway"},$);try{At=new WebSocket(s),it.push(At),At.binaryType="arraybuffer"}catch(Ct){let It=new rn(Nt.WS_ERR,"init websocket failed! Error: ".concat(Ct.toString()));return Et.error("[".concat(this.name,"]").concat(It)),void tt(It)}At.onopen=()=>{_e(At)},At.onclose=Ct=>{tt(Ct)},At.onmessage=Ct=>{Et.debug("[choose-best-ws]".concat(At.url," onmessage: ").concat(Ct.data))},xo(this.forceCloseTimeout).then(()=>{At&&At.readyState!==WebSocket.OPEN&&At.close()})}}).then(_e=>(this.closeEstablishingWs=void 0,_e)).catch(_e=>{throw this.closeEstablishingWs=void 0,_e})}}class kN extends Fr{get connectionState(){return this._connectionState}set connectionState(s){s!==this._connectionState&&(this._connectionState=s,s===Kn.CONNECTED?this.emit(En.WS_CONNECTED):s===Kn.RECONNECTING?this.emit(En.WS_RECONNECTING,this._websocketReconnectReason):s===Kn.CLOSED&&this.emit(En.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(s,$){super(),gt(this,"_disconnectedReason",void 0),gt(this,"_websocketReconnectReason",void 0),gt(this,"_connectionState",Kn.CLOSED),gt(this,"reconnectToken",void 0),gt(this,"websocket",void 0),gt(this,"openConnectionTime",void 0),gt(this,"clientId",void 0),gt(this,"lastMsgTime",Date.now()),gt(this,"uploadCache",[]),gt(this,"uploadCacheInterval",void 0),gt(this,"rttRolling",new vS(5)),gt(this,"pingpongTimer",void 0),gt(this,"wsInflateDataTimer",void 0),gt(this,"pingpongTimeoutCount",0),gt(this,"joinResponse",void 0),gt(this,"multiIpOption",void 0),gt(this,"initError",void 0),gt(this,"spec",void 0),gt(this,"store",void 0),gt(this,"onWebsocketMessage",_e=>{if(_e.data instanceof ArrayBuffer)return void this.emit(En.ON_BINARY_DATA,_e.data);let tt=JSON.parse(_e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(tt,"_id")){let rt="res-@".concat(tt._id);this.emit(rt,tt._result,tt._message)}else if(Object.prototype.hasOwnProperty.call(tt,"_type")){if(this.emit(tt._type,tt._message),tt._type===Un.ON_NOTIFICATION&&this.handleNotification(tt._message),tt._type===Un.ON_USER_BANNED)switch(tt._message.error_code){case 14:this.close(Xn.UID_BANNED);break;case 15:this.close(Xn.IP_BANNED);break;case 16:this.close(Xn.CHANNEL_BANNED)}if(tt._type===Un.ON_USER_LICENSE_BANNED)switch(tt._message.error_code){case Dn.ERR_LICENSE_MISSING:this.close(Xn.LICENSE_MISSING);break;case Dn.ERR_LICENSE_EXPIRED:this.close(Xn.LICENSE_EXPIRED);break;case Dn.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Xn.LICENSE_MINUTES_EXCEEDED);break;case Dn.ERR_LICENSE_PERIOD_INVALID:this.close(Xn.LICENSE_PERIOD_INVALID);break;case Dn.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Xn.LICENSE_MULTIPLE_SDK_SERVICE);break;case Dn.ERR_LICENSE_ILLEGAL:this.close(Xn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=s.clientId,this.spec=s,this.store=$,this.websocket=new G1("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Ft("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Ft("JOIN_GATEWAY_USE_443PORT_ONLY"),$),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Kn.CONNECTED&&this.reconnect("retry",Do.OFFLINE)})}async request(s,$,_e,tt){let rt=Ir(6,""),it={_id:rt,_type:s,_message:$},at=this.websocket.connectionID,ct=()=>new Jt((At,Ct)=>{if(this.connectionState===Kn.CONNECTED)return At();let It=()=>{this.off(En.WS_CLOSED,kt),At()},kt=()=>{this.off(En.WS_CONNECTED,It),Ct(new Wt(Nt.WS_ABORT))};this.once(En.WS_CONNECTED,It),this.once(En.WS_CLOSED,kt),s!==Pn.PUBLISH&&s!==Pn.SUBSCRIBE&&s!==Pn.UNSUBSCRIBE&&s!==Pn.UNPUBLISH&&s!==Pn.CONTROL&&s!==Pn.RESTART_ICE||this.once(En.DISCONNECT_P2P,()=>{Ct(new Wt(Nt.DISCONNECT_P2P))}),s!==Pn.PUBLISH&&s!==Pn.RESTART_ICE||this.once(En.ABORT_P2P_EXECUTION,()=>{Ct(new Wt(Nt.DISCONNECT_P2P))})});if(this.connectionState!==Kn.CONNECTING&&this.connectionState!==Kn.RECONNECTING||s===Pn.JOIN||s===Pn.REJOIN||await ct(),this.websocket.sendMessage(it,!0),tt)return;let dt=new Jt((At,Ct)=>{let It=!1,kt=(Bt,en)=>{It=!0,At({isSuccess:Bt==="success",message:en||{}}),this.off(En.WS_CLOSED,Vt),this.off(En.WS_RECONNECTING,Vt),this.emit(En.REQUEST_SUCCESS,s,$)};this.once("res-@".concat(rt),kt);let Vt=()=>{Ct(new Wt(Nt.WS_ABORT,"type: ".concat(s))),this.off(En.WS_CLOSED,Vt),this.off(En.WS_RECONNECTING,Vt),this.off("res-@".concat(rt),kt)};this.once(En.WS_CLOSED,Vt),this.once(En.WS_RECONNECTING,Vt),xo(Ft("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==at||It||(Et.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(s)),this.emit(En.REQUEST_TIMEOUT,s,$))})}),ut=null;try{ut=await dt}catch(At){if(this.connectionState===Kn.CLOSED||s===Pn.LEAVE)throw new Wt(Nt.WS_ABORT);return!this.spec.forceWaitGatewayResponse||_e?At.throw():s===Pn.JOIN||s===Pn.REJOIN?null:(await ct(),await this.request(s,$))}if(ut.isSuccess)return ut.message;let pt=Number(ut.message.error_code||ut.message.code),mt=Xp(pt),yt=new Wt(Nt.UNEXPECTED_RESPONSE,"".concat(mt.desc,": ").concat(ut.message.error_str),{code:pt,data:ut.message});return mt.action==="success"?ut.message:(Et.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(s,", error_code: ").concat(pt,", message: ").concat(mt.desc,", action: ").concat(mt.action)),pt===Dn.ERR_TOO_MANY_BROADCASTERS?((s===Pn.JOIN||s===Pn.REJOIN)&&(this.initError=yt,this.close()),yt.throw()):mt.action==="failed"?yt.throw():mt.action==="quit"?(this.initError=yt,this.close(),yt.throw()):(pt===Dn.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=ut.message.option,Et.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Do.MULTI_IP)):this.reconnect(mt.action,Do.SERVER_ERROR),s===Pn.JOIN||s===Pn.REJOIN?null:await this.request(s,$)))}waitMessage(s,$){return new Jt(_e=>{let tt=rt=>{(!$||$(rt))&&(this.off(s,tt),_e(rt))};this.on(s,tt)})}uploadWRTCStats(s){if(!this.store.sessionId)return void Et.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let $={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:s};this.upload(Lu.WRTC_STATS,$)}upload(s,$){let _e={_type:s,_message:$};try{this.websocket.sendMessage(_e)}catch{let tt=Ft("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(_e),this.uploadCache.length>tt&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Kn.CONNECTED)return;let rt=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(rt._type,rt._message)},Ft("UPLOAD_CACHE_INTERVAL")||2e3))}}send(s,$){let _e={_type:s,_message:$};this.websocket.sendMessage(_e)}init(s,$){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Jt((_e,tt)=>{this.once(En.WS_CONNECTED,()=>_e(this.joinResponse)),this.once(En.WS_CLOSED,()=>tt(this.initError||new Wt(Nt.WS_ABORT))),this.connectionState=Kn.CONNECTING,this.websocket.init(s).catch(tt),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(s){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=s||Xn.LEAVE,this.connectionState=Kn.CLOSED,Et.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),s===Xn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new G1("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Ft("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Ft("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(En.ABORT_P2P_EXECUTION);let s=await lo(this,En.REQUEST_JOIN_INFO),$=await this.request(Pn.JOIN,s);if(!$)return this.emit(En.REPORT_JOIN_GATEWAY,qp.TIMEOUT,this.url||""),!1;this.joinResponse=$,this.emit(En.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Kn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Wt(Nt.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");let s=Gp(this,En.REQUEST_REJOIN_INFO);s.token=this.reconnectToken;let $=await this.request(Pn.REJOIN,s);return!!$&&(this.connectionState=Kn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),$.peers&&$.peers.forEach(_e=>{this.emit(Un.ON_USER_ONLINE,{uid:_e.uid}),_e.audio&&this.emit(Un.ON_ADD_AUDIO_STREAM,{uid:_e.uid,uint_id:_e.uint_id,audio:!0,ssrcId:_e.audio_ssrc}),_e.video&&this.emit(Un.ON_ADD_VIDEO_STREAM,{uid:_e.uid,uint_id:_e.uint_id,video:!0,ssrcId:_e.video_ssrc}),_e.audio_mute?this.emit(Un.MUTE_AUDIO,{uid:_e.uid}):this.emit(Un.UNMUTE_AUDIO,{uid:_e.uid}),_e.video_mute?this.emit(Un.MUTE_VIDEO,{uid:_e.uid}):this.emit(Un.UNMUTE_VIDEO,{uid:_e.uid}),_e.audio_enable_local?this.emit(Un.ENABLE_LOCAL_AUDIO,{uid:_e.uid}):this.emit(Un.DISABLE_LOCAL_AUDIO,{uid:_e.uid}),_e.video_enable_local?this.emit(Un.ENABLE_LOCAL_VIDEO,{uid:_e.uid}):this.emit(Un.DISABLE_LOCAL_VIDEO,{uid:_e.uid}),_e.audio||_e.video||this.emit(Un.ON_REMOVE_STREAM,{uid:_e.uid,uint_id:_e.uint_id})}),!0)}reconnect(s,$){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(s,$)}handleNotification(s){Et.debug("[".concat(this.clientId,"] receive notification: "),s);let $=Xp(s.code);if($.action!=="success"){if($.action!=="failed")return $.action==="quit"?($.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Xn.UID_BANNED),void this.close()):void this.reconnect($.action,Do.SERVER_ERROR);Et.error("[".concat(this.clientId,"] ignore error: "),$.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let s=Ft("PING_PONG_TIME_OUT"),$=Date.now();this.pingpongTimeoutCount>=s&&(Et.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat($-this.lastMsgTime,"ms")),$-this.lastMsgTime>Ft("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Do.TIMEOUT):this.request(Pn.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let _e=Date.now()-$;this.rttRolling.add(_e),Ft("REPORT_STATS")&&this.send(Pn.PING_BACK,{pingpongElapse:_e})}).catch(_e=>{})}handleWsInflateData(){let{wsInflateLength:s,wsDeflateLength:$}=this.websocket.getWsInflateData();s!==0&&$!==0&&this.upload(Lu.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:$,ws_inflate_length:s})}handleWebsocketEvents(){this.websocket.on($n.RECONNECT_WAITTING_FINISH,s=>{this.emit(En.WS_RECONNECT_WAITTING_FINISH,s)}),this.websocket.on($n.RECONNECT_CREATE_CONNECTION,s=>{this.emit(En.WS_RECONNECT_CREATE_CONNECTION,s)}),this.websocket.on($n.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on($n.CLOSED,()=>{this.connectionState=Kn.CLOSED}),this.websocket.on($n.FAILED,()=>{this._disconnectedReason=Xn.NETWORK_ERROR,this.connectionState=Kn.CLOSED}),this.websocket.on($n.RECONNECTING,s=>{this._websocketReconnectReason=s,this.joinResponse=void 0,this.connectionState===Kn.CONNECTED?this.connectionState=Kn.RECONNECTING:this.connectionState=Kn.CONNECTING}),this.websocket.on($n.WILL_RECONNECT,(s,$,_e)=>{let tt=Gp(this,En.IS_P2P_DISCONNECTED),rt=tt||s!=="retry";tt&&s==="retry"&&(Et.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),s="tryNext",$=qp.P2P_DISCONNECTED),rt&&(Et.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(s)),this.emit(En.REPORT_JOIN_GATEWAY,$||qp.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(En.NEED_RENEW_SESSION),this.emit(En.DISCONNECT_P2P)),_e(s)}),this.websocket.on($n.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(s=>{Et.warning("[".concat(this.clientId,"] rejoin failed ").concat(s)),this.reconnect("tryNext",Do.SERVER_ERROR)}):this.join().catch(s=>{if(this.emit(En.REPORT_JOIN_GATEWAY,s.message||s.code||qp.UNKNOWN_REASON,this.url||""),s instanceof Wt&&s.code===Nt.UNEXPECTED_RESPONSE&&s.data.code===Dn.ERR_NO_AUTHORIZED)return Et.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Do.SERVER_ERROR);Et.error("[".concat(this.clientId,"] join gateway request failed"),s.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Do.SERVER_ERROR):(this.initError=s,this.close())})}),this.websocket.on($n.REQUEST_NEW_URLS,(s,$)=>{lo(this,En.REQUEST_RECOVER,this.multiIpOption).then(s).catch($)}),this.websocket.on($n.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Un.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}var $N=`	
\v\f\r                　\u2028\u2029\uFEFF`,IM=Cr,AM=Nu,ZS=$N,MN=Rt("".replace),NM=RegExp("^["+ZS+"]+"),wM=RegExp("(^|[^"+ZS+"])["+ZS+"]+$"),eT=function(j){return function(s){var $=AM(IM(s));return 1&j&&($=MN($,NM,"")),2&j&&($=MN($,wM,"$1")),$}},OM={start:eT(1),end:eT(2),trim:eT(3)},PM=qR.PROPER,DM=st,UN=$N,xM=OM.trim;qr({target:"String",proto:!0,forced:function(j){return DM(function(){return!!UN[j]()||"​᠎"[j]()!=="​᠎"||PM&&UN[j].name!==j})}("trim")},{trim:function(){return xM(this)}});var ko,Rl,LM=Xu("String").trim,kM=wt,$M=LM,tT=String.prototype,nT=ot(function(j){var s=j.trim;return typeof j=="string"||j===tT||kM(tT,j)&&s===tT.trim?$M:s});function FN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function H_(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?FN(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):FN(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function up(j){return j.match(/^[\.\:\d]+$/)?"".concat(j.replace(/[^\d]/g,"-"),".").concat(Ft("TURN_DOMAIN")):(Et.info("Unidentified as ip: ".concat(j,", use as host")),j)}function jN(j,s){j.addresses||(j.addresses=[]);let $=function(rt,it){if(Ft("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return rt.map(dt=>{let{ip:ut,port:pt}=dt;return{address:"".concat(ut,":").concat(pt)}});let at=Ft("GATEWAY_DOMAINS"),ct=at[1]&&vn(it).call(it,at[1])?1:0;return rt.map(dt=>{let{domain_prefix:ut,port:pt,ip:mt}=dt;if(ut)return{address:"".concat(ut,".").concat(at[ct++%at.length],":").concat(pt)};let yt=/^[\.\:\d]+$/.test(mt),At=yt?"".concat(mt.replace(/[^\d]/g,"-"),".").concat(at[ct++%at.length],":").concat(pt):"".concat(mt,":").concat(pt);return yt||Et.info("Unidentified as ip: ".concat(mt,", use as host")),{ip:mt,port:pt,address:At}})}(j.addresses,s),_e=Array.isArray(j.detail)&&j.detail[18];if(_e&&typeof _e=="string"){let rt=_e.split(";");for(let it=0;it<rt.length;it++){var tt;let at=nT(tt=rt[it]).call(tt);$[it]&&at&&($[it].ip6=at)}}return{gatewayAddrs:$,uid:j.uid,cid:j.cid,cert:j.cert,vid:j.detail&&j.detail[8],uni_lbs_ip:j.detail&&j.detail[1],res:j,csIp:j.detail&&j.detail[502]}}function Js(j){return typeof j=="number"?j:j.exact||j.ideal||j.max||j.min||0}function VN(j){let s=j._encoderConfig;if(!s)return{};let $={resolution:s.width&&s.height?"".concat(Js(s.width),"x").concat(Js(s.height)):void 0,maxVideoBW:s.bitrateMax,minVideoBW:s.bitrateMin};return typeof s.frameRate=="number"?($.maxFrameRate=s.frameRate,$.minFrameRate=s.frameRate):s.frameRate&&($.maxFrameRate=s.frameRate.max||s.frameRate.ideal||s.frameRate.exact||s.frameRate.min,$.minFrameRate=s.frameRate.min||s.frameRate.ideal||s.frameRate.exact||s.frameRate.max),$}function BN(j){return j>=0&&j<.17?1:j>=.17&&j<.36?2:j>=.36&&j<.59?3:j>=.59&&j<=1?4:j>1?5:0}function rT(j,s){let $,_e,tt;switch(s){case ko.CHOOSE_SERVER:_e=4096,tt="choose server";break;case ko.CLOUD_PROXY:_e=1048576,tt="proxy";break;case ko.CLOUD_PROXY_5:_e=4194304,tt="proxy5";break;case ko.CLOUD_PROXY_FALLBACK:_e=4194310,tt="proxy fallback";break;default:throw new Wt(Nt.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:j.detail&&j.detail[502],retry:!1})}if(j.response_body.forEach(rt=>{rt.buffer&&rt.buffer.flag===_e&&($={code:rt.buffer.code,addresses:(rt.buffer.edges_services||[]).map(it=>H_(H_({},it),{},{ticket:rt.buffer.cert})),server_ts:j.enter_ts,uid:rt.buffer.uid,cid:rt.buffer.cid,cname:rt.buffer.cname,detail:H_(H_({},rt.buffer.detail),j.detail),flag:rt.buffer.flag,opid:j.opid,cert:rt.buffer.cert})}),!$)throw new Wt(Nt.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(tt," from multi unilbs response"),{csIp:j.detail&&j.detail[502]});return $}async function MM(j,s){return await Jt.all(j.addresses.map(async $=>({address:up($.ip),tcpport:$.port,udpport:$.port,username:s&&Ft("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?s.toString():gs.username,password:s&&Ft("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await _S(s.toString()):gs.password})))}function oT(j,s){let $=s._videoHeight||s.getMediaStreamTrack(!0).getSettings().height;return $?Math.max($/Js(j.height),1):(Et.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function pp(j){let{candidateType:s,relayProtocol:$,type:_e,address:tt,port:rt,protocol:it}=j;return _e==="local-candidate"?{candidateType:s,relayProtocol:$,protocol:it}:{candidateType:s,relayProtocol:$,address:tt,port:rt,protocol:it}}function GN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}(function(j){j[j.CHOOSE_SERVER=11]="CHOOSE_SERVER",j[j.CLOUD_PROXY=18]="CLOUD_PROXY",j[j.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",j[j.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"})(ko||(ko={}));class UM extends Fr{get url(){return this._url?this._url:null}get reconnectMode(){return this._reconnectMode}set reconnectMode(s){var $;vn($=["tryNext","recover"]).call($,s)&&this.resetReconnectCount(s),this._reconnectMode=s}get state(){return this._state}set state(s){s!==this._state&&(this._state=s,this._state==="reconnecting"?this.emit(to.RECONNECTING,this.reconnectReason):this._state==="connected"?this.emit(to.CONNECTED):this._state==="closed"?this.emit(to.CLOSED):this._state==="failed"&&this.emit(to.FAILED))}constructor(s,$,_e,tt){super(),gt(this,"connectionID",0),gt(this,"currentURLIndex",0),gt(this,"reconnectReason",void 0),gt(this,"_reconnectMode","tryNext"),gt(this,"_name",void 0),gt(this,"_state","closed"),gt(this,"_retryConfig",void 0),gt(this,"_reconnectCount",0),gt(this,"_forceCloseTimeout",5e3),gt(this,"_onlineReconnectListener",void 0),gt(this,"_closeEstablishingTransmitter",()=>{}),gt(this,"_store",void 0),gt(this,"_joinChannelServiceRecordIndex",void 0),gt(this,"_useCompress",void 0),gt(this,"_inflateLength",0),gt(this,"_deflateLength",0),this._store=tt,this._name=s,this._retryConfig=function(rt){for(var it=1;it<arguments.length;it++){var at=arguments[it]!=null?arguments[it]:{};it%2?GN(Object(at),!0).forEach(function(ct){gt(rt,ct,at[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(at)):GN(Object(at)).forEach(function(ct){Object.defineProperty(rt,ct,Object.getOwnPropertyDescriptor(at,ct))})}return rt}({},$),this._useCompress=_e}resetReconnectCount(s){Et.debug("".concat(this._name," reset reconnect count, reason: ").concat(s)),this._reconnectCount=0}close(s,$){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;let _e=this._transmitter;$?setTimeout(()=>_e.close(),500):_e.close(),this._transmitter=void 0}this.state=s?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}reconnect(s,$){if(!this._transmitter)return void Et.warning("[".concat(this._name,"] can not reconnect, no websocket"));var _e;s!==void 0&&(this.reconnectMode=s),Et.debug("[".concat(this._name,"] reconnect is triggered initiative")),typeof this._joinChannelServiceRecordIndex=="number"&&((_e=this._store)===null||_e===void 0||_e.recordJoinChannelService({status:"error",errors:[new Error($)]},this._joinChannelServiceRecordIndex));let tt=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),tt&&tt.bind(this._transmitter)({code:9999,reason:$})}getInflateData(){let s=this._inflateLength,$=this._deflateLength;return this.clearInflateData(),{inflateLength:s,deflateLength:$}}setInflateData(s){this._deflateLength=this._deflateLength+s.originLength,this._inflateLength=this._inflateLength+s.compressedLength}clearInflateData(){this._inflateLength=0,this._deflateLength=0}}(function(j){j[j.Default=0]="Default",j[j.Ack=1]="Ack"})(Rl||(Rl={}));class FM{constructor(s,$,_e){gt(this,"version",1),gt(this,"initialRTO",void 0),gt(this,"maxBatchAckCount",void 0),gt(this,"maxRTO",void 0),gt(this,"initialRTT",void 0),gt(this,"ID",void 0),gt(this,"rtt",void 0),gt(this,"packetNumber",1),gt(this,"rtoRatioMap",new Map),gt(this,"timeoutMap",new Map),gt(this,"unorderedPacketQueue",[]),gt(this,"batchAckPacketQueue",[]),gt(this,"lastOrderedPacketNumber",0),gt(this,"batchAckTimer",void 0),gt(this,"sendImpl",void 0),gt(this,"receiveImpl",void 0),this.sendImpl=s,this.receiveImpl=$,this.ID=Ir(7,"transmitter-"),this.initialRTO=(_e==null?void 0:_e.initialRTO)!==void 0?_e.initialRTO:Ft("TRANSMITTER_INITIAL_RTO"),this.initialRTT=(_e==null?void 0:_e.initialRTT)!==void 0?_e.initialRTT:Ft("TRANSMITTER_INITIAL_RTT"),this.rtt=(_e==null?void 0:_e.initialRTT)!==void 0?_e.initialRTT:Ft("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=(_e==null?void 0:_e.maxBatchAckCount)!==void 0?_e.maxBatchAckCount:Ft("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=(_e==null?void 0:_e.maxRTO)!==void 0?_e.maxRTO:Ft("TRANSMITTER_MAX_RTO")}packetize(s,$){return{type:Rl.Default,version:this.version,packetNumber:$,payload:s}}serialize(s){switch(s.type){case Rl.Default:{let $;typeof s.payload=="string"?$=new TextEncoder().encode(s.payload):$=s.payload;let _e=new ArrayBuffer($.length+15),tt=new DataView(_e);return tt.setUint16(0,s.version),tt.setUint8(2,s.type),tt.setUint32(3,s.packetNumber),tA(tt,7,BigInt(s.sendTs)),new Uint8Array(tt.buffer).set($,15),_e}case Rl.Ack:{let $=new ArrayBuffer(16),_e=new DataView($);return _e.setUint16(0,s.version),_e.setUint8(2,s.type),_e.setUint32(3,s.maxAckPacketNumber),_e.setUint8(7,s.shift),tA(_e,8,BigInt(s.ackSendTs)),$}}}deserialize(s){let $=new DataView(s),_e=$.getUint16(0),tt=$.getUint8(2);switch(tt){case Rl.Default:{let rt=$.getUint32(3),it=eA($,7),at=s.slice(15),ct=new TextDecoder().decode(at);return{version:_e,type:tt,packetNumber:rt,sendTs:Number(it),payload:ct}}case Rl.Ack:{let rt=$.getUint32(3),it=$.getUint8(7),at=eA($,8);return{version:_e,type:tt,maxAckPacketNumber:rt,shift:it,ackSendTs:Number(at)}}default:throw Et.error("[".concat(this.ID,"] Unrecognized packet type ").concat(tt)),new Error("Unrecognized packet type ".concat(tt))}}sendMessage(s){let $=this.packetize(s,this.packetNumber);this.packetNumber=this.packetNumber===4294967295?1:this.packetNumber+1;let _e=this.calculateRTO($),tt=window.setTimeout(()=>{this.resendMessage($)},_e);this.timeoutMap.set($.packetNumber,tt),this.sendPacket($)}onData(s){let $=this.deserialize(s);$.type===Rl.Default?this.ack($):$.type===Rl.Ack&&(this.updateRTT($,Math.round(performance.now())),this.clearRTO($))}close(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach(s=>{let[$,_e]=s;window.clearTimeout(_e)}),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,this.batchAckTimer!==void 0&&window.clearTimeout(this.batchAckTimer)}resendMessage(s){let $=this.calculateRTO(s),_e=window.setTimeout(()=>{this.resendMessage(s)},$);this.timeoutMap.set(s.packetNumber,_e),this.sendPacket(s)}calculateRTO(s){let $=this.rtoRatioMap.get(s.packetNumber);if($===void 0)return this.rtoRatioMap.set(s.packetNumber,1),this.initialRTO;{let _e=9*this.rtt/8*$;return this.rtoRatioMap.set(s.packetNumber,$+1),_e>this.maxRTO?this.maxRTO:_e}}updateRTT(s,$){let _e=s.ackSendTs;this.rtt=this.rtt*(7/8)+($-_e-this.rtt)/8}ack(s){if(s.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(s):(this.batchAckPacketQueue.push(s),this.batchAckTimer=window.setTimeout(()=>{this.batchAck()},this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(s.payload);;){let $=this.unorderedPacketQueue[0];if(!$){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl($.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(s.packetNumber<=this.lastOrderedPacketNumber){let $={ackSendTs:s.sendTs,maxAckPacketNumber:s.packetNumber,shift:0,type:Rl.Ack,version:this.version};this.sendPacket($)}else if(s.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[s.packetNumber-this.lastOrderedPacketNumber-2]=s;let $={ackSendTs:s.sendTs,maxAckPacketNumber:s.packetNumber,shift:0,type:Rl.Ack,version:this.version};this.sendPacket($)}}batchAck(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;let s={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:Rl.Ack,version:this.version};this.sendPacket(s),this.batchAckPacketQueue=[]}sendPacket(s){s.type===Rl.Default&&(s.sendTs=Math.round(performance.now()));let $=this.serialize(s);this.sendImpl($)}clearRTO(s){for(let $=s.maxAckPacketNumber-s.shift;$<=s.maxAckPacketNumber;$++){let _e=this.timeoutMap.get($);_e!==void 0&&window.clearTimeout(_e),this.timeoutMap.delete($),this.rtoRatioMap.delete($)}}}class WN extends UM{constructor(s,$){super(s,$,arguments.length>2&&arguments[2]!==void 0&&arguments[2],arguments.length>3?arguments[3]:void 0),gt(this,"_initMutex",void 0),gt(this,"_reconnectInterrupter",void 0),gt(this,"_url",void 0),gt(this,"_transmitter",void 0),gt(this,"_addresses",void 0),gt(this,"_reliableTransmission",void 0),this._initMutex=new Lo("datachannel");let{timeout:_e,timeoutFactor:tt}=$,rt=Math.max(300,Math.floor(3*_e/5)),it=Math.max(1.2,Math.floor(8*tt)/10);us.ONLINE&&(this._retryConfig.timeout=rt,this._retryConfig.timeoutFactor=it),uo.on(Du.NETWORK_STATE_CHANGE,(at,ct)=>{at!==ct&&(this.resetReconnectCount("network state change: ".concat(ct," -> ").concat(at)),at===us.ONLINE?(this._retryConfig.timeout=rt,this._retryConfig.timeoutFactor=it):(this._retryConfig.timeout=_e,this._retryConfig.timeoutFactor=tt))})}getConnection(){if(this._reliableTransmission)return this._reliableTransmission}async init(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3;this._forceCloseTimeout=$;let _e=(tt,rt)=>{this._addresses=s,this.currentURLIndex=this._addresses.findIndex(at=>at.fingerprint||Ft("FINGERPRINT"));let it=this._addresses[this.currentURLIndex];this.state="connecting",this.createTransmitterConnection(it).then(tt).catch(rt),this.once(to.CLOSED,()=>rt(new Wt(Nt.WS_DISCONNECT))),this.once(to.CONNECTED,()=>tt())};return this._initMutex.lock().then(tt=>new Jt((rt,it)=>{_e(rt,it)}).then(()=>{tt()}).catch(()=>{tt()}))}sendMessage(s){let $=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Wt(Nt.WS_ABORT,"datachannel is not ready");try{$||(s=JSON.stringify(s)),this._reliableTransmission.sendMessage(s)}catch(_e){throw new Wt(Nt.WS_ERR,"send datachannel signal message error"+_e.toString())}}unbindDcCloseEventListener(){this._transmitter&&(this._transmitter.onclose=null)}sendMessageWithJSON(s){let $=JSON.stringify(s);return{compressed:$,compressedLength:$.length,origin:s}}sendMessageWithUint8Array(s){return{compressed:s,compressedLength:s.byteLength,origin:s}}createTransmitterConnection(s){return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(s.ip,":").concat(s.port),new Jt(($,_e)=>{var tt;let rt=()=>{Et.debug("[".concat(this._name,"] datachannel opened:"),this._url),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),$()},it=async ut=>{var pt;if((pt=this._closeEstablishingTransmitter)===null||pt===void 0||pt.call(this),Et.debug("[".concat(this._name,"] datachannel close ").concat(this._url,", code: ").concat(ut.code,", reason: ").concat(ut.reason,", current mode: ").concat(this.reconnectMode)),this._reconnectCount<this._retryConfig.maxRetryCount){this.state==="connected"&&(this.reconnectReason=ut.reason,this.state="reconnecting");let mt=Ms(this,to.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,yt=await this.reconnectWithAction(mt);if(this.state==="closed")return void Et.debug("[".concat(this.connectionID,"] dc is closed, no need to reconnect"));if(!yt)return _e(new Wt(Nt.WS_DISCONNECT,"datachannel reconnect failed: ".concat(ut.code))),void this.close(!0);$()}else _e(new Wt(Nt.WS_DISCONNECT,"datachannel close: ".concat(ut.code))),this.close()},at=ut=>{var pt;(pt=this._reliableTransmission)===null||pt===void 0||pt.onData(ut.data)};this._transmitter&&(this._transmitter.onclose=null,this._transmitter.close()),this._reliableTransmission&&(this._reliableTransmission.close(),this._reliableTransmission=void 0),Et.debug("[".concat(this._name,"] start connect, address: ").concat(JSON.stringify(s)));let ct=(tt=this._store)===null||tt===void 0?void 0:tt.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),dt=Date.now();lo(this,to.TO_CONNECT_DATACHANNEL,s).then(ut=>{var pt,mt;if(!ut)throw new Error("transmissonInfo not exist yet");let{transmitter:yt,close:At}=ut;this._transmitter=yt,(pt=this._store)===null||pt===void 0||pt.signalChannelOpen();let Ct=Date.now()-dt;Et.debug("[choose dc] dc open cost ".concat(Ct,"ms")),this._reliableTransmission=new FM(It=>{var kt;this._transmitter&&this._transmitter.readyState==="open"&&((kt=this._transmitter)===null||kt===void 0||kt.send(It))},It=>{typeof It=="string"&&this.emit(to.ON_MESSAGE,It)}),this._closeEstablishingTransmitter=()=>{var It;(It=this._reliableTransmission)===null||It===void 0||It.close(),this._reliableTransmission=void 0,At()},rt&&rt(),yt.onclose=it,yt.onmessage=at,(mt=this._store)===null||mt===void 0||mt.recordJoinChannelService({endTs:Date.now(),status:"success"},ct),this._joinChannelServiceRecordIndex=ct}).catch(ut=>{var pt;if((pt=this._store)===null||pt===void 0||pt.recordJoinChannelService({endTs:Date.now(),status:ut instanceof Wt&&ut.code===Nt.WS_ABORT?"aborted":"error",errors:[ut]},ct),this.state!=="closed"){if(ut instanceof Wt&&ut.code===Nt.WS_ERR){let mt=new Wt(Nt.WS_ERR,"init datachannel failed! Error: ".concat(ut.toString()));return Et.error("[".concat(this._name,"]").concat(mt)),void _e(mt)}it&&it(ut)}else _e(new Wt(Nt.WS_DISCONNECT,"datachannel is closed: ".concat(ut.toString())))})})}async reconnectWithAction(s){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(this._reconnectCount>=this._retryConfig.maxRetryCount||!this._addresses||this.state==="closed")return!1;this._onlineReconnectListener||uo.networkState!==us.OFFLINE||(this._onlineReconnectListener=uo.onlineWaiter&&uo.onlineWaiter.then(()=>{this._onlineReconnectListener=void 0}));let _e=!0;if(this._reconnectInterrupter=()=>{_e=!1},$){let at=I_(this._reconnectCount,this._retryConfig);Et.debug("[".concat(this._name,"] wait ").concat(at,"ms to reconnect datachannel, mode: ").concat(s)),await Jt.race([xo(at),this._onlineReconnectListener||new Jt(()=>{})])}if(this.state==="closed"||!_e)return!1;this._reconnectCount+=1;let tt=async(at,ct)=>{this.emit(to.RECONNECT_CREATE_CONNECTION,ct),await this.createTransmitterConnection(at)};try{if(s==="retry"){let at=this._addresses[this.currentURLIndex];this.emit(to.RECONNECT_WAITTING_FINISH,s),await tt(at,s)}else if(s==="tryNext"){this.currentURLIndex+=1;for(let ct=this.currentURLIndex;ct<this._addresses.length;ct++){if(this._addresses[ct].fingerprint||Ft("FINGERPRINT")){this.currentURLIndex=ct;break}this.currentURLIndex+=1}if(this.currentURLIndex>=this._addresses.length)return Et.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),await this.reconnectWithAction("recover",!1);Et.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex));let at=this._addresses[this.currentURLIndex];this.emit(to.RECONNECT_WAITTING_FINISH,s),await tt(at,s)}else s==="recover"&&(Et.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(to.RECONNECT_WAITTING_FINISH,s),this.emit(to.FAILBACK));return!0}catch(at){var rt,it;return Et.error("[".concat(this._name,"] reconnect failed"),at.toString()),at!=null&&(rt=at.data)!==null&&rt!==void 0&&rt.desc&&Array.isArray(at.data.desc)&&at.data.desc.length&&vn(it=at.data.desc).call(it,"dynamic key expired")?(this.emit(to.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):await this.reconnectWithAction(s,$)}}}class ku extends Fr{get connectionState(){return this._connectionState}set connectionState(s){s!==this._connectionState&&(this._connectionState=s,s===Kn.CONNECTED?this.emit(En.WS_CONNECTED):s===Kn.RECONNECTING?this.emit(En.WS_RECONNECTING,this._websocketReconnectReason):s===Kn.CLOSED&&this.emit(En.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}constructor(s,$){super(),gt(this,"_disconnectedReason",void 0),gt(this,"_websocketReconnectReason",void 0),gt(this,"_connectionState",Kn.CLOSED),gt(this,"reconnectToken",void 0),gt(this,"websocket",void 0),gt(this,"openConnectionTime",void 0),gt(this,"clientId",void 0),gt(this,"lastMsgTime",Date.now()),gt(this,"uploadCache",[]),gt(this,"uploadCacheInterval",void 0),gt(this,"rttRolling",new vS(5)),gt(this,"pingpongTimer",void 0),gt(this,"inflateDataTimer",void 0),gt(this,"pingpongTimeoutCount",0),gt(this,"joinResponse",void 0),gt(this,"multiIpOption",void 0),gt(this,"initError",void 0),gt(this,"spec",void 0),gt(this,"store",void 0),gt(this,"onWebsocketMessage",_e=>{if(_e instanceof ArrayBuffer)return void this.emit(En.ON_BINARY_DATA,_e);let tt=JSON.parse(_e);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(tt,"_id")){let rt="res-@".concat(tt._id);this.emit(rt,tt._result,tt._message)}else if(Object.prototype.hasOwnProperty.call(tt,"_type")&&(this.emit(tt._type,tt._message),tt._type===Un.ON_NOTIFICATION&&this.handleNotification(tt._message),tt._type===Un.ON_USER_BANNED))switch(tt._message.error_code){case 14:this.close(Xn.UID_BANNED);break;case 15:this.close(Xn.IP_BANNED);break;case 16:this.close(Xn.CHANNEL_BANNED)}}),this.clientId=s.clientId,this.spec=s,this.store=$,this.websocket=new WN("gateway-".concat(this.clientId),this.spec.retryConfig,!0,$),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Kn.CONNECTED&&this.reconnect("retry",fu.OFFLINE)})}async request(s,$,_e,tt){let rt=Ir(6,""),it={_id:rt,_type:s,_message:$},at=this.websocket.connectionID,ct=()=>new Jt((At,Ct)=>{if(this.connectionState===Kn.CONNECTED)return At();let It=()=>{this.off(En.WS_CLOSED,kt),At()},kt=()=>{this.off(En.WS_CONNECTED,It),Ct(new Wt(Nt.WS_ABORT))};this.once(En.WS_CONNECTED,It),this.once(En.WS_CLOSED,kt),s!==Pn.PUBLISH&&s!==Pn.SUBSCRIBE&&s!==Pn.UNSUBSCRIBE&&s!==Pn.UNPUBLISH&&s!==Pn.CONTROL&&s!==Pn.RESTART_ICE||this.once(En.DISCONNECT_P2P,()=>{Ct(new Wt(Nt.DISCONNECT_P2P))}),s!==Pn.PUBLISH&&s!==Pn.RESTART_ICE||this.once(En.ABORT_P2P_EXECUTION,()=>{Ct(new Wt(Nt.DISCONNECT_P2P))})});if(this.connectionState!==Kn.CONNECTING&&this.connectionState!==Kn.RECONNECTING||s===Pn.JOIN||s===Pn.REJOIN||await ct(),s===Pn.LEAVE&&(this.websocket.unbindDcCloseEventListener(),tt=!0),this.websocket.sendMessage(it,!0,!1),tt)return;let dt=new Jt((At,Ct)=>{let It=!1,kt=(Bt,en)=>{It=!0,At({isSuccess:Bt==="success",message:en||{}}),this.off(En.WS_CLOSED,Vt),this.off(En.WS_RECONNECTING,Vt),this.emit(En.REQUEST_SUCCESS,s,$)};this.once("res-@".concat(rt),kt);let Vt=()=>{Ct(new Wt(Nt.WS_ABORT,"type: ".concat(s))),this.off(En.WS_CLOSED,Vt),this.off(En.WS_RECONNECTING,Vt),this.off("res-@".concat(rt),kt)};this.once(En.WS_CLOSED,Vt),this.once(En.WS_RECONNECTING,Vt),xo(Ft("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==at||It||(Et.warning("dc request timeout, type: ".concat(s)),this.emit(En.REQUEST_TIMEOUT,s,$))})}),ut=null;try{ut=await dt}catch(At){if(this.connectionState===Kn.CLOSED||s===Pn.LEAVE)throw new Wt(Nt.WS_ABORT);return!this.spec.forceWaitGatewayResponse||_e?At.throw():s===Pn.JOIN||s===Pn.REJOIN?null:(await ct(),await this.request(s,$))}if(ut.isSuccess)return ut.message;let pt=Number(ut.message.error_code||ut.message.code),mt=Xp(pt),yt=new Wt(Nt.UNEXPECTED_RESPONSE,"".concat(mt.desc,": ").concat(ut.message.error_str),{code:pt,data:ut.message});return mt.action==="success"?ut.message:(Et.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(s,", error_code: ").concat(pt,", message: ").concat(mt.desc,", action: ").concat(mt.action)),pt===Dn.ERR_TOO_MANY_BROADCASTERS?((s===Pn.JOIN||s===Pn.REJOIN)&&(this.initError=yt,this.close()),yt.throw()):mt.action==="failed"?yt.throw():mt.action==="quit"?(this.initError=yt,this.close(),yt.throw()):(pt===Dn.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=ut.message.option,Et.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",fu.MULTI_IP)):this.reconnect(mt.action,fu.SERVER_ERROR),s===Pn.JOIN||s===Pn.REJOIN?null:await this.request(s,$)))}waitMessage(s,$){return new Jt(_e=>{let tt=rt=>{(!$||$(rt))&&(this.off(s,tt),_e(rt))};this.on(s,tt)})}uploadWRTCStats(s){if(!this.store.sessionId)return void Et.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let $={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:s};this.upload(Lu.WRTC_STATS,$)}upload(s,$){let _e={_type:s,_message:$};try{this.websocket.sendMessage(_e)}catch{let tt=Ft("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(_e),this.uploadCache.length>tt&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Kn.CONNECTED)return;let rt=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(rt._type,rt._message)},Ft("UPLOAD_CACHE_INTERVAL")||2e3))}}send(s,$){let _e={_type:s,_message:$};this.websocket.sendMessage(_e)}init(s,$){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Jt((_e,tt)=>{this.once(En.WS_CONNECTED,()=>_e(this.joinResponse)),this.once(En.WS_CLOSED,()=>tt(this.initError||new Wt(Nt.WS_ABORT))),this.connectionState=Kn.CONNECTING,this.websocket.init(s).catch(tt),this.websocket.once(to.FAILBACK,()=>{this.openConnectionTime===void 0&&tt(new Wt(Nt.INIT_DATACHANNEL_TIMEOUT))}),this.inflateDataTimer&&window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=window.setInterval(()=>{this.handleInflateData()},2e4),setTimeout(()=>{$&&this.openConnectionTime===void 0&&(Et.debug("[".concat(this.clientId,"] init datachannel timeout while join with failback to websocket")),tt(new Wt(Nt.INIT_DATACHANNEL_TIMEOUT)))},Ft("DC_JOIN_WITH_FAILBACK"))})}close(s){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=s||Xn.LEAVE,this.connectionState=Kn.CLOSED,Et.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),s===Xn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new WN("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}async join(){if(!this.joinResponse){this.emit(En.ABORT_P2P_EXECUTION);let s=await lo(this,En.DATACHANNEL_CONNECTING),$=await this.request(Pn.JOIN,s);if(!$)return this.emit(En.REPORT_JOIN_GATEWAY,Nt.TIMEOUT,this.url||""),!1;this.joinResponse=$,this.emit(En.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Kn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new Wt(Nt.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");let s=Gp(this,En.REQUEST_REJOIN_INFO);s.token=this.reconnectToken;let $=await this.request(Pn.REJOIN,s);return!!$&&(this.connectionState=Kn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),$.peers&&$.peers.forEach(_e=>{this.emit(Un.ON_USER_ONLINE,{uid:_e.uid}),_e.audio&&this.emit(Un.ON_ADD_AUDIO_STREAM,{uid:_e.uid,uint_id:_e.uint_id,audio:!0,ssrcId:_e.audio_ssrc}),_e.video&&this.emit(Un.ON_ADD_VIDEO_STREAM,{uid:_e.uid,uint_id:_e.uint_id,video:!0,ssrcId:_e.video_ssrc}),_e.audio_mute?this.emit(Un.MUTE_AUDIO,{uid:_e.uid}):this.emit(Un.UNMUTE_AUDIO,{uid:_e.uid}),_e.video_mute?this.emit(Un.MUTE_VIDEO,{uid:_e.uid}):this.emit(Un.UNMUTE_VIDEO,{uid:_e.uid}),_e.audio_enable_local?this.emit(Un.ENABLE_LOCAL_AUDIO,{uid:_e.uid}):this.emit(Un.DISABLE_LOCAL_AUDIO,{uid:_e.uid}),_e.video_enable_local?this.emit(Un.ENABLE_LOCAL_VIDEO,{uid:_e.uid}):this.emit(Un.DISABLE_LOCAL_VIDEO,{uid:_e.uid}),_e.audio||_e.video||this.emit(Un.ON_REMOVE_STREAM,{uid:_e.uid,uint_id:_e.uint_id})}),!0)}reconnect(s,$){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(s,$)}handleNotification(s){Et.debug("[".concat(this.clientId,"] receive notification: "),s);let $=Xp(s.code);if($.action!=="success"){if($.action!=="failed")return $.action==="quit"?($.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Xn.UID_BANNED),void this.close()):void this.reconnect($.action,fu.SERVER_ERROR);Et.error("[".concat(this.clientId,"] ignore error: "),$.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let s=Ft("PING_PONG_TIME_OUT"),$=Date.now();this.pingpongTimeoutCount>=s&&(Et.warning("PINGPONG Timeout. Last Socket Message: ".concat($-this.lastMsgTime,"ms")),$-this.lastMsgTime>Ft("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",fu.TIMEOUT):this.request(Pn.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let _e=Date.now()-$;this.rttRolling.add(_e),Ft("REPORT_STATS")&&this.send(Pn.PING_BACK,{pingpongElapse:_e})}).catch(_e=>{})}handleInflateData(){let{inflateLength:s,deflateLength:$}=this.websocket.getInflateData();s!==0&&$!==0&&this.upload(Lu.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:$,ws_inflate_length:s})}handleWebsocketEvents(){this.websocket.on(to.RECONNECT_WAITTING_FINISH,s=>{this.emit(En.WS_RECONNECT_WAITTING_FINISH,s)}),this.websocket.on(to.RECONNECT_CREATE_CONNECTION,s=>{this.emit(En.WS_RECONNECT_CREATE_CONNECTION,s)}),this.websocket.on(to.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(to.CLOSED,()=>{this.connectionState=Kn.CLOSED}),this.websocket.on(to.FAILED,()=>{this._disconnectedReason=Xn.NETWORK_ERROR,this.connectionState=Kn.CLOSED}),this.websocket.on(to.RECONNECTING,s=>{this._websocketReconnectReason=s,this.joinResponse=void 0,this.connectionState===Kn.CONNECTED?this.connectionState=Kn.RECONNECTING:this.connectionState=Kn.CONNECTING}),this.websocket.on(to.WILL_RECONNECT,(s,$)=>{if(Gp(this,En.IS_P2P_DISCONNECTED)&&s==="retry")return Et.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),this.reconnectToken=void 0,this.emit(En.NEED_RENEW_SESSION),this.emit(En.DISCONNECT_P2P),$("tryNext");s!=="retry"&&(Et.debug("".concat(this.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(s)),this.reconnectToken=void 0,this.emit(En.NEED_RENEW_SESSION),this.emit(En.DISCONNECT_P2P)),$(s)}),this.websocket.on(to.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch(s=>{Et.warning("[".concat(this.clientId,"] rejoin failed ").concat(s)),this.reconnect("tryNext",fu.SERVER_ERROR)}):this.join().catch(s=>{if(this.emit(En.REPORT_JOIN_GATEWAY,s.message||s.code,this.url||""),s instanceof Wt&&s.code===Nt.UNEXPECTED_RESPONSE&&s.data.code===Dn.ERR_NO_AUTHORIZED)return Et.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",fu.SERVER_ERROR);Et.error("[".concat(this.clientId,"] join gateway request failed"),s.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",fu.SERVER_ERROR):(this.initError=s,this.close())})}),this.websocket.on(to.REQUEST_NEW_URLS,(s,$)=>{lo(this,En.REQUEST_RECOVER,this.multiIpOption).then(s).catch($)}),this.websocket.on(to.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Un.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this.websocket.on(to.TO_CONNECT_DATACHANNEL,async(s,$,_e)=>lo(this,En.DATACHANNEL_PRECONNECT,s).then($).catch(_e)),this.websocket.on(to.FAILBACK,()=>{this.openConnectionTime!==void 0&&this.emit(En.DATACHANNEL_FAILBACK)})}}class Jp extends Fr{constructor(s,$){super(),gt(this,"signal",void 0),gt(this,"token",void 0),gt(this,"tokenTimeout",void 0),gt(this,"tokenInterval",void 0),gt(this,"_sequence",0),gt(this,"userMap",new Map),gt(this,"encoder",new TextEncoder),this.signal=s,this.token=$;let _e=()=>{this.signal.connectionState===Kn.CONNECTED&&this.check(),this.userMap.size===0?this.tokenInterval=window.setTimeout(_e,1e3):this.tokenInterval=window.setTimeout(_e,3*Ft("P2P_TOKEN_INTERVAL"))};_e()}async send(s,$,_e,tt,rt){var it,at,ct;if(this.userMap.size===0)return;let dt=Array.from(nu(it=this.userMap).call(it))[0].token;typeof $!="string"&&($=JSON.stringify($)),tt=(at=tt)!==null&&at!==void 0?at:Ir(6,""),rt=(ct=rt)!==null&&ct!==void 0?ct:this._sequence++;let ut={_id:tt,_type:s,_seq:rt,_message:$,token:"".concat(this.token,"_").concat(dt)};Ft("SHOW_P2P_LOG")&&Et.debug("send message",ut,"noNeedResponse : ".concat(_e)),this.splitMessage(JSON.stringify(ut)).forEach(mt=>{this.signal.request(Pn.DATA_STREAM,{payload:xm(this.encoder.encode(mt))})});let pt=new Jt((mt,yt)=>{let At=window.setTimeout(()=>{this.off("res-@".concat(tt,"_ack"),Ct),this.off("res-@".concat(tt),kt),this.off(dp.ABORT,It),Et.debug("[external-signal] request timeout, type: ".concat(s,", requestId: ").concat(tt)),this.userMap.size===0?yt(new rn(Nt.INVALID_REMOTE_USER)):yt(new rn(Nt.TIMEOUT))},Ft("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),Ct=()=>{At&&window.clearTimeout(At),this.off(dp.ABORT,It),_e&&mt()},It=()=>{At&&window.clearTimeout(At),this.off("res-@".concat(tt,"_ack"),Ct),this.off("res-@".concat(tt),kt),yt(new rn(Nt.EXTERNAL_SIGNAL_ABORT,"type: ".concat(s,", requestId: ").concat(tt)))};this.once(dp.ABORT,It),this.once("res-@".concat(tt,"_ack"),Ct);let kt=(Bt,en)=>{Vt=!0,At&&window.clearTimeout(At),this.off("res-@".concat(tt,"_ack"),Ct),this.off(dp.ABORT,It),Bt==="success"?mt(en):yt(new rn(Nt.P2P_MESSAGE_FAILED,"request ".concat(s," failed, requestId: ").concat(tt)))},Vt=!1;_e||(this.once("res-@".concat(tt),kt),xo(Ft("SIGNAL_REQUEST_TIMEOUT")).then(()=>{Vt||Et.warning("external_signal request timeout, type: ".concat(s,", requestId: ").concat(tt,", ").concat(ut))}))});try{return await pt}catch(mt){if(mt.code===Nt.TIMEOUT)return await this.send(s,$,_e,tt,rt);throw mt}}onMessage(s){var $;let{_uid:_e}=s,tt,rt=this.userMap.get(_e);if(rt)tt=rt.splitMessageMap;else{if(this.userMap.size>0||!("_type"in s)||s._type!==Kr.CHECK)return;let{token:dt}=s;tt=new Map,rt={uid:_e,isStart:!0,token:dt,splitMessageMap:tt,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(_e,rt),this.signal.emit(Un.ON_USER_ONLINE,{uid:_e}),this.handleUserOnline()}if("id"in s&&"total"in s){var it;let{id:dt,total:ut}=s,pt=(it=tt.get(dt))!==null&&it!==void 0?it:[];if(pt.push(s),tt.has(dt)||tt.set(dt,pt),pt.length!==ut)return;{let mt=R1(pt).call(pt,(yt,At)=>yt.index-At.index).map(yt=>yt.payload).join("");tt.delete(dt),(s=JSON.parse(mt))._uid=_e}}let{_type:at,token:ct}=s;if(vn($=[Kr.ACK,Kr.CHECK]).call($,at))return at===Kr.CHECK&&this.handleCheckToken(rt,ct),void this.receiveMessage(s);ct==="".concat(rt.token,"_").concat(this.token)?this.handleReceivedMessage(s):Et.debug('Receive unexpected message", '.concat(ct,", cur_token: ").concat(rt.token,"_").concat(this.token),s)}check(){let s={_id:Ir(6,""),token:this.token,_type:Kr.CHECK};Ft("SHOW_P2P_LOG")&&Et.debug("send message",s),this.signal.request(Pn.DATA_STREAM,{payload:xm(this.encoder.encode(JSON.stringify(s)))})}ack(s){let $={_id:s,_type:Kr.ACK,token:this.token};Ft("SHOW_P2P_LOG")&&Et.debug("send message",$),this.signal.request(Pn.DATA_STREAM,{payload:xm(this.encoder.encode(JSON.stringify($)))})}response(s,$,_e){this.send(Kr.RESPONSE,JSON.stringify({success:!_e,message:$}),!0,s)}handleReceivedMessage(s){let $=()=>{this.userMap.forEach(dt=>{let{receivedMessagesMap:ut,nextExpectedSequenceNumber:pt}=dt;for(;ut.has(pt);){let mt=ut.get(pt);ut.delete(pt),this.receiveMessage(mt),dt.nextExpectedSequenceNumber++}})};if(!s)return void $();let{_uid:_e,_seq:tt}=s,rt=this.userMap.get(_e),{receivedMessagesMap:it,isStart:at,nextExpectedSequenceNumber:ct}=rt;if(tt<ct)return this.ack(s._id),void Et.debug("[external-signal] receive old message, seq: ".concat(tt,", ").concat(s._message));it.set(tt,s),at&&tt===ct&&(this.receiveMessage(s),it.delete(ct),rt.nextExpectedSequenceNumber++,$())}receiveMessage(s){let{_id:$,_type:_e,_message:tt,_uid:rt}=s;if(Ft("SHOW_P2P_LOG")&&Et.debug("receive message",s),$){let it;switch(s._type!==Kr.ACK&&(tt&&(it=JSON.parse(tt)),this.ack(s._id)),s._type){case Kr.CANDIDATE:case Kr.CONTROL:this.signal.emit(_e,it,rt);break;case Kr.PUBLISH:case Kr.UNPUBLISH:case Kr.RESTART_ICE:case Kr.CALL:it.uid=rt,lo(this.signal,_e,it).then(at=>{this.response(s._id,at)}).catch(()=>{this.response(s._id,void 0,!0)});break;case Kr.ACK:this.getListeners("res-@".concat($,"_ack")).length>0&&this.emit("res-@".concat($,"_ack"));break;case Kr.RESPONSE:{let{success:at,message:ct}=it;this.emit("res-@".concat($),at?"success":"failed",ct);break}}}}splitMessage(s){if(s.length<Jp.MAX_MESSAGE_SIZE)return[s];let $=[],{remoteToken:_e}=JSON.parse(s),tt=Ir(6,""),rt=0,it=800,at=Math.ceil(s.length/it);for(;s.length>0;){rt++;let ct={id:tt,index:rt,total:at,payload:s.slice(0,it),token:"".concat(this.token,"_").concat(_e)};JSON.stringify(ct).length>Jp.MAX_MESSAGE_SIZE?it-=50:($.push(ct),s=s.slice(it))}return $.map(ct=>JSON.stringify(ct))}handleCheckToken(s,$){return s.token!==$?(Et.debug("token changed, from ".concat(s.token," to ").concat($)),this.reset(s.uid,$),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout(()=>{Et.debug("token timeout, ".concat($)),this.reset(s.uid)},Ft("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){let s=await lo(this.signal,Kr.CALL,void 0),$=await this.send(Kr.CALL,s);this.signal.emit(En.P2P_CONNECTION,$,!0)}async reset(s,$){let _e=this.userMap.get(s);_e&&(this.emit(dp.ABORT),this.signal.emit(Un.ON_USER_OFFLINE,{uid:_e.uid,reason:JS.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),$||(Et.debug("change local token from ".concat($," to ").concat($)),this.token=Ir(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(dp.ABORT)}}gt(Jp,"MAX_SIZE",1),gt(Jp,"MAX_MESSAGE_SIZE",1024);class HN extends Fr{get connectionState(){return this._connectionState}set connectionState(s){s!==this._connectionState&&(this._connectionState=s,s===Kn.CONNECTED?this.emit(En.WS_CONNECTED):s===Kn.RECONNECTING?this.emit(En.WS_RECONNECTING,this._websocketReconnectReason):s===Kn.CLOSED&&this.emit(En.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(s,$){super(),gt(this,"_disconnectedReason",void 0),gt(this,"_websocketReconnectReason",void 0),gt(this,"_connectionState",Kn.CLOSED),gt(this,"reconnectToken",void 0),gt(this,"p2pToken",void 0),gt(this,"websocket",void 0),gt(this,"openConnectionTime",void 0),gt(this,"clientId",void 0),gt(this,"lastMsgTime",Date.now()),gt(this,"uploadCache",[]),gt(this,"uploadCacheInterval",void 0),gt(this,"rttRolling",new vS(5)),gt(this,"pingpongTimer",void 0),gt(this,"pingpongTimeoutCount",0),gt(this,"joinResponse",void 0),gt(this,"multiIpOption",void 0),gt(this,"initError",void 0),gt(this,"spec",void 0),gt(this,"store",void 0),gt(this,"_external_signal",void 0),gt(this,"onWebsocketMessage",_e=>{if(_e.data instanceof ArrayBuffer)return void this.emit(En.ON_BINARY_DATA,_e.data);let tt=JSON.parse(_e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(tt,"_id")){let rt="res-@".concat(tt._id);this.emit(rt,tt._result,tt._message)}else if(Object.prototype.hasOwnProperty.call(tt,"_type")){switch(tt._type){case Un.ON_DATA_STREAM:return void this.handleDataStream(tt._message);case Un.MUTE_AUDIO:case Un.MUTE_VIDEO:case Un.ON_P2P_LOST:case Un.ON_USER_ONLINE:return;case Un.ON_USER_OFFLINE:let{uid:rt}=tt._message;return Et.debug("[".concat(this.clientId,"] user-offline uid: ").concat(rt)),void this._external_signal.reset(rt)}if(this.emit(tt._type,tt._message),tt._type===Un.ON_NOTIFICATION&&this.handleNotification(tt._message),tt._type===Un.ON_USER_BANNED)switch(tt._message.error_code){case 14:this.close(Xn.UID_BANNED);break;case 15:this.close(Xn.IP_BANNED);break;case 16:this.close(Xn.CHANNEL_BANNED)}if(tt._type===Un.ON_USER_LICENSE_BANNED)switch(tt._message.error_code){case Dn.ERR_LICENSE_MISSING:this.close(Xn.LICENSE_MISSING);break;case Dn.ERR_LICENSE_EXPIRED:this.close(Xn.LICENSE_EXPIRED);break;case Dn.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Xn.LICENSE_MINUTES_EXCEEDED);break;case Dn.ERR_LICENSE_PERIOD_INVALID:this.close(Xn.LICENSE_PERIOD_INVALID);break;case Dn.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Xn.LICENSE_MULTIPLE_SDK_SERVICE);break;case Dn.ERR_LICENSE_ILLEGAL:this.close(Xn.LICENSE_ILLEGAL);break;default:this.close()}}}),this.clientId=s.clientId,this.spec=s,this.store=$,this.websocket=new G1("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Ft("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Ft("JOIN_GATEWAY_USE_443PORT_ONLY"),$),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Kn.CONNECTED&&this.reconnect("retry",Do.OFFLINE)}),this.p2pToken=Ir(6,""),this._external_signal=new Jp(this,this.p2pToken)}async request(s,$,_e,tt){let rt=Ir(6,""),it={_id:rt,_type:s,_message:$},at=this.websocket.connectionID,ct=()=>new Jt((At,Ct)=>{if(this.connectionState===Kn.CONNECTED)return At();let It=()=>{this.off(En.WS_CLOSED,kt),At()},kt=()=>{this.off(En.WS_CONNECTED,It),Ct(new rn(Nt.WS_ABORT))};this.once(En.WS_CONNECTED,It),this.once(En.WS_CLOSED,kt)});if(this.connectionState!==Kn.CONNECTING&&this.connectionState!==Kn.RECONNECTING||s===Pn.JOIN||s===Pn.REJOIN||await ct(),this.websocket.sendMessage(it,!0),tt)return;let dt=new Jt((At,Ct)=>{let It=!1,kt=(Bt,en)=>{It=!0,At({isSuccess:Bt==="success",message:en||{}}),this.off(En.WS_CLOSED,Vt),this.off(En.WS_RECONNECTING,Vt),this.emit(En.REQUEST_SUCCESS,s,$)};this.once("res-@".concat(rt),kt);let Vt=()=>{Ct(new rn(Nt.WS_ABORT,"type: ".concat(s))),this.off(En.WS_CLOSED,Vt),this.off(En.WS_RECONNECTING,Vt),this.off("res-@".concat(rt),kt)};this.once(En.WS_CLOSED,Vt),this.once(En.WS_RECONNECTING,Vt),xo(Ft("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==at||It||(Et.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(s)),this.emit(En.REQUEST_TIMEOUT,s,$))})}),ut=null;try{ut=await dt}catch(At){if(this.connectionState===Kn.CLOSED||s===Pn.LEAVE)throw new rn(Nt.WS_ABORT);return!this.spec.forceWaitGatewayResponse||_e?At.throw():s===Pn.JOIN||s===Pn.REJOIN?null:(await ct(),await this.request(s,$))}if(ut.isSuccess)return ut.message;let pt=Number(ut.message.error_code||ut.message.code),mt=Xp(pt),yt=new rn(Nt.UNEXPECTED_RESPONSE,"".concat(mt.desc,": ").concat(ut.message.error_str),{code:pt,data:ut.message});return mt.action==="success"?ut.message:(Et.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(s,", error_code: ").concat(pt,", message: ").concat(mt.desc,", action: ").concat(mt.action)),pt===Dn.ERR_TOO_MANY_BROADCASTERS?((s===Pn.JOIN||s===Pn.REJOIN)&&(this.initError=yt,this.close()),yt.throw()):mt.action==="failed"?yt.throw():mt.action==="quit"?(this.initError=yt,this.close(),yt.throw()):(pt===Dn.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=ut.message.option,Et.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Do.MULTI_IP)):this.reconnect(mt.action,Do.SERVER_ERROR),s===Pn.JOIN||s===Pn.REJOIN?null:await this.request(s,$)))}waitMessage(s,$){return new Jt(_e=>{let tt=rt=>{(!$||$(rt))&&(this.off(s,tt),_e(rt))};this.on(s,tt)})}uploadWRTCStats(s){if(!this.store.sessionId)return void Et.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));let $={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:s};this.upload(Lu.WRTC_STATS,$)}upload(s,$){let _e={_type:s,_message:$};try{this.websocket.sendMessage(_e)}catch{let tt=Ft("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(_e),this.uploadCache.length>tt&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{if(this.connectionState!==Kn.CONNECTED)return;let rt=this.uploadCache.splice(0,1)[0];this.uploadCache.length===0&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(rt._type,rt._message)},Ft("UPLOAD_CACHE_INTERVAL")||2e3))}}send(s,$){let _e={_type:s,_message:$};this.websocket.sendMessage(_e)}async sendExtensionMessage(s,$,_e){return await this._external_signal.send(s,$,_e)}init(s){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Jt(($,_e)=>{this.once(En.WS_CONNECTED,()=>$(this.joinResponse)),this.once(En.WS_CLOSED,()=>_e(this.initError||new rn(Nt.WS_ABORT))),this.connectionState=Kn.CONNECTING,this.websocket.init(s).catch(_e)})}close(s){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=s||Xn.LEAVE,this.connectionState=Kn.CLOSED,Et.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),s===Xn.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new G1("gateway-".concat(this.clientId),this.spec.retryConfig,!0,Ft("JOIN_GATEWAY_USE_DUAL_DOMAIN"),Ft("JOIN_GATEWAY_USE_443PORT_ONLY"),this.store),this.handleWebsocketEvents()),this.p2pToken=Ir(6,""),this._external_signal.clear(),this._external_signal=new Jp(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(En.ABORT_P2P_EXECUTION);let s=await lo(this,En.REQUEST_JOIN_INFO),$=await this.request(Pn.JOIN,s);if(!$)return this.emit(En.REPORT_JOIN_GATEWAY,Nt.TIMEOUT,this.url||""),!1;this.joinResponse=$,this.emit(En.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Kn.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(s,$){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(s,$)}handleDataStream(s){try{var $;let _e=C_(s.payload),tt=new TextDecoder().decode(_e),rt=JSON.parse(tt);"total"in rt&&"id"in rt||vn($=Object.values(Kr)).call($,rt._type)?(rt._uid=s.uid,this._external_signal.onMessage(rt)):this.emit(Un.ON_DATA_STREAM,s)}catch{this.emit(Un.ON_DATA_STREAM,s)}}handleNotification(s){Et.debug("[".concat(this.clientId,"] receive notification: "),s);let $=Xp(s.code);if($.action!=="success"){if($.action!=="failed")return $.action==="quit"?($.desc==="ERR_REPEAT_JOIN_CHANNEL"&&this.close(Xn.UID_BANNED),void this.close()):void this.reconnect($.action,Do.SERVER_ERROR);Et.error("[".concat(this.clientId,"] ignore error: "),$.desc)}}handlePingPong(){if(!this.websocket||this.websocket.state!=="connected")return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;let s=Ft("PING_PONG_TIME_OUT"),$=Date.now();this.pingpongTimeoutCount>=s&&(Et.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat($-this.lastMsgTime,"ms")),$-this.lastMsgTime>Ft("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Do.TIMEOUT):this.request(Pn.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;let _e=Date.now()-$;this.rttRolling.add(_e),Ft("REPORT_STATS")&&this.send(Pn.PING_BACK,{pingpongElapse:_e})}).catch(_e=>{})}handleWebsocketEvents(){this.websocket.on($n.RECONNECT_WAITTING_FINISH,s=>{this.emit(En.WS_RECONNECT_WAITTING_FINISH,s)}),this.websocket.on($n.RECONNECT_CREATE_CONNECTION,s=>{this.emit(En.WS_RECONNECT_CREATE_CONNECTION,s)}),this.websocket.on($n.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on($n.CLOSED,()=>{this.connectionState=Kn.CLOSED}),this.websocket.on($n.FAILED,()=>{this._disconnectedReason=Xn.NETWORK_ERROR,this.connectionState=Kn.CLOSED}),this.websocket.on($n.RECONNECTING,s=>{this._websocketReconnectReason=s,this.joinResponse=void 0,this.connectionState===Kn.CONNECTED?this.connectionState=Kn.RECONNECTING:this.connectionState=Kn.CONNECTING}),this.websocket.on($n.WILL_RECONNECT,(s,$,_e)=>{s!=="retry"?(Et.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(s)),this.reconnectToken=void 0,this.emit(En.NEED_RENEW_SESSION)):Et.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),_e(s)}),this.websocket.on($n.CONNECTED,()=>{this.openConnectionTime=Date.now(),this.join().catch(s=>{if(this.emit(En.REPORT_JOIN_GATEWAY,s.message||s.code,this.url||""),s instanceof rn&&s.code===Nt.UNEXPECTED_RESPONSE&&s.data.code===Dn.ERR_NO_AUTHORIZED)return Et.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Do.SERVER_ERROR);Et.error("[".concat(this.clientId,"] join gateway request failed"),s.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Do.SERVER_ERROR):(this.initError=s,this.close())})}),this.websocket.on($n.REQUEST_NEW_URLS,(s,$)=>{lo(this,En.REQUEST_RECOVER,this.multiIpOption).then(s).catch($)}),this.websocket.on($n.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{this.emit(Un.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})}}function zN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Wl(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?zN(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):zN(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}let iT=new Map;class jM extends Fr{get state(){return this._state}set state(s){if(s===this._state)return;let $=this._state;this._state=s,s==="DISCONNECTED"&&this._disconnectedReason?this.emit(zr.CONNECTION_STATE_CHANGE,s,$,this._disconnectedReason):this.emit(zr.CONNECTION_STATE_CHANGE,s,$)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(s){Et.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(s)),this._joinGatewayStartTime=s}constructor(s,$){super(),gt(this,"store",void 0),gt(this,"joinInfo",void 0),gt(this,"key",void 0),gt(this,"ntpOffset",0),gt(this,"signal",void 0),gt(this,"role",void 0),gt(this,"inChannelInfo",{joinAt:null,duration:0}),gt(this,"spec",void 0),gt(this,"_state","DISCONNECTED"),gt(this,"_statsCollector",void 0),gt(this,"_disconnectedReason",void 0),gt(this,"isSignalRecover",!1),gt(this,"hasChangeBGPAddress",!1),gt(this,"trafficStatsInterval",void 0),gt(this,"networkQualityInterval",void 0),gt(this,"_joinGatewayStartTime",0),gt(this,"_signalTimeout",!1),gt(this,"_clientRoleOptions",void 0),gt(this,"_isProactiveJoin",!1),this.store=s,this.spec=$,this.signal=this.store.useP2P?new HN(Wl(Wl({},$),{},{retryConfig:$.websocketRetryConfig}),s):this.store.useDataChannel?new ku(Wl(Wl({},$),{},{retryConfig:$.websocketRetryConfig}),s):new kN(Wl(Wl({},$),{},{retryConfig:$.websocketRetryConfig}),s),this._statsCollector=$.statsCollector,this.role=$.role||"audience",this._clientRoleOptions=$.clientRoleOptions,this.handleSignalEvents()}async join(s,$,_e){if(this.signal instanceof ku){let ct=!1;s.cloudProxyServer!=="disabled"?(Et.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(s.cloudProxyServer,")")),ct=!0):"".concat(s.apResponse.cid,"_").concat(s.apResponse.cert).length>255||"".concat(s.apResponse.cid,"_").concat(s.apResponse.cert).length<22?(Et.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),ct=!0):s.apResponse.addresses.some(dt=>dt.fingerprint)||Ft("FINGERPRINT")||(Et.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),ct=!0),ct&&this.resetSignal()}this.store.joinGatewayStart(),s.cloudProxyServer!=="disabled"&&(this.hasChangeBGPAddress=!0);let tt=Date.now(),rt=iT.get(s.cname);if(rt||(rt=new Map,iT.set(s.cname,rt)),this._isProactiveJoin=!0,rt.has(s.uid)){let ct=new Wt(Nt.UID_CONFLICT);throw An.joinGateway(s.sid,{lts:tt,succ:!1,ec:ct.message,addr:null,uid:s.uid,cid:s.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!s.proxyServer,signalChannel:this.signal instanceof ku?"1":"0"}),this._isProactiveJoin=!1,ct}rt.set(s.uid,!0),this.joinInfo=s,this.key=$;let it=0;this.joinGatewayStartTime=tt;let at=s.proxyServer;try{let ct;if(Et.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof ku?"datachannel":"websocket"," join uid ").concat(it)),this.signal instanceof ku)ct=await this.signal.init(s.apResponse.addresses,_e);else{let dt=s.gatewayAddrs.map(ut=>{let{address:pt}=ut,[mt,yt]=pt.split(":"),At={host:mt,port:yt};return s.proxyServer&&(At.proxy=s.proxyServer),At});ct=await this.signal.init(dt,_e)}it=ct.uid,Et.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof ku?"datachannel":"websocket"," join uid ").concat(it," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(ct){throw ct&&ct.code===Nt.INIT_WEBSOCKET_TIMEOUT?(Et.warning("[".concat(this.store.clientId,"] User join failed"),ct.toString()),ct):ct&&ct.code===Nt.INIT_DATACHANNEL_TIMEOUT?(Et.warning("[".concat(this.store.clientId,"] User join datachannel failed"),ct.toString()),this.resetSignal(),ct):(Et.error("[".concat(this.store.clientId,"] User join failed"),ct.toString()),An.joinGateway(s.sid,{lts:tt,succ:!1,ec:ct.message,addr:this.signal.url,uid:s.uid,cid:s.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!at,signalChannel:this.signal instanceof ku?"1":"0"}),this._isProactiveJoin=!1,rt.delete(s.uid),this.signal.close(),ct)}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),Et.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(ct=>{Et.warning("[".concat(this.store.clientId,"] get traffic stats error"),ct.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&navigator.onLine!==void 0&&!navigator.onLine?this.emit(zr.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(zr.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):this.state==="CONNECTED"&&this._statsCollector.trafficStats?this.emit(zr.NETWORK_QUALITY,{uplinkNetworkQuality:BN(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:BN(this._statsCollector.trafficStats.B_dnq)}):this.emit(zr.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),it}async leave(){let s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],$=arguments.length>1?arguments[1]:void 0;if(this.state!=="DISCONNECTED"){$!==Xn.FALLBACK&&(this.state="DISCONNECTING");try{s||this.signal.connectionState!==Kn.CONNECTED||await function(_e,tt){return tt===1/0?_e:Jt.race([_e,h$(tt)])}(this.signal.request(Pn.LEAVE,void 0,!0),3e3)}catch(_e){Et.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),_e)}this.signal.close($),$!==Xn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}}async publish(s,$,_e){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let tt={state:"offer",p2p_id:this.store.p2pId,ortc:$,mode:this.spec.mode,extend:Ft("PUB_EXTEND"),twcc:!!Ft("PUBLISH_TWCC"),rtx:!!Ft("USE_PUB_RTX")};try{return(await this.signal.request(Pn.PUBLISH,tt,!0))._message}catch(rt){if(_e&&rt.data&&rt.data.code===Dn.ERR_PUBLISH_REQUEST_INVALID)return Et.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),rt.toString()),await this.tryUnpubBeforeRepub(s,$),this.publish(s,$,!1);throw rt}}async publishDataChannel(s,$,_e){var tt;if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));let rt={stream_id:$.streamId,ordered:$.ordered?1:0,max_retrans_times:(tt=$.maxRetransmits)!==null&&tt!==void 0?tt:10,channel_id:$.channelId,metadata:$.metadata};try{await this.signal.request(Pn.PUBLISH_DATASTREAM,rt,!0)}catch(it){if(_e&&it.data&&it.data.code===Dn.ERR_PUBLISH_REQUEST_INVALID)return Et.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),it.toString()),await this.tryUnpubDataChannelBeforeRepub(s,$),this.publishDataChannel(s,$,!1);throw it}}async unpublish(s,$){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Pn.UNPUBLISH,{stream_id:$,ortc:s},!0)}catch(_e){Et.warning("[".concat(this.store.clientId,"] unpublish warning: "),_e)}}async unpublishDataChannel(s){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await Jt.all(s.map($=>this.signal.request(Pn.UNPUBLISH_DATASTREAM,{channel_id:$},!0)))}catch($){Et.warning("unpublish datachannels warning: ",$)}}async presubscribe(s,$,_e){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));let tt={stream_id:s,stream_type:$,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Ft("SUBSCRIBE_TWCC"),rtx:!!Ft("USE_SUB_RTX")||void 0,extend:Ft("SUB_EXTEND"),svc:Array.isArray(Ft("SVC"))&&Ft("SVC").length!==0?Ft("SVC"):void 0};try{return await this.signal.request(Pn.PRE_SUBSCRIBE,tt,!0)}catch(rt){if(_e&&rt.data&&rt.data.code===Dn.ERR_SUBSCRIBE_REQUEST_INVALID)return Et.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),rt.toString()),this.presubscribe(s,$,!1);throw rt}}async subscribe(s,$,_e){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));let tt={stream_id:s,stream_type:$.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!Ft("SUBSCRIBE_TWCC"),rtx:!!Ft("USE_SUB_RTX"),extend:Ft("SUB_EXTEND"),ssrcId:$.ssrcId,svc:Array.isArray(Ft("SVC"))&&Ft("SVC").length!==0?Ft("SVC"):void 0};try{return(await this.signal.request(Pn.SUBSCRIBE,tt,!0))._message}catch(rt){if(_e&&rt.data&&rt.data.code===Dn.ERR_SUBSCRIBE_REQUEST_INVALID)return Et.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),rt.toString()),await this.tryUnsubBeforeResub(s,$),await this.subscribe(s,$,!1);throw rt}}async subscribeDataChannel(s,$,_e){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));let tt={uid:s,stream_id:$.id,channel_id:$.datachannelId};try{return void await this.signal.request(Pn.SUBSCRIBE_DATASTREAM,tt,!0)}catch(rt){if(_e&&rt.data&&rt.data.code===Dn.ERR_SUBSCRIBE_REQUEST_INVALID)return Et.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),rt.toString()),await this.tryUnsubDataChannelBeforeResub(s,$),await this.subscribeDataChannel(s,$,!1);throw rt}}async subscribeAll(s,$){if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));let _e={p2p_id:this.store.p2pId,users:s,dtx:!1,rtx:!!Ft("USE_SUB_RTX")};try{return await this.signal.request(Pn.SUBSCRIBE_STREAMS,_e,!0)}catch(tt){if($&&tt.data&&tt.data.code===Dn.ERR_SUBSCRIBE_REQUEST_INVALID)return Et.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),tt.toString()),await this.tryMassUnsubBeforeResub(s),await this.subscribeAll(s,!1);throw tt}}async setVideoProfile(s){let $=function(_e){if(!(_e.bitrateMax&&_e.bitrateMin&&_e.frameRate&&_e.height&&_e.width))return;let tt=_e.frameRate,rt=_e.width,it=_e.height,at=!0;return typeof tt!="number"&&(tt=tt.exact||tt.ideal||tt.max||tt.min||0,tt||(at=!1)),typeof rt!="number"&&(rt=rt.exact||rt.ideal||rt.max||rt.min||0,rt||(at=!1)),typeof it!="number"&&(it=it.exact||it.ideal||it.max||it.min||0,tt||(at=!1)),at?{stream_type:0,width:rt,height:it,fps:tt,start_bps:1e3*_e.bitrateMax,min_bps:1e3*_e.bitrateMin,target_bps:1e3*_e.bitrateMax}:void 0}(s);if($)return this.signal.request(Pn.SET_VIDEO_PROFILE,$);Et.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(s,$){try{await this.signal.request(Pn.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:s,stream_id:$},!0)}catch(_e){Et.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),_e)}}async unsubscribeDataChannel(s,$){try{if(this.state!=="CONNECTED"&&this.state!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await Jt.all(s.map(_e=>this.signal.request(Pn.UNSUBSCRIBE_DATASTREAM,{stream_id:_e,uid:$},!0)))}catch(_e){Et.warning("unsubscribeDataChannel warning: ",_e)}}async massUnsubscribe(s){try{await this.signal.request(Pn.UNSUBSCRIBE_STREAMS,s,!0)}catch($){Et.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),$)}}async reconnectPC(s){let{iceParameters:$,dtlsParameters:_e,rtpCapabilities:tt}=s;return{gatewayEstablishParams:await this.signal.request(Pn.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:$,dtlsParameters:_e,rtpCapabilities:tt}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(Pn.GATEWAY_INFO)}async renewToken(s){await this.signal.request(Pn.RENEW_TOKEN,s),this.key=s.token}async setClientRole(s,$){if($&&(this._clientRoleOptions=Object.assign({},$)),this.state!=="CONNECTED")return void(this.role=s);let _e,tt=0;s==="audience"?this._clientRoleOptions&&this._clientRoleOptions.delay?(_e=this._clientRoleOptions.delay,tt=1):tt=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:tt=0,await this.signal.request(Pn.SET_CLIENT_ROLE,{role:s,level:tt,delay:_e,client_ts:Date.now()}),this.role=s}async setRemoteVideoStreamType(s,$){await this.signal.request(Pn.SWITCH_VIDEO_STREAM,{stream_id:s,stream_type:$})}async setDefaultRemoteVideoStreamType(s){await this.signal.request(Pn.DEFAULT_VIDEO_STREAM,{stream_type:s})}async setStreamFallbackOption(s,$){await this.signal.request(Pn.SET_FALLBACK_OPTION,{stream_id:s,fallback_type:$})}async pickSVCLayer(s,$){await this.signal.request(Pn.PICK_SVC_LAYER,{stream_id:s,spatial_layer:$.spatialLayer,temporal_layer:$.temporalLayer})}async setRTM2Flag(s){await this.signal.request(Pn.SET_RTM2_FLAG,{rtm2_flag:s})}async sendExtensionMessage(s,$,_e){if(this.signal instanceof HN)return this.signal.sendExtensionMessage(s,$,_e)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),Wl({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Pn.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){let s=iT.get(this.joinInfo.cname);s&&s.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;let s=function($){let _e;return _e=$.startsWith("dc")?$.match(/(dc\:\/\/)?([^:]+):(\d+)/):$.match(/(wss\:\/\/)?([^:]+):(\d+)/),_e?{username:gs.username,password:gs.password,turnServerURL:_e[2],tcpport:parseInt(_e[3])+30,udpport:parseInt(_e[3])+30,forceturn:!1}:null}((this.joinInfo.cloudProxyServer==="disabled"?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],s&&this.joinInfo.turnServer.mode!=="off"&&this.joinInfo.cloudProxyServer==="disabled"&&this.joinInfo.turnServer.serversFromGateway.push(Wl(Wl({},gs),{},{turnServerURL:s.turnServerURL,tcpport:s.tcpport,udpport:s.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if(this.state!=="CONNECTED")return;let s=await this.signal.request(Pn.TRAFFIC_STATS,void 0,!0);s.timestamp=Date.now(),s.ntp_offset!=null&&(this.ntpOffset=s.ntp_offset),s.peer_delay.forEach($=>{let _e=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find(tt=>tt.peer_uid===$.peer_uid);_e&&_e.B_st!==$.B_st&&v_(()=>{this.emit(zr.STREAM_TYPE_CHANGE,$.peer_uid,$.B_st)})}),this._statsCollector.updateTrafficStats(s)}getJoinMessage(s){if(!this.joinInfo||!this.key)throw new Wt(Nt.UNEXPECTED_ERROR,"can not generate join message, no join info");let $=Object.assign({},this.joinInfo.apResponse),_e=Ft("REPORT_APP_SCENARIO");if(typeof _e!="string")try{_e=JSON.stringify(_e)}catch{_e=void 0}_e&&_e.length>128&&(_e=void 0);let tt=Wl({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Sl,browser:navigator.userAgent,process_id:Ft("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:$,extend:Ft("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:this.joinInfo.cloudProxyServer==="proxy3"?"1":this.joinInfo.cloudProxyServer==="proxy5"?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:_e,attributes:{userAttributes:{enablePublishedUserList:Ft("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:Ft("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:typeof Ft("SUBSCRIBE_AUDIO_FILTER_TOPN")=="number"?Ft("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:typeof Ft("ENABLE_PUBLISH_AUDIO_FILTER")=="boolean"?Ft("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:typeof Ft("ENABLE_USER_LICENSE_CHECK")=="boolean"?Ft("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:Ft("USE_PUB_RTX")===!0||Ft("USE_SUB_RTX")===!0||void 0,disableFEC:Ft("DISABLE_FEC"),enableNTPReport:!!Ft("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!Ft("ENABLE_INSTANT_VIDEO")||void 0,enableDataStream2:typeof Ft("ENABLE_DATASTREAM_2")=="boolean"?Ft("ENABLE_DATASTREAM_2"):void 0,rtm2Flag:typeof this.joinInfo.rtmFlag=="number"?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!Ft("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:typeof Ft("USE_XR")=="boolean"?Ft("USE_XR"):void 0}},join_ts:this.joinGatewayStartTime},s);return this.joinInfo.stringUid&&(tt.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(tt.aes_mode=this.joinInfo.aesmode,Ft("ENCRYPT_AES")?(tt.aes_secret=this.joinInfo.aespassword,tt.aes_encrypt=!0):tt.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(tt.aes_salt=this.joinInfo.aessalt)),$.addresses[this.signal.websocket.currentURLIndex]&&(tt.ap_response.ticket=$.addresses[this.signal.websocket.currentURLIndex].ticket,delete $.addresses),this.joinInfo.defaultVideoStream!==void 0&&(tt.default_video_stream=this.joinInfo.defaultVideoStream),tt}getRejoinMessage(){if(!this.joinInfo)throw new Wt(Nt.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(En.WS_RECONNECT_WAITTING_FINISH,s=>{var $;vn($=["tryNext","recover"]).call($,s)&&this.joinInfo&&An.adjustSessionStartTime(this.joinInfo.sid)}),this.signal.on(En.WS_RECONNECT_CREATE_CONNECTION,s=>{this.joinGatewayStartTime=Date.now()}),this.signal.on(En.WS_RECONNECTING,s=>{this.joinInfo&&An.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:s||Do.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",An.sessionInit(this.joinInfo.sid,{lts:new Date().getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:this.spec.mode==="live"?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:this.role==="audience"?2:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())}),this.signal.on(En.WS_CLOSED,s=>{let $;switch(s){case Xn.LEAVE:$=Do.LEAVE;break;case Xn.UID_BANNED:case Xn.IP_BANNED:case Xn.CHANNEL_BANNED:case Xn.SERVER_ERROR:$=Do.SERVER_ERROR;break;case Xn.FALLBACK:$=Do.FALLBACK;break;case Xn.LICENSE_MISSING:case Xn.LICENSE_EXPIRED:case Xn.LICENSE_MINUTES_EXCEEDED:case Xn.LICENSE_PERIOD_INVALID:case Xn.LICENSE_MULTIPLE_SDK_SERVICE:case Xn.LICENSE_ILLEGAL:case Xn.TOKEN_EXPIRE:$=s;break;default:$=Do.NETWORK_ERROR}Et.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat($||"undefined -> "+Do.NETWORK_ERROR)),this.joinInfo&&An.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:s===Xn.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:$}),this._disconnectedReason=s,s!==Xn.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}),this.signal.on(En.WS_CONNECTED,()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&(this.role==="audience"&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(Et.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),An.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof ku?"1":"0"}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&this.joinInfo.setLocalAPVersion===1)){let s=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!s)return void Et.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(s));Tr("EVENT_REPORT_DOMAIN",s[1]),Tr("EVENT_REPORT_BACKUP_DOMAIN",s[1]),Tr("LOG_UPLOAD_SERVER","".concat(s[1],":6444"))}}),this.signal.on(Un.ON_UPLINK_STATS,s=>{this._statsCollector.updateUplinkStats(s)}),this.signal.on(En.REQUEST_RECOVER,(s,$,_e)=>{if(!this.joinInfo)return _e(new Wt(Nt.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));s&&(this.joinInfo.multiIP=s,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,lo(this,zr.REQUEST_NEW_GATEWAY_LIST).then($).catch(_e)}),this.signal.on(En.REQUEST_JOIN_INFO,async s=>{var $;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void s(this.getJoinMessage({ortc:{}}));let{iceParameters:_e,dtlsParameters:tt,rtpCapabilities:rt}=await lo(this,zr.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:($=this.joinInfo)===null||$===void 0?void 0:$.turnServer});s(this.getJoinMessage({ortc:{iceParameters:_e,dtlsParameters:tt,rtpCapabilities:rt,version:"2"}}))}),this.signal.on(En.REQUEST_REJOIN_INFO,s=>{s(this.getRejoinMessage())}),this.signal.on(En.REPORT_JOIN_GATEWAY,(s,$)=>{this.joinInfo&&(An.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:s,addr:$,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:this.signal instanceof ku?"1":"0"}),this._isProactiveJoin=!1)}),this.signal.on(En.IS_P2P_DISCONNECTED,s=>{s(Gp(this,zr.IS_P2P_DISCONNECTED))}),this.signal.on(En.DISCONNECT_P2P,()=>{this.emit(zr.DISCONNECT_P2P)}),this.signal.on(En.NEED_RENEW_SESSION,()=>{this.emit(zr.NEED_RENEW_SESSION)}),this.signal.on(En.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(En.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(En.JOIN_RESPONSE,s=>{let $=this.getCurrentGatewayAddress();this.emit(zr.JOIN_RESPONSE,s,$)}),this.signal.on(En.DATACHANNEL_PRECONNECT,async(s,$,_e)=>{this.updateTurnConfigFromSignal();let tt=this.getCurrentGatewayAddress();return lo(this,zr.DATACHANNEL_PRECONNECT,s,tt).then($).catch(_e)}),this.signal.on(En.DATACHANNEL_CONNECTING,async s=>{let{iceParameters:$,dtlsParameters:_e,rtpCapabilities:tt}=await lo(this,zr.REQUEST_DC_CONNECTION_PARAMS);s(this.getJoinMessage({ortc:{iceParameters:$,dtlsParameters:_e,rtpCapabilities:tt,version:"2"}}))}),this.signal.on(En.DATACHANNEL_FAILBACK,()=>{Et.warning("[".concat(this.store.clientId,"] User join datachannel failed")),this.reset(),this.resetSignal(),this.emit(zr.DATACHANNEL_FAILBACK)})}async tryUnsubBeforeResub(s,$){try{await this.signal.request(Pn.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:s,ortc:[$]},!0)}catch(_e){throw Et.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),_e),_e}}async tryUnsubDataChannelBeforeResub(s,$){try{await this.signal.request(Pn.UNSUBSCRIBE,{stream_id:$.id},!0)}catch(_e){throw Et.warning("unsubscribe datachannel warning",_e),_e}}async tryUnpubBeforeRepub(s,$){try{await this.signal.request(Pn.UNPUBLISH,{stream_id:s,ortc:$},!0)}catch(_e){throw Et.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),_e),_e}}async tryUnpubDataChannelBeforeRepub(s,$){try{await this.signal.request(Pn.UNPUBLISH_DATASTREAM,{channnel_id:$.channelId},!0)}catch(_e){throw Et.warning("unpublish datastream warning: ",_e),_e}}async tryMassUnsubBeforeResub(s){let $={users:s.map(_e=>({stream_id:_e.stream_id,stream_type:_e.stream_type}))};try{await this.signal.request(Pn.UNSUBSCRIBE_STREAMS,$,!0)}catch(_e){throw Et.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),_e),_e}}async muteLocal(s,$){let _e={action:s.find(tt=>tt.stream_type===cr.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:s,stream_id:$};try{await this.signal.request(Pn.CONTROL,_e,!0,!0)}catch(tt){throw Et.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),tt),tt}}async unmuteLocal(s,$){let _e={action:s.find(tt=>tt.stream_type===cr.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:s,stream_id:$};try{await this.signal.request(Pn.CONTROL,_e,!0,!0)}catch(tt){throw Et.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),tt),tt}}async muteRemote(s,$){let _e={action:s===Cn.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:$};try{await this.signal.request(Pn.CONTROL,_e,!0,!0)}catch(tt){throw Et.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),tt),tt}}async unmuteRemote(s,$){let _e={action:s===Cn.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:$};try{await this.signal.request(Pn.CONTROL,_e,!0,!0)}catch(tt){throw Et.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),tt),tt}}uploadWRTCStats(s){this.signal.uploadWRTCStats(s)}upload(s,$){this.signal.upload(s,$)}getSignalRTT(){return this.signal.rtt}async restartICE(s){let $={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:s};try{return await this.signal.request(Pn.RESTART_ICE,$,!0)}catch(_e){throw Et.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),_e),_e}}reconnect(){this.state==="CONNECTED"&&this.signal.reconnect(void 0,Do.P2P_FAILED)}getCurrentGatewayAddress(){var s;if(!Ft("GATEWAY_WSS_ADDRESS"))return(s=this.joinInfo)!==null&&s!==void 0&&s.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(s){await this.signal.request(Pn.SET_PARAMETER,{enablePublishAudioFilter:s})}resetSignal(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Xn.FALLBACK)),this.store.useDataChannel=!1,this.signal=new kN(Wl(Wl({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(zr.RESET_SIGNAL,F_.websocket)}}let z_=0,sT=0;function $u(j,s,$,_e){return new Jt((tt,rt)=>{s.timeout=s.timeout||Ft("HTTP_CONNECT_TIMEOUT"),s.responseType=s.responseType||"json",s.data&&!$?(s.data=JSON.stringify(s.data),z_+=hu(s.data)):$&&(s.data.size?z_+=s.data.size:s.data instanceof FormData?z_+=dA(s.data):z_+=hu(JSON.stringify(s.data))),s.headers=s.headers||{},s.headers["Content-Type"]=s.headers["Content-Type"]||"application/json",s.method="POST",s.url=j,As.request(s).then(it=>{typeof it.data=="string"?sT+=hu(it.data):it.data instanceof ArrayBuffer||it.data instanceof Uint8Array?sT+=it.data.byteLength:sT+=hu(JSON.stringify(it.data)),_e&&tt({data:it.data,headers:it.headers}),tt(it.data)}).catch(it=>{As.isCancel(it)?rt(new Wt(Nt.OPERATION_ABORTED,"cancel token canceled")):it.code==="ECONNABORTED"?rt(new Wt(Nt.NETWORK_TIMEOUT,it.message)):it.response?rt(new Wt(Nt.NETWORK_RESPONSE_ERROR,it.response.status)):rt(new Wt(Nt.NETWORK_ERROR,it.message))})})}(function(){var j;function s(sn){var fn=0;return function(){return fn<sn.length?{done:!1,value:sn[fn++]}:{done:!0}}}var $=typeof Object.defineProperties=="function"?Object.defineProperty:function(sn,fn,Tn){return sn==Array.prototype||sn==Object.prototype||(sn[fn]=Tn.value),sn},_e,tt=function(sn){sn=[typeof globalThis=="object"&&globalThis,sn,typeof window=="object"&&window,typeof self=="object"&&self,typeof nt=="object"&&nt];for(var fn=0;fn<sn.length;++fn){var Tn=sn[fn];if(Tn&&Tn.Math==Math)return Tn}throw Error("Cannot find global object")}(this);function rt(sn,fn){if(fn)e:{var Tn=tt;sn=sn.split(".");for(var Fn=0;Fn<sn.length-1;Fn++){var sr=sn[Fn];if(!(sr in Tn))break e;Tn=Tn[sr]}(fn=fn(Fn=Tn[sn=sn[sn.length-1]]))!=Fn&&fn!=null&&$(Tn,sn,{configurable:!0,writable:!0,value:fn})}}function it(sn){return(sn={next:sn})[Symbol.iterator]=function(){return this},sn}function at(sn){var fn=typeof Symbol<"u"&&Symbol.iterator&&sn[Symbol.iterator];return fn?fn.call(sn):{next:s(sn)}}if(rt("Symbol",function(sn){function fn(sr,mn){this.A=sr,$(this,"description",{configurable:!0,writable:!0,value:mn})}if(sn)return sn;fn.prototype.toString=function(){return this.A};var Tn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Fn=0;return function sr(mn){if(this instanceof sr)throw new TypeError("Symbol is not a constructor");return new fn(Tn+(mn||"")+"_"+Fn++,mn)}}),rt("Symbol.iterator",function(sn){if(sn)return sn;sn=Symbol("Symbol.iterator");for(var fn="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Tn=0;Tn<fn.length;Tn++){var Fn=tt[fn[Tn]];typeof Fn=="function"&&typeof Fn.prototype[sn]!="function"&&$(Fn.prototype,sn,{configurable:!0,writable:!0,value:function(){return it(s(this))}})}return sn}),typeof Object.setPrototypeOf=="function")_e=Object.setPrototypeOf;else{var ct;e:{var dt={};try{dt.__proto__={a:!0},ct=dt.a;break e}catch{}ct=!1}_e=ct?function(sn,fn){if(sn.__proto__=fn,sn.__proto__!==fn)throw new TypeError(sn+" is not extensible");return sn}:null}var ut=_e;function pt(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function mt(sn){if(sn.m)throw new TypeError("Generator is already running");sn.m=!0}function yt(sn,fn){return sn.h=3,{value:fn}}function At(sn){this.g=new pt,this.G=sn}function Ct(sn,fn,Tn,Fn){try{var sr=fn.call(sn.g.j,Tn);if(!(sr instanceof Object))throw new TypeError("Iterator result "+sr+" is not an object");if(!sr.done)return sn.g.m=!1,sr;var mn=sr.value}catch(Tt){return sn.g.j=null,sn.g.s(Tt),It(sn)}return sn.g.j=null,Fn.call(sn.g,mn),It(sn)}function It(sn){for(;sn.g.h;)try{var fn=sn.G(sn.g);if(fn)return sn.g.m=!1,{value:fn.value,done:!1}}catch(Tn){sn.g.v=void 0,sn.g.s(Tn)}if(sn.g.m=!1,sn.g.l){if(fn=sn.g.l,sn.g.l=null,fn.F)throw fn.D;return{value:fn.return,done:!0}}return{value:void 0,done:!0}}function kt(sn){this.next=function(fn){return sn.o(fn)},this.throw=function(fn){return sn.s(fn)},this.return=function(fn){return function(Tn,Fn){mt(Tn.g);var sr=Tn.g.j;return sr?Ct(Tn,"return"in sr?sr.return:function(mn){return{value:mn,done:!0}},Fn,Tn.g.return):(Tn.g.return(Fn),It(Tn))}(sn,fn)},this[Symbol.iterator]=function(){return this}}function Vt(sn,fn){return fn=new kt(new At(fn)),ut&&sn.prototype&&ut(fn,sn.prototype),fn}if(pt.prototype.o=function(sn){this.v=sn},pt.prototype.s=function(sn){this.l={D:sn,F:!0},this.h=this.C||this.u},pt.prototype.return=function(sn){this.l={return:sn},this.h=this.u},At.prototype.o=function(sn){return mt(this.g),this.g.j?Ct(this,this.g.j.next,sn,this.g.o):(this.g.o(sn),It(this))},At.prototype.s=function(sn){return mt(this.g),this.g.j?Ct(this,this.g.j.throw,sn,this.g.o):(this.g.s(sn),It(this))},rt("Array.prototype.entries",function(sn){return sn||function(){return function(fn,Tn){fn instanceof String&&(fn+="");var Fn=0,sr=!1,mn={next:function(){if(!sr&&Fn<fn.length){var Tt=Fn++;return{value:Tn(Tt,fn[Tt]),done:!1}}return sr=!0,{done:!0,value:void 0}}};return mn[Symbol.iterator]=function(){return mn},mn}(this,function(fn,Tn){return[fn,Tn]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var Bt=function(sn,fn){for(var Tn=0;Tn<sn.length;Tn++)fn(sn[Tn])},en=function(sn){return sn.replace(/\r?\n|\r/g,`\r
`)},zt=function(sn,fn,Tn){return fn instanceof Blob?(Tn=Tn!==void 0?Tn+"":typeof fn.name=="string"?fn.name:"blob",fn.name===Tn&&Object.prototype.toString.call(fn)!=="[object Blob]"||(fn=new File([fn],Tn)),[String(sn),fn]):[String(sn),String(fn)]},Yt=function(sn,fn){if(sn.length<fn)throw new TypeError(fn+" argument required, but only "+sn.length+" present.")},Qt=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Xt=Qt.FormData,cn=Qt.XMLHttpRequest&&Qt.XMLHttpRequest.prototype.send,hn=Qt.Request&&Qt.fetch,Mn=Qt.navigator&&Qt.navigator.sendBeacon,Gn=Qt.Element&&Qt.Element.prototype,Or=Qt.Symbol&&Symbol.toStringTag;Or&&(Blob.prototype[Or]||(Blob.prototype[Or]="Blob"),"File"in Qt&&!File.prototype[Or]&&(File.prototype[Or]="File"));try{new File([],"")}catch{Qt.File=function(sn,fn,Tn){return sn=new Blob(sn,Tn||{}),Object.defineProperties(sn,{name:{value:fn},lastModified:{value:+(Tn&&Tn.lastModified!==void 0?new Date(Tn.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),Or&&Object.defineProperty(sn,Or,{value:"File"}),sn}}var Eo=function(sn){return sn.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},$r=function(sn){this.i=[];var fn=this;sn&&Bt(sn.elements,function(Tn){if(Tn.name&&!Tn.disabled&&Tn.type!=="submit"&&Tn.type!=="button"&&!Tn.matches("form fieldset[disabled] *"))if(Tn.type==="file"){var Fn=Tn.files&&Tn.files.length?Tn.files:[new File([],"",{type:"application/octet-stream"})];Bt(Fn,function(sr){fn.append(Tn.name,sr)})}else Tn.type==="select-multiple"||Tn.type==="select-one"?Bt(Tn.options,function(sr){!sr.disabled&&sr.selected&&fn.append(Tn.name,sr.value)}):Tn.type==="checkbox"||Tn.type==="radio"?Tn.checked&&fn.append(Tn.name,Tn.value):(Fn=Tn.type==="textarea"?en(Tn.value):Tn.value,fn.append(Tn.name,Fn))})};if((j=$r.prototype).append=function(sn,fn,Tn){Yt(arguments,2),this.i.push(zt(sn,fn,Tn))},j.delete=function(sn){Yt(arguments,1);var fn=[];sn=String(sn),Bt(this.i,function(Tn){Tn[0]!==sn&&fn.push(Tn)}),this.i=fn},j.entries=function sn(){var fn,Tn=this;return Vt(sn,function(Fn){if(Fn.h==1&&(fn=0),Fn.h!=3)return fn<Tn.i.length?Fn=yt(Fn,Tn.i[fn]):(Fn.h=0,Fn=void 0),Fn;fn++,Fn.h=2})},j.forEach=function(sn,fn){Yt(arguments,1);for(var Tn=at(this),Fn=Tn.next();!Fn.done;Fn=Tn.next()){var sr=at(Fn.value);Fn=sr.next().value,sr=sr.next().value,sn.call(fn,sr,Fn,this)}},j.get=function(sn){Yt(arguments,1);var fn=this.i;sn=String(sn);for(var Tn=0;Tn<fn.length;Tn++)if(fn[Tn][0]===sn)return fn[Tn][1];return null},j.getAll=function(sn){Yt(arguments,1);var fn=[];return sn=String(sn),Bt(this.i,function(Tn){Tn[0]===sn&&fn.push(Tn[1])}),fn},j.has=function(sn){Yt(arguments,1),sn=String(sn);for(var fn=0;fn<this.i.length;fn++)if(this.i[fn][0]===sn)return!0;return!1},j.keys=function sn(){var fn,Tn,Fn,sr,mn=this;return Vt(sn,function(Tt){if(Tt.h==1&&(fn=at(mn),Tn=fn.next()),Tt.h!=3)return Tn.done?void(Tt.h=0):(Fn=Tn.value,sr=at(Fn),yt(Tt,sr.next().value));Tn=fn.next(),Tt.h=2})},j.set=function(sn,fn,Tn){Yt(arguments,2),sn=String(sn);var Fn=[],sr=zt(sn,fn,Tn),mn=!0;Bt(this.i,function(Tt){Tt[0]===sn?mn&&(mn=!Fn.push(sr)):Fn.push(Tt)}),mn&&Fn.push(sr),this.i=Fn},j.values=function sn(){var fn,Tn,Fn,sr,mn=this;return Vt(sn,function(Tt){if(Tt.h==1&&(fn=at(mn),Tn=fn.next()),Tt.h!=3)return Tn.done?void(Tt.h=0):(Fn=Tn.value,(sr=at(Fn)).next(),yt(Tt,sr.next().value));Tn=fn.next(),Tt.h=2})},$r.prototype._asNative=function(){for(var sn=new Xt,fn=at(this),Tn=fn.next();!Tn.done;Tn=fn.next()){var Fn=at(Tn.value);Tn=Fn.next().value,Fn=Fn.next().value,sn.append(Tn,Fn)}return sn},$r.prototype._blob=function(){var sn="----formdata-polyfill-"+Math.random(),fn=[],Tn="--"+sn+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(Fn,sr){return typeof Fn=="string"?fn.push(Tn+Eo(en(sr))+`"\r
\r
`+en(Fn)+`\r
`):fn.push(Tn+Eo(en(sr))+'"; filename="'+Eo(Fn.name)+`"\r
Content-Type: `+(Fn.type||"application/octet-stream")+`\r
\r
`,Fn,`\r
`)}),fn.push("--"+sn+"--"),new Blob(fn,{type:"multipart/form-data; boundary="+sn})},$r.prototype[Symbol.iterator]=function(){return this.entries()},$r.prototype.toString=function(){return"[object FormData]"},Gn&&!Gn.matches&&(Gn.matches=Gn.matchesSelector||Gn.mozMatchesSelector||Gn.msMatchesSelector||Gn.oMatchesSelector||Gn.webkitMatchesSelector||function(sn){for(var fn=(sn=(this.document||this.ownerDocument).querySelectorAll(sn)).length;0<=--fn&&sn.item(fn)!==this;);return-1<fn}),Or&&($r.prototype[Or]="FormData"),cn){var Vs=Qt.XMLHttpRequest.prototype.setRequestHeader;Qt.XMLHttpRequest.prototype.setRequestHeader=function(sn,fn){Vs.call(this,sn,fn),sn.toLowerCase()==="content-type"&&(this.B=!0)},Qt.XMLHttpRequest.prototype.send=function(sn){sn instanceof $r?(sn=sn._blob(),this.B||this.setRequestHeader("Content-Type",sn.type),cn.call(this,sn)):cn.call(this,sn)}}hn&&(Qt.fetch=function(sn,fn){return fn&&fn.body&&fn.body instanceof $r&&(fn.body=fn.body._blob()),hn.call(this,sn,fn)}),Mn&&(Qt.navigator.sendBeacon=function(sn,fn){return fn instanceof $r&&(fn=fn._asNative()),Mn.call(this,sn,fn)}),Qt.FormData=$r}})();let K_=()=>{let j=Ft("AREAS");return j.length===0&&j.push(rr.GLOBAL),zp(j).call(j,(s,$,_e)=>{let tt=KN($);return tt?_e===0?tt:"".concat(s,",").concat(tt):s},"")},KN=j=>j===rr.OVERSEA?"".concat(Vo.ASIA,",").concat(Vo.EUROPE,",").concat(Vo.AFRICA,",").concat(Vo.NORTH_AMERICA,",").concat(Vo.SOUTH_AMERICA,",").concat(Vo.OCEANIA):Vo[j],VM=j=>{let s={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return j.map($=>{let _e=V_[$],tt=Object.keys(_e);tt&&tt.map(rt=>{rt!=="CODE"&&(s[rt]=s[rt].concat(_e[rt]))})}),s},Y_={GLOBAL:{ASIA:[rr.CHINA,rr.JAPAN,rr.INDIA,rr.KOREA,rr.HKMC],EUROPE:[],NORTH_AMERICA:[rr.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},q_=Object.keys(Y_[rr.GLOBAL]),aT=[rr.CHINA,rr.NORTH_AMERICA,rr.EUROPE,rr.ASIA,rr.JAPAN,rr.INDIA,rr.OCEANIA,rr.SOUTH_AMERICA,rr.AFRICA,rr.KOREA,rr.HKMC,rr.US],BM=function(j,s){let $=[];if(vn(j).call(j,rr.GLOBAL)){let rt=[rr.GLOBAL,rr.OVERSEA],it=Object.keys(V_);if(s===rr.GLOBAL)throw new Wt(Nt.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(s===rr.CHINA)$=[rr.OVERSEA];else if(tt=s,vn(q_).call(q_,tt)){let at=(_e=s,Y_[rr.GLOBAL][_e]||[]),ct=[...rt,s,...at];$=it.filter(dt=>!vn(ct).call(ct,dt))}else if(function(at){let ct=!1;return q_.forEach(dt=>{var ut;vn(ut=Y_[rr.GLOBAL][dt]).call(ut,at)&&(ct=!0)}),ct}(s)){let at=function(dt){let ut;return q_.forEach(pt=>{var mt;vn(mt=Y_[rr.GLOBAL][pt]).call(mt,dt)&&(ut=pt)}),ut}(s),ct=[...rt,at,s];$=it.filter(dt=>!vn(ct).call(ct,dt))}else $=j;$=function(at){let ct=[];return aT.forEach(dt=>{vn(at).call(at,dt)&&ct.push(dt)}),ct.concat(at.filter(dt=>!vn(aT).call(aT,dt)))}($)}else $=j;var _e,tt;return $};function YN(j){var s,$;if(!j&&vn(s=Ft("AREAS")).call(s,rr.EXTENSIONS))return Et.debug("update area from ap : reset"),void cT(cM,!0);if(!vn($=Ft("AREAS")).call($,rr.GLOBAL)||!j)return;let _e=V_.EXTENSIONS;_e&&(_e={CODE:KN(rr.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(j,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(j,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(j,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(j,".agora.io"),"cds-ap-web-2-".concat(j,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(j,".agora.io"),"sua-ap-web-2-".concat(j,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(j,".agora.io"),"uap-ap-web-2-".concat(j,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(j,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(j,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(j,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(j,".agora.io")]},Et.debug("update area from ap success: ".concat(j,",config is "),_e),Tr("AREAS",[rr.EXTENSIONS],!0),Object.keys(_e).map(tt=>{tt==="LOG_UPLOAD_SERVER"||tt==="EVENT_REPORT_DOMAIN"||tt==="EVENT_REPORT_BACKUP_DOMAIN"||tt==="PROXY_SERVER_TYPE3"?Tr(tt,_e[tt][0]):Tr(tt,_e[tt])}))}function cT(j){let s=arguments.length>1&&arguments[1]!==void 0&&arguments[1],$=An.reportApiInvoke(null,{name:mo.SET_AREA,options:j,tag:Wr.TRACER});try{let _e=[];if(typeof j=="string"&&(_e=[j]),Array.isArray(j)&&(j.forEach(rt=>{if(!vn(bN).call(bN,rt))throw new Wt(Nt.INVALID_PARAMS,"invalid area code")}),_e=j),Object.prototype.toString.call(j)==="[object Object]"){let{areaCode:rt,excludedArea:it}=j;if(!rt)throw new Wt(Nt.INVALID_PARAMS,"area code is needed");let at=rt;typeof rt=="string"&&(at=[rt]),_e=it?BM(at,it):at}if(!s){if(op.AREAS){let rt=new Wt(Nt.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return $.onError(rt),void Et.warning("setArea is prohibited because of config-distribute")}if(vn(_e).call(_e,rr.GLOBAL)&&Ft("AREAS")===rr.EXTENSIONS){let rt=new Wt(Nt.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return $.onError(rt),void Et.warning("setArea is prohibited because of ap extensions")}}Tr("AREAS",_e,s);let tt=VM(_e);Object.keys(tt).map(rt=>{rt==="LOG_UPLOAD_SERVER"||rt==="EVENT_REPORT_DOMAIN"||rt==="EVENT_REPORT_BACKUP_DOMAIN"||rt==="PROXY_SERVER_TYPE3"?Tr(rt,tt[rt][0]):Tr(rt,tt[rt])}),Et.debug("set area success:",_e.join(","))}catch(_e){throw $.onError(_e),_e}$.onSuccess()}function qN(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function lT(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?qN(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):qN(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}let dT=1;function GM(j,s,$,_e,tt){dT+=1;let rt={sid:$.sid,command:"convergeAllocateEdge",uid:"666",appId:$.appId,ts:Math.floor(Date.now()/1e3),seq:dT,requestId:dT,version:Sl,cname:$.cname},it={service_name:s,json_body:JSON.stringify(rt)},at,ct,dt=j[0];return tu(async()=>{at=Date.now();let ut=await $u(dt,{data:it,cancelToken:_e,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(ct=Date.now()-at,ut.code!==0){let yt=new Wt(Nt.UNEXPECTED_RESPONSE,"live streaming ap error, code"+ut.code,{retry:!0,responseTime:ct});throw Et.error(yt.toString()),yt}let pt=JSON.parse(ut.json_body);if(pt.code!==200){let yt=new Wt(Nt.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(pt.code,", reason: ").concat(pt.reason),{code:pt.code,responseTime:ct});throw Et.error(yt.toString()),yt}if(!pt.servers||pt.servers.length===0){let yt=new Wt(Nt.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:pt.code,responseTime:ct});throw Et.error(yt.toString()),yt}let mt=function(yt,At){return{addressList:yt.servers.map(Ct=>"wss://".concat(Ct.address.replace(/\./g,"-"),".").concat(Ft("WORKER_DOMAIN"),":").concat(Ct.wss,"?serviceName=").concat(encodeURIComponent(At))),workerToken:yt.workerToken,vid:yt.vid}}(pt,s);return Ft("LIVE_STREAMING_ADDRESS")&&(mt.addressList=Ft("LIVE_STREAMING_ADDRESS")instanceof Array?Ft("LIVE_STREAMING_ADDRESS"):[Ft("LIVE_STREAMING_ADDRESS")]),lT(lT({},mt),{},{responseTime:ct})},(ut,pt)=>(An.apworkerEvent($.sid,{success:!0,sc:200,serviceName:s,responseDetail:JSON.stringify(ut.addressList),firstSuccess:pt===0,responseTime:ct,serverIp:j[pt%j.length]}),!1),(ut,pt)=>(An.apworkerEvent($.sid,{success:!1,sc:ut.data&&ut.data.code||200,serviceName:s,responseTime:ct,serverIp:j[pt%j.length]}),!!(ut.code!==Nt.OPERATION_ABORTED&&ut.code!==Nt.UNEXPECTED_RESPONSE||ut.data&&ut.data.retry)&&(dt=j[(pt+1)%j.length],!0)),tt)}let uT=1;function XN(j,s,$,_e){let{url:tt,areaCode:rt}=j,it=Date.now(),at,[ct,dt]=ew(s,rt,[ko.CHOOSE_SERVER]),ut=uo.networkState;return tu(async()=>{ut&&uo.networkState===us.OFFLINE&&uo.onlineWaiter&&await Jt.race([uo.onlineWaiter,xo(_e&&_e.maxRetryTimeout||po.maxRetryTimeout)]),ut=uo.networkState;let{data:pt,headers:mt}=await $u(tt,{data:ct,cancelToken:$,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);at=mt.http3==="1"?1:-1,An.reportResourceTiming(tt,s.sid),QN(pt,tt,s,it,[ko.CHOOSE_SERVER],at);let yt=rT(pt,ko.CHOOSE_SERVER);return ZN(yt),jN(yt,tt)},pt=>(pt&&An.joinChooseServer(s.sid,{lts:it,succ:!0,csAddr:tt,opid:dt,serverList:pt.gatewayAddrs.map(mt=>mt.address),ec:null,cid:pt.cid.toString(),uid:pt.uid.toString(),csIp:pt.csIp,unilbsServerIds:[ko.CHOOSE_SERVER].toString(),isHttp3:at}),!1),pt=>pt.code!==Nt.OPERATION_ABORTED&&(pt.code===Nt.CAN_NOT_GET_GATEWAY_SERVER?pt.data.retry:(An.joinChooseServer(s.sid,{lts:it,succ:!1,csAddr:tt,serverList:null,opid:dt,ec:pt.code,csIp:pt.data&&pt.data.csIp,unilbsServerIds:[ko.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:ut}),isHttp3:at}),Et.warning("[".concat(s.clientId,"] Choose server network error, retry"),pt),!0)),_e)}function JN(j,s,$,_e){let tt,{url:rt,areaCode:it,serviceIds:at}=j,ct=Date.now(),[dt,ut]=ew(s,it,at),pt;return tu(async()=>{pt&&uo.networkState===us.OFFLINE&&uo.onlineWaiter&&await Jt.race([uo.onlineWaiter,xo(_e&&_e.maxRetryTimeout||po.maxRetryTimeout)]),pt=uo.networkState;let{data:mt,headers:yt}=await $u(rt,{data:dt,cancelToken:$,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);tt=yt.http3==="1"?1:-1,An.reportResourceTiming(rt,s.sid),QN(mt,rt,s,ct,at,tt);let At=rT(mt,ko.CHOOSE_SERVER),Ct=rT(mt,s.cloudProxyServer==="proxy5"?ko.CLOUD_PROXY_5:s.cloudProxyServer==="proxy3"||s.cloudProxyServer==="proxy4"?ko.CLOUD_PROXY:ko.CLOUD_PROXY_FALLBACK);return ZN(At),{gatewayInfo:jN(At,rt),proxyInfo:Ct,url:rt}},mt=>(mt.gatewayInfo&&An.joinChooseServer(s.sid,{lts:ct,succ:!0,csAddr:rt,serverList:mt.gatewayInfo.gatewayAddrs.map(yt=>yt.address),ec:null,opid:ut,cid:mt.gatewayInfo.cid.toString(),uid:mt.gatewayInfo.uid.toString(),csIp:mt.gatewayInfo.csIp,unilbsServerIds:at.toString(),isHttp3:tt}),mt.proxyInfo&&An.joinWebProxyAP(s.sid,{lts:ct,sucess:1,apServerAddr:rt,turnServerAddrList:mt.proxyInfo.addresses.map(yt=>yt.ip).join(","),errorCode:null,eventType:s.cloudProxyServer,unilbsServerIds:at.toString()}),!1),mt=>mt.code!==Nt.OPERATION_ABORTED&&(mt.code===Nt.CAN_NOT_GET_GATEWAY_SERVER?mt.data.retry:(An.joinWebProxyAP(s.sid,{lts:ct,sucess:0,apServerAddr:rt,turnServerAddrList:null,errorCode:mt.code,eventType:s.cloudProxyServer,unilbsServerIds:at.toString(),extend:JSON.stringify({networkState:pt})}),Et.warning("[".concat(s.clientId,"] multi unilbs network error, retry"),mt),!0)),_e)}let QN=(j,s,$,_e,tt,rt)=>{let it=[],at=ct=>{ct.flag===4096?An.joinChooseServer($.sid,{lts:_e,succ:!1,csAddr:s,opid:j.opid,serverList:null,ec:ct.error.message,csIp:ct.error.data&&ct.error.data.csIp,unilbsServerIds:tt.toString(),isHttp3:rt}):ct.flag!==1048576&&ct.flag!==4194304&&ct.flag!==4194310||An.joinWebProxyAP($.sid,{lts:_e,sucess:0,apServerAddr:s,turnServerAddrList:null,errorCode:ct.error.code,eventType:$.cloudProxyServer,unilbsServerIds:tt.toString()})};if(j.response_body.forEach(ct=>{let dt=ct.buffer.code;if(ct.uri===23&&dt===0&&!ct.buffer.edges_services)if(ct.buffer.flag===4194310)Et.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),ct.buffer.edges_services=[];else{let ut={error:new Wt(Nt.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:j.detail[502]}),flag:ct.buffer.flag};it.push(ut),at(ut)}if(dt!==0){let ut=W_(dt),pt={error:new Wt(Nt.CAN_NOT_GET_GATEWAY_SERVER,ut.desc,{desc:ut.desc,retry:ut.retry,csIp:j.detail[502]}),flag:ct.buffer.flag};ct.buffer.flag===4194310?Et.warning(pt.error.toString()):it.push(pt),at(pt)}}),it.length)throw Et.warning("[".concat($.clientId,"] multi unilbs ").concat(s," failed, ").concat(it.map(ct=>"flag: ".concat(ct.flag,", message: ").concat(ct.error.message,", retry: ").concat(ct.error.data.retry)).join(" | "))),new Wt(Nt.CAN_NOT_GET_GATEWAY_SERVER,it.map(ct=>"flag: ".concat(ct.flag,", message: ").concat(ct.error.message)).join(" | "),{retry:!!it.find(ct=>ct.error.data.retry),csIp:j.detail[502],desc:[...new Set(it.map(ct=>{var dt;return ct==null||(dt=ct.error)===null||dt===void 0||(dt=dt.data)===null||dt===void 0?void 0:dt.desc}).filter(ct=>!!ct))]})},ZN=j=>{var s,$,_e,tt;if(j.addresses&&j.addresses.length===0&&j.code===0)throw new Wt(Nt.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:j.detail&&j.detail[502]});if(Ft("AP_AREA")&&((_e=j.detail)!==null&&_e!==void 0&&_e[23]&&typeof((tt=j.detail)===null||tt===void 0?void 0:tt[23])=="string"?YN(j.detail[23].toLowerCase()):YN()),(s=j.detail)!==null&&s!==void 0&&s[19]&&typeof(($=j.detail)===null||$===void 0?void 0:$[19])=="string"){let it=j.detail[19],at=it==null?void 0:it.split(";");for(let ct=0;ct<at.length;ct++){var rt;let dt=nT(rt=at[ct]).call(rt);j.addresses[ct]&&at&&(j.addresses[ct].fingerprint=dt)}}if(Ft("GATEWAY_ADDRESS")&&Ft("GATEWAY_ADDRESS").length>0){Et.debug("assign gateway address to",Ft("GATEWAY_ADDRESS"));let it=Ft("GATEWAY_ADDRESS").map(at=>{var ct,dt;let ut=(ct=(dt=j.addresses.find(pt=>pt.ip===at.ip&&pt.port===at.port))===null||dt===void 0?void 0:dt.fingerprint)!==null&&ct!==void 0?ct:"";return{ip:at.ip,port:at.port,ticket:j.addresses[0]&&j.addresses[0].ticket,fingerprint:ut}});j.addresses=it}},WM=(j,s)=>{if(j.response_body&&j.response_body.length){let $=j.response_body[0];if($.buffer.code!==0){let _e=W_($.buffer.code);throw new Wt(Nt.UPDATE_TICKET_FAILED,"[".concat($.buffer.code,"]: ").concat(_e.desc),{retry:_e.retry})}return $.buffer.ticket}throw Et.debug("update ticket request received ap response without response body:",s),new Wt(Nt.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},ew=(j,s,$)=>{let _e=Math.floor(Math.random()*1e12),tt={appid:j.appId,client_ts:Date.now(),opid:_e,sid:j.sid,request_bodies:[{uri:22,buffer:{cname:j.cname,detail:lT({6:j.stringUid,11:s,12:Ft("USE_NEW_TOKEN")?"1":void 0,22:s},j.apRTM?{26:"RTM2"}:{}),key:j.token,service_ids:$,uid:j.uid||0}}]};tt.request_bodies.forEach(it=>{j.multiIP&&j.multiIP.gateway_ip&&(it.buffer.detail[5]=JSON.stringify({vocs_ip:[j.multiIP.uni_lbs_ip],vos_ip:[j.multiIP.gateway_ip]}))});let rt=new FormData;return rt.append("request",JSON.stringify(tt)),[rt,_e]},HM=(j,s)=>{let $=Math.floor(Math.random()*1e12),_e={appid:j.appId,client_ts:Date.now(),opid:$,sid:j.sid,request_bodies:[{uri:28,buffer:{cname:j.cname,detail:{1:"",6:j.stringUid,12:"1"},token:j.token,service_ids:s,uid:j.uid||0,edges_services:j.apResponse.addresses.map(rt=>({ip:rt.ip,port:rt.port}))}}]},tt=new FormData;return tt.append("request",JSON.stringify(_e)),[tt,$]},Vm=0;function Bm(j){return Jt.all(j.map(s=>s.then($=>{throw $},$=>$))).then(s=>{throw s},s=>s)}let H1=async j=>{let{fragementLength:s,referenceList:$,asyncMapHandler:_e,allFailedhandler:tt,promisesCollector:rt}=j,it=0,at=s,ct,dt=0,ut=async()=>{let pt=(()=>{let mt=it*at,yt=mt+at;return $.slice(mt,yt).map(_e)})();rt&&rt.push(...pt);try{ct=await Bm(pt)}catch(mt){if(dt+=at,it++,!(dt>=$.length))return void await ut();tt(mt)}pt.forEach(mt=>mt.cancel())};return await ut(),ct};async function pT(j,s,$,_e){return{gatewayInfo:await async function(tt,rt,it,at){let ct=null,dt=[],ut=async()=>{let mt=Ft("WEBCS_DOMAIN").slice(0,Ft("AJAX_REQUEST_CONCURRENT")).map(Ct=>({url:tt.proxyServer?"https://".concat(tt.proxyServer,"/ap/?url=").concat(Ct+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Ct,"/api/v2/transpond/webrtc?v=2"),areaCode:K_()})),yt=at.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:mt.map(Ct=>Ct.url)}),At=await H1({fragementLength:Ft("FRAGEMENT_LENGTH"),referenceList:mt,asyncMapHandler:Ct=>(Et.debug("[".concat(tt.clientId,"] Connect to choose_server:"),Ct.url),XN(Ct,tt,rt,it)),allFailedhandler:Ct=>{throw at.recordJoinChannelService({endTs:Date.now(),status:"error",errors:Ct},yt),Ct[0]},promisesCollector:dt});return at.recordJoinChannelService({endTs:Date.now(),status:"success"},yt),At},pt=async()=>{if(await xo(1e3),ct!==null)return ct;let mt=Ft("WEBCS_DOMAIN_BACKUP_LIST").map(Ct=>({url:tt.proxyServer?"https://".concat(tt.proxyServer,"/ap/?url=").concat(Ct+"/api/v2/transpond/webrtc?v=2"):"https://".concat(Ct,"/api/v2/transpond/webrtc?v=2"),areaCode:K_()})),yt=at.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:mt.map(Ct=>Ct.url)}),At=await H1({fragementLength:Ft("FRAGEMENT_LENGTH"),referenceList:mt,asyncMapHandler:Ct=>(Et.debug("[".concat(tt.clientId,"] Connect to backup choose_server:"),Ct.url),XN(Ct,tt,rt,it)),allFailedhandler:Ct=>{throw at.recordJoinChannelService({endTs:Date.now(),status:"error",errors:Ct},yt),Ct[0]},promisesCollector:dt});return at.recordJoinChannelService({endTs:Date.now(),status:"success"},yt),At};try{return ct=await Bm([ut(),pt()]),dt.length&&dt.forEach(mt=>mt.cancel&&typeof mt.cancel=="function"&&mt.cancel()),ct}catch(mt){throw mt[0]}}(j,s,$,_e)}}async function tw(j,s,$,_e,tt){let rt=j.cloudProxyServer;if(rt==="disabled"){if(!_e)return;if(j.useLocalAccessPoint)return await pT(j,s,$,tt);if(Ft("JOIN_WITH_FALLBACK_MEDIA_PROXY")){let{gatewayInfo:mt,proxyInfo:yt}=await rw(j,s,$,tt);if(j.turnServer&&j.turnServer.mode!=="auto")return{gatewayInfo:mt};let At=yt.map(Ct=>({turnServerURL:Ct.address,tcpport:Ct.tcpport||gs.tcpport,udpport:Ct.udpport||gs.udpport,username:Ct.username||gs.username,password:Ct.password||gs.password,forceturn:!1,security:!0}));if(tt.useP2P){var it;let Ct=(it=j.uid)!==null&&it!==void 0?it:mt.uid,It="glb:".concat(Ct.toString()),kt=await _S(It),Vt=yt.map(Bt=>({turnServerURL:Bt.address,tcpport:Bt.tcpport||gs.tcpport,udpport:Bt.udpport||gs.udpport,username:It,password:kt,forceturn:!1,security:!0}));At.push(...Vt)}return j.turnServer={mode:"manual",servers:At},{gatewayInfo:mt}}return await pT(j,s,$,tt)}let{proxyInfo:at,gatewayInfo:ct}=await rw(j,s,$,tt),dt={gatewayInfo:ct},ut=at.map(mt=>({turnServerURL:mt.address,tcpport:rt==="proxy3"?void 0:mt.tcpport?mt.tcpport:gs.tcpport,udpport:rt==="proxy4"?void 0:mt.udpport?mt.udpport:gs.udpport,username:mt.username||gs.username,password:mt.password||gs.password,forceturn:rt!=="proxy4",security:rt==="proxy5"}));if(tt.useP2P){var pt;let mt=(pt=j.uid)!==null&&pt!==void 0?pt:ct.uid,yt="glb:".concat(mt.toString()),At=await _S(yt),Ct=at.map(It=>({turnServerURL:It.address,tcpport:rt==="proxy3"?void 0:It.tcpport||gs.tcpport,udpport:rt==="proxy4"?void 0:It.udpport||gs.udpport,username:yt,password:At,forceturn:rt!=="proxy4",security:rt==="proxy5"}));ut.push(...Ct)}return j.turnServer={mode:"manual",servers:ut},Et.debug("[".concat(j.clientId,"] set proxy server: ").concat(j.proxyServer,", mode: ").concat(rt)),dt}async function nw(j,s,$,_e,tt){let rt=Ft("ACCOUNT_REGISTER").slice(0,Ft("AJAX_REQUEST_CONCURRENT")),it=[];it=s.proxyServer?rt.map(ct=>"https://".concat(s.proxyServer,"/ap/?url=").concat(ct+"/api/v1")):rt.map(ct=>"https://".concat(ct,"/api/v1"));let at=tt==null?void 0:tt.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:it});try{let ct=await async function(dt,ut,pt,mt,yt){let At=Date.now(),Ct={sid:pt.sid,opid:10,appid:pt.appId,string_uid:ut},It=dt[0],kt=await tu(()=>$u(It+"".concat(It.indexOf("?")===-1?"?":"&","action=stringuid"),{data:Ct,cancelToken:mt,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(Vt,Bt)=>{if(Vt.code===0){if(Vt.uid<=0||Vt.uid>=Math.pow(2,32))throw Et.error("Invalid Uint Uid ".concat(ut," => ").concat(Vt.uid),Vt),An.reqUserAccount(Ct.sid,{lts:At,success:!1,serverAddr:It,stringUid:Ct.string_uid,uid:Vt.uid,errorCode:Nt.INVALID_UINT_UID_FROM_STRING_UID,extend:Ct}),new Wt(Nt.INVALID_UINT_UID_FROM_STRING_UID);return An.reqUserAccount(Ct.sid,{lts:At,success:!0,serverAddr:It,stringUid:Ct.string_uid,uid:Vt.uid,errorCode:null,extend:Ct}),!1}let en=W_(Vt.code);return en.retry&&(It=dt[(Bt+1)%dt.length]),An.reqUserAccount(Ct.sid,{lts:At,success:!1,serverAddr:It,stringUid:Ct.string_uid,uid:Vt.uid,errorCode:en.desc,extend:Ct}),en.retry},(Vt,Bt)=>Vt.code!==Nt.OPERATION_ABORTED&&(An.reqUserAccount(Ct.sid,{lts:At,success:!1,serverAddr:It,stringUid:Ct.string_uid,uid:null,errorCode:Vt.code,extend:Ct}),It=dt[(Bt+1)%dt.length],!0),yt);if(kt.code!==0){let Vt=W_(kt.code);throw new Wt(Nt.UNEXPECTED_RESPONSE,Vt.desc)}return kt}(it,j,s,$,_e);return tt==null||tt.recordJoinChannelService({status:"success",endTs:Date.now()},at),ct.uid}catch(ct){throw tt==null||tt.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[ct]},at),ct}}async function zM(j,s,$){let _e=Ft("CDS_AP").slice(0,Ft("AJAX_REQUEST_CONCURRENT")).map(at=>j.proxyServer?"https://".concat(j.proxyServer,"/ap/?url=").concat(at+"/api/v1"):"https://".concat(at,"/api/v1?action=config")).map(at=>function(ct,dt,ut,pt){let mt=ir(),yt={flag:64,cipher_method:0,features:{device:mt.name,system:mt.os,system_general:navigator.userAgent,vendor:dt.appId,version:Sl,cname:dt.cname,sid:dt.sid,session_id:dt.sid,detail:"",proxyServer:dt.proxyServer}};return tu(()=>$u(ct,{data:yt,timeout:1e3,cancelToken:ut,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,At=>At.code!==Nt.OPERATION_ABORTED,pt)}(at,j,s,$)),tt=null,rt=null,it={};try{tt=await Bm(_e)}catch(at){if(at.code===Nt.OPERATION_ABORTED)throw at;rt=at}if(_e.forEach(at=>at.cancel()),An.reportApiInvoke(j.sid,{name:mo.REQUEST_CONFIG_DISTRIBUTE,options:{error:rt,res:tt}}).onSuccess(),tt&&tt.test_tags)try{it=function(at){if(!at.test_tags)return{};let ct=at.test_tags,dt=Object.keys(ct),ut={};return dt.forEach(pt=>{var mt;let yt=nT(mt=pt.slice(4)).call(mt),At=JSON.parse(ct[pt])[1];ut[yt]=At}),ut}(tt)}catch{}return it}async function rw(j,s,$,_e){let tt=Ft("PROXY_SERVER_TYPE3"),rt=(yt,At,Ct)=>{let It=Ct||tt;return Array.isArray(It)&&(It=At%2==0?tt[1]:tt[0]),"https://".concat(It,"/ap/?url=").concat(yt)},it=null,at=[],ct=async()=>{let yt=Ft("WEBCS_DOMAIN").slice(0,Ft("AJAX_REQUEST_CONCURRENT")).map((It,kt)=>{let Vt;return Vt=j.cloudProxyServer==="disabled"&&j.proxyServer?rt("".concat(It,"/api/v2/transpond/webrtc?v=2"),kt,j.proxyServer):j.cloudProxyServer==="disabled"||j.cloudProxyServer==="fallback"?"https://".concat(It,"/api/v2/transpond/webrtc?v=2"):rt("".concat(It,"/api/v2/transpond/webrtc?v=2"),kt),{url:Vt,areaCode:K_(),serviceIds:[ko.CHOOSE_SERVER,j.cloudProxyServer==="proxy5"?ko.CLOUD_PROXY_5:j.cloudProxyServer==="proxy3"||j.cloudProxyServer==="proxy4"?ko.CLOUD_PROXY:ko.CLOUD_PROXY_FALLBACK]}}),At=_e.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:yt.map(It=>It.url)}),Ct=await H1({fragementLength:Ft("FRAGEMENT_LENGTH"),referenceList:yt,asyncMapHandler:It=>(Et.debug("[".concat(j.clientId,"] Connect to choose_server:"),It.url),JN(It,j,s,$)),allFailedhandler:It=>{throw _e.recordJoinChannelService({endTs:Date.now(),status:"error",errors:It},At),It[0]},promisesCollector:at});return _e.recordJoinChannelService({endTs:Date.now(),status:"success"},At),Ct},dt=async()=>{if(await xo(1e3),it!==null)return it;let yt=Ft("WEBCS_DOMAIN_BACKUP_LIST").map((It,kt)=>{let Vt;return Vt=j.cloudProxyServer==="disabled"&&j.proxyServer?rt("".concat(It,"/api/v2/transpond/webrtc?v=2"),kt,j.proxyServer):j.cloudProxyServer==="disabled"||j.cloudProxyServer==="fallback"?"https://".concat(It,"/api/v2/transpond/webrtc?v=2"):rt("".concat(It,"/api/v2/transpond/webrtc?v=2"),kt),{url:Vt,areaCode:K_(),serviceIds:[ko.CHOOSE_SERVER,j.cloudProxyServer==="proxy5"?ko.CLOUD_PROXY_5:j.cloudProxyServer==="proxy3"||j.cloudProxyServer==="proxy4"?ko.CLOUD_PROXY:ko.CLOUD_PROXY_FALLBACK]}}),At=_e.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:yt.map(It=>It.url)}),Ct=await H1({fragementLength:Ft("FRAGEMENT_LENGTH"),referenceList:yt,asyncMapHandler:It=>(Et.debug("[".concat(j.clientId,"] Connect to backup choose_server:"),It.url),JN(It,j,s,$)),allFailedhandler:It=>{throw _e.recordJoinChannelService({endTs:Date.now(),status:"error",errors:It},At),It[0]},promisesCollector:at});return _e.recordJoinChannelService({endTs:Date.now(),status:"success"},At),Ct},ut,pt,mt;try{({gatewayInfo:ut,proxyInfo:pt,url:mt}=await Bm([ct(),dt()]))}catch(yt){throw yt[0]}if(at.length&&at.forEach(yt=>yt.cancel&&typeof yt.cancel=="function"&&yt.cancel()),!ut||!pt)throw new Wt(Nt.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(j.apUrl=mt,j.cloudProxyServer!=="disabled"&&Array.isArray(tt)&&mt){let yt=/^https?:\/\/(.+?)(\/.*)?$/.exec(mt)[1];vn(tt).call(tt,yt)&&(j.proxyServer=yt,Et.setProxyServer(yt),An.setProxyServer(yt))}return it={gatewayInfo:ut,proxyInfo:await MM(pt,ut.uid)},it}async function ow(j,s,$,_e){let tt=Ft("UAP_AP").slice(0,Ft("AJAX_REQUEST_CONCURRENT")).map(rt=>s.proxyServer?"https://".concat(s.proxyServer,"/ap/?url=").concat(rt+"/api/v1?action=uap"):"https://".concat(rt,"/api/v1?action=uap"));return await GM(tt,j,s,$,_e)}async function KM(j,s,$){let _e=Ft("UAP_AP").slice(0,Ft("AJAX_REQUEST_CONCURRENT")).map(tt=>j.proxyServer?"https://".concat(j.proxyServer,"/ap/?url=").concat(tt+"/api/v1?action=uap"):"https://".concat(tt,"/api/v1?action=uap")).map(tt=>function(rt,it,at,ct){let dt={command:"convergeAllocateEdge",sid:it.sid,appId:it.appId,token:it.token,ts:Date.now(),version:Sl,cname:it.cname,uid:it.uid.toString(),requestId:uT,seq:uT};uT+=1;let ut={service_name:"tele_channel",json_body:JSON.stringify(dt)};return tu(async()=>{let pt=await $u(rt,{data:ut,cancelToken:at,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(pt.code!==0){let yt=new Wt(Nt.UNEXPECTED_RESPONSE,"cross channel ap error, code"+pt.code,{retry:!0});throw Et.error(yt.toString()),yt}let mt=JSON.parse(pt.json_body);if(mt.code!==200){let yt=new Wt(Nt.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(mt.code,", reason: ").concat(mt.reason));throw Et.error(yt.toString()),yt}if(!mt.servers||mt.servers.length===0){let yt=new Wt(Nt.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw Et.error(yt.toString()),yt}return{vid:mt.vid,workerToken:mt.workerToken,addressList:(Ft("CHANNEL_MEDIA_RELAY_SERVERS")||mt.servers).map(yt=>"wss://".concat(yt.address.replace(/\./g,"-"),".").concat(Ft("WORKER_DOMAIN"),":").concat(yt.wss))}},void 0,pt=>!!(pt.code!==Nt.OPERATION_ABORTED&&pt.code!==Nt.UNEXPECTED_RESPONSE||pt.data&&pt.data.retry),ct)}(tt,j,s,$));try{let tt=await Bm(_e);return _e.forEach(rt=>rt.cancel()),tt}catch(tt){throw tt[0]}}async function YM(j,s,$){let _e=null,tt=[],rt=async it=>{let at=Ft(it?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map(ct=>j.proxyServer?"https://".concat(j.proxyServer,"/ap/?url=").concat(ct+"/api/v2/transpond/webrtc?v=2"):"https://".concat(ct,"/api/v2/transpond/webrtc?v=2"));return it&&(await xo(1e3),_e!==null)?_e:await H1({fragementLength:Ft("FRAGEMENT_LENGTH"),referenceList:at,asyncMapHandler:ct=>(Et.debug("[".concat(j.clientId,"] update ticket, Connect to ").concat(it?"backup":""," choose_server:"),ct),function(dt,ut,pt,mt){let[yt]=HM(ut,[ko.CHOOSE_SERVER]),At=uo.networkState;return tu(async()=>{At&&uo.networkState===us.OFFLINE&&uo.onlineWaiter&&await Jt.race([uo.onlineWaiter,xo(mt&&mt.maxRetryTimeout||po.maxRetryTimeout)]),At=uo.networkState;let Ct=await $u(dt,{data:yt,cancelToken:pt,headers:{"Content-Type":"multipart/form-data;"}},!0);return WM(Ct,dt)},()=>!1,Ct=>Ct.code!==Nt.OPERATION_ABORTED&&(Ct.code===Nt.UPDATE_TICKET_FAILED?Ct.data.retry:(Et.warning("[".concat(ut.clientId,"] update ticket network error, retry"),Ct),!0)),mt)}(ct,j,s,$)),allFailedhandler:ct=>{throw ct[0]},promisesCollector:tt})};try{return _e=await Bm([rt(!1),rt(!0)]),tt.length&&tt.forEach(it=>it.cancel&&typeof it.cancel=="function"&&it.cancel()),_e}catch(it){throw it[0]}}function iw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function sw(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?iw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):iw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class qM extends Fr{get isSuccess(){return!!this.configs}constructor(){super(),gt(this,"configs",void 0),gt(this,"joinInfo",void 0),gt(this,"cancelToken",void 0),gt(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),gt(this,"interval",void 0),gt(this,"mutex",new Lo("config-distribute")),gt(this,"mutableParamsRead",!1)}startGetConfigDistribute(s,$){this.joinInfo=s,this.cancelToken=$,this.interval&&this.stopGetConfigDistribute(),Ft("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},Ft("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,An.reportApiInvoke(null,{options:void 0,name:mo.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Wr.TRACER}).onSuccess(JSON.stringify(op))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Et.debug("[config-distribute] get config distribute interrupted have no joininfo");let s,$=await this.mutex.lock();try{s=await zM(this.joinInfo,this.cancelToken,this.retryConfig),Et.debug("[config-distribute] get config distribute",JSON.stringify(s)),s.limit_bitrate&&this.handleBitrateLimit(s.limit_bitrate),this.cacheGlobalParameterConfig(s),this.configs=s}catch(_e){let tt=new Wt(Nt.NETWORK_RESPONSE_ERROR,_e);Et.warning("[config-distribute] ".concat(tt.toString()))}finally{$()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(s){var $;($=s)&&$.uplink&&$.id&&$.uplink.max_bitrate!==void 0&&$.uplink.min_bitrate!==void 0&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==s.id&&this.emit(B1.UPDATE_BITRATE_LIMIT,s):this.emit(B1.UPDATE_BITRATE_LIMIT,s))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&sw({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(s){var $;let _e=R1($=Object.keys(s).filter(rt=>/^webrtc_ng_global_parameter/.test(rt))).call($);for(let rt=0;rt<_e.length;rt++)for(let it=_e.length-1;it>rt;it--){let at=_e[it];if(typeof s[at].__priority=="number"){let ct=s[at].__priority,dt=_e[it-1];if(typeof s[dt].__priority=="number"){if(!(ct>s[dt].__priority))continue;{let ut=at;_e[it]=_e[it-1],_e[it-1]=ut}}else{let ut=at;_e[it]=_e[it-1],_e[it-1]=ut}}}let tt={};_e.forEach(rt=>{let it=s[rt],at=it.__expires;Object.keys(it).forEach(ct=>{ct==="__priority"||ct==="__expires"||Object.prototype.hasOwnProperty.call(tt,ct)||(tt[ct]=sw({value:it[ct]},at&&{expires:at}))})});try{(function(at){try{let ct=Date.now();Object.keys(at).forEach(dt=>{switch(dt){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":if(Object.prototype.hasOwnProperty.call(fs,dt)){let{value:ut,expires:pt}=at[dt];if(pt&&pt<=ct)return;op[dt]=ut,fs[dt]=ut,Et.debug("Update global parameters from config distribute",dt,ut)}}})}catch(ct){Et.error("Error update config immediately: ".concat(at),ct.message)}})(tt);let rt=JSON.stringify(tt),it=window.btoa(rt);window.localStorage.setItem("websdk_ng_global_parameter",it),Et.debug("Caching global parameters ".concat(rt))}catch(rt){Et.error("Error caching global parameters:",rt.message)}}}let ns={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1};function vr(){return ns}var wo;function Gm(j,s,$){return{sampleRate:j,stereo:s,bitrate:$}}function nr(j,s,$,_e,tt){return{width:j,height:s,frameRate:$,bitrateMin:_e,bitrateMax:tt}}function Hl(j,s,$,_e,tt){return{width:{max:j},height:{max:s},frameRate:$,bitrateMin:_e,bitrateMax:tt}}function hT(j,s){return{numSpatialLayers:j,numTemporalLayers:s}}(function(j){j.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",j.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",j.IOS_INTERRUPTION_START="ios-interruption-start",j.IOS_INTERRUPTION_END="ios-interruption-end",j.STATE_CHANGE="state-change"})(wo||(wo={}));let XM={"90p":nr(160,90),"90p_1":nr(160,90),"120p":nr(160,120,15,30,65),"120p_1":nr(160,120,15,30,65),"120p_3":nr(120,120,15,30,50),"120p_4":nr(212,120),"180p":nr(320,180,15,30,140),"180p_1":nr(320,180,15,30,140),"180p_3":nr(180,180,15,30,100),"180p_4":nr(240,180,15,30,120),"240p":nr(320,240,15,40,200),"240p_1":nr(320,240,15,40,200),"240p_3":nr(240,240,15,40,140),"240p_4":nr(424,240,15,40,220),"360p":nr(640,360,15,80,400),"360p_1":nr(640,360,15,80,400),"360p_3":nr(360,360,15,80,260),"360p_4":nr(640,360,30,80,600),"360p_6":nr(360,360,30,80,400),"360p_7":nr(480,360,15,80,320),"360p_8":nr(480,360,30,80,490),"360p_9":nr(640,360,15,80,800),"360p_10":nr(640,360,24,80,800),"360p_11":nr(640,360,24,80,1e3),"480p":nr(640,480,15,100,500),"480p_1":nr(640,480,15,100,500),"480p_2":nr(640,480,30,100,1e3),"480p_3":nr(480,480,15,100,400),"480p_4":nr(640,480,30,100,750),"480p_6":nr(480,480,30,100,600),"480p_8":nr(848,480,15,100,610),"480p_9":nr(848,480,30,100,930),"480p_10":nr(640,480,10,100,400),"720p":nr(1280,720,15,120,1130),"720p_auto":nr(1280,720,30,900,3e3),"720p_1":nr(1280,720,15,120,1130),"720p_2":nr(1280,720,30,120,2e3),"720p_3":nr(1280,720,30,120,1710),"720p_5":nr(960,720,15,120,910),"720p_6":nr(960,720,30,120,1380),"1080p":nr(1920,1080,15,120,2080),"1080p_1":nr(1920,1080,15,120,2080),"1080p_2":nr(1920,1080,30,120,3e3),"1080p_3":nr(1920,1080,30,120,3150),"1080p_5":nr(1920,1080,60,120,4780),"1440p":nr(2560,1440,30,120,4850),"1440p_1":nr(2560,1440,30,120,4850),"1440p_2":nr(2560,1440,60,120,7350),"4k":nr(3840,2160,30,120,8910),"4k_1":nr(3840,2160,30,120,8910),"4k_3":nr(3840,2160,60,120,13500)},X_=[{scaleResolutionDownBy:2,width:1280,height:720,frameRate:30,bitrateMin:300,bitrateMax:900},{scaleResolutionDownBy:1.333333,width:1280,height:720,frameRate:30,bitrateMin:600,bitrateMax:2e3},{scaleResolutionDownBy:1,width:1280,height:720,frameRate:30,bitrateMin:900,bitrateMax:3e3}],JM={"480p":Hl(640,480,5),"480p_1":Hl(640,480,5),"480p_2":Hl(640,480,30),"480p_3":Hl(640,480,15),"720p":Hl(1280,720,5),"720p_auto":nr(1280,720,30,900,3e3),"720p_1":Hl(1280,720,5),"720p_2":Hl(1280,720,30),"720p_3":Hl(1280,720,15),"1080p":Hl(1920,1080,5),"1080p_1":Hl(1920,1080,5),"1080p_2":Hl(1920,1080,30),"1080p_3":Hl(1920,1080,15)},QM={"1SL1TL":hT(1,1),"3SL3TL":hT(3,3),"2SL3TL":hT(2,3)};function mu(j){return j||(j="480p_1"),typeof j=="string"?Object.assign({},XM[j]):j}function fT(j){return typeof j=="string"?Object.assign({},JM[j]):j}function J_(j){return typeof j=="string"?Object.assign({},QM[j]):j}let ZM={speech_low_quality:Gm(16e3,!1),speech_standard:Gm(32e3,!1,18),music_standard:Gm(48e3,!1),standard_stereo:Gm(48e3,!0,56),high_quality:Gm(48e3,!1,128),high_quality_stereo:Gm(48e3,!0,192)};function Q_(j){return typeof j=="string"?Object.assign({},ZM[j]):j}let Wm=[];function aw(j){return vo(j,"mediaSource",["screen","window","application"]),!0}var yn,wr,hp,mT,_T,Hm,fp,Qp,ws,Z_;(function(j){j.NEED_RENEGOTIATE="@need_renegotiate",j.NEED_REPLACE_TRACK="@need_replace_track",j.NEED_CLOSE="@need_close",j.NEED_ENABLE_TRACK="@need_enable_track",j.NEED_DISABLE_TRACK="@need_disable_track",j.NEED_SESSION_ID="@need_sid",j.SET_OPTIMIZATION_MODE="@set_optimization_mode",j.GET_STATS="@get_stats",j.GET_RTC_STATS="@get_rtc_stats",j.GET_LOW_VIDEO_TRACK="@get_low_video_track",j.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",j.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",j.NEED_MUTE_TRACK="@need_mute_track",j.NEED_UNMUTE_TRACK="@need_unmute_track"})(yn||(yn={})),function(j){j.SCREEN_TRACK="screen_track",j.CUSTOM_TRACK="custome_track",j.LOW_STREAM="low_stream"}(wr||(wr={})),function(j){j[j.HIGH_STREAM=0]="HIGH_STREAM",j[j.LOW_STREAM=1]="LOW_STREAM"}(hp||(hp={})),function(j){j[j.HIGH_STREAM=0]="HIGH_STREAM",j[j.LOW_STREAM=1]="LOW_STREAM"}(mT||(mT={})),function(j){j[j.DISABLE=0]="DISABLE",j[j.LOW_STREAM=1]="LOW_STREAM",j[j.AUDIO_ONLY=2]="AUDIO_ONLY"}(_T||(_T={})),function(j){j.TRANSCEIVER_UPDATED="transceiver-updated"}(Hm||(Hm={})),function(j){j.SOURCE_STATE_CHANGE="source-state-change",j.TRACK_ENDED="track-ended",j.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",j.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",j.CLOSED="closed"}(fp||(fp={})),function(j){j.FIRST_FRAME_DECODED="first-frame-decoded",j.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Qp||(Qp={})),function(j){j.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",j.RECEIVE_TRACK_BUFFER="receive_track_buffer",j.ON_AUDIO_BUFFER="on_audio_buffer",j.UPDATE_SOURCE="update_source"}(ws||(ws={})),function(j){j.UPDATE_TRACK_SOURCE="update-track-source"}(Z_||(Z_={}));let ET={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},yT={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},cw={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},eU={uplinkNetworkQuality:0,downlinkNetworkQuality:0},lw={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var rs,Os,Zp,Mu,os;(function(j){j.ON_TRACK="on_track",j.ON_NODE="on_node"})(rs||(rs={})),function(j){j.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",j.REQUEST_CONSTRAINTS="request_constraints"}(Os||(Os={})),function(j){j.IDLE="IDLE",j.INITING="INITING",j.INITEND="INITEND"}(Zp||(Zp={})),function(j){j.STATE_CHANGE="state_change",j.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",j.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",j.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Mu||(Mu={})),function(j){j.NONE="none",j.INIT="init",j.CANPLAY="canplay",j.PLAYING="playing",j.PAUSED="paused",j.SUSPEND="suspend",j.STALLED="stalled",j.WAITING="waiting",j.ERROR="error",j.DESTROYED="destroyed",j.ABORT="abort",j.ENDED="ended",j.EMPTIED="emptied",j.LOADEDDATA="loadeddata"}(os||(os={}));let ST={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};var zm;(function(j){j.OPEN="open",j.MESSAGE="message",j.CLOSE="close",j.CLOSING="closing",j.ERROR="error"})(zm||(zm={}));class dw extends Fr{constructor(s,$){super(),gt(this,"_ID",void 0),gt(this,"_rtpTransceiver",void 0),gt(this,"_lowRtpTransceiver",void 0),gt(this,"_hints",[]),gt(this,"_isClosed",!1),gt(this,"_originMediaStreamTrack",void 0),gt(this,"_mediaStreamTrack",void 0),gt(this,"_external",{}),this._ID=$||Ir(8,"track-"),this._originMediaStreamTrack=s,this._mediaStreamTrack=s,function(_e){vn(Wm).call(Wm,_e)||Wm.push(_e)}(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(s){if(!s){let $=An.reportApiInvoke(null,{name:mo.GET_MEDIA_STREAM_TRACK,options:[],tag:Wr.TRACER});this._mediaStreamTrack&&typeof this._mediaStreamTrack.label=="string"?$.onSuccess(this._mediaStreamTrack.label):$.onSuccess("")}return this._mediaStreamTrack}getRTCRtpTransceiver(s){return s===hp.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(s){let $=Wm.indexOf(s);$!==-1&&Wm.splice($,1)}(this),this.emit(fp.CLOSED)}_updateRtpTransceiver(s,$){if($===hp.LOW_STREAM){if(this._lowRtpTransceiver===s)return;this._lowRtpTransceiver=s}else{if(this._rtpTransceiver===s)return;this._rtpTransceiver=s}this.emit(Hm.TRANSCEIVER_UPDATED,s,$)}}class Yo extends dw{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}set processorContext(s){this._processorContext=s}constructor(s,$){super(s,$),gt(this,"_enabled",!0),gt(this,"_muted",!1),gt(this,"_isExternalTrack",!1),gt(this,"_isClosed",!1),gt(this,"_enabledMutex",void 0),gt(this,"processor",void 0),gt(this,"_handleTrackEnded",()=>{this.onTrackEnded()}),this._enabledMutex=new Lo("".concat(this.getTrackId())),s.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var s,$;return(s=($=this._originMediaStreamTrack)===null||$===void 0?void 0:$.label)!==null&&s!==void 0?s:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Et.debug("[".concat(this.getTrackId(),"] close")),this.emit(yn.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(s,$){let _e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this._isExternalTrack=_e,s!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),$&&this._originMediaStreamTrack.stop()),s.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=s,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Rr(this,yn.NEED_REPLACE_TRACK,this),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Et.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(fp.TRACK_ENDED)}stateCheck(s,$){if(Et.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(s,": ").concat($,"]")),np($,s),this._enabled&&this._muted&&s==="enabled"&&$===!1)throw new rn(Nt.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",Et);if(!this._enabled&&!this._muted&&s==="muted"&&$===!0)throw new rn(Nt.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",Et)}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}function uw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}let pw=window.AudioContext||window.webkitAudioContext,Qs=null,Er=new class extends Fr{constructor(){super(...arguments),gt(this,"prevState",void 0),gt(this,"curState",void 0),gt(this,"currentTime",void 0),gt(this,"currentTimeStuckAt",void 0),gt(this,"interruptDetectorTrack",void 0),gt(this,"onLocalAudioTrackMute",()=>{Et.info("ios15-interruption-start"),this.emit(wo.IOS_15_16_INTERRUPTION_START)}),gt(this,"onLocalAudioTrackUnmute",async()=>{Et.info("ios15-interruption-end"),this.curState!=="running"||this.duringInterruption?Et.info("ios15-interruption-end-canceled"):(Qs&&await Qs.suspend(),this.emit(wo.IOS_15_16_INTERRUPTION_END))})}get duringInterruption(){return this.prevState==="running"&&this.curState==="interrupted"}bindInterruptDetectorTrack(j){Et.debug("webaudio bindInterruptDetectorTrack ".concat(j.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=j,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(j){Et.debug("webaudio unbindInterruptDetectorTrack ".concat(j.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===j&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function tU(){if(!pw)return void Et.error("your browser is not support web audio");Et.info("create audio context");let j=function(s){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?uw(Object(_e),!0).forEach(function(tt){gt(s,tt,_e[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(_e)):uw(Object(_e)).forEach(function(tt){Object.defineProperty(s,tt,Object.getOwnPropertyDescriptor(_e,tt))})}return s}({},Ft("WEBAUDIO_INIT_OPTIONS"));Et.debug("audio context init option:",JSON.stringify(j)),Qs=new pw(j),Er.curState=Qs.state,Qs.onstatechange=()=>{Er.prevState=Er.curState,Er.curState=Qs?Qs.state:void 0;let{prevState:s,curState:$}=Er,_e=$==="running",tt=$==="interrupted",rt=s==="running",it=s==="suspended",at=s==="interrupted",ct=ir().osVersion;(ds()||pu())&&rt&&tt&&(Et.info("ios".concat(ct,"-interruption-start")),Er.emit(wo.IOS_INTERRUPTION_START)),(ds()||pu())&&(it||at)&&_e&&(Et.info("ios".concat(ct,"-interruption-end")),Er.emit(wo.IOS_INTERRUPTION_END)),s!==$&&Er.emit(wo.STATE_CHANGE,$,s)},setInterval(()=>{var s;let $=(s=Qs)===null||s===void 0?void 0:s.currentTime;Er.currentTime!==$?(Er.currentTimeStuckAt&&(Et.debug("AudioContext current time resume at ".concat($)),Er.currentTimeStuckAt=void 0),Er.currentTime=$):($!==Er.currentTimeStuckAt&&(An.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:$},tag:Wr.TRACER}).onSuccess(),Et.warning("AudioContext current time stuck at ".concat($))),Er.currentTimeStuckAt=$)},5e3),async function(s){let $=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],_e,tt=!1,rt=!1,it=!1;function at(It){s.state==="running"?ct(!1):ds()||pu()?s.state==="suspended"&&(ct(!0),It&&s.resume().then(ut,ut)):s.state!=="closed"&&(ct(!0),It&&s.resume().then(ut,ut))}function ct(It){if(tt!==It){tt=It;for(let kt=0,Vt=$;kt<Vt.length;kt+=1){let Bt=Vt[kt];It?window.addEventListener(Bt,pt,{capture:!0,passive:!0}):window.removeEventListener(Bt,pt,{capture:!0,passive:!0})}}}function dt(){at(!0)}function ut(){at(!1)}function pt(){at(!0)}function mt(It){if(!it)if(_e.paused)if(It){let kt;yt(!1),it=!0;try{kt=_e.play(),kt?kt.then(At,At):(_e.addEventListener("playing",At),_e.addEventListener("abort",At),_e.addEventListener("error",At))}catch{At()}}else yt(!0);else yt(!1)}function yt(It){if(rt!==It){rt=It;for(let kt=0,Vt=$;kt<Vt.length;kt++){let Bt=Vt[kt];It?window.addEventListener(Bt,Ct,{capture:!0,passive:!0}):window.removeEventListener(Bt,Ct,{capture:!0,passive:!0})}}}function At(){_e.removeEventListener("playing",At),_e.removeEventListener("abort",At),_e.removeEventListener("error",At),it=!1,mt(!1)}function Ct(){mt(!0)}if(ds()){let It=s.createMediaStreamDestination(),kt=document.createElement("div");kt.innerHTML="<audio x-webkit-airplay='deny'></audio>",_e=kt.children.item(0),_e.controls=!1,_e.disableRemotePlayback=!0,_e.preload="auto",_e.srcObject=It.stream,mt(!0)}Er.on(wo.STATE_CHANGE,dt),at(!1)}(Qs)}function Km(){if(!Qs){if(tU(),!Qs)throw new rn(Nt.NOT_SUPPORTED,"can not create audio context");return Qs}return Qs}function hw(){return!!Qs}function _h(j){if(function(){if(TT!==null)return TT;let _e=Km(),tt=_e.createBufferSource(),rt=_e.createGain(),it=_e.createGain();tt.connect(rt),tt.connect(it),tt.disconnect(rt);let at=!1;try{tt.disconnect(rt)}catch{at=!0}return tt.disconnect(),TT=at,at}())return;let s=j.connect,$=j.disconnect;j.connect=(_e,tt,rt)=>{var it;return j._inputNodes||(j._inputNodes=[]),vn(it=j._inputNodes).call(it,_e)||(_e instanceof AudioNode?(j._inputNodes.push(_e),s.call(j,_e,tt,rt)):s.call(j,_e,tt)),j},j.disconnect=(_e,tt,rt)=>{$.call(j),_e?T_(j._inputNodes,_e):j._inputNodes=[];for(let it of j._inputNodes)s.call(j,it)}}let TT=null;function vT(j,s){let $=!1,_e=1/s;if(Ft("DISABLE_WEBAUDIO")){let tt=window.setInterval(()=>{$?window.clearInterval(tt):j(performance.now()/1e3)},1e3*_e)}else{let tt=Km(),rt=tt.createGain();rt.gain.value=0,rt.connect(tt.destination);let it=()=>{if($)return void(rt=null);let at=tt.createOscillator();at.onended=it,at.connect(rt),at.start(0),at.stop(tt.currentTime+_e),j(tt.currentTime)};it()}return()=>{$=!0}}class fw{constructor(){gt(this,"context",void 0),gt(this,"analyserNode",void 0),gt(this,"sourceNode",void 0),this.context=Km(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(s){if(s!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch{}this.sourceNode=s,s==null||s.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode||(!this.context||ds()||pu()||this.context.state!=="running"&&this.context.resume(),!this.analyserNode))return 0;let s=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(s);else{let _e=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(_e);for(let tt=0;tt<s.length;++tt)s[tt]=_e[tt]/128-1}let $=zp(s).call(s,(_e,tt)=>_e+tt*tt,0)/s.length;return Math.max(10*Math.log10($)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var s,$;(s=this.sourceNode)===null||s===void 0||s.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,($=this.sourceNode)===null||$===void 0||$.connect(this.analyserNode)}catch{Et.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class gw extends Fr{get processSourceNode(){return this.sourceNode}set processedNode(s){var $;if(!this.isDestroyed&&this._processedNode!==s){try{var _e;(_e=this.sourceNode)===null||_e===void 0||_e.disconnect(this.outputNode)}catch{}($=this._processedNode)===null||$===void 0||$.disconnect(),this._processedNode=s,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),gt(this,"outputNode",void 0),gt(this,"outputTrack",void 0),gt(this,"isPlayed",!1),gt(this,"context",void 0),gt(this,"audioBufferNode",void 0),gt(this,"destNode",void 0),gt(this,"audioOutputLevel",0),gt(this,"volumeLevelAnalyser",void 0),gt(this,"_processedNode",void 0),gt(this,"playNode",void 0),gt(this,"isDestroyed",!1),gt(this,"onNoAudioInput",void 0),gt(this,"isNoAudioInput",!1),gt(this,"_noAudioInputCount",0),this.context=Km(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),_h(this.outputNode),this.volumeLevelAnalyser=new fw}startGetAudioBuffer(s){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(s),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=$=>{this.emit(ws.ON_AUDIO_BUFFER,function(_e){for(let tt=0;tt<_e.outputBuffer.numberOfChannels;tt+=1){let rt=_e.outputBuffer.getChannelData(tt);for(let it=0;it<rt.length;it+=1)rt[it]=0}return _e.inputBuffer}($))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!vr().webAudioMediaStreamDest)throw new rn(Nt.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(s){this.context.state!=="running"&&v_(()=>{Er.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=s||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch{}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(s>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;ds()||pu()?this.context.state==="suspended"&&this.context.resume():this.context.state!=="running"&&this.context.resume();let $=this.volumeLevelAnalyser.getAnalyserNode(),_e;$.getFloatTimeDomainData?(_e=new Float32Array($.fftSize),$.getFloatTimeDomainData(_e)):(_e=new Uint8Array($.fftSize),$.getByteTimeDomainData(_e));let tt=!1;for(let rt=0;rt<_e.length;rt++)_e[rt]!==0&&(tt=!0);return tt?(this.isNoAudioInput=!1,!0):(await xo(200),await this.checkHasAudioInput(s?s+1:1)&&tt)}getAudioVolume(){return this.outputNode.gain.value}setVolume(s){this.outputNode.gain.setValueAtTime(s,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var s,$;(s=this.processedNode)===null||s===void 0||s.disconnect(),($=this.sourceNode)===null||$===void 0||$.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var s;this.processedNode?(s=this.processedNode)===null||s===void 0||s.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class CT extends gw{get isFreeze(){return!1}constructor(s,$,_e){var tt;if(super(),gt(this,"sourceNode",void 0),gt(this,"track",void 0),gt(this,"clonedTrack",void 0),gt(this,"audioElement",void 0),gt(this,"isCurrentTrackCloned",!1),gt(this,"isRemoteTrack",!1),gt(this,"originVolumeLevelAnalyser",void 0),gt(this,"rebuildWebAudio",async()=>{if(Et.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void Et.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>Et.info("resume success")),Et.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();let at=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?at.stop():this.isCurrentTrackCloned=!0;let ct=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(ct),_h(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();let dt=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(dt,this.context.currentTime),_h(this.outputNode),this.emit(ws.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=ct,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()}),s.kind!=="audio")throw new rn(Nt.UNEXPECTED_ERROR);this.track=s;let rt=new MediaStream([this.track]);if(this.isRemoteTrack=!!$,this.sourceNode=this.context.createMediaStreamSource(rt),_h(this.sourceNode),_e){let at=_e.clone();at.enabled=!0,this.clonedTrack=at,Et.debug("create an unmuted track ".concat(at.id," from the original track ").concat(_e.id," to get the volume"));let ct=this.context.createMediaStreamSource(new MediaStream([at]));_h(ct),this.originVolumeLevelAnalyser=new fw,this.originVolumeLevelAnalyser.updateSource(ct)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=rt;let it=ir();$&&it.os===To.IOS&&Number((tt=it.osVersion)===null||tt===void 0?void 0:tt.split(".")[0])<15&&(Er.on(wo.STATE_CHANGE,()=>{this.context.state==="suspended"?document.body.addEventListener("click",this.rebuildWebAudio,!0):this.context.state==="running"&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(at=>{at||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}updateTrack(s){this.sourceNode.disconnect(),this.track=s,this.isCurrentTrackCloned=!1;let $=new MediaStream([s]);this.sourceNode=this.context.createMediaStreamSource($),_h(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(ws.UPDATE_SOURCE),this.audioElement.srcObject=$}destroy(){var s;this.audioElement.srcObject=null,this.audioElement.remove(),Er.off("state-change",this.rebuildWebAudio),(s=this.originVolumeLevelAnalyser)===null||s===void 0||s.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(s){return this.context.createMediaStreamSource(new MediaStream([s]))}updateOriginTrack(s){let $=s.clone();$.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=$),Et.debug("create an unmuted track ".concat($.id," from the original track ").concat(s.id," to get the volume"));let _e=this.context.createMediaStreamSource(new MediaStream([$]));_h(_e),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(_e)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function mw(j,s,$){let _e=(rt,it)=>rt?typeof rt!="number"?rt.max||rt.exact||rt.ideal||rt.min||it:rt:it,tt={audio:!!$&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:j,maxHeight:_e(s.height,1080),maxWidth:_e(s.width,1920)}}};return s.frameRate&&typeof s.frameRate!="number"?(tt.video.mandatory.maxFrameRate=s.frameRate.max,tt.video.mandatory.minFrameRate=s.frameRate.min):typeof s.frameRate=="number"&&(tt.video.mandatory.maxFrameRate=s.frameRate),await navigator.mediaDevices.getUserMedia(tt)}async function nU(j,s){let $=await _w(j.mediaSource),{sourceId:_e,audio:tt}=await function(rt){let it=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Jt((at,ct)=>{let dt=document.createElement("div");dt.innerText="share screen",dt.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");let ut=document.createElement("div");ut.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");let pt=document.createElement("div");pt.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",pt.setAttribute("style","height: 12%;");let mt=document.createElement("div");mt.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");let yt=document.createElement("div");yt.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");let At=document.createElement("button");At.innerHTML="cancel",At.setAttribute("style","width: 85px;"),At.onclick=()=>{document.body.removeChild(kt);let Vt=new Error("NotAllowedError");Vt.name="NotAllowedError",ct(Vt)};let Ct=it,It=document.createElement("div");if(it){let Vt=document.createElement("input");Vt.setAttribute("type","checkbox");let Bt=document.createElement("span");Vt.setAttribute("style","margin-right: 6px;"),Bt.innerText="Share audio",Vt.checked=Ct,Vt.onchange=()=>{Ct=Vt.checked},It.appendChild(Vt),It.appendChild(Bt)}yt.appendChild(It),yt.appendChild(At),ut.appendChild(pt),ut.appendChild(mt),ut.appendChild(yt);let kt=document.createElement("div");kt.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),kt.appendChild(dt),kt.appendChild(ut),document.body.appendChild(kt),rt.map(Vt=>{if(Vt.id){let Bt=document.createElement("div");Bt.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let en=Vt.thumbnail;try{let{width:zt}=en.getSize();zt>1920&&(en=en.resize({width:1920}))}catch(zt){throw zt&&zt.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),zt}Bt.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+en.toDataURL()+' /></div><span style="	height: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+Vt.name.replace(/[\u00A0-\u9999<>\&]/g,function(zt){return"&#"+zt.charCodeAt(0)+";"})+"</span>",Bt.onclick=()=>{document.body.removeChild(kt),at({sourceId:Vt.id,audio:Ct})},mt.appendChild(Bt)}})})}($,s);return await mw(_e,j,tt)}async function _w(j){let s=["window","screen"];j!=="application"&&j!=="window"||(s=["window"]),j==="screen"&&(s=["screen"]);let $=oA();if(!$)throw console.error("failed to fetch electron, please mount it to window"),new rn(Nt.ELECTRON_IS_NULL);let _e=null;try{var tt;_e=((tt=$.desktopCapturer)===null||tt===void 0?void 0:tt.getSources({types:s}))||$.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:s})}catch{_e=null}_e&&_e.then||(_e=new Jt((rt,it)=>{$.desktopCapturer.getSources({types:s},(at,ct)=>{at?it(at):rt(ct)})}));try{return await _e}catch(rt){throw new rn(Nt.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,rt.toString())}}function Ew(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}let bT=new Lo("safari"),yw=!1,Sw=!1;async function Zs(j,s){let $=0,_e=null;for(;$<2;)try{_e=await rU(j,s,$>0);break}catch(tt){if(tt instanceof rn)throw Et.error("[".concat(s,"] ").concat(tt.toString())),tt;let rt=tE(tt.name||tt.code||tt,tt.message);if(rt.code===Nt.MEDIA_OPTION_INVALID){Et.debug("[".concat(s,"] detect media option invalid, retry")),$+=1,await xo(500);continue}throw Et.error("[".concat(s,"] ").concat(rt.toString())),rt}if(!_e)throw new rn(Nt.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return _e}async function rU(j,s,$){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new rn(Nt.NOT_SUPPORTED,"can not find getUserMedia");$&&(j.video&&(delete j.video.width,delete j.video.height),j.screen&&(delete j.screen.width,delete j.screen.height));let _e=vr(),tt=new MediaStream;if(j.audioSource&&tt.addTrack(j.audioSource),j.videoSource&&tt.addTrack(j.videoSource),!j.audio&&!j.video&&!j.screen)return Et.debug("Using Video Source/ Audio Source"),tt;if(j.screen)if(oA())j.screen.sourceId?Ym(tt,await mw(j.screen.sourceId,j.screen,j.screenAudio)):Ym(tt,await nU(j.screen,j.screenAudio));else if(k1()&&j.screen.extensionId&&j.screen.mandatory){if(!_e.getStreamFromExtension)throw new rn(Nt.NOT_SUPPORTED,"This browser does not support screen sharing");Et.debug("[".concat(s,'] Screen access on chrome stable, looking for extension"'));let mt=await(it=j.screen.extensionId,at=s,new Jt((yt,At)=>{try{chrome.runtime.sendMessage(it,{getStream:!0},Ct=>{if(!Ct||!Ct.streamId)return Et.error("[".concat(at,"] No response from Chrome Plugin. Plugin not installed properly"),Ct),void At(new rn(Nt.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));yt(Ct.streamId)})}catch(Ct){Et.error("[".concat(at,"] AgoraRTC screensharing plugin is not accessible(").concat(it,")"),Ct.toString()),At(new rn(Nt.CHROME_PLUGIN_NOT_INSTALL))}}));j.screen.mandatory.chromeMediaSourceId=mt,Ym(tt,await navigator.mediaDevices.getUserMedia({video:{mandatory:j.screen.mandatory}}))}else if(_e.getDisplayMedia){var rt;j.screen.mediaSource&&aw(j.screen.mediaSource);let mt={width:j.screen.width,height:j.screen.height,frameRate:j.screen.frameRate,displaySurface:(rt=j.screen.displaySurface)!==null&&rt!==void 0?rt:j.screen.mediaSource==="screen"?"monitor":j.screen.mediaSource},{selfBrowserSurface:yt,surfaceSwitching:At,systemAudio:Ct}=j.screen,It={selfBrowserSurface:yt,surfaceSwitching:At,systemAudio:Ct};!yt&&delete It.selfBrowserSurface,!At&&delete It.surfaceSwitching,!Ct&&delete It.systemAudio,Et.debug("[".concat(s,"] getDisplayMedia:"),JSON.stringify({video:mt,audio:!!j.screenAudio,controls:It}));let kt=await navigator.mediaDevices.getDisplayMedia(function(Vt){for(var Bt=1;Bt<arguments.length;Bt++){var en=arguments[Bt]!=null?arguments[Bt]:{};Bt%2?Ew(Object(en),!0).forEach(function(zt){gt(Vt,zt,en[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(en)):Ew(Object(en)).forEach(function(zt){Object.defineProperty(Vt,zt,Object.getOwnPropertyDescriptor(en,zt))})}return Vt}({video:mt,audio:!!j.screenAudio},It));Ym(tt,kt)}else{if(!br())throw Et.error("[".concat(s,"] This browser does not support screenSharing")),new rn(Nt.NOT_SUPPORTED,"This browser does not support screen sharing");{j.screen.mediaSource&&aw(j.screen.mediaSource);let mt={video:{mediaSource:j.screen.mediaSource,width:j.screen.width,height:j.screen.height,frameRate:j.screen.frameRate}};Et.debug("[".concat(s,"] getUserMedia: ").concat(JSON.stringify(mt))),Ym(tt,await navigator.mediaDevices.getUserMedia(mt))}}var it,at;if(!j.video&&!j.audio)return tt;let ct={video:j.video,audio:j.audio},dt=Ft("MEDIA_DEVICE_CONSTRAINTS");if(dt)try{typeof dt=="string"&&(dt=JSON.parse(dt)),ct=SS(ct,dt)}catch{}Et.debug("[".concat(s,"] GetUserMedia"),JSON.stringify(ct)),ir();let ut,pt=null;(ls()||ds()||E_())&&(pt=await bT.lock());try{ut=await navigator.mediaDevices.getUserMedia(ct)}catch(mt){throw pt&&pt(),mt}return ct.audio&&(yw=!0),ct.video&&(Sw=!0),Ym(tt,ut),pt&&pt(),tt}function tE(j,s){switch(j){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new rn(Nt.MEDIA_OPTION_INVALID,"".concat(j,": ").concat(s));case"NotFoundError":case"DevicesNotFoundError":return new rn(Nt.DEVICE_NOT_FOUND,"".concat(j,": ").concat(s));case"NotSupportedError":return new rn(Nt.NOT_SUPPORTED,"".concat(j,": ").concat(s));case"NotReadableError":return new rn(Nt.NOT_READABLE,"".concat(j,": ").concat(s));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new rn(Nt.PERMISSION_DENIED,"".concat(j,": ").concat(s));case"ConstraintNotSatisfiedError":return new rn(Nt.CONSTRAINT_NOT_SATISFIED,"".concat(j,": ").concat(s));default:return Et.error("getUserMedia unexpected error",j),new rn(Nt.UNEXPECTED_ERROR,"".concat(j,": ").concat(s))}}function Ym(j,s){let $=j.getVideoTracks()[0],_e=j.getAudioTracks()[0],tt=s.getVideoTracks()[0],rt=s.getAudioTracks()[0];rt&&(_e&&j.removeTrack(_e),j.addTrack(rt)),tt&&($&&j.removeTrack($),j.addTrack(tt))}let na=new class extends Fr{get state(){return this._state}set state(j){j!==this._state&&(this.emit(Mu.STATE_CHANGE,j),this._state=j)}constructor(){super(),gt(this,"_state",Zp.IDLE),gt(this,"isAccessMicrophonePermission",!1),gt(this,"isAccessCameraPermission",!1),gt(this,"lastAccessMicrophonePermission",!1),gt(this,"lastAccessCameraPermission",!1),gt(this,"checkdeviceMatched",!1),gt(this,"deviceInfoMap",new Map),this.init().then(()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval(()=>{(Ft("ENUMERATE_DEVICES_INTERVAL")||(y_()||__()===To.HARMONY_OS)&&tp())&&this.updateDevicesInfo()},Ft("ENUMERATE_DEVICES_INTERVAL_TIME"))}).catch(j=>Et.error(j.toString()))}async enumerateDevices(j,s){let $=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new rn(Nt.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();let _e=await navigator.mediaDevices.enumerateDevices(),tt=this.checkMediaDeviceInfoIsOk(_e),rt=!this.isAccessMicrophonePermission&&j,it=!this.isAccessCameraPermission&&s;tt.audio&&(rt=!1),tt.video&&(it=!1);let at=null,ct=null,dt=null;if(!$&&(rt||it)){if(bT.isLocked&&(Et.debug("[device manager] wait GUM lock"),(await bT.lock())(),Et.debug("[device manager] GUM unlock")),yw&&(rt=!1,this.isAccessMicrophonePermission=!0),Sw&&(it=!1,this.isAccessCameraPermission=!0),Et.debug("[device manager] check media device permissions",j,s,rt,it),rt&&it){try{dt=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(ut){let pt=tE(ut.name||ut.code||ut,ut.message);if(pt.code===Nt.PERMISSION_DENIED)throw pt;Et.warning("getUserMedia failed in getDevices",pt)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(rt){try{at=await navigator.mediaDevices.getUserMedia({audio:j})}catch(ut){let pt=tE(ut.name||ut.code||ut,ut.message);if(pt.code===Nt.PERMISSION_DENIED)throw pt;Et.warning("getUserMedia failed in getDevices",pt)}this.isAccessMicrophonePermission=!0}else if(it){try{ct=await navigator.mediaDevices.getUserMedia({video:s})}catch(ut){let pt=tE(ut.name||ut.code||ut,ut.message);if(pt.code===Nt.PERMISSION_DENIED)throw pt;Et.warning("getUserMedia failed in getDevices",pt)}this.isAccessCameraPermission=!0}Et.debug("[device manager] mic permission",j,"cam permission",s)}try{let ut=await navigator.mediaDevices.enumerateDevices();return at&&at.getTracks().forEach(pt=>pt.stop()),ct&&ct.getTracks().forEach(pt=>pt.stop()),dt&&dt.getTracks().forEach(pt=>pt.stop()),at=null,ct=null,dt=null,ut}catch(ut){return at&&at.getTracks().forEach(pt=>pt.stop()),ct&&ct.getTracks().forEach(pt=>pt.stop()),dt&&dt.getTracks().forEach(pt=>pt.stop()),at=null,ct=null,dt=null,new rn(Nt.ENUMERATE_DEVICES_FAILED,ut.toString()).throw()}}async getRecordingDevices(){let j=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,j)).filter(s=>s.kind==="audioinput")}async getCamerasDevices(){let j=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!1,!0,j)).filter(s=>s.kind==="videoinput")}async getSpeakers(){let j=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return(await this.enumerateDevices(!0,!1,j)).filter(s=>s.kind==="audiooutput")}searchDeviceIdByName(j){let s=null;return this.deviceInfoMap.forEach($=>{$.device.label===j&&(s=$.device.deviceId)}),s}async getDeviceById(j){let s=(await this.enumerateDevices(!0,!0,!0)).find($=>$.deviceId===j);if(!s)throw new rn(Nt.DEVICE_NOT_FOUND,"deviceId: ".concat(j));return s}async init(){this.state=Zp.INITING;try{await this.updateDevicesInfo(),this.state=Zp.INITEND}catch(j){throw Et.warning("Device Detection functionality cannot start properly.",j.toString()),this.state=Zp.IDLE,!(typeof isSecureContext=="boolean"?isSecureContext:location.protocol==="https:"||location.protocol==="file:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="::1")&&new rn(Nt.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),j}}async updateDevicesInfo(){let j=await this.enumerateDevices(!0,!0,!0),s=Date.now(),$=[];if(j[0]&&j[0].label&&this.checkdeviceMatched===!1){this.checkdeviceMatched=!0;let tt=j.find(it=>it.kind==="audioinput"&&it.deviceId==="default"),rt=j.find(it=>it.kind==="audiooutput"&&it.deviceId==="default");tt&&rt?rt.groupId===tt.groupId?Et.debug("[device-check] default input ".concat(tt.label," and output ").concat(rt.label," is the same group")):Et.warning("[device-check] default input ".concat(tt.label," and output ").concat(rt.label," is not the same group")):Et.debug("[device-check] default input or output not found")}let _e=this.checkMediaDeviceInfoIsOk(j);if(j.forEach(tt=>{if(!tt.deviceId)return;let rt=this.deviceInfoMap.get("".concat(tt.kind,"_").concat(tt.deviceId));if((rt?rt.state:"INACTIVE")!=="ACTIVE"){let it={initAt:s,updateAt:s,device:tt,state:"ACTIVE"};this.deviceInfoMap.set("".concat(tt.kind,"_").concat(tt.deviceId),it),$.push(it)}rt&&(rt.updateAt=s)}),this.deviceInfoMap.forEach((tt,rt)=>{tt.state==="ACTIVE"&&tt.updateAt!==s&&(tt.state="INACTIVE",$.push(tt))}),this.state!==Zp.INITEND)return _e.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(_e.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));$.forEach(tt=>{switch(tt.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Mu.RECORDING_DEVICE_CHANGED,tt);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Mu.CAMERA_DEVICE_CHANGED,tt);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Mu.PLAYOUT_DEVICE_CHANGED,tt)}}),_e.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),_e.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(j){let s=j.filter(tt=>tt.kind==="audioinput"),$=j.filter(tt=>tt.kind==="videoinput"),_e={audio:!1,video:!1};for(let tt of s)if(tt.label&&tt.deviceId){_e.audio=!0;break}for(let tt of $)if(tt.label&&tt.deviceId){_e.video=!0;break}return _e}},RT=!1,ga=new class extends Fr{constructor(){super(...arguments),gt(this,"onAutoplayFailed",void 0),gt(this,"onAudioAutoplayFailed",void 0)}};function Tw(){if(ir(),!RT){let j=s=>{s.preventDefault(),RT=!1,$1()?document.body.removeEventListener("click",j,!0):(document.body.removeEventListener("touchstart",j,!0),document.body.removeEventListener("mousedown",j,!0))};RT=!0,$1()?document.body.addEventListener("click",j,!0):(document.body.addEventListener("touchstart",j,!0),document.body.addEventListener("mousedown",j,!0)),Et.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),ga.onAutoplayFailed?ga.onAutoplayFailed():ga.onAudioAutoplayFailed?Et.warning(`AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.

  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`):Et.warning(`We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.

  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.

  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web .`),ga.emit("autoplay-failed")}}function vw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Cw(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?vw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):vw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function bw(j,s,$,_e){if(!j)return;let tt=An.getBaseInfoBySessionId(j);if(!tt)return;let rt=tt.info,it=Date.now(),at=Cw(Cw({},rt),{},{vid:rt.vid===void 0?0:Number(rt.vid),lts:it,elapse:it-tt.startTime,cbRegistered:ga.onAutoplayFailed||ga.onAudioAutoplayFailed?1:-1,errorMsg:$,mediaType:s,trackId:_e,extend:void 0});An.send({type:kr.AUTOPLAY_FAILED,data:at},!0)}let oU=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],Ps=new class{constructor(){gt(this,"onAutoplayFailed",void 0),gt(this,"elementMap",new Map),gt(this,"elementStateMap",new Map),gt(this,"elementsNeedToResume",[]),gt(this,"sinkIdMap",new Map),gt(this,"autoResumeAfterInterruption",j=>{Array.from(this.elementMap.entries()).forEach(s=>{let[$,_e]=s,tt=this.elementStateMap.get($),rt=_e.srcObject.getAudioTracks()[0],it=rt&&rt.readyState;if(Et.debug("resume after interrupted, ele: ".concat(tt," audio: ").concat(it," ").concat(j)),it==="live"){if(j)return _e.pause(),void _e.play();if(Er.curState==="running")return wm()?(_e.pause(),void _e.play()):void(tt&&tt==="paused"&&_e.play())}})}),gt(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{Array.from(this.elementMap.entries()).forEach(j=>{let[s,$]=j,_e=$.srcObject.getAudioTracks()[0];_e&&_e.readyState==="live"&&(Et.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),$.pause(),$.play())})}),this.autoResumeAudioElement(),Er.on(wo.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Er.on(wo.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),Er.on(wo.STATE_CHANGE,()=>{ds()&&Er.prevState==="suspended"&&Er.curState==="running"&&this.autoResumeAfterInterruption()})}async setSinkID(j,s){let $=this.elementMap.get(j);if(this.sinkIdMap.set(j,s),$)try{await $.setSinkId(s)}catch(_e){throw new rn(Nt.PERMISSION_DENIED,"can not set sink id: "+_e.toString())}}play(j,s,$,_e){if(this.elementMap.has(s))return;let tt=document.createElement("audio");tt.autoplay=!0,tt.srcObject=new MediaStream([j]),this.bindAudioElementEvents(s,tt),this.elementMap.set(s,tt),this.elementStateMap.set(s,os.INIT),this.setVolume(s,$);let rt=this.sinkIdMap.get(s);if(rt)try{tt.setSinkId(rt).catch(at=>{Et.warning("[".concat(s,"] set sink id failed"),at.toString())})}catch(at){Et.warning("[".concat(s,"] set sink id failed"),at.toString())}let it=tt.play();it&&it.then&&it.catch(at=>{_e&&bw(_e,"audio",at.message,s),Et.warning("audio element play warning",at.toString()),this.elementMap.has(s)&&at.name==="NotAllowedError"&&(Et.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(tt),v_(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Tw()}))})}updateTrack(j,s){let $=this.elementMap.get(j);$&&($.srcObject=new MediaStream([s]))}isPlaying(j){return this.elementMap.has(j)&&this.elementStateMap.get(j)==="playing"}setVolume(j,s){let $=this.elementMap.get(j);$&&(s=Math.max(0,Math.min(100,s)),$.volume=s/100)}stop(j){let s=this.elementMap.get(j);if(this.sinkIdMap.delete(j),!s)return;let $=this.elementsNeedToResume.indexOf(s);this.elementsNeedToResume.splice($,1),s.srcObject=null,s.remove(),this.elementMap.delete(j),this.elementStateMap.delete(j)}bindAudioElementEvents(j,s){oU.forEach($=>{s.addEventListener($,_e=>{let tt=this.elementStateMap.get(j),rt=_e.type==="pause"?"paused":_e.type;if(Et.debug("[".concat(j,"] audio-element-status change ").concat(tt," => ").concat(rt)),_e.type==="error"){let it=s==null?void 0:s.error;it&&Et.error("[".concat(j,"] media error, code: ").concat(it.code,", message: ").concat(it.message))}this.elementStateMap.set(j,rt)})})}getPlayerState(j){return this.elementStateMap.get(j)||"uninit"}autoResumeAudioElement(){let j=()=>{this.elementsNeedToResume.forEach(s=>{s.play().then($=>{Et.debug("Auto resume audio element success")}).catch($=>{Et.warning("Auto resume audio element failed!",$)})}),this.elementsNeedToResume=[]};new Jt(s=>{document.body?s():window.addEventListener("load",()=>s())}).then(()=>{$1()?document.body.addEventListener("click",j,!0):(document.body.addEventListener("touchstart",j,!0),document.body.addEventListener("mousedown",j,!0))})}};function ro(){return function(j,s,$){let _e=$.value;return typeof _e=="function"&&($.value=function(){this._isClosed&&new rn(Nt.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",Et);for(var tt=arguments.length,rt=new Array(tt),it=0;it<tt;it++)rt[it]=arguments[it];let at=_e.apply(this,rt);return at instanceof Jt?new Jt((ct,dt)=>{at.then(ct).catch(dt)}):at}),$}}function Rw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function nE(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?Rw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):Rw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class Iw extends Fr{constructor(s){super(),gt(this,"name","VideoProcessorDestination"),gt(this,"ID","0"),gt(this,"_source",void 0),gt(this,"videoContext",void 0),gt(this,"inputTrack",void 0),this.videoContext=s}get kind(){return"video"}get enabled(){return!0}pipe(){throw new rn(Nt.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new rn(Nt.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(s){if(s.context!==this.videoContext)throw new Error(`ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.
Probably you are making pipeline like this:
videoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).`);s.track&&s.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=s.track,this.emit(rs.ON_TRACK,s.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(rs.ON_TRACK,void 0)}}class Aw extends Fr{set chained(s){this._chained=s}get chained(){return this._chained}constructor(s,$){super(),gt(this,"constraintsMap",new Map),gt(this,"statsRegistry",[]),gt(this,"usageRegistry",[]),gt(this,"trackId",void 0),gt(this,"direction",void 0),gt(this,"_chained",!1),this.trackId=s,this.direction=$}async getConstraints(){return await lo(this,Os.REQUEST_CONSTRAINTS)}async requestApplyConstraints(s,$){var _e;return Et.info("processor ".concat($.name," requestApplyConstraints for ").concat(this.trackId)),s&&this.constraintsMap.set($,s),Rr(this,Os.REQUEST_UPDATE_CONSTRAINTS,Array.from(nu(_e=this.constraintsMap).call(_e)))}async requestRevertConstraints(s){var $;if(this.constraintsMap.has(s))return Et.info("processor ".concat(s.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(s),Rr(this,Os.REQUEST_UPDATE_CONSTRAINTS,Array.from(nu($=this.constraintsMap).call($)))}registerStats(s,$,_e){this.statsRegistry.find(tt=>tt.processorID===s.ID&&tt.processorName===s.name&&tt.type===$)||this.statsRegistry.push({processorName:s.name,processorID:s.ID,type:$,cb:_e})}unregisterStats(s,$){let _e=this.statsRegistry.findIndex(tt=>tt.processorID===s.ID&&tt.processorName===s.name&&tt.type===$);_e!==-1&&this.statsRegistry.splice(_e,1)}gatherStats(){let s=[];for(let{processorID:$,processorName:_e,type:tt,cb:rt}of this.statsRegistry)try{let it=rt();s.push({processorID:$,processorName:_e,type:tt,stats:it})}catch(it){Et.error(new rn(Nt.UNEXPECTED_ERROR,it.message))}return s}registerUsage(s,$){this.usageRegistry.find(_e=>_e.processorID===s.ID&&_e.processorName===s.name)||this.usageRegistry.push({processorID:s.ID,processorName:s.name,cb:$})}unregisterUsage(s){let $=this.usageRegistry.findIndex(_e=>_e.processorID===s.ID&&_e.processorName===s.name);$!==-1&&this.usageRegistry.splice($,1)}async gatherUsage(){let s=[];if(!this.chained)return[];for(let{cb:$}of this.usageRegistry)try{let _e=$();_e instanceof Jt&&(_e=await _e),s.push(nE(nE({},_e),{},{direction:this.direction}))}catch(_e){Et.error("gather extension usage error",_e)}return s}getDirection(){return this.direction}}class aE extends Fr{constructor(s){super(),gt(this,"name","AudioProcessorDestination"),gt(this,"ID","0"),gt(this,"inputTrack",void 0),gt(this,"inputNode",void 0),gt(this,"audioProcessorContext",void 0),gt(this,"_source",void 0),this.audioProcessorContext=s}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new rn(Nt.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new rn(Nt.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(rs.ON_TRACK,void 0),this.emit(rs.ON_NODE,void 0)}updateInput(s){if(s.context!==this.audioProcessorContext)throw new Error(`ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.
        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).`);s.track&&this.inputTrack!==s.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=s.track,this.emit(rs.ON_TRACK,this.inputTrack)),s.node&&this.inputNode!==s.node&&(this.audioProcessorContext.chained=!0,this.inputNode=s.node,this.emit(rs.ON_NODE,this.inputNode))}}class cE extends Fr{set chained(s){this._chained=s}get chained(){return this._chained}constructor(s,$,_e){super(),gt(this,"constraintsMap",new Map),gt(this,"statsRegistry",[]),gt(this,"audioContext",void 0),gt(this,"trackId",void 0),gt(this,"direction",void 0),gt(this,"usageRegistry",[]),gt(this,"_chained",!1),this.audioContext=s,this.trackId=$,this.direction=_e}async getConstraints(){return lo(this,Os.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(s,$){var _e;return Et.info("processor ".concat($.name," requestApplyConstraints for ").concat(this.trackId)),s&&this.constraintsMap.set($,s),Rr(this,Os.REQUEST_UPDATE_CONSTRAINTS,Array.from(nu(_e=this.constraintsMap).call(_e)))}async requestRevertConstraints(s){var $;if(this.constraintsMap.has(s))return this.constraintsMap.delete(s),Rr(this,Os.REQUEST_UPDATE_CONSTRAINTS,Array.from(nu($=this.constraintsMap).call($)))}registerStats(s,$,_e){this.statsRegistry.find(tt=>tt.processorID===s.ID&&tt.processorName===s.name&&tt.type===$)||this.statsRegistry.push({processorName:s.name,processorID:s.ID,type:$,cb:_e})}unregisterStats(s,$){let _e=this.statsRegistry.findIndex(tt=>tt.processorID===s.ID&&tt.processorName===s.name&&tt.type===$);_e!==-1&&this.statsRegistry.splice(_e,1)}gatherStats(){let s=[];for(let{processorID:$,processorName:_e,type:tt,cb:rt}of this.statsRegistry)try{let it=rt();s.push({processorID:$,processorName:_e,type:tt,stats:it})}catch(it){Et.error(new rn(Nt.UNEXPECTED_ERROR,it.message))}return s}registerUsage(s,$){this.usageRegistry.find(_e=>_e.processorID===s.ID&&_e.processorName===s.name)||this.usageRegistry.push({processorID:s.ID,processorName:s.name,cb:$})}unregisterUsage(s){let $=this.usageRegistry.findIndex(_e=>_e.processorID===s.ID&&_e.processorName===s.name);$!==-1&&this.usageRegistry.splice($,1)}async gatherUsage(){let s=[];if(!this.chained)return[];for(let{cb:$}of this.usageRegistry)try{let _e=$();_e instanceof Jt&&(_e=await _e),s.push(nE(nE({},_e),{},{direction:this.direction}))}catch(_e){Et.error("gather extension usage error",_e)}return s}getDirection(){return this.direction}}class IT extends Fr{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),gt(this,"context",void 0),gt(this,"processSourceNode",void 0),gt(this,"outputTrack",void 0),gt(this,"processedNode",void 0),gt(this,"clonedTrack",void 0),gt(this,"outputNode",void 0),this.outputNode=new iU}setVolume(){}createOutputTrack(){throw new rn(Nt.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class iU{disconnect(){}connect(){}}let qm=null;class sU{constructor(){gt(this,"state","open"),gt(this,"trigger",void 0),gt(this,"tasks",[]),Et.debug("[macro-task-queue] is created."),this.trigger=window.setTimeout(()=>{this.state="closed",Et.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(this.tasks.map(s=>s.key),"]")),this.trigger=void 0,this.tasks.forEach(s=>{let{func:$}=s;return $()}),this.tasks.length=0,Et.debug("[macro-task-queue] is closed.")})}enqueue(s,$){this.state!=="closed"&&(this.tasks.push({key:s,func:$}),Et.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat(typeof s=="string"?s:"")))}runTask(s){if(this.state==="closed")return;let $=this.tasks.findIndex(_e=>_e.key===s);if($!==-1){let _e=this.tasks.splice($,1);Et.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat(typeof s=="string"?s:"")),_e[0].func()}}release(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,Et.debug("[macro-task-queue] is closed."))}}function AT(j){return function(s,$,_e){var tt;let rt=(tt=_e.value)!==null&&tt!==void 0?tt:_e.get,it=function(){qm&&qm.state==="open"&&qm.runTask(j);for(var at=arguments.length,ct=new Array(at),dt=0;dt<at;dt++)ct[dt]=arguments[dt];return rt==null?void 0:rt.apply(this,...ct)};return _e.value?_e.value=it:_e.get=it,_e}}function Nw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function NT(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?Nw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):Nw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class dr extends Yo{get _source(){return this._trackSource}set _source(s){this._trackSource=s}get processorContext(){return this._processorContext}set processorContext(s){this._processorContext=s}get processorDestination(){return this._processorDestination}set processorDestination(s){this._processorDestination=s}get isPlaying(){return this._useAudioElement?Ps.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(s,$,_e,tt,rt){super(s,_e),gt(this,"trackMediaType","audio"),gt(this,"_encoderConfig",void 0),gt(this,"_trackSource",void 0),gt(this,"_enabled",!0),gt(this,"_volume",100),gt(this,"_useAudioElement",!1),gt(this,"_bypassWebAudio",!1),gt(this,"processor",void 0),gt(this,"_processorContext",void 0),gt(this,"_processorDestination",void 0),gt(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=$,this._getOriginVolumeLevel=!!tt;let it=()=>{this.processorContext=new cE(this._source.context,this.getTrackId(),"local"),this.processorDestination=new aE(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(ws.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})},at=rt&&ls()&&!hw();Ft("DISABLE_WEBAUDIO")?(this._source=new IT,this._useAudioElement=!0,this._bypassWebAudio=!0):at?this._source=new IT:(this._source=new CT(s,!1,this._getOriginVolumeLevel?s:void 0),Ft("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0)),it(),!Ft("DISABLE_WEBAUDIO")&&at&&(qm||(qm=new sU),qm).enqueue("INIT_WEBAUDIO",()=>{this._source=new CT(s,!1,this._getOriginVolumeLevel?s:void 0),Ft("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(this._useAudioElement=!0),it(),this.emit(Z_.UPDATE_TRACK_SOURCE)})}setVolume(s){Sr(s,"volume",0,1e3),this._volume=s,this._source.setVolume(s/100),this._useAudioElement&&Ps.setVolume(this.getTrackId(),s);try{if(this._bypassWebAudio)return void Et.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));let $=this._source.createOutputTrack();this._mediaStreamTrack!==$&&(this._mediaStreamTrack=$,Rr(this,yn.NEED_REPLACE_TRACK,this).then(()=>{Et.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(_e=>{Et.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),_e)}))}catch{}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(s){if(!this._useAudioElement||!k1()&&Ft("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new rn(Nt.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Ps.setSinkID(this.getTrackId(),s)}async setEnabled(s,$,_e){return this._setEnabled(s,$,_e)}async _setEnabled(s,$,_e){if(!_e){if(s===this._enabled)return;this.stateCheck("enabled",s)}if(Et.info("[".concat(this.getTrackId(),"] start setEnabled"),s),s){this._originMediaStreamTrack.enabled=!0;try{_e||(this._enabled=!0),await Rr(this,yn.NEED_ENABLE_TRACK,this),Et.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(s," success"))}catch(tt){throw _e||(this._enabled=!1),Et.error("[".concat(this.getTrackId(),"] setEnabled to true error"),tt.toString()),tt}}else{this._originMediaStreamTrack.enabled=!1,_e||(this._enabled=!1);try{await Rr(this,yn.NEED_DISABLE_TRACK,this)}catch(tt){throw _e||(this._enabled=!0),Et.error("[".concat(this.getTrackId(),"] setEnabled to false error"),tt.toString()),tt}}}async setMuted(s){s!==this._muted&&(this.stateCheck("muted",s),this._muted=s,this._originMediaStreamTrack.enabled=!s,Et.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(s)),s?await Rr(this,yn.NEED_MUTE_TRACK,this):await Rr(this,yn.NEED_UNMUTE_TRACK,this))}getStats(){return U1(()=>{Et.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning"),Ms(this,yn.GET_STATS)||NT({},ET)}setAudioFrameCallback(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!s)return this._source.removeAllListeners(ws.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer($),this._source.removeAllListeners(ws.ON_AUDIO_BUFFER),this._source.on(ws.ON_AUDIO_BUFFER,_e=>s(_e))}play(){Et.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Et.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Ps.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){Et.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Ps.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];Et.debug("[".concat(this.getTrackId(),"] update player source track")),s&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Ps.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(s,$){this._originMediaStreamTrack!==s&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),$&&this._originMediaStreamTrack.stop()),s.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=s,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:s,context:this.processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Rr(this,yn.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(s))}renewMediaStreamTrack(s){return Jt.resolve(void 0)}pipe(s){if(this._bypassWebAudio)throw new rn(Nt.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===s)return s;if(s._source)throw new rn(Nt.INVALID_OPERATION,"Processor ".concat(s.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=s,this.processor._source=this,s.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),s}unpipe(){var s;if(!this.processor)return;let $=this.processor;(s=this._source.processSourceNode)===null||s===void 0||s.disconnect(),this.processor._source=!1,this.processor=void 0,$.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(rs.ON_TRACK,async s=>{s?s!==this._mediaStreamTrack&&(this._mediaStreamTrack=s,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(s),await Rr(this,yn.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Rr(this,yn.NEED_REPLACE_TRACK,this))}),this.processorDestination.on(rs.ON_NODE,s=>{this._source.processedNode=s})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(rs.ON_TRACK),this.processorDestination.removeAllListeners(rs.ON_NODE)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Os.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Os.REQUEST_CONSTRAINTS)}}on([AT("INIT_WEBAUDIO"),bt("design:type",Object),bt("design:paramtypes",[Object])],dr.prototype,"_source",null),on([AT("INIT_WEBAUDIO"),bt("design:type",cE),bt("design:paramtypes",[cE])],dr.prototype,"processorContext",null),on([AT("INIT_WEBAUDIO"),bt("design:type",aE),bt("design:paramtypes",[aE])],dr.prototype,"processorDestination",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s],throttleTime:300}),bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",void 0)],dr.prototype,"setVolume",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],dr.prototype,"setPlaybackDevice",null),on([Lm("LocalAudioTrack","_enabledMutex"),xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean,Object,Boolean]),bt("design:returntype",Jt)],dr.prototype,"setEnabled",null),on([Lm("LocalAudioTrack","_enabledMutex"),xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean]),bt("design:returntype",Jt)],dr.prototype,"setMuted",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Object)],dr.prototype,"getStats",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[Object,Number]),bt("design:returntype",void 0)],dr.prototype,"setAudioFrameCallback",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],dr.prototype,"play",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],dr.prototype,"stop",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],dr.prototype,"close",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s.name]}),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Object)],dr.prototype,"pipe",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],dr.prototype,"unpipe",null);class _f extends dr{get __className__(){return"MicrophoneAudioTrack"}constructor(s,$,_e,tt){super(s,$.encoderConfig?Q_($.encoderConfig):{},tt,Ft("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),gt(this,"_config",void 0),gt(this,"_deviceName","default"),gt(this,"_constraints",void 0),gt(this,"_originalConstraints",void 0),gt(this,"_enabled",!0),this._config=$,this._constraints=_e,this._originalConstraints=_e,this._deviceName=s.label,typeof $.bypassWebAudio=="boolean"&&(this._bypassWebAudio=$.bypassWebAudio),(wm()||fS())&&Er.bindInterruptDetectorTrack(this),this.on(Z_.UPDATE_TRACK_SOURCE,()=>{this.bindProcessorContextEvents()}),hw()&&this.bindProcessorContextEvents()}async setDevice(s){if(Et.info("[".concat(this.getTrackId(),"] start set device to ").concat(s)),this._enabled)try{let $=await na.getDeviceById(s),_e={};_e.audio=NT({},this._constraints),_e.audio.deviceId={exact:s},this._originMediaStreamTrack.stop();let tt=null;try{tt=await Zs(_e,this.getTrackId())}catch(rt){throw Et.error("[".concat(this.getTrackId(),"] setDevice failed"),rt.toString()),tt=await Zs({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(tt.getAudioTracks()[0],!1),rt}await this._updateOriginMediaStreamTrack(tt.getAudioTracks()[0],!1),this._deviceName=$.label,this._config.microphoneId=s,this._constraints.deviceId={exact:s}}catch($){throw Et.error("[".concat(this.getTrackId(),"] setDevice error"),$.toString()),$}else try{let $=await na.getDeviceById(s);this._deviceName=$.label,this._config.microphoneId=s,this._constraints.deviceId={exact:s}}catch($){throw Et.error("[".concat(this.getTrackId(),"] setDevice error"),$.toString()),$}Et.info("[".concat(this.getTrackId(),"] set device to ").concat(s," success"))}async setEnabled(s,$,_e){if($)return Et.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(s);if(!_e){if(s===this._enabled)return;this.stateCheck("enabled",s)}if(Et.info("[".concat(this.getTrackId(),"] start setEnabled"),s),!s){var tt;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),(tt=this._source.clonedTrack)===null||tt===void 0||tt.stop(),_e||(this._enabled=!1);try{await Rr(this,yn.NEED_DISABLE_TRACK,this)}catch(at){throw Et.error("[".concat(this.getTrackId(),"] setEnabled false failed"),at.toString()),at}return}let rt=NT({},this._constraints),it=na.searchDeviceIdByName(this._deviceName);it&&!rt.deviceId&&(rt.deviceId=it);try{_e||(this._enabled=!0);let at=await Zs({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(at.getAudioTracks()[0],!1),await Rr(this,yn.NEED_ENABLE_TRACK,this)}catch(at){throw _e||(this._enabled=!1),Et.error("[".concat(this.getTrackId(),"] setEnabled true failed"),at.toString()),at}Et.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(wm()||fS())&&Er.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((ds()||pu())&&this._enabled&&!this._isClosed&&Er.duringInterruption){let s=async()=>{Er.off(wo.IOS_INTERRUPTION_END,s),this._enabled&&!this._isClosed&&(Et.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Er.on(wo.IOS_INTERRUPTION_END,s)}else Et.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(fp.TRACK_ENDED)}async renewMediaStreamTrack(s){let $=s||this._constraints,_e=na.searchDeviceIdByName(this._deviceName);if(_e&&!$.deviceId&&($.deviceId=_e),this._constraints=$,this._enabled){this._originMediaStreamTrack.stop();let tt=await Zs({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(tt.getAudioTracks()[0],!0)}}bindProcessorContextEvents(){this.processorContext.on(Os.REQUEST_UPDATE_CONSTRAINTS,async(s,$,_e)=>{try{let tt=Object.assign({},this._originalConstraints,...s);await this.renewMediaStreamTrack(tt),$()}catch(tt){_e(tt)}}),this.processorContext.on(Os.REQUEST_CONSTRAINTS,async s=>{s(this._originMediaStreamTrack.getSettings())})}}on([xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],_f.prototype,"setDevice",null),on([Lm("MicrophoneAudioTrack","_enabledMutex"),xn({argsMap:(j,s,$)=>[j.getTrackId(),s,$]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean,Boolean,Boolean]),bt("design:returntype",Jt)],_f.prototype,"setEnabled",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],_f.prototype,"close",null);class gp extends dr{get __className__(){return"BufferSourceAudioTrack"}constructor(s,$,_e,tt){super($.createOutputTrack(),_e,tt),gt(this,"source",void 0),gt(this,"_bufferSource",void 0),this.source=s,this._bufferSource=$,this._bufferSource.on(ws.AUDIO_SOURCE_STATE_CHANGE,rt=>{this.safeEmit(fp.SOURCE_STATE_CHANGE,rt)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(s){s&&this._bufferSource.updateOptions(s),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(s){this._bufferSource.seekAudioBuffer(s)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(s){Sr(s,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(s)}}on([xn({argsMap:(j,s)=>[j.getTrackId(),s,j.duration]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",void 0)],gp.prototype,"startProcessAudioBuffer",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],gp.prototype,"pauseProcessAudioBuffer",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",void 0)],gp.prototype,"seekAudioBuffer",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],gp.prototype,"resumeProcessAudioBuffer",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],gp.prototype,"stopProcessAudioBuffer",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],gp.prototype,"close",null),on([xn({argsMap:j=>[j.getTrackId()]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",void 0)],gp.prototype,"setAudioBufferPlaybackSpeed",null);class ho extends dr{get __className__(){return"MixingAudioTrack"}get isActive(){for(let s of this.trackList)if(s._enabled&&!s._isClosed&&!s.muted)return!0;return!1}constructor(){let s=Km().createMediaStreamDestination();super(s.stream.getAudioTracks()[0],void 0,Ir(8,"track-mix-")),gt(this,"trackList",void 0),gt(this,"destNode",void 0);try{this._mediaStreamTrack=this._source.createOutputTrack()}catch{}this.destNode=s,this.trackList=[]}hasAudioTrack(s){return this.trackList.indexOf(s)!==-1}addAudioTrack(s){this.trackList.indexOf(s)===-1?(Et.debug("add ".concat(s.getTrackId()," to mixing track")),s._source.outputNode.connect(this.destNode),this.trackList.push(s),this.updateEncoderConfig()):Et.debug("track ".concat(s.getTrackId()," is already added"))}removeAudioTrack(s){if(this.trackList.indexOf(s)!==-1){Et.debug("remove ".concat(s.getTrackId()," from mixing track"));try{s._source.outputNode.disconnect(this.destNode)}catch{}T_(this.trackList,s),this.updateEncoderConfig()}}updateEncoderConfig(){let s={};this.trackList.forEach($=>{$._encoderConfig&&(($._encoderConfig.bitrate||0)>(s.bitrate||0)&&(s.bitrate=$._encoderConfig.bitrate),($._encoderConfig.sampleRate||0)>(s.sampleRate||0)&&(s.sampleRate=$._encoderConfig.sampleRate),($._encoderConfig.sampleSize||0)>(s.sampleSize||0)&&(s.sampleSize=$._encoderConfig.sampleSize),$._encoderConfig.stereo&&(s.stereo=!0))}),this._encoderConfig=s}_updateRtpTransceiver(s){this._rtpTransceiver!==s&&(this._rtpTransceiver=s,this.trackList.forEach($=>{$ instanceof ho?$.emit(Hm.TRANSCEIVER_UPDATED,s):$._updateRtpTransceiver(s)}))}}function lE(j){let s={};j.facingMode&&(s.facingMode=j.facingMode),j.cameraId&&(s.deviceId={exact:j.cameraId});let $=mu(j.encoderConfig);return $.width!=null&&(s.width=$.width),$.height!=null&&(s.height=$.height),!QI()&&$.frameRate&&(s.frameRate=$.frameRate),ir().name===lr.EDGE&&typeof s.frameRate=="object"&&(s.frameRate.max=60),br()&&(s.frameRate={ideal:30,max:30}),s}function ww(j){let s={};if(QI()||(j.AGC!==void 0&&(s.autoGainControl=j.AGC),j.AEC!==void 0&&(s.echoCancellation=j.AEC),j.ANS!==void 0&&(s.noiseSuppression=j.ANS,k1()&&j.ANS&&(s.googHighpassFilter=j.ANS))),j.encoderConfig){let $=Q_(j.encoderConfig);s.channelCount=$.stereo?2:1,s.sampleRate=$.sampleRate,s.sampleSize=$.sampleSize}return j.microphoneId&&(s.deviceId={exact:j.microphoneId}),y_()&&(s.sampleRate=void 0),s}class aU extends gw{set currentState(s){s!==this._currentState&&(this._currentState=s,this.safeEmit(ws.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),gt(this,"audioBuffer",void 0),gt(this,"sourceNode",void 0),gt(this,"startPlayTime",0),gt(this,"startPlayOffset",0),gt(this,"pausePlayTime",0),gt(this,"options",void 0),gt(this,"currentLoopCount",0),gt(this,"currentPlaybackSpeed",100),gt(this,"_currentState","stopped"),this.audioBuffer=s,this.options=$,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?this.currentState==="stopped"?0:this.currentState==="paused"?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(s){this.currentState==="stopped"?(this.options=s,this.startPlayOffset=this.options.startPlayTime||0):Et.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&this.currentState==="playing"&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(s){this.sourceNode&&(this.sourceNode.onended=null,this.currentState==="playing"&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),this.currentState==="playing"?(this.startPlayOffset=s,this.startSourceNode()):this.currentState==="paused"&&(this.pausePlayTime=s))}resumeProcessAudioBuffer(){this.currentState==="paused"&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch{}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(s){this.sourceNode&&(this.currentState==="playing"&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=s/100),this.currentPlaybackSpeed=s}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){let s=this.context.createBufferSource();return s.buffer=this.audioBuffer,s.loop=!!this.options.loop,s.connect(this.outputNode),s.playbackRate.value=this.currentPlaybackSpeed/100,s}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}let Ow=new Map;async function cU(j,s){let $=null;if(typeof j=="string"){let tt=Ow.get(j);if(tt)return Et.debug("use cached audio resource: ",j),tt;try{$=(await tu(()=>As.get(j,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(rt){throw new rn(Nt.FETCH_AUDIO_FILE_FAILED,rt.toString())}}else $=await new Jt((tt,rt)=>{let it=new FileReader;it.onload=at=>{at.target?tt(at.target.result):rt(new rn(Nt.READ_LOCAL_AUDIO_FILE_ERROR))},it.onerror=()=>{rt(new rn(Nt.READ_LOCAL_AUDIO_FILE_ERROR))},it.readAsArrayBuffer(j)});let _e=await function(tt){let rt=Km();return new Jt((it,at)=>{rt.decodeAudioData(tt,ct=>{it(ct)},ct=>{at(new rn(Nt.DECODE_AUDIO_FILE_FAILED,ct.toString()))})})}($);return typeof j=="string"&&s&&Ow.set(j,_e),_e}let wT=j=>{let s=document.createElement("canvas");return s.width=2,s.height=2,new Jt(($,_e)=>{s.toBlob(async tt=>{if(s.remove(),tt){let rt=await Pw(tt);$({buffer:rt,width:s.width,height:s.height})}else _e(new rn(Nt.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},j,1)})},Pw=async j=>{let s=await j.arrayBuffer();return new Uint8Array(s)},Uu=new class extends Fr{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),gt(this,"_lastHiddenTime",0),gt(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),Et.debug("document visibility went ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)})}};function Dw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function xw(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?Dw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):Dw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class OT{get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(s){s!==this._videoElementStatus&&(Et.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(s)),this._videoElementStatus=s)}constructor(s){gt(this,"trackId",void 0),gt(this,"config",void 0),gt(this,"onFirstVideoFrameDecoded",void 0),gt(this,"freezeTimeCounterList",[]),gt(this,"renderFreezeAccTime",0),gt(this,"isKeepLastFrame",!1),gt(this,"timeUpdatedCount",0),gt(this,"freezeTime",0),gt(this,"playbackTime",0),gt(this,"lastTimeUpdatedTime",0),gt(this,"autoplayFailed",!1),gt(this,"videoTrack",void 0),gt(this,"videoElement",void 0),gt(this,"cacheVideoElement",void 0),gt(this,"videoElementCheckInterval",void 0),gt(this,"_videoElementStatus",os.NONE),gt(this,"isGettingVideoDimensions",!1),gt(this,"startGetVideoDimensions",()=>{let $=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return Et.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout($,500)};!this.isGettingVideoDimensions&&$()}),gt(this,"autoResumeAfterInterruption",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&Er.curState==="running"&&(Et.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(HI())),XI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),gt(this,"handleVideoEvents",$=>{switch($.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=os.PLAYING;break;case"loadeddata":if(this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch{}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=os.CANPLAY;break;case"stalled":this.videoElementStatus=os.STALLED;break;case"suspend":this.videoElementStatus=os.SUSPEND;break;case"pause":this.videoElementStatus=os.PAUSED,ds()||pu()||ls()&&this.autoplayFailed||!this.videoTrack||this.videoTrack.readyState!=="live"||(Et.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=os.WAITING;break;case"abort":this.videoElementStatus=os.ABORT;break;case"ended":this.videoElementStatus=os.ENDED;break;case"emptied":this.videoElementStatus=os.EMPTIED;break;case"error":{this.videoElementStatus=os.ERROR;let _e=this.videoElement.error;_e&&Et.error("[".concat(this.trackId,"] media error, code: ").concat(_e.code,", message: ").concat(_e.message));break}case"timeupdate":{let _e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=_e);let tt=_e-this.lastTimeUpdatedTime,rt=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=_e,Uu.lastVisibleTime<Uu.lastHiddenTime||rt<Uu.lastHiddenTime||rt<Uu.lastVisibleTime)return;for(tt>Ft("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=tt),this.playbackTime+=tt;this.playbackTime>=6e3;){this.playbackTime-=6e3;let it=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(it),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}}),gt(this,"autoResumeAfterInterruptionOnIOS15_16",()=>{this.videoTrack&&this.videoTrack.readyState==="live"&&(Et.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(HI())),XI()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))}),this.trackId=s.trackId,this.config=s,s.element instanceof HTMLVideoElement?this.videoElement=s.element:this.videoElement=document.createElement("video"),Er.on(wo.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Er.on(wo.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var s;return(s=this.videoElement.parentElement)!==null&&s!==void 0?s:void 0}updateConfig(s){this.config=s,this.trackId=s.trackId,s.element!==this.videoElement&&(this.destroy(),this.videoElement=s.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(s){this.videoTrack!==s&&(this.videoTrack=s,this.initVideoElement())}play(s){let $=this.videoElement.play();$&&$.catch&&$.catch(tt=>{s&&bw(s,"video",tt.message,this.trackId),tt.name==="NotAllowedError"?(Et.warning("detected video element autoplay failed",tt),this.autoplayFailed=!0,this.handleAutoPlayFailed()):Et.warning("[".concat(this.trackId,"] play warning: "),tt)});let _e=ir();if((_e.name==="Safari"&&Number(_e.version)===15||wm())&&$&&$.then){let tt=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};$.then(tt).catch(tt)}}getCurrentFrame(){let s=document.createElement("canvas");s.width=this.videoElement.videoWidth,s.height=this.videoElement.videoHeight;let $=s.getContext("2d");if(!$)return Et.error("create canvas context failed!"),new ImageData(2,2);$.drawImage(this.videoElement,0,0,s.width,s.height);let _e=$.getImageData(0,0,s.width,s.height);return s.remove(),_e}async getCurrentFrameToUint8Array(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,_e=document.createElement("canvas");_e.width=this.videoElement.videoWidth,_e.height=this.videoElement.videoHeight;let tt=_e.getContext("2d");return tt?(tt.drawImage(this.videoElement,0,0,_e.width,_e.height),new Jt((rt,it)=>{_e.toBlob(async at=>{if(_e.remove(),at){let ct=await Pw(at);rt({buffer:ct,width:_e.width,height:_e.height})}else it(new rn(Nt.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))},s,$<0?.1:$>1?1:$)})):await wT(s)}destroy(){Er.off(wo.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),Er.off(wo.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}initVideoElement(){if(this.videoElementStatus=os.INIT,!this.videoElementCheckInterval&&(Lw.forEach(rt=>{this.videoElement.addEventListener(rt,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{(function(rt){return rt!==document.body&&document.body.contains(rt)})(this.videoElement)||(this.videoElementStatus=os.DESTROYED)},1e3),Ft("ENABLE_VIDEO_FRAME_CALLBACK"))){var s,$;let rt,it=(at,ct)=>{if(this.videoElementStatus===os.PLAYING){if(rt){let pt=ct.presentationTime-rt.presentationTime;pt>Ft("VIDEO_FREEZE_DURATION")&&Uu.lastVisibleTime>=Uu.lastHiddenTime&&rt.timestamp>Uu.lastVisibleTime&&rt.timestamp>Uu.lastHiddenTime&&(this.renderFreezeAccTime+=pt)}rt=xw(xw({},ct),{},{timestamp:at})}var dt,ut;Ft("ENABLE_VIDEO_FRAME_CALLBACK")&&((dt=(ut=this.videoElement).requestVideoFrameCallback)===null||dt===void 0||dt.call(ut,it))};(s=($=this.videoElement).requestVideoFrameCallback)===null||s===void 0||s.call($,it)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),y_()&&(this.videoElement.poster="noposter");let _e=ir();_e.name==="Safari"&&Number(_e.version)===15||wm()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,br()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,br()&&this.videoElement.load());let tt=this.videoElement.play();tt!==void 0&&tt.catch(rt=>{Et.debug("[".concat(this.trackId,"] playback interrupted"),rt.toString())})}resetVideoElement(){Lw.forEach(s=>{this.videoElement&&this.videoElement.removeEventListener(s,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=os.NONE}handleAutoPlayFailed(){let s=$=>{$.preventDefault(),this.videoElement.play().then(()=>{Et.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))}).catch(_e=>{Et.error(_e)}),this.autoplayFailed=!1,$1()?document.body.removeEventListener("click",s,!0):(document.body.removeEventListener("touchstart",s,!0),document.body.removeEventListener("mousedown",s,!0))};$1()?document.body.addEventListener("click",s,!0):(document.body.addEventListener("touchstart",s,!0),document.body.addEventListener("mousedown",s,!0)),Tw()}}let Lw=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class kw extends OT{constructor(s){super(s),gt(this,"container",void 0),gt(this,"slot",void 0),this.slot=s.element,this.updateConfig(s)}updateConfig(s){this.config=s,this.trackId=s.trackId;let $=s.element;$!==this.slot&&(this.destroy(),this.slot=$),this.createElements()}updateVideoTrack(s){this.videoTrack!==s&&(this.videoTrack=s,this.createElements())}play(s){var $;($=this.container)!==null&&$!==void 0&&$.contains(this.videoElement)&&super.play(s)}getCurrentFrame(){var s;return(s=this.container)!==null&&s!==void 0&&s.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(s){var $;let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return($=this.container)!==null&&$!==void 0&&$.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(s,_e):await wT(s)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch{}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",Ft("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var s;!this.container||(s=this.container)!==null&&s!==void 0&&s.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var s;if((s=this.container)!==null&&s!==void 0&&s.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch{}this.videoElement=document.createElement("video")}}resetVideoElement(){var s;(s=this.container)!==null&&s!==void 0&&s.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}function $w(j){return new Jt((s,$)=>{let _e=!1,tt=document.createElement("video");tt.setAttribute("autoplay",""),tt.setAttribute("muted",""),tt.muted=!0,tt.autoplay=!0,tt.setAttribute("playsinline",""),tt.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(tt);let rt=ds()?"canplay":"playing";tt.addEventListener(rt,()=>{let it=tt.videoWidth,at=tt.videoHeight;!it&&br()||(_e=!0,tt.srcObject=null,tt.remove(),s([it,at]))}),tt.srcObject=new MediaStream([j]),tt.play().catch(b_),setTimeout(()=>{_e||(tt.srcObject=null,tt.remove(),s([tt.videoWidth,tt.videoHeight]))},4e3)})}let lU=async(j,s,$)=>{let _e=function(it){let at=[];for(let ct=0;ct<it.length;ct+=2)at.push(parseInt(it.slice(ct,ct+2),16));return Uint8Array.from(at)}(function(it){let at="0123456789abcdef";function ct(cn){let hn,Mn="";for(hn=0;hn<=3;hn++)Mn+=at.charAt(cn>>8*hn+4&15)+at.charAt(cn>>8*hn&15);return Mn}function dt(cn,hn){let Mn=(65535&cn)+(65535&hn);return(cn>>16)+(hn>>16)+(Mn>>16)<<16|65535&Mn}function ut(cn,hn,Mn,Gn,Or,Eo){return dt(function($r,Vs){return $r<<Vs|$r>>>32-Vs}(dt(dt(hn,cn),dt(Gn,Eo)),Or),Mn)}function pt(cn,hn,Mn,Gn,Or,Eo,$r){return ut(hn&Mn|~hn&Gn,cn,hn,Or,Eo,$r)}function mt(cn,hn,Mn,Gn,Or,Eo,$r){return ut(hn&Gn|Mn&~Gn,cn,hn,Or,Eo,$r)}function yt(cn,hn,Mn,Gn,Or,Eo,$r){return ut(hn^Mn^Gn,cn,hn,Or,Eo,$r)}function At(cn,hn,Mn,Gn,Or,Eo,$r){return ut(Mn^(hn|~Gn),cn,hn,Or,Eo,$r)}let Ct=function(cn){let hn,Mn=1+(cn.length+8>>6),Gn=new Array(16*Mn);for(hn=0;hn<16*Mn;hn++)Gn[hn]=0;for(hn=0;hn<cn.length;hn++)Gn[hn>>2]|=cn.charCodeAt(hn)<<hn%4*8;return Gn[hn>>2]|=128<<hn%4*8,Gn[16*Mn-2]=8*cn.length,Gn}(it),It,kt,Vt,Bt,en,zt=1732584193,Yt=-271733879,Qt=-1732584194,Xt=271733878;for(It=0;It<Ct.length;It+=16)kt=zt,Vt=Yt,Bt=Qt,en=Xt,zt=pt(zt,Yt,Qt,Xt,Ct[It+0],7,-680876936),Xt=pt(Xt,zt,Yt,Qt,Ct[It+1],12,-389564586),Qt=pt(Qt,Xt,zt,Yt,Ct[It+2],17,606105819),Yt=pt(Yt,Qt,Xt,zt,Ct[It+3],22,-1044525330),zt=pt(zt,Yt,Qt,Xt,Ct[It+4],7,-176418897),Xt=pt(Xt,zt,Yt,Qt,Ct[It+5],12,1200080426),Qt=pt(Qt,Xt,zt,Yt,Ct[It+6],17,-1473231341),Yt=pt(Yt,Qt,Xt,zt,Ct[It+7],22,-45705983),zt=pt(zt,Yt,Qt,Xt,Ct[It+8],7,1770035416),Xt=pt(Xt,zt,Yt,Qt,Ct[It+9],12,-1958414417),Qt=pt(Qt,Xt,zt,Yt,Ct[It+10],17,-42063),Yt=pt(Yt,Qt,Xt,zt,Ct[It+11],22,-1990404162),zt=pt(zt,Yt,Qt,Xt,Ct[It+12],7,1804603682),Xt=pt(Xt,zt,Yt,Qt,Ct[It+13],12,-40341101),Qt=pt(Qt,Xt,zt,Yt,Ct[It+14],17,-1502002290),Yt=pt(Yt,Qt,Xt,zt,Ct[It+15],22,1236535329),zt=mt(zt,Yt,Qt,Xt,Ct[It+1],5,-165796510),Xt=mt(Xt,zt,Yt,Qt,Ct[It+6],9,-1069501632),Qt=mt(Qt,Xt,zt,Yt,Ct[It+11],14,643717713),Yt=mt(Yt,Qt,Xt,zt,Ct[It+0],20,-373897302),zt=mt(zt,Yt,Qt,Xt,Ct[It+5],5,-701558691),Xt=mt(Xt,zt,Yt,Qt,Ct[It+10],9,38016083),Qt=mt(Qt,Xt,zt,Yt,Ct[It+15],14,-660478335),Yt=mt(Yt,Qt,Xt,zt,Ct[It+4],20,-405537848),zt=mt(zt,Yt,Qt,Xt,Ct[It+9],5,568446438),Xt=mt(Xt,zt,Yt,Qt,Ct[It+14],9,-1019803690),Qt=mt(Qt,Xt,zt,Yt,Ct[It+3],14,-187363961),Yt=mt(Yt,Qt,Xt,zt,Ct[It+8],20,1163531501),zt=mt(zt,Yt,Qt,Xt,Ct[It+13],5,-1444681467),Xt=mt(Xt,zt,Yt,Qt,Ct[It+2],9,-51403784),Qt=mt(Qt,Xt,zt,Yt,Ct[It+7],14,1735328473),Yt=mt(Yt,Qt,Xt,zt,Ct[It+12],20,-1926607734),zt=yt(zt,Yt,Qt,Xt,Ct[It+5],4,-378558),Xt=yt(Xt,zt,Yt,Qt,Ct[It+8],11,-2022574463),Qt=yt(Qt,Xt,zt,Yt,Ct[It+11],16,1839030562),Yt=yt(Yt,Qt,Xt,zt,Ct[It+14],23,-35309556),zt=yt(zt,Yt,Qt,Xt,Ct[It+1],4,-1530992060),Xt=yt(Xt,zt,Yt,Qt,Ct[It+4],11,1272893353),Qt=yt(Qt,Xt,zt,Yt,Ct[It+7],16,-155497632),Yt=yt(Yt,Qt,Xt,zt,Ct[It+10],23,-1094730640),zt=yt(zt,Yt,Qt,Xt,Ct[It+13],4,681279174),Xt=yt(Xt,zt,Yt,Qt,Ct[It+0],11,-358537222),Qt=yt(Qt,Xt,zt,Yt,Ct[It+3],16,-722521979),Yt=yt(Yt,Qt,Xt,zt,Ct[It+6],23,76029189),zt=yt(zt,Yt,Qt,Xt,Ct[It+9],4,-640364487),Xt=yt(Xt,zt,Yt,Qt,Ct[It+12],11,-421815835),Qt=yt(Qt,Xt,zt,Yt,Ct[It+15],16,530742520),Yt=yt(Yt,Qt,Xt,zt,Ct[It+2],23,-995338651),zt=At(zt,Yt,Qt,Xt,Ct[It+0],6,-198630844),Xt=At(Xt,zt,Yt,Qt,Ct[It+7],10,1126891415),Qt=At(Qt,Xt,zt,Yt,Ct[It+14],15,-1416354905),Yt=At(Yt,Qt,Xt,zt,Ct[It+5],21,-57434055),zt=At(zt,Yt,Qt,Xt,Ct[It+12],6,1700485571),Xt=At(Xt,zt,Yt,Qt,Ct[It+3],10,-1894986606),Qt=At(Qt,Xt,zt,Yt,Ct[It+10],15,-1051523),Yt=At(Yt,Qt,Xt,zt,Ct[It+1],21,-2054922799),zt=At(zt,Yt,Qt,Xt,Ct[It+8],6,1873313359),Xt=At(Xt,zt,Yt,Qt,Ct[It+15],10,-30611744),Qt=At(Qt,Xt,zt,Yt,Ct[It+6],15,-1560198380),Yt=At(Yt,Qt,Xt,zt,Ct[It+13],21,1309151649),zt=At(zt,Yt,Qt,Xt,Ct[It+4],6,-145523070),Xt=At(Xt,zt,Yt,Qt,Ct[It+11],10,-1120210379),Qt=At(Qt,Xt,zt,Yt,Ct[It+2],15,718787259),Yt=At(Yt,Qt,Xt,zt,Ct[It+9],21,-343485551),zt=dt(zt,kt),Yt=dt(Yt,Vt),Qt=dt(Qt,Bt),Xt=dt(Xt,en);return ct(zt)+ct(Yt)+ct(Qt)+ct(Xt)}(""+s+$)).slice(0,16),tt=_e.slice(0,12),rt=await window.crypto.subtle.importKey("raw",_e,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:tt},rt,j))},Mw=async(j,s,$)=>await lU(j.buffer,s,$);function Uw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function _a(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?Uw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):Uw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class Hn extends Yo{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==os.PLAYING)}get processorContext(){return this._processorContext}set processorContext(s){this._processorContext=s}get __className__(){return"LocalVideoTrack"}constructor(s,$,_e,tt,rt,it){if(super(s,rt),gt(this,"trackMediaType","video"),gt(this,"_player",void 0),gt(this,"isUseScaleResolutionDownBy",!1),gt(this,"_videoVisibleTimer",null),gt(this,"_statsTimer",null),gt(this,"_previousVideoVisibleStatus",void 0),gt(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),gt(this,"_encoderConfig",void 0),gt(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),gt(this,"_optimizationMode",void 0),gt(this,"_videoHeight",void 0),gt(this,"_videoWidth",void 0),gt(this,"_forceBitrateLimit",void 0),gt(this,"_enabled",!0),gt(this,"processorDestination",void 0),gt(this,"_processorContext",void 0),ls()){let{width:at,height:ct}=s.getSettings();this._videoWidth=at,this._videoHeight=ct}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=$,this._scalabilityMode=_e,this._optimizationMode=tt,this._hints=it||[],this._hints.indexOf(wr.SCREEN_TRACK)===-1)this.updateBitrateFromProfile();else if(function(at,ct,dt){let ut=ir();return!(ut.name!==at||!ut.osVersion)&&(dt?Number(ut.version)>=ct&&Number(ut.version)<=dt:Number(ut.version)===ct)}(lr.CHROME,115)&&__().indexOf("Windows")!==-1){let at=function(ct,dt){if("VideoFrame"in window&&"TransformStream"in window&&vr().supportWebRTCInsertableStream){let ut=new MediaStreamTrackProcessor(ct),pt=new MediaStreamTrackGenerator({kind:"video"}),mt,yt,At=Date.now(),Ct=()=>{It&&(clearInterval(It),It=void 0),mt&&(mt.close(),mt=void 0),ct.stop(),yt=void 0,pt.removeEventListener("ended",Ct)},It=window.setInterval(()=>{if(yt&&mt&&Date.now()-At>(dt??1e3))try{pt.readyState==="live"?yt.enqueue(mt.clone()):Ct()}catch{Ct()}},dt??1e3),kt=new TransformStream({transform:(Vt,Bt)=>{pt.readyState==="live"?(yt=Bt,At=Date.now(),mt===void 0?(mt=Vt,Bt.enqueue(Vt.clone())):(Bt.enqueue(mt),mt=Vt)):Vt.close()}});return pt.addEventListener("ended",Ct),ut.readable.pipeThrough(kt).pipeTo(pt.writable),pt}}(s);at&&(Et.info("local screen video track begin to inject frame"),this._mediaStreamTrack=at)}$&&this._hints.indexOf(wr.CUSTOM_TRACK)!==-1&&this.setEncoderConfiguration($),this.processorContext=new Aw(this.getTrackId(),"local"),this.processorDestination=new Iw(this.processorContext),this.bindProcessorDestinationEvents()}play(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof s=="string"){let tt=document.getElementById(s);tt?s=tt:(Et.warning("[".concat(this.getTrackId(),'] can not find "#').concat(s,'" element, use document.body')),s=document.body)}Et.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(s instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify($));let _e=_a(_a(_a({},this._getDefaultPlayerConfig()),$),{},{trackId:this.getTrackId(),element:s});this._player?this._player.updateConfig(_e):(s instanceof HTMLVideoElement?this._player=new OT(_e):this._player=new kw(_e),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let tt=this.getVideoElementVisibleStatus();this.safeEmit(fp.VIDEO_ELEMENT_VISIBLE_STATUS,tt)}catch{}},Ft("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._statsTimer&&(this.isUseScaleResolutionDownBy=!1,window.clearInterval(this._statsTimer),this._statsTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Et.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(s,$){if(!$){if(s===this._enabled)return;this.stateCheck("enabled",s)}if(Et.info("[".concat(this.getTrackId(),"] start setEnabled"),s),!s){this._originMediaStreamTrack.enabled=!1;try{await Rr(this,yn.NEED_DISABLE_TRACK,this)}catch(_e){throw Et.error("[".concat(this.getTrackId(),"] setEnabled to false error"),_e.toString()),_e}return $||(this._enabled=!1),void Et.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Rr(this,yn.NEED_ENABLE_TRACK,this)}catch(_e){throw Et.error("[".concat(this.getTrackId(),"] setEnabled to true error"),_e.toString()),_e}Et.info("[".concat(this.getTrackId(),"] setEnabled to true success")),$||(this._enabled=!0)}async setMuted(s){s!==this._muted&&(this.stateCheck("muted",s),this._muted=s,this._originMediaStreamTrack.enabled=!s,Et.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(s)),s?await Rr(this,yn.NEED_MUTE_TRACK,this):await Rr(this,yn.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(s,$){if(!this._enabled)throw new rn(Nt.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(s==="720p_auto"?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),s=mu(s),this._forceBitrateLimit&&(s.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:s.bitrateMax,s.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:s.bitrateMin),s.width||s.height||s.frameRate){let _e=lE({encoderConfig:s});(ls()||ds()||pu())&&(_e.deviceId=void 0),Et.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(s),JSON.stringify(_e));try{await this._originMediaStreamTrack.applyConstraints(_e),this.updateMediaStreamTrackResolution()}catch(tt){let rt=new rn(Nt.UNEXPECTED_ERROR,tt.toString());throw Et.error("[".concat(this.getTrackId(),"] applyConstraints error"),rt.toString()),rt}}this._encoderConfig=s,this._hints.indexOf(wr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Rr(this,yn.NEED_UPDATE_VIDEO_ENCODER,this)}catch(_e){return _e.throw(Et)}}getStats(){return U1(()=>{Et.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning"),Ms(this,yn.GET_STATS)||_a({},yT)}async setBeautyEffect(s){Et.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(s,$):await wT(s)}async setBitrateLimit(s){if(Et.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(s))),s){this._forceBitrateLimit=s,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<s.max_bitrate?this._encoderConfig.bitrateMax:s.max_bitrate:this._encoderConfig.bitrateMax=s.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=s.min_bitrate);try{await Rr(this,yn.NEED_UPDATE_VIDEO_ENCODER,this)}catch($){return $.throw(Et)}}}async setOptimizationMode(s){if(s!=="motion"&&s!=="detail"&&s!=="balanced")return void Et.error(Nt.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");let $=this._optimizationMode;try{this._optimizationMode=s,await Rr(this,yn.SET_OPTIMIZATION_MODE,this)}catch(_e){throw this._optimizationMode=$,Et.error("[".concat(this.getTrackId(),"] set optimization mode failed"),_e.toString()),_e}Et.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(s,")"))}setScalabiltyMode(s){if(s.numSpatialLayers===1&&s.numTemporalLayers!==1)return Et.error(Nt.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=s,Et.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(s,")"))}updateMediaStreamTrackResolution(){$w(this._originMediaStreamTrack).then(s=>{let[$,_e]=s;this._videoHeight=_e,this._videoWidth=$}).catch(b_)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(s){if(!this._enabled)throw new rn(Nt.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");Et.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(s)),s=mu(s),this._forceBitrateLimit&&(s.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:s.bitrateMax,s.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:s.bitrateMin),this._encoderConfig=s,this._hints.indexOf(wr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Rr(this,yn.NEED_UPDATE_VIDEO_ENCODER,this)}catch($){return $.throw(Et)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;let{width:s,height:$,frameRate:_e}=this.getMediaStreamTrackSettings();if(!s||!$||!_e)return;let[tt,rt]=function(it,at,ct,dt){let ut,pt=200*Math.pow(ct/15,.6)*Math.pow(it*at/640/360,.75),mt=pt;if(dt==="STANDARD_BITRATE")ut=4*pt;else{if(dt!=="COMPATIABLE_BITRATE")return;ut=2*pt}return[Math.floor(ut),Math.floor(mt)]}(s,$,_e,Ft("BITRATE_ADAPTER_TYPE"))||[void 0,void 0];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=rt,this._encoderConfig.bitrateMax=tt,Et.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(s,", h: ").concat($,", fps: ").concat(_e,"] => [brMax: ").concat(tt,", brMin: ").concat(rt,"]")))}getVideoElementVisibleStatus(){try{var s,$;let _e=this==null||(s=this._player)===null||s===void 0?void 0:s.getContainerElement(),tt={track:this,element:this==null||($=this._player)===null||$===void 0?void 0:$.getVideoElement(),slot:_e==null?void 0:_e.parentElement},{element:rt,slot:it}=tt;if(this.isPlaying&&rt instanceof HTMLVideoElement&&it instanceof HTMLElement){let at=nA.checkOneElementVisible(rt),ct=Object.assign({},at);if(ct.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=ct.visible;let dt=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});ct.visible?dt.onSuccess("Video is visible"):dt.onSuccess("Invisible because of ".concat(ct.reason))}return ct}return}catch(_e){throw new rn(Nt.GET_VIDEO_ELEMENT_VISIBLE_ERROR,_e.message)}}async renewMediaStreamTrack(s){}pipe(s){if(this.processor===s)return s;if(s._source)throw new rn(Nt.INVALID_OPERATION,"Processor ".concat(s.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=s,this.processor._source=this,s.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),s}unpipe(){if(!this.processor)return;let s=this.processor;this.processor._source=void 0,this.processor=void 0,s.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(s){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],_e=this._encoderConfig;s&&(_e=_a(_a({},_e),mu(s))),_e=Hp(_e);let tt=Ir(8,"track-video-cloned-"),rt=new Hn($?this._mediaStreamTrack.clone():this._mediaStreamTrack,_e,Hp(this._scalabilityMode),this._optimizationMode,tt,Hp(this._hints));return s&&_e&&rt.setEncoderConfiguration(_e),Et.debug("clone video track from ".concat(this.getTrackId()," to ").concat(tt,", clone ").concat($)),rt}async replaceTrack(s,$){if(!(s instanceof MediaStreamTrack))throw new rn(Nt.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if(s.kind!=="video")throw new rn(Nt.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(s,$,!0),this.updateMediaStreamTrackResolution()}startMonitorStats(){if(!ls()&&!ds())return;this._statsTimer&&window.clearInterval(this._statsTimer);let s=2,$=X_[s],_e=-1,tt=Date.now(),rt=it=>{it>2||it<0||(tt=Date.now(),$=X_[it],this.setSenderConfiguration($))};this.isUseScaleResolutionDownBy=!0,this._statsTimer=window.setInterval(()=>{let it=this.getStats(),at=Ms(this,yn.GET_RTC_STATS);if(it.sendPackets>0&&at){_e===-1&&(_e=Date.now());let ct=Date.now();if(ct-_e<1e3||ct-tt<Ft("PROFILE_SWITCH_INTERVAL"))return;let dt=it.sendFrameRate,ut=.6*$.frameRate,pt=.9*$.frameRate;typeof dt=="number"&&dt>0&&dt<ut?s>0&&(s--,rt(s),Et.debug("[".concat(this.getTrackId(),"] step down for fps ").concat(dt,", switchProfile to ").concat(s))):at.OutgoingAvailableBandwidth<$.bitrateMin?s>0&&(s--,rt(s),Et.debug("[".concat(this.getTrackId(),"] step down for OutgoingAvailableBandwidth ").concat(at.OutgoingAvailableBandwidth,", bitrateMin ").concat($.bitrateMin,", switchProfile to ").concat(s))):typeof dt=="number"&&dt>pt&&s<X_.length-1&&at.OutgoingAvailableBandwidth>1.2*X_[s+1].bitrateMin&&(s++,rt(s),Et.debug("[".concat(this.getTrackId(),"] step up for fps ").concat(dt,", OutgoingAvailableBandwidth ").concat(at.OutgoingAvailableBandwidth,", switchProfile to ").concat(s)))}},Ft("CHECK_LOCAL_STATS_INTERVAL"))}bindProcessorDestinationEvents(){this.processorDestination.on(rs.ON_TRACK,async s=>{s?s!==this._mediaStreamTrack&&(this._mediaStreamTrack=s,this._updatePlayerSource(),await Rr(this,yn.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Rr(this,yn.NEED_REPLACE_TRACK,this))})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(rs.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(Os.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(Os.REQUEST_CONSTRAINTS)}}on([xn({argsMap:(j,s,$)=>[j.getTrackId(),typeof s=="string"?s:s instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",$]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Object,Object]),bt("design:returntype",void 0)],Hn.prototype,"play",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Hn.prototype,"stop",null),on([Lm("LocalVideoTrack","_enabledMutex"),xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean,Boolean]),bt("design:returntype",Jt)],Hn.prototype,"setEnabled",null),on([Lm("LocalVideoTrack","_enabledMutex"),xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean]),bt("design:returntype",Jt)],Hn.prototype,"setMuted",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Object,Boolean]),bt("design:returntype",Jt)],Hn.prototype,"setEncoderConfiguration",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Object)],Hn.prototype,"getStats",null),on([xn({argsMap:(j,s,$)=>[j.getTrackId(),s,$]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean,Object]),bt("design:returntype",Jt)],Hn.prototype,"setBeautyEffect",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",ImageData)],Hn.prototype,"getCurrentFrameData",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[String,Number]),bt("design:returntype",Jt)],Hn.prototype,"getCurrentFrameImage",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],Hn.prototype,"setBitrateLimit",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Hn.prototype,"setOptimizationMode",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",void 0)],Hn.prototype,"setScalabiltyMode",null),on([ro(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Hn.prototype,"updateMediaStreamTrackResolution",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s.name]}),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Object)],Hn.prototype,"pipe",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Hn.prototype,"unpipe",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Hn.prototype,"close",null),on([xn({argsMap:(j,s,$)=>[j.getTrackId(),s.label,$]}),bt("design:type",Function),bt("design:paramtypes",[MediaStreamTrack,Boolean]),bt("design:returntype",Jt)],Hn.prototype,"replaceTrack",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Hn.prototype,"startMonitorStats",null);class mp extends Hn{get __className__(){return"CameraVideoTrack"}constructor(s,$,_e,tt,rt,it){super(s,mu($.encoderConfig),tt,rt,it),gt(this,"_config",void 0),gt(this,"_originalConstraints",void 0),gt(this,"_constraints",void 0),gt(this,"_enabled",!0),gt(this,"_deviceName","default"),gt(this,"tryResumeVideoForIOS15_16WeChat",async()=>{(wm()||fS())&&!function(){let at=ir();if(at.os!==To.IOS||!at.osVersion)return!1;let ct=at.osVersion.split(".");return Number(ct[0])===15&&Number(ct[1])>=2}()&&JI()&&this._enabled&&!this._isClosed&&(Et.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())}),this._config=$,this._originalConstraints=_e,this._constraints=_e,this._deviceName=s.label,this._encoderConfig=mu(this._config.encoderConfig),Er.on(wo.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Er.on(wo.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(s){return typeof s=="string"?this._setDeviceById(s):s.deviceId?this._setDeviceById(s.deviceId):s.facingMode?this._setDeviceByFacingModel(s.facingMode):void 0}async _setDeviceById(s){if(Et.info("[".concat(this.getTrackId(),"] set device to ").concat(s)),this._enabled)try{let $=await na.getDeviceById(s),_e={};_e.video=_a({},this._constraints),_e.video.deviceId={exact:s},_e.video.facingMode=void 0,this._originMediaStreamTrack.stop();let tt=null;try{tt=await Zs(_e,this.getTrackId())}catch(rt){throw Et.error("[".concat(this.getTrackId(),"] setDevice failed"),rt.toString()),tt=await Zs({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(tt.getVideoTracks()[0],!1),rt}await this._updateOriginMediaStreamTrack(tt.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=$.label,this._config.cameraId=s,this._constraints.deviceId={exact:s}}catch($){throw Et.error("[".concat(this.getTrackId(),"] setDevice error"),$.toString()),$}else try{let $=await na.getDeviceById(s);this._deviceName=$.label,this._config.cameraId=s,this._constraints.deviceId={exact:s}}catch($){throw Et.error("[".concat(this.getTrackId(),"] setDevice error"),$.toString()),$}Et.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(s){Et.info("[".concat(this.getTrackId(),"] set facingMode ").concat(s));let $={video:_a(_a({},this._constraints),{},{deviceId:void 0,facingMode:{exact:s}})};if(this._enabled){this._originMediaStreamTrack.stop();let _e=null;try{_e=await Zs($,this.getTrackId())}catch(tt){throw Et.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),tt.toString()),_e=await Zs({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(_e.getVideoTracks()[0],!1),tt}await this._updateOriginMediaStreamTrack(_e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=s,this._config.cameraId=void 0,this._constraints=_a({},$.video),Et.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(s,$){if(!$){if(s===this._enabled)return;this.stateCheck("enabled",s)}if(Et.info("[".concat(this.getTrackId(),"] start setEnabled"),s),s){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{let _e=await Zs({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(_e.getVideoTracks()[0],!1)}await Rr(this,yn.NEED_ENABLE_TRACK,this)}catch(_e){throw Et.error("[".concat(this.getTrackId(),"] setEnabled true error"),_e.toString()),_e}this.updateMediaStreamTrackResolution(),Et.info("[".concat(this.getTrackId(),"] setEnabled to true success")),$||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),$||(this._enabled=!1);try{await Rr(this,yn.NEED_DISABLE_TRACK,this)}catch(_e){throw Et.error("[".concat(this.getTrackId(),"] setEnabled to false error"),_e.toString()),_e}Et.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(s,$){if(!this._enabled)throw new rn(Nt.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");s==="720p_auto"?this.startMonitorStats():this._statsTimer&&(window.clearInterval(this._statsTimer),this._statsTimer=null),s=mu(s),this._forceBitrateLimit&&(s.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:s.bitrateMax,s.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:s.bitrateMin);let _e=Nr(this._config);_e.encoderConfig=s;let tt=lE(_e);(ls()||ds()||pu())&&(tt.deviceId=void 0),Et.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(s),JSON.stringify(tt));try{await this._originMediaStreamTrack.applyConstraints(tt),this.updateMediaStreamTrackResolution()}catch(rt){let it=new rn(Nt.UNEXPECTED_ERROR,rt.toString());throw Et.error("[".concat(this.getTrackId(),"] applyConstraints error"),it.toString()),it}this._config=_e,this._constraints=tt,this._originalConstraints=tt,this._encoderConfig=s,this._hints.indexOf(wr.SCREEN_TRACK)===-1&&this.updateBitrateFromProfile();try{await Rr(this,yn.NEED_UPDATE_VIDEO_ENCODER,this)}catch(rt){return rt.throw(Et)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((ds()||pu())&&this._enabled&&!this._isClosed&&Er.duringInterruption){let s=async()=>{Er.off(wo.IOS_INTERRUPTION_END,s),this._enabled&&!this._isClosed&&(Et.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};Er.on(wo.IOS_INTERRUPTION_END,s)}else Et.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(fp.TRACK_ENDED)}async renewMediaStreamTrack(s){let $=s||this._constraints,_e=na.searchDeviceIdByName(this._deviceName);if(_e&&!$.deviceId&&($.deviceId={exact:_e}),this._enabled){let tt=await Zs({video:$},this.getTrackId());this._constraints=$,await this._updateOriginMediaStreamTrack(tt.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),Er.off(wo.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),Er.off(wo.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(s){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],_e=this._encoderConfig;s&&(_e=_a(_a({},_e),mu(s))),_e=Hp(_e);let tt=Ir(8,"track-cam-cloned-"),rt=new mp($?this._mediaStreamTrack.clone():this._mediaStreamTrack,Hp(_a(_a({},this._config),{},{encoderConfig:_e})),Hp(this._constraints),Hp(this._scalabilityMode),this._optimizationMode,tt);return s&&_e&&rt.setEncoderConfiguration(_e),Et.debug("clone track from ".concat(this.getTrackId()," to ").concat(tt,", clone ").concat($)),rt}bindProcessorContextEvents(){this.processorContext.on(Os.REQUEST_UPDATE_CONSTRAINTS,async(s,$,_e)=>{try{let tt=Object.assign({},this._originalConstraints,...s);await this.renewMediaStreamTrack(tt),$()}catch(tt){_e(tt)}}),this.processorContext.on(Os.REQUEST_CONSTRAINTS,async s=>{s(this._originMediaStreamTrack.getSettings())})}}function Fw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function dE(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?Fw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):Fw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function PT(j,s,$,_e){$.optimizationMode&&(_e&&_e.width&&_e.height?($.encoderConfig=dE(dE({},_e),{},{bitrateMin:_e.bitrateMin,bitrateMax:_e.bitrateMax}),$.optimizationMode!=="motion"&&$.optimizationMode!=="detail"||(s.contentHint=$.optimizationMode,s.contentHint===$.optimizationMode?Et.debug("[".concat(j,"] set content hint to"),$.optimizationMode):Et.debug("[".concat(j,"] set content hint failed")))):Et.warning("[".concat(j,"] can not apply optimization mode bitrate config, no encoderConfig")))}function jw(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function uE(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?jw(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):jw(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}on([xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],mp.prototype,"setDevice",null),on([Lm("CameraVideoTrack","_enabledMutex"),xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Boolean,Boolean]),bt("design:returntype",Jt)],mp.prototype,"setEnabled",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s]}),ro(),bt("design:type",Function),bt("design:paramtypes",[Object,Boolean]),bt("design:returntype",Jt)],mp.prototype,"setEncoderConfiguration",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],mp.prototype,"close",null);class Vw extends dw{getUserId(){return this._userId}constructor(s,$,_e,tt){super(s,"track-".concat(s.kind,"-").concat($,"-").concat(tt.clientId,"_").concat(Ir(5,""))),gt(this,"_userId",void 0),gt(this,"_uintId",void 0),gt(this,"_isDestroyed",!1),gt(this,"store",void 0),gt(this,"processor",void 0),this._userId=$,this._uintId=_e,this.store=tt}_updateOriginMediaStreamTrack(s){this._originMediaStreamTrack=s,this._mediaStreamTrack=s,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,Et.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}class _u extends Vw{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==os.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(s,$,_e,tt){super(s,$,_e,tt),gt(this,"_videoVisibleTimer",null),gt(this,"_previousVideoVisibleStatus",void 0),gt(this,"_clearPreviousVideoVisibleStatus",()=>this._previousVideoVisibleStatus=void 0),gt(this,"trackMediaType","video"),gt(this,"_videoWidth",void 0),gt(this,"_videoHeight",void 0),gt(this,"_player",void 0),gt(this,"processorDestination",void 0),gt(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new Aw(this.getTrackId(),"remote"),this.processorDestination=new Iw(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return U1(()=>{Et.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),Ms(this,yn.GET_STATS)||uE({},lw)}play(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof s=="string"){let tt=document.getElementById(s);tt?s=tt:(Et.warning("[".concat(this.getTrackId(),'] can not find "#').concat(s,'" element, use document.body')),s=document.body)}Et.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(s instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify($));let _e=uE(uE({fit:"cover"},$),{},{trackId:this.getTrackId(),element:s});this._player?this._player.updateConfig(_e):(s instanceof HTMLVideoElement?this._player=new OT(_e):this._player=new kw(_e),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(Qp.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval(()=>{try{let tt=this.getVideoElementVisibleStatus();this.safeEmit(Qp.VIDEO_ELEMENT_VISIBLE_STATUS,tt)}catch{}},Ft("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Et.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){$w(this._originMediaStreamTrack).then(s=>{let[$,_e]=s;this._videoHeight=_e,this._videoWidth=$}).catch(b_)}_updatePlayerSource(){Et.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var s,$;let _e=this==null||(s=this._player)===null||s===void 0?void 0:s.getContainerElement(),tt={track:this,element:this==null||($=this._player)===null||$===void 0?void 0:$.getVideoElement(),slot:_e==null?void 0:_e.parentElement},{element:rt,slot:it}=tt;if(this.isPlaying&&rt instanceof HTMLVideoElement&&it instanceof HTMLElement){let at=nA.checkOneElementVisible(rt),ct=Object.assign({},at);if(ct.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=ct.visible;let dt=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});ct.visible?dt.onSuccess("Video is visible"):dt.onSuccess("Invisible because of ".concat(ct.reason))}return ct}return}catch(_e){throw new rn(Nt.GET_VIDEO_ELEMENT_VISIBLE_ERROR,_e.message)}}pipe(s){if(this.processor===s)return s;if(s._source)throw new rn(Nt.INVALID_OPERATION,"Processor ".concat(s.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=s,this.processor._source=this,s.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),s}unpipe(){if(!this.processor)return;let s=this.processor;this.processor._source=void 0,this.processor=void 0,s.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(rs.ON_TRACK,async s=>{s?s!==this._mediaStreamTrack&&(this._mediaStreamTrack=s,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(rs.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}}on([xn({argsMap:(j,s,$)=>[j.getTrackId(),typeof s=="string"?s:s instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",$]}),bt("design:type",Function),bt("design:paramtypes",[Object,Object]),bt("design:returntype",void 0)],_u.prototype,"play",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],_u.prototype,"stop",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s.name]}),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Object)],_u.prototype,"pipe",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],_u.prototype,"unpipe",null);class zl extends Vw{get isPlaying(){return this._useAudioElement?Ps.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(s,$,_e,tt){super(s,$,_e,tt),gt(this,"trackMediaType","audio"),gt(this,"_source",void 0),gt(this,"_useAudioElement",!0),gt(this,"_volume",100),gt(this,"processorContext",void 0),gt(this,"processorDestination",void 0),gt(this,"_played",!1),gt(this,"_bypassWebAudio",!1),Ft("DISABLE_WEBAUDIO")?(this._source=new IT,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new CT(s,!0),Ft("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(ws.RECEIVE_TRACK_BUFFER,()=>{this.safeEmit(Qp.FIRST_FRAME_DECODED)}),this.processorContext=new cE(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new aE(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(ws.UPDATE_SOURCE,()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})})}setAudioFrameCallback(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4096;if(!s)return this._source.removeAllListeners(ws.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer($),this._source.removeAllListeners(ws.ON_AUDIO_BUFFER),this._source.on(ws.ON_AUDIO_BUFFER,_e=>s(_e))}setVolume(s){this._volume=s,this._useAudioElement?Ps.setVolume(this.getTrackId(),s):this._source.setVolume(s/100)}async setPlaybackDevice(s){if(!this._useAudioElement||!k1()&&Ft("RESTRICTION_SET_PLAYBACK_DEVICE"))throw new rn(Nt.NOT_SUPPORTED,"your browser does not support setting the audio output device");await Ps.setSinkID(this.getTrackId(),s)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return U1(()=>{Et.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),Ms(this,yn.GET_STATS)||uE({},cw)}play(){Et.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(Et.debug("[".concat(this.getTrackId(),"] use audio element to play")),Ps.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){Et.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?Ps.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];Et.debug("[".concat(this.getTrackId(),"] update player source track")),s&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Ps.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(s){if(this._bypassWebAudio)throw new rn(Nt.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===s)return s;if(s._source)throw new rn(Nt.INVALID_OPERATION,"Processor ".concat(s.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=s,this.processor._source=this,s.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),s}unpipe(){var s;if(this._bypassWebAudio)throw new rn(Nt.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;let $=this.processor;(s=this._source.processSourceNode)===null||s===void 0||s.disconnect(),this.processor._source=!1,this.processor=void 0,$.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(rs.ON_TRACK,async s=>{s?s!==this._mediaStreamTrack&&(this._mediaStreamTrack=s,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(s)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}),this.processorDestination.on(rs.ON_NODE,s=>{this._source.processedNode=s;let $=!s;this._useAudioElement!==$&&(this._played?(this.stop(),this._useAudioElement=$,this.play()):this._useAudioElement=$)})}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(rs.ON_TRACK),this.processorDestination.removeAllListeners(rs.ON_NODE)}}on([xn({argsMap:(j,s)=>[j.getTrackId(),s],throttleTime:300}),bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",void 0)],zl.prototype,"setVolume",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s]}),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],zl.prototype,"setPlaybackDevice",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],zl.prototype,"play",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],zl.prototype,"stop",null),on([xn({argsMap:(j,s)=>[j.getTrackId(),s.name]}),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Object)],zl.prototype,"pipe",null),on([xn({argsMap:j=>[j.getTrackId()]}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],zl.prototype,"unpipe",null);function Xm(j){let s=j.length;for(;--s>=0;)j[s]=0}let DT=256,Bw=286,z1=30,K1=15,xT=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),pE=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),dU=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Gw=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fu=new Array(576);Xm(Fu);let Y1=new Array(60);Xm(Y1);let q1=new Array(512);Xm(q1);let X1=new Array(256);Xm(X1);let LT=new Array(29);Xm(LT);let hE=new Array(z1);function kT(j,s,$,_e,tt){this.static_tree=j,this.extra_bits=s,this.extra_base=$,this.elems=_e,this.max_length=tt,this.has_stree=j&&j.length}let Ww,Hw,zw;function $T(j,s){this.dyn_tree=j,this.max_code=0,this.stat_desc=s}Xm(hE);let Kw=j=>j<256?q1[j]:q1[256+(j>>>7)],J1=(j,s)=>{j.pending_buf[j.pending++]=255&s,j.pending_buf[j.pending++]=s>>>8&255},ba=(j,s,$)=>{j.bi_valid>16-$?(j.bi_buf|=s<<j.bi_valid&65535,J1(j,j.bi_buf),j.bi_buf=s>>16-j.bi_valid,j.bi_valid+=$-16):(j.bi_buf|=s<<j.bi_valid&65535,j.bi_valid+=$)},Eu=(j,s,$)=>{ba(j,$[2*s],$[2*s+1])},Yw=(j,s)=>{let $=0;do $|=1&j,j>>>=1,$<<=1;while(--s>0);return $>>>1},qw=(j,s,$)=>{let _e=new Array(16),tt,rt,it=0;for(tt=1;tt<=K1;tt++)it=it+$[tt-1]<<1,_e[tt]=it;for(rt=0;rt<=s;rt++){let at=j[2*rt+1];at!==0&&(j[2*rt]=Yw(_e[at]++,at))}},Xw=j=>{let s;for(s=0;s<Bw;s++)j.dyn_ltree[2*s]=0;for(s=0;s<z1;s++)j.dyn_dtree[2*s]=0;for(s=0;s<19;s++)j.bl_tree[2*s]=0;j.dyn_ltree[512]=1,j.opt_len=j.static_len=0,j.sym_next=j.matches=0},Jw=j=>{j.bi_valid>8?J1(j,j.bi_buf):j.bi_valid>0&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0},Qw=(j,s,$,_e)=>{let tt=2*s,rt=2*$;return j[tt]<j[rt]||j[tt]===j[rt]&&_e[s]<=_e[$]},MT=(j,s,$)=>{let _e=j.heap[$],tt=$<<1;for(;tt<=j.heap_len&&(tt<j.heap_len&&Qw(s,j.heap[tt+1],j.heap[tt],j.depth)&&tt++,!Qw(s,_e,j.heap[tt],j.depth));)j.heap[$]=j.heap[tt],$=tt,tt<<=1;j.heap[$]=_e},Zw=(j,s,$)=>{let _e,tt,rt,it,at=0;if(j.sym_next!==0)do _e=255&j.pending_buf[j.sym_buf+at++],_e+=(255&j.pending_buf[j.sym_buf+at++])<<8,tt=j.pending_buf[j.sym_buf+at++],_e===0?Eu(j,tt,s):(rt=X1[tt],Eu(j,rt+DT+1,s),it=xT[rt],it!==0&&(tt-=LT[rt],ba(j,tt,it)),_e--,rt=Kw(_e),Eu(j,rt,$),it=pE[rt],it!==0&&(_e-=hE[rt],ba(j,_e,it)));while(at<j.sym_next);Eu(j,256,s)},UT=(j,s)=>{let $=s.dyn_tree,_e=s.stat_desc.static_tree,tt=s.stat_desc.has_stree,rt=s.stat_desc.elems,it,at,ct,dt=-1;for(j.heap_len=0,j.heap_max=573,it=0;it<rt;it++)$[2*it]!==0?(j.heap[++j.heap_len]=dt=it,j.depth[it]=0):$[2*it+1]=0;for(;j.heap_len<2;)ct=j.heap[++j.heap_len]=dt<2?++dt:0,$[2*ct]=1,j.depth[ct]=0,j.opt_len--,tt&&(j.static_len-=_e[2*ct+1]);for(s.max_code=dt,it=j.heap_len>>1;it>=1;it--)MT(j,$,it);ct=rt;do it=j.heap[1],j.heap[1]=j.heap[j.heap_len--],MT(j,$,1),at=j.heap[1],j.heap[--j.heap_max]=it,j.heap[--j.heap_max]=at,$[2*ct]=$[2*it]+$[2*at],j.depth[ct]=(j.depth[it]>=j.depth[at]?j.depth[it]:j.depth[at])+1,$[2*it+1]=$[2*at+1]=ct,j.heap[1]=ct++,MT(j,$,1);while(j.heap_len>=2);j.heap[--j.heap_max]=j.heap[1],((ut,pt)=>{let mt=pt.dyn_tree,yt=pt.max_code,At=pt.stat_desc.static_tree,Ct=pt.stat_desc.has_stree,It=pt.stat_desc.extra_bits,kt=pt.stat_desc.extra_base,Vt=pt.stat_desc.max_length,Bt,en,zt,Yt,Qt,Xt,cn=0;for(Yt=0;Yt<=K1;Yt++)ut.bl_count[Yt]=0;for(mt[2*ut.heap[ut.heap_max]+1]=0,Bt=ut.heap_max+1;Bt<573;Bt++)en=ut.heap[Bt],Yt=mt[2*mt[2*en+1]+1]+1,Yt>Vt&&(Yt=Vt,cn++),mt[2*en+1]=Yt,en>yt||(ut.bl_count[Yt]++,Qt=0,en>=kt&&(Qt=It[en-kt]),Xt=mt[2*en],ut.opt_len+=Xt*(Yt+Qt),Ct&&(ut.static_len+=Xt*(At[2*en+1]+Qt)));if(cn!==0){do{for(Yt=Vt-1;ut.bl_count[Yt]===0;)Yt--;ut.bl_count[Yt]--,ut.bl_count[Yt+1]+=2,ut.bl_count[Vt]--,cn-=2}while(cn>0);for(Yt=Vt;Yt!==0;Yt--)for(en=ut.bl_count[Yt];en!==0;)zt=ut.heap[--Bt],zt>yt||(mt[2*zt+1]!==Yt&&(ut.opt_len+=(Yt-mt[2*zt+1])*mt[2*zt],mt[2*zt+1]=Yt),en--)}})(j,s),qw($,dt,j.bl_count)},e4=(j,s,$)=>{let _e,tt,rt=-1,it=s[1],at=0,ct=7,dt=4;for(it===0&&(ct=138,dt=3),s[2*($+1)+1]=65535,_e=0;_e<=$;_e++)tt=it,it=s[2*(_e+1)+1],++at<ct&&tt===it||(at<dt?j.bl_tree[2*tt]+=at:tt!==0?(tt!==rt&&j.bl_tree[2*tt]++,j.bl_tree[32]++):at<=10?j.bl_tree[34]++:j.bl_tree[36]++,at=0,rt=tt,it===0?(ct=138,dt=3):tt===it?(ct=6,dt=3):(ct=7,dt=4))},t4=(j,s,$)=>{let _e,tt,rt=-1,it=s[1],at=0,ct=7,dt=4;for(it===0&&(ct=138,dt=3),_e=0;_e<=$;_e++)if(tt=it,it=s[2*(_e+1)+1],!(++at<ct&&tt===it)){if(at<dt)do Eu(j,tt,j.bl_tree);while(--at!=0);else tt!==0?(tt!==rt&&(Eu(j,tt,j.bl_tree),at--),Eu(j,16,j.bl_tree),ba(j,at-3,2)):at<=10?(Eu(j,17,j.bl_tree),ba(j,at-3,3)):(Eu(j,18,j.bl_tree),ba(j,at-11,7));at=0,rt=tt,it===0?(ct=138,dt=3):tt===it?(ct=6,dt=3):(ct=7,dt=4)}},n4=!1,r4=(j,s,$,_e)=>{ba(j,0+(_e?1:0),3),Jw(j),J1(j,$),J1(j,~$),$&&j.pending_buf.set(j.window.subarray(s,s+$),j.pending),j.pending+=$};var uU=j=>{n4||((()=>{let s,$,_e,tt,rt,it=new Array(16);for(_e=0,tt=0;tt<28;tt++)for(LT[tt]=_e,s=0;s<1<<xT[tt];s++)X1[_e++]=tt;for(X1[_e-1]=tt,rt=0,tt=0;tt<16;tt++)for(hE[tt]=rt,s=0;s<1<<pE[tt];s++)q1[rt++]=tt;for(rt>>=7;tt<z1;tt++)for(hE[tt]=rt<<7,s=0;s<1<<pE[tt]-7;s++)q1[256+rt++]=tt;for($=0;$<=K1;$++)it[$]=0;for(s=0;s<=143;)Fu[2*s+1]=8,s++,it[8]++;for(;s<=255;)Fu[2*s+1]=9,s++,it[9]++;for(;s<=279;)Fu[2*s+1]=7,s++,it[7]++;for(;s<=287;)Fu[2*s+1]=8,s++,it[8]++;for(qw(Fu,287,it),s=0;s<z1;s++)Y1[2*s+1]=5,Y1[2*s]=Yw(s,5);Ww=new kT(Fu,xT,257,Bw,K1),Hw=new kT(Y1,pE,0,z1,K1),zw=new kT(new Array(0),dU,0,19,7)})(),n4=!0),j.l_desc=new $T(j.dyn_ltree,Ww),j.d_desc=new $T(j.dyn_dtree,Hw),j.bl_desc=new $T(j.bl_tree,zw),j.bi_buf=0,j.bi_valid=0,Xw(j)},pU=(j,s,$,_e)=>{let tt,rt,it=0;j.level>0?(j.strm.data_type===2&&(j.strm.data_type=(at=>{let ct,dt=4093624447;for(ct=0;ct<=31;ct++,dt>>>=1)if(1&dt&&at.dyn_ltree[2*ct]!==0)return 0;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return 1;for(ct=32;ct<DT;ct++)if(at.dyn_ltree[2*ct]!==0)return 1;return 0})(j)),UT(j,j.l_desc),UT(j,j.d_desc),it=(at=>{let ct;for(e4(at,at.dyn_ltree,at.l_desc.max_code),e4(at,at.dyn_dtree,at.d_desc.max_code),UT(at,at.bl_desc),ct=18;ct>=3&&at.bl_tree[2*Gw[ct]+1]===0;ct--);return at.opt_len+=3*(ct+1)+5+5+4,ct})(j),tt=j.opt_len+3+7>>>3,rt=j.static_len+3+7>>>3,rt<=tt&&(tt=rt)):tt=rt=$+5,$+4<=tt&&s!==-1?r4(j,s,$,_e):j.strategy===4||rt===tt?(ba(j,2+(_e?1:0),3),Zw(j,Fu,Y1)):(ba(j,4+(_e?1:0),3),((at,ct,dt,ut)=>{let pt;for(ba(at,ct-257,5),ba(at,dt-1,5),ba(at,ut-4,4),pt=0;pt<ut;pt++)ba(at,at.bl_tree[2*Gw[pt]+1],3);t4(at,at.dyn_ltree,ct-1),t4(at,at.dyn_dtree,dt-1)})(j,j.l_desc.max_code+1,j.d_desc.max_code+1,it+1),Zw(j,j.dyn_ltree,j.dyn_dtree)),Xw(j),_e&&Jw(j)},hU=(j,s,$)=>(j.pending_buf[j.sym_buf+j.sym_next++]=s,j.pending_buf[j.sym_buf+j.sym_next++]=s>>8,j.pending_buf[j.sym_buf+j.sym_next++]=$,s===0?j.dyn_ltree[2*$]++:(j.matches++,s--,j.dyn_ltree[2*(X1[$]+DT+1)]++,j.dyn_dtree[2*Kw(s)]++),j.sym_next===j.sym_end),fU={_tr_init:uU,_tr_stored_block:r4,_tr_flush_block:pU,_tr_tally:hU,_tr_align:j=>{ba(j,2,3),Eu(j,256,Fu),(s=>{s.bi_valid===16?(J1(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)})(j)}},Q1=(j,s,$,_e)=>{let tt=65535&j|0,rt=j>>>16&65535|0,it=0;for(;$!==0;){it=$>2e3?2e3:$,$-=it;do tt=tt+s[_e++]|0,rt=rt+tt|0;while(--it);tt%=65521,rt%=65521}return tt|rt<<16|0};let gU=new Uint32Array((()=>{let j,s=[];for(var $=0;$<256;$++){j=$;for(var _e=0;_e<8;_e++)j=1&j?3988292384^j>>>1:j>>>1;s[$]=j}return s})());var _s=(j,s,$,_e)=>{let tt=gU,rt=_e+$;j^=-1;for(let it=_e;it<rt;it++)j=j>>>8^tt[255&(j^s[it])];return-1^j},_g={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Jm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:mU,_tr_stored_block:FT,_tr_flush_block:_U,_tr_tally:_p,_tr_align:EU}=fU,{Z_NO_FLUSH:Ep,Z_PARTIAL_FLUSH:yU,Z_FULL_FLUSH:SU,Z_FINISH:Kl,Z_BLOCK:o4,Z_OK:vs,Z_STREAM_END:i4,Z_STREAM_ERROR:yu,Z_DATA_ERROR:TU,Z_BUF_ERROR:jT,Z_DEFAULT_COMPRESSION:vU,Z_FILTERED:CU,Z_HUFFMAN_ONLY:fE,Z_RLE:bU,Z_FIXED:RU,Z_DEFAULT_STRATEGY:IU,Z_UNKNOWN:AU,Z_DEFLATED:gE}=Jm,VT=286,NU=30,wU=19,OU=2*VT+1,PU=15,em=258,Su=262,Qm=42,tm=113,Z1=666,nm=(j,s)=>(j.msg=_g[s],s),s4=j=>2*j-(j>4?9:0),yp=j=>{let s=j.length;for(;--s>=0;)j[s]=0},DU=j=>{let s,$,_e,tt=j.w_size;s=j.hash_size,_e=s;do $=j.head[--_e],j.head[_e]=$>=tt?$-tt:0;while(--s);s=tt,_e=s;do $=j.prev[--_e],j.prev[_e]=$>=tt?$-tt:0;while(--s)},Sp=(j,s,$)=>(s<<j.hash_shift^$)&j.hash_mask,Il=j=>{let s=j.state,$=s.pending;$>j.avail_out&&($=j.avail_out),$!==0&&(j.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+$),j.next_out),j.next_out+=$,s.pending_out+=$,j.total_out+=$,j.avail_out-=$,s.pending-=$,s.pending===0&&(s.pending_out=0))},Al=(j,s)=>{_U(j,j.block_start>=0?j.block_start:-1,j.strstart-j.block_start,s),j.block_start=j.strstart,Il(j.strm)},Xr=(j,s)=>{j.pending_buf[j.pending++]=s},e0=(j,s)=>{j.pending_buf[j.pending++]=s>>>8&255,j.pending_buf[j.pending++]=255&s},BT=(j,s,$,_e)=>{let tt=j.avail_in;return tt>_e&&(tt=_e),tt===0?0:(j.avail_in-=tt,s.set(j.input.subarray(j.next_in,j.next_in+tt),$),j.state.wrap===1?j.adler=Q1(j.adler,s,tt,$):j.state.wrap===2&&(j.adler=_s(j.adler,s,tt,$)),j.next_in+=tt,j.total_in+=tt,tt)},a4=(j,s)=>{let $,_e,tt=j.max_chain_length,rt=j.strstart,it=j.prev_length,at=j.nice_match,ct=j.strstart>j.w_size-Su?j.strstart-(j.w_size-Su):0,dt=j.window,ut=j.w_mask,pt=j.prev,mt=j.strstart+em,yt=dt[rt+it-1],At=dt[rt+it];j.prev_length>=j.good_match&&(tt>>=2),at>j.lookahead&&(at=j.lookahead);do if($=s,dt[$+it]===At&&dt[$+it-1]===yt&&dt[$]===dt[rt]&&dt[++$]===dt[rt+1]){rt+=2,$++;do;while(dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&dt[++rt]===dt[++$]&&rt<mt);if(_e=em-(mt-rt),rt=mt-em,_e>it){if(j.match_start=s,it=_e,_e>=at)break;yt=dt[rt+it-1],At=dt[rt+it]}}while((s=pt[s&ut])>ct&&--tt!=0);return it<=j.lookahead?it:j.lookahead},Zm=j=>{let s=j.w_size,$,_e,tt;do{if(_e=j.window_size-j.lookahead-j.strstart,j.strstart>=s+(s-Su)&&(j.window.set(j.window.subarray(s,s+s-_e),0),j.match_start-=s,j.strstart-=s,j.block_start-=s,j.insert>j.strstart&&(j.insert=j.strstart),DU(j),_e+=s),j.strm.avail_in===0)break;if($=BT(j.strm,j.window,j.strstart+j.lookahead,_e),j.lookahead+=$,j.lookahead+j.insert>=3)for(tt=j.strstart-j.insert,j.ins_h=j.window[tt],j.ins_h=Sp(j,j.ins_h,j.window[tt+1]);j.insert&&(j.ins_h=Sp(j,j.ins_h,j.window[tt+3-1]),j.prev[tt&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=tt,tt++,j.insert--,!(j.lookahead+j.insert<3)););}while(j.lookahead<Su&&j.strm.avail_in!==0)},c4=(j,s)=>{let $,_e,tt,rt=j.pending_buf_size-5>j.w_size?j.w_size:j.pending_buf_size-5,it=0,at=j.strm.avail_in;do{if($=65535,tt=j.bi_valid+42>>3,j.strm.avail_out<tt||(tt=j.strm.avail_out-tt,_e=j.strstart-j.block_start,$>_e+j.strm.avail_in&&($=_e+j.strm.avail_in),$>tt&&($=tt),$<rt&&($===0&&s!==Kl||s===Ep||$!==_e+j.strm.avail_in)))break;it=s===Kl&&$===_e+j.strm.avail_in?1:0,FT(j,0,0,it),j.pending_buf[j.pending-4]=$,j.pending_buf[j.pending-3]=$>>8,j.pending_buf[j.pending-2]=~$,j.pending_buf[j.pending-1]=~$>>8,Il(j.strm),_e&&(_e>$&&(_e=$),j.strm.output.set(j.window.subarray(j.block_start,j.block_start+_e),j.strm.next_out),j.strm.next_out+=_e,j.strm.avail_out-=_e,j.strm.total_out+=_e,j.block_start+=_e,$-=_e),$&&(BT(j.strm,j.strm.output,j.strm.next_out,$),j.strm.next_out+=$,j.strm.avail_out-=$,j.strm.total_out+=$)}while(it===0);return at-=j.strm.avail_in,at&&(at>=j.w_size?(j.matches=2,j.window.set(j.strm.input.subarray(j.strm.next_in-j.w_size,j.strm.next_in),0),j.strstart=j.w_size,j.insert=j.strstart):(j.window_size-j.strstart<=at&&(j.strstart-=j.w_size,j.window.set(j.window.subarray(j.w_size,j.w_size+j.strstart),0),j.matches<2&&j.matches++,j.insert>j.strstart&&(j.insert=j.strstart)),j.window.set(j.strm.input.subarray(j.strm.next_in-at,j.strm.next_in),j.strstart),j.strstart+=at,j.insert+=at>j.w_size-j.insert?j.w_size-j.insert:at),j.block_start=j.strstart),j.high_water<j.strstart&&(j.high_water=j.strstart),it?4:s!==Ep&&s!==Kl&&j.strm.avail_in===0&&j.strstart===j.block_start?2:(tt=j.window_size-j.strstart,j.strm.avail_in>tt&&j.block_start>=j.w_size&&(j.block_start-=j.w_size,j.strstart-=j.w_size,j.window.set(j.window.subarray(j.w_size,j.w_size+j.strstart),0),j.matches<2&&j.matches++,tt+=j.w_size,j.insert>j.strstart&&(j.insert=j.strstart)),tt>j.strm.avail_in&&(tt=j.strm.avail_in),tt&&(BT(j.strm,j.window,j.strstart,tt),j.strstart+=tt,j.insert+=tt>j.w_size-j.insert?j.w_size-j.insert:tt),j.high_water<j.strstart&&(j.high_water=j.strstart),tt=j.bi_valid+42>>3,tt=j.pending_buf_size-tt>65535?65535:j.pending_buf_size-tt,rt=tt>j.w_size?j.w_size:tt,_e=j.strstart-j.block_start,(_e>=rt||(_e||s===Kl)&&s!==Ep&&j.strm.avail_in===0&&_e<=tt)&&($=_e>tt?tt:_e,it=s===Kl&&j.strm.avail_in===0&&$===_e?1:0,FT(j,j.block_start,$,it),j.block_start+=$,Il(j.strm)),it?3:1)},GT=(j,s)=>{let $,_e;for(;;){if(j.lookahead<Su){if(Zm(j),j.lookahead<Su&&s===Ep)return 1;if(j.lookahead===0)break}if($=0,j.lookahead>=3&&(j.ins_h=Sp(j,j.ins_h,j.window[j.strstart+3-1]),$=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),$!==0&&j.strstart-$<=j.w_size-Su&&(j.match_length=a4(j,$)),j.match_length>=3)if(_e=_p(j,j.strstart-j.match_start,j.match_length-3),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=3){j.match_length--;do j.strstart++,j.ins_h=Sp(j,j.ins_h,j.window[j.strstart+3-1]),$=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart;while(--j.match_length!=0);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=Sp(j,j.ins_h,j.window[j.strstart+1]);else _e=_p(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(_e&&(Al(j,!1),j.strm.avail_out===0))return 1}return j.insert=j.strstart<2?j.strstart:2,s===Kl?(Al(j,!0),j.strm.avail_out===0?3:4):j.sym_next&&(Al(j,!1),j.strm.avail_out===0)?1:2},e1=(j,s)=>{let $,_e,tt;for(;;){if(j.lookahead<Su){if(Zm(j),j.lookahead<Su&&s===Ep)return 1;if(j.lookahead===0)break}if($=0,j.lookahead>=3&&(j.ins_h=Sp(j,j.ins_h,j.window[j.strstart+3-1]),$=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=2,$!==0&&j.prev_length<j.max_lazy_match&&j.strstart-$<=j.w_size-Su&&(j.match_length=a4(j,$),j.match_length<=5&&(j.strategy===CU||j.match_length===3&&j.strstart-j.match_start>4096)&&(j.match_length=2)),j.prev_length>=3&&j.match_length<=j.prev_length){tt=j.strstart+j.lookahead-3,_e=_p(j,j.strstart-1-j.prev_match,j.prev_length-3),j.lookahead-=j.prev_length-1,j.prev_length-=2;do++j.strstart<=tt&&(j.ins_h=Sp(j,j.ins_h,j.window[j.strstart+3-1]),$=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart);while(--j.prev_length!=0);if(j.match_available=0,j.match_length=2,j.strstart++,_e&&(Al(j,!1),j.strm.avail_out===0))return 1}else if(j.match_available){if(_e=_p(j,0,j.window[j.strstart-1]),_e&&Al(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return 1}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(_e=_p(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<2?j.strstart:2,s===Kl?(Al(j,!0),j.strm.avail_out===0?3:4):j.sym_next&&(Al(j,!1),j.strm.avail_out===0)?1:2};function Tu(j,s,$,_e,tt){this.good_length=j,this.max_lazy=s,this.nice_length=$,this.max_chain=_e,this.func=tt}let t0=[new Tu(0,0,0,0,c4),new Tu(4,4,8,4,GT),new Tu(4,5,16,8,GT),new Tu(4,6,32,32,GT),new Tu(4,4,16,16,e1),new Tu(8,16,32,32,e1),new Tu(8,16,128,128,e1),new Tu(8,32,128,256,e1),new Tu(32,128,258,1024,e1),new Tu(32,258,258,4096,e1)];function xU(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=gE,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*OU),this.dyn_dtree=new Uint16Array(2*(2*NU+1)),this.bl_tree=new Uint16Array(2*(2*wU+1)),yp(this.dyn_ltree),yp(this.dyn_dtree),yp(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(PU+1),this.heap=new Uint16Array(2*VT+1),yp(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*VT+1),yp(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let n0=j=>{if(!j)return 1;let s=j.state;return!s||s.strm!==j||s.status!==Qm&&s.status!==57&&s.status!==69&&s.status!==73&&s.status!==91&&s.status!==103&&s.status!==tm&&s.status!==Z1?1:0},l4=j=>{if(n0(j))return nm(j,yu);j.total_in=j.total_out=0,j.data_type=AU;let s=j.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap===2?57:s.wrap?Qm:tm,j.adler=s.wrap===2?0:1,s.last_flush=-2,mU(s),vs},d4=j=>{let s=l4(j);var $;return s===vs&&(($=j.state).window_size=2*$.w_size,yp($.head),$.max_lazy_match=t0[$.level].max_lazy,$.good_match=t0[$.level].good_length,$.nice_match=t0[$.level].nice_length,$.max_chain_length=t0[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=2,$.match_available=0,$.ins_h=0),s},u4=(j,s,$,_e,tt,rt)=>{if(!j)return yu;let it=1;if(s===vU&&(s=6),_e<0?(it=0,_e=-_e):_e>15&&(it=2,_e-=16),tt<1||tt>9||$!==gE||_e<8||_e>15||s<0||s>9||rt<0||rt>RU||_e===8&&it!==1)return nm(j,yu);_e===8&&(_e=9);let at=new xU;return j.state=at,at.strm=j,at.status=Qm,at.wrap=it,at.gzhead=null,at.w_bits=_e,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=tt+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+3-1)/3),at.window=new Uint8Array(2*at.w_size),at.head=new Uint16Array(at.hash_size),at.prev=new Uint16Array(at.w_size),at.lit_bufsize=1<<tt+6,at.pending_buf_size=4*at.lit_bufsize,at.pending_buf=new Uint8Array(at.pending_buf_size),at.sym_buf=at.lit_bufsize,at.sym_end=3*(at.lit_bufsize-1),at.level=s,at.strategy=rt,at.method=$,d4(j)};var LU=(j,s)=>{if(n0(j)||s>o4||s<0)return j?nm(j,yu):yu;let $=j.state;if(!j.output||j.avail_in!==0&&!j.input||$.status===Z1&&s!==Kl)return nm(j,j.avail_out===0?jT:yu);let _e=$.last_flush;if($.last_flush=s,$.pending!==0){if(Il(j),j.avail_out===0)return $.last_flush=-1,vs}else if(j.avail_in===0&&s4(s)<=s4(_e)&&s!==Kl)return nm(j,jT);if($.status===Z1&&j.avail_in!==0)return nm(j,jT);if($.status===Qm&&$.wrap===0&&($.status=tm),$.status===Qm){let tt=gE+($.w_bits-8<<4)<<8,rt=-1;if(rt=$.strategy>=fE||$.level<2?0:$.level<6?1:$.level===6?2:3,tt|=rt<<6,$.strstart!==0&&(tt|=32),tt+=31-tt%31,e0($,tt),$.strstart!==0&&(e0($,j.adler>>>16),e0($,65535&j.adler)),j.adler=1,$.status=tm,Il(j),$.pending!==0)return $.last_flush=-1,vs}if($.status===57){if(j.adler=0,Xr($,31),Xr($,139),Xr($,8),$.gzhead)Xr($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),Xr($,255&$.gzhead.time),Xr($,$.gzhead.time>>8&255),Xr($,$.gzhead.time>>16&255),Xr($,$.gzhead.time>>24&255),Xr($,$.level===9?2:$.strategy>=fE||$.level<2?4:0),Xr($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(Xr($,255&$.gzhead.extra.length),Xr($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(j.adler=_s(j.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69;else if(Xr($,0),Xr($,0),Xr($,0),Xr($,0),Xr($,0),Xr($,$.level===9?2:$.strategy>=fE||$.level<2?4:0),Xr($,3),$.status=tm,Il(j),$.pending!==0)return $.last_flush=-1,vs}if($.status===69){if($.gzhead.extra){let tt=$.pending,rt=(65535&$.gzhead.extra.length)-$.gzindex;for(;$.pending+rt>$.pending_buf_size;){let at=$.pending_buf_size-$.pending;if($.pending_buf.set($.gzhead.extra.subarray($.gzindex,$.gzindex+at),$.pending),$.pending=$.pending_buf_size,$.gzhead.hcrc&&$.pending>tt&&(j.adler=_s(j.adler,$.pending_buf,$.pending-tt,tt)),$.gzindex+=at,Il(j),$.pending!==0)return $.last_flush=-1,vs;tt=0,rt-=at}let it=new Uint8Array($.gzhead.extra);$.pending_buf.set(it.subarray($.gzindex,$.gzindex+rt),$.pending),$.pending+=rt,$.gzhead.hcrc&&$.pending>tt&&(j.adler=_s(j.adler,$.pending_buf,$.pending-tt,tt)),$.gzindex=0}$.status=73}if($.status===73){if($.gzhead.name){let tt,rt=$.pending;do{if($.pending===$.pending_buf_size){if($.gzhead.hcrc&&$.pending>rt&&(j.adler=_s(j.adler,$.pending_buf,$.pending-rt,rt)),Il(j),$.pending!==0)return $.last_flush=-1,vs;rt=0}tt=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,Xr($,tt)}while(tt!==0);$.gzhead.hcrc&&$.pending>rt&&(j.adler=_s(j.adler,$.pending_buf,$.pending-rt,rt)),$.gzindex=0}$.status=91}if($.status===91){if($.gzhead.comment){let tt,rt=$.pending;do{if($.pending===$.pending_buf_size){if($.gzhead.hcrc&&$.pending>rt&&(j.adler=_s(j.adler,$.pending_buf,$.pending-rt,rt)),Il(j),$.pending!==0)return $.last_flush=-1,vs;rt=0}tt=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,Xr($,tt)}while(tt!==0);$.gzhead.hcrc&&$.pending>rt&&(j.adler=_s(j.adler,$.pending_buf,$.pending-rt,rt))}$.status=103}if($.status===103){if($.gzhead.hcrc){if($.pending+2>$.pending_buf_size&&(Il(j),$.pending!==0))return $.last_flush=-1,vs;Xr($,255&j.adler),Xr($,j.adler>>8&255),j.adler=0}if($.status=tm,Il(j),$.pending!==0)return $.last_flush=-1,vs}if(j.avail_in!==0||$.lookahead!==0||s!==Ep&&$.status!==Z1){let tt=$.level===0?c4($,s):$.strategy===fE?((rt,it)=>{let at;for(;;){if(rt.lookahead===0&&(Zm(rt),rt.lookahead===0)){if(it===Ep)return 1;break}if(rt.match_length=0,at=_p(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++,at&&(Al(rt,!1),rt.strm.avail_out===0))return 1}return rt.insert=0,it===Kl?(Al(rt,!0),rt.strm.avail_out===0?3:4):rt.sym_next&&(Al(rt,!1),rt.strm.avail_out===0)?1:2})($,s):$.strategy===bU?((rt,it)=>{let at,ct,dt,ut,pt=rt.window;for(;;){if(rt.lookahead<=em){if(Zm(rt),rt.lookahead<=em&&it===Ep)return 1;if(rt.lookahead===0)break}if(rt.match_length=0,rt.lookahead>=3&&rt.strstart>0&&(dt=rt.strstart-1,ct=pt[dt],ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt])){ut=rt.strstart+em;do;while(ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt]&&ct===pt[++dt]&&dt<ut);rt.match_length=em-(ut-dt),rt.match_length>rt.lookahead&&(rt.match_length=rt.lookahead)}if(rt.match_length>=3?(at=_p(rt,1,rt.match_length-3),rt.lookahead-=rt.match_length,rt.strstart+=rt.match_length,rt.match_length=0):(at=_p(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++),at&&(Al(rt,!1),rt.strm.avail_out===0))return 1}return rt.insert=0,it===Kl?(Al(rt,!0),rt.strm.avail_out===0?3:4):rt.sym_next&&(Al(rt,!1),rt.strm.avail_out===0)?1:2})($,s):t0[$.level].func($,s);if(tt!==3&&tt!==4||($.status=Z1),tt===1||tt===3)return j.avail_out===0&&($.last_flush=-1),vs;if(tt===2&&(s===yU?EU($):s!==o4&&(FT($,0,0,!1),s===SU&&(yp($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),Il(j),j.avail_out===0))return $.last_flush=-1,vs}return s!==Kl?vs:$.wrap<=0?i4:($.wrap===2?(Xr($,255&j.adler),Xr($,j.adler>>8&255),Xr($,j.adler>>16&255),Xr($,j.adler>>24&255),Xr($,255&j.total_in),Xr($,j.total_in>>8&255),Xr($,j.total_in>>16&255),Xr($,j.total_in>>24&255)):(e0($,j.adler>>>16),e0($,65535&j.adler)),Il(j),$.wrap>0&&($.wrap=-$.wrap),$.pending!==0?vs:i4)},kU=(j,s)=>{let $=s.length;if(n0(j))return yu;let _e=j.state,tt=_e.wrap;if(tt===2||tt===1&&_e.status!==Qm||_e.lookahead)return yu;if(tt===1&&(j.adler=Q1(j.adler,s,$,0)),_e.wrap=0,$>=_e.w_size){tt===0&&(yp(_e.head),_e.strstart=0,_e.block_start=0,_e.insert=0);let ct=new Uint8Array(_e.w_size);ct.set(s.subarray($-_e.w_size,$),0),s=ct,$=_e.w_size}let rt=j.avail_in,it=j.next_in,at=j.input;for(j.avail_in=$,j.next_in=0,j.input=s,Zm(_e);_e.lookahead>=3;){let ct=_e.strstart,dt=_e.lookahead-2;do _e.ins_h=Sp(_e,_e.ins_h,_e.window[ct+3-1]),_e.prev[ct&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=ct,ct++;while(--dt);_e.strstart=ct,_e.lookahead=2,Zm(_e)}return _e.strstart+=_e.lookahead,_e.block_start=_e.strstart,_e.insert=_e.lookahead,_e.lookahead=0,_e.match_length=_e.prev_length=2,_e.match_available=0,j.next_in=it,j.input=at,j.avail_in=rt,_e.wrap=tt,vs},r0={deflateInit:(j,s)=>u4(j,s,gE,15,8,IU),deflateInit2:u4,deflateReset:d4,deflateResetKeep:l4,deflateSetHeader:(j,s)=>n0(j)||j.state.wrap!==2?yu:(j.state.gzhead=s,vs),deflate:LU,deflateEnd:j=>{if(n0(j))return yu;let s=j.state.status;return j.state=null,s===tm?nm(j,TU):vs},deflateSetDictionary:kU,deflateInfo:"pako deflate (from Nodeca project)"};let MU=(j,s)=>Object.prototype.hasOwnProperty.call(j,s);var mE={assign:function(j){let s=Array.prototype.slice.call(arguments,1);for(;s.length;){let $=s.shift();if($){if(typeof $!="object")throw new TypeError($+"must be non-object");for(let _e in $)MU($,_e)&&(j[_e]=$[_e])}}return j},flattenChunks:j=>{let s=0;for(let _e=0,tt=j.length;_e<tt;_e++)s+=j[_e].length;let $=new Uint8Array(s);for(let _e=0,tt=0,rt=j.length;_e<rt;_e++){let it=j[_e];$.set(it,tt),tt+=it.length}return $}};let p4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p4=!1}let o0=new Uint8Array(256);for(let j=0;j<256;j++)o0[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;o0[254]=o0[254]=1;var i0={string2buf:j=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(j);let s,$,_e,tt,rt,it=j.length,at=0;for(tt=0;tt<it;tt++)$=j.charCodeAt(tt),(64512&$)==55296&&tt+1<it&&(_e=j.charCodeAt(tt+1),(64512&_e)==56320&&($=65536+($-55296<<10)+(_e-56320),tt++)),at+=$<128?1:$<2048?2:$<65536?3:4;for(s=new Uint8Array(at),rt=0,tt=0;rt<at;tt++)$=j.charCodeAt(tt),(64512&$)==55296&&tt+1<it&&(_e=j.charCodeAt(tt+1),(64512&_e)==56320&&($=65536+($-55296<<10)+(_e-56320),tt++)),$<128?s[rt++]=$:$<2048?(s[rt++]=192|$>>>6,s[rt++]=128|63&$):$<65536?(s[rt++]=224|$>>>12,s[rt++]=128|$>>>6&63,s[rt++]=128|63&$):(s[rt++]=240|$>>>18,s[rt++]=128|$>>>12&63,s[rt++]=128|$>>>6&63,s[rt++]=128|63&$);return s},buf2string:(j,s)=>{let $=s||j.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(j.subarray(0,s));let _e,tt,rt=new Array(2*$);for(tt=0,_e=0;_e<$;){let it=j[_e++];if(it<128){rt[tt++]=it;continue}let at=o0[it];if(at>4)rt[tt++]=65533,_e+=at-1;else{for(it&=at===2?31:at===3?15:7;at>1&&_e<$;)it=it<<6|63&j[_e++],at--;at>1?rt[tt++]=65533:it<65536?rt[tt++]=it:(it-=65536,rt[tt++]=55296|it>>10&1023,rt[tt++]=56320|1023&it)}}return((it,at)=>{if(at<65534&&it.subarray&&p4)return String.fromCharCode.apply(null,it.length===at?it:it.subarray(0,at));let ct="";for(let dt=0;dt<at;dt++)ct+=String.fromCharCode(it[dt]);return ct})(rt,tt)},utf8border:(j,s)=>{(s=s||j.length)>j.length&&(s=j.length);let $=s-1;for(;$>=0&&(192&j[$])==128;)$--;return $<0||$===0?s:$+o0[j[$]]>s?$:s}},h4=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let f4=Object.prototype.toString,{Z_NO_FLUSH:UU,Z_SYNC_FLUSH:FU,Z_FULL_FLUSH:jU,Z_FINISH:VU,Z_OK:_E,Z_STREAM_END:BU,Z_DEFAULT_COMPRESSION:GU,Z_DEFAULT_STRATEGY:WU,Z_DEFLATED:HU}=Jm;function s0(j){this.options=mE.assign({level:GU,method:HU,chunkSize:16384,windowBits:15,memLevel:8,strategy:WU},j||{});let s=this.options;s.raw&&s.windowBits>0?s.windowBits=-s.windowBits:s.gzip&&s.windowBits>0&&s.windowBits<16&&(s.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h4,this.strm.avail_out=0;let $=r0.deflateInit2(this.strm,s.level,s.method,s.windowBits,s.memLevel,s.strategy);if($!==_E)throw new Error(_g[$]);if(s.header&&r0.deflateSetHeader(this.strm,s.header),s.dictionary){let _e;if(_e=typeof s.dictionary=="string"?i0.string2buf(s.dictionary):f4.call(s.dictionary)==="[object ArrayBuffer]"?new Uint8Array(s.dictionary):s.dictionary,$=r0.deflateSetDictionary(this.strm,_e),$!==_E)throw new Error(_g[$]);this._dict_set=!0}}function WT(j,s){let $=new s0(s);if($.push(j,!0),$.err)throw $.msg||_g[$.err];return $.result}s0.prototype.push=function(j,s){let $=this.strm,_e=this.options.chunkSize,tt,rt;if(this.ended)return!1;for(rt=s===~~s?s:s===!0?VU:UU,typeof j=="string"?$.input=i0.string2buf(j):f4.call(j)==="[object ArrayBuffer]"?$.input=new Uint8Array(j):$.input=j,$.next_in=0,$.avail_in=$.input.length;;)if($.avail_out===0&&($.output=new Uint8Array(_e),$.next_out=0,$.avail_out=_e),(rt===FU||rt===jU)&&$.avail_out<=6)this.onData($.output.subarray(0,$.next_out)),$.avail_out=0;else{if(tt=r0.deflate($,rt),tt===BU)return $.next_out>0&&this.onData($.output.subarray(0,$.next_out)),tt=r0.deflateEnd(this.strm),this.onEnd(tt),this.ended=!0,tt===_E;if($.avail_out!==0){if(rt>0&&$.next_out>0)this.onData($.output.subarray(0,$.next_out)),$.avail_out=0;else if($.avail_in===0)break}else this.onData($.output)}return!0},s0.prototype.onData=function(j){this.chunks.push(j)},s0.prototype.onEnd=function(j){j===_E&&(this.result=mE.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg};var zU={Deflate:s0,deflate:WT,deflateRaw:function(j,s){return(s=s||{}).raw=!0,WT(j,s)},gzip:function(j,s){return(s=s||{}).gzip=!0,WT(j,s)},constants:Jm};let EE=16209;var KU=function(j,s){let $,_e,tt,rt,it,at,ct,dt,ut,pt,mt,yt,At,Ct,It,kt,Vt,Bt,en,zt,Yt,Qt,Xt,cn,hn=j.state;$=j.next_in,Xt=j.input,_e=$+(j.avail_in-5),tt=j.next_out,cn=j.output,rt=tt-(s-j.avail_out),it=tt+(j.avail_out-257),at=hn.dmax,ct=hn.wsize,dt=hn.whave,ut=hn.wnext,pt=hn.window,mt=hn.hold,yt=hn.bits,At=hn.lencode,Ct=hn.distcode,It=(1<<hn.lenbits)-1,kt=(1<<hn.distbits)-1;e:do{yt<15&&(mt+=Xt[$++]<<yt,yt+=8,mt+=Xt[$++]<<yt,yt+=8),Vt=At[mt&It];t:for(;;){if(Bt=Vt>>>24,mt>>>=Bt,yt-=Bt,Bt=Vt>>>16&255,Bt===0)cn[tt++]=65535&Vt;else{if(!(16&Bt)){if(!(64&Bt)){Vt=At[(65535&Vt)+(mt&(1<<Bt)-1)];continue t}if(32&Bt){hn.mode=16191;break e}j.msg="invalid literal/length code",hn.mode=EE;break e}en=65535&Vt,Bt&=15,Bt&&(yt<Bt&&(mt+=Xt[$++]<<yt,yt+=8),en+=mt&(1<<Bt)-1,mt>>>=Bt,yt-=Bt),yt<15&&(mt+=Xt[$++]<<yt,yt+=8,mt+=Xt[$++]<<yt,yt+=8),Vt=Ct[mt&kt];n:for(;;){if(Bt=Vt>>>24,mt>>>=Bt,yt-=Bt,Bt=Vt>>>16&255,!(16&Bt)){if(!(64&Bt)){Vt=Ct[(65535&Vt)+(mt&(1<<Bt)-1)];continue n}j.msg="invalid distance code",hn.mode=EE;break e}if(zt=65535&Vt,Bt&=15,yt<Bt&&(mt+=Xt[$++]<<yt,yt+=8,yt<Bt&&(mt+=Xt[$++]<<yt,yt+=8)),zt+=mt&(1<<Bt)-1,zt>at){j.msg="invalid distance too far back",hn.mode=EE;break e}if(mt>>>=Bt,yt-=Bt,Bt=tt-rt,zt>Bt){if(Bt=zt-Bt,Bt>dt&&hn.sane){j.msg="invalid distance too far back",hn.mode=EE;break e}if(Yt=0,Qt=pt,ut===0){if(Yt+=ct-Bt,Bt<en){en-=Bt;do cn[tt++]=pt[Yt++];while(--Bt);Yt=tt-zt,Qt=cn}}else if(ut<Bt){if(Yt+=ct+ut-Bt,Bt-=ut,Bt<en){en-=Bt;do cn[tt++]=pt[Yt++];while(--Bt);if(Yt=0,ut<en){Bt=ut,en-=Bt;do cn[tt++]=pt[Yt++];while(--Bt);Yt=tt-zt,Qt=cn}}}else if(Yt+=ut-Bt,Bt<en){en-=Bt;do cn[tt++]=pt[Yt++];while(--Bt);Yt=tt-zt,Qt=cn}for(;en>2;)cn[tt++]=Qt[Yt++],cn[tt++]=Qt[Yt++],cn[tt++]=Qt[Yt++],en-=3;en&&(cn[tt++]=Qt[Yt++],en>1&&(cn[tt++]=Qt[Yt++]))}else{Yt=tt-zt;do cn[tt++]=cn[Yt++],cn[tt++]=cn[Yt++],cn[tt++]=cn[Yt++],en-=3;while(en>2);en&&(cn[tt++]=cn[Yt++],en>1&&(cn[tt++]=cn[Yt++]))}break}}break}}while($<_e&&tt<it);en=yt>>3,$-=en,yt-=en<<3,mt&=(1<<yt)-1,j.next_in=$,j.next_out=tt,j.avail_in=$<_e?_e-$+5:5-($-_e),j.avail_out=tt<it?it-tt+257:257-(tt-it),hn.hold=mt,hn.bits=yt};let yE=15,YU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qU=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),XU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),JU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var a0=(j,s,$,_e,tt,rt,it,at)=>{let ct=at.bits,dt,ut,pt,mt,yt,At,Ct=0,It=0,kt=0,Vt=0,Bt=0,en=0,zt=0,Yt=0,Qt=0,Xt=0,cn=null,hn=new Uint16Array(16),Mn=new Uint16Array(16),Gn,Or,Eo,$r=null;for(Ct=0;Ct<=yE;Ct++)hn[Ct]=0;for(It=0;It<_e;It++)hn[s[$+It]]++;for(Bt=ct,Vt=yE;Vt>=1&&hn[Vt]===0;Vt--);if(Bt>Vt&&(Bt=Vt),Vt===0)return tt[rt++]=20971520,tt[rt++]=20971520,at.bits=1,0;for(kt=1;kt<Vt&&hn[kt]===0;kt++);for(Bt<kt&&(Bt=kt),Yt=1,Ct=1;Ct<=yE;Ct++)if(Yt<<=1,Yt-=hn[Ct],Yt<0)return-1;if(Yt>0&&(j===0||Vt!==1))return-1;for(Mn[1]=0,Ct=1;Ct<yE;Ct++)Mn[Ct+1]=Mn[Ct]+hn[Ct];for(It=0;It<_e;It++)s[$+It]!==0&&(it[Mn[s[$+It]]++]=It);if(j===0?(cn=$r=it,At=20):j===1?(cn=YU,$r=qU,At=257):(cn=XU,$r=JU,At=0),Xt=0,It=0,Ct=kt,yt=rt,en=Bt,zt=0,pt=-1,Qt=1<<Bt,mt=Qt-1,j===1&&Qt>852||j===2&&Qt>592)return 1;for(;;){Gn=Ct-zt,it[It]+1<At?(Or=0,Eo=it[It]):it[It]>=At?(Or=$r[it[It]-At],Eo=cn[it[It]-At]):(Or=96,Eo=0),dt=1<<Ct-zt,ut=1<<en,kt=ut;do ut-=dt,tt[yt+(Xt>>zt)+ut]=Gn<<24|Or<<16|Eo|0;while(ut!==0);for(dt=1<<Ct-1;Xt&dt;)dt>>=1;if(dt!==0?(Xt&=dt-1,Xt+=dt):Xt=0,It++,--hn[Ct]==0){if(Ct===Vt)break;Ct=s[$+it[It]]}if(Ct>Bt&&(Xt&mt)!==pt){for(zt===0&&(zt=Bt),yt+=kt,en=Ct-zt,Yt=1<<en;en+zt<Vt&&(Yt-=hn[en+zt],!(Yt<=0));)en++,Yt<<=1;if(Qt+=1<<en,j===1&&Qt>852||j===2&&Qt>592)return 1;pt=Xt&mt,tt[pt]=Bt<<24|en<<16|yt-rt|0}}return Xt!==0&&(tt[yt+Xt]=Ct-zt<<24|64<<16|0),at.bits=Bt,0};let{Z_FINISH:g4,Z_BLOCK:QU,Z_TREES:SE,Z_OK:rm,Z_STREAM_END:ZU,Z_NEED_DICT:eF,Z_STREAM_ERROR:Yl,Z_DATA_ERROR:m4,Z_MEM_ERROR:_4,Z_BUF_ERROR:tF,Z_DEFLATED:E4}=Jm,TE=16180,vE=16190,ju=16191,HT=16192,zT=16194,CE=16199,bE=16200,KT=16206,$o=16209,y4=j=>(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24);function nF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let om=j=>{if(!j)return 1;let s=j.state;return!s||s.strm!==j||s.mode<TE||s.mode>16211?1:0},S4=j=>{if(om(j))return Yl;let s=j.state;return j.total_in=j.total_out=s.total=0,j.msg="",s.wrap&&(j.adler=1&s.wrap),s.mode=TE,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(852),s.distcode=s.distdyn=new Int32Array(592),s.sane=1,s.back=-1,rm},T4=j=>{if(om(j))return Yl;let s=j.state;return s.wsize=0,s.whave=0,s.wnext=0,S4(j)},v4=(j,s)=>{let $;if(om(j))return Yl;let _e=j.state;return s<0?($=0,s=-s):($=5+(s>>4),s<48&&(s&=15)),s&&(s<8||s>15)?Yl:(_e.window!==null&&_e.wbits!==s&&(_e.window=null),_e.wrap=$,_e.wbits=s,T4(j))},C4=(j,s)=>{if(!j)return Yl;let $=new nF;j.state=$,$.strm=j,$.window=null,$.mode=TE;let _e=v4(j,s);return _e!==rm&&(j.state=null),_e},YT,qT,b4=!0,rF=j=>{if(b4){YT=new Int32Array(512),qT=new Int32Array(32);let s=0;for(;s<144;)j.lens[s++]=8;for(;s<256;)j.lens[s++]=9;for(;s<280;)j.lens[s++]=7;for(;s<288;)j.lens[s++]=8;for(a0(1,j.lens,0,288,YT,0,j.work,{bits:9}),s=0;s<32;)j.lens[s++]=5;a0(2,j.lens,0,32,qT,0,j.work,{bits:5}),b4=!1}j.lencode=YT,j.lenbits=9,j.distcode=qT,j.distbits=5},R4=(j,s,$,_e)=>{let tt,rt=j.state;return rt.window===null&&(rt.wsize=1<<rt.wbits,rt.wnext=0,rt.whave=0,rt.window=new Uint8Array(rt.wsize)),_e>=rt.wsize?(rt.window.set(s.subarray($-rt.wsize,$),0),rt.wnext=0,rt.whave=rt.wsize):(tt=rt.wsize-rt.wnext,tt>_e&&(tt=_e),rt.window.set(s.subarray($-_e,$-_e+tt),rt.wnext),(_e-=tt)?(rt.window.set(s.subarray($-_e,$),0),rt.wnext=_e,rt.whave=rt.wsize):(rt.wnext+=tt,rt.wnext===rt.wsize&&(rt.wnext=0),rt.whave<rt.wsize&&(rt.whave+=tt))),0};var oF=(j,s)=>{let $,_e,tt,rt,it,at,ct,dt,ut,pt,mt,yt,At,Ct,It,kt,Vt,Bt,en,zt,Yt,Qt,Xt=0,cn=new Uint8Array(4),hn,Mn,Gn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(om(j)||!j.output||!j.input&&j.avail_in!==0)return Yl;$=j.state,$.mode===ju&&($.mode=HT),it=j.next_out,tt=j.output,ct=j.avail_out,rt=j.next_in,_e=j.input,at=j.avail_in,dt=$.hold,ut=$.bits,pt=at,mt=ct,Qt=rm;e:for(;;)switch($.mode){case TE:if($.wrap===0){$.mode=HT;break}for(;ut<16;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(2&$.wrap&&dt===35615){$.wbits===0&&($.wbits=15),$.check=0,cn[0]=255&dt,cn[1]=dt>>>8&255,$.check=_s($.check,cn,2,0),dt=0,ut=0,$.mode=16181;break}if($.head&&($.head.done=!1),!(1&$.wrap)||(((255&dt)<<8)+(dt>>8))%31){j.msg="incorrect header check",$.mode=$o;break}if((15&dt)!==E4){j.msg="unknown compression method",$.mode=$o;break}if(dt>>>=4,ut-=4,Yt=8+(15&dt),$.wbits===0&&($.wbits=Yt),Yt>15||Yt>$.wbits){j.msg="invalid window size",$.mode=$o;break}$.dmax=1<<$.wbits,$.flags=0,j.adler=$.check=1,$.mode=512&dt?16189:ju,dt=0,ut=0;break;case 16181:for(;ut<16;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if($.flags=dt,(255&$.flags)!==E4){j.msg="unknown compression method",$.mode=$o;break}if(57344&$.flags){j.msg="unknown header flags set",$.mode=$o;break}$.head&&($.head.text=dt>>8&1),512&$.flags&&4&$.wrap&&(cn[0]=255&dt,cn[1]=dt>>>8&255,$.check=_s($.check,cn,2,0)),dt=0,ut=0,$.mode=16182;case 16182:for(;ut<32;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}$.head&&($.head.time=dt),512&$.flags&&4&$.wrap&&(cn[0]=255&dt,cn[1]=dt>>>8&255,cn[2]=dt>>>16&255,cn[3]=dt>>>24&255,$.check=_s($.check,cn,4,0)),dt=0,ut=0,$.mode=16183;case 16183:for(;ut<16;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}$.head&&($.head.xflags=255&dt,$.head.os=dt>>8),512&$.flags&&4&$.wrap&&(cn[0]=255&dt,cn[1]=dt>>>8&255,$.check=_s($.check,cn,2,0)),dt=0,ut=0,$.mode=16184;case 16184:if(1024&$.flags){for(;ut<16;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}$.length=dt,$.head&&($.head.extra_len=dt),512&$.flags&&4&$.wrap&&(cn[0]=255&dt,cn[1]=dt>>>8&255,$.check=_s($.check,cn,2,0)),dt=0,ut=0}else $.head&&($.head.extra=null);$.mode=16185;case 16185:if(1024&$.flags&&(yt=$.length,yt>at&&(yt=at),yt&&($.head&&(Yt=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Uint8Array($.head.extra_len)),$.head.extra.set(_e.subarray(rt,rt+yt),Yt)),512&$.flags&&4&$.wrap&&($.check=_s($.check,_e,yt,rt)),at-=yt,rt+=yt,$.length-=yt),$.length))break e;$.length=0,$.mode=16186;case 16186:if(2048&$.flags){if(at===0)break e;yt=0;do Yt=_e[rt+yt++],$.head&&Yt&&$.length<65536&&($.head.name+=String.fromCharCode(Yt));while(Yt&&yt<at);if(512&$.flags&&4&$.wrap&&($.check=_s($.check,_e,yt,rt)),at-=yt,rt+=yt,Yt)break e}else $.head&&($.head.name=null);$.length=0,$.mode=16187;case 16187:if(4096&$.flags){if(at===0)break e;yt=0;do Yt=_e[rt+yt++],$.head&&Yt&&$.length<65536&&($.head.comment+=String.fromCharCode(Yt));while(Yt&&yt<at);if(512&$.flags&&4&$.wrap&&($.check=_s($.check,_e,yt,rt)),at-=yt,rt+=yt,Yt)break e}else $.head&&($.head.comment=null);$.mode=16188;case 16188:if(512&$.flags){for(;ut<16;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(4&$.wrap&&dt!==(65535&$.check)){j.msg="header crc mismatch",$.mode=$o;break}dt=0,ut=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),j.adler=$.check=0,$.mode=ju;break;case 16189:for(;ut<32;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}j.adler=$.check=y4(dt),dt=0,ut=0,$.mode=vE;case vE:if($.havedict===0)return j.next_out=it,j.avail_out=ct,j.next_in=rt,j.avail_in=at,$.hold=dt,$.bits=ut,eF;j.adler=$.check=1,$.mode=ju;case ju:if(s===QU||s===SE)break e;case HT:if($.last){dt>>>=7&ut,ut-=7&ut,$.mode=KT;break}for(;ut<3;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}switch($.last=1&dt,dt>>>=1,ut-=1,3&dt){case 0:$.mode=16193;break;case 1:if(rF($),$.mode=CE,s===SE){dt>>>=2,ut-=2;break e}break;case 2:$.mode=16196;break;case 3:j.msg="invalid block type",$.mode=$o}dt>>>=2,ut-=2;break;case 16193:for(dt>>>=7&ut,ut-=7&ut;ut<32;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if((65535&dt)!=(dt>>>16^65535)){j.msg="invalid stored block lengths",$.mode=$o;break}if($.length=65535&dt,dt=0,ut=0,$.mode=zT,s===SE)break e;case zT:$.mode=16195;case 16195:if(yt=$.length,yt){if(yt>at&&(yt=at),yt>ct&&(yt=ct),yt===0)break e;tt.set(_e.subarray(rt,rt+yt),it),at-=yt,rt+=yt,ct-=yt,it+=yt,$.length-=yt;break}$.mode=ju;break;case 16196:for(;ut<14;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if($.nlen=257+(31&dt),dt>>>=5,ut-=5,$.ndist=1+(31&dt),dt>>>=5,ut-=5,$.ncode=4+(15&dt),dt>>>=4,ut-=4,$.nlen>286||$.ndist>30){j.msg="too many length or distance symbols",$.mode=$o;break}$.have=0,$.mode=16197;case 16197:for(;$.have<$.ncode;){for(;ut<3;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}$.lens[Gn[$.have++]]=7&dt,dt>>>=3,ut-=3}for(;$.have<19;)$.lens[Gn[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,hn={bits:$.lenbits},Qt=a0(0,$.lens,0,19,$.lencode,0,$.work,hn),$.lenbits=hn.bits,Qt){j.msg="invalid code lengths set",$.mode=$o;break}$.have=0,$.mode=16198;case 16198:for(;$.have<$.nlen+$.ndist;){for(;Xt=$.lencode[dt&(1<<$.lenbits)-1],It=Xt>>>24,kt=Xt>>>16&255,Vt=65535&Xt,!(It<=ut);){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(Vt<16)dt>>>=It,ut-=It,$.lens[$.have++]=Vt;else{if(Vt===16){for(Mn=It+2;ut<Mn;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(dt>>>=It,ut-=It,$.have===0){j.msg="invalid bit length repeat",$.mode=$o;break}Yt=$.lens[$.have-1],yt=3+(3&dt),dt>>>=2,ut-=2}else if(Vt===17){for(Mn=It+3;ut<Mn;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}dt>>>=It,ut-=It,Yt=0,yt=3+(7&dt),dt>>>=3,ut-=3}else{for(Mn=It+7;ut<Mn;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}dt>>>=It,ut-=It,Yt=0,yt=11+(127&dt),dt>>>=7,ut-=7}if($.have+yt>$.nlen+$.ndist){j.msg="invalid bit length repeat",$.mode=$o;break}for(;yt--;)$.lens[$.have++]=Yt}}if($.mode===$o)break;if($.lens[256]===0){j.msg="invalid code -- missing end-of-block",$.mode=$o;break}if($.lenbits=9,hn={bits:$.lenbits},Qt=a0(1,$.lens,0,$.nlen,$.lencode,0,$.work,hn),$.lenbits=hn.bits,Qt){j.msg="invalid literal/lengths set",$.mode=$o;break}if($.distbits=6,$.distcode=$.distdyn,hn={bits:$.distbits},Qt=a0(2,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,hn),$.distbits=hn.bits,Qt){j.msg="invalid distances set",$.mode=$o;break}if($.mode=CE,s===SE)break e;case CE:$.mode=bE;case bE:if(at>=6&&ct>=258){j.next_out=it,j.avail_out=ct,j.next_in=rt,j.avail_in=at,$.hold=dt,$.bits=ut,KU(j,mt),it=j.next_out,tt=j.output,ct=j.avail_out,rt=j.next_in,_e=j.input,at=j.avail_in,dt=$.hold,ut=$.bits,$.mode===ju&&($.back=-1);break}for($.back=0;Xt=$.lencode[dt&(1<<$.lenbits)-1],It=Xt>>>24,kt=Xt>>>16&255,Vt=65535&Xt,!(It<=ut);){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(kt&&!(240&kt)){for(Bt=It,en=kt,zt=Vt;Xt=$.lencode[zt+((dt&(1<<Bt+en)-1)>>Bt)],It=Xt>>>24,kt=Xt>>>16&255,Vt=65535&Xt,!(Bt+It<=ut);){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}dt>>>=Bt,ut-=Bt,$.back+=Bt}if(dt>>>=It,ut-=It,$.back+=It,$.length=Vt,kt===0){$.mode=16205;break}if(32&kt){$.back=-1,$.mode=ju;break}if(64&kt){j.msg="invalid literal/length code",$.mode=$o;break}$.extra=15&kt,$.mode=16201;case 16201:if($.extra){for(Mn=$.extra;ut<Mn;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}$.length+=dt&(1<<$.extra)-1,dt>>>=$.extra,ut-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=16202;case 16202:for(;Xt=$.distcode[dt&(1<<$.distbits)-1],It=Xt>>>24,kt=Xt>>>16&255,Vt=65535&Xt,!(It<=ut);){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(!(240&kt)){for(Bt=It,en=kt,zt=Vt;Xt=$.distcode[zt+((dt&(1<<Bt+en)-1)>>Bt)],It=Xt>>>24,kt=Xt>>>16&255,Vt=65535&Xt,!(Bt+It<=ut);){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}dt>>>=Bt,ut-=Bt,$.back+=Bt}if(dt>>>=It,ut-=It,$.back+=It,64&kt){j.msg="invalid distance code",$.mode=$o;break}$.offset=Vt,$.extra=15&kt,$.mode=16203;case 16203:if($.extra){for(Mn=$.extra;ut<Mn;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}$.offset+=dt&(1<<$.extra)-1,dt>>>=$.extra,ut-=$.extra,$.back+=$.extra}if($.offset>$.dmax){j.msg="invalid distance too far back",$.mode=$o;break}$.mode=16204;case 16204:if(ct===0)break e;if(yt=mt-ct,$.offset>yt){if(yt=$.offset-yt,yt>$.whave&&$.sane){j.msg="invalid distance too far back",$.mode=$o;break}yt>$.wnext?(yt-=$.wnext,At=$.wsize-yt):At=$.wnext-yt,yt>$.length&&(yt=$.length),Ct=$.window}else Ct=tt,At=it-$.offset,yt=$.length;yt>ct&&(yt=ct),ct-=yt,$.length-=yt;do tt[it++]=Ct[At++];while(--yt);$.length===0&&($.mode=bE);break;case 16205:if(ct===0)break e;tt[it++]=$.length,ct--,$.mode=bE;break;case KT:if($.wrap){for(;ut<32;){if(at===0)break e;at--,dt|=_e[rt++]<<ut,ut+=8}if(mt-=ct,j.total_out+=mt,$.total+=mt,4&$.wrap&&mt&&(j.adler=$.check=$.flags?_s($.check,tt,mt,it-mt):Q1($.check,tt,mt,it-mt)),mt=ct,4&$.wrap&&($.flags?dt:y4(dt))!==$.check){j.msg="incorrect data check",$.mode=$o;break}dt=0,ut=0}$.mode=16207;case 16207:if($.wrap&&$.flags){for(;ut<32;){if(at===0)break e;at--,dt+=_e[rt++]<<ut,ut+=8}if(4&$.wrap&&dt!==(4294967295&$.total)){j.msg="incorrect length check",$.mode=$o;break}dt=0,ut=0}$.mode=16208;case 16208:Qt=ZU;break e;case $o:Qt=m4;break e;case 16210:return _4;default:return Yl}return j.next_out=it,j.avail_out=ct,j.next_in=rt,j.avail_in=at,$.hold=dt,$.bits=ut,($.wsize||mt!==j.avail_out&&$.mode<$o&&($.mode<KT||s!==g4))&&R4(j,j.output,j.next_out,mt-j.avail_out),pt-=j.avail_in,mt-=j.avail_out,j.total_in+=pt,j.total_out+=mt,$.total+=mt,4&$.wrap&&mt&&(j.adler=$.check=$.flags?_s($.check,tt,mt,j.next_out-mt):Q1($.check,tt,mt,j.next_out-mt)),j.data_type=$.bits+($.last?64:0)+($.mode===ju?128:0)+($.mode===CE||$.mode===zT?256:0),(pt===0&&mt===0||s===g4)&&Qt===rm&&(Qt=tF),Qt},Vu={inflateReset:T4,inflateReset2:v4,inflateResetKeep:S4,inflateInit:j=>C4(j,15),inflateInit2:C4,inflate:oF,inflateEnd:j=>{if(om(j))return Yl;let s=j.state;return s.window&&(s.window=null),j.state=null,rm},inflateGetHeader:(j,s)=>{if(om(j))return Yl;let $=j.state;return 2&$.wrap?($.head=s,s.done=!1,rm):Yl},inflateSetDictionary:(j,s)=>{let $=s.length,_e,tt,rt;return om(j)?Yl:(_e=j.state,_e.wrap!==0&&_e.mode!==vE?Yl:_e.mode===vE&&(tt=1,tt=Q1(tt,s,$,0),tt!==_e.check)?m4:(rt=R4(j,s,$,$),rt?(_e.mode=16210,_4):(_e.havedict=1,rm)))},inflateInfo:"pako inflate (from Nodeca project)"},iF=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let I4=Object.prototype.toString,{Z_NO_FLUSH:sF,Z_FINISH:aF,Z_OK:c0,Z_STREAM_END:XT,Z_NEED_DICT:JT,Z_STREAM_ERROR:cF,Z_DATA_ERROR:A4,Z_MEM_ERROR:lF}=Jm;function l0(j){this.options=mE.assign({chunkSize:65536,windowBits:15,to:""},j||{});let s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),!(s.windowBits>=0&&s.windowBits<16)||j&&j.windowBits||(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&!(15&s.windowBits)&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h4,this.strm.avail_out=0;let $=Vu.inflateInit2(this.strm,s.windowBits);if($!==c0)throw new Error(_g[$]);if(this.header=new iF,Vu.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=i0.string2buf(s.dictionary):I4.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&($=Vu.inflateSetDictionary(this.strm,s.dictionary),$!==c0)))throw new Error(_g[$])}function QT(j,s){let $=new l0(s);if($.push(j),$.err)throw $.msg||_g[$.err];return $.result}l0.prototype.push=function(j,s){let $=this.strm,_e=this.options.chunkSize,tt=this.options.dictionary,rt,it,at;if(this.ended)return!1;for(it=s===~~s?s:s===!0?aF:sF,I4.call(j)==="[object ArrayBuffer]"?$.input=new Uint8Array(j):$.input=j,$.next_in=0,$.avail_in=$.input.length;;){for($.avail_out===0&&($.output=new Uint8Array(_e),$.next_out=0,$.avail_out=_e),rt=Vu.inflate($,it),rt===JT&&tt&&(rt=Vu.inflateSetDictionary($,tt),rt===c0?rt=Vu.inflate($,it):rt===A4&&(rt=JT));$.avail_in>0&&rt===XT&&$.state.wrap>0&&j[$.next_in]!==0;)Vu.inflateReset($),rt=Vu.inflate($,it);switch(rt){case cF:case A4:case JT:case lF:return this.onEnd(rt),this.ended=!0,!1}if(at=$.avail_out,$.next_out&&($.avail_out===0||rt===XT))if(this.options.to==="string"){let ct=i0.utf8border($.output,$.next_out),dt=$.next_out-ct,ut=i0.buf2string($.output,ct);$.next_out=dt,$.avail_out=_e-dt,dt&&$.output.set($.output.subarray(ct,ct+dt),0),this.onData(ut)}else this.onData($.output.length===$.next_out?$.output:$.output.subarray(0,$.next_out));if(rt!==c0||at!==0){if(rt===XT)return rt=Vu.inflateEnd(this.strm),this.onEnd(rt),this.ended=!0,!0;if($.avail_in===0)break}}return!0},l0.prototype.onData=function(j){this.chunks.push(j)},l0.prototype.onEnd=function(j){j===c0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mE.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg};var dF={Inflate:l0,inflate:QT,inflateRaw:function(j,s){return(s=s||{}).raw=!0,QT(j,s)},ungzip:QT,constants:Jm};let{Deflate:fV,deflate:uF,deflateRaw:gV,gzip:mV}=zU,{Inflate:_V,inflate:pF,inflateRaw:EV,ungzip:yV}=dF;var ZT,hF=uF,fF=pF;(function(j){j[j.ONE_BYTE=0]="ONE_BYTE",j[j.TWO_BYTE=1]="TWO_BYTE"})(ZT||(ZT={}));class gF{constructor(){gt(this,"_sequence",0),gt(this,"_startTime",Date.now()),gt(this,"isUseOneByte",!0)}get startTime(){let s=Date.now()-this._startTime;return s<Math.pow(2,16)?s:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(s){let $={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:s};if(s.byteLength>128){let at=new Uint8Array(4);at.set([1,0,0,0]);let ct={id:0,length:4,data:at.buffer},dt={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[ct]};$.commonPacketHeader.extension=1,$.extension=dt,$.payload=this.compress(s),$.commonPacketHeader.length=8+($.extension.length+2)+$.payload.byteLength}else $.commonPacketHeader.length=8+$.payload.byteLength;Ft("SHOW_DATASTREAM2_LOG")&&Et.debug("send data header: ".concat(JSON.stringify($.commonPacketHeader)));let _e=new ArrayBuffer($.commonPacketHeader.length),tt=new Uint8Array(_e),rt=new DataView(_e),it=0;if(rt.setUint16(it,$.commonPacketHeader.extension<<15|$.commonPacketHeader.reserved<<14|$.commonPacketHeader.length,!0),it+=2,rt.setUint32(it,$.commonPacketHeader.sequence,!0),it+=4,rt.setUint16(it,$.commonStreamHeader,!0),it+=2,$.extension){let at=this.serializeExtension($.extension);tt.set(new Uint8Array(at),it),it+=at.byteLength}if(tt.set(new Uint8Array($.payload),it),it+=$.payload.byteLength,it!==$.commonPacketHeader.length)throw Error("serialize error!");return _e}deserialize(s){if(s.byteLength<4)return new ArrayBuffer(0);let $=new DataView(s),_e=0,tt=$.getUint16(_e,!0);_e+=2;let rt={length:16383&tt,reserved:(16384&tt)>>14,extension:(32768&tt)>>15,sequence:$.getUint16(_e+2,!0)<<16|$.getUint16(_e,!0)},it,at;if(_e+=4,Ft("SHOW_DATASTREAM2_LOG")&&Et.debug("receive data header: ".concat(JSON.stringify(rt))),$.getUint16(_e,!0),_e+=2,rt.extension){at=this.deserializeExtension(s.slice(_e)),_e+=2+at.length,it=s.slice(_e);let ct=!1;if(at.datas.length>0){let dt=at.datas.find(ut=>ut.id===0);dt&&(ct=(1&new DataView(dt.data).getUint32(0,!0))==1)}it=ct?this.decompress(it):it}else it=s.slice(8);return it}serializeExtension(s){let{profile:$,length:_e,datas:tt}=s,rt=new ArrayBuffer(_e+2),it=new Uint8Array(rt),at=new DataView(rt),ct=0;if(at.setUint8(ct++,$),at.setUint8(ct++,_e),tt.forEach(dt=>{$?(at.setUint8(ct++,dt.id),at.setUint8(ct++,dt.length),it.set(new Uint8Array(dt.data),ct),ct+=dt.data.byteLength):(at.setUint8(ct++,dt.id|dt.length<<4),it.set(new Uint8Array(dt.data),ct),ct+=dt.data.byteLength)}),ct!==_e+2)throw Error("serialize extension error, is ".concat(ct,"!==").concat(_e+2));return rt}deserializeExtension(s){let $=new DataView(s),_e=0,tt=$.getUint8(_e);_e++;let rt=$.getUint8(_e);_e++;let it=tt===ZT.TWO_BYTE,at=[],ct=new DataView(s,2),dt=0;for(;dt<rt;){let ut=0,pt=0,mt=new ArrayBuffer(0);it?(ut=ct.getUint8(dt),dt++,pt=ct.getUint8(dt),dt++):(ut=15&ct.getUint8(dt),pt=ct.getUint8(dt)>>4,dt++),pt>0&&(mt=ct.buffer.slice(dt+2,dt+2+pt),dt+=mt.byteLength),at.push({id:ut,length:pt,data:mt})}if(dt!==rt)throw Error("parse error");return{profile:tt,length:rt,datas:at}}decompress(s){return fF(new Uint8Array(s))}compress(s){return hF(new Uint8Array(s))}}class N4 extends Fr{constructor(s,$){super(),gt(this,"_version",1),gt(this,"_type",3),gt(this,"_config",void 0),gt(this,"_originDataChannel",void 0),gt(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),gt(this,"_dataStreamPacketHandler",void 0),gt(this,"_datachannelEventMap",new Map),this._config=s,$&&(this._originDataChannel=$,this._bandDataChannelEvents($)),this._initPacketHeader(),this._dataStreamPacketHandler=new gF}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return Ft("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var s,$;return(s=($=this._originDataChannel)===null||$===void 0?void 0:$.readyState)!==null&&s!==void 0?s:"connecting"}get _originDataChannelId(){var s,$;return(s=($=this._originDataChannel)===null||$===void 0?void 0:$.id)!==null&&s!==void 0?s:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new Jt((s,$)=>{if(this._originDataChannel){this._originDataChannel.readyState==="open"&&s();let _e=setTimeout(()=>{var tt;$(new rn(Nt.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat((tt=this._originDataChannel)===null||tt===void 0?void 0:tt.id)))},1e4);this._originDataChannel.onopen=()=>{clearTimeout(_e),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),s()},this._originDataChannel.onerror=()=>{throw clearTimeout(_e),new rn(Nt.DATACHANNEL_CONNECTION_TIMEOUT)}}else $(new rn(Nt.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))})}_updateOriginDataChannel(s){this._originDataChannel=s,this._bandDataChannelEvents(s)}_initPacketHeader(){let s=new DataView(this._dataStreamPacketHeader);s.setUint16(0,this._version),s.setUint8(2,this._type),s.setUint8(3,this._config.id)}_bandDataChannelEvents(s){this._unbindDataChannelEvents(s),[zm.OPEN,zm.CLOSE,zm.ERROR].forEach($=>{let _e=()=>{this.emit($)};this._datachannelEventMap.set($,_e),s.addEventListener($,_e)})}_unbindDataChannelEvents(s){Array.from(this._datachannelEventMap.entries()).forEach($=>{let[_e,tt]=$;s.removeEventListener(_e,tt)}),this._datachannelEventMap.clear()}}class mF extends N4{constructor(s){super(s),gt(this,"_messageListener",void 0),this._messageListener=$=>{if($.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);let _e=$.data.slice(0,this._dataStreamPacketHeader.byteLength),tt=new DataView(_e).getUint8(3);if(tt!==this.id)return void(Ft("SHOW_DATASTREAM2_LOG")&&Et.debug("invalid datachannel id: ".concat(tt," !== ").concat(this.id)));let rt=$.data.slice(this._dataStreamPacketHeader.byteLength);rt=this._dataStreamPacketHandler.deserialize(rt),this.emit(zm.MESSAGE,rt)}}_updateOriginDataChannel(s){super._updateOriginDataChannel(s),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class w4 extends N4{send(s){if(this._originDataChannel){let $=s;$=this._dataStreamPacketHandler.serialize(s);let _e=new Uint8Array(this._dataStreamPacketHeader.byteLength+$.byteLength);_e.set(new Uint8Array(this._dataStreamPacketHeader),0),_e.set(new Uint8Array($),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(_e.buffer)}}}(function(){let j=ir();ns.getDisplayMedia=function(s){return!!(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)}(),ns.getStreamFromExtension=j.name===lr.CHROME&&Number(j.version)>34,ns.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let s=new RTCPeerConnection,$=!1;try{s.addTransceiver("audio"),$=!0}catch{}return s.close(),$}(),ns.supportMinBitrate=j.name===lr.CHROME||j.name===lr.EDGE,ns.supportSetRtpSenderParameters=function(){let s=ir();return!window.RTCRtpSender||!window.RTCRtpSender.prototype.setParameters||!window.RTCRtpSender.prototype.getParameters?!1:!!tp()||!(!ls()&&!E_())||s.name===lr.FIREFOX&&Number(s.version)>=64}(),j.name===lr.SAFARI&&(Number(j.version)>=14?ns.supportDualStream=!0:ns.supportDualStream=!1),ns.webAudioMediaStreamDest=function(){let s=ir();return!(s.name===lr.SAFARI&&Number(s.version)<12)}(),ns.supportReplaceTrack=function(){return window.RTCRtpSender?typeof RTCRtpSender.prototype.replaceTrack=="function":!1}(),ns.supportWebGL=typeof WebGLRenderingContext<"u",ns.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,tp()||(ns.webAudioWithAEC=!0),ns.supportShareAudio=function(){let s=ir();return(s.os===To.WIN_10||s.os===To.WIN_81||s.os===To.WIN_7||s.os===To.LINUX||s.os===To.MAC_OS||s.os===To.CHROMIUM_OS)&&s.name===lr.CHROME&&Number(s.version)>=74}(),ns.supportDataChannel=function(){return!!(hS(76)||function(s){let $=ir();return!($.name!==lr.FIREFOX||!$.osVersion)&&Number($.version)>=s}(68)||function(s){let $=ir();return!($.name!==lr.SAFARI||!$.osVersion)&&Number($.version)>=s}(14))}(),ns.supportPCSetConfiguration=function(){let s=window.RTCPeerConnection;return!br()&&!!s&&s.prototype.setConfiguration instanceof Function}(),ns.supportWebRTCEncodedTransform=function(){let s=ir();return s.name==="Chrome"&&Number(s.version)>=86}(),ns.supportWebRTCInsertableStream=function(){let s=ir();return(s.name===lr.CHROME||s.name===lr.EDGE)&&Number(s.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),v_(()=>{ns.supportDualStreamEncoding=function(){let s=ir();return Ft("DISABLE_WEBAUDIO")?!0:s.name==="Safari"&&Number(s.version)>=14||!!(s.name==="Chrome"&&/Windows/i.test(s.os||"")&&Number(s.version)>=100&&Ft("CHROME_DUAL_STREAM_USE_ENCODING"))}(),Et.info("browser compatibility",JSON.stringify(ns),JSON.stringify(j))})})();class _F extends Fr{constructor(){super(...arguments),gt(this,"resultStorage",new Map)}setLocalAudioStats(s,$,_e){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",s,this.checkAudioInputLevel(_e,$)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",s,this.checkSendAudioBitrate(_e,$))}setLocalVideoStats(s,$,_e){this.record("SEND_VIDEO_BITRATE_TOO_LOW",s,this.checkSendVideoBitrate(_e,$)),this.record("FRAMERATE_INPUT_TOO_LOW",s,this.checkFramerateInput(_e,$)),this.record("FRAMERATE_SENT_TOO_LOW",s,this.checkFramerateSent(_e))}setRemoteAudioStats(s,$){let _e=s.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",_e,this.checkAudioOutputLevel($))}setRemoteVideoStats(s,$){let _e=s.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",_e,this.checkVideoDecode($))}record(s,$,_e){if(Ft("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(s)||this.resultStorage.set(s,{result:[],isPrevNormal:!0});let tt=this.resultStorage.get(s);if(tt&&(tt.result.push(_e),tt.result.length>=5)){var rt;let it=vn(rt=tt.result).call(rt,!0);tt.isPrevNormal&&!it&&this.emit("exception",O4[s],s,$),!tt.isPrevNormal&&it&&this.emit("exception",O4[s]+2e3,s+"_RECOVER",$),tt.isPrevNormal=it,tt.result=[]}}checkAudioOutputLevel(s){return!(s.receiveBitrate>0&&s.receiveLevel===0)}checkAudioInputLevel(s,$){return $ instanceof ho&&!$.isActive||!!$.muted||s.sendVolumeLevel!==0}checkFramerateInput(s,$){let _e=null;$._encoderConfig&&$._encoderConfig.frameRate&&(_e=Js($._encoderConfig.frameRate));let tt=s.captureFrameRate;return!_e||!tt||!(_e>10&&tt<5||_e<10&&_e>=5&&tt<=1)}checkFramerateSent(s){return!(s.captureFrameRate&&s.sendFrameRate&&s.captureFrameRate>5&&s.sendFrameRate<=1)}checkSendVideoBitrate(s,$){return!!$.muted||s.sendBitrate!==0}checkSendAudioBitrate(s,$){return $ instanceof ho&&!$.isActive||!!$.muted||s.sendBitrate!==0}checkVideoDecode(s){return s.receiveBitrate===0||s.decodeFrameRate!==0}}let O4={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},qo=new class{markSubscribeStart(j,s){performance.mark("agora-web-sdk/".concat(j,"/subscribe-").concat(s))}markPublishStart(j,s){performance.mark("agora-web-sdk/".concat(j,"/publish-").concat(s))}measureFromSubscribeStart(j,s){let $=performance.getEntriesByName("agora-web-sdk/".concat(j,"/subscribe-").concat(s));if($.length>0){let _e=$[$.length-1];return Math.round(performance.now()-_e.startTime)}return 0}measureFromPublishStart(j,s){let $=performance.getEntriesByName("agora-web-sdk/".concat(j,"/publish-").concat(s));if($.length>0){let _e=$[$.length-1];return Math.round(performance.now()-_e.startTime)}return 0}};function ev(j,s){this.v=j,this.k=s}function Bn(j){return new ev(j,0)}var EF=WI,yF=du;qr({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var j=yF.f(this);return{promise:j.promise,resolve:j.resolve,reject:j.reject}}});var SF=du,TF=Im;qr({target:"Promise",stat:!0,forced:!0},{try:function(j){var s=SF.f(this),$=TF(j);return($.error?s.reject:s.resolve)($.value),s.promise}});var tv=ot(EF),P4=mm.f("asyncIterator"),vF=ot(P4);function d0(j){var s,$;function _e(rt,it){try{var at=j[rt](it),ct=at.value,dt=ct instanceof ev;tv.resolve(dt?ct.v:ct).then(function(ut){if(dt){var pt=rt==="return"?"return":"next";if(!ct.k||ut.done)return _e(pt,ut);ut=j[pt](ut).value}tt(at.done?"return":"normal",ut)},function(ut){_e("throw",ut)})}catch(ut){tt("throw",ut)}}function tt(rt,it){switch(rt){case"return":s.resolve({value:it,done:!0});break;case"throw":s.reject(it);break;default:s.resolve({value:it,done:!1})}(s=s.next)?_e(s.key,s.arg):$=null}this._invoke=function(rt,it){return new tv(function(at,ct){var dt={key:rt,arg:it,resolve:at,reject:ct,next:null};$?$=$.next=dt:(s=$=dt,_e(rt,it))})},typeof j.return!="function"&&(this.return=void 0)}function Fs(j){return function(){return new d0(j.apply(this,arguments))}}d0.prototype[typeof vm=="function"&&vF||"@@asyncIterator"]=function(){return this},d0.prototype.next=function(j){return this._invoke("next",j)},d0.prototype.throw=function(j){return this._invoke("throw",j)},d0.prototype.return=function(j){return this._invoke("return",j)};var D4=ot(go.Object.getOwnPropertySymbols),CF=qr,bF=ly.indexOf,RF=y2,nv=tn([].indexOf),x4=!!nv&&1/nv([1],1,-0)<0;CF({target:"Array",proto:!0,forced:x4||!RF("indexOf")},{indexOf:function(j){var s=arguments.length>1?arguments[1]:void 0;return x4?nv(this,j,s)||0:bF(this,j,s)}});var IF=Xu("Array").indexOf,AF=wt,NF=IF,rv=Array.prototype,L4=ot(function(j){var s=j.indexOf;return j===rv||AF(rv,j)&&s===rv.indexOf?NF:s}),wF=Wo,k4=Ny;qr({target:"Object",stat:!0,forced:st(function(){k4(1)})},{keys:function(j){return k4(wF(j))}});var OF=ot(go.Object.keys);function PF(j,s){if(j==null)return{};var $,_e,tt=function(it,at){if(it==null)return{};var ct,dt,ut={},pt=OF(it);for(dt=0;dt<pt.length;dt++)ct=pt[dt],L4(at).call(at,ct)>=0||(ut[ct]=it[ct]);return ut}(j,s);if(D4){var rt=D4(j);for(_e=0;_e<rt.length;_e++)$=rt[_e],L4(s).call(s,$)>=0||Object.prototype.propertyIsEnumerable.call(j,$)&&(tt[$]=j[$])}return tt}var $4={exports:{}};(function(j,s){j.exports=(()=>{var $={8:(rt,it,at)=>{at.r(it),at.d(it,{Parser:()=>Mn,Printer:()=>Vs,parse:()=>Fn,print:()=>sr});let ct=`
`,dt="".concat("\r").concat(ct),ut=" ",pt;function mt(mn){return mn>="0"&&mn<="9"}function yt(mn){return mn>="!"&&mn<="~"}function At(mn){return yt(mn)||mn>=""&&mn<="ÿ"}function Ct(mn){return mn==="!"||mn>="#"&&mn<="'"||mn>="*"&&mn<="+"||mn>="-"&&mn<="."||mn>="0"&&mn<="9"||mn>="A"&&mn<="Z"||mn>="^"&&mn<="~"}function It(mn){return mn>="1"&&mn<="9"}function kt(mn){return mn>="A"&&mn<="Z"||mn>="a"&&mn<="z"}function Vt(mn){return mn==="d"||mn==="h"||mn==="m"||mn==="s"}function Bt(mn){return mn>""&&mn<"	"||mn>"\v"&&mn<"\f"||mn>""&&mn<"ÿ"}function en(mn){return kt(mn)||mt(mn)||mn==="+"||mn==="/"}function zt(mn){return mt(mn)||kt(mn)||mn==="+"||mn==="/"||mn==="-"||mn==="_"}function Yt(mn){return kt(mn)||mt(mn)||mn==="+"||mn==="/"}function Qt(mn,Tt){var Mt=Object.keys(mn);if(Object.getOwnPropertySymbols){var Gt=Object.getOwnPropertySymbols(mn);Tt&&(Gt=Gt.filter(function(pn){return Object.getOwnPropertyDescriptor(mn,pn).enumerable})),Mt.push.apply(Mt,Gt)}return Mt}function Xt(mn){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?Qt(Object(Mt),!0).forEach(function(Gt){cn(mn,Gt,Mt[Gt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mn,Object.getOwnPropertyDescriptors(Mt)):Qt(Object(Mt)).forEach(function(Gt){Object.defineProperty(mn,Gt,Object.getOwnPropertyDescriptor(Mt,Gt))})}return mn}function cn(mn,Tt,Mt){return Tt in mn?Object.defineProperty(mn,Tt,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):mn[Tt]=Mt,mn}(function(mn){mn.VERSION="v",mn.ORIGIN="o",mn.SESSION_NAME="s",mn.INFORMATION="i",mn.URI="u",mn.EMAIL="e",mn.PHONE="p",mn.CONNECTION="c",mn.BANDWIDTH="b",mn.TIME="t",mn.REPEAT="r",mn.ZONE_ADJUSTMENTS="z",mn.KEY="k",mn.ATTRIBUTE="a",mn.MEDIA="m"})(pt||(pt={}));class hn{consumeText(Tt,Mt){let Gt=Mt;for(;Gt<Tt.length;){let pn=Tt[Gt];if(pn==="\0"||pn==="\r"||pn===ct)break;Gt+=1}if(Gt-Mt==0)throw new Error("Invalid text, at ".concat(Tt));return Gt}consumeUnicastAddress(Tt,Mt,Gt){return this.consumeTill(Tt,Mt,ut)}consumeOneOrMore(Tt,Mt,Gt){let pn=Mt;for(;Gt(Tt[pn]);)pn++;if(pn-Mt==0)throw new Error("Invalid rule at ".concat(Mt,"."));return pn}consumeSpace(Tt,Mt){if(Tt[Mt]===ut)return Mt+1;throw new Error("Invalid space at ".concat(Mt,"."))}consumeIP4Address(Tt,Mt){let Gt=Mt;for(let pn=0;pn<4;pn++)if(Gt=this.consumeDecimalUChar(Tt,Gt),pn!==3){if(Tt[Gt]!==".")throw new Error("Invalid IP4 address.");Gt++}return Gt}consumeDecimalUChar(Tt,Mt){let Gt=Mt;for(let jn=0;jn<3&&mt(Tt[Gt]);jn++,Gt++);if(Gt-Mt==0)throw new Error("Invalid decimal uchar.");let pn=parseInt(Tt.slice(Mt,Gt));if(pn>=0&&pn<=255)return Gt;throw new Error("Invalid decimal uchar")}consumeIP6Address(Tt,Mt){let Gt=this.consumeHexpart(Tt,Mt);return Tt[Gt]===":"&&(Gt+=1,Gt=this.consumeIP4Address(Tt,Gt)),Gt}consumeHexpart(Tt,Mt){let Gt=Mt;if(Tt[Gt]===":"&&Tt[Gt+1]===":"){Gt+=2;try{Gt=this.consumeHexseq(Tt,Gt)}catch{}return Gt}if(Gt=this.consumeHexseq(Tt,Gt),Tt[Gt]===":"&&Tt[Gt+1]===":"){Gt+=2;try{Gt=this.consumeHexseq(Tt,Gt)}catch{}return Gt}return Gt}consumeHexseq(Tt,Mt){let Gt=Mt;for(;Gt=this.consumeHex4(Tt,Gt),Tt[Gt]===":"&&Tt[Gt+1]!==":";)Gt+=1;return Gt}consumeHex4(Tt,Mt){let Gt=0;for(;Gt<4;Gt++)if(!((pn=Tt[Mt+Gt])>="0"&&pn<="9"||pn>="a"&&pn<="f"||pn>="A"&&pn<="F")){if(Gt===0)throw new Error("Invalid hex 4");break}var pn;return Mt+Gt}consumeFQDN(Tt,Mt){let Gt=Mt;for(;mt(Tt[Gt])||kt(Tt[Gt])||Tt[Gt]==="-"||Tt[Gt]===".";)Gt+=1;if(Gt-Mt<4)throw new Error("Invalid FQDN");return Gt}consumeExtnAddr(Tt,Mt){return this.consumeOneOrMore(Tt,Mt,At)}consumeMulticastAddress(Tt,Mt,Gt){switch(Gt){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(Tt,Mt);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(Tt,Mt);default:try{return this.consumeFQDN(Tt,Mt)}catch{return this.consumeExtnAddr(Tt,Mt)}}}consumeIP6MulticastAddress(Tt,Mt){let Gt=this.consumeHexpart(Tt,Mt);return Tt[Gt]==="/"?this.consumeInteger(Tt,Gt+1):Gt}consumeIP4MulticastAddress(Tt,Mt){let Gt=Mt+3,pn=Tt.slice(Mt,Gt),jn=parseInt(pn);if(jn<224||jn>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let Vr=0;Vr<3;Vr++){if(Tt[Gt]!==".")throw new Error("Invalid IP4 multicast address.");Gt+=1,Gt=this.consumeDecimalUChar(Tt,Gt)}return Tt[Gt]==="/"&&(Gt+=1),Gt=this.consumeTTL(Tt,Gt),Tt[Gt]==="/"&&(Gt=this.consumeInteger(Tt,Gt)),Gt}consumeInteger(Tt,Mt){if(!It(Tt[Mt]))throw new Error("Invalid integer.");for(Mt+=1;mt(Tt[Mt]);)Mt+=1;return Mt}consumeTTL(Tt,Mt){if(Tt[Mt]==="0")return Mt+1;if(!It(Tt[Mt]))throw new Error("Invalid TTL.");Mt+=1;for(let Gt=0;Gt<2&&mt(Tt[Mt]);Gt++)Mt+=1;return Mt}consumeToken(Tt,Mt){return this.consumeOneOrMore(Tt,Mt,Ct)}consumeTime(Tt,Mt){let Gt=Mt;if(Tt[Gt]==="0")return Gt+1;for(It(Tt[Gt])&&(Gt+=1);mt(Tt[Gt]);)Gt++;if(Gt-Mt<10)throw new Error("Invalid time");return Gt}consumeAddress(Tt,Mt){return this.consumeTill(Tt,Mt,ut)}consumeTypedTime(Tt,Mt){let Gt=Mt;return Gt=this.consumeOneOrMore(Tt,Gt,mt),Vt(Tt[Gt])?Gt+1:Gt}consumeRepeatInterval(Tt,Mt){if(!It(Tt[Mt]))throw new Error("Invalid repeat interval");for(Mt+=1;mt(Tt[Mt]);)Mt+=1;return Vt(Tt[Mt])&&(Mt+=1),Mt}consumePort(Tt,Mt){return this.consumeOneOrMore(Tt,Mt,mt)}consume(Tt,Mt,Gt){for(let pn=0;pn<Gt.length;pn++){if(Mt+pn>=Tt.length)throw new Error("consume exceeding value length");if(Tt[Mt+pn]!==Gt[pn])throw new Error("consume ".concat(Gt," failed at ").concat(pn))}return Mt+Gt.length}consumeTill(Tt,Mt,Gt){let pn=Mt;for(;pn<Tt.length&&(typeof Gt!="string"||Tt[pn]!==Gt)&&(typeof Gt!="function"||!Gt(Tt[pn]));)pn++;return pn}}class Mn extends hn{constructor(){super(),cn(this,"records",[]),cn(this,"currentLine",0)}parse(Tt){let Mt=this.probeEOL(Tt);this.records=Tt.split(Mt).filter(yo=>!!yo.trim()).map(this.parseLine),this.currentLine=0;let Gt=this.parseVersion(),pn=this.parseOrigin(),jn=this.parseSessionName(),Vr=this.parseInformation(),Qo=this.parseUri(),Bs=this.parseEmail(),Hu=this.parsePhone(),FE=this.parseConnection(),jE=this.parseBandWidth(),Ml=this.parseTimeFields(),wp=this.parseKey(),l1=this.parseSessionAttribute(),oo=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:Gt,origin:pn,sessionName:jn,information:Vr,uri:Qo,emails:Bs,phones:Hu,connection:FE,bandwidths:jE,timeFields:Ml,key:wp,attributes:l1,mediaDescriptions:oo}}getCurrentRecord(){let Tt=this.records[this.currentLine];if(!Tt)throw new Error("Record doesn't exit.");return Tt}probeEOL(Tt){for(let Mt=0;Mt<Tt.length;Mt++)if(Tt[Mt]===ct)return Tt[Mt-1]==="\r"?dt:ct;throw new Error("Invalid newline character.")}parseLine(Tt,Mt){if(Tt.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");let Gt=Tt[0];if(Tt[1]!=="=")throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:Gt,value:Tt.slice(2),line:Mt,cur:0}}parseSessionAttribute(){let Tt=new Or;for(;this.currentLine<this.records.length;){let Mt=this.getCurrentRecord();if(Mt.type!==pt.ATTRIBUTE)break;let Gt={attField:this.extractOneOrMore(Mt,pn=>Ct(pn)&&pn!==":"),_cur:0};Mt.value[Mt.cur]===":"&&(Mt.cur+=1,Gt.attValue=this.extractOneOrMore(Mt,Bt)),Tt.parse(Gt),this.currentLine++}return Tt.digest()}parseMediaAttributes(Tt){let Mt=new Eo(Tt);for(;this.currentLine<this.records.length;){let Gt=this.getCurrentRecord();if(Gt.type!==pt.ATTRIBUTE)break;let pn={attField:this.extractOneOrMore(Gt,jn=>Ct(jn)&&jn!==":"),_cur:0};Gt.value[Gt.cur]===":"&&(Gt.cur+=1,pn.attValue=this.extractOneOrMore(Gt,Bt)),Mt.parse(pn),this.currentLine++}return Mt.digest()}parseKey(){let Tt=this.getCurrentRecord();if(Tt.type===pt.KEY){if(Tt.value==="prompt"||Tt.value==="clear:"||Tt.value==="base64:"||Tt.value==="uri:")return Tt.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){let Tt=this.getCurrentRecord();if(Tt.type===pt.ZONE_ADJUSTMENTS){let Mt=[];for(;;)try{let Gt=this.extract(Tt,this.consumeTime);this.consumeSpaceForRecord(Tt);let pn=!1;Tt.value[Tt.cur]==="-"&&(pn=!0,Tt.cur+=1);let jn=this.extract(Tt,this.consumeTypedTime);Mt.push({time:Gt,typedTime:jn,back:pn})}catch{break}if(Mt.length===0)throw new Error("Invalid zone adjustments");return this.currentLine++,Mt}return[]}parseRepeat(){let Tt=[];for(;;){let Mt=this.getCurrentRecord();if(Mt.type!==pt.REPEAT)break;{let Gt=this.extract(Mt,this.consumeRepeatInterval),pn=this.parseTypedTime(Mt);Tt.push({repeatInterval:Gt,typedTimes:pn}),this.currentLine++}}return Tt}parseTypedTime(Tt){let Mt=[];for(;;)try{this.consumeSpaceForRecord(Tt),Mt.push(this.extract(Tt,this.consumeTypedTime))}catch{break}if(Mt.length===0)throw new Error("Invalid typed time.");return Mt}parseTime(){let Tt=this.getCurrentRecord(),Mt=this.extract(Tt,this.consumeTime);this.consumeSpaceForRecord(Tt);let Gt=this.extract(Tt,this.consumeTime);return this.currentLine++,{startTime:Mt,stopTime:Gt}}parseBandWidth(){let Tt=[];for(;this.currentLine<this.records.length;){let Mt=this.getCurrentRecord();if(Mt.type!==pt.BANDWIDTH)break;{let Gt=this.extractOneOrMore(Mt,Ct);if(Mt.value[Mt.cur]!==":")throw new Error("Invalid bandwidth field.");Mt.cur++;let pn=this.extractOneOrMore(Mt,mt);Tt.push({bwtype:Gt,bandwidth:pn}),this.currentLine++}}return Tt}parseVersion(){let Tt=this.getCurrentRecord();if(Tt.type!==pt.VERSION)throw new Error("first sdp record must be version");let Mt=Tt.value.slice(0,this.consumeOneOrMore(Tt.value,0,mt));if(Mt.length!==Tt.value.length)throw new Error('invalid proto version, "v='.concat(Tt.value,'"'));return this.currentLine++,Mt}parseOrigin(){let Tt=this.getCurrentRecord();if(Tt.type!==pt.ORIGIN)throw new Error("second line of sdp must be origin");let Mt=this.extractOneOrMore(Tt,At);this.consumeSpaceForRecord(Tt);let Gt=this.extractOneOrMore(Tt,mt);this.consumeSpaceForRecord(Tt);let pn=this.extractOneOrMore(Tt,mt);this.consumeSpaceForRecord(Tt);let jn=this.extractOneOrMore(Tt,Ct);this.consumeSpaceForRecord(Tt);let Vr=this.extractOneOrMore(Tt,Ct);this.consumeSpaceForRecord(Tt);let Qo=this.extract(Tt,this.consumeUnicastAddress);return this.currentLine++,{username:Mt,sessId:Gt,sessVersion:pn,nettype:jn,addrtype:Vr,unicastAddress:Qo}}parseSessionName(){let Tt=this.getCurrentRecord();if(Tt.type===pt.SESSION_NAME){let Mt=this.extract(Tt,this.consumeText);return this.currentLine++,Mt}}parseInformation(){let Tt=this.getCurrentRecord();if(Tt.type!==pt.INFORMATION)return;let Mt=this.extract(Tt,this.consumeText);return this.currentLine++,Mt}parseUri(){let Tt=this.getCurrentRecord();if(Tt.type===pt.URI)return this.currentLine++,Tt.value}parseEmail(){let Tt=[];for(;;){let Mt=this.getCurrentRecord();if(Mt.type!==pt.EMAIL)break;Tt.push(Mt.value),this.currentLine++}return Tt}parsePhone(){let Tt=[];for(;;){let Mt=this.getCurrentRecord();if(Mt.type!==pt.PHONE)break;Tt.push(Mt.value),this.currentLine++}return Tt}parseConnection(){let Tt=this.getCurrentRecord();if(Tt.type===pt.CONNECTION){let Mt=this.extractOneOrMore(Tt,Ct);this.consumeSpaceForRecord(Tt);let Gt=this.extractOneOrMore(Tt,Ct);this.consumeSpaceForRecord(Tt);let pn=this.extract(Tt,this.consumeAddress);return this.currentLine++,{nettype:Mt,addrtype:Gt,address:pn}}}parseMedia(){let Tt=this.getCurrentRecord(),Mt=this.extract(Tt,this.consumeToken);this.consumeSpaceForRecord(Tt);let Gt=this.extract(Tt,this.consumePort);Tt.value[Tt.cur]==="/"&&(Tt.cur+=1,Gt+=this.extract(Tt,this.consumeInteger)),this.consumeSpaceForRecord(Tt);let pn=[];for(pn.push(this.extract(Tt,this.consumeToken));Tt.value[Tt.cur]==="/";)Tt.cur+=1,pn.push(this.extract(Tt,this.consumeToken));if(pn.length===0)throw new Error("Invalid proto");let jn=this.parseFmt(Tt);return this.currentLine++,{mediaType:Mt,port:Gt,protos:pn,fmts:jn}}parseTimeFields(){let Tt=[];for(;this.getCurrentRecord().type===pt.TIME;){let Mt=this.parseTime(),Gt=this.parseRepeat(),pn=this.parseZone();Tt.push({time:Mt,repeats:Gt,zones:pn})}return Tt}parseMediaDescription(){let Tt=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===pt.MEDIA;){let Mt=this.parseMedia(),Gt=this.parseInformation(),pn=this.parseConnections(),jn=this.parseBandWidth(),Vr=this.parseKey(),Qo=this.parseMediaAttributes(Mt);Tt.push({media:Mt,information:Gt,connections:pn,bandwidths:jn,key:Vr,attributes:Qo})}return Tt}parseConnections(){let Tt=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===pt.CONNECTION;)Tt.push(this.parseConnection());return Tt}parseFmt(Tt){let Mt=[];for(;;)try{this.consumeSpaceForRecord(Tt),Mt.push(this.extract(Tt,this.consumeToken))}catch{break}if(Mt.length===0)throw new Error("Invalid fmts");return Mt}extract(Tt,Mt,...Gt){let pn=Mt.call(this,Tt.value,Tt.cur,...Gt),jn=Tt.value.slice(Tt.cur,pn);return Tt.cur=pn,jn}extractOneOrMore(Tt,Mt){let Gt=this.consumeOneOrMore(Tt.value,Tt.cur,Mt),pn=Tt.value.slice(Tt.cur,Gt);return Tt.cur=Gt,pn}consumeSpaceForRecord(Tt){if(Tt.value[Tt.cur]!==ut)throw new Error("Invalid space at ".concat(Tt.cur,"."));Tt.cur+=1}}class Gn extends hn{constructor(...Tt){super(...Tt),cn(this,"attributes",void 0),cn(this,"digested",!1)}extractOneOrMore(Tt,Mt,Gt){let pn=this.consumeOneOrMore(Tt.attValue,Tt._cur,Mt),jn=Tt.attValue.slice(Tt._cur,pn),[Vr,Qo]=Gt||[];if(typeof Vr=="number"&&jn.length<Vr)throw new Error("error in length, should be more or equal than ".concat(Vr," characters."));if(typeof Qo=="number"&&jn.length>Qo)throw new Error("error in length, should be less or equal than ".concat(Qo," characters."));return Tt._cur=pn,jn}consumeAttributeSpace(Tt){if(Tt.attValue[Tt._cur]!==ut)throw new Error("Invalid space at ".concat(Tt._cur,"."));Tt._cur+=1}extract(Tt,Mt,...Gt){if(!Tt.attValue)throw new Error("Nothing to extract from attValue.");let pn=Mt.call(this,Tt.attValue,Tt._cur,...Gt),jn=Tt.attValue.slice(Tt._cur,pn);return Tt._cur=pn,jn}atEnd(Tt){if(!Tt.attValue)throw new Error;return Tt._cur>=Tt.attValue.length}peekChar(Tt){if(!Tt.attValue)throw new Error;return Tt.attValue[Tt._cur]}peek(Tt,Mt){if(!Tt.attValue)throw new Error;for(let Gt=0;Gt<Mt.length;Gt++)if(Mt[Gt]!==Tt.attValue[Tt._cur+Gt])return!1;return!0}parseIceUfrag(Tt){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(Tt,en,[4,256])}parseIcePwd(Tt){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(Tt,en,[22,256])}parseIceOptions(Tt){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");let Mt=[];for(;!this.atEnd(Tt);){Mt.push(this.extractOneOrMore(Tt,en));try{this.consumeAttributeSpace(Tt)}catch(Gt){if(this.atEnd(Tt))break;throw Gt}}this.attributes.iceOptions=Mt}parseFingerprint(Tt){let Mt=this.extract(Tt,this.consumeToken);this.consumeAttributeSpace(Tt);let Gt=this.extract(Tt,this.consumeTill);this.attributes.fingerprints.push({hashFunction:Mt,fingerprint:Gt})}parseExtmap(Tt){let Mt=this.extractOneOrMore(Tt,mt),Gt;this.peekChar(Tt)==="/"&&(this.extract(Tt,this.consume,"/"),Gt=this.extract(Tt,this.consumeToken)),this.consumeAttributeSpace(Tt);let pn=this.extract(Tt,this.consumeTill,ut),jn=Xt(Xt({entry:parseInt(Mt,10)},Gt&&{direction:Gt}),{},{extensionName:pn});this.peekChar(Tt)===ut&&(this.consumeAttributeSpace(Tt),jn.extensionAttributes=this.extract(Tt,this.consumeTill)),this.attributes.extmaps.push(jn)}parseSetup(Tt){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");let Mt=this.extract(Tt,this.consumeTill);if(Mt!=="active"&&Mt!=="passive"&&Mt!=="actpass"&&Mt!=="holdconn")throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=Mt}}class Or extends Gn{constructor(...Tt){super(...Tt),cn(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(Tt){if(this.digested)throw new Error("already digested");try{switch(Tt.attField){case"group":this.parseGroup(Tt);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(Tt);break;case"ice-pwd":this.parseIcePwd(Tt);break;case"ice-options":this.parseIceOptions(Tt);break;case"fingerprint":this.parseFingerprint(Tt);break;case"setup":this.parseSetup(Tt);break;case"tls-id":this.parseTlsId(Tt);break;case"identity":this.parseIdentity(Tt);break;case"extmap":this.parseExtmap(Tt);break;case"msid-semantic":this.parseMsidSemantic(Tt);break;default:Tt.ignored=!0,this.attributes.unrecognized.push(Tt)}}catch(Mt){throw console.error("parsing session attribute ".concat(Tt.attField,' error, "a=').concat(Tt.attField,":").concat(Tt.attValue,'"')),Mt}if(!Tt.ignored&&Tt.attValue&&!this.atEnd(Tt))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(Tt){let Mt=this.extract(Tt,this.consumeToken),Gt=[];for(;!this.atEnd(Tt)&&this.peekChar(Tt)===ut;)this.consumeAttributeSpace(Tt),Gt.push(this.extract(Tt,this.consumeToken));this.attributes.groups.push({semantic:Mt,identificationTag:Gt})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(Tt){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(Tt,zt)}parseIdentity(Tt){let Mt=this.extractOneOrMore(Tt,Yt),Gt=[];for(;!this.atEnd(Tt)&&this.peekChar(Tt)===ut;){this.consumeAttributeSpace(Tt);let pn=this.extract(Tt,this.consumeToken);this.extract(Tt,this.consume,"=");let jn=this.extractOneOrMore(Tt,Vr=>Vr!==ut&&Bt(Vr));Gt.push({name:pn,value:jn})}this.attributes.identities.push({assertionValue:Mt,extensions:Gt})}parseMsidSemantic(Tt){this.peekChar(Tt)===ut&&this.consumeAttributeSpace(Tt);let Mt={semantic:this.extract(Tt,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(Tt)}catch{break}if(this.peekChar(Tt)==="*"){this.extract(Tt,this.consume,"*"),Mt.applyForAll=!0;break}{let Gt=this.extract(Tt,this.consumeTill,ut);Mt.identifierList.push(Gt)}}this.attributes.msidSemantic=Mt}}class Eo extends Gn{constructor(Tt){super(),cn(this,"attributes",void 0),Tt.protos.indexOf("RTP")!==-1||Tt.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(Tt){if(this.digested)throw new Error("already digested");try{switch(Tt.attField){case"extmap":this.parseExtmap(Tt);break;case"setup":this.parseSetup(Tt);break;case"ice-ufrag":this.parseIceUfrag(Tt);break;case"ice-pwd":this.parseIcePwd(Tt);break;case"ice-options":this.parseIceOptions(Tt);break;case"candidate":this.parseCandidate(Tt);break;case"remote-candidate":this.parseRemoteCandidate(Tt);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(Tt);break;case"rtpmap":this.parseRtpmap(Tt);break;case"ptime":this.parsePtime(Tt);break;case"maxptime":this.parseMaxPtime(Tt);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(Tt);break;case"ssrc":this.parseSSRC(Tt);break;case"fmtp":this.parseFmtp(Tt);break;case"rtcp-fb":this.parseRtcpFb(Tt);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(Tt);break;case"mid":this.parseMid(Tt);break;case"msid":this.parseMsid(Tt);break;case"imageattr":this.parseImageAttr(Tt);break;case"rid":this.parseRid(Tt);break;case"simulcast":this.parseSimulcast(Tt);break;case"sctp-port":this.parseSctpPort(Tt);break;case"max-message-size":this.parseMaxMessageSize(Tt);break;case"ssrc-group":this.parseSSRCGroup(Tt);break;default:Tt.ignored=!0,this.attributes.unrecognized.push(Tt)}}catch(Mt){throw console.error("parsing media attribute ".concat(Tt.attField,' error, "a=').concat(Tt.attField,":").concat(Tt.attValue,'"')),Mt}if(!Tt.ignored&&Tt.attValue&&!this.atEnd(Tt))throw new Error("attribute parsing error")}parseCandidate(Tt){let Mt=this.extractOneOrMore(Tt,en,[1,32]);this.consumeAttributeSpace(Tt);let Gt=this.extractOneOrMore(Tt,mt,[1,5]);this.consumeAttributeSpace(Tt);let pn=this.extract(Tt,this.consumeToken);this.consumeAttributeSpace(Tt);let jn=this.extractOneOrMore(Tt,mt,[1,10]);this.consumeAttributeSpace(Tt);let Vr=this.extract(Tt,this.consumeAddress);this.consumeAttributeSpace(Tt);let Qo=this.extract(Tt,this.consumePort);this.consumeAttributeSpace(Tt),this.extract(Tt,this.consume,"typ"),this.consumeAttributeSpace(Tt);let Bs={foundation:Mt,componentId:Gt,transport:pn,priority:jn,connectionAddress:Vr,port:Qo,type:this.extract(Tt,this.consumeToken),extension:{}};for(this.peek(Tt," raddr")&&(this.extract(Tt,this.consume," raddr"),this.consumeAttributeSpace(Tt),Bs.relAddr=this.extract(Tt,this.consumeAddress)),this.peek(Tt," rport")&&(this.extract(Tt,this.consume," rport"),this.consumeAttributeSpace(Tt),Bs.relPort=this.extract(Tt,this.consumePort));this.peekChar(Tt)===ut;){this.consumeAttributeSpace(Tt);let Hu=this.extract(Tt,this.consumeToken);this.consumeAttributeSpace(Tt),Bs.extension[Hu]=this.extractOneOrMore(Tt,yt)}this.attributes.candidates.push(Bs)}parseRemoteCandidate(Tt){let Mt=[];for(;;){let Gt=this.extractOneOrMore(Tt,mt,[1,5]);this.consumeAttributeSpace(Tt);let pn=this.extract(Tt,this.consumeAddress);this.consumeAttributeSpace(Tt);let jn=this.extract(Tt,this.consumePort);Mt.push({componentId:Gt,connectionAddress:pn,port:jn});try{this.consumeAttributeSpace(Tt)}catch{break}}this.attributes.remoteCandidatesList.push(Mt)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(Tt){let Mt=this.extract(Tt,this.consumeToken);this.consumeAttributeSpace(Tt);let Gt=this.extract(Tt,this.consumeTill,"/");this.extract(Tt,this.consume,"/");let pn={encodingName:Gt,clockRate:this.extractOneOrMore(Tt,mt)};this.atEnd(Tt)||this.peekChar(Tt)!=="/"||(this.extract(Tt,this.consume,"/"),pn.encodingParameters=parseInt(this.extract(Tt,this.consumeTill),10));let jn=this.attributes.payloads.find(Vr=>Vr.payloadType===parseInt(Mt,10));jn?jn.rtpMap=pn:this.attributes.payloads.push({payloadType:parseInt(Mt,10),rtpMap:pn,rtcpFeedbacks:[]})}parsePtime(Tt){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(Tt,this.consumeTill)}parseMaxPtime(Tt){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(Tt,this.consumeTill)}parseDirection(Tt){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=Tt.attField}parseSSRC(Tt){let Mt=this.extractOneOrMore(Tt,mt);this.consumeAttributeSpace(Tt);let Gt=this.extract(Tt,this.consumeTill,":"),pn;this.peekChar(Tt)===":"&&(this.extract(Tt,this.consume,":"),pn=this.extract(Tt,this.consumeTill));let jn=this.attributes.ssrcs.find(Vr=>Vr.ssrcId===parseInt(Mt,10));jn?jn.attributes[Gt]=pn:this.attributes.ssrcs.push({ssrcId:parseInt(Mt,10),attributes:{[Gt]:pn}})}parseFmtp(Tt){let Mt=this.extract(Tt,this.consumeTill,ut);this.consumeAttributeSpace(Tt);let Gt=this.extract(Tt,this.consumeTill),pn={};Gt.split(";").forEach(Vr=>{let[Qo,Bs]=Vr.split("=");Qo=Qo.trim();let Hu=typeof Bs=="string"?Bs.trim():null;typeof Qo=="string"&&Qo.length>0&&(pn[Qo]=Hu)});let jn=this.attributes.payloads.find(Vr=>Vr.payloadType===parseInt(Mt,10));jn?jn.fmtp={parameters:pn}:this.attributes.payloads.push({payloadType:parseInt(Mt,10),rtcpFeedbacks:[],fmtp:{parameters:pn}})}parseFmtParameters(Tt){let Mt={},Gt=this.extract(Tt,this.consumeTill,"=");Tt._cur++;let pn=this.extract(Tt,this.consumeTill,";");for(Mt[Gt]=pn;Tt.attValue[Tt._cur]===";";){let jn=this.extract(Tt,this.consumeTill,"=");Tt._cur++;let Vr=this.extract(Tt,this.consumeTill,";");Mt[jn]=Vr}return Mt}parseRtcpFb(Tt){let Mt="";Mt=this.peekChar(Tt)==="*"?this.extract(Tt,this.consume,"*"):this.extract(Tt,this.consumeTill,ut),this.consumeAttributeSpace(Tt);let Gt=this.extract(Tt,this.consumeTill,ut),pn;if(Gt==="trr-int")pn={type:Gt,interval:this.extract(Tt,this.consumeTill)};else{let jn={type:Gt};this.peekChar(Tt)===ut&&(this.consumeAttributeSpace(Tt),jn.parameter=this.extract(Tt,this.consumeToken),this.peekChar(Tt)===ut&&(jn.additional=this.extract(Tt,this.consumeTill))),pn=jn}if(Mt==="*")this.attributes.rtcpFeedbackWildcards.push(pn);else{let jn=this.attributes.payloads.find(Vr=>Vr.payloadType===parseInt(Mt,10));jn?jn.rtcpFeedbacks.push(pn):this.attributes.payloads.push({payloadType:parseInt(Mt,10),rtcpFeedbacks:[pn]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(Tt){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");let Mt={port:this.extract(Tt,this.consumePort)};this.peekChar(Tt)===ut&&(this.consumeAttributeSpace(Tt),Mt.netType=this.extractOneOrMore(Tt,Ct),this.consumeAttributeSpace(Tt),Mt.addressType=this.extractOneOrMore(Tt,Ct),this.consumeAttributeSpace(Tt),Mt.address=this.extract(Tt,this.consumeAddress)),this.attributes.rtcp=Mt}parseMsid(Tt){let Mt={id:this.extractOneOrMore(Tt,Ct,[1,64])};this.peekChar(Tt)===ut&&(this.consumeAttributeSpace(Tt),Mt.appdata=this.extractOneOrMore(Tt,Ct,[1,64])),this.attributes.msids.push(Mt)}parseImageAttr(Tt){this.attributes.imageattr.push(Tt.attValue)}parseRid(Tt){let Mt=this.extractOneOrMore(Tt,pn=>kt(pn)||mt(pn)||pn==="_"||pn==="-");this.consumeAttributeSpace(Tt);let Gt={id:Mt,direction:this.extract(Tt,this.consumeToken),params:[]};if(this.peekChar(Tt)===ut){if(this.consumeAttributeSpace(Tt),this.peek(Tt,"pt=")){this.extract(Tt,this.consume,"pt=");let pn=[];for(;;){let jn=this.extract(Tt,this.consumeToken);pn.push(jn);try{this.extract(Tt,this.consume,",")}catch{break}}Gt.payloads=pn,this.peekChar(Tt)===ut&&this.extract(Tt,this.consume,ut)}for(;;){let pn=this.extract(Tt,this.consumeToken);switch(pn){case"depend":{let jn={type:pn,rids:this.extract(Tt,this.consume,"=").split(",")};Gt.params.push(jn);break}default:{let jn={type:pn};this.peekChar(Tt)==="="&&(this.extract(Tt,this.consume,"="),jn.val=this.extract(Tt,this.consumeTill,";")),Gt.params.push(jn)}}try{this.extract(Tt,this.consume,";")}catch{break}}}this.attributes.rids.push(Gt)}parseSimulcast(Tt){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=Tt.attValue,this.extract(Tt,this.consumeTill)}parseSctpPort(Tt){this.attributes.sctpPort=this.extractOneOrMore(Tt,mt,[1,5])}parseMaxMessageSize(Tt){this.attributes.maxMessageSize=this.extractOneOrMore(Tt,mt,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(Tt){this.attributes.mid=this.extract(Tt,this.consumeToken)}parseSSRCGroup(Tt){let Mt=this.extract(Tt,this.consumeToken),Gt=[];for(;;)try{this.consumeAttributeSpace(Tt);let pn=this.extract(Tt,this.consumeInteger);Gt.push(parseInt(pn,10))}catch{break}this.attributes.ssrcGroups.push({semantic:Mt,ssrcIds:Gt})}}function $r(mn,Tt,Mt){return Tt in mn?Object.defineProperty(mn,Tt,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):mn[Tt]=Mt,mn}class Vs{constructor(){$r(this,"eol",dt)}print(Tt,Mt){let Gt="";return Mt&&(this.eol=Mt),Gt+=this.printVersion(Tt.version),Gt+=this.printOrigin(Tt.origin),Gt+=this.printSessionName(Tt.sessionName),Gt+=this.printInformation(Tt.information),Gt+=this.printUri(Tt.uri),Gt+=this.printEmail(Tt.emails),Gt+=this.printPhone(Tt.phones),Gt+=this.printConnection(Tt.connection),Gt+=this.printBandwidth(Tt.bandwidths),Gt+=this.printTimeFields(Tt.timeFields),Gt+=this.printKey(Tt.key),Gt+=this.printSessionAttributes(Tt.attributes),Gt+=this.printMediaDescription(Tt.mediaDescriptions),Gt}printVersion(Tt){return"v=".concat(Tt).concat(this.eol)}printOrigin(Tt){return"o=".concat(Tt.username," ").concat(Tt.sessId," ").concat(Tt.sessVersion," ").concat(Tt.nettype," ").concat(Tt.addrtype," ").concat(Tt.unicastAddress).concat(this.eol)}printSessionName(Tt){return Tt?"s=".concat(Tt).concat(this.eol):""}printInformation(Tt){return Tt?"i=".concat(Tt).concat(this.eol):""}printUri(Tt){return Tt?"u=".concat(Tt).concat(this.eol):""}printEmail(Tt){let Mt="";for(let Gt of Tt)Mt+="e=".concat(Gt).concat(this.eol);return Mt}printPhone(Tt){let Mt="";for(let Gt of Tt)Mt+="e=".concat(Gt).concat(this.eol);return Mt}printConnection(Tt){return Tt?"c=".concat(Tt.nettype," ").concat(Tt.addrtype," ").concat(Tt.address).concat(this.eol):""}printBandwidth(Tt){let Mt="";for(let Gt of Tt)Mt+="b=".concat(Gt.bwtype,":").concat(Gt.bandwidth).concat(this.eol);return Mt}printTimeFields(Tt){let Mt="";for(let Gt of Tt){Mt+="t=".concat(Gt.time.startTime," ").concat(Gt.time.startTime).concat(this.eol);for(let pn of Gt.repeats)Mt+="r=".concat(pn.repeatInterval," ").concat(pn.typedTimes.join(" ")).concat(this.eol);Gt.zoneAdjustments&&(Mt+="z=",Mt+="z=".concat(Gt.zoneAdjustments.map(pn=>"".concat(pn.time," ").concat(pn.back?"-":""," ").concat(pn.typedTime)).join(" ")).concat(this.eol),Mt+=this.eol)}return Mt}printKey(Tt){return Tt?"k=".concat(Tt).concat(this.eol):""}printAttributes(Tt){let Mt="";for(let Gt of Tt)Mt+="a=".concat(Gt.attField).concat(Gt.attValue?":".concat(Gt.attValue):"").concat(this.eol);return Mt}printMediaDescription(Tt){let Mt="";for(let Gt of Tt)Mt+=this.printMedia(Gt.media),Mt+=this.printInformation(Gt.information),Mt+=this.printConnections(Gt.connections),Mt+=this.printBandwidth(Gt.bandwidths),Mt+=this.printKey(Gt.key),Mt+=this.printMediaAttributes(Gt);return Mt}printConnections(Tt){let Mt="";for(let Gt of Tt)Mt+=this.printConnection(Gt);return Mt}printMedia(Tt){return"m=".concat(Tt.mediaType," ").concat(Tt.port," ").concat(Tt.protos.join("/")," ").concat(Tt.fmts.join(" ")).concat(this.eol)}printSessionAttributes(Tt){return new fn(this.eol).print(Tt)}printMediaAttributes(Tt){return new Tn(this.eol).print(Tt)}}class sn{constructor(Tt){$r(this,"eol",void 0),this.eol=Tt}printIceUfrag(Tt){return Tt===void 0?"":"a=ice-ufrag:".concat(Tt).concat(this.eol)}printIcePwd(Tt){return Tt===void 0?"":"a=ice-pwd:".concat(Tt).concat(this.eol)}printIceOptions(Tt){return Tt===void 0?"":"a=ice-options:".concat(Tt.join(ut)).concat(this.eol)}printFingerprints(Tt){return Tt.length>0?Tt.map(Mt=>"a=fingerprint:".concat(Mt.hashFunction).concat(ut).concat(Mt.fingerprint)).join(this.eol)+this.eol:""}printExtmap(Tt){return Tt.map(Mt=>"a=extmap:".concat(Mt.entry).concat(Mt.direction?"/".concat(Mt.direction):"").concat(ut).concat(Mt.extensionName).concat(Mt.extensionAttributes?"".concat(ut).concat(Mt.extensionAttributes):"").concat(this.eol)).join("")}printSetup(Tt){return Tt===void 0?"":"a=setup:".concat(Tt).concat(this.eol)}printUnrecognized(Tt){return Tt.map(Mt=>"a=".concat(Mt.attField).concat(Mt.attValue?":".concat(Mt.attValue):"").concat(this.eol)).join("")}}class fn extends sn{print(Tt){let Mt="";return Mt+=this.printGroups(Tt.groups),Mt+=this.printMsidSemantic(Tt.msidSemantic),Mt+=this.printIceLite(Tt.iceLite),Mt+=this.printIceUfrag(Tt.iceUfrag),Mt+=this.printIcePwd(Tt.icePwd),Mt+=this.printIceOptions(Tt.iceOptions),Mt+=this.printFingerprints(Tt.fingerprints),Mt+=this.printSetup(Tt.setup),Mt+=this.printTlsId(Tt.tlsId),Mt+=this.printIdentity(Tt.identities),Mt+=this.printExtmap(Tt.extmaps),Mt+=this.printUnrecognized(Tt.unrecognized),Mt}printGroups(Tt){let Mt="";return Tt.length>0&&(Mt+=Tt.map(Gt=>"a=group:".concat(Gt.semantic).concat(Gt.identificationTag.map(pn=>"".concat(ut).concat(pn)).join("")).concat(this.eol)).join("")),Mt}printIceLite(Tt){return Tt===void 0?"":"a=ice-lite"+this.eol}printTlsId(Tt){return Tt?"a=tls-id:".concat(Tt).concat(this.eol):""}printIdentity(Tt){return Tt.length===0?"":Tt.map(Mt=>"a=identity:".concat(Mt.assertionValue).concat(Mt.extensions.map(Gt=>"".concat(ut).concat(Gt.name).concat(Gt.value?"=".concat(Gt.value):"")))).join(this.eol)+this.eol}printMsidSemantic(Tt){if(!Tt)return"";let Mt="a=msid-semantic:".concat(Tt.semantic);return Tt.applyForAll?Mt+="".concat(ut,"*"):Tt.identifierList.length>0&&(Mt+=Tt.identifierList.map(Gt=>"".concat(ut).concat(Gt))),Mt+this.eol}}class Tn extends sn{print(Tt){let Mt=Tt.attributes,Gt="";return Gt+=this.printRTCP(Mt.rtcp),Gt+=this.printIceUfrag(Mt.iceUfrag),Gt+=this.printIcePwd(Mt.icePwd),Gt+=this.printIceOptions(Mt.iceOptions),Gt+=this.printCandidates(Mt.candidates),Gt+=this.printRemoteCandidatesList(Mt.remoteCandidatesList),Gt+=this.printEndOfCandidates(Mt.endOfCandidates),Gt+=this.printFingerprints(Mt.fingerprints),Gt+=this.printSetup(Mt.setup),Gt+=this.printMid(Mt.mid),Gt+=this.printExtmap(Mt.extmaps),Gt+=this.printRTPRelated(Mt),Gt+=this.printPtime(Mt.ptime),Gt+=this.printMaxPtime(Mt.maxPtime),Gt+=this.printDirection(Mt.direction),Gt+=this.printSSRCGroups(Mt.ssrcGroups),Gt+=this.printSSRC(Mt.ssrcs),Gt+=this.printRTCPMux(Mt.rtcpMux),Gt+=this.printRTCPMuxOnly(Mt.rtcpMuxOnly),Gt+=this.printRTCPRsize(Mt.rtcpRsize),Gt+=this.printMSId(Mt.msids),Gt+=this.printImageattr(Mt.imageattr),Gt+=this.printRid(Mt.rids),Gt+=this.printSimulcast(Mt.simulcast),Gt+=this.printSCTPPort(Mt.sctpPort),Gt+=this.printMaxMessageSize(Mt.maxMessageSize),Gt+=this.printUnrecognized(Mt.unrecognized),Gt}printCandidates(Tt){return Tt.map(Mt=>"a=candidate:".concat(Mt.foundation).concat(ut).concat(Mt.componentId).concat(ut).concat(Mt.transport).concat(ut).concat(Mt.priority).concat(ut).concat(Mt.connectionAddress).concat(ut).concat(Mt.port).concat(ut,"typ").concat(ut).concat(Mt.type).concat(Mt.relAddr?"".concat(ut,"raddr").concat(ut).concat(Mt.relAddr):"").concat(Mt.relPort?"".concat(ut,"rport").concat(ut).concat(Mt.relPort):"").concat(Object.keys(Mt.extension).map(Gt=>"".concat(ut).concat(Gt).concat(ut).concat(Mt.extension[Gt])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(Tt){return Tt.map(Mt=>"a=remote-candidates:".concat(Mt.join(ut)).concat(this.eol)).join("")}printEndOfCandidates(Tt){return Tt===void 0?"":"a=end-of-candidates"+this.eol}printRTPRelated(Tt){if(!Tt.payloads)return"";let Mt=Tt.payloads,Gt="";Gt+=Tt.rtcpFeedbackWildcards.map(pn=>this.printRTCPFeedback("*",pn)).join("");for(let pn of Mt)Gt+=this.printRtpMap(pn.payloadType,pn.rtpMap),Gt+=this.printFmtp(pn.payloadType,pn.fmtp),Gt+=pn.rtcpFeedbacks.map(jn=>this.printRTCPFeedback(pn.payloadType,jn)).join("");return Gt}printFmtp(Tt,Mt){if(!Mt)return"";let Gt=Object.keys(Mt.parameters);return Gt.length===1&&Mt.parameters[Gt[0]]===null?"a=fmtp:".concat(Tt).concat(ut).concat(Gt[0]).concat(this.eol):"a=fmtp:".concat(Tt).concat(ut).concat(Object.keys(Mt.parameters).map(pn=>"".concat(pn,"=").concat(Mt.parameters[pn])).join(";")).concat(this.eol)}printRtpMap(Tt,Mt){return Mt?"a=rtpmap:".concat(Tt).concat(ut).concat(Mt.encodingName,"/").concat(Mt.clockRate).concat(Mt.encodingParameters?"/".concat(Mt.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(Tt,Mt){let Gt="a=rtcp-fb:".concat(Tt).concat(ut),pn=Mt;return pn.type==="trr-int"?Gt+="ttr-int".concat(ut).concat(pn.interval):(Gt+="".concat(pn.type),pn.parameter&&(Gt+="".concat(ut).concat(pn.parameter),pn.additional&&(Gt+="".concat(ut).concat(pn.additional)))),Gt+this.eol}printPtime(Tt){return Tt===void 0?"":"a=ptime:".concat(Tt).concat(this.eol)}printMaxPtime(Tt){return Tt===void 0?"":"a=maxptime:".concat(Tt).concat(this.eol)}printDirection(Tt){return Tt===void 0?"":"a=".concat(Tt).concat(this.eol)}printSSRC(Tt){return Tt.map(Mt=>Object.keys(Mt.attributes).map(Gt=>"a=ssrc:".concat(Mt.ssrcId.toString(10)).concat(ut).concat(Gt).concat(Mt.attributes[Gt]?":".concat(Mt.attributes[Gt]):"").concat(this.eol)).join("")).join("")}printRTCPMux(Tt){return Tt===void 0?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(Tt){return Tt===void 0?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(Tt){return Tt===void 0?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(Tt){if(Tt===void 0)return"";let Mt="a=rtcp:".concat(Tt.port);return Tt.netType&&(Mt+="".concat(ut).concat(Tt.netType)),Tt.addressType&&(Mt+="".concat(ut).concat(Tt.addressType)),Tt.address&&(Mt+="".concat(ut).concat(Tt.address)),Mt+this.eol}printMSId(Tt){return Tt.map(Mt=>"a=msid:".concat(Mt.id).concat(Mt.appdata?"".concat(ut).concat(Mt.appdata):"").concat(this.eol)).join("")}printImageattr(Tt){return Tt.map(Mt=>"a=imageattr:".concat(Mt).concat(this.eol)).join("")}printRid(Tt){return Tt.map(Mt=>{let Gt="a=rid:".concat(Mt.id).concat(ut).concat(Mt.direction);return Mt.payloads&&(Gt+="".concat(ut,"pt=").concat(Mt.payloads.join(","))),Mt.params.length>0&&(Gt+="".concat(ut).concat(Mt.params.map(pn=>pn.type==="depend"?"depend=".concat(pn.rids.join(",")):"".concat(pn.type,"=").concat(pn.val)).join(";"))),Gt+this.eol}).join("")}printSimulcast(Tt){return Tt===void 0?"":"a=simulcast:".concat(Tt).concat(this.eol)}printSCTPPort(Tt){return Tt===void 0?"":"a=sctp-port:".concat(Tt).concat(this.eol)}printMaxMessageSize(Tt){return Tt===void 0?"":"a=max-message-size:".concat(Tt).concat(this.eol)}printMid(Tt){return Tt===void 0?"":"a=mid:".concat(Tt).concat(this.eol)}printSSRCGroups(Tt){return Tt.map(Mt=>"a=ssrc-group:".concat(Mt.semantic).concat(Mt.ssrcIds.map(Gt=>"".concat(ut).concat(Gt.toString(10))).join("")).concat(this.eol)).join("")}}function Fn(mn){return new Mn().parse(mn)}function sr(mn,Tt){return new Vs().print(mn,Tt)}}},_e={};function tt(rt){if(_e[rt])return _e[rt].exports;var it=_e[rt]={exports:{}};return $[rt](it,it.exports,tt),it.exports}return tt.d=(rt,it)=>{for(var at in it)tt.o(it,at)&&!tt.o(rt,at)&&Object.defineProperty(rt,at,{enumerable:!0,get:it[at]})},tt.o=(rt,it)=>Object.prototype.hasOwnProperty.call(rt,it),tt.r=rt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(rt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(rt,"__esModule",{value:!0})},tt(8)})()})($4);var jr=$4.exports;function Xl(j){if(Array.isArray(j))return j.map($=>$);if(!M4(j))return j;let s={};for(let $ in j){let _e=j[$];M4(_e)||Array.isArray(_e)?s[$]=Xl(_e):s[$]=_e}return s}function M4(j){return!(typeof j!="object"||Array.isArray(j)||!j)}class ov{constructor(s){gt(this,"input",[]),gt(this,"size",void 0),this.size=s}add(s){this.input.push(s),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return this.input.length===0?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}let vu={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},u0={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:vu,remoteCandidate:vu}},U4={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},F4={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},j4={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},V4={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function B4(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function G4(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?B4(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):B4(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class iv{constructor(s,$){gt(this,"onFirstVideoReceived",void 0),gt(this,"onFirstVideoDecoded",void 0),gt(this,"onFirstAudioReceived",void 0),gt(this,"onFirstVideoDecodedTimeout",void 0),gt(this,"onFirstAudioDecoded",void 0),gt(this,"onSelectedLocalCandidateChanged",void 0),gt(this,"onSelectedRemoteCandidateChanged",void 0),gt(this,"videoIsReady",!1),gt(this,"videoIsReady2",{}),gt(this,"pc",void 0),gt(this,"options",void 0),gt(this,"intervalTimer",void 0),gt(this,"stats",Xl(u0)),gt(this,"isFirstVideoReceived",{}),gt(this,"isFirstVideoDecoded",{}),gt(this,"isFirstAudioReceived",{}),gt(this,"isFirstAudioDecoded",{}),gt(this,"isFirstVideoDecodedTimeout",{}),gt(this,"lossRateWindowStats",[]),this.pc=s,this.options=$,this.intervalTimer=window.setInterval(async()=>{this.updateStats()},this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new Jt(s=>{s({local:G4({},vu),remote:G4({},vu)})})}setVideoIsReady(s){this.videoIsReady=s}setVideoIsReady2(s,$){this.videoIsReady2[s]=$}getVideoIsReady(s){return this.videoIsReady2[s]||!1}setIsFirstAudioDecoded(s){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(s){this.lossRateWindowStats.push(s),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);let $=this.lossRateWindowStats.length,_e=["videoSend","audioSend","videoRecv","audioRecv"],tt=0,rt=0,it=0,at=0;for(let ct of _e)s[ct].forEach((dt,ut)=>{if(!this.lossRateWindowStats[$-1][ct][ut]||!this.lossRateWindowStats[0][ct][ut])return;let pt=this.lossRateWindowStats[$-1][ct][ut].packets-this.lossRateWindowStats[0][ct][ut].packets,mt=this.lossRateWindowStats[$-1][ct][ut].packetsLost-this.lossRateWindowStats[0][ct][ut].packetsLost;ct==="videoSend"||ct==="audioSend"?(tt+=pt,it+=mt):(rt+=pt,at+=mt),Number.isNaN(pt)||Number.isNaN(pt)?dt.packetLostRate=0:dt.packetLostRate=pt<=0||mt<=0?0:mt/(pt+mt)});s.sendPacketLossRate=tt<=0||it<=0?0:it/(tt+it),s.recvPacketLossRate=rt<=0||at<=0?0:at/(rt+at)}}function W4(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function DF(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?W4(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):W4(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class xF extends iv{constructor(){super(...arguments),gt(this,"_stats",u0),gt(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){let s=await this._getStats(),$=this.statsResponsesToObjects(s);this._stats=Xl(u0);let _e=$.filter(rt=>rt.type==="ssrc");this.processSSRCStats(_e);let tt=$.find(rt=>rt.type==="VideoBwe");tt&&this.processBandwidthStats(tt),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(s){this._stats.bitrate={actualEncoded:Number(s.googActualEncBitrate),targetEncoded:Number(s.googTargetEncBitrate),retransmit:Number(s.googRetransmitBitrate),transmit:Number(s.googTransmitBitrate)},this._stats.sendBandwidth=Number(s.googAvailableSendBandwidth)}processSSRCStats(s){s.forEach($=>{var _e;let tt=vn(_e=$.id).call(_e,"send");switch("".concat($.mediaType,"_").concat(tt?"send":"recv")){case"video_send":{let rt=Xl(F4);rt.codec=$.googCodecName,rt.adaptionChangeReason="none",$.googCpuLimitedResolution&&(rt.adaptionChangeReason="cpu"),$.googBandwidthLimitedResolution&&(rt.adaptionChangeReason="bandwidth"),rt.avgEncodeMs=Number($.googAvgEncodeMs),rt.inputFrame={width:Number($.googFrameWidthInput)||Number($.googFrameWidthSent),height:Number($.googFrameHeightInput)||Number($.googFrameHeightSent),frameRate:Number($.googFrameRateInput)},rt.sentFrame={width:Number($.googFrameWidthSent),height:Number($.googFrameHeightSent),frameRate:Number($.googFrameRateInput)},rt.firsCount=Number($.googFirReceived),rt.nacksCount=Number($.googNacksReceived),rt.plisCount=Number($.googPlisReceived),rt.frameCount=Number($.framesEncoded),rt.bytes=Number($.bytesSent),rt.packets=Number($.packetsSent),rt.packetsLost=Number($.packetsLost),rt.ssrc=Number($.ssrc),rt.rttMs=Number($.googRtt||0),this._stats.videoSend.push(rt),this._stats.rtt=rt.rttMs;break}case"video_recv":{let rt=Xl(U4),it=this.lastDecodeVideoReceiverStats.get(Number($.ssrc));if(rt.codec=$.googCodecName,rt.targetDelayMs=Number($.googTargetDelayMs),rt.renderDelayMs=Number($.googRenderDelayMs),rt.currentDelayMs=Number($.googCurrentDelayMs),rt.minPlayoutDelayMs=Number($.googMinPlayoutDelayMs),rt.decodeMs=Number($.googDecodeMs),rt.maxDecodeMs=Number($.googMaxDecodeMs),rt.receivedFrame={width:Number($.googFrameWidthReceived),height:Number($.googFrameHeightReceived),frameRate:Number($.googFrameRateReceived)},rt.decodedFrame={width:Number($.googFrameWidthReceived),height:Number($.googFrameHeightReceived),frameRate:Number($.googFrameRateDecoded)},rt.decodeFrameRate=Number($.googFrameRateDecoded),rt.outputFrame={width:Number($.googFrameWidthReceived),height:Number($.googFrameHeightReceived),frameRate:Number($.googFrameRateOutput)},rt.jitterBufferMs=Number($.googJitterBufferMs),rt.firsCount=Number($.googFirsSent),rt.nacksCount=Number($.googNacksSent),rt.plisCount=Number($.googPlisSent),rt.framesDecodeCount=Number($.framesDecoded),rt.bytes=Number($.bytesReceived),rt.packets=Number($.packetsReceived),rt.packetsLost=Number($.packetsLost),rt.ssrc=Number($.ssrc),rt.packets>0&&!this.isFirstVideoReceived[rt.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(rt.ssrc),this.isFirstVideoReceived[rt.ssrc]=!0),rt.framesDecodeCount>0&&!this.isFirstVideoDecoded[rt.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(rt.ssrc,rt.decodedFrame.width,rt.decodedFrame.height),this.isFirstVideoDecoded[rt.ssrc]=!0),it){let at=it.stats,ct=Date.now()-it.lts;rt.framesDecodeFreezeTime=at.framesDecodeFreezeTime,rt.framesDecodeInterval=at.framesDecodeInterval,rt.framesDecodeCount>at.framesDecodeCount&&this.isFirstVideoDecoded[rt.ssrc]?(it.lts=Date.now(),rt.framesDecodeInterval=ct,rt.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt($.ssrc,10))?rt.framesDecodeFreezeTime+=rt.framesDecodeInterval:this.setVideoIsReady2(parseInt($.ssrc,10),!0))):rt.framesDecodeCount<it.stats.framesDecodeCount&&(rt.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(rt.ssrc,{stats:DF({},rt),lts:Date.now()}),this._stats.videoRecv.push(rt);break}case"audio_recv":{let rt=Xl(V4);rt.codec=$.googCodecName,rt.outputLevel=Math.abs(Number($.audioOutputLevel))/32767,rt.decodingCNG=Number($.googDecodingCNG),rt.decodingCTN=Number($.googDecodingCTN),rt.decodingCTSG=Number($.googDecodingCTSG),rt.decodingNormal=Number($.googDecodingNormal),rt.decodingPLC=Number($.googDecodingPLC),rt.decodingPLCCNG=Number($.googDecodingPLCCNG),rt.expandRate=Number($.googExpandRate),rt.accelerateRate=Number($.googAccelerateRate),rt.preemptiveExpandRate=Number($.googPreemptiveExpandRate),rt.secondaryDecodedRate=Number($.googSecondaryDecodedRate),rt.speechExpandRate=Number($.googSpeechExpandRate),rt.preferredJitterBufferMs=Number($.googPreferredJitterBufferMs),rt.jitterBufferMs=Number($.googJitterBufferMs),rt.jitterMs=Number($.googJitterReceived),rt.bytes=Number($.bytesReceived),rt.packets=Number($.packetsReceived),rt.packetsLost=Number($.packetsLost),rt.ssrc=Number($.ssrc),rt.receivedFrames=Number($.googDecodingCTN)||Number($.packetsReceived),rt.droppedFrames=Number($.googDecodingPLC)+Number($.googDecodingPLCCNG)||Number($.packetsLost),rt.receivedFrames>0&&!this.isFirstAudioReceived[rt.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(rt.ssrc),this.isFirstAudioReceived[rt.ssrc]=!0),rt.decodingNormal>0&&!this.isFirstAudioDecoded[rt.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(rt.ssrc),this.isFirstAudioDecoded[rt.ssrc]=!0),this._stats.audioRecv.push(rt);break}case"audio_send":{let rt=Xl(j4);rt.codec=$.googCodecName,rt.inputLevel=Math.abs(Number($.audioInputLevel))/32767,rt.aecReturnLoss=Number($.googEchoCancellationReturnLoss||0),rt.aecReturnLossEnhancement=Number($.googEchoCancellationReturnLossEnhancement||0),rt.residualEchoLikelihood=Number($.googResidualEchoLikelihood||0),rt.residualEchoLikelihoodRecentMax=Number($.googResidualEchoLikelihoodRecentMax||0),rt.bytes=Number($.bytesSent),rt.packets=Number($.packetsSent),rt.packetsLost=Number($.packetsLost),rt.ssrc=Number($.ssrc),rt.rttMs=Number($.googRtt||0),this._stats.rtt=rt.rttMs,this._stats.audioSend.push(rt);break}}})}_getStats(){return new Jt((s,$)=>{this.pc.getStats(s,$)})}statsResponsesToObjects(s){let $=[];return s.result().forEach(_e=>{let tt={id:_e.id,timestamp:_e.timestamp.valueOf().toString(),type:_e.type};_e.names().forEach(rt=>{tt[rt]=_e.stat(rt)}),$.push(tt)}),$}}function H4(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function im(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?H4(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):H4(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class z4 extends iv{constructor(){super(...arguments),gt(this,"_stats",u0),gt(this,"report",void 0),gt(this,"lastDecodeVideoReceiverStats",new Map),gt(this,"lastVideoFramesRecv",new Map),gt(this,"lastVideoFramesSent",new Map),gt(this,"lastVideoFramesDecode",new Map),gt(this,"lastVideoJBDelay",new Map),gt(this,"lastAudioJBDelay",new Map),gt(this,"mediaBytesSent",new Map),gt(this,"mediaBytesRetransmit",new Map),gt(this,"mediaBytesTargetEncode",new Map),gt(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=Xl(u0),this.report.forEach(s=>{switch(s.type){case Ns.OUTBOUND:case Ns.INBOUND:{let $=s.mediaType||s.kind,_e=!$&&"frameWidth"in s,tt=!$&&!("frameWidth"in s);s.type===Ns.OUTBOUND?$==="audio"||tt?this.processAudioOutboundStats(s):($==="video"||_e)&&this.processVideoOutboundStats(s):s.type===Ns.INBOUND&&($==="audio"||tt?this.processAudioInboundStats(s):($==="video"||_e)&&this.processVideoInboundStats(s));break}case Ns.TRANSPORT:{let $=this.report.get(s.selectedCandidatePairId);$&&this.processCandidatePairStats($);break}case Ns.CANDIDATE_PAIR:s.selected&&this.processCandidatePairStats(s)}}),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){let s=await this.pc.getStats(),$={local:im({},vu),remote:im({},vu)};return s.forEach(_e=>{let tt;if(_e.type===Ns.TRANSPORT&&(tt=s.get(_e.selectedCandidatePairId)),_e.type===Ns.CANDIDATE_PAIR&&_e.selected&&(tt=_e),tt){let rt=(it,at)=>{it.type=at.type,it.id=at.id,at.address&&(it.address=at.address),at.candidateType&&(it.candidateType=at.candidateType),at.port&&(it.port=at.port),at.priority&&(it.priority=at.priority),at.protocol&&(it.protocol=at.protocol),at.relayProtocol&&(it.relayProtocol=at.relayProtocol)};if(tt.localCandidateId){let it=s.get(tt.localCandidateId);it&&rt($.local,it)}if(tt.remoteCandidateId){let it=s.get(tt.remoteCandidateId);it&&rt($.remote,it)}}}),$}processCandidatePairStats(s){if(this._stats.sendBandwidth=s.availableOutgoingBitrate||0,s.currentRoundTripTime&&(this._stats.rtt=1e3*s.currentRoundTripTime),this._stats.videoSend.forEach($=>{s.currentRoundTripTime&&($.rttMs=1e3*s.currentRoundTripTime)}),this._stats.audioSend.forEach($=>{s.currentRoundTripTime&&($.rttMs=1e3*s.currentRoundTripTime)}),this._stats.selectedCandidatePair.id=s.id,s.localCandidateId){let $=this.report.get(s.localCandidateId);$&&this.processCandidateStats($)}if(s.remoteCandidateId){let $=this.report.get(s.remoteCandidateId);$&&this.processCandidateStats($)}}processCandidateStats(s){let $;s.type===Ns.LOCAL_CANDIDATE&&($=this._stats.selectedCandidatePair.localCandidate),s.type===Ns.REMOTE_CANDIDATE&&($=this._stats.selectedCandidatePair.remoteCandidate),$&&($.type=s.type,$.id=s.id,s.address&&($.address=s.address),s.candidateType&&($.candidateType=s.candidateType),s.port&&($.port=s.port),s.priority&&($.priority=s.priority),s.protocol&&($.protocol=s.protocol),s.relayProtocol&&($.relayProtocol=s.relayProtocol),s.type===Ns.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==$.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(im({},$),im({},this.stats.selectedCandidatePair.localCandidate)),s.type===Ns.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==$.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(im({},$),im({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(s){let $=this._stats.audioRecv.find(_e=>_e.ssrc===s.ssrc);$||($=Xl(V4),this._stats.audioRecv.push($)),$.ssrc=s.ssrc,$.packets=s.packetsReceived,$.packetsLost=s.packetsLost,$.bytes=s.bytesReceived,$.jitterMs=1e3*s.jitter,this.processAudioTrackReceiverStats(s,s.trackId,$),s.codecId&&($.codec=this.getCodecFromCodecStats(s.codecId)),$.receivedFrames||($.receivedFrames=s.packetsReceived),$.droppedFrames||($.droppedFrames=s.packetsLost),$.receivedFrames>0&&!this.isFirstAudioReceived[$.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived($.ssrc),this.isFirstAudioReceived[$.ssrc]=!0),$.outputLevel&&$.outputLevel>0&&!this.isFirstAudioDecoded[$.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded($.ssrc),this.isFirstAudioDecoded[$.ssrc]=!0),typeof s.concealedSamples=="number"&&($.concealedSamples=s.concealedSamples)}processVideoInboundStats(s){let $=this._stats.videoRecv.find(it=>it.ssrc===s.ssrc);$||($=Xl(U4),this._stats.videoRecv.push($)),$.ssrc=s.ssrc,$.packets=s.packetsReceived,$.packetsLost=s.packetsLost,$.bytes=s.bytesReceived,$.firsCount=s.firCount,$.nacksCount=s.nackCount,$.plisCount=s.pliCount,$.framesDecodeCount=s.framesDecoded,$.totalInterFrameDelay=s.totalInterFrameDelay,$.totalSquaredInterFrameDelay=s.totalSquaredInterFrameDelay;let _e=this.lastDecodeVideoReceiverStats.get($.ssrc),tt=this.lastVideoFramesDecode.get($.ssrc),rt=Date.now();if($.framesDecodeCount>0&&!this.isFirstVideoDecoded[$.ssrc]){let it=$.decodedFrame?$.decodedFrame.width:0,at=$.decodedFrame?$.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded($.ssrc,it,at),this.isFirstVideoDecoded[$.ssrc]=!0}if(_e){let it=_e.stats,at=rt-_e.lts;$.framesDecodeFreezeTime=it.framesDecodeFreezeTime,$.framesDecodeInterval=it.framesDecodeInterval,!this.isFirstVideoDecoded[$.ssrc]&&at>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[$.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout($.ssrc),this.isFirstVideoDecodedTimeout[$.ssrc]=!0),$.framesDecodeCount>it.framesDecodeCount&&this.isFirstVideoDecoded[$.ssrc]?(_e.lts=Date.now(),$.framesDecodeInterval=at,$.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(s.ssrc))?$.framesDecodeFreezeTime+=$.framesDecodeInterval:this.setVideoIsReady2(parseInt(s.ssrc,10),!0))):$.framesDecodeCount<it.framesDecodeCount&&($.framesDecodeInterval=0),s.framesDecoded&&s.qpSum&&(_e.stats.framesDecodeCount>s.framesDecoded?$.qpSumPerFrame=s.qpSum/s.framesDecoded:$.qpSumPerFrame=(s.qpSum-_e.qpSum)/(s.framesDecoded-_e.stats.framesDecodeCount))}tt&&rt-tt.lts>=800?($.decodeFrameRate=Math.round(($.framesDecodeCount-tt.count)/((rt-tt.lts)/1e3)),this.lastVideoFramesDecode.set($.ssrc,{count:$.framesDecodeCount,lts:rt,rate:$.decodeFrameRate})):tt?$.decodeFrameRate=tt.rate:this.lastVideoFramesDecode.set($.ssrc,{count:$.framesDecodeCount,lts:rt,rate:0}),s.totalDecodeTime&&($.decodeMs=1e3*s.totalDecodeTime),this.processVideoTrackReceiverStats(s,s.trackId,$),s.codecId&&($.codec=this.getCodecFromCodecStats(s.codecId)),s.framerateMean&&($.framesRateFirefox=s.framerateMean),$.packets>0&&!this.isFirstVideoReceived[$.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived($.ssrc),this.isFirstVideoReceived[$.ssrc]=!0),this.lastDecodeVideoReceiverStats.set($.ssrc,{stats:im({},$),lts:_e?_e.lts:Date.now(),qpSum:s.qpSum})}processVideoOutboundStats(s){let $=this._stats.videoSend.find(tt=>tt.ssrc===s.ssrc);$||($=Xl(F4),this._stats.videoSend.push($));let _e=this.mediaBytesSent.get(s.ssrc);if(_e)_e.add(s.bytesSent);else{let tt=new ov(10);tt.add(s.bytesSent),this.mediaBytesSent.set(s.ssrc,tt)}if(s.retransmittedBytesSent!==void 0){let tt=this.mediaBytesRetransmit.get(s.ssrc);if(tt)tt.add(s.retransmittedBytesSent);else{let rt=new ov(10);rt.add(s.retransmittedBytesSent),this.mediaBytesRetransmit.set(s.ssrc,rt)}}if(s.totalEncodedBytesTarget){let tt=this.mediaBytesTargetEncode.get(s.ssrc);if(tt)tt.add(s.totalEncodedBytesTarget);else{let rt=new ov(10);rt.add(s.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(s.ssrc,rt)}}if($.ssrc=s.ssrc,$.bytes=s.bytesSent,$.packets=s.packetsSent,$.firsCount=s.firCount,$.nacksCount=s.nackCount,$.plisCount=s.pliCount,$.frameCount=s.framesEncoded,$.adaptionChangeReason=s.qualityLimitationReason,$.scalabilityMode=s.scalabilityMode,s.totalEncodeTime&&s.framesEncoded){let tt=this.lastEncoderMs.get(s.ssrc);if(!tt||tt.lastFrameCount>s.framesEncoded)$.avgEncodeMs=1e3*s.totalEncodeTime/s.framesEncoded;else{let rt=s.framesEncoded-tt.lastFrameCount,it=s.totalEncodeTime-tt.lastEncoderTime;$.avgEncodeMs=1e3*it/rt}}if(s.framesEncoded&&s.qpSum){let tt=this.lastEncoderMs.get(s.ssrc);!tt||tt.lastFrameCount>s.framesEncoded?$.qpSumPerFrame=s.qpSum/s.framesEncoded:$.qpSumPerFrame=(s.qpSum-tt.lastQpSum)/(s.framesEncoded-tt.lastFrameCount)}if(this.lastEncoderMs.set(s.ssrc,{lastFrameCount:s.framesEncoded,lastEncoderTime:s.totalEncodeTime,lastQpSum:s.qpSum,lts:Date.now()}),s.codecId&&($.codec=this.getCodecFromCodecStats(s.codecId)),s.mediaSourceId&&this.processVideoMediaSource(s.mediaSourceId,$),this.processVideoTrackSenderStats(s,s.trackId,$),s.remoteId)this.processRemoteInboundStats(s.remoteId,$);else{let tt=this.findRemoteStatsId(s.ssrc,Ns.REMOTE_INBOUND);tt&&this.processRemoteInboundStats(tt,$)}}processAudioOutboundStats(s){let $=this._stats.audioSend.find(_e=>_e.ssrc===s.ssrc);if($||($=Xl(j4),this._stats.audioSend.push($)),$.ssrc=s.ssrc,$.packets=s.packetsSent,$.bytes=s.bytesSent,s.mediaSourceId&&this.processAudioMediaSource(s.mediaSourceId,$),s.codecId&&($.codec=this.getCodecFromCodecStats(s.codecId)),this.processAudioTrackSenderStats(s,s.trackId,$),s.remoteId)this.processRemoteInboundStats(s.remoteId,$);else{let _e=this.findRemoteStatsId(s.ssrc,Ns.REMOTE_INBOUND);_e&&this.processRemoteInboundStats(_e,$)}}findRemoteStatsId(s,$){var _e;let tt=Array.from(nu(_e=this.report).call(_e)).find(rt=>rt.type===$&&rt.ssrc===s);return tt?tt.id:null}processVideoMediaSource(s,$){let _e=this.report.get(s);_e&&_e.width&&_e.height&&_e.framesPerSecond&&($.inputFrame={width:_e.width,height:_e.height,frameRate:_e.framesPerSecond})}processAudioMediaSource(s,$){let _e=this.report.get(s);_e&&($.inputLevel=_e.audioLevel)}processVideoTrackSenderStats(s,$,_e){var tt,rt,it,at;let ct=$?this.report.get($):void 0,dt=(tt=ct==null?void 0:ct.framesSent)!==null&&tt!==void 0?tt:s.framesSent;if(typeof dt!="number")return;let ut=(rt=ct==null?void 0:ct.frameWidth)!==null&&rt!==void 0?rt:s.frameWidth,pt=(it=ct==null?void 0:ct.frameHeight)!==null&&it!==void 0?it:s.frameHeight,mt=(at=ct==null?void 0:ct.framesPerSecond)!==null&&at!==void 0?at:s.framesPerSecond;if(typeof ut=="number"&&typeof pt=="number"||(ut=0,pt=0),mt==null){let yt=Date.now(),At=this.lastVideoFramesSent.get(_e.ssrc);At&&yt-At.lts>=800?(mt=Math.round((dt-At.count)/((yt-At.lts)/1e3)),this.lastVideoFramesSent.set(_e.ssrc,{count:dt,lts:yt,rate:mt})):At?mt=At.rate:this.lastVideoFramesSent.set(_e.ssrc,{count:dt,lts:yt,rate:0})}_e.sentFrame={width:ut,height:pt,frameRate:Math.max(0,mt)}}processVideoTrackReceiverStats(s,$,_e){var tt,rt,it,at,ct;let dt=$?this.report.get($):void 0,ut=(tt=dt==null?void 0:dt.framesReceived)!==null&&tt!==void 0?tt:s.framesReceived,pt=(rt=dt==null?void 0:dt.frameWidth)!==null&&rt!==void 0?rt:s.frameWidth,mt=(it=dt==null?void 0:dt.frameHeight)!==null&&it!==void 0?it:s.frameHeight,yt=(at=dt==null?void 0:dt.jitterBufferDelay)!==null&&at!==void 0?at:s.jitterBufferDelay,At=(ct=dt==null?void 0:dt.jitterBufferEmittedCount)!==null&&ct!==void 0?ct:s.jitterBufferEmittedCount;if(typeof ut=="number"){let Ct=this.lastVideoFramesRecv.get(_e.ssrc),It=Date.now();_e.framesReceivedCount=ut;let kt=0;Ct&&It-Ct.lts>=800?(kt=Math.round((ut-Ct.count)/((It-Ct.lts)/1e3)),this.lastVideoFramesRecv.set(_e.ssrc,{count:ut,lts:It,rate:kt})):Ct?kt=Ct.rate:this.lastVideoFramesRecv.set(_e.ssrc,{count:ut,lts:It,rate:0}),_e.receivedFrame={width:pt||0,height:mt||0,frameRate:kt||0},_e.decodedFrame={width:pt||0,height:mt||0,frameRate:_e.decodeFrameRate||0},_e.outputFrame={width:pt||0,height:mt||0,frameRate:_e.decodeFrameRate||0}}if(yt&&At){let Ct=this.lastVideoJBDelay.get(_e.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},It=Ct.jitterBufferMs,kt=At-Ct.jitterBufferEmittedCount;kt>0&&(It=1e3*(yt-Ct.jitterBufferDelay)/kt),_e.jitterBufferMs=It,_e.currentDelayMs=Math.round(It),this.lastVideoJBDelay.set(_e.ssrc,{jitterBufferDelay:yt,jitterBufferEmittedCount:At,jitterBufferMs:_e.currentDelayMs})}}processAudioTrackSenderStats(s,$,_e){var tt,rt,it,at;let ct=$?this.report.get($):void 0,dt=(tt=(rt=ct==null?void 0:ct.echoReturnLoss)!==null&&rt!==void 0?rt:s.echoReturnLoss)!==null&&tt!==void 0?tt:0,ut=(it=(at=ct==null?void 0:ct.echoReturnLossEnhancement)!==null&&at!==void 0?at:s.echoReturnLossEnhancement)!==null&&it!==void 0?it:0;_e.aecReturnLoss=dt,_e.aecReturnLossEnhancement=ut}processAudioTrackReceiverStats(s,$,_e){var tt,rt,it,at,ct,dt,ut;let pt=$?this.report.get($):void 0,mt=(tt=pt==null?void 0:pt.removedSamplesForAcceleration)!==null&&tt!==void 0?tt:s.removedSamplesForAcceleration,yt=(rt=pt==null?void 0:pt.totalSamplesReceived)!==null&&rt!==void 0?rt:s.totalSamplesReceived,At=(it=pt==null?void 0:pt.jitterBufferDelay)!==null&&it!==void 0?it:s.jitterBufferDelay,Ct=(at=pt==null?void 0:pt.jitterBufferEmittedCount)!==null&&at!==void 0?at:s.jitterBufferEmittedCount,It=(ct=pt==null?void 0:pt.audioLevel)!==null&&ct!==void 0?ct:s==null?void 0:s.audioLevel,kt=(dt=pt==null?void 0:pt.totalSamplesDuration)!==null&&dt!==void 0?dt:s==null?void 0:s.totalSamplesDuration,Vt=(ut=pt==null?void 0:pt.concealedSamples)!==null&&ut!==void 0?ut:s.concealedSamples;if(mt&&yt&&(_e.accelerateRate=mt/yt),At&&Ct){let en=this.lastAudioJBDelay.get(_e.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0},zt=en.jitterBufferMs,Yt=Ct-en.jitterBufferEmittedCount;Yt>0&&(zt=1e3*(At-en.jitterBufferDelay)/Yt),_e.jitterBufferMs=Math.round(zt),this.lastAudioJBDelay.set(_e.ssrc,{jitterBufferDelay:At,jitterBufferEmittedCount:Ct,jitterBufferMs:_e.jitterBufferMs})}_e.outputLevel=It;let Bt=1920;kt&&yt&&(Bt=yt/kt/50,_e.receivedFrames=Math.round(yt/Bt)),Vt&&(_e.droppedFrames=Math.round(Vt/Bt))}processRemoteInboundStats(s,$){let _e=this.report.get(s);_e&&($.packetsLost=_e.packetsLost,_e.roundTripTime&&($.rttMs=1e3*_e.roundTripTime),_e.jitter&&($.jitterMs=1e3*_e.jitter),_e.timestamp&&($.timestamp=_e.timestamp))}getCodecFromCodecStats(s){let $=this.report.get(s);if(!$)return"";let _e=$.mimeType.match(/\/(.*)$/);return _e&&_e[1]?_e[1]:""}updateSendBitrate(){let s=0,$=null,_e=null;this.mediaBytesSent.forEach(rt=>{s+=rt.diffMean()}),this.mediaBytesRetransmit.forEach(rt=>{$=$===null?rt.diffMean():$+rt.diffMean()}),this.mediaBytesTargetEncode.forEach(rt=>{_e=_e===null?rt.diffMean():_e+rt.diffMean()});let tt=$!==null?s-$:s;this._stats.bitrate={actualEncoded:8*tt/(this.options.updateInterval/1e3),transmit:8*s/(this.options.updateInterval/1e3)},$!==null&&(this._stats.bitrate.retransmit=8*$/(this.options.updateInterval/1e3)),_e!==null&&(this._stats.bitrate.targetEncoded=8*_e/(this.options.updateInterval/1e3))}}class LF extends iv{updateStats(){return Jt.resolve()}}function RE(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8,_e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:500,tt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e4,rt=function(){let it=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return it&&it[0]?Number(it[0].split("/")[1]):null}();return rt?rt<76?new xF(j,{updateInterval:s,lossRateInterval:$,freezeRateLimit:_e,firstVideoDecodedTimeout:tt}):new z4(j,{updateInterval:s,lossRateInterval:$,freezeRateLimit:_e,firstVideoDecodedTimeout:tt}):function(it){return!!window.RTCStatsReport&&it.getStats()instanceof Jt}(j)?new z4(j,{updateInterval:s,lossRateInterval:$,freezeRateLimit:_e,firstVideoDecodedTimeout:tt}):new LF(j,{updateInterval:s,lossRateInterval:$,freezeRateLimit:_e,firstVideoDecodedTimeout:tt})}function K4(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Y4(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?K4(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):K4(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function p0(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_e=arguments.length>3?arguments[3]:void 0,{filterRTX:tt,filterVideoFec:rt,filterAudioFec:it,filterAudioCodec:at,filterVideoCodec:ct}=s,{useXR:dt}=$,ut=[],pt=[],mt=[],yt=[],At=!1,Ct=!1;if(jr.parse(j).mediaDescriptions.forEach(kt=>{_e&&_e!==kt.attributes.direction||(kt.media.mediaType!=="video"||At||(pt=kt.attributes.payloads,yt=kt.attributes.extmaps,At=!0),kt.media.mediaType!=="audio"||Ct||(ut=kt.attributes.payloads,mt=kt.attributes.extmaps,Ct=!0))}),!yt||pt.length===0)throw new Error("Cannot get video capabilities from SDP.");if(!mt||ut.length===0)throw new Error("Cannot get audio capabilities from SDP.");pt.forEach(kt=>{var Vt;(Vt=kt.rtpMap)!==null&&Vt!==void 0&&Vt.clockRate&&(kt.rtpMap.clockRate=parseInt(kt.rtpMap.clockRate)),dt&&kt.rtcpFeedbacks.push({type:"rrtr"})}),ut.forEach(kt=>{var Vt;(Vt=kt.rtpMap)!==null&&Vt!==void 0&&Vt.clockRate&&(kt.rtpMap.clockRate=parseInt(kt.rtpMap.clockRate)),dt&&kt.rtcpFeedbacks.push({type:"rrtr"})}),tt&&(ut=ut.filter(kt=>{var Vt;return((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLowerCase())!=="rtx"}),pt=pt.filter(kt=>{var Vt;return((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLowerCase())!=="rtx"})),rt&&(pt=pt.filter(kt=>{var Vt;return!/(red)|(ulpfec)|(flexfec)/i.test(((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName)||"")})),it&&(ut=ut.filter(kt=>{var Vt;return!/(red)|(ulpfec)|(flexfec)/i.test(((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName)||"")})),at&&(at==null?void 0:at.length)>0&&(ut=ut.filter(kt=>{var Vt;return vn(at).call(at,((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLowerCase())||"")})),ct&&(ct==null?void 0:ct.length)>0&&(pt=pt.filter(kt=>{var Vt;return vn(ct).call(ct,((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLowerCase())||"")}));let It=Ft("UNSUPPORTED_VIDEO_CODEC");return It&&It.length>0&&(pt=pt.filter(kt=>!(kt.rtpMap&&vn(It).call(It,kt.rtpMap.encodingName.toLowerCase())))),{audioCodecs:ut,videoCodecs:pt,audioExtensions:mt,videoExtensions:yt}}function iu(j){let s=jr.parse(j),$,_e;for(let tt of s.mediaDescriptions){if(!$){let rt=tt.attributes.iceUfrag,it=tt.attributes.icePwd;if(!rt||!it)throw new Error("Cannot get iceUfrag or icePwd from SDP.");$={iceUfrag:rt,icePwd:it}}if(!_e){let rt=tt.attributes.fingerprints;rt.length>0&&(_e={fingerprints:rt})}}if(!_e&&s.attributes.fingerprints.length>0&&(_e={fingerprints:s.attributes.fingerprints}),!_e||!$)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:$,dtlsParameters:_e}}function sv(j,s){let $=[],_e=j.attributes.ssrcGroups.filter(it=>it.semantic==="FID"),tt=j.attributes.ssrcGroups.find(it=>it.semantic==="SIM"),rt=j.attributes.ssrcs;if(tt)tt.ssrcIds.forEach(it=>{var at;let ct=(at=_e.find(dt=>dt.ssrcIds[0]===it))===null||at===void 0?void 0:at.ssrcIds[1];$.push({ssrcId:it,rtx:s?ct:void 0})});else if(_e.length>0){let it=_e[0].ssrcIds[0],at=_e[0].ssrcIds[1];$.push({ssrcId:it,rtx:s?at:void 0})}else{if(rt.length===0)throw new Error("No ssrcs found on local media description.");$.push({ssrcId:rt[0].ssrcId})}return $}function q4(j,s){let{cname:$}=j,_e;s&&s.ip&&typeof s.port=="number"?(_e=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:s.ip,port:s.port.toString(),type:"host",extension:{}}],Et.debug("Using remote candidate from AP ".concat(s.ip,":").concat(s.port)),s.ip6&&(_e.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:s.ip6,port:s.port.toString(),type:"host",extension:{}}),Et.debug("Using IPV6 remote candidate from AP ".concat(s.ip6,":").concat(s.port)))):_e=j.iceParameters.candidates.map(at=>({foundation:at.foundation,componentId:"1",transport:at.protocol,priority:at.priority.toString(),connectionAddress:at.ip,port:at.port.toString(),type:at.type,extension:{}}));let tt={fingerprints:j.dtlsParameters.fingerprints.map(at=>({hashFunction:at.algorithm,fingerprint:at.fingerprint}))},rt={iceUfrag:j.iceParameters.iceUfrag,icePwd:j.iceParameters.icePwd},it;switch(j.dtlsParameters.role){case"server":it="passive";break;case"client":it="active";break;case"auto":it="actpass"}return{dtlsParameters:tt,iceParameters:rt,candidates:_e,rtpCapabilities:n1(j.rtpCapabilities),setup:it,cname:$}}function Ds(j,s,$){let _e=[],tt=[];return j.forEach(rt=>{let{ssrcId:it,rtx:at}=rt,ct=Ir(8,"track-"),dt={ssrcId:it,attributes:Y4({label:ct,mslabel:$=$||Ir(10,""),msid:"".concat($," ").concat(ct)},s&&{cname:s})};if(_e.push(dt),at!==void 0){let ut={ssrcId:at,attributes:Y4({label:ct,mslabel:$,msid:"".concat($," ").concat(ct)},s&&{cname:s})};_e.push(ut),tt.push({semantic:"FID",ssrcIds:[it,at]})}}),j.length>1&&tt.push({semantic:"SIM",ssrcIds:j.map(rt=>{let{ssrcId:it}=rt;return it})}),{ssrcs:_e,ssrcGroups:tt}}function Tp(j,s){s instanceof dr&&j.attributes.payloads.forEach($=>{var _e;let tt=(_e=$.rtpMap)===null||_e===void 0?void 0:_e.encodingName.toLowerCase();if(!tt||["opus","pcmu","pcma","g722"].indexOf(tt)===-1)return;$.fmtp||($.fmtp={parameters:{}}),$.fmtp.parameters.minptime="10",$.fmtp.parameters.useinbandfec="1";let rt=s._encoderConfig;rt&&tt!=="pcmu"&&tt!=="pcma"&&tt!=="g722"&&(rt.bitrate&&!br()&&($.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*rt.bitrate))),rt.sampleRate&&($.fmtp.parameters.maxplaybackrate="".concat(rt.sampleRate),$.fmtp.parameters["sprop-maxcapturerate"]="".concat(rt.sampleRate)),rt.stereo&&($.fmtp.parameters.stereo="1",$.fmtp.parameters["sprop-stereo"]="1"))})}function IE(j){let s=j.attributes.unrecognized.findIndex($=>$.attField==="x-google-flag"&&$.attValue==="conference");s!==-1&&j.attributes.unrecognized.splice(s,1)}function AE(j,s){var $;if(!(s instanceof Hn&&s._encoderConfig&&s._hints.indexOf(wr.SCREEN_TRACK)===-1))return;let _e=s._encoderConfig;vr().supportMinBitrate&&_e.bitrateMin&&j.attributes.payloads.forEach(tt=>{var rt,it;vn(rt=["h264","h265","vp8","vp9","av1"]).call(rt,((it=tt.rtpMap)===null||it===void 0?void 0:it.encodingName.toLowerCase())||"")&&(tt.fmtp||(tt.fmtp={parameters:{}}),tt.fmtp.parameters["x-google-min-bitrate"]="".concat(_e.bitrateMin))}),vr().supportMinBitrate&&!vn($=s._hints).call($,wr.LOW_STREAM)&&_e.bitrateMax&&j.attributes.payloads.forEach(tt=>{var rt,it;vn(rt=["h264","h265","vp8","vp9","av1"]).call(rt,((it=tt.rtpMap)===null||it===void 0?void 0:it.encodingName.toLowerCase())||"")&&(tt.fmtp||(tt.fmtp={parameters:{}}),tt.fmtp.parameters["x-google-start-bitrate"]="".concat(Ft("X_GOOGLE_START_BITRATE")||Math.floor(_e.bitrateMax)))})}function av(j){if(j.media.mediaType!=="video")return;let s=ir();if(s.name!==lr.SAFARI&&s.os!==To.IOS)return;let $=j.attributes.extmaps.findIndex(_e=>/video-orientation/g.test(_e.extensionName));$!==-1&&j.attributes.extmaps.splice($,1)}function t1(j,s,$){if(!s)return;let _e,tt;if(j.media.mediaType==="video"?(_e=$.videoExtensions,tt=$.videoCodecs):(_e=$.audioExtensions,tt=$.audioCodecs),s.twcc===!0){let rt=_e.find(it=>it.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");rt&&(j.attributes.extmaps.find(it=>it.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")||j.attributes.extmaps.push({entry:rt.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(it,at){return at.filter(ct=>!!it.find(dt=>dt.payloadType===ct.payloadType&&!!dt.rtcpFeedbacks.find(ut=>ut.type==="transport-cc")))}(tt,j.attributes.payloads).forEach(it=>{it.rtcpFeedbacks.find(at=>at.type==="transport-cc")||it.rtcpFeedbacks.push({type:"transport-cc"})}))}else if(s.twcc===!1){let rt=j.attributes.extmaps.findIndex(it=>it.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");rt!==-1&&j.attributes.extmaps.splice(rt,1),j.attributes.payloads.forEach(it=>{let at=it.rtcpFeedbacks.findIndex(ct=>ct.type==="transport-cc");at!==-1&&it.rtcpFeedbacks.splice(at,1)})}if(s.remb===!0){let rt=_e.find(it=>it.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");rt&&(j.attributes.extmaps.find(it=>it.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")||j.attributes.extmaps.push({entry:rt.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(it,at){return at.filter(ct=>!!it.find(dt=>dt.payloadType===ct.payloadType&&!!dt.rtcpFeedbacks.find(ut=>ut.type==="goog-remb")))}(tt,j.attributes.payloads).forEach(it=>{it.rtcpFeedbacks.find(at=>at.type==="goog-remb")||it.rtcpFeedbacks.push({type:"goog-remb"})}))}else if(s.remb===!1){let rt=j.attributes.extmaps.findIndex(it=>it.extensionName==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time");rt!==-1&&j.attributes.extmaps.splice(rt,1),j.attributes.payloads.forEach(it=>{let at=it.rtcpFeedbacks.findIndex(ct=>ct.type==="goog-remb");at!==-1&&it.rtcpFeedbacks.splice(at,1)})}}function cv(j,s,$){if(br()||j.media.mediaType!=="video"||!(s instanceof Hn)||$!=="vp9"&&$!=="vp8"||$==="vp8"&&!Ft("SIMULCAST")||s._scalabilityMode===void 0||s._scalabilityMode.numSpatialLayers<=1)return;let _e=$==="vp8"?2:s._scalabilityMode.numSpatialLayers,tt=j.attributes.ssrcs[0],rt=j.attributes.ssrcGroups.find(at=>at.semantic==="FID"&&at.ssrcIds[0]===tt.ssrcId),it={semantic:"SIM",ssrcIds:[tt.ssrcId]};for(let at=1;at<_e;at++)j.attributes.ssrcs.push({ssrcId:tt.ssrcId+at,attributes:Nr(tt.attributes)}),it.ssrcIds.push(tt.ssrcId+at),rt&&(j.attributes.ssrcs.push({ssrcId:rt.ssrcIds[1]+at,attributes:Nr(tt.attributes)}),j.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[tt.ssrcId+at,rt.ssrcIds[1]+at]}));j.attributes.ssrcGroups.unshift(it)}async function lv(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=new RTCPeerConnection;$.addTransceiver("video",{direction:"sendonly"}),$.addTransceiver("audio",{direction:"sendonly"}),$.addTransceiver("video",{direction:"recvonly"}),$.addTransceiver("audio",{direction:"recvonly"});let _e=(await $.createOffer()).sdp,{send:tt,recv:rt,sendrecv:it}=function(){let at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=arguments.length>2?arguments[2]:void 0,ut=p0(dt,at,ct,"sendonly"),pt=p0(dt,at,ct,"recvonly"),mt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},yt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},At={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Jl(ut,pt,"videoExtensions",mt,yt,At),Jl(ut,pt,"videoCodecs",mt,yt,At),Jl(ut,pt,"audioExtensions",mt,yt,At),Jl(ut,pt,"audioCodecs",mt,yt,At),Ft("RAISE_H264_BASELINE_PRIORITY")){let Ct=At.videoCodecs.findIndex(It=>{var kt,Vt;return((kt=It.rtpMap)===null||kt===void 0?void 0:kt.encodingName.toLocaleLowerCase())==="h264"&&((Vt=It.fmtp)===null||Vt===void 0?void 0:Vt.parameters["profile-level-id"])==="42001f"});if(Ct!==-1){let It=At.videoCodecs.findIndex(kt=>{var Vt;return((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLocaleLowerCase())==="h264"});if(It<Ct){Et.debug("raising H264 baseline profile priority");let kt=At.videoCodecs[Ct];At.videoCodecs.splice(Ct,1),At.videoCodecs.splice(It,0,kt)}It!==-1&&(yt.videoCodecs=yt.videoCodecs.filter(kt=>{var Vt,Bt;return!(((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLocaleLowerCase())==="h264"&&((Bt=kt.fmtp)===null||Bt===void 0?void 0:Bt.parameters["profile-level-id"])!=="42001f")})),It!==-1&&Ft("FILTER_SEND_H264_BASELINE")&&(mt.videoCodecs=mt.videoCodecs.filter(kt=>{var Vt,Bt;return!(((Vt=kt.rtpMap)===null||Vt===void 0?void 0:Vt.encodingName.toLocaleLowerCase())==="h264"&&((Bt=kt.fmtp)===null||Bt===void 0?void 0:Bt.parameters["profile-level-id"])!=="42001f")}))}}return{send:mt,recv:yt,sendrecv:At}}(j,s,_e);try{$.close()}catch{}return{send:tt,recv:rt,sendrecv:it}}function X4(){let j={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},s=p0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"recvonly"),$={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},_e={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},tt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Jl(j,s,"videoExtensions",$,_e,tt),Jl(j,s,"videoCodecs",$,_e,tt),Jl(j,s,"audioExtensions",$,_e,tt),Jl(j,s,"audioCodecs",$,_e,tt),Ft("RAISE_H264_BASELINE_PRIORITY")){let rt=tt.videoCodecs.findIndex(it=>it.rtpMap&&it.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&it.fmtp&&it.fmtp.parameters["profile-level-id"]==="42001f");if(rt!==-1){let it=tt.videoCodecs.findIndex(at=>at.rtpMap&&at.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(it<rt){Et.debug("raising H264 baseline profile priority");let at=tt.videoCodecs[rt];tt.videoCodecs.splice(rt,1),tt.videoCodecs.splice(it,0,at)}it!==-1&&(_e.videoCodecs=_e.videoCodecs.filter(at=>!(at.rtpMap&&at.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&at.fmtp&&at.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:$,recv:_e,sendrecv:tt}}function Jl(j,s,$,_e,tt,rt){if($==="videoExtensions"||$==="audioExtensions"){let it=[];return j[$].forEach(at=>{s[$].some((ct,dt)=>{if(at.entry===ct.entry&&at.extensionName===ct.extensionName)return it.push(dt),!0})?rt[$].push(at):_e[$].push(at)}),void s[$].forEach((at,ct)=>{it.indexOf(ct)===-1&&tt[$].push(at)})}if($==="videoCodecs"||$==="audioCodecs"){let it=[];return j[$].forEach(at=>{s[$].some((ct,dt)=>{if(at.payloadType===ct.payloadType&&JSON.stringify(at)===JSON.stringify(ct))return it.push(dt),!0})?rt[$].push(at):_e[$].push(at)}),void s[$].forEach((at,ct)=>{it.indexOf(ct)===-1&&tt[$].push(at)})}}function n1(j){let{send:s,recv:$,sendrecv:_e}=j;if(!_e){if(!s||!$)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:s,recv:$}}let tt,rt;return s?(tt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},tt.audioCodecs=[...s.audioCodecs,..._e.audioCodecs],tt.videoCodecs=[...s.videoCodecs,..._e.videoCodecs],tt.audioExtensions=[...s.audioExtensions,..._e.audioExtensions],tt.videoExtensions=[...s.videoExtensions,..._e.videoExtensions]):tt=_e,$?(rt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},rt.audioCodecs=[...$.audioCodecs,..._e.audioCodecs],rt.videoCodecs=[...$.videoCodecs,..._e.videoCodecs],rt.audioExtensions=[...$.audioExtensions,..._e.audioExtensions],rt.videoExtensions=[...$.videoExtensions,..._e.videoExtensions]):rt=_e,{send:tt,recv:rt}}function su(j){j.media.mediaType==="audio"&&j.attributes.payloads.filter(s=>{var $;return(($=s.rtpMap)===null||$===void 0?void 0:$.encodingName.toLowerCase())==="opus"}).forEach(s=>{s.fmtp||(s.fmtp={parameters:{}}),s.fmtp.parameters.stereo="1",s.fmtp.parameters["sprop-stereo"]="1"})}function h0(j){j.mediaDescriptions.forEach(s=>{s.media.mediaType!=="video"&&s.media.mediaType!=="audio"||s.attributes.payloads.forEach($=>{$.rtcpFeedbacks.findIndex(_e=>_e.type==="rrtr")===-1&&$.rtcpFeedbacks.push({type:"rrtr"})})})}function sm(j,s,$,_e){let tt=[];if(j===Cn.VIDEO){if(Ft("H264_PROFILE_LEVEL_ID")&&_e==="h264"&&(tt=s.videoCodecs.filter(rt=>{var it;return vn(it=rt.rtpMap&&rt.rtpMap.encodingName.toLowerCase()||"").call(it,_e)&&rt&&rt.fmtp&&rt.fmtp.parameters["profile-level-id"]===Ft("H264_PROFILE_LEVEL_ID")})),!Array.isArray(tt)||tt.length===0){let rt=[],it=[],at=[];$.videoCodecs.forEach(ct=>{var dt,ut,pt;vn(dt=ct.rtpMap&&ct.rtpMap.encodingName.toLowerCase()||"").call(dt,_e)&&rt.push(ct),vn(ut=ct.rtpMap&&ct.rtpMap.encodingName.toLowerCase()||"").call(ut,"vp8")&&it.push(ct),vn(pt=ct.rtpMap&&ct.rtpMap.encodingName.toLowerCase()||"").call(pt,"h264")&&at.push(ct)}),rt.length===0&&(it.length!==0?(rt=it,Et.warning("codec ".concat(_e," not included in rtpCapabilities, fallback to default payloads: vp8"))):at.length!==0&&(rt=at,Et.warning("codec ".concat(_e," not included in rtpCapabilities, fallback to default payloads: h264")))),rt.length!==0&&(tt=s.videoCodecs.filter(ct=>rt.some(dt=>dt.payloadType===ct.payloadType)))}if(Ft("USE_PUB_RTX")){let rt=tt.map(at=>at.payloadType.toString()),it=s.videoCodecs.filter(at=>at.rtpMap&&at.rtpMap.encodingName==="rtx"&&vn(rt).call(rt,at.fmtp&&at.fmtp.parameters.apt||""));tt=[...tt,...it]}tt.length===0&&(Et.warning("codec ".concat(_e," not included in rtpCapabilities, fallback to default payloads: ").concat(s.videoCodecs[0].rtpMap&&s.videoCodecs[0].rtpMap.encodingName)),tt=s.videoCodecs)}else tt=s.audioCodecs.filter(rt=>{var it;return vn(it=rt.rtpMap&&rt.rtpMap.encodingName.toLowerCase()||"").call(it,_e)}),tt.length===0&&(Et.warning("codec ".concat(_e," not included in rtpCapabilities, fallback to opus")),tt=s.audioCodecs.filter(rt=>{var it;return vn(it=rt.rtpMap&&rt.rtpMap.encodingName.toLowerCase()||"").call(it,"opus")}));return tt}let J4=class{get localCapabilities(){return Nr(this._localCapabilities)}get rtpCapabilities(){return Nr(this._rtpCapabilities)}get candidates(){return Nr(this._candidates)}get iceParameters(){return Nr(this._iceParameters)}get dtlsParameters(){return Nr(this._dtlsParameters)}constructor(j){gt(this,"sessionDesc",void 0),gt(this,"_localCapabilities",void 0),gt(this,"_rtpCapabilities",void 0),gt(this,"_candidates",void 0),gt(this,"_iceParameters",void 0),gt(this,"_dtlsParameters",void 0),gt(this,"setup",void 0),gt(this,"currentMidIndex",void 0),gt(this,"cname","o/i14u9pJrxRKAsu"),gt(this,"firefoxSsrcMidMap",new Map),j=Nr(j);let{remoteIceParameters:s,remoteDtlsParameters:$,candidates:_e,remoteRTPCapabilities:tt,localCapabilities:rt,direction:it,setup:at,videoCodec:ct,audioCodec:dt}=j,ut;this.setup=at,ut=it===es.RECEIVE_ONLY?jr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`):jr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=extmap-allow-mixed
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=recvonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`),this._rtpCapabilities=tt,this._candidates=_e,this._iceParameters=s,this._dtlsParameters=$,this._localCapabilities=rt;let pt=it===es.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,mt=it===es.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,yt=it===es.RECEIVE_ONLY?tt.send.videoCodecs:sm(Cn.VIDEO,pt,mt,ct),At=it===es.RECEIVE_ONLY?tt.send.audioCodecs:sm(Cn.AUDIO,pt,mt,dt);for(let Ct of ut.mediaDescriptions){if(Ct.attributes.iceUfrag=s.iceUfrag,Ct.attributes.icePwd=s.icePwd,Ct.attributes.fingerprints=$.fingerprints,Ct.attributes.candidates=_e,Ct.attributes.setup=this.setup,Ct.media.mediaType==="application"&&(Ct.attributes.sctpPort="5000"),Ct.media.mediaType==="video"&&(Ct.media.fmts=yt.map(It=>It.payloadType.toString(10)),Ct.attributes.payloads=yt,Ct.attributes.extmaps=pt.videoExtensions,Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:It,ssrcGroups:kt}=Ds([{ssrcId:4e4,rtx:Ft("USE_SUB_RTX")?40001:void 0}],this.cname);Ct.attributes.ssrcs=It,Ct.attributes.ssrcGroups=kt}if(Ct.media.mediaType==="audio"&&(Ct.media.fmts=At.map(It=>It.payloadType.toString(10)),Ct.attributes.payloads=At,Ct.attributes.extmaps=pt.audioExtensions,su(Ct),Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:It,ssrcGroups:kt}=Ds([{ssrcId:2e4}],this.cname);Ct.attributes.ssrcs=It,Ct.attributes.ssrcGroups=kt}}this.sessionDesc=ut,this.currentMidIndex=ut.mediaDescriptions.length-1}toString(){return jr.print(this.sessionDesc)}hasMid(j){return Array.isArray(j)?j.every(s=>this.hasMid(s)):this.sessionDesc.mediaDescriptions.some(s=>s.attributes.mid===j)}send(j,s,$,_e,tt){$=$.replace(/ /g,"-");let{ssrcs:rt,ssrcGroups:it}=Ds(s,this.cname,Ft("SYNC_GROUP")?$:void 0),at=this.findPreloadMediaDesc(rt);if(at){if(br()&&this.firefoxSsrcMidMap.set(rt[0].ssrcId,at.attributes.mid),tt&&(tt.twcc||tt.remb)){let ct=this.sessionDesc.mediaDescriptions.indexOf(at);return this.sessionDesc.mediaDescriptions[ct]=this.mungSendMediaDesc(at,tt),{mid:at.attributes.mid,needExchangeSDP:!0}}return{mid:at.attributes.mid,needExchangeSDP:!1}}{let ct=this.findAvailableMediaIndex(j,rt,_e),dt;return ct===-1?(dt=this.createOrRecycleSendMedia(j,rt,it,"sendonly",_e,tt),this.updateBundleMids()):(dt=Nr(this.sessionDesc.mediaDescriptions[ct]),dt.attributes.direction="sendonly",dt.attributes.ssrcs=rt,dt.attributes.ssrcGroups=it,this.sessionDesc.mediaDescriptions[ct]=this.mungSendMediaDesc(dt,tt)),br()&&this.firefoxSsrcMidMap.set(rt[0].ssrcId,dt.attributes.mid),{needExchangeSDP:!0,mid:dt.attributes.mid}}}stopSending(j){let s=this.sessionDesc.mediaDescriptions.filter($=>$.attributes.mid&&j.indexOf($.attributes.mid)!==-1);if(s.length!==j.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");s.forEach($=>{$.attributes.ssrcs=[]}),this.updateBundleMids()}receive(j,s,$){let _e=[];return j.forEach(tt=>{let rt=tt._mediaStreamTrack.kind,it=this.findAvailableRecvMediaIndex(rt),at,ct=!1;it===-1?(ct=!0,at=this.createOrRecycleRecvMedia(tt,[],"recvonly",s,$),this.updateBundleMids()):(at=Nr(this.sessionDesc.mediaDescriptions[it]),at.attributes.direction="recvonly"),_e.push({mid:at.attributes.mid,needCreateTransceiver:ct})}),_e}stopReceiving(j){let s=this.sessionDesc.mediaDescriptions.filter($=>j.indexOf($.attributes.mid)!==-1);if(s.length!==j.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");s.forEach($=>{$.media.port="0",$.attributes.direction="inactive"}),this.updateBundleMids()}addRemoteCandidate(j){let{foundation:s,protocol:$,address:_e,port:tt,type:rt,relatedAddress:it,relatedPort:at,priority:ct}=new RTCIceCandidate(j),dt={foundation:s??"",componentId:"1",transport:$??"",priority:ct?ct+"":"",connectionAddress:_e??"",port:tt?tt+"":"",type:rt?rt+"":"",relAddr:it??"",relPort:at?at+"":"",extension:{}};this.candidates.some(ut=>ut.priority===dt.priority&&ut.connectionAddress===dt.connectionAddress&&ut.port===dt.port)||(this._candidates.push(dt),this.sessionDesc.mediaDescriptions.forEach(ut=>{ut.attributes.candidates=this.candidates}))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(j,s,$,_e,tt){let rt=j._mediaStreamTrack.kind,it=this.rtpCapabilities.recv,at=sm(rt,it,this.localCapabilities.send,rt===Cn.AUDIO?tt:_e),ct=rt===Cn.VIDEO?it.videoExtensions:it.audioExtensions,dt="".concat(++this.currentMidIndex),ut={media:{mediaType:rt,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:at.map(mt=>mt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:ct,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:s,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:at,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:$,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(dt)}};ut=this.mungRecvMediaDsec(ut,j);let pt=this.findFirstClosedMedia(rt);if(pt){let mt=this.sessionDesc.mediaDescriptions.indexOf(pt);this.sessionDesc.mediaDescriptions[mt]=ut}else this.sessionDesc.mediaDescriptions.push(ut);return ut}muteRemote(j){let s=this.sessionDesc.mediaDescriptions.filter($=>vn(j).call(j,$.attributes.mid||""));if(s.length!==j.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");s.forEach($=>{$.attributes.direction="inactive"})}unmuteRemote(j){let s=this.sessionDesc.mediaDescriptions.filter($=>vn(j).call(j,$.attributes.mid||""));if(s.length!==j.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");s.forEach($=>{$.attributes.direction="recvonly"})}findAvailableMediaIndex(j,s,$){return this.sessionDesc.mediaDescriptions.findIndex(_e=>{let tt=_e.media.mediaType===j&&_e.media.port!=="0"&&(_e.attributes.direction==="sendonly"||_e.attributes.direction==="sendrecv")&&_e.attributes.ssrcs.length===0;if(br()){if(tt){let rt=this.firefoxSsrcMidMap.get(s[0].ssrcId);return!(rt||_e.attributes.mid!=="0"&&_e.attributes.mid!=="1")||!(!rt||rt!==_e.attributes.mid)}return!1}return tt&&_e.attributes.mid===$})}findAvailableRecvMediaIndex(j){return this.sessionDesc.mediaDescriptions.findIndex(s=>{let $=s.media.mediaType===j&&s.media.port!=="0"&&(s.attributes.direction==="recvonly"||s.attributes.direction==="sendrecv");return s.attributes.mid!=="0"&&s.attributes.mid!=="1"&&$})}predictReceivingMids(j){let s=[];for(let $=0;$<j;$++)s.push((this.currentMidIndex+$+1).toString(10));return s}restartICE(j){j=Nr(j),this._iceParameters=j,this.sessionDesc.mediaDescriptions.forEach(s=>{s.attributes.iceUfrag=j.iceUfrag,s.attributes.icePwd=j.icePwd})}createOrRecycleSendMedia(j,s,$,_e,tt,rt){let it=this.rtpCapabilities.send,at=j===Cn.VIDEO?it.videoCodecs:it.audioCodecs,ct=j===Cn.VIDEO?it.videoExtensions:it.audioExtensions;br()&&(tt="".concat(++this.currentMidIndex));let dt={media:{mediaType:j,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:at.map(pt=>pt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:ct,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:s,ssrcGroups:$,rtcpFeedbackWildcards:[],payloads:at,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:_e,rtcpMux:!0,rtcpRsize:!0,mid:tt}};dt=this.mungSendMediaDesc(dt,rt);let ut=this.findFirstClosedMedia(j);if(ut){let pt=this.sessionDesc.mediaDescriptions.indexOf(ut);this.sessionDesc.mediaDescriptions[pt]=dt}else this.sessionDesc.mediaDescriptions.push(dt);return dt}mungRecvMediaDsec(j,s,$){let _e=Nr(j);return IE(_e),Tp(_e,s),AE(_e,s),av(_e),t1(_e,$,this.localCapabilities.send),_e}mungSendMediaDesc(j,s){let $=Nr(j);return t1($,s,this.localCapabilities.recv),su($),$}updateRecvMedia(j,s){let $=this.sessionDesc.mediaDescriptions.findIndex(_e=>_e.attributes.mid===j);if($!==-1){let _e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[$],s);this.sessionDesc.mediaDescriptions[$]=_e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(j=>j.media.port!=="0").map(j=>j.attributes.mid)}findPreloadMediaDesc(j){return this.sessionDesc.mediaDescriptions.find(s=>{var $;return(($=s.attributes)===null||$===void 0||($=$.ssrcs[0])===null||$===void 0?void 0:$.ssrcId)===j[0].ssrcId})}findFirstClosedMedia(j){return this.sessionDesc.mediaDescriptions.find(s=>br()?s.media.port==="0"&&s.media.mediaType===j:s.media.port==="0")}},kF=["sdp"];function Q4(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function vp(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?Q4(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):Q4(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}let xa=class d1 extends wN{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var s,$;return(s=($=this.peerConnection.getReceivers()[0])===null||$===void 0||($=$.transport)===null||$===void 0?void 0:$.state)!==null&&s!==void 0?s:null}get localCodecs(){return[]}set isInRestartIce(s){this._isInRestartIce=s}get isInRestartIce(){return this._isInRestartIce}constructor(s,$,_e){super(s,$),gt(this,"direction",void 0),gt(this,"name",void 0),gt(this,"store",void 0),gt(this,"spec",void 0),gt(this,"peerConnection",void 0),gt(this,"initialOffer",void 0),gt(this,"transport",void 0),gt(this,"statsFilter",void 0),gt(this,"localCandidateCount",0),gt(this,"allCandidatesReceived",!1),gt(this,"localCandidateAddress",null),gt(this,"useXR",Ft("USE_XR")),gt(this,"filter",{filterRTX:!Ft("USE_PUB_RTX")&&!Ft("USE_SUB_RTX"),filterVideoFec:Ft("FILTER_VIDEO_FEC"),filterAudioFec:Ft("FILTER_AUDIO_FEC")}),gt(this,"extension",{useXR:this.useXR}),gt(this,"_isInRestartIce",!1),gt(this,"mutex",new Lo("P2PConnection-mutex")),gt(this,"onLocalCandidate",void 0),gt(this,"remoteSDP",void 0),gt(this,"pendingCandidates",[]),gt(this,"localCapabilities",void 0),gt(this,"isReady",!1),gt(this,"restartCnt",0),gt(this,"curTurnServerIndex",0),this.store=$,this.spec=s,this.peerConnection=new RTCPeerConnection(d1.resolvePCConfiguration(s,$.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=_e??es.SEND_ONLY,this.name=this.direction===es.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=RE(this.peerConnection,Ft("STATS_UPDATE_INTERVAL"),void 0,br()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(s){try{let $=await lv(this.filter,this.extension);if(this.localCapabilities=n1($),s){let{sdp:_e}=s,tt=PF(s,kF),rt=function(){let ut={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},pt=p0(arguments.length>2?arguments[2]:void 0,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},"sendonly"),mt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},yt={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},At={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(Jl(pt,ut,"videoExtensions",mt,yt,At),Jl(pt,ut,"videoCodecs",mt,yt,At),Jl(pt,ut,"audioExtensions",mt,yt,At),Jl(pt,ut,"audioCodecs",mt,yt,At),Ft("RAISE_H264_BASELINE_PRIORITY")){let Ct=At.videoCodecs.findIndex(It=>It.rtpMap&&It.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&It.fmtp&&It.fmtp.parameters["profile-level-id"]==="42001f");if(Ct!==-1){let It=At.videoCodecs.findIndex(kt=>kt.rtpMap&&kt.rtpMap.encodingName.toLocaleLowerCase()==="h264");if(It<Ct){Et.debug("raising H264 baseline profile priority");let kt=At.videoCodecs[Ct];At.videoCodecs.splice(Ct,1),At.videoCodecs.splice(It,0,kt)}It!==-1&&Ft("FILTER_SEND_H264_BASELINE")&&(mt.videoCodecs=mt.videoCodecs.filter(kt=>!(kt.rtpMap&&kt.rtpMap.encodingName.toLocaleLowerCase()==="h264"&&kt.fmtp&&kt.fmtp.parameters["profile-level-id"]!=="42001f")))}}return{send:mt,recv:yt,sendrecv:At}}(this.filter,this.extension,_e);this.remoteSDP=new J4({remoteIceParameters:tt.iceParameters,remoteDtlsParameters:tt.dtlsParameters,candidates:[],remoteRTPCapabilities:rt,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;let it=await this.peerConnection.createAnswer();if(!it.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");let at=iu(it.sdp);await this.peerConnection.setLocalDescription(it);let ct=await X4(this.filter,this.extension,it.sdp);this.localCapabilities=n1(ct);let dt=this.peerConnection.getTransceivers()[0];return dt!=null&&dt.receiver&&dt.receiver.transport&&this.tryBindTransportEvents(dt.receiver.transport),vp(vp({},at),{},{sdp:it.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});let _e=await this.peerConnection.createOffer();if(!_e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let tt=iu(_e.sdp);return this.initialOffer=_e,vp(vp({},tt),{},{sdp:_e.sdp})}}catch($){throw new rn(Nt.GET_LOCAL_CONNECTION_PARAMS_FAILED,$.toString())}}async connect(s){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);let{sdp:$,iceParameters:_e,dtlsParameters:tt}=s,rt=await X4(this.filter,this.extension,$);this.remoteSDP=new J4({remoteIceParameters:_e,remoteDtlsParameters:tt,candidates:[],remoteRTPCapabilities:rt,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});let it=this.peerConnection.getTransceivers()[0];it!=null&&it.sender&&it.sender.transport&&this.tryBindTransportEvents(it.sender.transport)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat($.toString()))}}async addRemoteCandidate(s){try{s&&this.pendingCandidates.push(s),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach($=>{this.peerConnection.addIceCandidate($)}),this.pendingCandidates=[])}catch($){throw new rn(Nt.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat($.toString()))}}send(s,$,_e){var tt=this;return Fs(function*(){let rt=yield Bn(tt.mutex.lock("From P2PConnection.send"));try{if(!tt.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let it=[],at=tt.remoteSDP.receive(s,$,_e);s.forEach((It,kt)=>{if(at[kt].needCreateTransceiver){let Vt=tt.peerConnection.addTransceiver(It._mediaStreamTrack,{direction:"sendonly"});it.push(Vt),It._updateRtpTransceiver(Vt)}else{let Vt=tt.peerConnection.getTransceivers().find(Bt=>Bt.mid===at[kt].mid);if(!Vt)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(at[kt].mid));it.push(Vt),It._updateRtpTransceiver(Vt)}}),br()&&Ft("SIMULCAST")===!0&&(yield Bn(tt.applySimulcastForFirefox(it,s)));let ct=at.map(It=>It.mid),dt=yield Bn(tt.peerConnection.createOffer()),ut=tt.mungSendOfferSDP(dt.sdp,s,ct),pt=jr.parse(ut),mt=ct.map(It=>{let kt=pt.mediaDescriptions.find(Vt=>Vt.attributes.mid===It);if(!kt)throw new Error("Cannot extract ssrc from mediaDescription.");return sv(kt,Ft("USE_PUB_RTX"))}),yt=it.map((It,kt)=>{let Vt=ct[kt];return{localSSRC:mt[kt],id:Vt}});yield Bn(tt.peerConnection.setLocalDescription({type:"offer",sdp:ut}));try{yield yt}catch(It){let kt=tt.remoteSDP.toString();throw yield Bn(tt.peerConnection.setLocalDescription({type:"offer",sdp:ut})),yield Bn(tt.peerConnection.setRemoteDescription({type:"answer",sdp:kt})),yield Bn(tt.stopSending(ct,!0)),It}yield Bn(tt.applySimulcastEncodings(it,s)),yield Bn(tt.applySendEncodings(it,s));let At=tt.remoteSDP.toString(),Ct=tt.logSDPExchange(ut,"offer","local","send");return Ct==null||Ct(At),yield Bn(tt.setRemoteDescription({type:"answer",sdp:At})),it.map((It,kt)=>{let Vt=ct[kt];return{localSSRC:mt[kt],id:Vt}})}catch(it){throw it instanceof rn?it:new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(it.toString()))}finally{rt()}})()}async stopSending(s,$){let _e=$?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let tt=this.peerConnection.getTransceivers().filter(ct=>s.indexOf(ct.mid)!==-1);if(tt.length!==s.length)throw new Error("Transceivers' length (".concat(tt.length,") doesn't match mids' length (").concat(s.length,") when trying to call P2PConnection.stopSending."));tt.map(ct=>{var dt;ct.direction="inactive",(dt=ct.stop)===null||dt===void 0||dt.call(ct)});let rt=await this.peerConnection.createOffer(),it=this.logSDPExchange(rt.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(rt),this.remoteSDP.stopReceiving(s);let at=this.remoteSDP.toString();it==null||it(at),await this.setRemoteDescription({type:"answer",sdp:at})}catch(tt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(tt.toString()))}finally{_e&&_e()}}async receive(s,$,_e,tt){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(s," before remoteSDP created."));let{mid:rt,needExchangeSDP:it}=this.remoteSDP.send(s,$,_e,tt);if(it){let ct=this.remoteSDP.toString(),dt=this.logSDPExchange(ct,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:ct});let ut=await this.peerConnection.createAnswer(),pt=this.mungReceiveAnswerSDP(ut.sdp,rt,s);dt==null||dt(pt||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:pt}),Et.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(s," by exchanging SDP."))}else Et.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(s," no need to exchange SDP."));let at=this.peerConnection.getTransceivers().find(ct=>ct.mid===rt);if(!at||at.mid===null)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:at.receiver.track,mid:at.mid,transceiver:at}}catch(rt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(rt.toString()))}}async mockReceive(s,$,_e,tt){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(s," before remoteSDP created."));let{mid:rt,needExchangeSDP:it}=this.remoteSDP.send(s,$,_e,tt);if(it){let at=this.remoteSDP.toString(),ct=this.logSDPExchange(at,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:at});let dt=await this.peerConnection.createAnswer(),ut=this.mungReceiveAnswerSDP(dt.sdp,rt,s);ct==null||ct(ut||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:ut}),Et.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(s," by exchanging SDP."))}else Et.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(s," no need to exchange SDP."))}catch(rt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(rt.toString()))}}async stopReceiving(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat($.toString()))}}async restartICE(s){try{if(this.store.p2pTransport===xu.Auto&&(this.store.p2pTransport=xu.SdRtn,vr().supportPCSetConfiguration&&this.peerConnection.setConfiguration(d1.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,vr().supportPCSetConfiguration&&this.peerConnection.setConfiguration(d1.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!s){this.restartCnt++,this.isReady=!1;let $=await this.peerConnection.createOffer({iceRestart:!0});if(!$.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let{iceParameters:_e}=iu($.sdp);return this.store.descriptionStart(),this.direction===es.SEND_ONLY&&await this.peerConnection.setLocalDescription($),_e}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(s),this.store.descriptionStart(),this.direction===es.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});let $=await this.peerConnection.createAnswer();if(!$.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");let{iceParameters:_e}=iu($.sdp);return await this.peerConnection.setLocalDescription($),_e}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat($.toString()))}}close(){var s;this.peerConnection.close(),this.peerConnection.onicecandidate=null,(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(s){return this.statsFilter.getVideoIsReady(s)}async updateEncoderConfig(s,$){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let _e=await this.peerConnection.createOffer(),tt=this.mungSendOfferSDP(_e.sdp,[$],[s]);this.remoteSDP.updateRecvMedia(s,$);let rt=this.remoteSDP.toString(),it=this.logSDPExchange(tt,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:tt}),it==null||it(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch(_e){throw new rn(Nt.EXCHANGE_SDP_FAILED,_e.toString())}}async updateSendParameters(s,$){let _e=this.peerConnection.getTransceivers().filter(tt=>tt.mid===s);_e.length===1&&(this.isVP8Simulcast($)?br()||await this.applySimulcastEncodings(_e,[$]):await this.applySendEncodings(_e,[$]))}setStatsRemoteVideoIsReady(s,$){this.statsFilter.setVideoIsReady2(s,$)}async replaceTrack(s,$){let _e=this.peerConnection.getTransceivers().find(tt=>tt.mid===$);_e&&await _e.sender.replaceTrack(s._mediaStreamTrack)}async getSelectedCandidatePair(){let s=this.peerConnection.getReceivers();if(s.length>0&&s[0].transport&&s[0].transport.iceTransport&&s[0].transport.iceTransport.getSelectedCandidatePair&&s[0].transport.iceTransport.getSelectedCandidatePair()){let $=s[0].transport.iceTransport,{local:_e,remote:tt}=$.getSelectedCandidatePair();return{local:vp(vp({},vu),{},{candidateType:_e.type,protocol:_e.protocol,address:_e.address,port:_e.port}),remote:vp(vp({},vu),{},{candidateType:tt.type,protocol:tt.protocol,address:tt.address,port:tt.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var s,$;vn(s=["connected","completed"]).call(s,this.peerConnection.iceConnectionState)&&(this.isReady=!1),($=this.onICEConnectionStateChange)===null||$===void 0||$.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var s;this.peerConnection.connectionState==="connected"&&(this.restartCnt=0),(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=s=>{if(s.candidate){var $;s.candidate.candidate&&(this.localCandidateAddress=s.candidate.address,($=this.onLocalCandidate)===null||$===void 0||$.call(this,s.candidate.toJSON())),this.localCandidateCount+=1}else this.allCandidatesReceived=!0,Et.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(s,$){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,tt={iceServers:[]};var rt;return s.iceServers?tt.iceServers=s.iceServers:s.turnServer&&s.turnServer.mode!=="off"&&(Pm(s.turnServer.servers)?tt.iceServers=s.turnServer.servers:(tt.iceServers&&tt.iceServers.push(...d1.turnServerConfigToIceServers(s.turnServer.servers,$,_e)),Ft("USE_TURN_SERVER_OF_GATEWAY")&&tt.iceServers&&s.turnServer.serversFromGateway&&tt.iceServers.push(...d1.turnServerConfigToIceServers(s.turnServer.serversFromGateway,$,_e)),vn(rt=[xu.Relay,xu.SdRtn]).call(rt,$)&&(tt.iceTransportPolicy="relay"),Ft("FORCE_TURN_TCP")?tt.iceTransportPolicy="relay":s.turnServer.servers.concat(s.turnServer.serversFromGateway||[]).forEach(it=>{it.forceturn&&(tt.iceTransportPolicy="relay")}))),Ft("ENABLE_ENCODED_TRANSFORM")&&vr().supportWebRTCEncodedTransform&&(tt.encodedInsertableStreams=!0),Et.debug("P2PConnection p2pTransport is ".concat($)),tt}static turnServerConfigToIceServers(s,$){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,tt=[],rt=s.filter(at=>at.tcpport);Et.debug("P2PConnection turnServers is ".concat(rt,", current index is ").concat(_e));let it=rt.length>_e?rt[_e]:rt[0];switch($){case xu.SdRtn:let at=s.filter(dt=>{var ut;return vn(ut=dt.username).call(ut,"glb:")&&dt.turnServerURL==dt.turnServerURL}),ct=at.length>_e?at[_e]:at[0];ct&&(tt.push({username:ct.username,credential:ct.password,credentialType:"password",urls:"turn:".concat(up(ct.turnServerURL),":").concat(ct.tcpport,"?transport=udp")}),tt.push({username:ct.username,credential:ct.password,credentialType:"password",urls:"turns:".concat(up(ct.turnServerURL),":").concat(ct.tcpport,"?transport=tcp")}));break;case xu.Relay:it&&(tt.push({username:it.username,credential:it.password,credentialType:"password",urls:"turn:".concat(it.turnServerURL,":").concat(it.tcpport,"?transport=udp")}),tt.push({username:it.username,credential:it.password,credentialType:"password",urls:"turns:".concat(up(it.turnServerURL),":").concat(it.tcpport,"?transport=tcp")}));break;default:it&&(tt.push({username:it.username,credential:it.password,credentialType:"password",urls:"turn:".concat(it.turnServerURL,":").concat(it.tcpport,"?transport=udp")}),tt.push({username:it.username,credential:it.password,credentialType:"password",urls:"turns:".concat(up(it.turnServerURL),":").concat(it.tcpport,"?transport=tcp")}),tt.push({username:it.username,credential:it.password,credentialType:"password",urls:"stun:".concat(it.turnServerURL,":").concat(it.tcpport)}))}return tt}tryBindTransportEvents(s){if(s){this.transport=s,s.onstatechange=()=>{var _e;s!=null&&s.state&&((_e=this.onDTLSTransportStateChange)===null||_e===void 0||_e.call(this,s.state))},s.onerror=_e=>{var tt;(tt=this.onDTLSTransportError)===null||tt===void 0||tt.call(this,"error"in _e?_e.error:_e)};let $=s.iceTransport;$&&($.onstatechange=()=>{let _e=s==null?void 0:s.iceTransport.state;var tt;_e&&((tt=this.onICETransportStateChange)===null||tt===void 0||tt.call(this,_e))},$.getSelectedCandidatePair&&($.onselectedcandidatepairchange=()=>{if($.getSelectedCandidatePair()){let{local:_e,remote:tt}=$.getSelectedCandidatePair();Et.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:_e.type,protocol:_e.protocol}),", remote ").concat(JSON.stringify({candidateType:tt.type,protocol:tt.protocol,address:tt.address,port:tt.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(s,$){var _e;if($||($=this.peerConnection.getSenders().find(ut=>ut.track===s._mediaStreamTrack)),!$)return Et.warn("[".concat(s.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(s))return Et.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!vr().supportSetRtpSenderParameters)return Et.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let tt={},rt={};switch(s._optimizationMode){case"motion":tt.degradationPreference="maintain-framerate";break;case"detail":tt.degradationPreference="maintain-resolution";break;default:tt.degradationPreference="balanced"}if(s._encoderConfig){var it;let{bitrateMax:ut,frameRate:pt,scaleResolutionDownBy:mt}=s._encoderConfig;ut&&(rt.maxBitrate=1e3*ut),vn(it=s._hints).call(it,wr.LOW_STREAM)&&(pt&&(rt.maxFramerate=Js(pt)),mt&&mt>=1&&(rt.scaleResolutionDownBy=mt))}if(Ft("DSCP_TYPE")&&tp()){var at;let ut=Ft("DSCP_TYPE");vn(at=["very-low","low","medium","high"]).call(at,ut)&&(rt.networkPriority=ut)}let ct=$.getParameters(),dt=(_e=ct.encodings)===null||_e===void 0?void 0:_e[0];br()&&!dt&&(tt.encodings=[rt]),dt&&Object.assign(dt,rt),Object.assign(ct,tt),Et.debug("[".concat(s.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(ct.encodings))),await $.setParameters(ct)}async applySendEncodings(s,$){try{if(!vr().supportSetRtpSenderParameters||s.length!==$.length)return;for(let _e=0;_e<s.length;_e++){let tt=s[_e],rt=$[_e];rt instanceof Hn&&!this.isVP8Simulcast(rt)&&await this.updateRtpSenderEncodings(rt,tt.sender)}}catch{Et.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(s,$,_e){let tt=jr.parse(s);return $.forEach((rt,it)=>{let at=_e[it],ct=tt.mediaDescriptions.find(dt=>dt.attributes.mid===at);ct&&(Tp(ct,rt),cv(ct,rt,this.store.codec))}),jr.print(tt)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=s=>{var $;($=this.onFirstAudioReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoReceived=s=>{var $;($=this.onFirstVideoReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstAudioDecoded=s=>{var $;($=this.onFirstAudioDecoded)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoDecoded=(s,$,_e)=>{var tt;(tt=this.onFirstVideoDecoded)===null||tt===void 0||tt.call(this,s,$,_e)},this.statsFilter.onSelectedLocalCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedLocalCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onSelectedRemoteCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedRemoteCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onFirstVideoDecodedTimeout=s=>{var $;($=this.onFirstVideoDecodedTimeout)===null||$===void 0||$.call(this,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(s,$){if(s.length===$.length)for(let ct=0;ct<s.length;ct++){var _e,tt,rt,it,at;let dt=s[ct],ut=$[ct];if(ut instanceof Hn&&!vn(_e=ut._hints).call(_e,wr.LOW_STREAM)&&(tt=ut._encoderConfig)!==null&&tt!==void 0&&tt.bitrateMax&&((rt=ut._encoderConfig)===null||rt===void 0?void 0:rt.bitrateMax)>200&&(it=ut._scalabilityMode)!==null&&it!==void 0&&it.numSpatialLayers&&((at=ut._scalabilityMode)===null||at===void 0?void 0:at.numSpatialLayers)>1&&this.store.codec==="vp8"){let pt={},mt={high:1e3*(ut._encoderConfig.bitrateMax-50),medium:5e4};pt.encodings=[{rid:"m",active:!0,maxBitrate:mt.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:mt.high}];let yt=dt.sender.getParameters();await dt.sender.setParameters(Object.assign(yt,pt))}}}async applySimulcastEncodings(s,$){if(!br()&&s.length===$.length)for(let _e=0;_e<s.length;_e++){let tt=$[_e];if(tt instanceof Hn&&this.isVP8Simulcast(tt)){let rt=s[_e],it={},at={high:1e3*(tt._encoderConfig.bitrateMax-50),medium:5e4};it.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:at.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:at.medium,scaleResolutionDownBy:4}];let ct=rt.sender.getParameters();await rt.sender.setParameters(Object.assign(ct,it))}}}isVP8Simulcast(s){var $,_e,tt,rt,it;return!!(s instanceof Hn&&Ft("SIMULCAST")&&this.store.codec==="vp8"&&!vn($=s._hints).call($,wr.LOW_STREAM)&&(_e=s._encoderConfig)!==null&&_e!==void 0&&_e.bitrateMax&&((tt=s._encoderConfig)===null||tt===void 0?void 0:tt.bitrateMax)>200&&(rt=s._scalabilityMode)!==null&&rt!==void 0&&rt.numSpatialLayers&&((it=s._scalabilityMode)===null||it===void 0?void 0:it.numSpatialLayers)>1)}logSDPExchange(s,$,_e,tt){if(Ft("SDP_LOGGING"))return Et.upload("[".concat(this.store.clientId,"] exchanging ").concat(_e," ").concat($," SDP during P2PConnection.").concat(tt,`
`),s),$==="offer"?rt=>{this.logSDPExchange(rt,"answer",_e==="local"?"remote":"local",tt)}:void 0}async muteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let $=this.peerConnection.getTransceivers().filter(it=>it.mid&&s.indexOf(it.mid)!==-1);if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length.");$.map(it=>{it.direction="inactive"});let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_e),this.remoteSDP.muteRemote(s);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.setRemoteDescription({type:"answer",sdp:rt})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat($.toString()))}}async unmuteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let $=this.peerConnection.getTransceivers().filter(it=>it.mid&&s.indexOf(it.mid)!==-1);if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length.");$.map(async it=>{it.direction="sendonly"});let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(_e),this.remoteSDP.unmuteRemote(s);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.setRemoteDescription({type:"answer",sdp:rt})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat($.toString()))}}async getRemoteSSRC(s,$){var _e,tt;if($=(_e=$)!==null&&_e!==void 0?_e:(tt=this.currentRemoteDescription)===null||tt===void 0?void 0:tt.sdp){var rt;let it=(rt=jr.parse($).mediaDescriptions.find(at=>at.attributes.mid===s))===null||rt===void 0?void 0:rt.attributes.ssrcs;return it==null?void 0:it[0].ssrcId}}async setRemoteDescription(s){var $;await this.peerConnection.setRemoteDescription(s),vn($=["connected","completed"]).call($,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(s,$,_e){let tt=jr.parse(s),rt=tt.mediaDescriptions.find(it=>it.attributes.mid===$);return rt&&(_e===Cn.AUDIO&&rt.media.mediaType==="audio"&&su(rt),this.useXR&&h0(tt)),jr.print(tt)}};function Ql(j,s,$){let _e=j[s];if(typeof _e!="function")throw new Error("Cannot use mutex on object property.");return $.value=async function(){let tt=this.mutex,rt=await tt.lock("From P2PConnection.".concat(s));try{for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];return await _e.apply(this,at)}finally{rt()}},$}function dv(j,s){let $=document.createElement("video"),_e=document.createElement("canvas");$.setAttribute("style","display:none"),_e.setAttribute("style","display:none"),$.setAttribute("muted",""),$.muted=!0,$.setAttribute("autoplay",""),$.autoplay=!0,$.setAttribute("playsinline",""),_e.width=Js(s.width),_e.height=Js(s.height);let tt=Js(s.framerate||15);document.body.append($),document.body.append(_e);let rt=j._mediaStreamTrack;$.srcObject=new MediaStream([rt]),$.play();let it=_e.getContext("2d");if(!it)throw new Wt(Nt.UNEXPECTED_ERROR,"can not get canvas context");let at=vr(),ct=_e.captureStream(at.supportRequestFrame?0:tt).getVideoTracks()[0];ct.canvas||(ct.canvas=_e),_e.startCapture=()=>{if(!$)return _e.stopCapture&&_e.stopCapture();if($.paused&&$.play(),$.videoHeight>2&&$.videoWidth>2){let ut=$.videoWidth,pt=$.videoHeight/ut,mt=_e.width*pt;Math.abs(mt-_e.height)>=2&&(Et.debug("adjust low stream resolution","".concat(_e.width,"x").concat(_e.height," -> ").concat(_e.width,"x").concat(mt)),_e.height=mt)}it.drawImage($,0,0,_e.width,_e.height),ct.requestFrame&&ct.requestFrame(),rt!==j._mediaStreamTrack&&(rt=j._mediaStreamTrack,$.srcObject=new MediaStream([rt]))},_e.stopCapture=vT(()=>_e.startCapture&&_e.startCapture(),tt);let dt=ct.stop;return ct.stop=()=>{dt.call(ct),$&&($.remove(),$.srcObject=null,$=null),_e&&(_e.width=0,_e.remove(),_e.stopCapture&&_e.stopCapture(),_e.startCapture=void 0,_e.stopCapture=void 0,_e=null),Et.debug("clean low stream renderer")},ct}var f0,Z4,Oo,Cp,Xo,r1,uv,Bu,xl,pv,$a;on([Ql,bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],xa.prototype,"establish",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],xa.prototype,"connect",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[String,Array,String,String]),bt("design:returntype",Jt)],xa.prototype,"receive",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[String,Array,String,String]),bt("design:returntype",Jt)],xa.prototype,"mockReceive",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],xa.prototype,"stopReceiving",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],xa.prototype,"restartICE",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],xa.prototype,"close",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],xa.prototype,"updateEncoderConfig",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],xa.prototype,"updateSendParameters",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[Yo,String]),bt("design:returntype",Jt)],xa.prototype,"replaceTrack",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],xa.prototype,"muteLocal",null),on([Ql,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],xa.prototype,"unmuteLocal",null),function(j){j[j.HEIGHT=2033]="HEIGHT",j[j.FRAME_RATE=2034]="FRAME_RATE",j[j.WIDTH=2035]="WIDTH"}(f0||(f0={})),function(j){j[j.HEIGHT=2072]="HEIGHT",j[j.FRAME_RATE=2074]="FRAME_RATE",j[j.WIDTH=2076]="WIDTH"}(Z4||(Z4={})),function(j){j[j.FRAME_RATE=2002]="FRAME_RATE",j[j.WIDTH=2003]="WIDTH",j[j.HEIGHT=2004]="HEIGHT",j[j.PACKAGE_LOST=2005]="PACKAGE_LOST",j[j.AVG_ENCODE=2007]="AVG_ENCODE",j[j.NACKS=2009]="NACKS",j[j.PLIS=2010]="PLIS",j[j.FIRS=2011]="FIRS",j[j.BITRATE=2012]="BITRATE",j[j.PACKAGE_RATE=2031]="PACKAGE_RATE",j[j.ADAPTATION=2032]="ADAPTATION",j[j.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",j[j.BANDWIDTH=2061]="BANDWIDTH",j[j.RETRANSMIT=2062]="RETRANSMIT",j[j.TARGET_ENCODED=2064]="TARGET_ENCODED",j[j.TRANSMIT=2066]="TRANSMIT",j[j.FREEZE=2082]="FREEZE",j[j.DISABLED=2095]="DISABLED",j[j.PLAYER_STATUS=2128]="PLAYER_STATUS",j[j.QP_SUM=2143]="QP_SUM"}(Oo||(Oo={})),function(j){j[j.BITRATE=2069]="BITRATE",j[j.PACKAGE_LOST=2070]="PACKAGE_LOST",j[j.PACKAGE_RATE=2071]="PACKAGE_RATE",j[j.HEIGHT=2073]="HEIGHT",j[j.FRAME_RATE=2075]="FRAME_RATE",j[j.WIDTH=2077]="WIDTH"}(Cp||(Cp={})),function(j){j[j.JITTER=-1]="JITTER",j[j.PACKAGE_LOST=2014]="PACKAGE_LOST",j[j.WIDTH=2018]="WIDTH",j[j.HEIGHT=2019]="HEIGHT",j[j.FRAME_RATE=2020]="FRAME_RATE",j[j.JITTER_BUFFER=2023]="JITTER_BUFFER",j[j.CURRENT_DELAY=2024]="CURRENT_DELAY",j[j.NACKS=2026]="NACKS",j[j.PLIS=2027]="PLIS",j[j.FIRS=2028]="FIRS",j[j.BITRATE=2029]="BITRATE",j[j.PACKAGE_RATE=2078]="PACKAGE_RATE",j[j.FREEZE=2084]="FREEZE",j[j.DISABLED=2101]="DISABLED",j[j.PLAYER_STATUS=2129]="PLAYER_STATUS",j[j.QP_SUM=2144]="QP_SUM",j[j.I_FRAME_DELAY=2149]="I_FRAME_DELAY"}(Xo||(Xo={})),function(j){j[j.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",j[j.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",j[j.FREEZE_TIME=2109]="FREEZE_TIME",j[j.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER"}(r1||(r1={})),function(j){j[j.PCM_LEVEL=2104]="PCM_LEVEL"}(uv||(uv={})),function(j){j[j.PACKAGE_LOST=-1]="PACKAGE_LOST",j[j.LEVEL=2038]="LEVEL",j[j.BITRATE=2039]="BITRATE",j[j.PACKAGE_RATE=2040]="PACKAGE_RATE",j[j.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",j[j.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",j[j.FREEZE=2081]="FREEZE",j[j.DISABLED=2096]="DISABLED"}(Bu||(Bu={})),function(j){j[j.BITRATE=2044]="BITRATE",j[j.PACKAGE_LOST=2045]="PACKAGE_LOST",j[j.PACKAGE_RATE=2046]="PACKAGE_RATE",j[j.CURRENT_DELAY=2047]="CURRENT_DELAY",j[j.JITTER_BUFFER=2054]="JITTER_BUFFER",j[j.JITTER=2055]="JITTER",j[j.FREEZE=2083]="FREEZE",j[j.DISABLED=2102]="DISABLED",j[j.PCM_LEVEL=2105]="PCM_LEVEL",j[j.PLAYER_STATUS=2130]="PLAYER_STATUS",j[j.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES"}(xl||(xl={})),function(j){j[j.FREEZE_TIME=-1]="FREEZE_TIME",j[j.LEVEL=2043]="LEVEL"}(pv||(pv={})),function(j){j[j.RTT=2006]="RTT",j[j.CONN_TYPE=801]="CONN_TYPE"}($a||($a={}));let Gu=1e3,am=3;function qn(j,s,$){$!=null&&Number.isFinite($)&&(j[s]=Math.round(Math.max(0,$)))}function eO(j){let s={[$a.CONN_TYPE]:0,[$a.RTT]:j.rtt};switch(j.selectedCandidatePair.localCandidate.candidateType){case"relay":{let $=j.selectedCandidatePair.localCandidate.relayProtocol;$==="udp"&&(s[$a.CONN_TYPE]=1),$==="tcp"&&(s[$a.CONN_TYPE]=3),$==="tls"&&(s[$a.CONN_TYPE]=4);break}case"srflx":s[$a.CONN_TYPE]=2}return s}class tO extends Fr{constructor(s){super(),gt(this,"store",void 0),gt(this,"uploadWRTCStatsTimer",void 0),gt(this,"uploadOutboundDenoiserStatsTimer",void 0),gt(this,"uploadExtStatsTimer",void 0),gt(this,"uploadExtUsageStatsTimer",void 0),gt(this,"uploadInboundExtStatsTimer",void 0),gt(this,"requestStats",void 0),gt(this,"requestTransportStats",void 0),gt(this,"requestLocalMedia",void 0),gt(this,"requestRemoteMedia",void 0),gt(this,"requestAllTracks",void 0),gt(this,"requestVideoIsReady",void 0),gt(this,"requestUploadStats",void 0),gt(this,"requestUpload",void 0),gt(this,"uploadOutboundStarted",!1),gt(this,"uploadInboundStarted",!1),gt(this,"uploadTransportStarted",!1),gt(this,"uploadExtensionUsageStarted",!1),gt(this,"lastRecvStats",void 0),gt(this,"lastSendStats",void 0),gt(this,"lastFullRecvStats",void 0),gt(this,"lastFullSendStats",void 0),gt(this,"needUploadRenderFreezeTime",!0),this.store=s}uploadWRTCStats(s){if(!this.requestStats||!this.requestUploadStats)return;let $,_e;if(this.uploadTransportStarted&&($=this.requestStats(),this.store.useP2P&&(_e=this.requestStats(!0))),!$&&this.uploadOutboundStarted&&($=this.requestStats()),!_e&&this.uploadInboundStarted&&(_e=this.requestStats(!0)),$||_e){let tt={};if(this.uploadTransportStarted&&$){let rt=this.getTransportStats($,_e,s);rt&&(tt.misc=[rt])}if(this.uploadOutboundStarted&&$){let rt=this.getOutboundStats($,s?this.lastSendStats:this.lastFullSendStats,s);rt&&(tt.outbound=[rt])}if(this.uploadInboundStarted&&_e){let rt=this.getInboundStats(_e,s?this.lastRecvStats:this.lastFullRecvStats,s);rt&&(tt.inbound=rt)}this.requestUploadStats(tt)}this.lastRecvStats=_e,this.lastSendStats=$,s||(this.lastFullRecvStats=_e,this.lastFullSendStats=$)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let s=1;this.uploadWRTCStatsTimer=window.setInterval(()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(s!==am),++s===am+1&&(s=1)},Gu)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(s,$,_e){if(!this.requestStats)return;if(_e)return s.rtt==null?void 0:{addition:{[$a.RTT]:s.rtt,[$a.CONN_TYPE]:void 0}};let tt=eO(s);if(this.store.useP2P){if($){let rt=eO($);tt[$a.CONN_TYPE]+=rt[$a.CONN_TYPE]<<3}tt[$a.CONN_TYPE]+=110}else tt[$a.CONN_TYPE]+=100;return{addition:tt}}getOutboundStats(s,$,_e){if(!this.requestUploadStats||!this.requestLocalMedia)return;let tt=this.requestLocalMedia();if(!tt||tt.length===0)return;let rt,it,at;return tt.forEach(ct=>{let[dt,{track:ut,ssrcs:pt}]=ct;switch(dt){case an.LocalVideoLowTrack:case an.LocalVideoTrack:if(dt===an.LocalVideoTrack){let mt=function(Ct,It,kt,Vt,Bt){let en=It.videoSend.find(cn=>cn.ssrc===Ct);if(!en)return;let zt={},{sentFrame:Yt,inputFrame:Qt}=en;if(Qt&&Yt){let cn=Qt.frameRate,hn=Yt.frameRate;zt[Oo.FREEZE]=function(Mn,Gn){let Or=!0;return Or=!(Mn<=5)&&(Mn<=10?Gn<3:Mn<=20?Gn<4:Gn<5),Or}(cn,hn)?1:0}if(qn(zt,Oo.QP_SUM,en.qpSumPerFrame),Bt)return zt;switch(Yt&&(qn(zt,Oo.HEIGHT,Yt.height),qn(zt,Oo.WIDTH,Yt.width),qn(zt,Oo.FRAME_RATE,Yt.frameRate)),zt[Oo.DISABLED]=Vt._originMediaStreamTrack&&!Vt._originMediaStreamTrack.enabled||Vt._mediaStreamTrack&&!Vt._mediaStreamTrack.enabled?1:0,en.adaptionChangeReason){case"none":zt[Oo.ADAPTATION]=0;break;case"cpu":zt[Oo.ADAPTATION]=1;break;case"bandwidth":zt[Oo.ADAPTATION]=2;break;case"other":zt[Oo.ADAPTATION]=3}zt[Oo.PLAYER_STATUS]=ST[Vt._player?Vt._player.videoElementStatus:"uninit"],qn(zt,Oo.NACKS,en.nacksCount),qn(zt,Oo.PLIS,en.plisCount),qn(zt,Oo.FIRS,en.firsCount),qn(zt,Oo.AVG_ENCODE,en.avgEncodeMs);let Xt=kt&&kt.videoSend.find(cn=>cn.ssrc===Ct);if(Xt){let cn=Bt?Gu:Gu*am;Xt.timestamp&&en.timestamp&&(cn=en.timestamp-Xt.timestamp),Xt.packets!=null&&en.packets!=null&&qn(zt,Oo.PACKAGE_RATE,1e3*(en.packets-Xt.packets)/cn),en.packetsLost!=null&&Xt.packetsLost!=null&&qn(zt,Oo.PACKAGE_LOST,en.packetsLost-Xt.packetsLost),Xt.bytes!=null&&en.bytes!=null&&qn(zt,Oo.BITRATE,8*(en.bytes-Xt.bytes)/cn)}return zt}(pt[0].ssrcId,s,$,ut,_e),yt=_e?null:function(Ct,It,kt){let Vt=It.videoSend.find(Xt=>Xt.ssrc===Ct);if(!Vt)return null;let Bt={},en=Vt.inputFrame,zt=en&&en.height||kt&&kt._videoHeight||0,Yt=en&&en.width||kt&&kt._videoWidth||0,Qt=en&&en.frameRate||0;return qn(Bt,f0.HEIGHT,zt),qn(Bt,f0.WIDTH,Yt),qn(Bt,f0.FRAME_RATE,Qt),Bt}(pt[0].ssrcId,s,ut),At=_e?null:function(Ct){let It={};return qn(It,Oo.RETRANSMIT,Ct.bitrate.retransmit),qn(It,Oo.TARGET_ENCODED,Ct.bitrate.targetEncoded),qn(It,Oo.ACTUAL_ENCODED,Ct.bitrate.actualEncoded),qn(It,Oo.TRANSMIT,Ct.bitrate.transmit),qn(It,Oo.BANDWIDTH,Ct.sendBandwidth),It}(s);it=Object.assign({},mt,yt,At)}else at=_e?void 0:function(mt,yt,At){let Ct=yt.videoSend.find(Vt=>Vt.ssrc===mt);if(!Ct)return;let It={},kt=Ct.sentFrame;if(kt&&(qn(It,Cp.HEIGHT,kt.height),qn(It,Cp.WIDTH,kt.width),qn(It,Cp.FRAME_RATE,kt.frameRate)),At){let Vt=At.videoSend.find(Bt=>Bt.ssrc===mt);if(Vt){let Bt=Gu*am;Vt.timestamp&&Ct.timestamp&&(Bt=Ct.timestamp-Vt.timestamp),Vt.packets!=null&&Ct.packets!=null&&qn(It,Cp.PACKAGE_RATE,1e3*(Ct.packets-Vt.packets)/Bt),Ct.packetsLost!=null&&Vt.packetsLost!=null&&qn(It,Cp.PACKAGE_LOST,Ct.packetsLost-Vt.packetsLost),Vt.bytes!=null&&Ct.bytes!=null&&qn(It,Cp.BITRATE,8*(Ct.bytes-Vt.bytes)/Bt)}}return It}(pt[0].ssrcId,s,$);break;case an.LocalAudioTrack:rt=_e?void 0:function(mt,yt,At,Ct){let It=yt.audioSend.find(zt=>zt.ssrc===mt);if(!It)return;let kt={};kt[Bu.DISABLED]=Ct._originMediaStreamTrack&&!Ct._originMediaStreamTrack.enabled||Ct._mediaStreamTrack&&!Ct._mediaStreamTrack.enabled?1:0;let Vt=Ct._source.getAccurateVolumeLevel(),Bt=It.inputLevel;qn(kt,Bu.LEVEL,100*(Bt??Vt)),qn(kt,uv.PCM_LEVEL,100*Vt),qn(kt,Bu.AEC_RETURN_LOSS,It.aecReturnLoss),qn(kt,Bu.AEC_RETURN_LOSS_ENH,It.aecReturnLossEnhancement),kt[Bu.FREEZE]=0;let en=At&&At.audioSend.find(zt=>zt.ssrc===mt);if(en){let zt=Gu*am;en.timestamp&&It.timestamp&&(zt=It.timestamp-en.timestamp),en.bytes!=null&&It.bytes!=null&&qn(kt,Bu.BITRATE,8*(It.bytes-en.bytes)/zt),en.packets!=null&&It.packets!=null&&qn(kt,Bu.PACKAGE_RATE,1e3*(It.packets-en.packets)/zt)}return kt}(pt[0].ssrcId,s,$,ut)}}),{high:it,low:at,audio:rt}}getInboundStats(s,$,_e){if(!this.requestRemoteMedia)return;let tt=this.requestRemoteMedia()||[],rt=[];return tt.forEach(it=>{let[at,ct]=it,dt={peer:at.uid};if(ct.has(Cn.VIDEO)&&at.videoTrack){let ut=at._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(at._videoSSRC)||!1,pt=at.videoTrack?function(mt,yt,At,Ct,It,kt,Vt){let Bt=yt.videoRecv.find(cn=>cn.ssrc===mt);if(!Bt)return;let en={},{receivedFrame:zt,outputFrame:Yt,decodeFrameRate:Qt}=Bt,Xt=At&&At.videoRecv.find(cn=>cn.ssrc===mt);if(en[Xo.FREEZE]=It&&g0.isRemoteVideoFreeze(Ct,Bt,Xt)?1:0,qn(en,r1.FRAME_RATE_DECODE,Qt),qn(en,Xo.QP_SUM,Bt.qpSumPerFrame),Bt.framesRateFirefox&&qn(en,Xo.FRAME_RATE,Bt.framesRateFirefox),zt&&qn(en,Xo.FRAME_RATE,zt.frameRate),Xt){let cn=yt.timestamp-At.timestamp||(Vt?Gu:am*Gu);Bt.packetsLost!=null&&Xt.packetsLost!=null&&qn(en,Xo.PACKAGE_LOST,Bt.packetsLost-Xt.packetsLost),Xt.bytes!=null&&Bt.bytes!=null&&qn(en,Xo.BITRATE,8*(Bt.bytes-Xt.bytes)/cn),Xt.packets!=null&&Bt.packets!=null&&qn(en,Xo.PACKAGE_RATE,1e3*(Bt.packets-Xt.packets)/cn)}if(Vt)return en;if(zt?(qn(en,Xo.HEIGHT,zt.height),qn(en,Xo.WIDTH,zt.width)):Ct&&(qn(en,Xo.HEIGHT,Ct._videoHeight||0),qn(en,Xo.WIDTH,Ct._videoWidth||0)),Yt&&qn(en,r1.FRAME_RATE_RENDER,Yt.frameRate),qn(en,Xo.JITTER_BUFFER,Bt.jitterBufferMs),qn(en,Xo.CURRENT_DELAY,Bt.currentDelayMs),qn(en,Xo.FIRS,Bt.firsCount),qn(en,Xo.NACKS,Bt.nacksCount),qn(en,Xo.PLIS,Bt.plisCount),Ct){en[Xo.DISABLED]=Ct._originMediaStreamTrack.enabled&&Ct._mediaStreamTrack.enabled?0:1;let cn=Ct._player;if(cn){let{freezeTimeCounterList:hn,renderFreezeAccTime:Mn}=cn;if(hn&&hn.length>0&&qn(en,r1.FREEZE_TIME,hn.splice(0,1)[0]),kt&&Uu.visibility==="visible"){let Gn=Math.min(6e3,Mn);cn.renderFreezeAccTime=Math.max(0,Mn-Gn),qn(en,r1.FREEZE_TIME_RENDER,Gn)}}}if(en[Xo.PLAYER_STATUS]=ST[Ct._player?Ct._player.videoElementStatus:"uninit"],Xt&&Bt.totalInterFrameDelay!==void 0&&Bt.totalSquaredInterFrameDelay!==void 0&&Xt.totalInterFrameDelay!==void 0&&Xt.totalSquaredInterFrameDelay!==void 0){let cn=Bt.totalInterFrameDelay-Xt.totalInterFrameDelay,hn=Bt.totalSquaredInterFrameDelay-Xt.totalSquaredInterFrameDelay,Mn=Bt.framesDecodeCount-Xt.framesDecodeCount,Gn=cn/Mn*1e3,Or=Math.round(1e3*Math.sqrt((hn-Math.pow(cn,2)/Mn)/Mn));!isNaN(Or)&&Gn+Or>Math.max(3*Gn,Gn+150)&&(en[Xo.I_FRAME_DELAY]=Or)}return en}(at._videoSSRC,s,$,at.videoTrack,ut===!0,this.needUploadRenderFreezeTime,_e):void 0;pt&&(dt.video=pt)}if(ct.has(Cn.AUDIO)&&at.audioTrack){let ut=at.audioTrack?function(pt,mt,yt,At,Ct){let It=mt.audioRecv.find(cn=>cn.ssrc===pt);if(!It)return;let kt={},Vt=yt&&yt.audioRecv.find(cn=>cn.ssrc===pt),{receivedFrames:Bt,droppedFrames:en}=It;var zt,Yt;if(qn(kt,xl.JITTER,It.jitterMs),Bt!=null&&en!=null&&(kt[xl.FREEZE]=(Yt=en,(zt=Bt)===0||100*Yt/zt>20?1:0)),Vt){let cn=mt.timestamp-yt.timestamp||(Ct?Gu:Gu*am);It.packets!=null&&Vt.packets!=null&&qn(kt,xl.PACKAGE_RATE,1e3*(It.packets-Vt.packets)/cn),Vt.bytes!=null&&It.bytes!=null&&qn(kt,xl.BITRATE,8*(It.bytes-Vt.bytes)/cn),It.packetsLost!=null&&Vt.packetsLost!=null&&qn(kt,xl.PACKAGE_LOST,It.packetsLost-Vt.packetsLost)}if(Ct)return kt;let Qt=At._source.getAccurateVolumeLevel(),Xt=It.outputLevel;if(qn(kt,pv.LEVEL,100*(Xt??Qt)),qn(kt,xl.PCM_LEVEL,100*Qt),At&&(kt[xl.DISABLED]=At._originMediaStreamTrack.enabled&&At._mediaStreamTrack.enabled?0:1),qn(kt,xl.JITTER_BUFFER,It.jitterBufferMs),qn(kt,xl.CURRENT_DELAY,It.jitterBufferMs),kt[xl.PLAYER_STATUS]=ST[Ps.getPlayerState(At.getTrackId())],Vt){let cn=It.concealedSamples-Vt.concealedSamples;cn>0&&qn(kt,xl.CONCEALED_SAMPLES,cn)}return kt}(at._audioSSRC,s,$,at.audioTrack,_e):void 0;ut&&(dt.audio=ut)}(dt.video||dt.audio)&&rt.push(dt)}),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,rt}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval(()=>{if(!this.requestAllTracks||!this.requestUpload)return;let s=(this.requestAllTracks()||[]).find($=>$ instanceof _f);if(s&&s._external.getDenoiserStats){let $=s._external.getDenoiserStats();$&&this.requestUpload(Lu.DENOISER_STATS,$)}},2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval(()=>{!this.requestAllTracks||!this.requestUpload||this.requestAllTracks().forEach(s=>{s.getProcessorStats().forEach($=>{this.requestUpload&&this.requestUpload($.type,$.stats)})})},2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval(()=>{!this.requestUpload||!this.requestRemoteMedia||(this.requestRemoteMedia()||[]).forEach(s=>{let[$,_e]=s;_e.has(Cn.VIDEO)&&$.videoTrack&&$.videoTrack.getProcessorStats().forEach(tt=>{this.requestUpload&&this.requestUpload(tt.type,tt.stats)}),_e.has(Cn.AUDIO)&&$.audioTrack&&$.audioTrack.getProcessorStats().forEach(tt=>{this.requestUpload&&this.requestUpload(tt.type,tt.stats)})})},2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);let s=new Map;this.uploadExtUsageStatsTimer=window.setInterval(async()=>{let $=Date.now(),_e={connectionInterval:Ft("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:$},tt=[],rt=this.requestAllTracks&&this.requestAllTracks()||[];for(let dt of rt)!dt.muted&&dt.enabled&&(tt=tt.concat(await dt.getProcessorUsage()));let it=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(let[dt,ut]of it)ut.has(Cn.VIDEO)&&dt.videoTrack&&(tt=tt.concat(await dt.videoTrack.getProcessorUsage())),ut.has(Cn.AUDIO)&&dt.audioTrack&&(tt=tt.concat(await dt.audioTrack.getProcessorUsage()));if(tt.length===0)return;_e.details=function(dt,ut){let pt={};for(let{id:Ct,value:It,level:kt,direction:Vt}of dt){var mt;let Bt=(mt=ut.get(Ct))!==null&&mt!==void 0?mt:0,en=It===2?Bt+Ft("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:Bt;var yt,At;ut.set(Ct,en),pt[Ct]?(It===2&&(pt[Ct].value=It),kt>pt[Ct].level&&(pt[Ct].level=kt),Vt==="remote"&&(pt[Ct].remoteUidCount+=1),pt[Ct].totalTs=(yt=ut.get(Ct))!==null&&yt!==void 0?yt:0):pt[Ct]={value:It,level:kt,remoteUidCount:Vt==="local"?0:1,totalTs:(At=ut.get(Ct))!==null&&At!==void 0?At:0}}return Object.keys(pt).map(Ct=>{let{level:It,value:kt,totalTs:Vt}=pt[Ct];return{id:Ct,level:It,value:kt,totalTs:Vt}})}(tt,s);let at=Date.now(),ct=at>$?at:$+1;this.requestUpload&&this.requestUpload(Lu.EXTENSION_USAGE_STATS,{usageStats:_e,sendTs:ct})},Ft("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class Bo{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(s,$){gt(this,"uid",void 0),gt(this,"_uintid",void 0),gt(this,"_trust_in_room_",!0),gt(this,"_trust_audio_enabled_state_",!0),gt(this,"_trust_video_enabled_state_",!0),gt(this,"_trust_audio_mute_state_",!0),gt(this,"_trust_video_mute_state_",!0),gt(this,"_audio_muted_",!1),gt(this,"_video_muted_",!1),gt(this,"_audio_enabled_",!0),gt(this,"_video_enabled_",!0),gt(this,"_audio_added_",!1),gt(this,"_video_added_",!1),gt(this,"_is_pre_created",!1),gt(this,"_video_pre_subscribed",!1),gt(this,"_audio_pre_subscribed",!1),gt(this,"_trust_video_stream_added_state_",!0),gt(this,"_trust_audio_stream_added_state_",!0),gt(this,"_audioTrack",void 0),gt(this,"_videoTrack",void 0),gt(this,"_dataChannels",[]),gt(this,"_audioSSRC",void 0),gt(this,"_videoSSRC",void 0),gt(this,"_audioOrtc",void 0),gt(this,"_videoOrtc",void 0),gt(this,"_cname",void 0),gt(this,"_rtxSsrcId",void 0),gt(this,"_videoMid",void 0),gt(this,"_audioMid",void 0),this.uid=s,this._uintid=$}}var Ll;function $F(j,s){var $;let _e;switch(s){case an.LocalAudioTrack:_e=cr.Audio;break;case an.LocalVideoTrack:_e=vn($=j._hints).call($,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalVideoLowTrack:_e=cr.Low}return _e}function nO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function NE(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?nO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):nO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}(function(j){j.SEND_ONLY="SEND_ONLY",j.RECEIVE_ONLY="RECEIVE_ONLY"})(Ll||(Ll={}));class Io extends Fr{get state(){return this._state}set state(s){let $=this._state;this._state=s,this.emit(kn.StateChange,$,this._state)}constructor(s,$){super(),gt(this,"store",void 0),gt(this,"statsUploader",void 0),gt(this,"sendConnection",void 0),gt(this,"recvConnection",void 0),gt(this,"localTrackMap",new Map),gt(this,"remoteUserMap",new Map),gt(this,"localDataChannels",[]),gt(this,"pendingLocalTracks",[]),gt(this,"pendingRemoteTracks",[]),gt(this,"statsCollector",void 0),gt(this,"dtlsFailedCount",0),gt(this,"sendMutex",new Lo("P2PChannel2-send-mutex")),gt(this,"recvMutex",new Lo("P2PChannel2-recv-mutex")),gt(this,"_state",mr.Disconnected),gt(this,"_restartStates",["disconnected","failed"]),gt(this,"reconnectInterval",void 0),gt(this,"uploadUnplinkStarted",!1),gt(this,"uploadDownlinkStarted",!1),gt(this,"uplinkStateUploadInterval",void 0),gt(this,"downlinkStatsUploadInterval",void 0),gt(this,"handleMuteLocalTrack",async(_e,tt,rt)=>{let it=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==mr.Connected)return void rt(new rn(Nt.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));let dt=this.filterTobeMutedTracks(_e);if(dt.length===0)return void tt();let ut=dt.find(At=>At[0]==="videoLowTrack");ut&&ut[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(dt.map(At=>{let[,{id:Ct}]=At;return Ct}));let pt=!1;var at,ct;_e.trackMediaType==="video"?pt=!((at=this.localTrackMap.get(an.LocalAudioTrack))===null||at===void 0||!at.track._muted):pt=((ct=this.localTrackMap.get(an.LocalVideoTrack))===null||ct===void 0?void 0:ct.id)===void 0;let mt=this.createMuteMessage(dt);await Rr(this,kn.RequestMuteLocal,mt);let yt=_e.trackMediaType==="video"?gu.MUTE_LOCAL_VIDEO:gu.MUTE_LOCAL_AUDIO;await Rr(this,kn.RequestP2PMuteLocal,{action:yt,message:mt,isMuteAll:pt}),tt()}catch(dt){rt(dt)}finally{it()}}),gt(this,"handleUnmuteLocalTrack",async(_e,tt,rt)=>{let it=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==mr.Connected)return void rt(new rn(Nt.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));let at=this.filterTobeUnmutedTracks(_e);if(at.length===0)return void tt();await this.sendConnection.unmuteLocal(at.map(ut=>{let[,{id:pt}]=ut;return pt}));let ct=this.createUnmuteMessage(at),dt=_e.trackMediaType==="video"?gu.UNMUTE_LOCAL_VIDEO:gu.UNMUTE_LOCAL_AUDIO;await Rr(this,kn.RequestP2PMuteLocal,{action:dt,message:ct}),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleUpdateVideoEncoder",async(_e,tt,rt)=>{let it=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{let at=this.localTrackMap.get(an.LocalVideoTrack);if(!this.sendConnection||!at||at.track!==_e||this.state!==mr.Connected)return void tt();let{id:ct,track:dt}=at;ct&&(await this.sendConnection.updateSendParameters(ct,dt),await this.sendConnection.updateEncoderConfig(ct,dt),this.emit(kn.UpdateVideoEncoder,dt)),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleSetOptimizationMode",async(_e,tt,rt)=>{let it=await this.sendMutex.lock("Locking from P2PChannel2.handleSetOptimizationMode");try{let at=this.localTrackMap.get(an.LocalVideoTrack);if(!this.sendConnection||!at||at.track!==_e||this.state!==mr.Connected)return;let{id:ct,track:dt}=at;ct&&await this.sendConnection.updateSendParameters(ct,dt),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleReplaceTrack",async(_e,tt,rt,it)=>{let at;Et.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(_e.getTrackId(),"]")),typeof it=="boolean"&&it||(at=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var ct;let ut=Array.from(this.localTrackMap.entries()).find(pt=>{let[,{track:mt}]=pt;return _e===mt});if(!this.sendConnection||!ut||ut[1].id===void 0||this.state!==mr.Connected)return void tt();if(await((ct=this.sendConnection)===null||ct===void 0?void 0:ct.replaceTrack(_e,ut[1].id)),ut[0]===an.LocalVideoTrack&&vr().supportDualStreamEncoding){let pt=this.localTrackMap.get(an.LocalVideoLowTrack);if(pt){let mt=_e._mediaStreamTrack.clone();pt.track._originMediaStreamTrack.stop(),pt.track._mediaStreamTrack=mt,pt.track._originMediaStreamTrack=mt,await new Jt((yt,At)=>{this.handleReplaceTrack(pt.track,yt,At,!0)})}}tt()}catch(ut){rt(ut)}finally{var dt;(dt=at)===null||dt===void 0||dt()}}),gt(this,"handleGetLocalVideoStats",_e=>{_e(this.statsCollector.getLocalVideoTrackStats())}),gt(this,"handleGetLocalAudioStats",_e=>{_e(this.statsCollector.getLocalAudioTrackStats())}),gt(this,"handleGetRemoteVideoStats",_e=>this.statsCollector.getRemoteVideoTrackStats(_e.uid)[_e.uid]),gt(this,"handleGetRemoteAudioStats",_e=>this.statsCollector.getRemoteAudioTrackStats(_e.uid)[_e.uid]),this.store=s,this.statsCollector=$,this.statsCollector.addP2PChannel(this),this.statsUploader=new tO(s),this.bindStatsUploaderEvents(),this.reconnectInterval=window.setInterval(()=>{[this.sendConnection,this.recvConnection].forEach(_e=>{_e&&(_e.iceConnectionState!=="disconnected"&&_e.iceConnectionState!=="failed"||this.handleDisconnect(_e.direction))})},Ft("ICE_RESTART_INTERVAL"))}async startP2PConnection(s,$){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(s,$,_e,tt,rt,it){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(s,$){let _e;try{if($){this.recvConnection&&(Et.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),_e=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new xa(s,this.store,es.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);let tt=await this.recvConnection.establish($);return{iceParameters:tt.iceParameters,dtlsParameters:tt.dtlsParameters,sdp:tt.sdp}}{this.state=mr.New,this.sendConnection&&(Et.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),_e=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new xa(s,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);let tt=await this.sendConnection.establish();return{iceParameters:tt.iceParameters,dtlsParameters:tt.dtlsParameters,sdp:tt.sdp}}}finally{_e&&_e()}}async p2pConnect(s){if(!this.sendConnection)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(s),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=mr.Connected}async addRemoteCandidate(s,$){if($===es.RECEIVE_ONLY){if(!this.sendConnection)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(s)}else{if(!this.recvConnection)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(s)}}publish(s,$,_e){var tt=this;return Fs(function*(){let rt=yield Bn(tt.sendMutex.lock("From P2PChannel.publish"));try{if(!tt.sendConnection||tt.state!==mr.Connected){tt.throwIfTrackTypeNotMatch(s);let ut=s.filter(pt=>tt.pendingLocalTracks.indexOf(pt)===-1);return void(tt.pendingLocalTracks=tt.pendingLocalTracks.concat(ut))}tt.store.pubId=tt.store.pubId+1,qo.markPublishStart(tt.store.clientId,tt.store.pubId);let it=tt.filterTobePublishedTracks(s,$,_e);if(it.length===0)return void(yield Bn(tt.tryToUnmuteAudio(s)));it.forEach(ut=>{let{track:pt,type:mt}=ut,yt=Date.now();tt.store.publish(pt.getTrackId(),mt===an.LocalAudioTrack?"audio":"video",yt)}),tt.bindLocalTrackEvents(it);let at=yield Bn(tt.sendConnection.send(it.map(ut=>{let{track:pt}=ut;return pt}),tt.store.codec,tt.store.audioCodec)),ct=(yield Bn(at.next())).value,dt=tt.createGatewayPublishMessage(it,ct);try{yield dt}catch(ut){throw at.throw(ut),(ut==null?void 0:ut.code)===Nt.WS_ABORT&&it.forEach(pt=>{let{track:mt}=pt;tt.pendingLocalTracks.indexOf(mt)===-1&&tt.pendingLocalTracks.push(mt)}),tt.unbindLocalTrackEvents(it),ut}yield Bn(at.next()),it.forEach(ut=>{let{type:pt}=ut;tt.statsCollector.addLocalStats(pt)}),tt.statsUploader.startUploadOutboundStats(),tt.assignLocalTracks(it,ct),it.forEach(ut=>{let{track:pt,type:mt}=ut,yt=Date.now();tt.store.publish(pt.getTrackId(),mt===an.LocalAudioTrack?"audio":"video",void 0,yt)}),tt.startUploadUplinkState()}finally{rt()}})()}async unpublish(s){if(!this.sendConnection||this.state!==mr.Connected)return void(s.length===0?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter(rt=>!vn(s).call(s,rt)));let $=this.filterTobeUnpublishedTracks(s);if($.length===0)return;let _e=$.find(rt=>rt[0]==="videoLowTrack");_e&&_e[1].track.close();let tt=this.createGatewayUnpublishMessage($);if(await this.sendConnection.stopSending($.map(rt=>{let[,{id:it}]=rt;return it})),this.withdrawLocalTracks($),this.unbindLocalTrackEvents($.map(rt=>{let[it,{track:at}]=rt;return{type:it,track:at}})),$.forEach(rt=>{let[it]=rt;this.statsCollector.removeLocalStats(it)}),this.localTrackMap.size===0&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===mr.Connected)return _e&&_e[1].track.close(),tt;s.forEach(rt=>{let it=this.pendingLocalTracks.indexOf(rt);it!==-1&&this.pendingLocalTracks.splice(it,1)})}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);let s=()=>{let $=[],_e=[];Array.from(this.localTrackMap.entries()).forEach(tt=>{let[rt,{track:it,ssrcs:at}]=tt,ct={stream_type:$F(it,rt),ssrcs:at};it._muted||!it._enabled?$.push(ct):_e.push(ct)}),$.length>0&&$.forEach(tt=>{Rr(this,kn.RequestMuteLocal,[tt])}),_e.length>0&&_e.forEach(tt=>{Rr(this,kn.RequestUnmuteLocal,[tt])})};s(),this.uplinkStateUploadInterval=window.setInterval(()=>{s()},3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(s){return Fs(function*(){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")})()}async republish(){this.pendingLocalTracks.length>0&&(Et.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await lo(this,kn.RequestRePublish,this.pendingLocalTracks),this.emit(kn.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(s,$,_e,tt){var rt;if(!this.recvConnection)throw new rn(Nt.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if((rt=this.remoteUserMap.get(s))!==null&&rt!==void 0&&rt.has($))return;let{track:it,mid:at,transceiver:ct}=await this.recvConnection.receive($,[{ssrcId:_e}],String(s.uid),tt);$===Cn.AUDIO?(s._audioTrack?s._audioTrack._updateOriginMediaStreamTrack(it):(s._audioTrack=new zl(it,s.uid,s._uintid,this.store),Et.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(s._audioTrack.getTrackId()))),ct&&s._audioTrack._updateRtpTransceiver(ct),this.bindRemoteTrackEvents(s,s._audioTrack)):(s._videoSSRC=_e,s._videoTrack?s._videoTrack._updateOriginMediaStreamTrack(it):(s._videoTrack=new _u(it,s.uid,s._uintid,this.store),Et.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(s._videoTrack.getTrackId()))),ct&&s._videoTrack._updateRtpTransceiver(ct),this.bindRemoteTrackEvents(s,s._videoTrack));let dt=this.remoteUserMap.get(s);dt?dt.set($,at):this.remoteUserMap.set(s,new Map([[$,at]])),this.statsCollector.addRemoteStats(s.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();let ut=this.pendingRemoteTracks.findIndex(pt=>{let{user:mt,kind:yt}=pt;return mt.uid===s.uid&&$===yt});ut!==-1&&(this.pendingRemoteTracks.splice(ut,1),this.emit(kn.MediaReconnectEnd,s.uid))}async mockSubscribe(s,$,_e,tt){if(!this.recvConnection)throw new rn(Nt.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive($,[{ssrcId:_e}],String(s.uid),tt)}async unsubscribe(s,$,_e){let tt=this.pendingRemoteTracks.filter(it=>{let{user:at,kind:ct}=it;return $!==void 0?at.uid===s.uid&&$===ct:at.uid===s.uid});if(tt.forEach(it=>{let at=this.pendingRemoteTracks.indexOf(it);this.pendingRemoteTracks.splice(at,1)}),this.recvConnection||_e||tt.forEach(it=>{let{kind:at}=it;var ct;if(at===Cn.AUDIO)(ct=s._audioTrack)===null||ct===void 0||ct._destroy(),s._audioTrack=void 0;else if(at===Cn.VIDEO){var dt;(dt=s._videoTrack)===null||dt===void 0||dt._destroy(),s._videoTrack=void 0}}),!this.recvConnection)return;let rt=this.filterTobeUnSubscribedTracks(s,$);rt.length!==0&&(await this.recvConnection.stopReceiving(rt.map(it=>{let[,{id:at}]=it;return at})),this.withdrawRemoteTracks(rt),this.remoteUserMap.size===0&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),rt.forEach(it=>{let[at,{kind:ct}]=it;var dt,ut;if(ct===Cn.VIDEO&&at._videoSSRC&&((dt=this.recvConnection)===null||dt===void 0||dt.setStatsRemoteVideoIsReady(at._videoSSRC,!1)),ct===Cn.VIDEO)this.unbindRemoteTrackEvents(at._videoTrack),_e||((ut=at._videoTrack)===null||ut===void 0||ut._destroy(),at._videoTrack=void 0);else if(ct===Cn.AUDIO){var pt;this.unbindRemoteTrackEvents(at._audioTrack),!_e&&((pt=at._audioTrack)===null||pt===void 0||pt._destroy(),at._audioTrack=void 0)}}),rt.forEach(it=>{let[,{kind:at}]=it;Rr(this,kn.RequestP2PMuteRemote,at)}))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);let s=()=>Array.from(this.remoteUserMap.entries()).forEach($=>{let[,_e]=$;[Cn.VIDEO,Cn.AUDIO].forEach(tt=>{_e.has(tt)?Rr(this,kn.RequestP2PUnmuteRemote,tt):Rr(this,kn.RequestP2PMuteRemote,tt)})});s(),this.downlinkStatsUploadInterval=window.setInterval(()=>{s()},3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(s){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(s){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(s){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(s){throw new rn(Nt.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(s,$){if(!this.recvConnection)return;let _e=this.remoteUserMap.get(s);if(!_e)return void Et.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(s.uid,"."));if(!_e.get($))return void Et.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(s.uid," media type ").concat($,"."));let tt=$===Cn.VIDEO?s._videoSSRC:s._audioSSRC;tt!==void 0&&this.recvConnection.setStatsRemoteVideoIsReady(tt,!1)}async unmuteRemote(s,$){return this.unmuteRemoteNoLock(s,$)}async unmuteRemoteNoLock(s,$){if(!this.recvConnection)return;let _e=this.remoteUserMap.get(s);if(!_e)return void Et.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(s.uid,"."));_e.get($)||Et.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(s.uid," media type ").concat($,"."))}getAllTracks(s){let $=this.localTrackMap.get(an.LocalAudioTrack);if(($==null?void 0:$.track)instanceof ho){let _e=$.track;return Array.from(this.localTrackMap.entries()).filter(tt=>{let[rt]=tt;return rt!==an.LocalAudioTrack}).filter(tt=>{let[rt]=tt;return!(s&&rt===an.LocalVideoLowTrack)}).map(tt=>{let[,{track:rt}]=tt;return rt}).concat(_e.trackList)}return Array.from(this.localTrackMap.entries()).filter(_e=>{let[tt]=_e;return!(s&&tt===an.LocalVideoLowTrack)}).map(_e=>{let[,{track:tt}]=_e;return tt})}reportPublishEvent(s,$,_e,tt,rt){if(s){let at=this.localTrackMap.get(an.LocalAudioTrack),ct=tt?this.localTrackMap.get(an.LocalVideoLowTrack):this.localTrackMap.get(an.LocalVideoTrack);An.publish(this.store.sessionId,{eventElapse:qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:s,ec:$,audioName:at==null?void 0:at.track.getTrackLabel(),videoName:ct==null?void 0:ct.track.getTrackLabel(),screenshare:(ct==null?void 0:ct.track._hints.indexOf(wr.SCREEN_TRACK))!==-1,audio:!!at,video:!!ct,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:rt})}else{var it;_e||(_e=[]);let at=_e.find(dt=>dt instanceof dr),ct=tt?(it=this.localTrackMap.get(an.LocalVideoTrack))===null||it===void 0?void 0:it.track:_e.find(dt=>dt instanceof Hn);An.publish(this.store.sessionId,{eventElapse:qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:s,ec:$,audioName:at==null?void 0:at.getTrackLabel(),videoName:ct==null?void 0:ct.getTrackLabel(),screenshare:(ct==null?void 0:ct._hints.indexOf(wr.SCREEN_TRACK))!==-1,audio:!!at,video:!!ct,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:rt})}}reportSubscribeEvent(s,$,_e,tt){let rt=tt===Cn.VIDEO?_e._videoSSRC:_e._audioSSRC;rt&&An.subscribe(this.store.sessionId,{succ:s,ec:$,video:tt===Cn.VIDEO,audio:tt===Cn.AUDIO,peerid:_e.uid,subscribeRequestid:tt===Cn.VIDEO?_e._videoSSRC:_e._audioSSRC,p2pid:this.store.p2pId,eventElapse:qo.measureFromSubscribeStart(this.store.clientId,rt)})}reset(){Et.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new Lo("P2PChannel2-send-mutex"),this.sendMutex=new Lo("P2PChannel2-recv-mutex"),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let s=this.localTrackMap.get(an.LocalAudioTrack);if((s==null?void 0:s.track)instanceof ho){if(s.track.trackList.length>0){let $=s.track;s.track.trackList.forEach(_e=>{$.removeAudioTrack(_e)})}s.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=mr.Disconnected}getStats(s){var $,_e;return s?(_e=this.recvConnection)===null||_e===void 0?void 0:_e.getStats():($=this.sendConnection)===null||$===void 0?void 0:$.getStats()}getRemoteVideoIsReady(s){var $;return(($=this.recvConnection)===null||$===void 0?void 0:$.getRemoteVideoIsReady(s))||!1}getLocalAudioVolume(){let s=this.localTrackMap.get(an.LocalAudioTrack);if(s)return s.track.getVolumeLevel()}getLocalVideoSize(){let s=this.localTrackMap.get(an.LocalVideoTrack);if(s)return{width:s.track._videoWidth||0,height:s.track._videoHeight||0}}getEncoderConfig(s){let $=this.localTrackMap.get(s);return $&&$.track instanceof Hn||$&&$.track instanceof dr?$.track._encoderConfig:void 0}getLocalMedia(s){return this.localTrackMap.get(s)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(s,$){if(!s)return this.remoteUserMap.size>0;let _e=this.remoteUserMap.get(s);return!!_e&&(!$||_e.has($))}async hasRemoteMediaWithLock(s,$){if(!s)return this.remoteUserMap.size>0;let _e=this.remoteUserMap.get(s);return!!_e&&(!$||_e.has($))}getRemoteMedia(s){var $;let _e=Array.from(zs($=this.remoteUserMap).call($)).find(tt=>tt.uid===s);return _e?{audioTrack:_e.audioTrack,audioSSRC:_e._audioSSRC,videoTrack:_e.videoTrack,videoSSRC:_e._videoSSRC}:{}}getAudioLevels(){let s=Array.from(this.remoteUserMap.entries()).map(_e=>{let[tt]=_e;return{uid:tt.uid,level:tt.audioTrack?100*tt.audioTrack._source.getAccurateVolumeLevel():0}}),$=this.localTrackMap.get(an.LocalAudioTrack);return $&&s.push({level:100*$.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),s=R1(s).call(s,(_e,tt)=>_e.level-tt.level),s}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(Et.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=mr.Reconnecting,Ft("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(s=>{let[$]=s;var _e;$._videoTrack&&$._videoTrack._player&&((_e=$._videoTrack._player.getVideoElement())===null||_e===void 0||_e.pause(),$._videoTrack._player.isKeepLastFrame=!0,$._videoTrack._originMediaStreamTrack.stop())}),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(s=>{var $;let[_e,{track:tt}]=s;switch(_e){case an.LocalVideoTrack:vn($=tt._hints).call($,wr.LOW_STREAM)?tt.close():this.pendingLocalTracks.push(tt);break;case an.LocalAudioTrack:tt instanceof ho?this.pendingLocalTracks=this.pendingLocalTracks.concat(tt.trackList):this.pendingLocalTracks.push(tt);case an.LocalVideoLowTrack:}}),this.emit(kn.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(s=>{let[$,_e]=s;Array.from(zs(_e).call(_e)).forEach(tt=>{this.setPendingRemoteMedia($,tt)}),this.emit(kn.MediaReconnectStart,$.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),Et.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(s,$){for(let _e of this.pendingRemoteTracks){let{user:tt,kind:rt}=_e;if((s instanceof Bo?s.uid:s)===tt.uid&&$===rt)return!0}return!1}setPendingRemoteMedia(s,$){this.hasPendingRemoteMedia(s,$)||this.pendingRemoteTracks.push({user:s,kind:$})}async restartICE(s,$){let _e,tt;if(s===es.SEND_ONLY){if(!this.sendConnection)throw new rn(Nt.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");_e=await this.sendMutex.lock("From P2PChannel.restartICE"),tt=this.sendConnection}else{if(!this.recvConnection)throw new rn(Nt.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");_e=await this.recvMutex.lock("From P2PChannel.restartICE"),tt=this.recvConnection}try{if($){let rt=await tt.restartICE($);return tt.isInRestartIce=!1,rt}{let rt=await tt.restartICE();if(rt){let it=await lo(this,kn.RequestP2PRestartICE,{direction:es.RECEIVE_ONLY,iceParameter:rt});await tt.restartICE(it),tt.isInRestartIce=!1}}}finally{_e()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;let s=this.sendConnection.getStats(),$=this.localTrackMap.get(an.LocalVideoTrack),_e=this.localTrackMap.get(an.LocalAudioTrack),tt=s.videoSend.find(At=>{var Ct;return At.ssrc===($==null||(Ct=$.ssrcs)===null||Ct===void 0?void 0:Ct[0].ssrcId)}),rt=s.audioSend.find(At=>{var Ct;return At.ssrc===(_e==null||(Ct=_e.ssrcs)===null||Ct===void 0?void 0:Ct[0].ssrcId)});if(!tt||!rt)return 1;let it=Ms(this,kn.NeedSignalRTT),at=tt?tt.rttMs:void 0,ct=rt?rt.rttMs:void 0,dt=at&&ct?(at+ct)/2:at||ct,ut=(dt&&it?(dt+it)/2:dt||it)||0,pt=100*s.sendPacketLossRate*.7/50+.3*ut/1500,mt=pt<.17?1:pt<.36?2:pt<.59?3:pt<.1?4:5,yt=$==null?void 0:$.track;if(yt&&yt._encoderConfig&&yt._hints.indexOf(wr.SCREEN_TRACK)===-1){let At=yt._encoderConfig.bitrateMax,Ct=s.bitrate.actualEncoded;if(At&&Ct){let It=(1e3*At-Ct)/(1e3*At);return SN[It<.15?0:It<.3?1:It<.45?2:It<.6?3:4][mt]}}return mt}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;let s=this.recvConnection.getStats(),$=0;return Array.from(this.remoteUserMap.entries()).forEach(_e=>{let[tt]=_e,rt=tt._audioSSRC,it=tt._videoSSRC,at=s.audioRecv.find(Ct=>Ct.ssrc===rt),ct=s.videoRecv.find(Ct=>Ct.ssrc===it);if(!at&&!ct)return void($+=1);let dt=Ms(this,kn.NeedSignalRTT),ut=s.rtt,pt=(ut&&dt?(ut+dt)/2:ut||dt)||0,mt=at?at.jitterMs:void 0,yt=s.recvPacketLossRate,At=.7*yt*100/50+.3*pt/1500;mt&&(At=.6*yt*100/50+.2*pt/1500+.2*mt/400),$+=At<.1?1:At<.17?2:At<.36?3:At<.59?4:5}),this.remoteUserMap.size>0?Math.round($/this.remoteUserMap.size):$}async muteLocalTrack(s){return new Jt(($,_e)=>{this.handleMuteLocalTrack(s,$,_e)})}filterTobePublishedTracks(s,$,_e){let tt=[],rt=vr(),it=this.getAllTracks();s=Dm(s=s.filter(dt=>it.indexOf(dt)===-1));let at=!1,ct=!1;for(let dt of s){if(dt instanceof Hn&&(this.localTrackMap.has(an.LocalVideoTrack)||at?new rn(Nt.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(tt.push({track:dt,type:an.LocalVideoTrack}),at=!0),$)){let ut=this.getLowVideoTrack(dt,_e);tt.push({track:ut,type:an.LocalVideoLowTrack})}if(dt instanceof dr){let ut=this.localTrackMap.get(an.LocalAudioTrack);if(ut){if(!(ut.track instanceof ho))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(dt._bypassWebAudio)throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");ut.track.addAudioTrack(dt),this.bindLocalAudioTrackEvents(dt,!0)}else if(ct){let pt=tt.find(mt=>{let{type:yt}=mt;return yt===an.LocalAudioTrack});if(!(pt.track instanceof ho))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(dt._bypassWebAudio)throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");pt.track.addAudioTrack(dt)}else{if(!rt.webAudioMediaStreamDest||dt instanceof ho||dt._bypassWebAudio)tt.push({track:dt,type:an.LocalAudioTrack});else{let pt=new ho;pt.addAudioTrack(dt),tt.push({track:pt,type:an.LocalAudioTrack})}ct=!0}}}return tt}filterTobeUnpublishedTracks(s){let $=[],_e=this.getAllTracks();s=Dm(s=s.filter(tt=>_e.indexOf(tt)!==-1));for(let tt of s){if(tt instanceof dr){let rt=this.localTrackMap.get(an.LocalAudioTrack);if(!rt)continue;rt.track instanceof ho?(rt.track.removeAudioTrack(tt),this.unbindLocalAudioTrackEvents(tt),rt.track.trackList.length===0&&($.push([an.LocalAudioTrack,rt]),rt.track.close())):$.push([an.LocalAudioTrack,rt])}if(tt instanceof Hn){let rt=this.localTrackMap.get(an.LocalVideoTrack);if(!rt)continue;$.push([an.LocalVideoTrack,rt]);let it=this.localTrackMap.get(an.LocalVideoLowTrack);it&&$.push([an.LocalVideoLowTrack,it])}}return $}bindLocalTrackEvents(s){s.forEach($=>{let{track:_e,type:tt}=$;switch(tt){case an.LocalVideoTrack:_e.addListener(yn.GET_STATS,this.handleGetLocalVideoStats),_e.addListener(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_e.addListener(yn.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),_e.addListener(yn.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),_e.addListener(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack),_e.addListener(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case an.LocalAudioTrack:this.bindLocalAudioTrackEvents(_e);case an.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(s,$){s instanceof ho?s.trackList.forEach(_e=>{_e.addListener(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_e.addListener(yn.GET_STATS,this.handleGetLocalAudioStats),_e.addListener(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(s.addListener(yn.GET_STATS,this.handleGetLocalAudioStats),s.addListener(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),$||s.addListener(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(s){s||(s=Array.from(this.localTrackMap.entries()).map($=>{let[_e,{track:tt}]=$;return{track:tt,type:_e}})),s.forEach($=>{let{track:_e,type:tt}=$;switch(tt){case an.LocalVideoTrack:_e.off(yn.GET_STATS,this.handleGetLocalVideoStats),_e.off(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_e.off(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_e.off(yn.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),_e.off(yn.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),_e.off(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack),_e.off(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_e.off(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case an.LocalAudioTrack:this.unbindLocalAudioTrackEvents(_e);case an.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(s){s instanceof ho?s.trackList.forEach($=>{$.off(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),$.off(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),$.off(yn.GET_STATS,this.handleGetLocalAudioStats),$.off(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),$.off(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(s.off(yn.GET_STATS,this.handleGetLocalAudioStats),s.off(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.off(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.off(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.off(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.off(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(s,$){$ instanceof _u&&$.addListener(yn.GET_STATS,_e=>{_e(this.handleGetRemoteVideoStats(s))}),$ instanceof zl&&$.addListener(yn.GET_STATS,_e=>{_e(this.handleGetRemoteAudioStats(s))})}unbindRemoteTrackEvents(s){s&&s.removeAllListeners(yn.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(s=>{let[$,_e]=s;_e.has(Cn.AUDIO)&&this.unbindRemoteTrackEvents($._audioTrack),_e.has(Cn.VIDEO)&&this.unbindRemoteTrackEvents($._videoTrack)})}createGatewayPublishMessage(s,$){return s.map((_e,tt)=>{var rt;let it,{track:at,type:ct}=_e;switch(ct){case an.LocalAudioTrack:it=cr.Audio;break;case an.LocalVideoTrack:it=vn(rt=at._hints).call(rt,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalVideoLowTrack:it=cr.Low}return{kind:ct===an.LocalAudioTrack?Cn.AUDIO:Cn.VIDEO,stream_type:it,mid:$[tt].id,ssrcs:$[tt].localSSRC,isMuted:at.muted||!at.enabled}})}createGatewayUnpublishMessage(s){return s.map($=>{var _e;let tt,[rt,{track:it,ssrcs:at,id:ct}]=$;switch(rt){case an.LocalVideoTrack:tt=vn(_e=it._hints).call(_e,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalAudioTrack:tt=cr.Audio;break;case an.LocalVideoLowTrack:tt=cr.Low}return{stream_type:tt,ssrcs:at,mid:ct}})}assignLocalTracks(s,$){s.forEach((_e,tt)=>{let{track:rt,type:it}=_e;this.localTrackMap.set(it,{track:rt,id:$[tt].id,ssrcs:$[tt].localSSRC})})}withdrawLocalTracks(s){s.forEach($=>{let[_e]=$;this.localTrackMap.delete(_e)})}bindConnectionEvents(s){s.onConnectionStateChange=async $=>{var _e;Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(s.name,".onConnectionStateChange(").concat($,")")),this.emit(kn.PeerConnectionStateChange,$),$!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),$==="connected"&&(s.isInRestartIce=!1),vn(_e=this._restartStates).call(_e,$)&&!s.isInRestartIce&&($==="disconnected"&&await xo(800),s.iceConnectionState!=="disconnected"&&s.iceConnectionState!=="failed"||this.handleDisconnect(s.direction))},s.onICEConnectionStateChange=$=>{$!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat($,")")),An.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:$,tag:Wr.TRACER}).onSuccess(),this.emit(kn.IceConnectionStateChange,$)},s.onICETransportStateChange=$=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat($,")"))},s.onDTLSTransportStateChange=$=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat($,")"))},s.onDTLSTransportError=$=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat($,")"))},s.onFirstAudioDecoded=$=>{var _e;let tt=Array.from(zs(_e=this.remoteUserMap).call(_e)).find(it=>it._audioSSRC===$);var rt;tt&&(this.store.subscribe(tt.uid,"audio",void 0,void 0,void 0,Date.now()),(rt=tt.audioTrack)===null||rt===void 0||rt.emit(Qp.FIRST_FRAME_DECODED),An.firstRemoteFrame(this.store.sessionId,Co.FIRST_AUDIO_DECODE,kr.FIRST_AUDIO_DECODE,{peer:tt._uintid,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,$),subscribeRequestid:$,p2pid:this.store.p2pId}))},s.onFirstAudioReceived=$=>{var _e;let tt=Array.from(zs(_e=this.remoteUserMap).call(_e)).find(rt=>rt._audioSSRC===$);tt&&An.firstRemoteFrame(this.store.sessionId,Co.FIRST_AUDIO_RECEIVED,kr.FIRST_AUDIO_RECEIVED,{peer:tt._uintid,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,$),subscribeRequestid:$,p2pid:this.store.p2pId})},s.onFirstVideoDecoded=($,_e,tt)=>{this.reportVideoFirstFrameDecoded($,_e,tt)},s.onFirstVideoReceived=$=>{var _e;let tt=Array.from(zs(_e=this.remoteUserMap).call(_e)).find(rt=>rt._videoSSRC===$);tt&&An.firstRemoteFrame(this.store.sessionId,Co.FIRST_VIDEO_RECEIVED,kr.FIRST_VIDEO_RECEIVED,{peer:tt._uintid,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,$),subscribeRequestid:$,p2pid:this.store.p2pId})},s.onSelectedLocalCandidateChanged=($,_e)=>{let tt=$.candidateType==="relay",rt=_e.candidateType==="relay";_e.candidateType!=="unknown"&&tt===rt||this.emit(kn.ConnectionTypeChange,tt),Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(pp(_e))," -> ").concat(JSON.stringify(pp($)),")"))},s.onSelectedRemoteCandidateChanged=($,_e)=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(pp(_e))," -> ").concat(JSON.stringify(pp($)),")"))},s.onFirstVideoDecodedTimeout=$=>{this.reportVideoFirstFrameDecoded($,void 0,void 0,!0)},s.onLocalCandidate=$=>{this.emit(kn.LocalCandidate,{candidate:$,direction:s.direction})}}unbindConnectionEvents(s){s.onConnectionStateChange=void 0,s.onICEConnectionStateChange=void 0,s.onICETransportStateChange=void 0,s.onDTLSTransportStateChange=void 0,s.onDTLSTransportError=void 0,s.onFirstAudioDecoded=void 0,s.onFirstAudioReceived=void 0,s.onFirstVideoDecoded=void 0,s.onFirstVideoReceived=void 0,s.onSelectedLocalCandidateChanged=void 0,s.onSelectedRemoteCandidateChanged=void 0,s.onFirstVideoDecodedTimeout=void 0,s.onLocalCandidate=void 0}async handleDisconnect(s){let $=s===es.SEND_ONLY?this.sendConnection:this.recvConnection;$&&!$.isInRestartIce&&($.isInRestartIce=!0,Et.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat($.name,"] start use restartICE")),s===es.SEND_ONLY?this.restartICE(s):lo(this,kn.RequestP2PRestartICE,{direction:es.SEND_ONLY}))}filterTobeMutedTracks(s){let $=[];if(this.getAllTracks().indexOf(s)===-1)return $;let _e=this.localTrackMap.get(an.LocalAudioTrack);if(s instanceof dr&&(_e==null?void 0:_e.track)instanceof ho)return _e.track.isActive||$.push([an.LocalAudioTrack,_e]),$;let tt=Array.from(this.localTrackMap.entries()).find(rt=>{let[,{track:it}]=rt;return s===it});if(tt&&($.push(tt),tt[0]===an.LocalVideoTrack)){let rt=this.localTrackMap.get(an.LocalVideoLowTrack);rt&&$.push([an.LocalVideoLowTrack,rt])}return $}filterTobeUnmutedTracks(s){let $=[],_e=this.localTrackMap.get(an.LocalAudioTrack);if(s instanceof dr&&(_e==null?void 0:_e.track)instanceof ho)return _e.track.isActive&&$.push([an.LocalAudioTrack,_e]),$;let tt=Array.from(this.localTrackMap.entries()).find(rt=>{let[,{track:it}]=rt;return s===it});if(tt)if(tt[0]===an.LocalVideoTrack){$.push(tt);let rt=this.localTrackMap.get(an.LocalVideoLowTrack);rt&&$.push([an.LocalVideoLowTrack,rt])}else $.push(tt);return $}createMuteMessage(s){return s.map($=>{var _e;let tt,[rt,{track:it,ssrcs:at,id:ct}]=$;switch(rt){case an.LocalAudioTrack:tt=cr.Audio;break;case an.LocalVideoTrack:tt=vn(_e=it._hints).call(_e,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalVideoLowTrack:tt=cr.Low}return{stream_type:tt,ssrcs:at,mid:ct}})}createUnmuteMessage(s){return s.map($=>{var _e;let tt,[rt,{track:it,ssrcs:at,id:ct}]=$;switch(rt){case an.LocalAudioTrack:tt=cr.Audio;break;case an.LocalVideoTrack:tt=vn(_e=it._hints).call(_e,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalVideoLowTrack:tt=cr.Low}return{stream_type:tt,ssrcs:at,mid:ct}})}filterTobeUnSubscribedTracks(s,$){let _e=[],tt=this.remoteUserMap.get(s);if(!tt)return _e;if($){let rt=tt.get($);if(!rt)return _e;_e.push([s,{kind:$,id:rt}])}else Array.from(tt.entries()).forEach(rt=>{let[it,at]=rt;_e.push([s,{kind:it,id:at}])});return _e}createUnsubscribeMessage(s){let $=[];return s.forEach(_e=>{let[tt,{kind:rt,id:it}]=_e;switch(rt){case Cn.VIDEO:return void(tt._videoSSRC&&$.push({stream_type:Cn.VIDEO,ssrcId:tt._videoSSRC}));case Cn.AUDIO:return void(tt._audioSSRC&&$.push({stream_type:Cn.AUDIO,ssrcId:tt._audioSSRC}))}}),$}withdrawRemoteTracks(s){s.forEach($=>{let[_e,{kind:tt}]=$,rt=this.remoteUserMap.get(_e);rt&&(rt.delete(tt),Array.from(rt.entries()).length===0&&this.remoteUserMap.delete(_e))})}async updateBitrateLimit(s){let $=this.localTrackMap.get(an.LocalVideoTrack),_e=this.localTrackMap.get(an.LocalVideoLowTrack);$&&await $.track.setBitrateLimit(s.uplink),_e&&s.low_stream_uplink&&await _e.track.setBitrateLimit({max_bitrate:s.low_stream_uplink.bitrate,min_bitrate:s.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){let s=this.sendConnection.peerConnectionState,$=this.recvConnection.peerConnectionState;return s!=="connected"&&$!=="connected"}return!0}async tryToUnmuteAudio(s){for(let $=0;$<s.length;$++)if(s[$]instanceof dr){let _e=this.filterTobeUnmutedTracks(s[$]);if(_e.length===0)continue;let tt=this.createUnmuteMessage(_e);return void await Rr(this,kn.RequestUnmuteLocal,tt)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=s=>this.getStats(s),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter(s=>{let[,{ssrcs:$}]=s;return!!$}),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=s=>{var $;return!(($=this.recvConnection)===null||$===void 0||!$.getRemoteVideoIsReady(s))},this.statsUploader.requestUpload=(s,$)=>this.emit(kn.RequestUpload,s,$),this.statsUploader.requestUploadStats=s=>this.emit(kn.RequestUploadStats,s),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await xo(I_(this.dtlsFailedCount,po)),this.emit(kn.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(an.LocalVideoTrack)||this.pendingLocalTracks.some(s=>s instanceof Hn)}throwIfTrackTypeNotMatch(s){if(s.filter($=>$ instanceof Hn).length>1)throw new rn(Nt.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(s.filter($=>$ instanceof dr).length>1&&(s.some($=>$ instanceof dr&&$._bypassWebAudio)||!vr().webAudioMediaStreamDest))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let $ of s){if($ instanceof Hn&&this.pendingLocalTracks.some(_e=>_e instanceof Hn))throw new rn(Nt.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if($ instanceof dr&&this.pendingLocalTracks.some(_e=>_e instanceof dr)&&(!vr().webAudioMediaStreamDest||$._bypassWebAudio||this.pendingLocalTracks.some(_e=>_e instanceof dr&&_e._bypassWebAudio)))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(s,$){let _e=!Ft("DISABLE_DUAL_STREAM_USE_ENCODING")&&vr().supportDualStreamEncoding,tt=NE(NE({},{width:160,height:120,framerate:15,bitrate:50}),$),rt;rt=_e?s._mediaStreamTrack.clone():dv(s,tt);let it=Ir(8,"track-low-"),at=new Hn(rt,NE(NE({},_e&&{scaleResolutionDownBy:oT(tt,s)}),{},{frameRate:tt.framerate,bitrateMax:tt.bitrate,bitrateMin:tt.bitrate}),void 0,void 0,it);return at.on(Hm.TRANSCEIVER_UPDATED,ct=>{s._updateRtpTransceiver(ct,hp.LOW_STREAM)}),at._hints.push(wr.LOW_STREAM),s.addListener(yn.NEED_CLOSE,()=>{at.close()}),at}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(s,$,_e,tt){var rt;let it=Array.from(zs(rt=this.remoteUserMap).call(rt)).find(at=>at._videoSSRC===s);if(it){tt||this.store.subscribe(it.uid,"video",void 0,void 0,void 0,void 0,Date.now());let at=this.store.keyMetrics,ct=at.subscribe.find(dt=>dt.userId===it.uid&&dt.type==="video");An.firstRemoteVideoDecode(this.store.sessionId,Co.FIRST_VIDEO_DECODE,kr.FIRST_VIDEO_DECODE,{peer:it._uintid,videowidth:$,videoheight:_e,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId,apEnd:at.requestAPEnd||0,apStart:at.requestAPStart||0,joinGwEnd:at.joinGatewayEnd||0,joinGwStart:at.joinGatewayStart||0,pcEnd:at.peerConnectionEnd||0,pcStart:at.peerConnectionStart||0,subscriberEnd:(ct==null?void 0:ct.subscribeEnd)||0,subscriberStart:(ct==null?void 0:ct.subscribeStart)||0,videoAddNotify:(ct==null?void 0:ct.streamAdded)||0,state:tt?1:0})}}async remoteMediaSsrcChanged(s,$,_e){if(!this.recvConnection)return!1;let tt=this.remoteUserMap.get(s);if(!tt)return!1;let rt=tt.get($);if(!rt)return!1;let it=await this.recvConnection.getRemoteSSRC(rt);return it!==void 0&&it!==_e}resetConnection(s){Et.debug("[".concat(this.store.clientId,"] [P2PChannel2] reset connection to ").concat(s)),this.state===mr.Connected?(Et.debug("[".concat(this.store.clientId,"] [P2PChannel2] fallback to websocket but P2PChannel2 state still connected, disconnect first")),this.disconnectForReconnect()):(this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0))}async publishDataChannel(s){throw new rn(Nt.NOT_SUPPORTED)}async unpublishDataChannel(s){throw new rn(Nt.NOT_SUPPORTED)}async subscribeDataChannel(s,$){throw new rn(Nt.NOT_SUPPORTED)}async unsubscribeDataChannel(s,$){throw new rn(Nt.NOT_SUPPORTED)}hasPendingRemoteDataChannel(s,$){throw new rn(Nt.NOT_SUPPORTED)}setPendingRemoteDataChannel(s,$){throw new rn(Nt.NOT_SUPPORTED)}async preConnect(s,$,_e,tt,rt,it){throw new rn(Nt.NOT_SUPPORTED)}getEstablishParams(){throw new rn(Nt.NOT_SUPPORTED)}async reSubscribe(s){throw new rn(Nt.NOT_SUPPORTED)}async updateVideoStreamParameter(s,$){throw new rn(Nt.NOT_SUPPORTED)}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(s=>{let[$,{track:_e}]=s;$===an.LocalVideoLowTrack?_e._updateRtpTransceiver(void 0,hp.LOW_STREAM):_e._updateRtpTransceiver(void 0)})}}function au(j){return function(s,$,_e){let tt=s[$];if(typeof tt!="function")throw new Error("Cannot use mutex on object property.");return _e.value=async function(){for(var rt=arguments.length,it=new Array(rt),at=0;at<rt;at++)it[at]=arguments[at];switch(j){case Ll.SEND_ONLY:{let ct=await this.sendMutex.lock("From P2PChannel2.".concat($));try{return await tt.apply(this,it)}finally{ct()}}case Ll.RECEIVE_ONLY:{let ct=await this.recvMutex.lock("From P2PChannel2.".concat($));try{return await tt.apply(this,it)}finally{ct()}}default:{let ct=await this.sendMutex.lock("From P2PChannel2.".concat($)),dt=await this.recvMutex.lock("From P2PChannel2.".concat($));try{return await tt.apply(this,it)}finally{ct(),dt()}}}},_e}}function rO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function cm(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?rO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):rO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}on([au(Ll.SEND_ONLY),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],Io.prototype,"p2pConnect",null),on([au(Ll.SEND_ONLY),bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Io.prototype,"unpublish",null),on([au(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],Io.prototype,"unpublishLowStream",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number,String]),bt("design:returntype",Jt)],Io.prototype,"subscribe",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number,String]),bt("design:returntype",Jt)],Io.prototype,"mockSubscribe",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String,Boolean]),bt("design:returntype",Jt)],Io.prototype,"unsubscribe",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String]),bt("design:returntype",Jt)],Io.prototype,"muteRemote",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String]),bt("design:returntype",Jt)],Io.prototype,"unmuteRemote",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String]),bt("design:returntype",Jt)],Io.prototype,"hasRemoteMediaWithLock",null),on([au(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],Io.prototype,"disconnectForReconnect",null),on([au(Ll.RECEIVE_ONLY),bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number]),bt("design:returntype",Jt)],Io.prototype,"remoteMediaSsrcChanged",null);class g0{constructor(s){gt(this,"store",void 0),gt(this,"onStatsException",void 0),gt(this,"onUploadPublishDuration",void 0),gt(this,"onStatsChanged",void 0),gt(this,"localStats",new Map),gt(this,"remoteStats",new Map),gt(this,"updateStatsInterval",void 0),gt(this,"trafficStats",void 0),gt(this,"trafficStatsPeerList",[]),gt(this,"uplinkStats",void 0),gt(this,"exceptionMonitor",void 0),gt(this,"p2pChannel",void 0),gt(this,"scalabilityMode",HS.L1T1),gt(this,"updateStats",()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))}),this.store=s,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new _F,this.exceptionMonitor.on("exception",($,_e,tt)=>{this.onStatsException&&this.onStatsException($,_e,tt)})}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(an.LocalAudioTrack)||cm({},ET)}getLocalVideoTrackStats(){return this.localStats.get(an.LocalVideoTrack)||cm({},yT)}getRemoteAudioTrackStats(s){let $=(rt,it)=>{if(!this.trafficStats)return it;let at=this.trafficStats.peer_delay.find(ct=>ct.peer_uid===rt);return at&&(it.publishDuration=at.B_ppad+(Date.now()-this.trafficStats.timestamp)),it},_e={};if(s){var tt;let rt=(tt=this.remoteStats.get(s))===null||tt===void 0?void 0:tt.audioStats;rt&&(_e[s]=$(s,rt))}else Array.from(this.remoteStats.entries()).forEach(rt=>{let[it,{audioStats:at}]=rt;at&&(_e[it]=$(it,at))});return _e}getRemoteNetworkQualityStats(s){let $={};if(s){var _e;let tt=(_e=this.remoteStats.get(s))===null||_e===void 0?void 0:_e.networkStats;tt&&($[s]=tt)}else Array.from(this.remoteStats.entries()).forEach(tt=>{let[rt,{networkStats:it}]=tt;it&&($[rt]=it)});return $}getRemoteVideoTrackStats(s){let $=(rt,it)=>{if(!this.trafficStats)return it;let at=this.trafficStats.peer_delay.find(ct=>ct.peer_uid===rt);return at&&(it.publishDuration=at.B_ppvd+(Date.now()-this.trafficStats.timestamp)),it},_e={};if(s){var tt;let rt=(tt=this.remoteStats.get(s))===null||tt===void 0?void 0:tt.videoStats;rt&&(_e[s]=$(s,rt))}else Array.from(this.remoteStats.entries()).forEach(rt=>{let[it,{videoStats:at}]=rt;at&&(_e[it]=$(it,at))});return _e}getRTCStats(){let s=0,$=0,_e=0,tt=0,rt=this.localStats.get(an.LocalAudioTrack);rt&&(s+=rt.sendBytes,$+=rt.sendBitrate);let it=this.localStats.get(an.LocalVideoTrack);it&&(s+=it.sendBytes,$+=it.sendBitrate);let at=this.localStats.get(an.LocalVideoLowTrack);at&&(s+=at.sendBytes,$+=at.sendBitrate),this.remoteStats.forEach(dt=>{let{audioStats:ut,videoStats:pt}=dt;ut&&(_e+=ut.receiveBytes,tt+=ut.receiveBitrate),pt&&(_e+=pt.receiveBytes,tt+=pt.receiveBitrate)});let ct=1;return this.trafficStats&&(ct+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:ct,SendBitrate:$,SendBytes:s,RecvBytes:_e,RecvBitrate:tt,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(s){this.localStats.set(s,void 0)}removeLocalStats(s){s?this.localStats.delete(s):this.localStats.clear()}addRemoteStats(s){this.remoteStats.set(s,{})}removeRemoteStats(s){s?this.remoteStats.delete(s):this.remoteStats.clear()}addP2PChannel(s){this.p2pChannel=s}updateTrafficStats(s){s.peer_delay=s.peer_delay.filter($=>$.B_ppad!==void 0||$.B_ppvd!==void 0),s.peer_delay.filter($=>this.trafficStatsPeerList.indexOf($.peer_uid)===-1).forEach($=>{var _e;let tt=(_e=this.p2pChannel)===null||_e===void 0?void 0:_e.getRemoteMedia($.peer_uid),rt=tt!=null&&tt.videoSSRC?qo.measureFromSubscribeStart(this.store.clientId,tt.videoSSRC):0,it=tt!=null&&tt.audioSSRC?qo.measureFromSubscribeStart(this.store.clientId,tt.audioSSRC):0;$.B_ppad!==void 0&&$.B_ppvd!==void 0&&(this.onUploadPublishDuration&&this.onUploadPublishDuration($.peer_uid,$.B_ppad,$.B_ppvd,rt>it?rt:it),this.trafficStatsPeerList.push($.peer_uid))}),this.trafficStats=s}updateUplinkStats(s){this.uplinkStats&&this.uplinkStats.B_fir!==s.B_fir&&Et.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(s.B_fir)),this.uplinkStats=s}static isRemoteVideoFreeze(s,$,_e){if(!s)return!1;let tt=!!_e&&$.framesDecodeFreezeTime>_e.framesDecodeFreezeTime,rt=!_e||$.framesDecodeCount>_e.framesDecodeCount;return tt||!rt}static isRemoteAudioFreeze(s){return!!s&&s._isFreeze()}isLocalVideoFreeze(s){return!(!s.inputFrame||!s.sentFrame)&&s.inputFrame.frameRate>5&&s.sentFrame.frameRate<3}updateLocalStats(s){Array.from(this.localStats.entries()).forEach($=>{let[_e,tt]=$;switch(_e){case an.LocalVideoTrack:case an.LocalVideoLowTrack:{let it=tt,at=cm({},yT),ct=s.getStats(),dt=s.getLocalMedia(_e);if(ct){let ut=ct.videoSend.find(pt=>pt.ssrc===(dt==null?void 0:dt.ssrcs[0].ssrcId));if(ut){let pt=s.getLocalVideoSize(),mt=s.getEncoderConfig(an.LocalVideoTrack);ut.codec!=="H264"&&ut.codec!=="H265"&&ut.codec!=="VP8"&&ut.codec!=="VP9"&&ut.codec!=="AV1X"&&ut.codec!=="AV1"||(at.codecType=ut.codec),at.sendBytes=ut.bytes,at.sendBitrate=it?8*Math.max(0,at.sendBytes-it.sendBytes):0,ut.inputFrame?(at.captureFrameRate=ut.inputFrame.frameRate,at.captureResolutionHeight=ut.inputFrame.height,at.captureResolutionWidth=ut.inputFrame.width):pt&&(at.captureResolutionWidth=pt.width,at.captureResolutionHeight=pt.height),ut.sentFrame?(at.sendFrameRate=ut.sentFrame.frameRate,at.sendResolutionHeight=ut.sentFrame.height,at.sendResolutionWidth=ut.sentFrame.width):pt&&(at.sendResolutionWidth=pt.width,at.sendResolutionHeight=pt.height),ut.avgEncodeMs&&(at.encodeDelay=ut.avgEncodeMs),mt&&mt.bitrateMax&&(at.targetSendBitrate=1e3*mt.bitrateMax),at.sendPackets=ut.packets,at.sendPacketsLost=ut.packetsLost,at.sendJitterMs=ut.jitterMs,at.sendRttMs=ut.rttMs,at.totalDuration=it?it.totalDuration+1:1,at.totalFreezeTime=it?it.totalFreezeTime:0,this.isLocalVideoFreeze(ut)&&(at.totalFreezeTime+=1),ut.scalabilityMode&&this.scalabilityMode!==ut.scalabilityMode&&(Et.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(ut.scalabilityMode)),this.scalabilityMode=ut.scalabilityMode)}this.trafficStats&&(at.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var rt;this.localStats.set(_e,at),((it==null?void 0:it.sendResolutionWidth)!==at.sendResolutionWidth||(it==null?void 0:it.sendResolutionHeight)!==at.sendResolutionHeight)&&((rt=this.onStatsChanged)===null||rt===void 0||rt.call(this,"resolution",{width:at.sendResolutionWidth,height:at.sendResolutionHeight})),at&&dt&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,dt.track,at);break}case an.LocalAudioTrack:{let it=tt,at=cm({},ET),ct=s.getStats(),dt=s.getLocalMedia(_e);if(ct){let ut=ct.audioSend.find(pt=>pt.ssrc===(dt==null?void 0:dt.ssrcs[0].ssrcId));if(ut){if(ut.codec!=="opus"&&ut.codec!=="aac"&&ut.codec!=="PCMU"&&ut.codec!=="PCMA"&&ut.codec!=="G722"||(at.codecType=ut.codec),ut.inputLevel)at.sendVolumeLevel=Math.round(32767*ut.inputLevel);else{let pt=s.getLocalAudioVolume();pt&&(at.sendVolumeLevel=Math.round(32767*pt))}at.sendBytes=ut.bytes,at.sendPackets=ut.packets,at.sendPacketsLost=ut.packetsLost,at.sendJitterMs=ut.jitterMs,at.sendRttMs=ut.rttMs,at.sendBitrate=it?8*Math.max(0,at.sendBytes-it.sendBytes):0}}this.trafficStats&&(at.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(an.LocalAudioTrack,at),at&&dt&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,dt.track,at);break}}})}updateRemoteStats(s){Array.from(this.remoteStats.entries()).forEach($=>{var _e,tt;let[rt,{videoStats:it,audioStats:at,videoPcStats:ct}]=$,dt=at,ut=it,pt=ct,mt=cm({},cw),yt=cm({},lw),At=cm({},eU),{audioTrack:Ct,videoTrack:It,audioSSRC:kt,videoSSRC:Vt}=s.getRemoteMedia(rt),Bt;Bt=s instanceof Io?s.getStats(!0):s.getStats();let en=(_e=Bt)===null||_e===void 0?void 0:_e.audioRecv.find(Qt=>Qt.ssrc===kt),zt=(tt=Bt)===null||tt===void 0?void 0:tt.videoRecv.find(Qt=>Qt.ssrc===Vt),Yt=this.trafficStats&&this.trafficStats.peer_delay.find(Qt=>Qt.peer_uid===rt);if(en&&(en.codec!=="opus"&&en.codec!=="aac"&&en.codec!=="PCMU"&&en.codec!=="PCMA"&&en.codec!=="G722"||(mt.codecType=en.codec),en.outputLevel?mt.receiveLevel=Math.round(32767*en.outputLevel):Ct&&(mt.receiveLevel=Math.round(32767*Ct.getVolumeLevel())),mt.receiveBytes=en.bytes,mt.receivePackets=en.packets,mt.receivePacketsLost=en.packetsLost,mt.packetLossRate=mt.receivePacketsLost/(mt.receivePackets+mt.receivePacketsLost),mt.receiveBitrate=dt?8*Math.max(0,mt.receiveBytes-dt.receiveBytes):0,mt.totalDuration=dt?dt.totalDuration+1:1,mt.totalFreezeTime=dt?dt.totalFreezeTime:0,mt.freezeRate=mt.totalFreezeTime/mt.totalDuration,mt.receiveDelay=en.jitterBufferMs,mt.totalDuration>10&&g0.isRemoteAudioFreeze(Ct)&&(mt.totalFreezeTime+=1)),zt){zt.codec!=="H264"&&zt.codec!=="H265"&&zt.codec!=="VP8"&&zt.codec!=="VP9"&&zt.codec!=="AV1X"&&zt.codec!=="AV1"||(yt.codecType=zt.codec),yt.receiveBytes=zt.bytes,yt.receiveBitrate=ut?8*Math.max(0,yt.receiveBytes-ut.receiveBytes):0,yt.decodeFrameRate=zt.decodeFrameRate<0?0:zt.decodeFrameRate,yt.renderFrameRate=zt.decodeFrameRate<0?0:zt.decodeFrameRate,zt.outputFrame&&(yt.renderFrameRate=zt.outputFrame.frameRate),zt.receivedFrame?(yt.receiveFrameRate=zt.receivedFrame.frameRate,yt.receiveResolutionHeight=zt.receivedFrame.height,yt.receiveResolutionWidth=zt.receivedFrame.width):It&&(yt.receiveResolutionHeight=It._videoHeight||0,yt.receiveResolutionWidth=It._videoWidth||0),zt.framesRateFirefox!==void 0&&(yt.receiveFrameRate=Math.round(zt.framesRateFirefox)),yt.receivePackets=zt.packets,yt.receivePacketsLost=zt.packetsLost,yt.packetLossRate=yt.receivePacketsLost/(yt.receivePackets+yt.receivePacketsLost),yt.totalDuration=ut?ut.totalDuration+1:1,yt.totalFreezeTime=ut?ut.totalFreezeTime:0,yt.receiveDelay=zt.jitterBufferMs||0;let Qt=!!Vt&&s.getRemoteVideoIsReady(Vt);It&&Qt&&g0.isRemoteVideoFreeze(It,zt,pt)&&(yt.totalFreezeTime+=1),yt.freezeRate=yt.totalFreezeTime/yt.totalDuration}Yt&&(mt.end2EndDelay=Yt.B_ad,yt.end2EndDelay=Yt.B_vd,mt.transportDelay=Yt.B_ed,yt.transportDelay=Yt.B_ed,mt.currentPacketLossRate=Yt.B_ealr4/100,yt.currentPacketLossRate=Yt.B_evlr4/100,At.uplinkNetworkQuality=Yt.B_punq?Yt.B_punq:0,At.downlinkNetworkQuality=Yt.B_pdnq?Yt.B_pdnq:0),this.remoteStats.set(rt,{audioStats:mt,videoStats:yt,videoPcStats:zt,networkStats:At}),Ct&&this.exceptionMonitor.setRemoteAudioStats(Ct,mt),It&&this.exceptionMonitor.setRemoteVideoStats(It,yt)})}}function oO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function m0(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?oO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):oO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class MF extends Fr{constructor(s,$,_e,tt){super(),gt(this,"spec",void 0),gt(this,"token",void 0),gt(this,"websocket",void 0),gt(this,"pingpongTimer",void 0),gt(this,"reconnectMode","retry"),gt(this,"serviceMode",void 0),gt(this,"reqId",0),gt(this,"commandReqId",0),gt(this,"handleWebSocketOpen",()=>{this.reconnectMode="retry",this.startPingPong()}),gt(this,"handleWebSocketMessage",rt=>{if(!rt.data)return;let it=JSON.parse(rt.data);it.requestId?this.emit("@".concat(it.requestId,"-").concat(it.sid),it):this.serviceMode===bo.INJECT?this.emit(Bl.INJECT_STREAM_STATUS,it):(An.workerEvent(this.spec.sid,{actionType:"status",serverCode:it.code,workerType:this.serviceMode===bo.TRANSCODE?1:2}),this.emit(Bl.PUBLISH_STREAM_STATUS,it))}),this.spec=$,this.token=s,this.serviceMode=tt,this.websocket=new W1("live-streaming",_e),this.websocket.on($n.CONNECTED,this.handleWebSocketOpen),this.websocket.on($n.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on($n.REQUEST_NEW_URLS,(rt,it)=>{lo(this,Bl.REQUEST_NEW_ADDRESS).then(rt).catch(it)}),this.websocket.on($n.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(s){return this.websocket.init(s)}async request(s,$,_e,tt){this.reqId+=1,s==="request"&&(this.commandReqId+=1);let rt=this.commandReqId,it=this.reqId;if(!it||!this.websocket)throw new Wt(Nt.UNEXPECTED_ERROR);let at=m0({command:s,sdkVersion:Sl==="4.20.0"?"0.0.1":Sl,seq:it,requestId:it,allocate:_e,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},$);if(this.websocket.state==="closed")throw new Wt(Nt.WS_DISCONNECT);let ct=()=>new Jt((mt,yt)=>{this.websocket.once($n.CLOSED,()=>yt(new Wt(Nt.WS_ABORT))),this.websocket.once($n.CONNECTED,mt)});this.websocket.state!=="connected"&&await ct(),at.clientRequest&&(at.clientRequest.workerToken=this.token);let dt=new Jt((mt,yt)=>{let At=()=>{yt(new Wt(Nt.WS_ABORT))};this.websocket.once($n.RECONNECTING,At),this.websocket.once($n.CLOSED,At),this.once("@".concat(it,"-").concat(this.spec.sid),Ct=>{mt(Ct)})});tt&&An.workerEvent(this.spec.sid,m0(m0({},tt),{},{requestId:rt,actionType:"request",payload:JSON.stringify($.clientRequest),serverCode:0,code:0}));let ut=Date.now();this.websocket.sendMessage(at);let pt=null;try{pt=await dt}catch(mt){if(this.websocket.state==="closed")throw mt;return await ct(),await this.request(s,$,_e)}return tt&&An.workerEvent(this.spec.sid,m0(m0({},tt),{},{requestId:rt,actionType:"response",payload:JSON.stringify(pt.serverResponse),serverCode:pt.code,success:pt.code===200,responseTime:Date.now()-ut})),pt.code!==200&&this.handleResponseError(pt),pt}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){let s=Sl==="4.20.0"?"0.0.1":Sl;this.reqId+=1,this.websocket.state==="connected"?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:s,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(s){switch(s.code){case so.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Et.warning("live stream response already exists stream");case so.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case so.LIVE_STREAM_RESPONSE_BAD_STREAM:case so.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Wt(Nt.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:s.code}).throw();case so.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if(s.serverResponse.command==="UnpublishStream"||s.serverResponse.command==="UninjectStream")return;throw new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case so.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Wt(Nt.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:s.code}).throw();case so.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let $=new Wt(Nt.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(Bl.WARNING,$,s.serverResponse.url)}case so.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{let $=new Wt(Nt.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(Bl.WARNING,$,s.serverResponse.url)}case so.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case so.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Wt(Nt.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:s.code}).throw();case so.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{let $=new Wt(Nt.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(Bl.WARNING,$,s.serverResponse.url)}case so.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:s.code}).throw();case so.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case so.LIVE_STREAM_RESPONSE_WORKER_LOST:case so.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(s.serverResponse.command==="UnpublishStream"||s.serverResponse.command==="UninjectStream")return;throw new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case so.ERROR_FAIL_SEND_MESSAGE:if(s.serverResponse.command==="UnpublishStream"||s.serverResponse.command==="UninjectStream")return;if(s.serverResponse.command==="UpdateTranscoding"||s.serverResponse.command==="ControlStream")return new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:s.code}).throw();throw new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case so.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case so.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case so.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case so.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Wt(Nt.LIVE_STREAMING_CDN_ERROR,"",{code:s.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{this.websocket.state==="connected"&&this.request("ping",{}).catch(b_)},6e3)}}function iO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Cs(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?iO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):iO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class UF extends Fr{constructor(s){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:po,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:po;super(),gt(this,"onLiveStreamWarning",void 0),gt(this,"onLiveStreamError",void 0),gt(this,"onInjectStatusChange",void 0),gt(this,"spec",void 0),gt(this,"retryTimeout",1e4),gt(this,"connection",void 0),gt(this,"httpRetryConfig",void 0),gt(this,"wsRetryConfig",void 0),gt(this,"streamingTasks",new Map),gt(this,"isStartingStreamingTask",!1),gt(this,"taskMutex",new Lo("live-streaming")),gt(this,"cancelToken",As.CancelToken.source()),gt(this,"transcodingConfig",void 0),gt(this,"injectConfig",Cs({},_M)),gt(this,"injectLoopTimes",0),gt(this,"uapResponse",void 0),gt(this,"lastTaskId",1),gt(this,"statusError",new Map),this.spec=s,this.httpRetryConfig=_e,this.wsRetryConfig=$}async setTranscodingConfig(s){let $=Cs(Cs({},mM),s);$.videoCodecProfile!==66&&$.videoCodecProfile!==77&&$.videoCodecProfile!==100&&(Et.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat($.videoCodecProfile," -> 100")),$.videoCodecProfile=100),$.transcodingUsers||($.transcodingUsers=$.userConfigs),$.transcodingUsers&&($.transcodingUsers=$.transcodingUsers.map(it=>Cs(Cs(Cs({},gM),it),{},{zOrder:it.zOrder?it.zOrder+1:1}))),function(it){Gr(it.width)||Sr(it.width,"config.width",0,1e4),Gr(it.height)||Sr(it.height,"config.height",0,1e4),Gr(it.videoBitrate)||Sr(it.videoBitrate,"config.videoBitrate",1,1e6),Gr(it.videoFrameRate)||Sr(it.videoFrameRate,"config.videoFrameRate"),Gr(it.lowLatency)||np(it.lowLatency,"config.lowLatency"),Gr(it.audioSampleRate)||vo(it.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),Gr(it.audioBitrate)||Sr(it.audioBitrate,"config.audioBitrate",1,128),Gr(it.audioChannels)||vo(it.audioChannels,"config.audioChannels",[1,2,3,4,5]),Gr(it.videoGop)||Sr(it.videoGop,"config.videoGop"),Gr(it.videoCodecProfile)||vo(it.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),Gr(it.userCount)||Sr(it.userCount,"config.userCount",0,17),Gr(it.backgroundColor)||Sr(it.backgroundColor,"config.backgroundColor",0,16777215),Gr(it.userConfigExtraInfo)||zo(it.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),it.transcodingUsers&&!Gr(it.transcodingUsers)&&(Pu(it.transcodingUsers,"config.transcodingUsers"),it.transcodingUsers.forEach((at,ct)=>{YS(at.uid),Gr(at.x)||Sr(at.x,"transcodingUser[".concat(ct,"].x"),0,1e4),Gr(at.y)||Sr(at.y,"transcodingUser[".concat(ct,"].y"),0,1e4),Gr(at.width)||Sr(at.width,"transcodingUser[".concat(ct,"].width"),0,1e4),Gr(at.height)||Sr(at.height,"transcodingUser[".concat(ct,"].height"),0,1e4),Gr(at.zOrder)||Sr(at.zOrder-1,"transcodingUser[".concat(ct,"].zOrder"),0,100),Gr(at.alpha)||Sr(at.alpha,"transcodingUser[".concat(ct,"].alpha"),0,1,!1)})),Gr(it.watermark)||XS(it.watermark,"watermark"),Gr(it.backgroundImage)||XS(it.backgroundImage,"backgroundImage"),it.images&&!Gr(it.images)&&(Pu(it.images,"config.images"),it.images.forEach((at,ct)=>{XS(at,"images[".concat(ct,"]"))}))}($);let _e=[];$.images&&_e.push(...$.images.map(it=>Cs(Cs(Cs({},qS),it),{},{zOrder:255}))),$.backgroundImage&&(_e.push(Cs(Cs(Cs({},qS),$.backgroundImage),{},{zOrder:0})),delete $.backgroundImage),$.watermark&&(_e.push(Cs(Cs(Cs({},qS),$.watermark),{},{zOrder:255})),delete $.watermark),$.images=_e,$.transcodingUsers&&($.userConfigs=$.transcodingUsers.map(it=>Cs({},it)),$.userCount=$.transcodingUsers.length,delete $.transcodingUsers);let tt=($.userConfigs||[]).map(it=>typeof it.uid=="number"?Jt.resolve(it.uid):nw(it.uid,this.spec,this.cancelToken.token,this.httpRetryConfig));if((await Jt.all(tt)).forEach((it,at)=>{$.userConfigs&&$.userConfigs[at]&&($.userConfigs[at].uid=it)}),this.transcodingConfig=$,this.connection)try{var rt;let it=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(nu(rt=this.streamingTasks).call(rt)).map(at=>at.taskId).join("#")});Et.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(it.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(it){if(!it.data||!it.data.retry)throw it;it.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach(at=>{Et.warning("[".concat(this.spec.clientId,"] live streaming receive error"),it.toString(),"try to republish",at.url),this.startLiveStreamingTask(at.url,at.mode,it).then(()=>{Et.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(at.url," success"))}).catch(ct=>{Et.error("[".concat(this.spec.clientId,"] live streaming republish failed"),at.url,ct.toString()),this.onLiveStreamError&&this.onLiveStreamError(at.url,ct)})})}}setInjectStreamConfig(s,$){this.injectConfig=Object.assign({},this.injectConfig,s),this.injectLoopTimes=$}async startLiveStreamingTask(s,$,_e){var tt;if(Array.from(nu(tt=this.streamingTasks).call(tt)).find(ct=>ct.mode===bo.INJECT)&&$===bo.INJECT)return new Wt(Nt.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&$===bo.TRANSCODE)throw new Wt(Nt.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let rt={command:"PublishStream",ts:Date.now(),url:s,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};Et.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(s,", mode: ").concat($));let it=await this.taskMutex.lock();if(!this.connection&&_e)return void it();if(this.streamingTasks.get(s)&&!_e)return it(),new Wt(Nt.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect($))}catch(ct){throw it(),ct}switch($){case bo.TRANSCODE:rt.transcodingConfig=Cs({},this.transcodingConfig);break;case bo.RAW:break;case bo.INJECT:rt={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:s,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(rt.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;let at=this.lastTaskId++;try{let ct=new Jt((ut,pt)=>{xo(this.retryTimeout).then(()=>{if(_e)return pt(_e);let mt=this.statusError.get(s);return mt?(this.statusError.delete(s),pt(mt)):void 0})}),dt=await Jt.race([this.connection.request("request",{clientRequest:rt},!0,{url:s,command:"PublishStream",workerType:$===bo.TRANSCODE?1:2,requestByUser:!_e,tid:at.toString()}),ct]);this.isStartingStreamingTask=!1,Et.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(dt.code)),this.streamingTasks.set(s,{clientRequest:rt,mode:$,url:s,taskId:at}),it()}catch(ct){if(it(),this.isStartingStreamingTask=!1,!ct.data||!ct.data.retry||_e)throw ct;return ct.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(s,$,ct)):await this.startLiveStreamingTask(s,$,ct)}}stopLiveStreamingTask(s){return new Jt(($,_e)=>{let tt=this.streamingTasks.get(s);if(!tt||!this.connection)return new Wt(Nt.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();let rt=tt.mode;tt.abortTask=()=>{Et.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(s),$()},this.connection.request("request",{clientRequest:{command:rt===bo.INJECT?"UninjectStream":"UnpublishStream",url:tt.url}},!1,{url:s,command:"UnPublishStream",workerType:rt===bo.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(it=>{Et.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(it.code)),this.streamingTasks.delete(s),this.streamingTasks.size===0&&rt!==bo.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),$(),rt===bo.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(ap.INJECT_STREAM_STATUS_STOP_SUCCESS,this.spec.uid,s)}).catch(_e)})}async controlInjectStream(s,$,_e,tt){let rt=this.streamingTasks.get(s);if(!rt||!this.connection||rt.mode!==bo.INJECT)throw new Wt(Nt.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:s,control:$,audioVolume:_e,position:tt}})).serverResponse}resetAllTask(){var s;let $=Array.from(nu(s=this.streamingTasks).call(s));this.terminate();for(let _e of $)this.startLiveStreamingTask(_e.url,_e.mode).catch(tt=>{this.onLiveStreamError&&this.onLiveStreamError(_e.url,tt)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=As.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(s){if(this.connection)throw new Wt(Nt.UNEXPECTED_ERROR,"live streaming connection has already connected");let $=await lo(this,jm.REQUEST_WORKER_MANAGER_LIST,s);return this.uapResponse=$,this.connection=new MF($.workerToken,this.spec,this.wsRetryConfig,s),this.connection.on(Bl.WARNING,(_e,tt)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(tt,_e)),this.connection.on(Bl.PUBLISH_STREAM_STATUS,_e=>this.handlePublishStreamServer(_e)),this.connection.on(Bl.INJECT_STREAM_STATUS,_e=>this.handleInjectStreamServerStatus(_e)),this.connection.on(Bl.REQUEST_NEW_ADDRESS,(_e,tt)=>{if(!this.connection)return tt(new Wt(Nt.UNEXPECTED_ERROR,"can not get new live streaming address list"));lo(this,jm.REQUEST_WORKER_MANAGER_LIST,s).then(rt=>{this.uapResponse=rt,_e(rt.addressList)}).catch(tt)}),await this.connection.init($.addressList),this.connection}handlePublishStreamServer(s){let $=s.serverStatus&&s.serverStatus.url||"empty_url",_e=this.streamingTasks.get($),tt=s.reason;switch(s.code){case so.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case so.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case so.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case so.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{let it=new Wt(Nt.LIVE_STREAMING_CDN_ERROR,"",{code:s.code});if(_e)return Et.error(it.toString()),this.onLiveStreamError&&this.onLiveStreamError($,it);if(!this.isStartingStreamingTask)return;this.statusError.set($,it)}case so.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{let it=new Wt(Nt.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,tt);return this.onLiveStreamWarning&&this.onLiveStreamWarning($,it)}case so.LIVE_STREAM_RESPONSE_WORKER_LOST:case so.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var rt;if(!this.connection)return;this.connection.tryNextAddress();let it=Array.from(nu(rt=this.streamingTasks).call(rt));for(let at of it)at.abortTask?at.abortTask():(Et.warning("[".concat(this.spec.clientId,"] publish stream status code"),s.code,"try to republish",at.url),this.startLiveStreamingTask(at.url,at.mode,new Wt(Nt.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:s.code})).then(()=>{Et.debug("[".concat(this.spec.clientId,"] republish live stream success"),at.url)}).catch(ct=>{Et.error(ct.toString()),this.onLiveStreamError&&this.onLiveStreamError(at.url,ct)}));return}}}handleInjectStreamServerStatus(s){let $=Number(s.uid),_e=s.serverStatus&&s.serverStatus.url;switch(s.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(ap.INJECT_STREAM_STATUS_START_SUCCESS,$,_e));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(ap.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,$,_e),void this.streamingTasks.delete(_e);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(ap.INJECT_STREAM_STATUS_START_UNAUTHORIZED,$,_e),void this.streamingTasks.delete(_e);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(ap.INJECT_STREAM_STATUS_BROKEN,$,_e),void this.streamingTasks.delete(_e);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(ap.INJECT_STREAM_STATUS_START_TIMEOUT,$,_e),void this.streamingTasks.delete(_e);default:return void Et.debug("inject stream server status",s)}}hasUrl(s){return this.streamingTasks.has(s)}}class wE{constructor(){gt(this,"destChannelMediaInfos",new Map),gt(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(s){CN(s),this.srcChannelMediaInfo=s}addDestChannelInfo(s){CN(s),this.destChannelMediaInfos.set(s.channelName,s)}removeDestChannelInfo(s){KS(s),this.destChannelMediaInfos.delete(s)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function sO(j){if(!(j instanceof wE))return new Wt(Nt.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();let s=j.getSrcChannelMediaInfo(),$=j.getDestChannelMediaInfo();if(!s)return new Wt(Nt.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw();if($.size===0)return new Wt(Nt.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw()}class FF extends Fr{constructor(s,$,_e){super(),gt(this,"ws",void 0),gt(this,"requestId",1),gt(this,"heartBeatTimer",void 0),gt(this,"joinInfo",void 0),gt(this,"clientId",void 0),gt(this,"onOpen",()=>{this.emit("open"),this.startHeartBeatCheck()}),gt(this,"onClose",tt=>{this.emit("close"),this.dispose()}),gt(this,"onMessage",tt=>{let rt=JSON.parse(tt.data);if(!rt||rt.command!=="serverResponse"||!rt.requestId)return rt&&rt.command==="serverStatus"&&rt.serverStatus&&rt.serverStatus.command?(this.emit("status",rt.serverStatus),void this.emit(rt.serverStatus.command,rt.serverStatus)):void 0;this.emit("req_".concat(rt.requestId),rt)}),this.joinInfo=s,this.clientId=$,this.ws=new W1("cross-channel-".concat(this.clientId),_e),this.ws.on($n.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on($n.CONNECTED,this.onOpen),this.ws.on($n.ON_MESSAGE,this.onMessage),this.ws.on($n.CLOSED,this.onClose)}isConnect(){return this.ws.state==="connected"}sendMessage(s){let $=this.requestId++;return s.requestId=$,s.seq=$,this.ws.sendMessage(s),$}waitStatus(s){return new Jt(($,_e)=>{let tt=window.setTimeout(()=>{_e(new Wt(Nt.TIMEOUT,"wait status timeout, status: ".concat(s)))},5e3);this.once(s,rt=>{window.clearTimeout(tt),rt.state&&rt.state!==0?_e(new Wt(Nt.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(s))):$(void 0)}),this.once("dispose",()=>{window.clearTimeout(tt),_e(new Wt(Nt.WS_ABORT))})})}async request(s){if(this.ws.state==="closed")throw new Wt(Nt.WS_DISCONNECT);let $=()=>new Jt((it,at)=>{this.ws.once($n.CLOSED,()=>at(new Wt(Nt.WS_ABORT))),this.ws.once($n.CONNECTED,it)});this.ws.state!=="connected"&&await $();let _e=this.sendMessage(s),tt=new Jt((it,at)=>{let ct=()=>{at(new Wt(Nt.WS_ABORT))};this.ws.once($n.RECONNECTING,ct),this.ws.once($n.CLOSED,ct),this.once("req_".concat(_e),it),xo(3e3).then(()=>{this.removeAllListeners("req_".concat(_e)),this.ws.off($n.RECONNECTING,ct),this.ws.off($n.CLOSED,ct),at(new Wt(Nt.TIMEOUT,"cross channel ws request timeout"))})}),rt=await tt;if(!rt||rt.code!==200)throw new Wt(Nt.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(rt)));return rt}async connect(s){this.ws.removeAllListeners($n.REQUEST_NEW_URLS),this.ws.on($n.REQUEST_NEW_URLS,$=>{$(s)}),await this.ws.init(s)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(s){let $=this.requestId++;return s.requestId=$,this.ws.sendMessage(s),$}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class jF extends Fr{set state(s){s!==this._state&&(s!==ms.RELAY_STATE_FAILURE&&(this.errorCode=cp.RELAY_OK),this.emit("state",s,this.errorCode),this._state=s)}get state(){return this._state}constructor(s,$,_e,tt,rt){super(),gt(this,"joinInfo",void 0),gt(this,"sid",void 0),gt(this,"clientId",void 0),gt(this,"cancelToken",As.CancelToken.source()),gt(this,"workerToken",void 0),gt(this,"requestId",0),gt(this,"signal",void 0),gt(this,"prevChannelMediaConfig",void 0),gt(this,"httpRetryConfig",void 0),gt(this,"_resolution",void 0),gt(this,"_state",ms.RELAY_STATE_IDLE),gt(this,"errorCode",cp.RELAY_OK),gt(this,"onStatus",it=>{Et.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(it))),it&&it.command&&(it.command==="onAudioPacketReceived"&&this.emit("event",ru.PACKET_RECEIVED_AUDIO_FROM_SRC),it.command==="onVideoPacketReceived"&&this.emit("event",ru.PACKET_RECEIVED_VIDEO_FROM_SRC),it.command==="onSrcTokenPrivilegeDidExpire"&&(this.errorCode=cp.SRC_TOKEN_EXPIRED,this.state=ms.RELAY_STATE_FAILURE),it.command==="onDestTokenPrivilegeDidExpire"&&(this.errorCode=cp.DEST_TOKEN_EXPIRED,this.state=ms.RELAY_STATE_FAILURE))}),gt(this,"onReconnect",async()=>{Et.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",ru.NETWORK_DISCONNECTED),this.state=ms.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(it=>{this.state!==ms.RELAY_STATE_IDLE&&(Et.error("auto restart channel media relay failed",it.toString()),this.errorCode=cp.SERVER_CONNECTION_LOST,this.state=ms.RELAY_STATE_FAILURE)})}),this.joinInfo=s,this.clientId=$,this.sid=yS(),this.signal=new FF(this.joinInfo,this.clientId,_e),this.httpRetryConfig=tt,this._resolution=rt}async startChannelMediaRelay(s){if(this.state!==ms.RELAY_STATE_IDLE)throw new Wt(Nt.INVALID_OPERATION);this.state=ms.RELAY_STATE_CONNECTING,await this.connect(),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(s)}catch($){throw $.data&&$.data.serverResponse&&$.data.serverResponse.command==="SetSourceChannel"?new Wt(Nt.CROSS_CHANNEL_FAILED_JOIN_SRC):$.data&&$.data.serverResponse&&$.serverResponse.command==="SetDestChannelStatus"?new Wt(Nt.CROSS_CHANNEL_FAILED_JOIN_DEST):$.data&&$.data.serverResponse&&$.serverResponse.command==="StartPacketTransfer"?new Wt(Nt.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST):$}this.prevChannelMediaConfig=s}async updateChannelMediaRelay(s){if(this.state!==ms.RELAY_STATE_RUNNING)throw new Wt(Nt.INVALID_OPERATION);await this.sendUpdateMessage(s),this.prevChannelMediaConfig=s}async setVideoProfile(s){if(this._resolution=s,this.state!==ms.RELAY_STATE_RUNNING)throw new Wt(Nt.INVALID_OPERATION);let $=this.genMessage(ts.SetVideoProfile);await this.signal.request($),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Et.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=ms.RELAY_STATE_IDLE,this.dispose()}dispose(){Et.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=As.CancelToken.source(),this.state=ms.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){let s=await KM(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=s.workerToken,await this.signal.connect(s.addressList),this.emit("event",ru.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(s){let $=this.genMessage(ts.StopPacketTransfer);await this.signal.request($),await this.signal.waitStatus("Normal Quit"),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));let _e=this.genMessage(ts.SetSdkProfile,s);await this.signal.request(_e),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));let tt=this.genMessage(ts.SetSourceChannel,s);await this.signal.request(tt),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",ru.PACKET_JOINED_SRC_CHANNEL),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));let rt=this.genMessage(ts.SetSourceUserId,s);await this.signal.request(rt),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));let it=this.genMessage(ts.SetDestChannel,s);await this.signal.request(it),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",ru.PACKET_JOINED_DEST_CHANNEL),Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));let at=this.genMessage(ts.StartPacketTransfer,s);await this.signal.request(at),this.emit("event",ru.PACKET_SENT_TO_DEST_CHANNEL),this.state=ms.RELAY_STATE_RUNNING,Et.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(s){let $=this.genMessage(ts.UpdateDestChannel,s);await this.signal.request($),this.emit("event",ru.PACKET_UPDATE_DEST_CHANNEL),Et.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){let s=this.genMessage(ts.StopPacketTransfer);await this.signal.request(s),Et.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(s,$){let _e=[],tt=[],rt=[];this.requestId+=1;let it={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Sl,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};it.sdkVersion==="4.20.0"&&(it.sdkVersion="0.0.1");let at=null,ct=null;switch(s){case ts.SetSdkProfile:return it.clientRequest={command:"SetSdkProfile",type:"multi_channel"},it;case ts.SetSourceChannel:if(ct=$&&$.getSrcChannelMediaInfo(),!ct)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find source config");return it.clientRequest={command:"SetSourceChannel",uid:"0",channelName:ct.channelName,token:ct.token||this.joinInfo.appId},it;case ts.SetSourceUserId:if(ct=$&&$.getSrcChannelMediaInfo(),!ct)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find source config");return it.clientRequest={command:"SetSourceUserId",uid:ct.uid+""},it;case ts.SetDestChannel:if(at=$&&$.getDestChannelMediaInfo(),!at)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find dest config");return at.forEach(dt=>{_e.push(dt.channelName),tt.push(dt.uid+""),rt.push(dt.token||this.joinInfo.appId)}),it.clientRequest={command:"SetDestChannel",channelName:_e,uid:tt,token:rt},it;case ts.StartPacketTransfer:return it.clientRequest={command:"StartPacketTransfer"},it;case ts.Reconnect:return it.clientRequest={command:"Reconnect"},it;case ts.StopPacketTransfer:return it.clientRequest={command:"StopPacketTransfer"},it;case ts.UpdateDestChannel:if(at=$&&$.getDestChannelMediaInfo(),!at)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find dest config");return at.forEach(dt=>{_e.push(dt.channelName),tt.push(dt.uid+""),rt.push(dt.token||this.joinInfo.appId)}),it.clientRequest={command:"UpdateDestChannel",channelName:_e,uid:tt,token:rt},it;case ts.SetVideoProfile:it.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return it}}function OE(j){var s={},$=!1;function _e(tt,rt){return $=!0,{done:!1,value:new ev(rt=new tv(function(it){it(j[tt](rt))}),1)}}return s[vm!==void 0&&N3||"@@iterator"]=function(){return this},s.next=function(tt){return $?($=!1,tt):_e("next",tt)},typeof j.throw=="function"&&(s.throw=function(tt){if($)throw $=!1,tt;return _e("throw",tt)}),typeof j.return=="function"&&(s.return=function(tt){return $?($=!1,tt):_e("return",tt)}),s}var aO=ot(P4);function cO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function lO(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?cO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):cO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function dO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function uO(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?dO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):dO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class Mo extends B_{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map(s=>s.rtpMap&&s.rtpMap.encodingName.toLowerCase()||"").filter(s=>{var $;return vn($=Object.keys(ip)).call($,s)}))]}constructor(s,$){super(s,$),gt(this,"store",void 0),gt(this,"peerConnection",void 0),gt(this,"remoteSDP",void 0),gt(this,"initialOffer",void 0),gt(this,"statsFilter",void 0),gt(this,"useRTX",!1),gt(this,"localCapabilities",void 0),gt(this,"localCandidateCount",0),gt(this,"allCandidatesReceived",!1),gt(this,"establishPromise",void 0),gt(this,"mutex",new Lo("P2PConnection-mutex")),this.store=$,this.peerConnection=new RTCPeerConnection(Mo.resolvePCConfiguration(s),{optional:[{googDscp:!0}]}),this.statsFilter=RE(this.peerConnection,Ft("STATS_UPDATE_INTERVAL"),void 0,br()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{let s=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!s.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let $=iu(s.sdp),_e=p0(s.sdp,{filterRTX:!this.useRTX,filterVideoFec:Ft("FILTER_VIDEO_FEC"),filterAudioFec:Ft("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=_e,this.initialOffer=s,uO(uO({},$),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:_e},offerSDP:s.sdp})}catch(s){throw new rn(Nt.GET_LOCAL_CONNECTION_PARAMS_FAILED,s.toString())}}async connect(s,$,_e,tt,rt,it){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(ct){gt(this,"sessionDesc",void 0),gt(this,"localCapabilities",void 0),gt(this,"rtpCapabilities",void 0),gt(this,"candidates",void 0),gt(this,"iceParameters",void 0),gt(this,"dtlsParameters",void 0),gt(this,"setup",void 0),gt(this,"currentMidIndex",void 0),gt(this,"cname",void 0),ct=Nr(ct);let{remoteIceParameters:dt,remoteDtlsParameters:ut,candidates:pt,remoteRTPCapabilities:mt,remoteSetup:yt,localCapabilities:At,sdkCodec:Ct,cname:It}=ct,kt=jr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE audio video
a=msid-semantic: WMS
a=ice-lite
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:audio
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendrecv
a=rtcp-mux
a=rtcp-rsize
a=mid:video
`);this.rtpCapabilities=mt,this.candidates=pt,this.iceParameters=dt,this.dtlsParameters=ut,this.setup=yt,this.localCapabilities=At,this.cname=It;for(let Vt=0;Vt<kt.mediaDescriptions.length;Vt++){let Bt=kt.mediaDescriptions[Vt];if(Bt.attributes.iceUfrag=dt.iceUfrag,Bt.attributes.icePwd=dt.icePwd,Bt.attributes.fingerprints=ut.fingerprints,Bt.attributes.candidates=pt,Bt.attributes.setup=yt,Bt.media.mediaType==="video"){Bt.media.fmts=mt.videoCodecs.map(zt=>zt.payloadType.toString(10));let en=mt.videoCodecs.filter(zt=>{var Yt,Qt;return(Yt=zt.rtpMap)===null||Yt===void 0?void 0:vn(Qt=Yt.encodingName.toLowerCase()).call(Qt,Ct)});en.length===0&&(en=mt.videoCodecs),Bt.attributes.payloads=en,Bt.attributes.extmaps=mt.videoExtensions}Bt.media.mediaType==="audio"&&(Bt.media.fmts=mt.audioCodecs.map(en=>en.payloadType.toString(10)),Bt.attributes.payloads=mt.audioCodecs,Bt.attributes.extmaps=mt.audioExtensions),kt.mediaDescriptions[Vt]=this.mungMediaDesc(Bt)}this.sessionDesc=kt,this.currentMidIndex=kt.mediaDescriptions.length-1}toString(){return jr.print(this.sessionDesc)}send(ct,dt,ut){let{ssrcs:pt,ssrcGroups:mt}=Ds(dt,this.cname),yt=this.sessionDesc.mediaDescriptions.find(It=>ct===Cn.VIDEO?It.media.mediaType==="video":It.media.mediaType==="audio"),At=pt[0].attributes.label,Ct=pt[0].attributes.mslabel;return yt.attributes.ssrcs=yt.attributes.ssrcs.concat(pt),yt.attributes.ssrcGroups=yt.attributes.ssrcGroups.concat(mt),{id:At,mslabel:Ct}}batchSend(ct){return ct.map(dt=>{let{kind:ut,ssrcMsg:pt}=dt;return this.send(ut,pt,void 0)})}stopSending(ct){this.sessionDesc.mediaDescriptions.forEach(dt=>{let ut=[],pt=[],mt=[];dt.attributes.ssrcs.forEach(yt=>{vn(ct).call(ct,yt.attributes.label||"")?mt.push(yt):ut.push(yt)}),dt.attributes.ssrcGroups.forEach(yt=>{var At;vn(At=mt.map(Ct=>Ct.ssrcId)).call(At,yt.ssrcIds[0])||pt.push(yt)}),dt.attributes.ssrcs=ut,dt.attributes.ssrcGroups=pt})}mute(ct){let dt=this.sessionDesc.mediaDescriptions.find(ut=>ut.attributes.mid===ct);if(!dt)throw new Error("mediaDescription not found with ".concat(ct," in remote SDP when calling RemoteSDP.mute."));dt.attributes.direction="inactive"}unmute(ct){let dt=this.sessionDesc.mediaDescriptions.find(ut=>ut.attributes.mid===ct);if(!dt)throw new Error("mediaDescription not found with ".concat(ct," in remote SDP when calling RemoteSDP.unmute."));dt.attributes.direction="sendonly"}receive(ct,dt,ut){ct.forEach((pt,mt)=>{let yt=pt._mediaStreamTrack,At=this.sessionDesc.mediaDescriptions.findIndex(It=>It.attributes.mid===yt.kind),Ct=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[At],pt);this.sessionDesc.mediaDescriptions[At]=Ct})}stopReceiving(ct){}updateCandidates(ct){ct===Ko.TCP?this.candidates.forEach(dt=>{this.candidates.findIndex(ut=>ut.transport==="tcp"&&ut.connectionAddress===dt.connectionAddress&&ut.port===dt.port)===-1&&this.candidates.push(lO(lO({},dt),{},{foundation:"tcpcandidate",priority:Number(dt.priority)-1+"",transport:"tcp",port:Number(dt.port)+90+""}))}):this.candidates=this.candidates.filter(dt=>dt.transport!=="tcp");for(let dt of this.sessionDesc.mediaDescriptions)dt.attributes.candidates=this.candidates}restartICE(ct){ct=Nr(ct),this.iceParameters=ct,this.sessionDesc.mediaDescriptions.forEach(dt=>{dt.attributes.iceUfrag=ct.iceUfrag,dt.attributes.icePwd=ct.icePwd})}predictReceivingMids(ct){let dt=[];for(let ut=0;ut<ct;ut++)dt.push((this.currentMidIndex+ut+1).toString(10));return dt}mungRecvMediaDsec(ct,dt){let ut=Nr(ct);return Tp(ut,dt),AE(ut,dt),ut}updateRecvMedia(ct,dt){let ut=this.sessionDesc.mediaDescriptions.findIndex(pt=>pt.attributes.mid===ct);if(ut!==-1){let pt=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[ut],dt);this.sessionDesc.mediaDescriptions[ut]=pt}}bumpMid(ct){this.currentMidIndex+=ct}updateTrackLabel(ct,dt,ut){let pt=this.sessionDesc.mediaDescriptions.find(yt=>ct===Cn.VIDEO?yt.attributes.mid==="video":yt.attributes.mid==="audio");if(pt){let yt=pt.attributes.ssrcs.find(At=>At.attributes.label===dt);var mt;yt&&(yt.attributes.label=ut,(mt=yt.attributes.msid)===null||mt===void 0||mt.replace(dt,ut))}}mungMediaDesc(ct){let dt=Nr(ct);return IE(dt),function(ut){let pt=ut.attributes.extmaps.find(mt=>mt.extensionName==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01");pt&&ut.attributes.extmaps.splice(ut.attributes.extmaps.indexOf(pt),1),ut.attributes.payloads.forEach(mt=>{let yt=mt.rtcpFeedbacks.findIndex(At=>At.type==="transport-cc");yt!==-1&&mt.rtcpFeedbacks.splice(yt,1)})}(dt),dt}getSSRC(ct){for(let dt of this.sessionDesc.mediaDescriptions)for(let ut of dt.attributes.ssrcs)if(ut.attributes.label===ct)return[ut]}}({remoteIceParameters:s,remoteDtlsParameters:$,candidates:_e,remoteRTPCapabilities:tt.send,remoteSetup:rt,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:it});let at=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:at})}catch(at){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(at.toString()))}}async updateRemoteRTPCapabilities(s,$){throw new rn(Nt.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}send(s,$){var _e=this;return Fs(function*(){let tt=yield Bn(_e.mutex.lock());try{if(!_e.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let rt=s.map(mt=>_e.peerConnection.addTrack(mt._mediaStreamTrack)),it=yield Bn(_e.peerConnection.createOffer()),at=jr.parse(it.sdp),ct=s.map(mt=>{let yt=mt._mediaStreamTrack,At=at.mediaDescriptions.find(Ct=>Ct.attributes.mid===yt.kind);if(!At)throw new Error("Cannot extract ssrc from mediaDescription.");return function(Ct,It,kt){let Vt=Ct.attributes.ssrcs.filter(en=>en.attributes.label===It),Bt=Ct.attributes.ssrcGroups;if(Vt.length===0)throw new Error("Cannot extract ssrc from plan-b SDP.");if(Bt&&Vt.length>1){let en=Bt.find(zt=>zt.ssrcIds.indexOf(Vt[0].ssrcId)!==-1);return en?[{ssrcId:en.ssrcIds[0],rtx:kt?en.ssrcIds[1]:void 0}]:[{ssrcId:Vt[0].ssrcId}]}return[{ssrcId:Vt[0].ssrcId}]}(At,yt.id,_e.useRTX)}),dt;try{dt=yield ct}catch(mt){throw rt.forEach(yt=>{ls()&&yt.replaceTrack(null),_e.peerConnection.removeTrack(yt)}),mt}let ut=_e.mungSendOfferSDP(it.sdp,s);_e.remoteSDP.receive(s,$,dt);let pt=_e.remoteSDP.toString();return yield Bn(_e.peerConnection.setLocalDescription({type:"offer",sdp:ut})),yield Bn(_e.applySendEncodings(rt,s)),yield Bn(_e.peerConnection.setRemoteDescription({type:"answer",sdp:pt})),s.map((mt,yt)=>{let At=mt._mediaStreamTrack.id;return{localSSRC:ct[yt],id:At}})}catch(rt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(rt.toString()))}finally{tt()}})()}async stopSending(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let $=this.peerConnection.getSenders().filter(rt=>{var it;return s.indexOf(((it=rt.track)===null||it===void 0?void 0:it.id)||"")!==-1});if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");$.map(rt=>{ls()&&rt.replaceTrack(null),this.peerConnection.removeTrack(rt)});let _e=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(_e),this.remoteSDP.stopReceiving(s);let tt=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:tt})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat($.toString()))}}async receive(s,$,_e,tt){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(s," before remoteSDP created."));let{id:rt,mslabel:it}=this.remoteSDP.send(s,$,tt),at=new Jt((ut,pt)=>{let mt=setTimeout(()=>{pt(new Error("Cannot receive track, id: ".concat(rt)))},1e4),yt=At=>{let Ct=ir();if((Ct.name==="Safari"&&Number(Ct.version)===11||ds())&&At.track.id!==rt&&At.streams[0].id===it){var It;let kt=At.streams[0].getTracks()[0];return(It=this.remoteSDP)===null||It===void 0||It.updateTrackLabel(s,rt,At.track.id),this.peerConnection.removeEventListener("track",yt),clearTimeout(mt),void ut(kt)}if(At.track.id===rt)return this.peerConnection.removeEventListener("track",yt),clearTimeout(mt),void ut(At.track)};this.peerConnection.addEventListener("track",yt)}),ct=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:ct});let dt=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(dt),{track:await at,id:rt}}catch(rt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(rt.toString()))}}async stopReceiving(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(s);let $=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let _e=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(_e)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat($.toString()))}}async muteRemote(s){}async unmuteRemote(s){}async muteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let $=this.peerConnection.getSenders().filter(_e=>{var tt;return s.indexOf(((tt=_e.track)===null||tt===void 0?void 0:tt.id)||"")!==-1});if($.length!==s.length)throw new Error("sender' length doesn't match mids' length.");$.map(_e=>{if(ls()&&_e.track)_e.track.enabled=!1;else{let tt=_e.getParameters();tt.encodings.forEach(rt=>rt.active=!1),_e.setParameters(tt)}})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat($.toString()))}}async unmuteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let $=this.peerConnection.getSenders().filter(rt=>{var it;return s.indexOf(((it=rt.track)===null||it===void 0?void 0:it.id)||"")!==-1});if($.length!==s.length)throw new Error("Senders' length doesn't match mids' length.");$.map(async rt=>{if(ls()&&rt.track)rt.track.enabled=!0;else{let it=rt.getParameters();it.encodings.forEach(at=>at.active=!0),await rt.setParameters(it)}});let _e=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(_e);let tt=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:tt})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat($.toString()))}}restartICE(s){var $=this;return Fs(function*(){let _e=yield Bn($.mutex.lock("From P2PConnection.restartICE"));try{if(!$.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(vr().supportPCSetConfiguration){let ct=$.peerConnection.getConfiguration(),dt=s===Ko.RELAY?"relay":"all";ct.iceTransportPolicy!==dt&&(Et.debug("[".concat($.store.clientId,"] restartICE change iceTransportPolicy from [").concat(ct.iceTransportPolicy,"] to [").concat(dt,"]")),ct.iceTransportPolicy=dt,$.peerConnection.setConfiguration(ct))}else if(s===Ko.RELAY)return;s!==Ko.RELAY&&$.remoteSDP.updateCandidates(s);let tt=yield Bn($.peerConnection.createOffer({iceRestart:!0}));if(!tt.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let rt=iu(tt.sdp),{remoteIceParameters:it}=yield rt.iceParameters;$.remoteSDP.restartICE(it);let at=$.remoteSDP.toString();yield Bn($.peerConnection.setLocalDescription(tt)),yield Bn($.peerConnection.setRemoteDescription({type:"answer",sdp:at}))}catch(tt){Et.warning("[".concat($.store.clientId,"] restart ICE failed, abort operation"),tt)}finally{_e()}})()}close(){var s;this.peerConnection.close(),(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(s){return this.statsFilter.getVideoIsReady(s)}async updateEncoderConfig(s,$){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let _e=await this.peerConnection.createOffer(),tt=this.mungSendOfferSDP(_e.sdp,[$]);this.remoteSDP.updateRecvMedia($._mediaStreamTrack.kind,$);let rt=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:tt}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch(_e){throw new rn(Nt.EXCHANGE_SDP_FAILED,_e.toString())}}async updateSendParameters(s,$){let _e=this.peerConnection.getSenders().filter(tt=>{var rt;return((rt=tt.track)===null||rt===void 0?void 0:rt.id)===s});_e.length===1&&await this.applySendEncodings(_e,[$])}setStatsRemoteVideoIsReady(s,$){this.statsFilter.setVideoIsReady2(s,$)}async replaceTrack(s,$){let _e=this.peerConnection.getSenders().find(tt=>{var rt;return((rt=tt.track)===null||rt===void 0?void 0:rt.id)===$});_e&&await _e.replaceTrack(s._mediaStreamTrack)}createDataChannels(s,$){throw new rn(Nt.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(s){throw new rn(Nt.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var s;(s=this.onICEConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var s;(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=s=>{s.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Et.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Et.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Ft("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(s){let $={iceServers:[],sdpSemantics:"plan-b"};return s.iceServers?$.iceServers=s.iceServers:s.turnServer&&s.turnServer.mode!=="off"&&(Pm(s.turnServer.servers)?$.iceServers=s.turnServer.servers:($.iceServers&&$.iceServers.push(...Mo.turnServerConfigToIceServers(s.turnServer.servers)),Ft("USE_TURN_SERVER_OF_GATEWAY")&&$.iceServers&&s.turnServer.serversFromGateway&&$.iceServers.push(...Mo.turnServerConfigToIceServers(s.turnServer.serversFromGateway)),s.turnServer.servers.concat(s.turnServer.serversFromGateway||[]).forEach(_e=>{_e.forceturn&&($.iceTransportPolicy="relay")}))),$}static turnServerConfigToIceServers(s){let $=[];return s.forEach(_e=>{_e.security?_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turns:".concat(_e.turnServerURL,":").concat(_e.tcpport,"?transport=tcp")}):(_e.udpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.udpport,"?transport=udp")}),_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.tcpport,"?transport=tcp")}))}),$}async updateRtpSenderEncodings(s,$){var _e;if($||($=this.peerConnection.getSenders().find(dt=>{var ut;return((ut=dt.track)===null||ut===void 0?void 0:ut.id)===s._mediaStreamTrack.id})),!$)return Et.warn("[".concat(s.getTrackId(),"] no rtpSender found}"));if(!vr().supportSetRtpSenderParameters)return Et.warn("Browser not support set rtp-sender parameters");let tt={},rt={};if(s instanceof Hn)switch(s._optimizationMode){case"motion":tt.degradationPreference="maintain-framerate";break;case"detail":tt.degradationPreference="maintain-resolution";break;default:tt.degradationPreference="balanced"}if(Ft("DSCP_TYPE")&&tp()){var it;let dt=Ft("DSCP_TYPE");vn(it=["very-low","low","medium","high"]).call(it,dt)&&(rt.networkPriority=dt)}let at=$.getParameters(),ct=(_e=at.encodings)===null||_e===void 0?void 0:_e[0];ct&&Object.assign(ct,rt),Object.assign(at,tt),Et.debug("[".concat(s.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(at.encodings))),await $.setParameters(at)}async applySendEncodings(s,$){try{if(!vr().supportSetRtpSenderParameters||s.length!==$.length)return;for(let _e=0;_e<s.length;_e++){let tt=s[_e],rt=$[_e];tt&&rt&&await this.updateRtpSenderEncodings(rt,tt)}}catch{Et.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(s,$){let _e=jr.parse(s);return $.forEach((tt,rt)=>{let it=tt._mediaStreamTrack,at=_e.mediaDescriptions.find(ct=>ct.attributes.mid===it.kind);at&&Tp(at,tt)}),jr.print(_e)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=s=>{var $;($=this.onFirstAudioReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoReceived=s=>{var $;($=this.onFirstVideoReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstAudioDecoded=s=>{var $;($=this.onFirstAudioDecoded)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoDecoded=(s,$,_e)=>{var tt;(tt=this.onFirstVideoDecoded)===null||tt===void 0||tt.call(this,s,$,_e)},this.statsFilter.onSelectedLocalCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedLocalCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onSelectedRemoteCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedRemoteCandidateChanged)===null||_e===void 0||_e.call(this,s,$)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let $=this.remoteSDP.batchSend(s).map((rt,it)=>{let{id:at,mslabel:ct}=rt,{kind:dt}=s[it];return new Jt((ut,pt)=>{let mt=setTimeout(()=>{pt(new Error("Cannot receive track, id: ".concat(at)))},1e4),yt=At=>{let Ct=ir();if(Ct.name==="Safari"&&Number(Ct.version)===11&&At.track.id!==at&&At.streams[0].id===ct){var It;let kt=At.streams[0].getTracks()[0];return(It=this.remoteSDP)===null||It===void 0||It.updateTrackLabel(dt,at,At.track.id),this.peerConnection.removeEventListener("track",yt),clearTimeout(mt),void ut({track:kt,id:at})}if(At.track.id===at)return this.peerConnection.removeEventListener("track",yt),clearTimeout(mt),void ut({track:At.track,id:at})};this.peerConnection.addEventListener("track",yt)})}),_e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:_e});let tt=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(tt),await Jt.all($)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat($.toString()))}}async getRemoteSSRC(s){if(!this.remoteSDP)return;let $=this.remoteSDP.getSSRC(s);return $==null?void 0:$[0].ssrcId}setConfiguration(s){if(vr().supportPCSetConfiguration){let $=Mo.resolvePCConfiguration(s);this.peerConnection.setConfiguration($)}}}function $l(j,s,$){let _e=j[s];if(typeof _e!="function")throw new Error("Cannot use mutex on object property.");return $.value=async function(){let tt=this.mutex,rt=await tt.lock("Locking from P2PConnection.".concat(s));try{for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];return await _e.apply(this,at)}finally{rt()}},$}function pO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function bp(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?pO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):pO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}on([$l,bt("design:type",Function),bt("design:paramtypes",[Object,Object,Array,Object,String,String]),bt("design:returntype",Jt)],Mo.prototype,"connect",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Mo.prototype,"stopSending",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[String,Array,String,Object]),bt("design:returntype",Jt)],Mo.prototype,"receive",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Mo.prototype,"stopReceiving",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Mo.prototype,"muteRemote",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Mo.prototype,"unmuteRemote",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Mo.prototype,"muteLocal",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Mo.prototype,"unmuteLocal",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Mo.prototype,"close",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Mo.prototype,"updateEncoderConfig",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Mo.prototype,"updateSendParameters",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[Yo,String]),bt("design:returntype",Jt)],Mo.prototype,"replaceTrack",null),on([$l,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Mo.prototype,"getRemoteSSRC",null);let _0="9",hO=4e4;function fO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function o1(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?fO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):fO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class Jr extends B_{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var s,$;return(s=($=this.peerConnection.getReceivers()[0])===null||$===void 0||($=$.transport)===null||$===void 0?void 0:$.state)!==null&&s!==void 0?s:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map(s=>s.rtpMap&&s.rtpMap.encodingName.toLowerCase()||"").filter(s=>{var $;return vn($=Object.keys(ip)).call($,s)}))]}constructor(s,$){super(s,$),gt(this,"store",void 0),gt(this,"peerConnection",void 0),gt(this,"remoteSDP",void 0),gt(this,"initialOffer",void 0),gt(this,"transportEventReceiver",void 0),gt(this,"statsFilter",void 0),gt(this,"useXR",Ft("USE_XR")),gt(this,"localCapabilities",void 0),gt(this,"remoteCodecs",void 0),gt(this,"localCandidateCount",0),gt(this,"allCandidatesReceived",!1),gt(this,"dataStreamChannelMap",new Map),gt(this,"establishPromise",void 0),gt(this,"mutex",new Lo("P2PConnection-mutex")),this.store=$,this.peerConnection=new RTCPeerConnection(Jr.resolvePCConfiguration(s),{optional:[{googDscp:!0}]}),this.statsFilter=RE(this.peerConnection,Ft("STATS_UPDATE_INTERVAL"),void 0,br()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async updateRemoteRTPCapabilities(s,$){if(this.remoteCodecs=$,!this.remoteSDP)return void Et.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat($));if(this.remoteSDP.updateRemoteCodec(s,$,this.store.codec)){let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_e);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}else Et.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});let s=await this.peerConnection.createOffer();if(!s.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let $=iu(s.sdp),_e=await lv({filterRTX:!Ft("USE_PUB_RTX")&&!Ft("USE_SUB_RTX"),filterVideoFec:Ft("FILTER_VIDEO_FEC"),filterAudioFec:Ft("FILTER_AUDIO_FEC"),filterVideoCodec:Ft("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=n1(_e),this.initialOffer=s,o1(o1({},$),{},{rtpCapabilities:_e,offerSDP:s.sdp})}catch(s){throw new rn(Nt.GET_LOCAL_CONNECTION_PARAMS_FAILED,s.toString())}}async connect(s,$,_e,tt,rt,it){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{get localCapabilities(){return Nr(this._localCapabilities)}get rtpCapabilities(){return Nr(this._rtpCapabilities)}get candidates(){return Nr(this._candidates)}get iceParameters(){return Nr(this._iceParameters)}get dtlsParameters(){return Nr(this._dtlsParameters)}constructor(yt){gt(this,"sessionDesc",void 0),gt(this,"_localCapabilities",void 0),gt(this,"_rtpCapabilities",void 0),gt(this,"_candidates",void 0),gt(this,"_iceParameters",void 0),gt(this,"_dtlsParameters",void 0),gt(this,"setup",void 0),gt(this,"currentMidIndex",void 0),gt(this,"cname",void 0),gt(this,"firefoxSsrcMidMap",new Map),yt=Nr(yt);let{remoteIceParameters:At,remoteDtlsParameters:Ct,candidates:It,remoteRTPCapabilities:kt,remoteSetup:Vt,localCapabilities:Bt,cname:en}=yt,zt=jr.parse(`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0 1
a=msid-semantic: WMS
a=ice-lite
m=video 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:0
m=audio 9 UDP/TLS/RTP/SAVPF 0
c=IN IP4 127.0.0.1
a=rtcp:9 IN IP4 0.0.0.0
a=sendonly
a=rtcp-mux
a=rtcp-rsize
a=mid:1
`);this._rtpCapabilities=kt,this._candidates=It,this._iceParameters=At,this._dtlsParameters=Ct,this._localCapabilities=Bt,this.setup=Vt,this.cname=en;let Yt=this.rtpCapabilities.send;for(let Qt of zt.mediaDescriptions){if(Qt.attributes.iceUfrag=At.iceUfrag,Qt.attributes.icePwd=At.icePwd,Qt.attributes.fingerprints=Ct.fingerprints,Qt.attributes.candidates=It,Qt.attributes.setup=Vt,Qt.media.mediaType==="video"&&(Qt.media.fmts=Yt.videoCodecs.map(Xt=>Xt.payloadType.toString(10)),Qt.attributes.payloads=Yt.videoCodecs,Qt.attributes.extmaps=Yt.videoExtensions,Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:Xt,ssrcGroups:cn}=Ds([{ssrcId:hO,rtx:Ft("USE_SUB_RTX")?40001:void 0}],this.cname);Qt.attributes.ssrcs=Xt,Qt.attributes.ssrcGroups=cn}if(Qt.media.mediaType==="audio"&&(Qt.media.fmts=Yt.audioCodecs.map(Xt=>Xt.payloadType.toString(10)),Qt.attributes.payloads=Yt.audioCodecs,Qt.attributes.extmaps=Yt.audioExtensions,su(Qt),Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:Xt,ssrcGroups:cn}=Ds([{ssrcId:2e4}],this.cname);Qt.attributes.ssrcs=Xt,Qt.attributes.ssrcGroups=cn}}this.sessionDesc=zt,this.currentMidIndex=zt.mediaDescriptions.length-1}preloadRemoteMedia(){let yt=Ft("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;let At=this.candidates,Ct=this.dtlsParameters,It=this.iceParameters,kt=this.rtpCapabilities.send;for(let Vt=1;Vt<yt;Vt++){let Bt=2*Vt+2e4,en=2*Vt+hO,{ssrcs:zt,ssrcGroups:Yt}=Ds([{ssrcId:Bt}],this.cname),{ssrcs:Qt,ssrcGroups:Xt}=Ds([{ssrcId:en,rtx:Ft("USE_SUB_RTX")?en+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:_0,protos:["UDP","TLS","RTP","SAVPF"],fmts:kt.videoCodecs.map(cn=>cn.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:It.iceUfrag,icePwd:It.icePwd,unrecognized:[],candidates:At,extmaps:kt.videoExtensions,fingerprints:Ct.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:Qt,ssrcGroups:Xt,rtcpFeedbackWildcards:[],payloads:kt.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*Vt)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:_0,protos:["UDP","TLS","RTP","SAVPF"],fmts:kt.audioCodecs.map(cn=>cn.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:It.iceUfrag,icePwd:It.icePwd,unrecognized:[],candidates:At,extmaps:kt.audioExtensions,fingerprints:Ct.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:zt,ssrcGroups:Yt,rtcpFeedbackWildcards:[],payloads:kt.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*Vt+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return jr.print(this.sessionDesc)}send(yt,At,Ct,It){let{ssrcs:kt,ssrcGroups:Vt}=Ds(At,this.cname,Ft("SYNC_GROUP")?Ct:void 0),Bt=this.findPreloadMediaDesc(kt);if(Bt){if(br()&&this.firefoxSsrcMidMap.set(kt[0].ssrcId,Bt.attributes.mid),It&&(It.twcc||It.remb)){let en=this.sessionDesc.mediaDescriptions.indexOf(Bt);return this.sessionDesc.mediaDescriptions[en]=this.mungSendMediaDesc(Bt,It),{mid:Bt.attributes.mid,needExchangeSDP:!0}}return{mid:Bt.attributes.mid,needExchangeSDP:!1}}{let en=this.findAvailableMediaIndex(yt,kt),zt;return en===-1||en===1&&(ls()||YI())||en===0&&Ft("USE_SUB_RTX")||qI()?(zt=this.createOrRecycleSendMedia(yt,kt,Vt,"sendonly",It),this.updateBundleMids()):(zt=Nr(this.sessionDesc.mediaDescriptions[en]),zt.attributes.direction="sendonly",zt.attributes.ssrcs=kt,zt.attributes.ssrcGroups=Vt,this.sessionDesc.mediaDescriptions[en]=this.mungSendMediaDesc(zt,It)),br()&&this.firefoxSsrcMidMap.set(kt[0].ssrcId,zt.attributes.mid),{mid:zt.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){let{mediaDesc:yt,needExchangeSDP:At}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:yt.attributes.mid,needExchangeSDP:At}}batchSend(yt){let At=yt.map(kt=>{let{kind:Vt,ssrcMsg:Bt,mslabel:en}=kt;return this.send(Vt,Bt,en)}),Ct=[],It=!1;return At.forEach(kt=>{let{mid:Vt,needExchangeSDP:Bt}=kt;Bt&&(It=!0),Ct.push(Vt)}),{mids:Ct,needExchangeSDP:It}}stopSending(yt){let At=this.sessionDesc.mediaDescriptions.filter(Ct=>Ct.attributes.mid&&yt.indexOf(Ct.attributes.mid)!==-1);if(At.length!==yt.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");At.forEach(Ct=>{Ct.attributes.mid==="0"||br()||qI()?Ct.attributes.ssrcs=[]:(Ct.attributes.ssrcs=[],Ct.attributes.direction="inactive",Ct.media.port="0")}),this.updateBundleMids()}mute(yt){let At=this.sessionDesc.mediaDescriptions.find(Ct=>Ct.attributes.mid===yt);if(!At)throw new Error("mediaDescription not found with ".concat(yt," in remote SDP when calling RemoteSDP.mute."));At.attributes.direction="inactive"}unmute(yt){let At=this.sessionDesc.mediaDescriptions.find(Ct=>Ct.attributes.mid===yt);if(!At)throw new Error("mediaDescription not found with ".concat(yt," in remote SDP when calling RemoteSDP.unmute."));At.attributes.direction="sendonly"}muteRemote(yt){let At=this.sessionDesc.mediaDescriptions.filter(Ct=>vn(yt).call(yt,Ct.attributes.mid||""));if(At.length!==yt.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");At.forEach(Ct=>{Ct.attributes.direction="inactive"})}unmuteRemote(yt){let At=this.sessionDesc.mediaDescriptions.filter(Ct=>vn(yt).call(yt,Ct.attributes.mid||""));if(At.length!==yt.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");At.forEach(Ct=>{Ct.attributes.direction="recvonly"})}receive(yt,At,Ct,It){yt.forEach((kt,Vt)=>{this.createOrRecycleRecvMedia(kt,[],"recvonly",At,Ct,It[Vt])}),this.updateBundleMids()}stopReceiving(yt){let At=this.sessionDesc.mediaDescriptions.filter(Ct=>yt.indexOf(Ct.attributes.mid)!==-1);if(At.length!==yt.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");At.forEach(Ct=>{Ct.media.port="0",Ct.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(yt){let At=this._candidates.filter(Ct=>Ct.transport==="udp");if(yt===Ko.TCP){if(At.length===0)return;if(Ft("TCP_CANDIDATE_ONLY")){let Ct=this._candidates.filter(It=>It.transport==="tcp");At.forEach(It=>{Ct.findIndex(kt=>kt.connectionAddress===It.connectionAddress)===-1&&Ct.push(bp(bp({},It),{},{foundation:"tcpcandidate",priority:Number(It.priority)-1+"",transport:"tcp",port:Number(It.port)+90+""}))}),this._candidates=Ct}else{let Ct=[];At.forEach(It=>{Ct.push(bp(bp({},It),{},{foundation:"tcpcandidate",priority:Number(It.priority)-1+"",transport:"tcp",port:Number(It.port)+90+""}))}),this._candidates=[...At,...Ct]}}else if(yt===Ko.RELAY){if(At.length!==0)return;{let Ct=this._candidates.filter(It=>It.transport==="tcp");Ct.forEach(It=>{At.push(bp(bp({},It),{},{foundation:"udpcandidate",priority:Number(It.priority)+1+"",transport:"udp",port:Number(It.port)-90+""}))}),this._candidates=[...At,...Ct]}}else At.length===0?(this._candidates.filter(Ct=>Ct.transport==="tcp").forEach(Ct=>{At.push(bp(bp({},Ct),{},{foundation:"udpcandidate",priority:Number(Ct.priority)+1+"",transport:"udp",port:Number(Ct.port)-90+""}))}),this._candidates=At):this._candidates=this._candidates.filter(Ct=>Ct.transport!=="tcp");for(let Ct of this.sessionDesc.mediaDescriptions)Ct.attributes.candidates=this.candidates}restartICE(yt){yt=Nr(yt),this._iceParameters=yt,this.sessionDesc.mediaDescriptions.forEach(At=>{At.attributes.iceUfrag=yt.iceUfrag,At.attributes.icePwd=yt.icePwd})}predictReceivingMids(yt){let At=[];for(let Ct=0;Ct<yt;Ct++)At.push((this.currentMidIndex+Ct+1).toString(10));return At}findAvailableMediaIndex(yt,At){return this.sessionDesc.mediaDescriptions.findIndex(Ct=>{let It=Ct.media.mediaType===yt&&Ct.media.port!=="0"&&(Ct.attributes.direction==="sendonly"||Ct.attributes.direction==="sendrecv")&&Ct.attributes.ssrcs.length===0;if(br()){if(It){let kt=this.firefoxSsrcMidMap.get(At[0].ssrcId);return!(kt||Ct.attributes.mid!=="0"&&Ct.attributes.mid!=="1")||!(!kt||kt!==Ct.attributes.mid)}return!1}return It})}createOrRecycleDataChannel(){for(let Ct of this.sessionDesc.mediaDescriptions)if(Ct.media.mediaType==="application")return{mediaDesc:Ct,needExchangeSDP:!1};this.currentMidIndex+=1;let yt="".concat(this.currentMidIndex),At={media:{mediaType:"application",port:_0,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(yt),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(At),{mediaDesc:At,needExchangeSDP:!0}}createOrRecycleRecvMedia(yt,At,Ct,It,kt,Vt){let Bt=yt._mediaStreamTrack.kind,en=this.rtpCapabilities.recv,zt=sm(Bt,en,this.localCapabilities.send,Bt===Cn.VIDEO?It:kt),Yt=Bt===Cn.VIDEO?en.videoExtensions:en.audioExtensions;this.currentMidIndex+=1;let Qt="".concat(this.currentMidIndex),Xt={media:{mediaType:Bt,port:_0,protos:["UDP","TLS","RTP","SAVPF"],fmts:zt.map(hn=>hn.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:Yt,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:At,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:zt,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:Ct,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(Qt)}};Xt=this.mungRecvMediaDsec(Xt,yt,Vt);let cn=this.findFirstClosedMedia(Bt);if(cn){let hn=this.sessionDesc.mediaDescriptions.indexOf(cn);this.sessionDesc.mediaDescriptions[hn]=Xt}else this.sessionDesc.mediaDescriptions.push(Xt);return Xt}updateRemoteCodec(yt,At,Ct){let It=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(Xt=>Xt.rtpMap&&Xt.rtpMap.encodingName.toLowerCase()||"").filter(Xt=>{var cn;return vn(cn=Object.keys(ip)).call(cn,Xt)}))],kt=new Set(At);if(It.every(Xt=>kt.has(Xt)))return Et.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(At)),!1;let Vt=this._rtpCapabilities.recv.videoCodecs.filter(Xt=>At.some(cn=>{var hn;return vn(hn=Xt.rtpMap&&Xt.rtpMap.encodingName.toLowerCase()||"").call(hn,cn)}));if(Vt.length===0)return Et.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(It," codecs: ").concat(At)),!1;let Bt=[...new Set(Vt.map(Xt=>Xt.rtpMap&&Xt.rtpMap.encodingName.toLowerCase()||""))],en;if(Et.debug("updateRemoteCodec, from ".concat(It," to ").concat(Bt)),yt.length===0)en=this.sessionDesc.mediaDescriptions.filter(Xt=>Xt.media.mediaType==="video"&&Xt.attributes.direction==="recvonly");else if(en=this.sessionDesc.mediaDescriptions.filter(Xt=>Xt.attributes.mid&&vn(yt).call(yt,Xt.attributes.mid)&&Xt.attributes.direction==="recvonly"),en.length!==yt.length)return Et.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(yt,", codecs: ").concat(At)),!1;this._rtpCapabilities.recv.videoCodecs=Vt;let zt=this.localCapabilities.send,Yt=this.rtpCapabilities.recv,Qt=sm(Cn.VIDEO,Yt,zt,Ct);return en.forEach(Xt=>{let cn=Qt.map(hn=>hn.payloadType.toString(10));Et.debug("updateRemoteCodec mid: ".concat(Xt.attributes.mid,", from ").concat(Xt.attributes.payloads," to ").concat(Qt)),Xt.attributes.payloads=Qt,Xt.media.fmts=cn}),!0}createOrRecycleSendMedia(yt,At,Ct,It,kt){let Vt=this.rtpCapabilities.send,Bt=yt===Cn.VIDEO?Vt.videoCodecs:Vt.audioCodecs,en=yt===Cn.VIDEO?Vt.videoExtensions:Vt.audioExtensions;this.currentMidIndex+=1;let zt="".concat(this.currentMidIndex),Yt={media:{mediaType:yt,port:_0,protos:["UDP","TLS","RTP","SAVPF"],fmts:Bt.map(Xt=>Xt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:en,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:At,ssrcGroups:Ct,rtcpFeedbackWildcards:[],payloads:Bt,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:It,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(zt)}};Yt=this.mungSendMediaDesc(Yt,kt);let Qt=this.findFirstClosedMedia(yt);if(Qt){let Xt=this.sessionDesc.mediaDescriptions.indexOf(Qt);this.sessionDesc.mediaDescriptions[Xt]=Yt}else this.sessionDesc.mediaDescriptions.push(Yt);return Yt}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(yt=>yt.media.port!=="0").map(yt=>yt.attributes.mid)}mungRecvMediaDsec(yt,At,Ct){let It=Nr(yt);return IE(It),Tp(It,At),AE(It,At),av(It),t1(It,Ct,this.localCapabilities.send),It}mungSendMediaDesc(yt,At){let Ct=Nr(yt);return t1(Ct,At,this.localCapabilities.recv),su(Ct),Ct}updateRecvMedia(yt,At){let Ct=this.sessionDesc.mediaDescriptions.findIndex(It=>It.attributes.mid===yt);if(Ct!==-1){let It=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[Ct],At);this.sessionDesc.mediaDescriptions[Ct]=It}}bumpMid(yt){this.currentMidIndex+=yt}findFirstClosedMedia(yt){return this.sessionDesc.mediaDescriptions.find(At=>br()?At.media.port==="0"&&At.media.mediaType===yt:At.media.port==="0")}findPreloadMediaDesc(yt){return this.sessionDesc.mediaDescriptions.find(At=>{var Ct;return((Ct=At.attributes)===null||Ct===void 0||(Ct=Ct.ssrcs[0])===null||Ct===void 0?void 0:Ct.ssrcId)===yt[0].ssrcId})}getSSRC(yt){var At;return(At=this.sessionDesc.mediaDescriptions.find(Ct=>Ct.attributes.mid===yt))===null||At===void 0?void 0:At.attributes.ssrcs}}({remoteIceParameters:s,remoteDtlsParameters:$,candidates:_e,remoteRTPCapabilities:tt,remoteSetup:rt,localCapabilities:this.localCapabilities,cname:it}),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);let at=this.remoteSDP.toString(),ct=jr.parse(this.initialOffer.sdp),dt=ct.mediaDescriptions.find(yt=>yt.media.mediaType==="audio");dt&&su(dt),this.useXR&&h0(ct);let ut=jr.print(ct),pt=this.logSDPExchange(ut||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:ut}),pt==null||pt(at),await this.peerConnection.setRemoteDescription({type:"answer",sdp:at});let mt=this.peerConnection.getTransceivers()[0];if(mt!=null&&mt.receiver&&this.tryBindTransportEvents(mt.receiver),Ft("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();let yt=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:yt});let At=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(At)}}catch(at){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(at.toString()))}}send(s,$,_e){var tt=this;return Fs(function*(){let rt=yield Bn(tt.mutex.lock("From P2PConnection.send"));try{if(!tt.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");let it=[];s.forEach(Ct=>{let It=tt.peerConnection.addTransceiver(Ct._mediaStreamTrack,{direction:"sendonly"});it.push(It),Ct._updateRtpTransceiver(It)}),br()&&Ft("SIMULCAST")===!0&&(yield Bn(tt.applySimulcastForFirefox(it,s)));let at=yield Bn(tt.peerConnection.createOffer()),ct=tt.remoteSDP.predictReceivingMids(s.length),dt=tt.mungSendOfferSDP(at.sdp,s,ct),ut=jr.parse(dt),pt=ct.map(Ct=>{let It=ut.mediaDescriptions.find(kt=>kt.attributes.mid===Ct);if(!It)throw new Error("Cannot extract ssrc from mediaDescription.");return sv(It,Ft("USE_PUB_RTX"))}),mt;try{mt=yield pt}catch(Ct){mt=[],tt.remoteSDP.receive(s,$,_e,mt);let It=tt.remoteSDP.toString();throw yield Bn(tt.peerConnection.setLocalDescription({type:"offer",sdp:dt})),yield Bn(tt.peerConnection.setRemoteDescription({type:"answer",sdp:It})),yield Bn(tt.stopSending(ct,!0)),Ct}tt.remoteSDP.receive(s,$,_e,mt);let yt=tt.remoteSDP.toString(),At=tt.logSDPExchange(dt,"offer","local","send");return yield Bn(tt.peerConnection.setLocalDescription({type:"offer",sdp:dt})),yield Bn(tt.applySimulcastEncodings(it,s)),yield Bn(tt.applySendEncodings(it,s)),At==null||At(yt),yield Bn(tt.peerConnection.setRemoteDescription({type:"answer",sdp:yt})),it.map((Ct,It)=>{let kt=ct[It];return{localSSRC:pt[It],id:kt,transceiver:Ct}})}catch(it){throw it instanceof rn?it:new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(it.toString()))}finally{rt()}})()}async createDataChannels(s,$){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let _e=this.dataStreamChannelMap.get(s);_e&&_e.readyState==="open"?Et.debug("[P2PConnection] Channels are already available and can be reused directly."):(_e=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:Ft("DATASTREAM_MAX_RETRANSMITS")}),_e.binaryType="arraybuffer",this.dataStreamChannelMap.set(s,_e)),$.forEach(rt=>{rt._updateOriginDataChannel(_e)});let{needExchangeSDP:tt}=this.remoteSDP.sendDataChannel();if(tt){let rt=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:rt});let it=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(it),Et.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else Et.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(_e){throw _e instanceof rn?_e:new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(_e.toString()))}}async stopDataChannels(s){try{let $=this.dataStreamChannelMap.get(s);return $==null||$.close(),void this.dataStreamChannelMap.delete(s)}catch($){throw $ instanceof rn?$:new rn(Nt.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat($.toString()))}}async stopSending(s,$){let _e=$?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");let tt=this.peerConnection.getTransceivers().filter(ct=>s.indexOf(ct.mid)!==-1);if(tt.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");tt.map(ct=>{var dt;ct.direction="inactive",(dt=ct.stop)===null||dt===void 0||dt.call(ct)});let rt=await this.peerConnection.createOffer(),it=this.logSDPExchange(rt.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(rt),this.remoteSDP.stopReceiving(s);let at=this.remoteSDP.toString();it==null||it(at),await this.peerConnection.setRemoteDescription({type:"answer",sdp:at})}catch(tt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(tt.toString()))}finally{_e&&_e()}}async receive(s,$,_e,tt){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(s," before remoteSDP created."));let{mid:rt,needExchangeSDP:it}=this.remoteSDP.send(s,$,_e,tt);if(it){let ct=this.remoteSDP.toString(),dt=this.logSDPExchange(ct,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:ct});let ut=await this.peerConnection.createAnswer(),pt=this.mungReceiveAnswerSDP(ut.sdp,rt,s);dt==null||dt(pt||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:pt}),Et.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(s," by exchanging SDP."))}else Et.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(s," no need to exchange SDP."));let at=this.peerConnection.getTransceivers().find(ct=>ct.mid===rt);if(!at)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:at.receiver.track,id:rt,transceiver:at}}catch(rt){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(rt.toString()))}}async batchReceive(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");let{mids:$,needExchangeSDP:_e}=this.remoteSDP.batchSend(s);if(_e){let tt=this.remoteSDP.toString(),rt=this.logSDPExchange(tt,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:tt});let it=await this.peerConnection.createAnswer();rt==null||rt(it.sdp||""),await this.peerConnection.setLocalDescription(it),Et.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))}else Et.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));return $.map(tt=>{let rt=this.peerConnection.getTransceivers().find(it=>it.mid===tt);if(!rt)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:rt.receiver.track,id:tt,transceiver:rt}})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat($.toString()))}}async stopReceiving(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat($.toString()))}}async muteRemote(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(s," before remote SDP created."));this.remoteSDP.mute(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat($.toString()))}}async unmuteRemote(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(s," before remote SDP created."));this.remoteSDP.unmute(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat($.toString()))}}async muteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");let $=this.peerConnection.getTransceivers().filter(it=>it.mid&&s.indexOf(it.mid)!==-1);if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length.");$.map(it=>{it.direction="inactive"});let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_e),this.remoteSDP.muteRemote(s);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat($.toString()))}}async unmuteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");let $=this.peerConnection.getTransceivers().filter(it=>it.mid&&s.indexOf(it.mid)!==-1);if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length.");$.map(async(it,at)=>{it.direction="sendonly"});let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(_e),this.remoteSDP.unmuteRemote(s);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch($){throw new rn(Nt.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat($.toString()))}}restartICE(s){var $=this;return Fs(function*(){let _e=yield Bn($.mutex.lock("From P2PConnection.restartICE"));try{if(!$.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(vr().supportPCSetConfiguration){let dt=$.peerConnection.getConfiguration(),ut=s===Ko.RELAY?"relay":"all";dt.iceTransportPolicy!==ut&&(Et.debug("[".concat($.store.clientId,"] restartICE change iceTransportPolicy from [").concat(dt.iceTransportPolicy,"] to [").concat(ut,"]")),dt.iceTransportPolicy=ut,$.peerConnection.setConfiguration(dt))}else if(s===Ko.RELAY)return;$.remoteSDP.updateCandidates(s);let tt=yield Bn($.peerConnection.createOffer({iceRestart:!0}));if(!tt.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let rt=iu(tt.sdp),{remoteIceParameters:it}=yield rt.iceParameters;$.remoteSDP.restartICE(it);let at=$.remoteSDP.toString(),ct=$.logSDPExchange(tt.sdp||"","offer","local","restartICE");$.store.descriptionStart(),yield Bn($.peerConnection.setLocalDescription(tt)),ct==null||ct(at),yield Bn($.peerConnection.setRemoteDescription({type:"answer",sdp:at}))}catch(tt){Et.warning("[".concat($.store.clientId,"] restart ICE failed, abort operation"),tt)}finally{_e()}})()}close(){var s;this.peerConnection.close(),(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(s){return this.statsFilter.getVideoIsReady(s)}async updateEncoderConfig(s,$){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");let _e=await this.peerConnection.createOffer(),tt=this.mungSendOfferSDP(_e.sdp,[$],[s]);this.remoteSDP.updateRecvMedia(s,$);let rt=this.remoteSDP.toString(),it=this.logSDPExchange(tt,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:tt}),it==null||it(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch(_e){throw new rn(Nt.EXCHANGE_SDP_FAILED,_e.toString())}}async updateSendParameters(s,$){let _e=this.peerConnection.getTransceivers().filter(tt=>tt.mid===s);_e.length===1&&(this.isVP8Simulcast($)?br()||await this.applySimulcastEncodings(_e,[$]):await this.applySendEncodings(_e,[$]))}setStatsRemoteVideoIsReady(s,$){this.statsFilter.setVideoIsReady2(s,$)}async replaceTrack(s,$){let _e=this.peerConnection.getTransceivers().find(tt=>tt.mid===$);_e&&await _e.sender.replaceTrack(s._mediaStreamTrack)}async getSelectedCandidatePair(){let s=this.peerConnection.getReceivers();if(s.length>0&&s[0].transport&&s[0].transport.iceTransport&&s[0].transport.iceTransport.getSelectedCandidatePair&&s[0].transport.iceTransport.getSelectedCandidatePair()){let $=s[0].transport.iceTransport,{local:_e,remote:tt}=$.getSelectedCandidatePair();return{local:o1(o1({},vu),{},{candidateType:_e.type,protocol:_e.protocol,address:_e.address,port:_e.port}),remote:o1(o1({},vu),{},{candidateType:tt.type,protocol:tt.protocol,address:tt.address,port:tt.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var s;(s=this.onICEConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var s;(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=s=>{s.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Et.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Et.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Ft("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(s){let $={iceServers:[]};return s.iceServers?$.iceServers=s.iceServers:s.turnServer&&s.turnServer.mode!=="off"&&(Pm(s.turnServer.servers)?$.iceServers=s.turnServer.servers:($.iceServers&&$.iceServers.push(...Jr.turnServerConfigToIceServers(s.turnServer.servers)),Ft("USE_TURN_SERVER_OF_GATEWAY")&&$.iceServers&&s.turnServer.serversFromGateway&&$.iceServers.push(...Jr.turnServerConfigToIceServers(s.turnServer.serversFromGateway)),Ft("FORCE_TURN_TCP")?$.iceTransportPolicy="relay":s.turnServer.servers.concat(s.turnServer.serversFromGateway||[]).forEach(_e=>{_e.forceturn&&($.iceTransportPolicy="relay")}))),Ft("ENABLE_ENCODED_TRANSFORM")&&vr().supportWebRTCEncodedTransform&&($.encodedInsertableStreams=!0),$}static turnServerConfigToIceServers(s){let $=[];return s.forEach(_e=>{_e.security?_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turns:".concat(up(_e.turnServerURL),":").concat(_e.tcpport,"?transport=tcp")}):(_e.udpport&&!Ft("FORCE_TURN_TCP")&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.udpport,"?transport=udp")}),_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.tcpport,"?transport=tcp")}))}),$}tryBindTransportEvents(s){let $=s.transport;if($){this.transportEventReceiver=s,$.onstatechange=()=>{var tt;$!=null&&$.state&&((tt=this.onDTLSTransportStateChange)===null||tt===void 0||tt.call(this,$.state))},$.onerror=tt=>{var rt;(rt=this.onDTLSTransportError)===null||rt===void 0||rt.call(this,"error"in tt?tt.error:tt)};let _e=$.iceTransport;_e&&(_e.onstatechange=()=>{let tt=$==null?void 0:$.iceTransport.state;var rt;tt&&((rt=this.onICETransportStateChange)===null||rt===void 0||rt.call(this,tt))},_e.getSelectedCandidatePair&&(_e.onselectedcandidatepairchange=()=>{if(_e.getSelectedCandidatePair()){let{local:tt,remote:rt}=_e.getSelectedCandidatePair();Et.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:tt.type,protocol:tt.protocol}),", remote ").concat(JSON.stringify({candidateType:rt.type,protocol:rt.protocol,address:rt.address,port:rt.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(s,$){var _e;if($||($=this.peerConnection.getSenders().find(ut=>ut.track===s._mediaStreamTrack)),!$)return Et.warn("[".concat(s.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(s))return Et.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!vr().supportSetRtpSenderParameters)return Et.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");let tt={},rt={};switch(s._optimizationMode){case"motion":tt.degradationPreference="maintain-framerate";break;case"detail":tt.degradationPreference="maintain-resolution";break;default:tt.degradationPreference="balanced"}if(s._encoderConfig){var it;let{bitrateMax:ut,frameRate:pt,scaleResolutionDownBy:mt}=s._encoderConfig;ut&&(rt.maxBitrate=1e3*ut),(vn(it=s._hints).call(it,wr.LOW_STREAM)||s.isUseScaleResolutionDownBy)&&(pt&&(rt.maxFramerate=Js(pt)),mt&&mt>=1&&(rt.scaleResolutionDownBy=mt))}if(Ft("DSCP_TYPE")&&tp()){var at;let ut=Ft("DSCP_TYPE");vn(at=["very-low","low","medium","high"]).call(at,ut)&&(rt.networkPriority=ut)}let ct=$.getParameters(),dt=(_e=ct.encodings)===null||_e===void 0?void 0:_e[0];br()&&!dt&&(tt.encodings=[rt]),dt&&Object.assign(dt,rt),Object.assign(ct,tt),Et.debug("[".concat(s.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(ct.encodings))),await $.setParameters(ct)}async applySendEncodings(s,$){try{if(!vr().supportSetRtpSenderParameters||s.length!==$.length)return;for(let _e=0;_e<s.length;_e++){let tt=s[_e],rt=$[_e];rt instanceof Hn&&!this.isVP8Simulcast(rt)&&await this.updateRtpSenderEncodings(rt,tt.sender)}}catch{Et.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(s,$,_e){let tt=jr.parse(s);return $.forEach((rt,it)=>{let at=_e[it],ct=tt.mediaDescriptions.find(dt=>dt.attributes.mid===at);ct&&(Tp(ct,rt),cv(ct,rt,this.store.codec))}),jr.print(tt)}mungReceiveAnswerSDP(s,$,_e){let tt=jr.parse(s),rt=tt.mediaDescriptions.find(it=>it.attributes.mid===$);return rt&&(_e===Cn.AUDIO&&rt.media.mediaType==="audio"&&su(rt),this.useXR&&h0(tt)),jr.print(tt)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=s=>{var $;($=this.onFirstAudioReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoReceived=s=>{var $;($=this.onFirstVideoReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstAudioDecoded=s=>{var $;($=this.onFirstAudioDecoded)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoDecoded=(s,$,_e)=>{var tt;(tt=this.onFirstVideoDecoded)===null||tt===void 0||tt.call(this,s,$,_e)},this.statsFilter.onSelectedLocalCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedLocalCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onSelectedRemoteCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedRemoteCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onFirstVideoDecodedTimeout=s=>{var $;($=this.onFirstVideoDecodedTimeout)===null||$===void 0||$.call(this,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(s,$){if(s.length===$.length)for(let ct=0;ct<s.length;ct++){var _e,tt,rt,it,at;let dt=s[ct],ut=$[ct];if(ut instanceof Hn&&!vn(_e=ut._hints).call(_e,wr.LOW_STREAM)&&(tt=ut._encoderConfig)!==null&&tt!==void 0&&tt.bitrateMax&&((rt=ut._encoderConfig)===null||rt===void 0?void 0:rt.bitrateMax)>200&&(it=ut._scalabilityMode)!==null&&it!==void 0&&it.numSpatialLayers&&((at=ut._scalabilityMode)===null||at===void 0?void 0:at.numSpatialLayers)>1&&this.store.codec==="vp8"){let pt={},mt={high:1e3*(ut._encoderConfig.bitrateMax-50),medium:5e4};pt.encodings=[{rid:"m",active:!0,maxBitrate:mt.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:mt.high}];let yt=dt.sender.getParameters();await dt.sender.setParameters(Object.assign(yt,pt))}}}async applySimulcastEncodings(s,$){if(!br()&&s.length===$.length)for(let _e=0;_e<s.length;_e++){let tt=$[_e];if(tt instanceof Hn&&this.isVP8Simulcast(tt)){let rt=s[_e],it={},at={high:1e3*(tt._encoderConfig.bitrateMax-50),medium:5e4};it.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:at.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:at.medium,scaleResolutionDownBy:4}];let ct=rt.sender.getParameters();await rt.sender.setParameters(Object.assign(ct,it))}}}isVP8Simulcast(s){var $,_e,tt,rt,it;return!!(s instanceof Hn&&Ft("SIMULCAST")&&this.store.codec==="vp8"&&!vn($=s._hints).call($,wr.LOW_STREAM)&&(_e=s._encoderConfig)!==null&&_e!==void 0&&_e.bitrateMax&&((tt=s._encoderConfig)===null||tt===void 0?void 0:tt.bitrateMax)>200&&(rt=s._scalabilityMode)!==null&&rt!==void 0&&rt.numSpatialLayers&&((it=s._scalabilityMode)===null||it===void 0?void 0:it.numSpatialLayers)>1)}logSDPExchange(s,$,_e,tt){if(Ft("SDP_LOGGING"))return Et.upload("[".concat(this.store.clientId,"] exchanging ").concat(_e," ").concat($," SDP during P2PConnection.").concat(tt,`
`),s),$==="offer"?rt=>{this.logSDPExchange(rt,"answer",_e==="local"?"remote":"local",tt)}:void 0}async getRemoteSSRC(s){if(!this.remoteSDP)return;let $=this.remoteSDP.getSSRC(s);return $==null?void 0:$[0].ssrcId}setConfiguration(s){if(vr().supportPCSetConfiguration){let $=Jr.resolvePCConfiguration(s);this.peerConnection.setConfiguration($)}}}function js(j,s,$){let _e=j[s];if(typeof _e!="function")throw new Error("Cannot use mutex on object property.");return $.value=async function(){let tt=this.mutex,rt=await tt.lock("From P2PConnection.".concat(s));try{for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];return await _e.apply(this,at)}finally{rt()}},$}function gO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function mO(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?gO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):gO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}on([js,bt("design:type",Function),bt("design:paramtypes",[Array,Array]),bt("design:returntype",Jt)],Jr.prototype,"updateRemoteRTPCapabilities",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Object,Object,Array,Object,String,String]),bt("design:returntype",Jt)],Jr.prototype,"connect",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Object,Array]),bt("design:returntype",Jt)],Jr.prototype,"createDataChannels",null),on([js,bt("design:type",Function),bt("design:paramtypes",[String,Array,String,Object]),bt("design:returntype",Jt)],Jr.prototype,"receive",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jr.prototype,"batchReceive",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jr.prototype,"stopReceiving",null),on([js,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Jr.prototype,"muteRemote",null),on([js,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Jr.prototype,"unmuteRemote",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jr.prototype,"muteLocal",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jr.prototype,"unmuteLocal",null),on([js,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Jr.prototype,"close",null),on([js,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Jr.prototype,"updateEncoderConfig",null),on([js,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Jr.prototype,"updateSendParameters",null),on([js,bt("design:type",Function),bt("design:paramtypes",[Yo,String]),bt("design:returntype",Jt)],Jr.prototype,"replaceTrack",null),on([js,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Jr.prototype,"getRemoteSSRC",null);let _O=`v=0
o=- 0 0 IN IP4 127.0.0.1
s=AgoraGateway
t=0 0
a=group:BUNDLE 0
a=msid-semantic: WMS
a=ice-lite
m=application 9 UDP/DTLS/SCTP webrtc-datachannel
c=IN IP4 127.0.0.1
a=mid:0
`,PE="9",hv=2e4,fv=4e4;class VF{get localCapabilities(){return Nr(this._localCapabilities)}get rtpCapabilities(){return Nr(this._rtpCapabilities)}get candidates(){return Nr(this._candidates)}get iceParameters(){return Nr(this._iceParameters)}get dtlsParameters(){return Nr(this._dtlsParameters)}constructor(s){gt(this,"sessionDesc",void 0),gt(this,"_localCapabilities",void 0),gt(this,"_rtpCapabilities",void 0),gt(this,"_candidates",void 0),gt(this,"_iceParameters",void 0),gt(this,"_dtlsParameters",void 0),gt(this,"setup",void 0),gt(this,"currentMidIndex",void 0),gt(this,"cname",void 0),gt(this,"firefoxSsrcMidMap",new Map),s=Nr(s);let{remoteIceParameters:$,remoteDtlsParameters:_e,candidates:tt,remoteRTPCapabilities:rt,remoteSetup:it,localCapabilities:at,cname:ct}=s,dt=jr.parse(_O);this._rtpCapabilities=rt,this._candidates=tt,this._iceParameters=$,this._dtlsParameters=_e,this._localCapabilities=at,this.setup=it,this.cname=ct;let ut=this.rtpCapabilities.send;for(let pt of dt.mediaDescriptions){if(pt.attributes.iceUfrag=$.iceUfrag,pt.attributes.icePwd=$.icePwd,pt.attributes.fingerprints=_e.fingerprints,pt.attributes.candidates=tt,pt.attributes.setup=it,pt.media.mediaType==="application"&&(pt.attributes.sctpPort="5000"),pt.media.mediaType==="video"&&(pt.media.fmts=ut.videoCodecs.map(mt=>mt.payloadType.toString(10)),pt.attributes.payloads=ut.videoCodecs,pt.attributes.extmaps=ut.videoExtensions,Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:mt,ssrcGroups:yt}=Ds([{ssrcId:fv,rtx:Ft("USE_SUB_RTX")?40001:void 0}],this.cname);pt.attributes.ssrcs=mt,pt.attributes.ssrcGroups=yt}if(pt.media.mediaType==="audio"&&(pt.media.fmts=ut.audioCodecs.map(mt=>mt.payloadType.toString(10)),pt.attributes.payloads=ut.audioCodecs,pt.attributes.extmaps=ut.audioExtensions,su(pt),Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:mt,ssrcGroups:yt}=Ds([{ssrcId:hv}],this.cname);pt.attributes.ssrcs=mt,pt.attributes.ssrcGroups=yt}}this.sessionDesc=dt,this.currentMidIndex=dt.mediaDescriptions.length-1}updateRemoteRTPCapabilities(s){let $=jr.parse(_O);this._rtpCapabilities=s;let _e=this.rtpCapabilities.send;for(let tt of $.mediaDescriptions){if(tt.attributes.iceUfrag=this._iceParameters.iceUfrag,tt.attributes.icePwd=this._iceParameters.icePwd,tt.attributes.fingerprints=this._dtlsParameters.fingerprints,tt.attributes.candidates=this._candidates,tt.attributes.setup=this.setup,tt.media.mediaType==="application"&&(tt.attributes.sctpPort="5000"),tt.media.mediaType==="video"&&(tt.media.fmts=_e.videoCodecs.map(rt=>rt.payloadType.toString(10)),tt.attributes.payloads=_e.videoCodecs,tt.attributes.extmaps=_e.videoExtensions,Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:rt,ssrcGroups:it}=Ds([{ssrcId:fv,rtx:Ft("USE_SUB_RTX")?40001:void 0}],this.cname);tt.attributes.ssrcs=rt,tt.attributes.ssrcGroups=it}if(tt.media.mediaType==="audio"&&(tt.media.fmts=_e.audioCodecs.map(rt=>rt.payloadType.toString(10)),tt.attributes.payloads=_e.audioCodecs,tt.attributes.extmaps=_e.audioExtensions,Ft("PRELOAD_MEDIA_COUNT")>0)){let{ssrcs:rt,ssrcGroups:it}=Ds([{ssrcId:hv}],this.cname);tt.attributes.ssrcs=rt,tt.attributes.ssrcGroups=it}}this.sessionDesc=$,this.currentMidIndex=$.mediaDescriptions.length-1}preloadRemoteMedia(s){this.rtpCapabilities;let $=this.candidates,_e=this.dtlsParameters,tt=this.iceParameters,rt=this.rtpCapabilities.send;for(let it=1;it<s;it++){let at=2*it+hv,ct=2*it+fv,{ssrcs:dt,ssrcGroups:ut}=Ds([{ssrcId:at}],this.cname),{ssrcs:pt,ssrcGroups:mt}=Ds([{ssrcId:ct,rtx:Ft("USE_SUB_RTX")?ct+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:PE,protos:["UDP","TLS","RTP","SAVPF"],fmts:rt.videoCodecs.map(yt=>yt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:tt.iceUfrag,icePwd:tt.icePwd,unrecognized:[],candidates:$,extmaps:rt.videoExtensions,fingerprints:_e.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:pt,ssrcGroups:mt,rtcpFeedbackWildcards:[],payloads:rt.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*it-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:PE,protos:["UDP","TLS","RTP","SAVPF"],fmts:rt.audioCodecs.map(yt=>yt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:tt.iceUfrag,icePwd:tt.icePwd,unrecognized:[],candidates:$,extmaps:rt.audioExtensions,fingerprints:_e.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:dt,ssrcGroups:ut,rtcpFeedbackWildcards:[],payloads:rt.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*it)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return jr.print(this.sessionDesc)}send(s,$,_e,tt){let{ssrcs:rt,ssrcGroups:it}=Ds($,this.cname,Ft("SYNC_GROUP")?_e:void 0),at=this.findPreloadMediaDesc(rt);if(at){if(br()&&this.firefoxSsrcMidMap.set(rt[0].ssrcId,at.attributes.mid),tt&&(tt.twcc||tt.remb)){let ct=this.sessionDesc.mediaDescriptions.indexOf(at);return this.sessionDesc.mediaDescriptions[ct]=this.mungSendMediaDesc(at,tt),{mid:at.attributes.mid,needExchangeSDP:!0}}return{mid:at.attributes.mid,needExchangeSDP:!1}}{let ct=this.findAvailableMediaIndex(s,rt),dt;return ct===-1||ls()||ds()||YI()||ct===0&&Ft("USE_SUB_RTX")?(dt=this.createOrRecycleSendMedia(s,rt,it,"sendonly",tt),this.updateBundleMids()):(dt=Nr(this.sessionDesc.mediaDescriptions[ct]),dt.attributes.direction="sendonly",dt.attributes.ssrcs=rt,dt.attributes.ssrcGroups=it,this.sessionDesc.mediaDescriptions[ct]=this.mungSendMediaDesc(dt,tt)),br()&&this.firefoxSsrcMidMap.set(rt[0].ssrcId,dt.attributes.mid),{mid:dt.attributes.mid,needExchangeSDP:!0}}}batchSend(s){let $=s.map(rt=>{let{kind:it,ssrcMsg:at,mslabel:ct}=rt;return this.send(it,at,ct)}),_e=[],tt=!1;return $.forEach(rt=>{let{mid:it,needExchangeSDP:at}=rt;at&&(tt=!0),_e.push(it)}),{mids:_e,needExchangeSDP:tt}}stopSending(s){let $=this.sessionDesc.mediaDescriptions.filter(_e=>_e.attributes.mid&&s.indexOf(_e.attributes.mid)!==-1);if($.length!==s.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");$.forEach(_e=>{_e.attributes.mid==="0"||br()||ls()||ds()?_e.attributes.ssrcs=[]:(_e.attributes.ssrcs=[],_e.attributes.direction="inactive",_e.media.port="0")}),this.updateBundleMids()}mute(s){let $=this.sessionDesc.mediaDescriptions.find(_e=>_e.attributes.mid===s);if(!$)throw new Error("mediaDescription not found with ".concat(s," in remote SDP when calling RemoteSDP.mute."));$.attributes.direction="inactive"}unmute(s){let $=this.sessionDesc.mediaDescriptions.find(_e=>_e.attributes.mid===s);if(!$)throw new Error("mediaDescription not found with ".concat(s," in remote SDP when calling RemoteSDP.unmute."));$.attributes.direction="sendonly"}muteRemote(s){let $=this.sessionDesc.mediaDescriptions.filter(_e=>vn(s).call(s,_e.attributes.mid||""));if($.length!==s.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");$.forEach(_e=>{_e.attributes.direction="inactive"})}unmuteRemote(s){let $=this.sessionDesc.mediaDescriptions.filter(_e=>vn(s).call(s,_e.attributes.mid||""));if($.length!==s.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");$.forEach(_e=>{_e.attributes.direction="recvonly"})}receive(s,$,_e,tt){s.forEach((rt,it)=>{this.createOrRecycleRecvMedia(rt,[],"recvonly",$,_e,tt[it])}),this.updateBundleMids()}stopReceiving(s){let $=this.sessionDesc.mediaDescriptions.filter(_e=>s.indexOf(_e.attributes.mid)!==-1);if($.length!==s.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");$.forEach(_e=>{_e.media.port="0",_e.attributes.direction="inactive"}),this.updateBundleMids()}updateCandidates(s){s===Ko.TCP?this._candidates.forEach($=>{this._candidates.findIndex(_e=>_e.transport==="tcp"&&_e.connectionAddress===$.connectionAddress&&_e.port===$.port)===-1&&this._candidates.push(mO(mO({},$),{},{foundation:"tcpcandidate",priority:Number($.priority)-1+"",transport:"tcp",port:Number($.port)+90+""}))}):this._candidates=this._candidates.filter($=>$.transport!=="tcp");for(let $ of this.sessionDesc.mediaDescriptions)$.attributes.candidates=this.candidates}restartICE(s){s=Nr(s),this._iceParameters=s,this.sessionDesc.mediaDescriptions.forEach($=>{$.attributes.iceUfrag=s.iceUfrag,$.attributes.icePwd=s.icePwd})}predictReceivingMids(s){let $=[];for(let _e=0;_e<s;_e++)$.push((this.currentMidIndex+_e+1).toString(10));return $}findAvailableMediaIndex(s,$){return this.sessionDesc.mediaDescriptions.findIndex(_e=>{let tt=_e.media.mediaType===s&&_e.media.port!=="0"&&(_e.attributes.direction==="sendonly"||_e.attributes.direction==="sendrecv")&&_e.attributes.ssrcs.length===0;if(br()){if(tt){let rt=this.firefoxSsrcMidMap.get($[0].ssrcId);return!(rt||_e.attributes.mid!=="0"&&_e.attributes.mid!=="1")||!(!rt||rt!==_e.attributes.mid)}return!1}return tt})}createOrRecycleRecvMedia(s,$,_e,tt,rt,it){let at=s._mediaStreamTrack.kind,ct=this.rtpCapabilities.recv,dt=sm(at,ct,this.localCapabilities.send,at===Cn.VIDEO?tt:rt),ut=at===Cn.VIDEO?ct.videoExtensions:ct.audioExtensions;this.currentMidIndex+=1;let pt="".concat(this.currentMidIndex),mt={media:{mediaType:at,port:PE,protos:["UDP","TLS","RTP","SAVPF"],fmts:dt.map(At=>At.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:ut,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:$,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:dt,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:_e,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(pt)}};mt=this.mungRecvMediaDsec(mt,s,it);let yt=this.findFirstClosedMedia(at);if(yt){let At=this.sessionDesc.mediaDescriptions.indexOf(yt);this.sessionDesc.mediaDescriptions[At]=mt}else this.sessionDesc.mediaDescriptions.push(mt);return mt}updateRemoteCodec(s,$,_e){let tt=[...new Set(this._rtpCapabilities.recv.videoCodecs.map(mt=>mt.rtpMap&&mt.rtpMap.encodingName.toLowerCase()||"").filter(mt=>{var yt;return vn(yt=Object.keys(ip)).call(yt,mt)}))],rt=new Set($);if(tt.every(mt=>rt.has(mt)))return Et.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat($)),!1;let it=this._rtpCapabilities.recv.videoCodecs.filter(mt=>$.some(yt=>{var At;return vn(At=mt.rtpMap&&mt.rtpMap.encodingName.toLowerCase()||"").call(At,yt)}));if(it.length===0)return Et.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(tt," codecs: ").concat($)),!1;let at=[...new Set(it.map(mt=>mt.rtpMap&&mt.rtpMap.encodingName.toLowerCase()||""))],ct;if(Et.debug("updateRemoteCodec, from ".concat(tt," to ").concat(at)),s.length===0)ct=this.sessionDesc.mediaDescriptions.filter(mt=>mt.media.mediaType==="video"&&mt.attributes.direction==="recvonly");else if(ct=this.sessionDesc.mediaDescriptions.filter(mt=>mt.attributes.mid&&vn(s).call(s,mt.attributes.mid)&&mt.attributes.direction==="recvonly"),ct.length!==s.length)return Et.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(s,", codecs: ").concat($)),!1;this._rtpCapabilities.recv.videoCodecs=it;let dt=this.localCapabilities.send,ut=this.rtpCapabilities.recv,pt=sm(Cn.VIDEO,ut,dt,_e);return ct.forEach(mt=>{let yt=pt.map(At=>At.payloadType.toString(10));Et.debug("updateRemoteCodec mid: ".concat(mt.attributes.mid,", from ").concat(mt.attributes.payloads," to ").concat(pt)),mt.attributes.payloads=pt,mt.media.fmts=yt}),!0}createOrRecycleSendMedia(s,$,_e,tt,rt){let it=this.rtpCapabilities.send,at=s===Cn.VIDEO?it.videoCodecs:it.audioCodecs,ct=s===Cn.VIDEO?it.videoExtensions:it.audioExtensions;this.currentMidIndex+=1;let dt="".concat(this.currentMidIndex),ut={media:{mediaType:s,port:PE,protos:["UDP","TLS","RTP","SAVPF"],fmts:at.map(mt=>mt.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:ct,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:$,ssrcGroups:_e,rtcpFeedbackWildcards:[],payloads:at,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:tt,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(dt)}};ut=this.mungSendMediaDesc(ut,rt);let pt=this.findFirstClosedMedia(s);if(pt){let mt=this.sessionDesc.mediaDescriptions.indexOf(pt);this.sessionDesc.mediaDescriptions[mt]=ut}else this.sessionDesc.mediaDescriptions.push(ut);return ut}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter(s=>s.media.port!=="0").map(s=>s.attributes.mid)}mungRecvMediaDsec(s,$,_e){let tt=Nr(s);return IE(tt),Tp(tt,$),AE(tt,$),av(tt),t1(tt,_e,this.localCapabilities.send),tt}mungSendMediaDesc(s,$){let _e=Nr(s);return t1(_e,$,this.localCapabilities.recv),su(_e),_e}updateRecvMedia(s,$){let _e=this.sessionDesc.mediaDescriptions.findIndex(tt=>tt.attributes.mid===s);if(_e!==-1){let tt=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[_e],$);this.sessionDesc.mediaDescriptions[_e]=tt}}bumpMid(s){this.currentMidIndex+=s}findFirstClosedMedia(s){return this.sessionDesc.mediaDescriptions.find($=>br()?$.media.port==="0"&&$.media.mediaType===s:$.media.port==="0")}findPreloadMediaDesc(s){return this.sessionDesc.mediaDescriptions.find($=>{var _e;return((_e=$.attributes)===null||_e===void 0||(_e=_e.ssrcs[0])===null||_e===void 0?void 0:_e.ssrcId)===s[0].ssrcId})}getSSRC(s){var $;return($=this.sessionDesc.mediaDescriptions.find(_e=>_e.attributes.mid===s))===null||$===void 0?void 0:$.attributes.ssrcs}}function EO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function DE(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?EO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):EO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}class Jo extends B_{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){let s;return this.localCapabilities&&(s=n1(this.localCapabilities)),[...new Set(s&&s.send.videoCodecs.map($=>$.rtpMap&&$.rtpMap.encodingName.toLowerCase()||"").filter($=>{var _e;return vn(_e=Object.keys(ip)).call(_e,$)}))]}constructor(s,$,_e){super(s,$),gt(this,"store",void 0),gt(this,"peerConnection",void 0),gt(this,"remoteSDP",void 0),gt(this,"initialOffer",void 0),gt(this,"transportEventReceiver",void 0),gt(this,"statsFilter",void 0),gt(this,"useXR",Ft("USE_XR")),gt(this,"localCapabilities",void 0),gt(this,"localCandidateCount",0),gt(this,"allCandidatesReceived",!1),gt(this,"remoteCodecs",void 0),gt(this,"dataStreamChannelMap",new Map),gt(this,"establishPromise",void 0),gt(this,"mutex",new Lo("NVExtentionsConnection-mutex")),gt(this,"rtcMedia",void 0),this.store=$,this.peerConnection=_e,this.statsFilter=RE(this.peerConnection,Ft("STATS_UPDATE_INTERVAL"),void 0,br()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(s){try{let $=await this.peerConnection.createOffer();if(!$.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");let _e=iu($.sdp),tt=await lv({filterRTX:!Ft("USE_PUB_RTX")&&!Ft("USE_SUB_RTX"),filterVideoFec:Ft("FILTER_VIDEO_FEC"),filterAudioFec:Ft("FILTER_AUDIO_FEC"),filterVideoCodec:Ft("FILTER_VIDEO_CODEC")},{useXR:this.useXR});return this.localCapabilities=tt,this.initialOffer=$,DE(DE({},_e),{},{rtpCapabilities:tt,offerSDP:$.sdp})}catch($){throw new Wt(Nt.GET_LOCAL_CONNECTION_PARAMS_FAILED,$.toString())}}async connect(s,$,_e,tt,rt,it){try{if(!this.initialOffer)throw new Error("Cannot establish NVConnection without initial offer.");this.remoteSDP=new VF({remoteIceParameters:s,remoteDtlsParameters:$,candidates:_e,remoteRTPCapabilities:tt,remoteSetup:rt,localCapabilities:n1(this.localCapabilities),cname:it});let at=this.remoteSDP.toString(),ct=jr.parse(this.initialOffer.sdp),dt=ct.mediaDescriptions.find(mt=>mt.media.mediaType==="audio");dt&&su(dt),this.useXR&&h0(ct);let ut=jr.print(ct),pt=this.logSDPExchange(ut||"","offer","local","connect");await this.peerConnection.setLocalDescription({type:"offer",sdp:ut}),pt==null||pt(at),await this.peerConnection.setRemoteDescription({type:"answer",sdp:at})}catch(at){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(at.toString()))}}async updateRemoteRTPCapabilities(s,$){if(this.remoteCodecs=$,!this.remoteSDP)return void Et.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat($));if(this.remoteSDP.updateRemoteCodec(s,$,this.store.codec)){let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_e);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}else Et.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.")}async updateRemoteConnect(s){var $,_e,tt,rt;($=this.remoteSDP)===null||$===void 0||$.updateRemoteRTPCapabilities(s),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&((rt=this.remoteSDP)===null||rt===void 0||rt.updateRemoteCodec([],this.remoteCodecs,this.store.codec)),(_e=this.remoteSDP)===null||_e===void 0||_e.preloadRemoteMedia(2);let it=(tt=this.remoteSDP)===null||tt===void 0?void 0:tt.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:it});let at=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(at),Et.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.")}send(s,$,_e){var tt=this;return Fs(function*(){let rt=yield Bn(tt.mutex.lock("From NVExtentionsConnection.send"));try{if(!tt.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");let it=[];s.forEach(Ct=>{let It=tt.peerConnection.addTransceiver(Ct._mediaStreamTrack,{direction:"sendonly"});it.push(It)}),br()&&Ft("SIMULCAST")===!0&&(yield Bn(tt.applySimulcastForFirefox(it,s)));let at=yield Bn(tt.peerConnection.createOffer()),ct=tt.remoteSDP.predictReceivingMids(s.length),dt=tt.mungSendOfferSDP(at.sdp,s,ct),ut=jr.parse(dt),pt=ct.map(Ct=>{let It=ut.mediaDescriptions.find(kt=>kt.attributes.mid===Ct);if(!It)throw new Error("Cannot extract ssrc from mediaDescription.");return sv(It,Ft("USE_PUB_RTX"))}),mt;try{mt=yield pt}catch(Ct){mt=[],tt.remoteSDP.receive(s,$,_e,mt);let It=tt.remoteSDP.toString();throw yield Bn(tt.peerConnection.setLocalDescription({type:"offer",sdp:dt})),yield Bn(tt.peerConnection.setRemoteDescription({type:"answer",sdp:It})),yield Bn(tt.stopSending(ct,!0)),Ct}tt.remoteSDP.receive(s,$,_e,mt);let yt=tt.remoteSDP.toString(),At=tt.logSDPExchange(dt,"offer","local","send");return yield Bn(tt.peerConnection.setLocalDescription({type:"offer",sdp:dt})),yield Bn(tt.applySimulcastEncodings(it,s)),yield Bn(tt.applySendEncodings(it,s)),At==null||At(yt),yield Bn(tt.peerConnection.setRemoteDescription({type:"answer",sdp:yt})),it.map((Ct,It)=>{let kt=ct[It];return{localSSRC:pt[It],id:kt,transceiver:Ct}})}catch(it){throw it instanceof Wt?it:new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(it.toString()))}finally{rt()}})()}async stopSending(s,$){let _e=$?void 0:await this.mutex.lock("From NVExtentionsConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");let tt=this.peerConnection.getTransceivers().filter(ct=>s.indexOf(ct.mid)!==-1);if(tt.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");tt.map(ct=>{var dt;ct.direction="inactive",(dt=ct.stop)===null||dt===void 0||dt.call(ct)});let rt=await this.peerConnection.createOffer(),it=this.logSDPExchange(rt.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(rt),this.remoteSDP.stopReceiving(s);let at=this.remoteSDP.toString();it==null||it(at),await this.peerConnection.setRemoteDescription({type:"answer",sdp:at})}catch(tt){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(tt.toString()))}finally{_e&&_e()}}async createDataChannels(s,$){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.createDataChannels before remote SDP created");let _e=this.dataStreamChannelMap.get(s);return _e&&_e.readyState==="open"?Et.debug("[P2PConnection] Channels are already available and can be reused directly."):(_e=this.peerConnection.createDataChannel("datastream-channel",{ordered:!1,maxRetransmits:Ft("DATASTREAM_MAX_RETRANSMITS")}),_e.binaryType="arraybuffer",this.dataStreamChannelMap.set(s,_e)),void $.forEach(tt=>{tt._updateOriginDataChannel(_e)})}catch(_e){throw _e instanceof Wt?_e:new Wt(Nt.DATACHANNEL_FAILED,"NVExtentionsConnection.createDataChannels failed; ".concat(_e.toString()))}}async stopDataChannels(s){try{let $=this.dataStreamChannelMap.get(s);return $==null||$.close(),void this.dataStreamChannelMap.delete(s)}catch($){throw $ instanceof Wt?$:new Wt(Nt.DATACHANNEL_FAILED,"NVExtentionsConnection.stopDataChannels failed; ".concat($.toString()))}}async receive(s,$,_e,tt){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.receive ".concat(s," before remoteSDP created."));let{mid:rt,needExchangeSDP:it}=this.remoteSDP.send(s,$,_e,tt);if(it){let ct=this.remoteSDP.toString(),dt=this.logSDPExchange(ct,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:ct});let ut=await this.peerConnection.createAnswer(),pt=this.mungReceiveAnswerSDP(ut.sdp,rt,s);dt==null||dt(pt||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:pt}),Et.debug("[NVExtentionsConnection] receive ".concat(s," by exchanging SDP."))}else Et.debug("[NVExtentionsConnection] receive ".concat(s," no need to exchange SDP."));let at=this.peerConnection.getTransceivers().find(ct=>ct.mid===rt);if(!at)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:at.receiver.track,id:rt}}catch(rt){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(rt.toString()))}}async batchReceive(s){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");let{mids:$,needExchangeSDP:_e}=this.remoteSDP.batchSend(s);if(_e){let tt=this.remoteSDP.toString(),rt=this.logSDPExchange(tt,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:tt});let it=await this.peerConnection.createAnswer();rt==null||rt(it.sdp||""),await this.peerConnection.setLocalDescription(it),Et.debug("[NVExtentionsConnection] batchReceive by exchanging SDP.")}else Et.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");return $.map(tt=>{let rt=this.peerConnection.getTransceivers().find(it=>it.mid===tt);if(!rt)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:rt.receiver.track,id:tt}})}catch($){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat($.toString()))}}async stopReceiving(s){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat($.toString()))}}async muteRemote(s){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(s," before remote SDP created."));this.remoteSDP.mute(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat($.toString()))}}async unmuteRemote(s){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(s," before remote SDP created."));this.remoteSDP.unmute(s);let $=this.remoteSDP.toString(),_e=this.logSDPExchange($,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:$});let tt=await this.peerConnection.createAnswer();_e==null||_e(tt.sdp||""),await this.peerConnection.setLocalDescription(tt)}catch($){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat($.toString()))}}async muteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");let $=this.peerConnection.getTransceivers().filter(it=>it.mid&&s.indexOf(it.mid)!==-1);if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length.");$.map(it=>{it.direction="inactive"});let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(_e),this.remoteSDP.muteRemote(s);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch($){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat($.toString()))}}async unmuteLocal(s){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");let $=this.peerConnection.getTransceivers().filter(it=>it.mid&&s.indexOf(it.mid)!==-1);if($.length!==s.length)throw new Error("Transceivers' length doesn't match mids' length.");$.map(async(it,at)=>{it.direction="sendonly"});let _e=await this.peerConnection.createOffer(),tt=this.logSDPExchange(_e.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(_e),this.remoteSDP.unmuteRemote(s);let rt=this.remoteSDP.toString();tt==null||tt(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch($){throw new Wt(Nt.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat($.toString()))}}restartICE(s){var $=this;return Fs(function*(){let _e=yield Bn($.mutex.lock("From NVExtentionsConnection.restartICE"));try{if(!$.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(vr().supportPCSetConfiguration){let dt=$.peerConnection.getConfiguration(),ut=s===Ko.RELAY?"relay":"all";dt.iceTransportPolicy!==ut&&(Et.debug("restartICE change iceTransportPolicy from [".concat(dt.iceTransportPolicy,"] to [").concat(ut,"]")),dt.iceTransportPolicy=ut,$.peerConnection.setConfiguration(dt))}else if(s===Ko.RELAY)return;s!==Ko.RELAY&&$.remoteSDP.updateCandidates(s);let tt=yield Bn($.peerConnection.createOffer({iceRestart:!0}));if(!tt.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");let rt=iu(tt.sdp),{remoteIceParameters:it}=yield rt.iceParameters;$.remoteSDP.restartICE(it);let at=$.remoteSDP.toString(),ct=$.logSDPExchange(tt.sdp||"","offer","local","restartICE");yield Bn($.peerConnection.setLocalDescription(tt)),ct==null||ct(at),yield Bn($.peerConnection.setRemoteDescription({type:"answer",sdp:at}))}catch(tt){Et.warning("restart ICE failed, abort operation",tt)}finally{_e()}})()}close(){var s;(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(s){return this.statsFilter.getVideoIsReady(s)}async updateEncoderConfig(s,$){try{if(!this.remoteSDP)throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");let _e=await this.peerConnection.createOffer(),tt=this.mungSendOfferSDP(_e.sdp,[$],[s]);this.remoteSDP.updateRecvMedia(s,$);let rt=this.remoteSDP.toString(),it=this.logSDPExchange(tt,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:tt}),it==null||it(rt),await this.peerConnection.setRemoteDescription({type:"answer",sdp:rt})}catch(_e){throw new Wt(Nt.EXCHANGE_SDP_FAILED,_e.toString())}}async updateSendParameters(s,$){let _e=this.peerConnection.getTransceivers().filter(tt=>tt.mid===s);_e.length===1&&(this.isVP8Simulcast($)?br()||await this.applySimulcastEncodings(_e,[$]):await this.applySendEncodings(_e,[$]))}setStatsRemoteVideoIsReady(s,$){this.statsFilter.setVideoIsReady2(s,$)}async replaceTrack(s,$){let _e=this.peerConnection.getTransceivers().find(tt=>tt.mid===$);_e&&await _e.sender.replaceTrack(s._mediaStreamTrack)}getP2PConnectionParams(){var s;if((s=this.peerConnection.currentLocalDescription)===null||s===void 0||!s.sdp||!this.localCapabilities)throw new Error;return DE(DE({},iu(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var s;(s=this.onICEConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var s;(s=this.onConnectionStateChange)===null||s===void 0||s.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=s=>{s.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Et.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Et.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},Ft("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(s){let $={iceServers:[]};return s.iceServers?$.iceServers=s.iceServers:s.turnServer&&s.turnServer.mode!=="off"&&(Pm(s.turnServer.servers)?$.iceServers=s.turnServer.servers:($.iceServers&&$.iceServers.push(...Jo.turnServerConfigToIceServers(s.turnServer.servers)),Ft("USE_TURN_SERVER_OF_GATEWAY")&&$.iceServers&&s.turnServer.serversFromGateway&&$.iceServers.push(...Jo.turnServerConfigToIceServers(s.turnServer.serversFromGateway)),Ft("FORCE_TURN_TCP")?$.iceTransportPolicy="relay":s.turnServer.servers.concat(s.turnServer.serversFromGateway||[]).forEach(_e=>{_e.forceturn&&($.iceTransportPolicy="relay")}))),$}static turnServerConfigToIceServers(s){let $=[];return s.forEach(_e=>{_e.security?_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turns:".concat(up(_e.turnServerURL),":").concat(_e.tcpport,"?transport=tcp")}):(_e.udpport&&!Ft("FORCE_TURN_TCP")&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.udpport,"?transport=udp")}),_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.tcpport,"?transport=tcp")}))}),$}async applySendEncodings(s,$){try{if(!vr().supportSetRtpSenderParameters||s.length!==$.length)return;for(let pt=0;pt<s.length;pt++){let mt=s[pt],yt=$[pt];if(yt&&yt instanceof Hn){var _e,tt,rt;if(this.isVP8Simulcast(yt))continue;let At={},Ct={};switch(yt._optimizationMode){case"motion":At.degradationPreference="maintain-framerate";break;case"detail":At.degradationPreference="maintain-resolution";break;default:At.degradationPreference="balanced"}var it,at,ct,dt;if((_e=yt._encoderConfig)!==null&&_e!==void 0&&_e.bitrateMax&&(Ct.maxBitrate=1e3*((it=yt._encoderConfig)===null||it===void 0?void 0:it.bitrateMax)),vn(tt=yt._hints).call(tt,wr.LOW_STREAM)&&((at=yt._encoderConfig)!==null&&at!==void 0&&at.frameRate&&(Ct.maxFramerate=Js(yt._encoderConfig.frameRate)),(ct=yt._encoderConfig)!==null&&ct!==void 0&&ct.scaleResolutionDownBy&&((dt=yt._encoderConfig)===null||dt===void 0?void 0:dt.scaleResolutionDownBy)>1&&(Ct.scaleResolutionDownBy=yt._encoderConfig.scaleResolutionDownBy)),Ft("DSCP_TYPE")&&tp()){var ut;let Vt=Ft("DSCP_TYPE");vn(ut=["very-low","low","medium","high"]).call(ut,Vt)&&(Ct.networkPriority=Vt)}let It=mt.sender.getParameters(),kt=(rt=It.encodings)===null||rt===void 0?void 0:rt[0];br()&&!kt&&(At.encodings=[Ct]),kt&&Object.assign(kt,Ct),Object.assign(It,At),await mt.sender.setParameters(It)}}}catch{Et.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(s,$,_e){let tt=jr.parse(s);return $.forEach((rt,it)=>{let at=_e[it],ct=tt.mediaDescriptions.find(dt=>dt.attributes.mid===at);ct&&(Tp(ct,rt),cv(ct,rt,this.store.codec))}),jr.print(tt)}mungReceiveAnswerSDP(s,$,_e){let tt=jr.parse(s),rt=tt.mediaDescriptions.find(it=>it.attributes.mid===$);return rt&&_e===Cn.AUDIO&&rt.media.mediaType==="audio"&&su(rt),this.useXR&&h0(tt),jr.print(tt)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=s=>{var $;($=this.onFirstAudioReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoReceived=s=>{var $;($=this.onFirstVideoReceived)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstAudioDecoded=s=>{var $;($=this.onFirstAudioDecoded)===null||$===void 0||$.call(this,s)},this.statsFilter.onFirstVideoDecoded=(s,$,_e)=>{var tt;(tt=this.onFirstVideoDecoded)===null||tt===void 0||tt.call(this,s,$,_e)},this.statsFilter.onSelectedLocalCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedLocalCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onSelectedRemoteCandidateChanged=(s,$)=>{var _e;(_e=this.onSelectedRemoteCandidateChanged)===null||_e===void 0||_e.call(this,s,$)},this.statsFilter.onFirstVideoDecodedTimeout=s=>{var $;($=this.onFirstVideoDecodedTimeout)===null||$===void 0||$.call(this,s)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(s,$){if(s.length===$.length)for(let ct=0;ct<s.length;ct++){var _e,tt,rt,it,at;let dt=s[ct],ut=$[ct];if(ut instanceof Hn&&!vn(_e=ut._hints).call(_e,wr.LOW_STREAM)&&(tt=ut._encoderConfig)!==null&&tt!==void 0&&tt.bitrateMax&&((rt=ut._encoderConfig)===null||rt===void 0?void 0:rt.bitrateMax)>200&&(it=ut._scalabilityMode)!==null&&it!==void 0&&it.numSpatialLayers&&((at=ut._scalabilityMode)===null||at===void 0?void 0:at.numSpatialLayers)>1&&this.store.codec==="vp8"){let pt={},mt={high:1e3*(ut._encoderConfig.bitrateMax-50),medium:5e4};pt.encodings=[{rid:"m",active:!0,maxBitrate:mt.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:mt.high}];let yt=dt.sender.getParameters();await dt.sender.setParameters(Object.assign(yt,pt))}}}async applySimulcastEncodings(s,$){if(!br()&&s.length===$.length)for(let _e=0;_e<s.length;_e++){let tt=$[_e];if(tt instanceof Hn&&this.isVP8Simulcast(tt)){let rt=s[_e],it={},at={high:1e3*(tt._encoderConfig.bitrateMax-50),medium:5e4};it.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:at.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:at.medium,scaleResolutionDownBy:4}];let ct=rt.sender.getParameters();await rt.sender.setParameters(Object.assign(ct,it))}}}isVP8Simulcast(s){var $,_e,tt,rt,it;return!!(s instanceof Hn&&Ft("SIMULCAST")&&this.store.codec==="vp8"&&!vn($=s._hints).call($,wr.LOW_STREAM)&&(_e=s._encoderConfig)!==null&&_e!==void 0&&_e.bitrateMax&&((tt=s._encoderConfig)===null||tt===void 0?void 0:tt.bitrateMax)>200&&(rt=s._scalabilityMode)!==null&&rt!==void 0&&rt.numSpatialLayers&&((it=s._scalabilityMode)===null||it===void 0?void 0:it.numSpatialLayers)>1)}logSDPExchange(s,$,_e,tt){if(Ft("SDP_LOGGING"))return Et.upload("exchanging ".concat(_e," ").concat($," SDP during NVExtentionsConnection.").concat(tt,`
`),s),$==="offer"?rt=>{this.logSDPExchange(rt,"answer",_e==="local"?"remote":"local",tt)}:void 0}async getRemoteSSRC(s){if(!this.remoteSDP)return;let $=this.remoteSDP.getSSRC(s);return $==null?void 0:$[0].ssrcId}setConfiguration(s){if(vr().supportPCSetConfiguration){let $=Jo.resolvePCConfiguration(s);this.peerConnection.setConfiguration($)}}}function xs(j,s,$){let _e=j[s];if(typeof _e!="function")throw new Error("Cannot use mutex on object property.");return $.value=async function(){let tt=this.mutex,rt=await tt.lock("From NVExtentionsConnection.".concat(s));try{for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];return await _e.apply(this,at)}finally{rt()}},$}function yO(j){var s,$,_e,tt=2;for(typeof Symbol<"u"&&($=aO,_e=Symbol.iterator);tt--;){if($&&(s=j[$])!=null)return s.call(j);if(_e&&(s=j[_e])!=null)return new xE(s.call(j));$="@@asyncIterator",_e="@@iterator"}throw new TypeError("Object is not async iterable")}function xE(j){function s($){if(Object($)!==$)return Jt.reject(new TypeError($+" is not an object."));var _e=$.done;return Jt.resolve($.value).then(function(tt){return{value:tt,done:_e}})}return xE=function($){this.s=$,this.n=$.next},xE.prototype={s:null,n:null,next:function(){return s(this.n.apply(this.s,arguments))},return:function($){var _e=this.s.return;return _e===void 0?Jt.resolve({value:$,done:!0}):s(_e.apply(this.s,arguments))},throw:function($){var _e=this.s.return;return _e===void 0?Jt.reject($):s(_e.apply(this.s,arguments))}},new xE(j)}on([xs,bt("design:type",Function),bt("design:paramtypes",[Object,Object,Array,Object,String,String]),bt("design:returntype",Jt)],Jo.prototype,"connect",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Array,Array]),bt("design:returntype",Jt)],Jo.prototype,"updateRemoteRTPCapabilities",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],Jo.prototype,"updateRemoteConnect",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Object,Array]),bt("design:returntype",Jt)],Jo.prototype,"createDataChannels",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[String,Array,String,Object]),bt("design:returntype",Jt)],Jo.prototype,"receive",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jo.prototype,"batchReceive",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jo.prototype,"stopReceiving",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Jo.prototype,"muteRemote",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Jo.prototype,"unmuteRemote",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jo.prototype,"muteLocal",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Jo.prototype,"unmuteLocal",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Jo.prototype,"close",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Jo.prototype,"updateEncoderConfig",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Jo.prototype,"updateSendParameters",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[Yo,String]),bt("design:returntype",Jt)],Jo.prototype,"replaceTrack",null),on([xs,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Jo.prototype,"getRemoteSSRC",null);class Ao extends B_{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get localCodecs(){return this._p2pConnection.localCodecs}constructor(s,$){super(s,$),gt(this,"store",void 0),gt(this,"peerConnection",void 0),gt(this,"cname",void 0),gt(this,"mutex",new Lo("DataChannelConnection-mutex")),gt(this,"dataChannel",void 0),gt(this,"_p2pConnection",void 0),gt(this,"establishPromise",void 0),gt(this,"_nvMedia",void 0),this.store=$,this.store.dcId=this.store.dcId+1,this.peerConnection=new RTCPeerConnection(Ao.resolvePCConfiguration(s),{optional:[{googDscp:!0}]}),this.dataChannel=this.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),this.dataChannel.binaryType="arraybuffer",this._p2pConnection=new Jo(s,$,this.peerConnection),this.bindPCEvents(),this.establishPromise=this._p2pConnection.establishPromise}async establish(){var s;let $=(s=this._nvMedia)===null||s===void 0?void 0:s.getLocalRtpCapabilities();return await this._p2pConnection.establish($)}getP2PConnectionParams(){return this._p2pConnection.getP2PConnectionParams()}async connect(s,$,_e,tt,rt,it){return this.cname=it,await this._p2pConnection.connect(s,$,_e,tt,rt,it),await new Jt((at,ct)=>{let dt=setTimeout(()=>{this.closeSignal(),ct(new Wt(Nt.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(_e))))},2e3);this.dataChannel.onopen=()=>{if(this.dataChannel.readyState==="open")return clearTimeout(dt),void at()},this.dataChannel.onerror=ut=>{this.closeSignal(),ct(ut)}}),{transmitter:this.dataChannel,close:this.closeSignal.bind(this)}}async updateRemoteRTPCapabilities(s,$){return this._p2pConnection.updateRemoteRTPCapabilities(s,$)}send(s,$,_e){var tt=this;return Fs(function*(){let rt=yield Bn(tt.mutex.lock("From DataChannelConnection.send"));try{return yield*OE(yO(tt._p2pConnection.send(s,$,_e)))}finally{rt()}})()}async stopSending(s,$){return this._p2pConnection.stopSending(s,$)}async createDataChannels(s,$){return this._p2pConnection.createDataChannels(s,$)}async stopDataChannels(s){return this._p2pConnection.stopDataChannels(s)}async receive(s,$,_e,tt){return this._nvMedia?(Et.debug("[DataChannelConnection] receive ".concat(s," by DataChannel.")),await this._nvMedia.reveiveByRTCMedia(s,$,this.cname)):(Et.debug("[DataChannelConnection] receive ".concat(s," by WebRTC.")),await this._p2pConnection.receive(s,$,_e,tt))}async batchReceive(s){return[...await this._p2pConnection.batchReceive(s)]}async stopReceiving(s){return await this._p2pConnection.stopReceiving(s)}async muteRemote(s){return await this._p2pConnection.muteRemote(s)}async unmuteRemote(s){return await this._p2pConnection.unmuteRemote(s)}async muteLocal(s){return await this._p2pConnection.muteLocal(s)}async unmuteLocal(s){return await this._p2pConnection.unmuteLocal(s)}restartICE(s){var $=this;return Fs(function*(){return yield*OE(yO($._p2pConnection.restartICE(s)))})()}close(){var s;(s=this._nvMedia)===null||s===void 0||s.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}getStats(){return this._p2pConnection.getStats()}getRemoteVideoIsReady(s){return this._p2pConnection.getRemoteVideoIsReady(s)}updateRemoteConnect(s){var $;($=this._nvMedia)===null||$===void 0||$.setRemoteRtpCapabilities(s),this._p2pConnection.updateRemoteConnect(s)}async updateEncoderConfig(s,$){return await this._p2pConnection.updateEncoderConfig(s,$)}async updateSendParameters(s,$){return await this._p2pConnection.updateSendParameters(s,$)}setStatsRemoteVideoIsReady(s,$){this._p2pConnection.setStatsRemoteVideoIsReady(s,$)}async replaceTrack(s,$){return await this._p2pConnection.replaceTrack(s,$)}async getRemoteSSRC(s){return this._p2pConnection.getRemoteSSRC(s)}logSDPExchange(s,$,_e,tt){if(Ft("SDP_LOGGING"))return Et.upload("exchanging ".concat(_e," ").concat($," SDP during DataChannelConnection.").concat(tt,`
`),s),$==="offer"?rt=>{this.logSDPExchange(rt,"answer",_e==="local"?"remote":"local",tt)}:void 0}static resolvePCConfiguration(s){let $={iceServers:[]};return s.iceServers?$.iceServers=s.iceServers:s.turnServer&&s.turnServer.mode!=="off"&&(Pm(s.turnServer.servers)?$.iceServers=s.turnServer.servers:($.iceServers&&$.iceServers.push(...Ao.turnServerConfigToIceServers(s.turnServer.servers)),Ft("USE_TURN_SERVER_OF_GATEWAY")&&$.iceServers&&s.turnServer.serversFromGateway&&$.iceServers.push(...Ao.turnServerConfigToIceServers(s.turnServer.serversFromGateway)),Ft("FORCE_TURN_TCP")?$.iceTransportPolicy="relay":s.turnServer.servers.concat(s.turnServer.serversFromGateway||[]).forEach(_e=>{_e.forceturn&&($.iceTransportPolicy="relay")}))),$}static turnServerConfigToIceServers(s){let $=[];return s.forEach(_e=>{_e.security?_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turns:".concat(up(_e.turnServerURL),":").concat(_e.tcpport,"?transport=tcp")}):(_e.udpport&&!Ft("FORCE_TURN_TCP")&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.udpport,"?transport=udp")}),_e.tcpport&&$.push({username:_e.username,credential:_e.password,credentialType:"password",urls:"turn:".concat(_e.turnServerURL,":").concat(_e.tcpport,"?transport=tcp")}))}),$}bindPCEvents(){this._p2pConnection.onICEConnectionStateChange=s=>{var $;return($=this.onICEConnectionStateChange)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onConnectionStateChange=s=>{var $;return($=this.onConnectionStateChange)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onDTLSTransportStateChange=s=>{var $;return($=this.onDTLSTransportStateChange)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onDTLSTransportError=s=>{var $;return($=this.onDTLSTransportError)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onICETransportStateChange=s=>{var $;return($=this.onICETransportStateChange)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onFirstAudioReceived=s=>{var $;return($=this.onFirstAudioReceived)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onFirstVideoReceived=s=>{var $;return($=this.onFirstVideoReceived)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onFirstAudioDecoded=s=>{var $;return($=this.onFirstAudioDecoded)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onFirstVideoDecoded=(s,$,_e)=>{var tt;return(tt=this.onFirstVideoDecoded)===null||tt===void 0?void 0:tt.call(this,s,$,_e)},this._p2pConnection.onFirstVideoDecodedTimeout=s=>{var $;return($=this.onFirstVideoDecodedTimeout)===null||$===void 0?void 0:$.call(this,s)},this._p2pConnection.onSelectedLocalCandidateChanged=(s,$)=>{var _e;return(_e=this.onSelectedLocalCandidateChanged)===null||_e===void 0?void 0:_e.call(this,s,$)},this._p2pConnection.onSelectedRemoteCandidateChanged=(s,$)=>{var _e;return(_e=this.onSelectedRemoteCandidateChanged)===null||_e===void 0?void 0:_e.call(this,s,$)}}closeSignal(){this.dataChannel.close(),this.peerConnection.close()}unbindConnectionEvents(s){s.onConnectionStateChange=void 0,s.onICEConnectionStateChange=void 0,s.onICETransportStateChange=void 0,s.onDTLSTransportStateChange=void 0,s.onDTLSTransportError=void 0,s.onFirstAudioDecoded=void 0,s.onFirstAudioReceived=void 0,s.onFirstVideoDecoded=void 0,s.onFirstVideoReceived=void 0,s.onSelectedLocalCandidateChanged=void 0,s.onSelectedRemoteCandidateChanged=void 0,s.onFirstVideoDecodedTimeout=void 0}setConfiguration(s){this._p2pConnection.setConfiguration(s)}}function _c(j,s,$){let _e=j[s];if(typeof _e!="function")throw new Error("Cannot use mutex on object property.");return $.value=async function(){let tt=this.mutex,rt=await tt.lock("From DataChannelConnection.".concat(s));try{for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];return await _e.apply(this,at)}finally{rt()}},$}function SO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Rp(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?SO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):SO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}function TO(j){var s,$,_e,tt=2;for(typeof Symbol<"u"&&($=aO,_e=Symbol.iterator);tt--;){if($&&(s=j[$])!=null)return s.call(j);if(_e&&(s=j[_e])!=null)return new LE(s.call(j));$="@@asyncIterator",_e="@@iterator"}throw new TypeError("Object is not async iterable")}function LE(j){function s($){if(Object($)!==$)return Jt.reject(new TypeError($+" is not an object."));var _e=$.done;return Jt.resolve($.value).then(function(tt){return{value:tt,done:_e}})}return LE=function($){this.s=$,this.n=$.next},LE.prototype={s:null,n:null,next:function(){return s(this.n.apply(this.s,arguments))},return:function($){var _e=this.s.return;return _e===void 0?Jt.resolve({value:$,done:!0}):s(_e.apply(this.s,arguments))},throw:function($){var _e=this.s.return;return _e===void 0?Jt.reject($):s(_e.apply(this.s,arguments))}},new LE(j)}on([_c,bt("design:type",Function),bt("design:paramtypes",[Object,Object,Array,Object,String,String]),bt("design:returntype",Jt)],Ao.prototype,"connect",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[Array,Array]),bt("design:returntype",Jt)],Ao.prototype,"updateRemoteRTPCapabilities",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[Object,Array]),bt("design:returntype",Jt)],Ao.prototype,"createDataChannels",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[String,Array,String,Object]),bt("design:returntype",Jt)],Ao.prototype,"receive",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Ao.prototype,"stopReceiving",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Ao.prototype,"muteRemote",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Ao.prototype,"unmuteRemote",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Ao.prototype,"muteLocal",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Ao.prototype,"unmuteLocal",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Ao.prototype,"close",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Ao.prototype,"updateEncoderConfig",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[String,Yo]),bt("design:returntype",Jt)],Ao.prototype,"updateSendParameters",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[Yo,String]),bt("design:returntype",Jt)],Ao.prototype,"replaceTrack",null),on([_c,bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],Ao.prototype,"getRemoteSSRC",null);class Uo extends Fr{get state(){return this._state}set state(s){let $=this._state;this._state=s,this.emit(kn.StateChange,$,this._state)}constructor(s,$){super(),gt(this,"store",void 0),gt(this,"statsUploader",void 0),gt(this,"connection",void 0),gt(this,"localTrackMap",new Map),gt(this,"remoteUserMap",new Map),gt(this,"localDataChannels",[]),gt(this,"remoteDataChannelMap",new Map),gt(this,"pendingLocalTracks",[]),gt(this,"pendingRemoteTracks",[]),gt(this,"pendingLocalDataChannels",[]),gt(this,"pendingRemoteDataChannels",[]),gt(this,"statsCollector",void 0),gt(this,"isPlanB",!1),gt(this,"shouldForwardP2PCreation",void 0),gt(this,"iceFailedCount",0),gt(this,"dtlsFailedCount",0),gt(this,"mutex",new Lo("P2PChannel-mutex")),gt(this,"_state",mr.Disconnected),gt(this,"_pcStatsUploadType",Ft("NEW_ICE_RESTART")?ou.FIRST_CONNECTION:ou.OLD_FIRST_CONNECTION),gt(this,"_isInRestartIce",!1),gt(this,"_isStartRestartIce",!1),gt(this,"_restartStates",["disconnected","failed"]),gt(this,"_restartTimer",void 0),gt(this,"_isFirstConnected",!0),gt(this,"handleMuteLocalTrack",async(_e,tt,rt)=>{let it=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==mr.Connected)return void rt(new rn(Nt.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));let at=this.filterTobeMutedTracks(_e);if(at.length===0)return void tt();let ct=at.find(ut=>ut[0]==="videoLowTrack");ct&&ct[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(at.map(ut=>{let[,{id:pt}]=ut;return pt}));let dt=this.createMuteMessage(at);await Rr(this,kn.RequestMuteLocal,dt),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleUnmuteLocalTrack",async(_e,tt,rt)=>{let it=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==mr.Connected)return void rt(new rn(Nt.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));let at=this.filterTobeUnmutedTracks(_e);if(at.length===0)return void tt();let ct=at.find(ut=>ut[0]==="videoLowTrack");if(ct){let ut=ct[1];if(ut.track._originMediaStreamTrack.stop(),!Ft("DISABLE_DUAL_STREAM_USE_ENCODING")&&vr().supportDualStreamEncoding){let pt=_e._mediaStreamTrack.clone();ut.track._mediaStreamTrack=pt,ut.track._originMediaStreamTrack=pt}else{let pt=dv(_e,Gp(this,kn.RequestLowStreamParameter));ut.track._mediaStreamTrack=pt,ut.track._originMediaStreamTrack=pt}await new Jt((pt,mt)=>{this.handleReplaceTrack(ut.track,pt,mt,!0)})}await this.connection.unmuteLocal(at.map(ut=>{let[,{id:pt}]=ut;return pt}));let dt=this.createUnmuteMessage(at);await Rr(this,kn.RequestUnmuteLocal,dt),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleUpdateVideoEncoder",async(_e,tt,rt)=>{let it=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{let at=this.localTrackMap.get(an.LocalVideoTrack);if(!this.connection||!at||at.track!==_e||this.state!==mr.Connected)return void tt();let{id:ct,track:dt}=at;await this.connection.updateSendParameters(ct,dt),await this.connection.updateEncoderConfig(ct,dt),this.emit(kn.UpdateVideoEncoder,dt),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleSetOptimizationMode",async(_e,tt,rt)=>{let it=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{let at=this.localTrackMap.get(an.LocalVideoTrack);if(!this.connection||!at||at.track!==_e||this.state!==mr.Connected)return;let{id:ct,track:dt}=at;await this.connection.updateSendParameters(ct,dt),tt()}catch(at){rt(at)}finally{it()}}),gt(this,"handleReplaceTrack",async(_e,tt,rt,it)=>{let at;Et.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(_e.getTrackId(),"]")),typeof it=="boolean"&&it||(at=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var ct;let ut=Array.from(this.localTrackMap.entries()).find(pt=>{let[,{track:mt}]=pt;return _e===mt});if(!this.connection||!ut||this.state!==mr.Connected)return void tt();if(await((ct=this.connection)===null||ct===void 0?void 0:ct.replaceTrack(_e,ut[1].id)),this.isPlanB){let pt=ut[1];pt.id=_e._mediaStreamTrack.id,this.localTrackMap.set(ut[0],pt)}if(ut[0]===an.LocalVideoTrack&&!Ft("DISABLE_DUAL_STREAM_USE_ENCODING")&&vr().supportDualStreamEncoding){let pt=this.localTrackMap.get(an.LocalVideoLowTrack);if(pt){let mt=_e._mediaStreamTrack.clone();pt.track._originMediaStreamTrack.stop(),pt.track._mediaStreamTrack=mt,pt.track._originMediaStreamTrack=mt,await new Jt((yt,At)=>{this.handleReplaceTrack(pt.track,yt,At,!0)})}}tt()}catch(ut){rt(ut)}finally{var dt;(dt=at)===null||dt===void 0||dt()}}),gt(this,"handleGetRTCStats",_e=>{_e(this.statsCollector.getRTCStats())}),gt(this,"handleGetLocalVideoStats",_e=>{_e(this.statsCollector.getLocalVideoTrackStats())}),gt(this,"handleGetLocalAudioStats",_e=>{_e(this.statsCollector.getLocalAudioTrackStats())}),gt(this,"handleGetRemoteVideoStats",_e=>this.statsCollector.getRemoteVideoTrackStats(_e.uid)[_e.uid]),gt(this,"handleGetRemoteAudioStats",_e=>this.statsCollector.getRemoteAudioTrackStats(_e.uid)[_e.uid]),this.store=s,this.statsCollector=$,this.statsCollector.addP2PChannel(this),this.statsUploader=new tO(this.store),this.bindStatsUploaderEvents(),this.isPlanB=!vr().supportUnifiedPlan||Ft("CHROME_FORCE_PLAN_B")&&tp(),this.shouldForwardP2PCreation=Ft("FORWARD_P2P_CREATION")&&vr().supportPCSetConfiguration&&function(){let _e=__();return _e===To.ANDROID||_e===To.IOS||_e===To.HARMONY_OS}(),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Ao({},this.store):this.isPlanB?new Mo({},this.store):new Jr({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(s,$){var _e;this.state=mr.New;let tt=this.shouldForwardP2PCreation&&((_e=this.connection)===null||_e===void 0?void 0:_e.peerConnectionState)==="closed";if(this.shouldForwardP2PCreation&&!tt||(tt&&this.connection&&(Et.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new Ao(s,this.store):this.isPlanB?new Mo(s,this.store):new Jr(s,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=Ft("NEW_ICE_RESTART")?ou.FIRST_CONNECTION:ou.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(s),this.connection.establishPromise}async connect(s,$,_e,tt,rt,it){if(!this.connection)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.connection instanceof Ao?this.connection.updateRemoteConnect(tt):(this.store.peerConnectionStart(),await this.connection.connect(s,$,_e,tt,rt,it),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=mr.Connected)}updateRemoteRTPCapabilities(s){let $=Array.from(this.localTrackMap.entries()).filter(rt=>{var it;let[at]=rt;return vn(it=[an.LocalVideoLowTrack,an.LocalVideoTrack]).call(it,at)}),_e=$.map(rt=>{let[,{id:it}]=rt;return it}),tt=$.map(rt=>{let[it]=rt;return it});if(this.connection instanceof Jr){if(An.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(tt),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(s)}),!vn(s).call(s,this.store.codec)){let rt=["vp8","h264"].find(it=>vn(s).call(s,it));rt&&(this.store.codec=rt,Et.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(rt,".")))}this.connection.updateRemoteRTPCapabilities(_e,s)}}async preConnect(s,$,_e,tt,rt,it){if(!this.connection)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");this.store.peerConnectionStart();let at=await this.connection.connect(s,$,_e,tt,rt,it);return this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=mr.Connected,at}getEstablishParams(){if(this.connection instanceof Ao)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}async publishDataChannel(s){if(!this.connection){if(this.state===mr.Disconnected)throw new rn(Nt.UNEXPECTED_ERROR,"PeerConnection already disconnected.");let _e=s.filter(tt=>this.pendingLocalDataChannels.findIndex(rt=>rt.id===tt.id)!==-1);return void(this.pendingLocalDataChannels=this.pendingLocalDataChannels.concat(_e))}let $=this.filterTobePublishedDataChannels(s);$.length!==0&&($.forEach(_e=>{let tt=Date.now();this.store.publish(_e.id.toString(),"datachannel",tt)}),await this.connection.createDataChannels(this.store.uid,$),$.forEach(_e=>{this.localDataChannels.push(_e);let tt=Date.now();this.store.publish(_e.id+"","datachannel",void 0,tt)}))}publish(s,$,_e){var tt=this;return Fs(function*(){let rt=yield Bn(tt.mutex.lock("From P2PChannel.publish"));try{if(!tt.connection||tt.state!==mr.Connected){if(tt.state===mr.Disconnected)throw new rn(Nt.UNEXPECTED_ERROR,"PeerConnection already disconnected.");tt.throwIfTrackTypeNotMatch(s);let at=s.filter(ct=>tt.pendingLocalTracks.indexOf(ct)===-1);return void(tt.pendingLocalTracks=tt.pendingLocalTracks.concat(at))}tt.store.pubId=tt.store.pubId+1,qo.markPublishStart(tt.store.clientId,tt.store.pubId);let it=tt.filterTobePublishedTracks(s,$,_e);if(it.length===0)return void(yield Bn(tt.tryToUnmuteAudio(s)));yield*OE(TO(tt.doPublish(tt.connection,it)))}finally{rt()}})()}doPublish(s,$){var _e=this;return Fs(function*(){$.forEach(ut=>{let{track:pt,type:mt}=ut,yt=Date.now();_e.store.publish(pt.getTrackId(),mt===an.LocalAudioTrack?"audio":"video",yt)}),_e.bindLocalTrackEvents($);let tt=yield Bn(s.send($.map(ut=>{let{track:pt}=ut;return pt}),_e.store.codec,_e.store.audioCodec)),rt=(yield Bn(tt.next())).value,it=_e.createGatewayPublishMessage($,rt),at;try{at=yield it}catch(ut){throw tt.throw(ut),(ut==null?void 0:ut.code)===Nt.WS_ABORT&&$.forEach(pt=>{let{track:mt}=pt;_e.pendingLocalTracks.indexOf(mt)===-1&&_e.pendingLocalTracks.push(mt)}),_e.unbindLocalTrackEvents($),ut}let ct=_e.mapPubResToRemoteConfig(it,at),dt=(yield Bn(tt.next(ct))).value;$.forEach(ut=>{let{type:pt}=ut;_e.statsCollector.addLocalStats(pt)}),_e.assignLocalTracks($,dt),_e.statsUploader.startUploadOutboundStats(),$.forEach(ut=>{let{track:pt,type:mt}=ut,yt=Date.now();_e.store.publish(pt.getTrackId(),mt===an.LocalAudioTrack?"audio":"video",void 0,yt)})})()}async updateVideoStreamParameter(s,$){let _e=this.localTrackMap.get($);if(!_e)return;if(!(_e.track instanceof Hn))return Et.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof Jr||this.connection instanceof Mo))return Et.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");let{track:tt}=_e,rt=function(it,at){let ct={};return it.height&&it.width&&(ct.scaleResolutionDownBy=oT(it,at)),ct.maxFramerate=it.framerate?Js(it.framerate):void 0,ct.maxBitrate=it.bitrate?1e3*it.bitrate:void 0,ct}(s,tt);if(tt._encoderConfig||(tt._encoderConfig={}),$!==an.LocalVideoLowTrack||!Ft("DISABLE_DUAL_STREAM_USE_ENCODING")&&vr().supportDualStreamEncoding)rt.scaleResolutionDownBy!=null&&(tt._encoderConfig.scaleResolutionDownBy=rt.scaleResolutionDownBy);else{let it=tt._originMediaStreamTrack;if(!it.canvas)return Et.warn("[".concat(tt.getTrackId(),"] no canvas on track"));(function(at,ct){let dt=at.canvas;ct.width&&(dt.width=Js(ct.width)),ct.height&&(dt.height=Js(ct.height)),ct.framerate&&(dt.stopCapture&&dt.stopCapture(),dt.stopCapture=vT(()=>{!dt.startCapture&&dt.stopCapture&&dt.stopCapture(),dt.startCapture&&dt.startCapture()},Js(ct.framerate)))})(it,s)}rt.maxBitrate!=null&&(tt._encoderConfig.bitrateMax=rt.maxBitrate/1e3),rt.maxFramerate!=null&&(tt._encoderConfig.frameRate&&typeof tt._encoderConfig.frameRate=="object"?tt._encoderConfig.frameRate.max=rt.maxFramerate:tt._encoderConfig.frameRate={max:rt.maxFramerate}),Et.debug("[".concat(tt.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(tt._encoderConfig))),await this.connection.updateRtpSenderEncodings(tt)}publishLowStream(s){var $=this;return Fs(function*(){if(!$.connection||$.state!==mr.Connected)return;let _e=yield Bn($.mutex.lock("Locking from P2PChannel.publishLowStream"));try{let rt=$.localTrackMap.get(an.LocalVideoTrack);if(!rt)throw new rn(Nt.UNEXPECTED_ERROR,"Could not find high stream");if($.localTrackMap.has(an.LocalVideoLowTrack))throw new rn(Nt.UNEXPECTED_ERROR,"[".concat($.store.clientId,"] Can't publish low stream when stream already publish"));let it=[{track:$.getLowVideoTrack(rt.track,s),type:an.LocalVideoLowTrack}];if(yield*OE(TO($.doPublish($.connection,it))),rt.track.muted||!rt.track.enabled){var tt;let at=(tt=$.localTrackMap.get(an.LocalVideoLowTrack))===null||tt===void 0?void 0:tt.id;at!==void 0&&(yield Bn($.connection.muteLocal([at])))}}finally{_e()}})()}async republish(){this.pendingLocalTracks.length>0&&(Et.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await lo(this,kn.RequestRePublish,this.pendingLocalTracks),this.emit(kn.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(Et.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await lo(this,kn.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(s){for(let $=this.pendingRemoteTracks.length-1;$>=0;$--){let{user:_e,kind:tt}=this.pendingRemoteTracks[$];(tt!==Cn.AUDIO||_e._audio_added_&&_e._audioSSRC)&&(tt!==Cn.VIDEO||_e._video_added_&&_e._videoSSRC)||this.pendingRemoteTracks.splice($,1)}if(s)await lo(this,kn.RequestReSubscribe,this.pendingRemoteTracks);else for(let{user:$,kind:_e}of this.pendingRemoteTracks)await this.subscribe($,_e,_e===Cn.VIDEO?$._videoSSRC:$._audioSSRC);this.pendingRemoteTracks.forEach($=>{let{user:_e}=$;this.emit(kn.MediaReconnectEnd,_e.uid)}),this.pendingRemoteTracks=[]}async unpublish(s){if(!this.connection||this.state!==mr.Connected)return void s.forEach(tt=>{let rt=this.pendingLocalTracks.indexOf(tt);rt!==-1&&this.pendingLocalTracks.splice(rt,1)});let $=this.filterTobeUnpublishedTracks(s);if($.length===0)return;let _e=$.find(tt=>tt[0]==="videoLowTrack");return _e&&_e[1].track.close(),this.doUnpublish(this.connection,$)}async unpublishDataChannel(s){if(!this.connection||this.state!==mr.Connected)return void s.forEach(_e=>{let tt=this.pendingLocalDataChannels.indexOf(_e);tt!==-1&&this.pendingLocalDataChannels.splice(tt,1)});let $=this.filterTobeUnpublishedDataChannels(s);return $.length!==0?($.forEach(_e=>{let tt=this.localDataChannels.indexOf(_e);tt!==-1&&this.localDataChannels.splice(tt,1)}),this.localDataChannels.length===0&&await this.connection.stopDataChannels(this.store.uid),$.map(_e=>_e.id)):void 0}async unpublishLowStream(){if(!this.connection||this.state!==mr.Connected)return;let s=this.localTrackMap.get(an.LocalVideoLowTrack);if(!s)return;s.track.close();let $=[[an.LocalVideoLowTrack,s]];return this.doUnpublish(this.connection,$)}async doUnpublish(s,$){let _e=this.createGatewayUnpublishMessage($);return await s.stopSending($.map(tt=>{let[,{id:rt}]=tt;return rt})),this.withdrawLocalTracks($),this.unbindLocalTrackEvents($.map(tt=>{let[rt,{track:it}]=tt;return{type:rt,track:it}})),$.forEach(tt=>{let[rt]=tt;this.statsCollector.removeLocalStats(rt)}),this.localTrackMap.size===0&&this.statsUploader.stopUploadOutboundStats(),_e}async subscribeDataChannel(s,$){if(!this.connection||this.state!==mr.Connected)throw new rn(Nt.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");let _e=$.filter(tt=>{var rt;return!((rt=this.remoteDataChannelMap.get(s))!==null&&rt!==void 0&&rt.get(tt.id))});if(_e.length!==0)return await this.connection.createDataChannels(s.uid,_e),_e.forEach(tt=>{var rt;this.remoteDataChannelMap.has(s)?(rt=this.remoteDataChannelMap.get(s))===null||rt===void 0||rt.set(tt.id,tt):this.remoteDataChannelMap.set(s,new Map([[tt.id,tt]]));let it=this.pendingRemoteDataChannels.findIndex(at=>{let{user:ct,id:dt}=at;return ct.uid===s.uid&&dt===tt.id});it!==-1&&this.pendingRemoteDataChannels.splice(it,1)}),_e.map(tt=>tt.id)}async subscribe(s,$,_e,tt,rt){var it;if(!this.connection||this.state!==mr.Connected)throw new rn(Nt.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if((it=this.remoteUserMap.get(s))!==null&&it!==void 0&&it.has($))return;let at,ct,dt;if(rt){let mt=rt.find(At=>{let{stream_type:Ct}=At;return Ct===$});if(!mt)throw new rn(Nt.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat($," for user: ").concat(s.uid," because subscribe answer from gateway does not contain stream_type: ").concat($,"."));let yt=await this.connection.receive($,mt.ssrcs,String(s._uintid),mt.attributes);this.connection instanceof Jr&&(dt=yt.transceiver),at=yt.track,ct=yt.id}else{let mt=await this.connection.receive($,[{ssrcId:_e,rtx:tt}],String(s._uintid),void 0);this.connection instanceof Jr&&(dt=mt.transceiver),at=mt.track,ct=mt.id}$===Cn.AUDIO?(s._audioTrack?s._audioTrack._updateOriginMediaStreamTrack(at):(s._audioTrack=new zl(at,s.uid,s._uintid,this.store),Et.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(s._audioTrack.getTrackId()))),dt&&s._audioTrack._updateRtpTransceiver(dt),this.bindRemoteTrackEvents(s,s._audioTrack)):(s._videoTrack?s._videoTrack._updateOriginMediaStreamTrack(at):(s._videoTrack=new _u(at,s.uid,s._uintid,this.store),Et.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(s._videoTrack.getTrackId()))),dt&&s._videoTrack._updateRtpTransceiver(dt),this.bindRemoteTrackEvents(s,s._videoTrack));let ut=this.remoteUserMap.get(s);ut?ut.set($,ct):this.remoteUserMap.set(s,new Map([[$,ct]])),this.statsCollector.addRemoteStats(s.uid),this.statsUploader.startUploadInboundStats();let pt=this.pendingRemoteTracks.findIndex(mt=>{let{user:yt,kind:At}=mt;return yt.uid===s.uid&&$===At});pt!==-1&&(this.pendingRemoteTracks.splice(pt,1),this.emit(kn.MediaReconnectEnd,s.uid))}async massSubscribe(s){return this.massSubscribeNoLock(s)}async massSubscribeNoLock(s){if(!this.connection||this.state!==mr.Connected)throw new rn(Nt.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");s=s.filter(_e=>{var tt;let{user:rt,mediaType:it}=_e;return!((tt=this.remoteUserMap.get(rt))!==null&&tt!==void 0&&tt.has(it))});let $=await this.connection.batchReceive(s.map(_e=>{let{user:tt,mediaType:rt,ssrcId:it,rtxSsrcId:at}=_e;return{kind:rt,ssrcMsg:[{ssrcId:it,rtx:at}],mslabel:String(tt._uintid)}}));s.forEach((_e,tt)=>{let{user:rt,mediaType:it}=_e,{track:at,id:ct,transceiver:dt}=$[tt];it===Cn.AUDIO?(rt._audioTrack?rt._audioTrack._updateOriginMediaStreamTrack(at):(rt._audioTrack=new zl(at,rt.uid,rt._uintid,this.store),Et.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(rt._audioTrack.getTrackId()))),dt&&rt._audioTrack._updateRtpTransceiver(dt),this.bindRemoteTrackEvents(rt,rt._audioTrack)):(rt._videoTrack?rt._videoTrack._updateOriginMediaStreamTrack(at):(rt._videoTrack=new _u(at,rt.uid,rt._uintid,this.store),Et.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(rt._videoTrack.getTrackId()))),dt&&rt._videoTrack._updateRtpTransceiver(dt),this.bindRemoteTrackEvents(rt,rt._videoTrack));let ut=this.remoteUserMap.get(rt);ut?ut.set(it,ct):this.remoteUserMap.set(rt,new Map([[it,ct]])),this.statsCollector.addRemoteStats(rt.uid),this.statsUploader.startUploadInboundStats();let pt=this.pendingRemoteTracks.findIndex(mt=>{let{user:yt,kind:At}=mt;return yt.uid===rt.uid&&it===At});pt!==-1&&(this.pendingRemoteTracks.splice(pt,1),this.emit(kn.MediaReconnectEnd,rt.uid))})}async unsubscribe(s,$,_e){let tt=this.pendingRemoteTracks.filter(at=>{let{user:ct,kind:dt}=at;return $!==void 0?ct.uid===s.uid&&$===dt:ct.uid===s.uid});if(tt.forEach(at=>{let ct=this.pendingRemoteTracks.indexOf(at);this.pendingRemoteTracks.splice(ct,1)}),this.connection&&this.state===mr.Connected||_e||tt.forEach(at=>{let{kind:ct}=at;var dt;if(ct===Cn.AUDIO)(dt=s._audioTrack)===null||dt===void 0||dt._destroy(),s._audioTrack=void 0;else if(ct===Cn.VIDEO){var ut;(ut=s._videoTrack)===null||ut===void 0||ut._destroy(),s._videoTrack=void 0}}),!this.connection||this.state!==mr.Connected)return;let rt=this.filterTobeUnSubscribedTracks(s,$);if(rt.length===0)return;await this.connection.stopReceiving(rt.map(at=>{let[,{id:ct}]=at;return ct}));let it=this.createUnsubscribeMessage(rt);return this.withdrawRemoteTracks(rt),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),rt.forEach(at=>{let[ct,{kind:dt}]=at;var ut,pt;if(dt===Cn.VIDEO&&ct._videoSSRC&&((ut=this.connection)===null||ut===void 0||ut.setStatsRemoteVideoIsReady(ct._videoSSRC,!1)),dt===Cn.VIDEO)this.unbindRemoteTrackEvents(ct._videoTrack),_e||((pt=ct._videoTrack)===null||pt===void 0||pt._destroy(),ct._videoTrack=void 0);else if(dt===Cn.AUDIO){var mt;this.unbindRemoteTrackEvents(ct._audioTrack),!_e&&((mt=ct._audioTrack)===null||mt===void 0||mt._destroy(),ct._audioTrack=void 0)}}),it}async unsubscribeDataChannel(s,$){if($.forEach(rt=>{let it=this.pendingRemoteDataChannels.findIndex(at=>at.id===rt.id);it!==-1&&this.pendingRemoteDataChannels.splice(it,1)}),!this.connection)return;let _e=this.filterTobeUnSubscribedDataChannels(s,$);if(_e.length===0)return;$.forEach(rt=>{rt._close()});let tt=this.remoteDataChannelMap.get(s);return _e.forEach(rt=>{tt&&tt.delete(rt.id)}),tt&&tt.size===0&&(this.remoteDataChannelMap.delete(s),await this.connection.stopDataChannels(s.uid)),_e.map(rt=>rt.id)}async massUnsubscribe(s){return this.massUnsubscribeNoLock(s)}async massUnsubscribeNoLock(s){let $=[];for(let{user:rt,mediaType:it}of s){let at=this.pendingRemoteTracks.filter(ct=>{let{user:dt,kind:ut}=ct;return it!==void 0?dt.uid===rt.uid&&it===ut:dt.uid===rt.uid});at.forEach(ct=>{let dt=this.pendingRemoteTracks.indexOf(ct);this.pendingRemoteTracks.splice(dt,1)}),$=$.concat(at)}if(!this.connection||this.state!==mr.Connected)return void $.forEach(rt=>{let{user:it,kind:at}=rt;var ct;if(at===Cn.AUDIO)(ct=it._audioTrack)===null||ct===void 0||ct._destroy(),it._audioTrack=void 0;else if(at===Cn.VIDEO){var dt;(dt=it._videoTrack)===null||dt===void 0||dt._destroy(),it._videoTrack=void 0}});let _e=zp(s).call(s,(rt,it)=>{let{user:at,mediaType:ct}=it,dt=this.filterTobeUnSubscribedTracks(at,ct);return rt.concat(dt)},[]);if(_e.length===0)return;await this.connection.stopReceiving(_e.map(rt=>{let[,{id:it}]=rt;return it}));let tt=this.createUnsubscribeAllMessage(_e);return this.withdrawRemoteTracks(_e),this.remoteUserMap.size===0&&this.statsUploader.stopUploadInboundStats(),_e.forEach(rt=>{let[it,{kind:at}]=rt;var ct,dt;if(at===Cn.VIDEO&&it._videoSSRC&&((ct=this.connection)===null||ct===void 0||ct.setStatsRemoteVideoIsReady(it._videoSSRC,!1)),at===Cn.VIDEO)this.unbindRemoteTrackEvents(it._videoTrack),(dt=it._videoTrack)===null||dt===void 0||dt._destroy(),it._videoTrack=void 0;else if(at===Cn.AUDIO){var ut;this.unbindRemoteTrackEvents(it._audioTrack),(ut=it._audioTrack)===null||ut===void 0||ut._destroy(),it._audioTrack=void 0}}),tt}async muteRemote(s,$){if(!this.connection)return;let _e=this.remoteUserMap.get(s);if(!_e)return void Et.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(s.uid,"."));if(!_e.get($))return void Et.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(s.uid," media type ").concat($,"."));let tt=$===Cn.VIDEO?s._videoSSRC:s._audioSSRC;tt!==void 0&&this.connection.setStatsRemoteVideoIsReady(tt,!1)}async unmuteRemote(s,$){return this.unmuteRemoteNoLock(s,$)}async unmuteRemoteNoLock(s,$){if(!this.connection)return;let _e=this.remoteUserMap.get(s);if(!_e)return void Et.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(s.uid,"."));_e.get($)||Et.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(s.uid," media type ").concat($,"."))}getAllTracks(s){let $=this.localTrackMap.get(an.LocalAudioTrack);if(($==null?void 0:$.track)instanceof ho){let _e=$.track;return Array.from(this.localTrackMap.entries()).filter(tt=>{let[rt]=tt;return rt!==an.LocalAudioTrack}).filter(tt=>{let[rt]=tt;return!(s&&rt===an.LocalVideoLowTrack)}).map(tt=>{let[,{track:rt}]=tt;return rt}).concat(_e.trackList)}return Array.from(this.localTrackMap.entries()).filter(_e=>{let[tt]=_e;return!(s&&tt===an.LocalVideoLowTrack)}).map(_e=>{let[,{track:tt}]=_e;return tt})}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(s,$,_e,tt,rt){if(s){let at=this.localTrackMap.get(an.LocalAudioTrack),ct=tt?this.localTrackMap.get(an.LocalVideoLowTrack):this.localTrackMap.get(an.LocalVideoTrack);An.publish(this.store.sessionId,{eventElapse:qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:s,ec:$,audioName:at==null?void 0:at.track.getTrackLabel(),videoName:ct==null?void 0:ct.track.getTrackLabel(),screenshare:(ct==null?void 0:ct.track._hints.indexOf(wr.SCREEN_TRACK))!==-1,audio:!!at,video:!!ct,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:rt})}else{var it;_e||(_e=[]);let at=_e.find(dt=>dt instanceof dr),ct=tt?(it=this.localTrackMap.get(an.LocalVideoTrack))===null||it===void 0?void 0:it.track:_e.find(dt=>dt instanceof Hn);An.publish(this.store.sessionId,{eventElapse:qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:s,ec:$,audioName:at==null?void 0:at.getTrackLabel(),videoName:ct==null?void 0:ct.getTrackLabel(),screenshare:(ct==null?void 0:ct._hints.indexOf(wr.SCREEN_TRACK))!==-1,audio:!!at,video:!!ct,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:rt})}}reportSubscribeEvent(s,$,_e,tt){let rt=tt===Cn.VIDEO?_e._videoSSRC:_e._audioSSRC;rt&&An.subscribe(this.store.sessionId,{succ:s,ec:$,video:tt===Cn.VIDEO,audio:tt===Cn.AUDIO,peerid:_e.uid,subscribeRequestid:tt===Cn.VIDEO?_e._videoSSRC:_e._audioSSRC,p2pid:this.store.p2pId,eventElapse:qo.measureFromSubscribeStart(this.store.clientId,rt)})}reset(){Et.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Lo("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Ao({},this.store):this.isPlanB?new Mo({},this.store):new Jr({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();let s=this.localTrackMap.get(an.LocalAudioTrack);if((s==null?void 0:s.track)instanceof ho){if(s.track.trackList.length>0){let $=s.track;s.track.trackList.forEach(_e=>{$.removeAudioTrack(_e)})}s.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=mr.Disconnected}getStats(){var s;return(s=this.connection)===null||s===void 0?void 0:s.getStats()}getRemoteVideoIsReady(s){var $;return(($=this.connection)===null||$===void 0?void 0:$.getRemoteVideoIsReady(s))||!1}getLocalAudioVolume(){let s=this.localTrackMap.get(an.LocalAudioTrack);if(s)return s.track.getVolumeLevel()}getLocalVideoSize(){let s=this.localTrackMap.get(an.LocalVideoTrack);if(s)return{width:s.track._videoWidth||0,height:s.track._videoHeight||0}}getEncoderConfig(s){let $=this.localTrackMap.get(s);return $&&$.track instanceof Hn||$&&$.track instanceof dr?$.track._encoderConfig:void 0}getLocalMedia(s){return this.localTrackMap.get(s)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(s,$){if(!s)return this.remoteUserMap.size>0;let _e=this.remoteUserMap.get(s);return!!_e&&(!$||_e.has($))}async hasRemoteMediaWithLock(s,$){if(!s)return this.remoteUserMap.size>0;let _e=this.remoteUserMap.get(s);return!!_e&&(!$||_e.has($))}getRemoteMedia(s){var $;let _e=Array.from(zs($=this.remoteUserMap).call($)).find(tt=>tt.uid===s);return _e?{audioTrack:_e.audioTrack,audioSSRC:_e._audioSSRC,videoTrack:_e.videoTrack,videoSSRC:_e._videoSSRC}:{}}getAudioLevels(){let s=Array.from(this.remoteUserMap.entries()).map(_e=>{let[tt]=_e;return{uid:tt.uid,level:tt.audioTrack?100*tt.audioTrack._source.getAccurateVolumeLevel():0}}),$=this.localTrackMap.get(an.LocalAudioTrack);return $&&s.push({level:100*$.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),s=R1(s).call(s,(_e,tt)=>_e.level-tt.level),s}async disconnectForReconnect(){this.connection&&(Et.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=mr.Reconnecting,Ft("KEEP_LAST_FRAME")&&this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(s=>{let[$]=s;var _e;$._videoTrack&&$._videoTrack._player&&((_e=$._videoTrack._player.getVideoElement())===null||_e===void 0||_e.pause(),$._videoTrack._player.isKeepLastFrame=!0,$._videoTrack._originMediaStreamTrack.stop())}),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new Ao({},this.store):this.isPlanB?new Mo({},this.store):new Jr({},this.store),this.bindConnectionEvents(this.connection)),this.localTrackMap.size!==0&&(Array.from(this.localTrackMap.entries()).forEach(s=>{var $;let[_e,{track:tt}]=s;switch(_e){case an.LocalVideoTrack:vn($=tt._hints).call($,wr.LOW_STREAM)?tt.close():this.pendingLocalTracks.push(tt);break;case an.LocalAudioTrack:tt instanceof ho?this.pendingLocalTracks=this.pendingLocalTracks.concat(tt.trackList):this.pendingLocalTracks.push(tt);case an.LocalVideoLowTrack:}}),this.emit(kn.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.size!==0&&Array.from(this.remoteUserMap.entries()).forEach(s=>{let[$,_e]=s;Array.from(zs(_e).call(_e)).forEach(tt=>{this.setPendingRemoteMedia($,tt)}),this.emit(kn.MediaReconnectStart,$.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.localDataChannels.length!==0&&(this.localDataChannels.forEach(s=>{this.pendingLocalDataChannels.push(s)}),this.localDataChannels.length=0),this.remoteDataChannelMap.size!==0&&(Array.from(this.remoteDataChannelMap.entries()).forEach(s=>{let[$,_e]=s;Array.from(zs(_e).call(_e)).forEach(tt=>{this.setPendingRemoteDataChannel($,tt)})}),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),Et.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(s,$){for(let _e of this.pendingRemoteDataChannels){let{user:tt,id:rt}=_e;if((s instanceof Bo?s.uid:s)===tt.uid&&rt===$)return!0}return!1}setPendingRemoteDataChannel(s,$){this.hasPendingRemoteDataChannel(s,$)||this.pendingRemoteDataChannels.push({user:s,id:$})}hasPendingRemoteMedia(s,$){for(let _e of this.pendingRemoteTracks){let{user:tt,kind:rt}=_e;if((s instanceof Bo?s.uid:s)===tt.uid&&$===rt)return!0}return!1}setPendingRemoteMedia(s,$){this.hasPendingRemoteMedia(s,$)||this.pendingRemoteTracks.push({user:s,kind:$})}restartICE(s){var $=this;return Fs(function*(){if(!$.connection||$.state!==mr.Connected||$.connection instanceof Ao)return;let _e=yield Bn($.mutex.lock("From P2PChannel.restartICE")),tt;try{tt=yield Bn($.connection.restartICE(s));let it=yield Bn(tt.next());if(it.done)return;let at=it.value,ct=yield at;switch($.reportPCDisconnectedOrFailed(s),s){case Ko.TCP:$._pcStatsUploadType=ou.TCP_RESTART;break;case Ko.RELAY:$._pcStatsUploadType=ou.RELAY_RESTART;break;default:$._pcStatsUploadType=ou.OLD_RESTART}$._isInRestartIce=!0,tt.next(ct)}catch(it){var rt;(rt=tt)===null||rt===void 0||rt.throw(it)}finally{_e()}})()}getUplinkNetworkQuality(){if(!this.connection)return 0;let s=this.connection.getStats(),$=this.localTrackMap.get(an.LocalVideoTrack),_e=this.localTrackMap.get(an.LocalAudioTrack),tt=s.videoSend.find(At=>At.ssrc===($==null?void 0:$.ssrcs[0].ssrcId)),rt=s.audioSend.find(At=>At.ssrc===(_e==null?void 0:_e.ssrcs[0].ssrcId));if(!tt||!rt)return 1;let it=Ms(this,kn.NeedSignalRTT),at=tt?tt.rttMs:void 0,ct=rt?rt.rttMs:void 0,dt=at&&ct?(at+ct)/2:at||ct,ut=(dt&&it?(dt+it)/2:dt||it)||0,pt=100*s.sendPacketLossRate*.7/50+.3*ut/1500,mt=pt<.17?1:pt<.36?2:pt<.59?3:pt<.1?4:5,yt=$==null?void 0:$.track;if(yt&&yt._encoderConfig&&yt._hints.indexOf(wr.SCREEN_TRACK)===-1){let At=yt._encoderConfig.bitrateMax,Ct=s.bitrate.actualEncoded;if(At&&Ct){let It=(1e3*At-Ct)/(1e3*At);return SN[It<.15?0:It<.3?1:It<.45?2:It<.6?3:4][mt]}}return mt}getDownlinkNetworkQuality(){if(!this.connection)return 0;let s=this.connection.getStats(),$=0;return Array.from(this.remoteUserMap.entries()).forEach(_e=>{let[tt]=_e,rt=tt._audioSSRC,it=tt._videoSSRC,at=s.audioRecv.find(Ct=>Ct.ssrc===rt),ct=s.videoRecv.find(Ct=>Ct.ssrc===it);if(!at&&!ct)return void($+=1);let dt=Ms(this,kn.NeedSignalRTT),ut=s.rtt,pt=(ut&&dt?(ut+dt)/2:ut||dt)||0,mt=at?at.jitterMs:void 0,yt=s.recvPacketLossRate,At=.7*yt*100/50+.3*pt/1500;mt&&(At=.6*yt*100/50+.2*pt/1500+.2*mt/400),$+=At<.1?1:At<.17?2:At<.36?3:At<.59?4:5}),this.remoteUserMap.size>0?Math.round($/this.remoteUserMap.size):$}async muteLocalTrack(s){return new Jt(($,_e)=>{this.handleMuteLocalTrack(s,$,_e)})}filterTobePublishedTracks(s,$,_e){let tt=[],rt=vr(),it=this.getAllTracks();s=Dm(s=s.filter(dt=>it.indexOf(dt)===-1));let at=!1,ct=!1;for(let dt of s){if(dt instanceof Hn&&(this.localTrackMap.has(an.LocalVideoTrack)||at?new rn(Nt.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(tt.push({track:dt,type:an.LocalVideoTrack}),at=!0),$)){let ut=this.getLowVideoTrack(dt,_e);tt.push({track:ut,type:an.LocalVideoLowTrack})}if(dt instanceof dr){let ut=this.localTrackMap.get(an.LocalAudioTrack);if(ut){if(!(ut.track instanceof ho))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(dt._bypassWebAudio)throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");ut.track.addAudioTrack(dt),this.bindLocalAudioTrackEvents(dt,!0)}else if(ct){let pt=tt.find(mt=>{let{type:yt}=mt;return yt===an.LocalAudioTrack});if(!(pt.track instanceof ho))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(dt._bypassWebAudio)throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");pt.track.addAudioTrack(dt)}else{if(!rt.webAudioMediaStreamDest||dt instanceof ho||dt._bypassWebAudio)tt.push({track:dt,type:an.LocalAudioTrack});else{let pt=new ho;pt.addAudioTrack(dt),tt.push({track:pt,type:an.LocalAudioTrack})}ct=!0}}}return tt}filterTobeUnpublishedTracks(s){let $=[],_e=this.getAllTracks();s=Dm(s=s.filter(tt=>_e.indexOf(tt)!==-1));for(let tt of s){if(tt instanceof dr){let rt=this.localTrackMap.get(an.LocalAudioTrack);if(!rt)continue;rt.track instanceof ho?(rt.track.removeAudioTrack(tt),this.unbindLocalAudioTrackEvents(tt),rt.track.trackList.length===0&&($.push([an.LocalAudioTrack,rt]),rt.track.close())):$.push([an.LocalAudioTrack,rt])}if(tt instanceof Hn){let rt=this.localTrackMap.get(an.LocalVideoTrack);if(!rt)continue;$.push([an.LocalVideoTrack,rt]);let it=this.localTrackMap.get(an.LocalVideoLowTrack);it&&$.push([an.LocalVideoLowTrack,it])}}return $}filterTobePublishedDataChannels(s){return s=(s=Dm(s)).filter($=>this.localDataChannels.findIndex(_e=>_e.id===$.id)===-1)}filterTobeUnpublishedDataChannels(s){return s=(s=(s=Dm(s)).filter($=>this.localDataChannels.indexOf($)!==-1)).filter($=>$._originDataChannel)}bindLocalTrackEvents(s){s.forEach($=>{let{track:_e,type:tt}=$;switch(tt){case an.LocalVideoTrack:_e.addListener(yn.GET_STATS,this.handleGetLocalVideoStats),_e.addListener(yn.GET_RTC_STATS,this.handleGetRTCStats),_e.addListener(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_e.addListener(yn.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),_e.addListener(yn.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),_e.addListener(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack),_e.addListener(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case an.LocalAudioTrack:this.bindLocalAudioTrackEvents(_e);case an.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(s,$){s instanceof ho?s.trackList.forEach(_e=>{_e.addListener(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_e.addListener(yn.GET_STATS,this.handleGetLocalAudioStats),_e.addListener(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_e.addListener(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(s.addListener(yn.GET_STATS,this.handleGetLocalAudioStats),s.addListener(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.addListener(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.addListener(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.addListener(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),$||s.addListener(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(s){s||(s=Array.from(this.localTrackMap.entries()).map($=>{let[_e,{track:tt}]=$;return{track:tt,type:_e}})),s.forEach($=>{let{track:_e,type:tt}=$;switch(tt){case an.LocalVideoTrack:_e.off(yn.GET_STATS,this.handleGetLocalVideoStats),_e.off(yn.GET_RTC_STATS,this.handleGetRTCStats),_e.off(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),_e.off(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),_e.off(yn.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),_e.off(yn.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),_e.off(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack),_e.off(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),_e.off(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case an.LocalAudioTrack:this.unbindLocalAudioTrackEvents(_e);case an.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(s){s instanceof ho?s.trackList.forEach($=>{$.off(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),$.off(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),$.off(yn.GET_STATS,this.handleGetLocalAudioStats),$.off(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),$.off(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(s.off(yn.GET_STATS,this.handleGetLocalAudioStats),s.off(yn.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),s.off(yn.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),s.off(yn.NEED_REPLACE_TRACK,this.handleReplaceTrack),s.off(yn.NEED_MUTE_TRACK,this.handleMuteLocalTrack),s.off(yn.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(s,$){$ instanceof _u&&$.addListener(yn.GET_STATS,_e=>{_e(this.handleGetRemoteVideoStats(s))}),$ instanceof zl&&$.addListener(yn.GET_STATS,_e=>{_e(this.handleGetRemoteAudioStats(s))})}unbindRemoteTrackEvents(s){s&&s.removeAllListeners(yn.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach(s=>{let[$,_e]=s;_e.has(Cn.AUDIO)&&this.unbindRemoteTrackEvents($._audioTrack),_e.has(Cn.VIDEO)&&this.unbindRemoteTrackEvents($._videoTrack)})}createGatewayPublishMessage(s,$){return s.map((_e,tt)=>{var rt;let it,at,{track:ct,type:dt}=_e;switch(dt){case an.LocalAudioTrack:it=cr.Audio,at={dtx:ct instanceof _f&&ct._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case an.LocalVideoTrack:it=vn(rt=ct._hints).call(rt,wr.SCREEN_TRACK)?cr.Screen:cr.High,at=Rp(Rp({},VN(ct)),{},{codec:this.store.codec});break;case an.LocalVideoLowTrack:it=cr.Low,at=Rp(Rp({},VN(ct)),{},{codec:this.store.codec})}return{stream_type:it,attributes:at,ssrcs:$[tt]}})}createGatewayUnpublishMessage(s){return s.map($=>{var _e;let tt,[rt,{track:it,ssrcs:at,id:ct}]=$;switch(rt){case an.LocalVideoTrack:tt=vn(_e=it._hints).call(_e,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalAudioTrack:tt=cr.Audio;break;case an.LocalVideoLowTrack:tt=cr.Low}return{stream_type:tt,ssrcs:at,mid:ct}})}assignLocalTracks(s,$){s.forEach((_e,tt)=>{let{track:rt,type:it}=_e;this.localTrackMap.set(it,{track:rt,id:$[tt].id,ssrcs:$[tt].localSSRC})})}withdrawLocalTracks(s){s.forEach($=>{let[_e]=$;this.localTrackMap.delete(_e)})}bindConnectionEvents(s){s.onConnectionStateChange=async $=>{if(Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat($,")")),this.emit(kn.PeerConnectionStateChange,$),$!=="connected"||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),$==="connected"&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),Ft("NEW_ICE_RESTART")){var _e;if(vn(_e=this._restartStates).call(_e,$)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;let tt=at=>{(s.iceConnectionState==="disconnected"||s.iceConnectionState==="checking"||s.iceConnectionState==="failed")&&(Et.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(at)),Ms(this,kn.QueryClientConnectionState)==="CONNECTED"&&this.emit(kn.RequestRestartICE,at))},rt=()=>{s.iceConnectionState!=="disconnected"&&s.iceConnectionState!=="checking"&&s.iceConnectionState!=="failed"||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),Et.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout(()=>this.emit(kn.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},it=Ft("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout(()=>{if(Ft("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&vr().supportPCSetConfiguration)tt(Ko.RELAY),this._restartTimer=window.setTimeout(rt,it);else if(br())tt(Ko.UDP),this._restartTimer=window.setTimeout(rt,4e3);else{if(tt(Ko.TCP),vr().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout(()=>{tt(Ko.RELAY),this._restartTimer=window.setTimeout(rt,it)},it));this._restartTimer=window.setTimeout(rt,it)}},800))}}else{if($==="disconnected"&&s.iceConnectionState==="disconnected")return setTimeout(()=>{s.iceConnectionState==="disconnected"&&Ft("ICE_RESTART")&&Ms(this,kn.QueryClientConnectionState)==="CONNECTED"&&this.emit(kn.RequestRestartICE)},800),void setTimeout(()=>{s.peerConnectionState==="disconnected"&&(Et.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout(()=>this.emit(kn.P2PLost),0),this.iceFailedCount+=1,this.requestReconnect())},4e3);$==="failed"&&(Et.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout(()=>this.emit(kn.P2PLost),0),this.iceFailedCount+=1,await this.requestReconnect())}},s.onICEConnectionStateChange=$=>{$!=="connected"||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat($,")")),An.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:$,tag:Wr.TRACER}).onSuccess(),this.emit(kn.IceConnectionStateChange,$)},s.onICETransportStateChange=$=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat($,")"))},s.onDTLSTransportStateChange=$=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat($,")"))},s.onDTLSTransportError=$=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat($,")"))},s.onFirstAudioDecoded=$=>{var _e;let tt=Array.from(zs(_e=this.remoteUserMap).call(_e)).find(it=>it._audioSSRC===$);var rt;tt&&(this.store.subscribe(tt.uid,"audio",void 0,void 0,void 0,Date.now()),(rt=tt.audioTrack)===null||rt===void 0||rt.emit(Qp.FIRST_FRAME_DECODED),An.firstRemoteFrame(this.store.sessionId,Co.FIRST_AUDIO_DECODE,kr.FIRST_AUDIO_DECODE,{peer:tt._uintid,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,$),subscribeRequestid:$,p2pid:this.store.p2pId}))},s.onFirstAudioReceived=$=>{var _e;let tt=Array.from(zs(_e=this.remoteUserMap).call(_e)).find(rt=>rt._audioSSRC===$);tt&&An.firstRemoteFrame(this.store.sessionId,Co.FIRST_AUDIO_RECEIVED,kr.FIRST_AUDIO_RECEIVED,{peer:tt._uintid,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,$),subscribeRequestid:$,p2pid:this.store.p2pId})},s.onFirstVideoDecoded=($,_e,tt)=>{this.reportVideoFirstFrameDecoded($,_e,tt)},s.onFirstVideoReceived=$=>{var _e;let tt=Array.from(zs(_e=this.remoteUserMap).call(_e)).find(rt=>rt._videoSSRC===$);tt&&An.firstRemoteFrame(this.store.sessionId,Co.FIRST_VIDEO_RECEIVED,kr.FIRST_VIDEO_RECEIVED,{peer:tt._uintid,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,$),subscribeRequestid:$,p2pid:this.store.p2pId})},s.onSelectedLocalCandidateChanged=($,_e)=>{let tt=$.candidateType==="relay",rt=_e.candidateType==="relay";_e.candidateType!=="unknown"&&tt===rt||this.emit(kn.ConnectionTypeChange,tt),Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(pp(_e))," -> ").concat(JSON.stringify(pp($)),")"))},s.onSelectedRemoteCandidateChanged=($,_e)=>{Et.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(pp(_e))," -> ").concat(JSON.stringify(pp($)),")"))},s.onFirstVideoDecodedTimeout=$=>{this.reportVideoFirstFrameDecoded($,void 0,void 0,!0)}}unbindConnectionEvents(s){s.onConnectionStateChange=void 0,s.onICEConnectionStateChange=void 0,s.onICETransportStateChange=void 0,s.onDTLSTransportStateChange=void 0,s.onDTLSTransportError=void 0,s.onFirstAudioDecoded=void 0,s.onFirstAudioReceived=void 0,s.onFirstVideoDecoded=void 0,s.onFirstVideoReceived=void 0,s.onSelectedLocalCandidateChanged=void 0,s.onSelectedRemoteCandidateChanged=void 0,s.onFirstVideoDecodedTimeout=void 0}filterTobeMutedTracks(s){let $=[];if(this.getAllTracks().indexOf(s)===-1)return $;let _e=this.localTrackMap.get(an.LocalAudioTrack);if(s instanceof dr&&(_e==null?void 0:_e.track)instanceof ho)return _e.track.isActive||$.push([an.LocalAudioTrack,_e]),$;let tt=Array.from(this.localTrackMap.entries()).find(rt=>{let[,{track:it}]=rt;return s===it});if(tt&&($.push(tt),tt[0]===an.LocalVideoTrack)){let rt=this.localTrackMap.get(an.LocalVideoLowTrack);rt&&$.push([an.LocalVideoLowTrack,rt])}return $}filterTobeUnmutedTracks(s){let $=[],_e=this.localTrackMap.get(an.LocalAudioTrack);if(s instanceof dr&&(_e==null?void 0:_e.track)instanceof ho)return _e.track.isActive&&$.push([an.LocalAudioTrack,_e]),$;let tt=Array.from(this.localTrackMap.entries()).find(rt=>{let[,{track:it}]=rt;return s===it});if(tt)if(tt[0]===an.LocalVideoTrack){$.push(tt);let rt=this.localTrackMap.get(an.LocalVideoLowTrack);rt&&$.push([an.LocalVideoLowTrack,rt])}else $.push(tt);return $}createMuteMessage(s){return s.map($=>{var _e;let tt,[rt,{track:it,ssrcs:at,id:ct}]=$;switch(rt){case an.LocalAudioTrack:tt=cr.Audio;break;case an.LocalVideoTrack:tt=vn(_e=it._hints).call(_e,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalVideoLowTrack:tt=cr.Low}return{stream_type:tt,ssrcs:at,mid:ct}})}createUnmuteMessage(s){return s.map($=>{var _e;let tt,[rt,{track:it,ssrcs:at,id:ct}]=$;switch(rt){case an.LocalAudioTrack:tt=cr.Audio;break;case an.LocalVideoTrack:tt=vn(_e=it._hints).call(_e,wr.SCREEN_TRACK)?cr.Screen:cr.High;break;case an.LocalVideoLowTrack:tt=cr.Low}return{stream_type:tt,ssrcs:at,mid:ct}})}filterTobeUnSubscribedTracks(s,$){let _e=[],tt=this.remoteUserMap.get(s);if(!tt)return _e;if($){let rt=tt.get($);if(!rt)return _e;_e.push([s,{kind:$,id:rt}])}else Array.from(tt.entries()).forEach(rt=>{let[it,at]=rt;_e.push([s,{kind:it,id:at}])});return _e}filterTobeUnSubscribedDataChannels(s,$){let _e=[];return $.forEach(tt=>{var rt;(rt=this.remoteDataChannelMap.get(s))!==null&&rt!==void 0&&rt.has(tt.id)&&_e.push(tt)}),_e}createUnsubscribeMessage(s){let $=[];return s.forEach(_e=>{let[tt,{kind:rt,id:it}]=_e;switch(rt){case Cn.VIDEO:return void(tt._videoSSRC&&$.push({stream_type:Cn.VIDEO,ssrcId:tt._videoSSRC}));case Cn.AUDIO:return void(tt._audioSSRC&&$.push({stream_type:Cn.AUDIO,ssrcId:tt._audioSSRC}))}}),$}createUnsubscribeAllMessage(s){let $=new Map;return s.forEach(_e=>{let[tt,{kind:rt}]=_e;if($.has(tt)){let it=$.get(tt);rt===Cn.VIDEO?it|=_o.Video:it|=_o.Audio,$.set(tt,it)}else rt===Cn.VIDEO?$.set(tt,_o.Video):$.set(tt,_o.Audio)}),{users:Array.from($.entries()).map(_e=>{let[tt,rt]=_e;return{stream_id:tt.uid,stream_type:rt}})}}withdrawRemoteTracks(s){s.forEach($=>{let[_e,{kind:tt}]=$,rt=this.remoteUserMap.get(_e);rt&&(rt.delete(tt),Array.from(rt.entries()).length===0&&this.remoteUserMap.delete(_e))})}async updateBitrateLimit(s){let $=this.localTrackMap.get(an.LocalVideoTrack),_e=this.localTrackMap.get(an.LocalVideoLowTrack);$&&await $.track.setBitrateLimit(s.uplink),_e&&s.low_stream_uplink&&await _e.track.setBitrateLimit({max_bitrate:s.low_stream_uplink.bitrate,min_bitrate:s.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return this.connection?this.connection.peerConnectionState!=="connected":!0}mapPubResToRemoteConfig(s,$){return s.map((_e,tt)=>{var rt;let{stream_type:it}=_e;return(rt=$.find(at=>{let{stream_type:ct}=at;return it===ct}))===null||rt===void 0?void 0:rt.attributes})}async tryToUnmuteAudio(s){for(let _e=0;_e<s.length;_e++)if(s[_e]instanceof dr){var $;let tt=this.filterTobeUnmutedTracks(s[_e]);if(tt.length===0)continue;await(($=this.connection)===null||$===void 0?void 0:$.unmuteLocal(tt.map(it=>{let[,{id:at}]=it;return at})));let rt=this.createUnmuteMessage(tt);return void await Rr(this,kn.RequestUnmuteLocal,rt)}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=s=>{var $;return!(($=this.connection)===null||$===void 0||!$.getRemoteVideoIsReady(s))},this.statsUploader.requestUpload=(s,$)=>this.emit(kn.RequestUpload,s,$),this.statsUploader.requestUploadStats=s=>this.emit(kn.RequestUploadStats,s),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await xo(I_(this.dtlsFailedCount,po)),this.emit(kn.RequestReconnect)}async reconnectP2P(){let s=Array.from(this.localTrackMap.entries()),$=this.createGatewayUnpublishMessage(s);Array.from(this.remoteUserMap.entries()),$.length>0&&await lo(this,kn.RequestUnpublishForReconnectPC,$),this.disconnectForReconnect(),this.emit(kn.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(an.LocalVideoTrack)||this.pendingLocalTracks.some(s=>s instanceof Hn)}throwIfTrackTypeNotMatch(s){if(s.filter($=>$ instanceof Hn).length>1)throw new rn(Nt.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(s.filter($=>$ instanceof dr).length>1&&(s.some($=>$ instanceof dr&&$._bypassWebAudio)||!vr().webAudioMediaStreamDest))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(let $ of s){if($ instanceof Hn&&this.pendingLocalTracks.some(_e=>_e instanceof Hn))throw new rn(Nt.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if($ instanceof dr&&this.pendingLocalTracks.some(_e=>_e instanceof dr)&&(!vr().webAudioMediaStreamDest||$._bypassWebAudio||this.pendingLocalTracks.some(_e=>_e instanceof dr&&_e._bypassWebAudio)))throw new rn(Nt.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(s,$){let _e=!Ft("DISABLE_DUAL_STREAM_USE_ENCODING")&&vr().supportDualStreamEncoding,tt=Rp(Rp({},{width:160,height:120,framerate:15,bitrate:50}),$),rt;rt=_e?s._mediaStreamTrack.clone():dv(s,tt);let it=Ir(8,"track-low-"),at=new Hn(rt,Rp(Rp({},_e&&{scaleResolutionDownBy:oT(tt,s)}),{},{frameRate:tt.framerate,bitrateMax:tt.bitrate,bitrateMin:tt.bitrate}),void 0,void 0,it);return at.on(Hm.TRANSCEIVER_UPDATED,ct=>{s._updateRtpTransceiver(ct,hp.LOW_STREAM)}),at._hints.push(wr.LOW_STREAM),s.addListener(yn.NEED_CLOSE,()=>{at.close()}),at}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(s,$,_e){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(this.connection&&this.connection instanceof Jr){var rt,it,at,ct;let dt=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:ut,dtlsTransportState:pt,peerConnectionState:mt}=this.connection,{local:yt,remote:At}=await this.connection.getSelectedCandidatePair();An.pcStats(this.store.sessionId,{startTime:dt,eventElapse:s-dt||0,iceconnectionsate:ut,dtlsstate:pt,connectionstate:mt,intSucc:$?1:2,error:tt,selectedLocalCandidateProtocol:(rt=yt==null?void 0:yt.protocol)!==null&&rt!==void 0?rt:"",selectedLocalCandidateType:(it=yt.candidateType)!==null&&it!==void 0?it:"",selectedLocalCandidateAddress:"".concat(yt.address,":").concat(yt.port),selectedRemoteCandidateProtocol:(at=At.protocol)!==null&&at!==void 0?at:"",selectedRemoteCandidateType:(ct=At.candidateType)!==null&&ct!==void 0?ct:"",selectedRemoteCandidateAddress:"".concat(At.address,":").concat(At.port),restartCnt:_e})}}reportVideoFirstFrameDecoded(s,$,_e,tt){var rt;let it=Array.from(zs(rt=this.remoteUserMap).call(rt)).find(at=>at._videoSSRC===s);if(it){tt||this.store.subscribe(it.uid,"video",void 0,void 0,void 0,void 0,Date.now());let at=this.store.keyMetrics,ct=at.subscribe.find(dt=>dt.userId===it.uid&&dt.type==="video");An.firstRemoteVideoDecode(this.store.sessionId,Co.FIRST_VIDEO_DECODE,kr.FIRST_VIDEO_DECODE,{peer:it._uintid,videowidth:$,videoheight:_e,subscribeElapse:qo.measureFromSubscribeStart(this.store.clientId,s),subscribeRequestid:s,p2pid:this.store.p2pId,apEnd:at.requestAPEnd||0,apStart:at.requestAPStart||0,joinGwEnd:at.joinGatewayEnd||0,joinGwStart:at.joinGatewayStart||0,pcEnd:at.peerConnectionEnd||0,pcStart:at.peerConnectionStart||0,subscriberEnd:(ct==null?void 0:ct.subscribeEnd)||0,subscriberStart:(ct==null?void 0:ct.subscribeStart)||0,videoAddNotify:(ct==null?void 0:ct.streamAdded)||0,state:tt?1:0})}}async remoteMediaSsrcChanged(s,$,_e){if(!this.connection)return!1;let tt=this.remoteUserMap.get(s);if(!tt)return!1;let rt=tt.get($);if(!rt)return!1;let it=await this.connection.getRemoteSSRC(rt);return it!==void 0&&it!==_e}resetConnection(s){Et.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(s)),this.state===mr.Connected?(Et.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=s===F_.datachannel?new Ao({},this.store):this.isPlanB?new Mo({},this.store):new Jr({},this.store),this.bindConnectionEvents(this.connection)))}unbindRtpTransceiver(){this.localTrackMap.size!==0&&Array.from(this.localTrackMap.entries()).forEach(s=>{let[$,{track:_e}]=s;$===an.LocalVideoLowTrack?_e._updateRtpTransceiver(void 0,hp.LOW_STREAM):_e._updateRtpTransceiver(void 0)})}reportPCDisconnectedOrFailed(s){this.connection&&this.connection instanceof Jr&&(this.connection.iceConnectionState!=="disconnected"&&this.connection.iceConnectionState!=="checking"&&this.connection.iceConnectionState!=="failed"||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===ou.TCP_RESTART&&s===Ko.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,ou.DISCONNECTED_OR_FAILED)))}}function ss(j,s,$){let _e=j[s];if(typeof _e!="function")throw new Error("Cannot use mutex on object property.");return $.value=async function(){let tt=this.mutex,rt=await tt.lock("From P2PChannel.".concat(s));try{for(var it=arguments.length,at=new Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct];return await _e.apply(this,at)}finally{rt()}},$}function BF(j){let s=bO();return function($,_e){let tt=$.appId;tt!==void 0&&(hr(_e,10),Cu(_e,tt));let rt=$.cid;rt!==void 0&&(hr(_e,16),hr(_e,rt));let it=$.cname;it!==void 0&&(hr(_e,26),Cu(_e,it));let at=$.deviceId;at!==void 0&&(hr(_e,34),Cu(_e,at));let ct=$.elapse;ct!==void 0&&(hr(_e,40),Ip(_e,ct));let dt=$.fileSize;dt!==void 0&&(hr(_e,48),Ip(_e,i1(dt)));let ut=$.height;ut!==void 0&&(hr(_e,56),Ip(_e,i1(ut)));let pt=$.jpg;pt!==void 0&&(hr(_e,66),hr(_e,pt.length),function(Vs,sn){let fn=s1(Vs,sn.length);Vs.bytes.set(sn,fn)}(_e,pt));let mt=$.networkType;mt!==void 0&&(hr(_e,72),Ip(_e,i1(mt)));let yt=$.osType;yt!==void 0&&(hr(_e,80),Ip(_e,i1(yt)));let At=$.requestId;At!==void 0&&(hr(_e,90),Cu(_e,At));let Ct=$.sdkVersion;Ct!==void 0&&(hr(_e,98),Cu(_e,Ct));let It=$.sequence;It!==void 0&&(hr(_e,104),Ip(_e,i1(It)));let kt=$.sid;kt!==void 0&&(hr(_e,114),Cu(_e,kt));let Vt=$.timestamp;Vt!==void 0&&(hr(_e,120),Ip(_e,Vt));let Bt=$.uid;Bt!==void 0&&(hr(_e,128),hr(_e,Bt));let en=$.vid;en!==void 0&&(hr(_e,136),hr(_e,en));let zt=$.width;zt!==void 0&&(hr(_e,144),Ip(_e,i1(zt)));let Yt=$.service;Yt!==void 0&&(hr(_e,152),hr(_e,Yt));let Qt=$.callbackData;Qt!==void 0&&(hr(_e,162),Cu(_e,Qt));let Xt=$.jpgEncryption;Xt!==void 0&&(hr(_e,168),hr(_e,Xt));let cn=$.requestType;cn!==void 0&&(hr(_e,176),hr(_e,cn));let hn=$.scorePorn;hn!==void 0&&(hr(_e,185),yv(_e,hn));let Mn=$.scoreSexy;Mn!==void 0&&(hr(_e,193),yv(_e,Mn));let Gn=$.scoreNeutral;Gn!==void 0&&(hr(_e,201),yv(_e,Gn));let Or=$.scene;Or!==void 0&&(hr(_e,208),hr(_e,Or));let Eo=$.ossFilePrefix;Eo!==void 0&&(hr(_e,218),Cu(_e,Eo));let $r=$.serviceVendor;if($r!==void 0)for(let Vs of $r){hr(_e,226);let sn=bO();HF(Vs,sn),hr(_e,sn.limit),qF(_e,sn),YF(sn)}}(j,s),function($){let _e=$.bytes,tt=$.limit;return _e.length===tt?_e:_e.subarray(0,tt)}(s)}function GF(j){return function($){let _e={};e:for(;!RO($);){let tt=bu($);switch(tt>>>3){case 0:break e;case 1:_e.code=bu($);break;case 2:_e.msg=IO($,bu($));break;case 3:{let rt=zF($);_e.data=WF($),$.limit=rt;break}default:vO($,7&tt)}}return _e}({bytes:s=j,offset:0,limit:s.length});var s}function WF(j){let s={};e:for(;!RO(j);){let $=bu(j);switch($>>>3){case 0:break e;case 1:s.requestId=IO(j,bu(j));break;case 2:s.requestType=bu(j)>>>0;break;case 3:s.scorePorn=Ev(j);break;case 4:s.scoreSexy=Ev(j);break;case 5:s.scoreNeutral=Ev(j);break;case 6:s.requestScene=bu(j)>>>0;break;case 7:s.scene=bu(j)>>>0;break;default:vO(j,7&$)}}return s}function HF(j,s){let $=j.service;$!==void 0&&(hr(s,8),hr(s,$));let _e=j.vendor;_e!==void 0&&(hr(s,16),hr(s,_e));let tt=j.token;tt!==void 0&&(hr(s,26),Cu(s,tt));let rt=j.callbackUrl;rt!==void 0&&(hr(s,34),Cu(s,rt))}function zF(j){let s=bu(j),$=j.limit;return j.limit=j.offset+s,$}function vO(j,s){switch(s){case 0:for(;128&AO(j););break;case 2:mv(j,bu(j));break;case 5:mv(j,4);break;case 1:mv(j,8);break;default:throw new Error("Unimplemented type: "+s)}}on([ss,bt("design:type",Function),bt("design:paramtypes",[Object,Boolean]),bt("design:returntype",Jt)],Uo.prototype,"startP2PConnection",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Object,Object,Array,Object,String,String]),bt("design:returntype",Jt)],Uo.prototype,"connect",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",void 0)],Uo.prototype,"updateRemoteRTPCapabilities",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Object,Object,Array,Object,String,String]),bt("design:returntype",Jt)],Uo.prototype,"preConnect",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Uo.prototype,"publishDataChannel",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Uo.prototype,"unpublish",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Uo.prototype,"unpublishDataChannel",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],Uo.prototype,"unpublishLowStream",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,Array]),bt("design:returntype",Jt)],Uo.prototype,"subscribeDataChannel",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number,Number,Array]),bt("design:returntype",Jt)],Uo.prototype,"subscribe",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Uo.prototype,"massSubscribe",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,String,Boolean]),bt("design:returntype",Jt)],Uo.prototype,"unsubscribe",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,Array]),bt("design:returntype",Jt)],Uo.prototype,"unsubscribeDataChannel",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],Uo.prototype,"massUnsubscribe",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,String]),bt("design:returntype",Jt)],Uo.prototype,"muteRemote",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,String]),bt("design:returntype",Jt)],Uo.prototype,"unmuteRemote",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,String]),bt("design:returntype",Jt)],Uo.prototype,"hasRemoteMediaWithLock",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],Uo.prototype,"disconnectForReconnect",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],Uo.prototype,"updateBitrateLimit",null),on([ss,bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number]),bt("design:returntype",Jt)],Uo.prototype,"remoteMediaSsrcChanged",null);let KF=new Float32Array(1);new Uint8Array(KF.buffer);let gv=new Float64Array(1),Ls=new Uint8Array(gv.buffer);function i1(j){return{low:j|=0,high:j>>31,unsigned:j>=0}}let CO=[];function bO(){let j=CO.pop();return j?(j.offset=j.limit=0,j):{bytes:new Uint8Array(64),offset:0,limit:0}}function YF(j){CO.push(j)}function mv(j,s){if(j.offset+s>j.limit)throw new Error("Skip past limit");j.offset+=s}function RO(j){return j.offset>=j.limit}function s1(j,s){let $=j.bytes,_e=j.offset,tt=j.limit,rt=_e+s;if(rt>$.length){let it=new Uint8Array(2*rt);it.set($),j.bytes=it}return j.offset=rt,rt>tt&&(j.limit=rt),_e}function _v(j,s){let $=j.offset;if($+s>j.limit)throw new Error("Read past limit");return j.offset+=s,$}function IO(j,s){let $=_v(j,s),_e=String.fromCharCode,tt=j.bytes,rt="�",it="";for(let at=0;at<s;at++){let ct,dt,ut,pt,mt=tt[at+$];128&mt?(224&mt)==192?at+1>=s?it+=rt:(ct=tt[at+$+1],(192&ct)!=128?it+=rt:(pt=(31&mt)<<6|63&ct,pt<128?it+=rt:(it+=_e(pt),at++))):(240&mt)==224?at+2>=s?it+=rt:(ct=tt[at+$+1],dt=tt[at+$+2],(49344&(ct|dt<<8))!=32896?it+=rt:(pt=(15&mt)<<12|(63&ct)<<6|63&dt,pt<2048||pt>=55296&&pt<=57343?it+=rt:(it+=_e(pt),at+=2))):(248&mt)==240?at+3>=s?it+=rt:(ct=tt[at+$+1],dt=tt[at+$+2],ut=tt[at+$+3],(12632256&(ct|dt<<8|ut<<16))!=8421504?it+=rt:(pt=(7&mt)<<18|(63&ct)<<12|(63&dt)<<6|63&ut,pt<65536||pt>1114111?it+=rt:(pt-=65536,it+=_e(55296+(pt>>10),56320+(1023&pt)),at+=3))):it+=rt:it+=_e(mt)}return it}function Cu(j,s){let $=s.length,_e=0;for(let it=0;it<$;it++){let at=s.charCodeAt(it);at>=55296&&at<=56319&&it+1<$&&(at=(at<<10)+s.charCodeAt(++it)-56613888),_e+=at<128?1:at<2048?2:at<65536?3:4}hr(j,_e);let tt=s1(j,_e),rt=j.bytes;for(let it=0;it<$;it++){let at=s.charCodeAt(it);at>=55296&&at<=56319&&it+1<$&&(at=(at<<10)+s.charCodeAt(++it)-56613888),at<128?rt[tt++]=at:(at<2048?rt[tt++]=at>>6&31|192:(at<65536?rt[tt++]=at>>12&15|224:(rt[tt++]=at>>18&7|240,rt[tt++]=at>>12&63|128),rt[tt++]=at>>6&63|128),rt[tt++]=63&at|128)}}function qF(j,s){let $=s1(j,s.limit),_e=j.bytes,tt=s.bytes;for(let rt=0,it=s.limit;rt<it;rt++)_e[rt+$]=tt[rt]}function AO(j){return j.bytes[_v(j,1)]}function NO(j,s){let $=s1(j,1);j.bytes[$]=s}function Ev(j){let s=_v(j,8),$=j.bytes;return Ls[0]=$[s++],Ls[1]=$[s++],Ls[2]=$[s++],Ls[3]=$[s++],Ls[4]=$[s++],Ls[5]=$[s++],Ls[6]=$[s++],Ls[7]=$[s++],gv[0]}function yv(j,s){let $=s1(j,8),_e=j.bytes;gv[0]=s,_e[$++]=Ls[0],_e[$++]=Ls[1],_e[$++]=Ls[2],_e[$++]=Ls[3],_e[$++]=Ls[4],_e[$++]=Ls[5],_e[$++]=Ls[6],_e[$++]=Ls[7]}function bu(j){let s,$=0,_e=0;do s=AO(j),$<32&&(_e|=(127&s)<<$),$+=7;while(128&s);return _e}function hr(j,s){for(s>>>=0;s>=128;)NO(j,127&s|128),s>>>=7;NO(j,s)}function Ip(j,s){let $=s.low>>>0,_e=(s.low>>>28|s.high<<4)>>>0,tt=s.high>>>24,rt=tt===0?_e===0?$<16384?$<128?1:2:$<1<<21?3:4:_e<16384?_e<128?5:6:_e<1<<21?7:8:tt<128?9:10,it=s1(j,rt),at=j.bytes;switch(rt){case 10:at[it+9]=tt>>>7&1;case 9:at[it+8]=rt!==9?128|tt:127&tt;case 8:at[it+7]=rt!==8?_e>>>21|128:_e>>>21&127;case 7:at[it+6]=rt!==7?_e>>>14|128:_e>>>14&127;case 6:at[it+5]=rt!==6?_e>>>7|128:_e>>>7&127;case 5:at[it+4]=rt!==5?128|_e:127&_e;case 4:at[it+3]=rt!==4?$>>>21|128:$>>>21&127;case 3:at[it+2]=rt!==3?$>>>14|128:$>>>14&127;case 2:at[it+1]=rt!==2?$>>>7|128:$>>>7&127;case 1:at[it]=rt!==1?128|$:127&$}}function wO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}let XF=new Map([["moderation",1],["supervise",2]]);class kE extends Fr{get connectionState(){return this._connectionState}set connectionState(s){if(this._connectionState===s)return;let $=this._connectionState;this._connectionState=s,this.emit(Ro.CONNECTION_STATE_CHANGE,$,s)}get inspectType(){return this._inspectType}set inspectType(s){var $;this._inspectMode=zp($=s.map(_e=>XF.get(_e)||0)).call($,(_e,tt)=>_e+tt),this._inspectType=s}get quality(){return this._quality}set quality(s){this._quality=s>1?1:s<.1?.1:s,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this.qualityRatio},6e4))}constructor(s){super(),gt(this,"name","AgoraRTCVideoContentInspect"),gt(this,"_connectionState",qs.CONNECTING),gt(this,"_innerConnectionState",void 0),gt(this,"sequence",0),gt(this,"inspectStartTime",void 0),gt(this,"workerManagerConnection",void 0),gt(this,"workerConnection",void 0),gt(this,"workerMessageLengthLimit",void 0),gt(this,"inspectIntervalMinimum",void 0),gt(this,"qualityRatio",void 0),gt(this,"_connectInfo",void 0),gt(this,"_cancelTokenSource",As.CancelToken.source()),gt(this,"_retryConfig",void 0),gt(this,"wmSequence",0),gt(this,"inspectInterval",void 0),gt(this,"inspectTimer",null),gt(this,"ossFilePrefix",void 0),gt(this,"extraInfo",void 0),gt(this,"_inspectType",void 0),gt(this,"_inspectMode",void 0),gt(this,"_quality",1),gt(this,"qualityTimer",null),gt(this,"_inspectId",void 0),gt(this,"_needWorkUrlOnly",!1),gt(this,"inspectImage",()=>{if(this.connectionState!==qs.CONNECTED)throw new Wt(Nt.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval(()=>{this.connectionState===qs.CONNECTED?this.requestToInspectImage():Et.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)},this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()}),this._inspectId=Ir(5,"inspect-"),this.workerMessageLengthLimit=Ft("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=Ft("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=Ft("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=s.interval,this.ossFilePrefix=s.ossFilePrefix,this.extraInfo=s.extraInfo,this.inspectType=s.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new W1("worker-manager-"+this._inspectId,po),this.on(Ro.STATE_CHANGE,($,_e)=>{this._innerConnectionState=$,Et.debug("[".concat(this._inspectId,"] Inspect operation :").concat(Xs[$]," ").concat(_e||""))}),this.handleWorkerManagerEvents(),this.workerConnection=new W1("worker-"+this._inspectId,po),this.handleWorkerEvents()}async init(s,$){this.emit(Ro.STATE_CHANGE,Xs.CONNECT_AP),this._connectInfo=s;let _e=this._cancelTokenSource.token;return this._retryConfig=$,new Jt((tt,rt)=>{this.on(Ro.CONNECTION_STATE_CHANGE,(it,at)=>{at===qs.CONNECTED&&tt()}),this.requestAP(s,_e,$).then(it=>{this.connectWorkerManager(it)}).catch(it=>{rt(it)})})}async requestAP(s,$,_e){let tt=Ft("WEBCS_DOMAIN").map(at=>"https://".concat(at,"/api/v1")),rt=await function(at,ct,dt,ut){let{appId:pt,areaCode:mt,cname:yt,sid:At,token:Ct,uid:It}=ct;Vm++;let kt="image_moderation_api",Vt={service_name:kt,json_body:JSON.stringify({appId:pt,areaCode:mt,cname:yt,command:"allocateEdge",requestId:Vm,seq:Vm,sid:At,token:Ct,ts:Date.now(),uid:It+""})},Bt,en,zt=at[0];return tu(async()=>{Bt=Date.now();let Yt=await $u(zt,{data:Vt,cancelToken:dt,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(en=Date.now()-Bt,Yt.code!==0){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"image inspect ap error, code"+Yt.code,{retry:!0,responseTime:en});throw Et.error(hn.toString()),hn}let Qt=JSON.parse(Yt.json_body);if(Qt.code!==200){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(Qt.code,", reason: ").concat(Qt.reason),{code:Qt.code,responseTime:en});throw Et.error(hn.toString()),hn}if(!Qt.servers||!Array.isArray(Qt.servers)||Qt.servers.length===0){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:Qt.code,responseTime:en});throw Et.error(hn.toString()),hn}let Xt=Ft("VIDEO_INSPECT_WORKER_MANAGER_HOST"),cn=Ft("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:Qt.servers.map(hn=>{let{address:Mn,wss:Gn}=hn;if(Mn&&Gn)return"wss://".concat(Mn.replace(/\./g,"-"),".").concat(Xt,":").concat(cn||Gn)}).filter(hn=>!!hn),workerToken:Qt.workerToken,vid:Qt.vid,responseTime:en}},(Yt,Qt)=>(An.apworkerEvent(At,{success:!0,sc:200,serviceName:kt,responseDetail:JSON.stringify(Yt.addressList),firstSuccess:Qt===0,responseTime:en,serverIp:at[Qt%at.length]}),!1),(Yt,Qt)=>(An.apworkerEvent(At,{success:!1,sc:Yt.data&&Yt.data.code||200,serviceName:kt,responseTime:en,serverIp:at[Qt%at.length]}),!!(Yt.code!==Nt.OPERATION_ABORTED&&Yt.code!==Nt.UNEXPECTED_RESPONSE||Yt.data&&Yt.data.retry)&&(zt=at[(Qt+1)%at.length],!0)),ut)}(tt,s,$,_e);this.emit(Ro.STATE_CHANGE,Xs.AP_CONNECTED);let{addressList:it}=rt;return this.wmSequence++,it}async connectWorkerManager(s){let $=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this._needWorkUrlOnly=$,this.emit(Ro.STATE_CHANGE,Xs.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(s,1e4)}async connectWorker(s){await this.workerConnection.init([s])}handleWorkerManagerEvents(){this.workerManagerConnection.on($n.CONNECTED,async()=>{this.emit(Ro.STATE_CHANGE,Xs.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.20.0",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)}),this.workerManagerConnection.on($n.CLOSED,()=>{this._innerConnectionState<Xs.GET_WORKER_MANAGER_RESPONSE&&Et.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))}),this.workerManagerConnection.on($n.FAILED,()=>{this._innerConnectionState<Xs.GET_WORKER_MANAGER_RESPONSE&&Et.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))}),this.workerManagerConnection.on($n.RECONNECTING,()=>{this._innerConnectionState<Xs.GET_WORKER_MANAGER_RESPONSE&&Et.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))}),this.workerManagerConnection.on($n.ON_MESSAGE,async s=>{this.emit(Ro.STATE_CHANGE,Xs.GET_WORKER_MANAGER_RESPONSE);let $=this.workerManagerConnection.url;this.workerManagerConnection.close();let _e=JSON.parse(s.data);if(_e.code!==200)throw Et.error("[".concat(this._inspectId,"] Unexpected code ").concat(_e.code," from worker manager")),new Wt(Nt.UNEXPECTED_RESPONSE,"response code of worker is unexpected",_e);if(!(_e.serverResponse&&_e.serverResponse.portWss&&$))throw Et.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(_e))),new Wt(Nt.UNEXPECTED_RESPONSE,"response content of worker is unexpected",_e);{let tt=Ft("VIDEO_INSPECT_WORKER_PORT")||_e.serverResponse.portWss,rt=$.replace(/:\d+\/?$/,":".concat(tt));this.emit(Ro.STATE_CHANGE,Xs.CONNECT_WORKER,rt),this._needWorkUrlOnly?this.emit(Ro.REQUEST_NEW_WORKER_URL,rt):await this.connectWorker(rt)}}),this.workerManagerConnection.on($n.WILL_RECONNECT,(s,$,_e)=>{_e(s)}),this.workerManagerConnection.on($n.REQUEST_NEW_URLS,(s,$)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s).catch($)})}handleWorkerEvents(){this.workerConnection.on($n.CONNECTED,async()=>{this.emit(Ro.STATE_CHANGE,Xs.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=qs.CONNECTED}),this.workerConnection.on($n.ON_MESSAGE,async s=>{if(s.data instanceof ArrayBuffer){let _e=GF(new Uint8Array(s.data));if(Ft("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&Et.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(_e)),_e.code===200){if(Array.isArray(this.inspectType)&&this.inspectType.length===1&&this.inspectType[0]==="supervise")return void this.emit(Ro.INSPECT_RESULT,void 0,void 0);if(_e.data&&_e.data.scorePorn&&_e.data.scoreSexy&&_e.data.scoreNeutral){var $;let tt={porn:_e.data.scorePorn,sexy:_e.data.scoreSexy,neutral:_e.data.scoreNeutral},rt=zp($=Object.keys(tt)).call($,(at,ct)=>tt[at]>tt[ct]?at:ct,"porn"),it=Object.keys(tt).find(at=>at===rt);this.emit(Ro.INSPECT_RESULT,it)}else this.emit(Ro.INSPECT_RESULT,void 0,new Wt(Nt.UNEXPECTED_RESPONSE,_e.code+"","There is an unexpected data on message"))}else this.emit(Ro.INSPECT_RESULT,void 0,new Wt(Nt.UNEXPECTED_RESPONSE,_e.code+"",_e.msg))}else Et.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(Ro.INSPECT_RESULT,void 0,new Wt(Nt.UNEXPECTED_RESPONSE,"invalid worker message type"))}),this.workerConnection.on($n.CLOSED,()=>{this.connectionState=qs.CLOSED}),this.workerConnection.on($n.FAILED,()=>{this.connectionState=qs.CLOSED}),this.workerConnection.on($n.RECONNECTING,()=>{this.connectionState=this.connectionState===qs.CONNECTED?qs.RECONNECTING:qs.CONNECTING}),this.workerConnection.on($n.WILL_RECONNECT,(s,$,_e)=>{s==="recover"&&_e(s),_e("tryNext")}),this.workerConnection.on($n.REQUEST_NEW_URLS,(s,$)=>{this.workerManagerConnection.close(),this.once(Ro.REQUEST_NEW_WORKER_URL,_e=>{s([_e])}),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(_e=>{this.connectWorkerManager(_e,!0)}).catch(_e=>{$(_e)})})}static intToLong(s){return{low:s|=0,high:s>>31,unsigned:s>=0}}async requestToInspectImage(){this.sequence++;let s=Ms(this,Ro.CLIENT_LOCAL_VIDEO_TRACK),$={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(s){if(!s.isPlaying)return void this.emit(Ro.INSPECT_RESULT,void 0,new Wt(Nt.INVALID_OPERATION,"Only the track being played can be inspected"));let _e=await this.generateRequestData(s,$);this.workerConnection.sendMessage(_e,!0,!0)}else this.emit(Ro.INSPECT_RESULT,void 0,new Wt(Nt.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(s,$){let{appId:_e,cname:tt,cid:rt,vid:it,sid:at,uid:ct}=$,dt=Date.now(),ut=await s.getCurrentFrameImage("image/jpeg",this.quality),pt=await Mw(ut,_e,tt),mt=this.sequence+"-"+rt+"-"+ct+"-"+dt+"-"+Ir(12,""),yt={appId:_e,cid:rt,cname:tt,deviceId:"",elapse:kE.intToLong(Number(dt-this.inspectStartTime)),fileSize:pt.byteLength,jpgEncryption:2,height:ut.height,width:ut.width,jpg:pt,networkType:6,osType:7,requestId:mt,sdkVersion:"4.20.0",sequence:this.sequence,sid:at,timestamp:kE.intToLong(dt),uid:ct,vid:it,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};this.extraInfo===void 0&&delete yt.callbackData,this.ossFilePrefix===void 0&&delete yt.ossFilePrefix;let At=BF(yt);if(At.byteLength<this.workerMessageLengthLimit){if(Ft("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){let Ct=function(It){for(var kt=1;kt<arguments.length;kt++){var Vt=arguments[kt]!=null?arguments[kt]:{};kt%2?wO(Object(Vt),!0).forEach(function(Bt){gt(It,Bt,Vt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(Vt)):wO(Object(Vt)).forEach(function(Bt){Object.defineProperty(It,Bt,Object.getOwnPropertyDescriptor(Vt,Bt))})}return It}({},yt);delete Ct.jpg,Et.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(Ct))}return At}{let Ct=this.quality*this.qualityRatio;return this.quality=Ct,await this.generateRequestData(s,{appId:_e,cname:tt,cid:rt,vid:it,sid:at,uid:ct})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=As.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=qs.CLOSED,this.emit(Ro.STATE_CHANGE,Xs.CLOSED)}}function JF(j){let s=function(){let $=_j.pop();return $?($.offset=$.limit=0,$):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function($,_e){let tt=$.appId;tt!==void 0&&(ao(_e,10),Ap(_e,tt));let rt=$.cid;rt!==void 0&&(ao(_e,16),ao(_e,rt));let it=$.cname;it!==void 0&&(ao(_e,26),Ap(_e,it));let at=$.deviceId;at!==void 0&&(ao(_e,34),Ap(_e,at));let ct=$.elapse;ct!==void 0&&(ao(_e,40),Np(_e,ct));let dt=$.fileSize;dt!==void 0&&(ao(_e,48),Np(_e,a1(dt)));let ut=$.height;ut!==void 0&&(ao(_e,56),Np(_e,a1(ut)));let pt=$.jpg;pt!==void 0&&(ao(_e,66),ao(_e,pt.length),PO(_e,pt));let mt=$.networkType;mt!==void 0&&(ao(_e,72),Np(_e,a1(mt)));let yt=$.osType;yt!==void 0&&(ao(_e,80),Np(_e,a1(yt)));let At=$.requestId;At!==void 0&&(ao(_e,90),Ap(_e,At));let Ct=$.sdkVersion;Ct!==void 0&&(ao(_e,98),Ap(_e,Ct));let It=$.sequence;It!==void 0&&(ao(_e,104),Np(_e,a1(It)));let kt=$.sid;kt!==void 0&&(ao(_e,114),Ap(_e,kt));let Vt=$.timestamp;Vt!==void 0&&(ao(_e,120),Np(_e,Vt));let Bt=$.uid;Bt!==void 0&&(ao(_e,128),ao(_e,Bt));let en=$.vid;en!==void 0&&(ao(_e,136),ao(_e,en));let zt=$.width;zt!==void 0&&(ao(_e,144),Np(_e,a1(zt)));let Yt=$.service;Yt!==void 0&&(ao(_e,152),ao(_e,Yt));let Qt=$.callbackData;Qt!==void 0&&(ao(_e,162),ao(_e,Qt.length),PO(_e,Qt));let Xt=$.ticket;Xt!==void 0&&(ao(_e,170),Ap(_e,Xt));let cn=$.vendorConfigs;cn!==void 0&&(ao(_e,178),Ap(_e,cn))}(j,s),function($){let _e=$.bytes,tt=$.limit;return _e.length===tt?_e:_e.subarray(0,tt)}(s)}function QF(j){return function($){let _e={};e:for(;!$j($);){let tt=E0($);switch(tt>>>3){case 0:break e;case 1:_e.code=E0($);break;case 2:_e.msg=DO($,E0($));break;case 3:_e.requestId=DO($,E0($));break;case 4:_e.timestamp=eV($,!1);break;default:ZF($,7&tt)}}return _e}({bytes:s=j,offset:0,limit:s.length});var s}function ZF(j,s){switch(s){case 0:for(;128&Zl(j););break;case 2:Sv(j,E0(j));break;case 5:Sv(j,4);break;case 1:Sv(j,8);break;default:throw new Error("Unimplemented type: "+s)}}function a1(j){return{low:j|=0,high:j>>31,unsigned:j>=0}}let _j=[];function Sv(j,s){if(j.offset+s>j.limit)throw new Error("Skip past limit");j.offset+=s}function $j(j){return j.offset>=j.limit}function $E(j,s){let $=j.bytes,_e=j.offset,tt=j.limit,rt=_e+s;if(rt>$.length){let it=new Uint8Array(2*rt);it.set($),j.bytes=it}return j.offset=rt,rt>tt&&(j.limit=rt),_e}function OO(j,s){let $=j.offset;if($+s>j.limit)throw new Error("Read past limit");return j.offset+=s,$}function PO(j,s){let $=$E(j,s.length);j.bytes.set(s,$)}function DO(j,s){let $=OO(j,s),_e=String.fromCharCode,tt=j.bytes,rt="�",it="";for(let at=0;at<s;at++){let ct,dt,ut,pt,mt=tt[at+$];128&mt?(224&mt)==192?at+1>=s?it+=rt:(ct=tt[at+$+1],(192&ct)!=128?it+=rt:(pt=(31&mt)<<6|63&ct,pt<128?it+=rt:(it+=_e(pt),at++))):(240&mt)==224?at+2>=s?it+=rt:(ct=tt[at+$+1],dt=tt[at+$+2],(49344&(ct|dt<<8))!=32896?it+=rt:(pt=(15&mt)<<12|(63&ct)<<6|63&dt,pt<2048||pt>=55296&&pt<=57343?it+=rt:(it+=_e(pt),at+=2))):(248&mt)==240?at+3>=s?it+=rt:(ct=tt[at+$+1],dt=tt[at+$+2],ut=tt[at+$+3],(12632256&(ct|dt<<8|ut<<16))!=8421504?it+=rt:(pt=(7&mt)<<18|(63&ct)<<12|(63&dt)<<6|63&ut,pt<65536||pt>1114111?it+=rt:(pt-=65536,it+=_e(55296+(pt>>10),56320+(1023&pt)),at+=3))):it+=rt:it+=_e(mt)}return it}function Ap(j,s){let $=s.length,_e=0;for(let it=0;it<$;it++){let at=s.charCodeAt(it);at>=55296&&at<=56319&&it+1<$&&(at=(at<<10)+s.charCodeAt(++it)-56613888),_e+=at<128?1:at<2048?2:at<65536?3:4}ao(j,_e);let tt=$E(j,_e),rt=j.bytes;for(let it=0;it<$;it++){let at=s.charCodeAt(it);at>=55296&&at<=56319&&it+1<$&&(at=(at<<10)+s.charCodeAt(++it)-56613888),at<128?rt[tt++]=at:(at<2048?rt[tt++]=at>>6&31|192:(at<65536?rt[tt++]=at>>12&15|224:(rt[tt++]=at>>18&7|240,rt[tt++]=at>>12&63|128),rt[tt++]=at>>6&63|128),rt[tt++]=63&at|128)}}function Zl(j){return j.bytes[OO(j,1)]}function xO(j,s){let $=$E(j,1);j.bytes[$]=s}function E0(j){let s,$=0,_e=0;do s=Zl(j),$<32&&(_e|=(127&s)<<$),$+=7;while(128&s);return _e}function ao(j,s){for(s>>>=0;s>=128;)xO(j,127&s|128),s>>>=7;xO(j,s)}function eV(j,s){let $,_e=0,tt=0,rt=0;return $=Zl(j),_e=127&$,128&$&&($=Zl(j),_e|=(127&$)<<7,128&$&&($=Zl(j),_e|=(127&$)<<14,128&$&&($=Zl(j),_e|=(127&$)<<21,128&$&&($=Zl(j),tt=127&$,128&$&&($=Zl(j),tt|=(127&$)<<7,128&$&&($=Zl(j),tt|=(127&$)<<14,128&$&&($=Zl(j),tt|=(127&$)<<21,128&$&&($=Zl(j),rt=127&$,128&$&&($=Zl(j),rt|=(127&$)<<7))))))))),{low:_e|tt<<28,high:tt>>>4|rt<<24,unsigned:s}}function Np(j,s){let $=s.low>>>0,_e=(s.low>>>28|s.high<<4)>>>0,tt=s.high>>>24,rt=tt===0?_e===0?$<16384?$<128?1:2:$<1<<21?3:4:_e<16384?_e<128?5:6:_e<1<<21?7:8:tt<128?9:10,it=$E(j,rt),at=j.bytes;switch(rt){case 10:at[it+9]=tt>>>7&1;case 9:at[it+8]=rt!==9?128|tt:127&tt;case 8:at[it+7]=rt!==8?_e>>>21|128:_e>>>21&127;case 7:at[it+6]=rt!==7?_e>>>14|128:_e>>>14&127;case 6:at[it+5]=rt!==6?_e>>>7|128:_e>>>7&127;case 5:at[it+4]=rt!==5?128|_e:127&_e;case 4:at[it+3]=rt!==4?$>>>21|128:$>>>21&127;case 3:at[it+2]=rt!==3?$>>>14|128:$>>>14&127;case 2:at[it+1]=rt!==2?$>>>7|128:$>>>7&127;case 1:at[it]=rt!==1?128|$:127&$}}let LO={},kO={},ME=4294967296,$O=ME*ME,MO=$O/2,Tv=FO(0,!0),UO=FO(0),tV=c1(0,-2147483648,!1),nV=c1(-1,2147483647,!1),rV=c1(-1,-1,!0);function FO(j,s){let $,_e,tt;return s?(tt=0<=(j>>>=0)&&j<256)&&(_e=kO[j],_e)?_e:($=c1(j,0,!0),tt&&(kO[j]=$),$):(tt=-128<=(j|=0)&&j<128)&&(_e=LO[j],_e)?_e:($=c1(j,j<0?-1:0,!1),tt&&(LO[j]=$),$)}function c1(j,s,$){return{low:0|j,high:0|s,unsigned:!!$}}function oV(j,s){if(isNaN(j))return s?Tv:UO;if(s){if(j<0)return Tv;if(j>=$O)return rV}else{if(j<=-MO)return tV;if(j+1>=MO)return nV}return j<0?s?Tv:UO:c1(j%ME|0,j/ME|0,s)}function jO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}class vv extends Fr{get connectionState(){return this._connectionState}set connectionState(s){if(this._connectionState===s)return;let $=this._connectionState;this._connectionState=s,this.emit(Cl.CONNECTION_STATE_CHANGE,s,$)}get quality(){return this._quality}set quality(s){this._quality=s>1?1:s<.1?.1:s,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout(()=>{this.quality=this._quality/this._qualityRatio},6e4))}constructor(s){var $;super(),gt(this,"name","AgoraRTCImageModeration"),gt(this,"_connectionState",Us.CONNECTING),gt(this,"_sequence",0),gt(this,"_moderationStartTime",void 0),gt(this,"_workerConnection",void 0),gt(this,"_workerMessageLengthLimit",void 0),gt(this,"_qualityRatio",void 0),gt(this,"_connectInfo",void 0),gt(this,"_cancelTokenSource",As.CancelToken.source()),gt(this,"_retryConfig",void 0),gt(this,"_moderationInterval",void 0),gt(this,"_moderationTimer",null),gt(this,"_moderationMode",1),gt(this,"_quality",1),gt(this,"_qualityTimer",null),gt(this,"_ticket",void 0),gt(this,"_moderationIntervalMinimum",void 0),gt(this,"_uploadFailedNum",0),gt(this,"_uploadNum",0),gt(this,"_uploadTimer",null),gt(this,"_extraInfo",void 0),gt(this,"_vendor",""),gt(this,"_encoder",new TextEncoder),gt(this,"_moderationId",void 0),gt(this,"inspectImage",()=>{if(this.connectionState!==Us.CONNECTED)throw new Wt(Nt.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval(()=>{this.connectionState===Us.CONNECTED?this.requestToInspectImage():Et.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)},this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()}),this._moderationId=Ir(5,"image-moderation-"),this._workerMessageLengthLimit=Ft("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=Ft("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=($=s.interval)!==null&&$!==void 0?$:1e3,s.extraInfo&&(this._extraInfo=this._encoder.encode(s.extraInfo)),s.vendor&&(this._vendor=s.vendor),this._qualityRatio=Ft("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new W1("worker-"+this._moderationId,po),this.on(Cl.STATE_CHANGE,(_e,tt)=>{Et.debug("[".concat(this._moderationId,"] Moderation operation :").concat(lp[_e]," ").concat(tt||""))}),this.handleWorkerEvents()}async init(s,$){this.emit(Cl.STATE_CHANGE,lp.CONNECT_AP),this._connectInfo=s;let _e=this._cancelTokenSource.token;return this._retryConfig=$,new Jt((tt,rt)=>{this.on(Cl.CONNECTION_STATE_CHANGE,(it,at)=>{it===Us.CONNECTED&&tt()}),this.requestAP(s,_e,$).then(it=>{this.connectWorker(it)}).catch(it=>{rt(it)})})}updateConfig(s){var $;this._moderationInterval=($=s.interval)!==null&&$!==void 0?$:1e3,s.extraInfo&&(this._extraInfo=this._encoder.encode(s.extraInfo)),s.vendor&&(this._vendor=s.vendor),Et.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(s))),this.connectionState===Us.CONNECTED&&this.inspectImage()}async requestAP(s,$,_e){let tt=Ft("WEBCS_DOMAIN").map(ct=>"https://".concat(ct,"/api/v1")),rt=await function(ct,dt,ut,pt){let{appId:mt,areaCode:yt,cname:At,sid:Ct,token:It,uid:kt}=dt;Vm++;let Vt="moderation_plugin",Bt={service_name:Vt,json_body:JSON.stringify({appId:mt,areaCode:yt,cname:At,command:"allocateEdge",requestId:Vm,seq:Vm,sid:Ct,appToken:It,ts:Date.now(),uid:kt+""})},en,zt,Yt=ct[0];return tu(async()=>{en=Date.now();let Qt=await $u(Yt,{data:Bt,cancelToken:ut,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(zt=Date.now()-en,Qt.code!==0){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+Qt.code,{retry:!0,responseTime:zt});throw Et.error(hn.toString()),hn}let Xt=JSON.parse(Qt.json_body);if(Xt.code!==200){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(Xt.code,", reason: ").concat(Xt.reason),{code:Xt.code,responseTime:zt});throw Et.error(hn.toString()),hn}if(!Xt.servers||!Array.isArray(Xt.servers)||Xt.servers.length===0){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:Xt.code,responseTime:zt});throw Et.error(hn.toString()),hn}if(!Xt.servers.some(hn=>!!hn.wss)){let hn=new Wt(Nt.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:Xt.code,responseTime:zt});throw Et.error(hn.toString()),hn}let cn=Ft("IMAGE_MODERATION_WORKER_HOST");return{addressList:Xt.servers.map(hn=>{let{address:Mn,wss:Gn}=hn;if(Mn&&Gn)return"wss://".concat(Mn.replace(/\./g,"-"),".").concat(cn,":").concat(Gn,"/moderation")}).filter(hn=>!!hn),workerToken:Xt.workerToken,vid:Xt.vid,ticket:Xt.appTicket,responseTime:zt}},(Qt,Xt)=>(An.apworkerEvent(Ct,{success:!0,sc:200,serviceName:Vt,responseDetail:JSON.stringify(Qt.addressList),firstSuccess:Xt===0,responseTime:zt,serverIp:ct[Xt%ct.length]}),!1),(Qt,Xt)=>(An.apworkerEvent(Ct,{success:!1,sc:Qt.data&&Qt.data.code||200,serviceName:Vt,responseTime:zt,serverIp:ct[Xt%ct.length]}),!!(Qt.code!==Nt.OPERATION_ABORTED&&Qt.code!==Nt.UNEXPECTED_RESPONSE||Qt.data&&Qt.data.retry)&&(Yt=ct[(Xt+1)%ct.length],!0)),pt)}(tt,s,$,_e);this.emit(Cl.STATE_CHANGE,lp.AP_CONNECTED);let{addressList:it,ticket:at}=rt;return this._ticket=at,it}async connectWorker(s){this.emit(Cl.STATE_CHANGE,lp.CONNECT_WORKER),await this._workerConnection.init(s,1e4)}handleWorkerEvents(){this._workerConnection.on($n.CONNECTED,async()=>{this.emit(Cl.STATE_CHANGE,lp.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=Us.CONNECTED}),this._workerConnection.on($n.CLOSED,()=>{this.connectionState=Us.CLOSED}),this._workerConnection.on($n.FAILED,()=>{this.connectionState=Us.CLOSED}),this._workerConnection.on($n.RECONNECTING,()=>{this.connectionState=this.connectionState===Us.CONNECTED?Us.RECONNECTING:Us.CONNECTING}),this._workerConnection.on($n.ON_MESSAGE,async s=>{if(s.data instanceof ArrayBuffer){let $=QF(new Uint8Array(s.data));Ft("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&Et.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify($)),this._uploadNum++,$.code===void 0||$.code===0||(this._uploadFailedNum++,Et.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat($.code,", msg is ").concat($.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout(()=>{An.reportApiInvoke(this._connectInfo.sid||null,{name:mo.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,$.code],tag:Wr.TRACER}).onError(new Wt(Nt.IMAGE_MODERATION_UPLOAD_FAILED,$.msg)),this._uploadTimer=null},Ft("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else Et.error("[".concat(this._moderationId,"] Unexpected message type from worker"))}),this._workerConnection.on($n.WILL_RECONNECT,(s,$,_e)=>{s==="recover"&&_e(s),_e("tryNext")}),this._workerConnection.on($n.REQUEST_NEW_URLS,(s,$)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(s).catch($)})}static intToLong(s){return{low:s|=0,high:s>>31,unsigned:s>=0}}async requestToInspectImage(){let s=Ms(this,Cl.CLIENT_LOCAL_VIDEO_TRACK),$={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(s){if(!s.isPlaying)return void(Ft("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&Et.debug("Only the track being played can be inspected"));this._sequence++;let _e=await this.generateRequestData(s,$);this._workerConnection.sendMessage(_e,!0,!0)}else Ft("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&Et.debug("Only the track being published can be inspected")}async generateRequestData(s,$){let{appId:_e,cname:tt,cid:rt,vid:it,sid:at,uid:ct}=$,dt=Date.now(),ut=await s.getCurrentFrameImage("image/jpeg",this.quality),pt=await Mw(ut,_e,tt),mt=this._sequence+"-"+rt+"-"+ct+"-"+dt+"-"+Ir(12,""),yt={appId:_e,cid:rt,cname:tt,deviceId:"",elapse:vv.intToLong(Number(dt-this._moderationStartTime)),fileSize:ut.buffer.byteLength,height:ut.height,width:ut.width,jpg:pt,networkType:6,osType:7,requestId:mt,sdkVersion:"4.20.0",sequence:this._sequence,sid:at,timestamp:oV(dt),uid:ct,vid:it,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};this._extraInfo===void 0&&delete yt.callbackData;let At=JF(yt);if(At.byteLength<this._workerMessageLengthLimit){if(Ft("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){let Ct=function(It){for(var kt=1;kt<arguments.length;kt++){var Vt=arguments[kt]!=null?arguments[kt]:{};kt%2?jO(Object(Vt),!0).forEach(function(Bt){gt(It,Bt,Vt[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(It,Object.getOwnPropertyDescriptors(Vt)):jO(Object(Vt)).forEach(function(Bt){Object.defineProperty(It,Bt,Object.getOwnPropertyDescriptor(Vt,Bt))})}return It}({},yt);delete Ct.jpg,Et.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(Ct))}return At}{let Ct=this.quality*this._qualityRatio;return this.quality=Ct,await this.generateRequestData(s,{appId:_e,cname:tt,cid:rt,vid:it,sid:at,uid:ct})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=As.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=Us.CLOSED,this.emit(Cl.STATE_CHANGE,lp.CLOSED)}}function VO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function BO(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?VO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):VO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}let iV=Date.now(),sV=20,Cv=new Map,UE=new Map;async function GO(j){let s=Cv.get(j),$=Array.isArray(s)&&s[s.length-1],_e=UE.get(j);if(!$)return void(_e.isSyncing=!1);let tt={uid:$.uid,payload:C_($.payload)};_e.firstRecvTs===0&&(_e.firstRecvTs=$.recvTs,_e.firstSendTs=$.sendTs);let rt=$.sendTs-_e.firstSendTs,it=rt-(Date.now()-_e.firstRecvTs);it>0&&(_e.firstRecvTs=Date.now()-rt);let at=$.mediaDelay+it;at<=0?(s.pop(),WO($.context,tt),at=0):at=Math.min(at,sV),setTimeout(()=>s.length&&GO(j),at)}function WO(j,s){j.safeEmit(Jn.STREAM_MESSAGE,s.uid,s.payload),j.onStreamMessage&&j.onStreamMessage(s)}function aV(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,$=arguments.length>2?arguments[2]:void 0;if(!j.syncWithAudio)return WO($,{uid:j.uid,payload:C_(j.payload)});let _e="".concat($.id,"-").concat(j.uid),tt=Cv.get(_e)||[],rt=tt.findIndex(dt=>j.sendTs>=dt.sendTs),it=BO(BO({},j),{},{context:$,mediaDelay:s,recvTs:Date.now()});rt===-1?tt.push(it):tt.splice(rt,0,it),Cv.set(_e,tt);let at=!1;var ct;UE.has(_e)?at=!((ct=UE.get(_e))===null||ct===void 0||!ct.isSyncing):UE.set(_e,{isSyncing:at,firstRecvTs:0,firstSendTs:0}),at||GO(_e)}let cV=ir().name;function lV(){return!function(j,s,$){let _e=ir();if(_e.os!==To.IOS||!_e.osVersion)return!1;let tt=_e.osVersion.split(".");return $?s&&Number(tt[0])===j&&Number(tt[1])<s||Number(tt[0])<j:s?Number(tt[0])===j&&Number(tt[1])<=s||Number(tt[0])<j:Number(tt[0])<=j}(16,0,!0)&&!function(j,s,$){let _e=ir();if(_e.name!==lr.SAFARI||!_e.osVersion)return!1;let tt=_e.version.split(".");return $?s&&Number(tt[0])===j&&Number(tt[1])<s||Number(tt[0])<j:s?Number(tt[0])===j&&Number(tt[1])<=s||Number(tt[0])<j:Number(tt[0])<=j}(16,0,!0)}function HO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function Wu(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?HO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):HO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}Lo.setLogger(Et);class yr extends Fr{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var s;return((s=this._config)===null||s===void 0?void 0:s.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(s){let $;if(super(),gt(this,"store",void 0),gt(this,"_uid",void 0),gt(this,"_channelName",void 0),gt(this,"_uintUid",void 0),gt(this,"_users",[]),gt(this,"_config",void 0),gt(this,"_clientId",void 0),gt(this,"_appId",void 0),gt(this,"_sessionId",null),gt(this,"_key",void 0),gt(this,"_rtmConfig",{}),gt(this,"_joinInfo",void 0),gt(this,"_gateway",void 0),gt(this,"_statsCollector",void 0),gt(this,"_configDistribute",void 0),gt(this,"_leaveMutex",new Lo("client-leave")),gt(this,"_publishMutex",new Lo("client-publish")),gt(this,"_renewTokenMutex",new Lo("client-renewtoken")),gt(this,"_subscribeMutex",new Lo("client-subscribe")),gt(this,"_encryptionMode","none"),gt(this,"_encryptionSecret",null),gt(this,"_encryptionSalt",null),gt(this,"_proxyServer",void 0),gt(this,"_turnServer",{servers:[],mode:"auto"}),gt(this,"_cloudProxyServerMode","disabled"),gt(this,"_isDualStreamEnabled",!1),gt(this,"_defaultStreamFallbackType",void 0),gt(this,"_lowStreamParameter",void 0),gt(this,"_streamFallbackTypeCacheMap",new Map),gt(this,"_remoteStreamTypeCacheMap",new Map),gt(this,"_axiosCancelSource",As.CancelToken.source()),gt(this,"_audioVolumeIndicationInterval",void 0),gt(this,"_networkQualityInterval",void 0),gt(this,"_userOfflineTimeout",void 0),gt(this,"_streamRemovedTimeout",void 0),gt(this,"_injectStreamingClient",void 0),gt(this,"_liveTranscodeStreamingClient",void 0),gt(this,"_liveRawStreamingClient",void 0),gt(this,"_channelMediaRelayClient",void 0),gt(this,"_networkQualitySensitivity","normal"),gt(this,"_p2pChannel",void 0),gt(this,"_useLocalAccessPoint",!1),gt(this,"_setLocalAPVersion",void 0),gt(this,"_joinAndNotLeaveYet",!1),gt(this,"_numberOfJoinCount",0),gt(this,"_remoteDefaultVideoStreamType",void 0),gt(this,"_inspect",void 0),gt(this,"_moderation",void 0),gt(this,"_license",void 0),gt(this,"_pendingPublishedUsers",[]),gt(this,"ntpAlignErrorCount",0),gt(this,"remoteInboundOffset",0),gt(this,"_handleLocalTrackEnable",(_e,tt,rt)=>{this.publish(_e,!1).then(tt).catch(rt)}),gt(this,"_handleLocalTrackDisable",(_e,tt,rt)=>{this.unpublish(_e).then(tt).catch(rt)}),gt(this,"_handleUserOnline",_e=>{if(Ft("BLOCK_LOCAL_CLIENT")&&Yp(_e.uid,this.channelName))return void Et.debug("[".concat(_e.uid,"] will be ignored in local"));this.isStringUID&&typeof _e.uid!="string"&&Et.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));let tt=this._users.find(rt=>rt.uid===_e.uid);if(tt)tt._trust_in_room_=!0,tt._is_pre_created&&(tt._is_pre_created=!1,this.safeEmit(Jn.USER_JOINED,tt));else{let rt=new Bo(_e.uid,_e.uint_id||_e.uid);this._users.push(rt),Et.debug("[".concat(this._clientId,"] user online"),_e.uid),this.safeEmit(Jn.USER_JOINED,rt)}}),gt(this,"_handleUserOffline",_e=>{if(Ft("BLOCK_LOCAL_CLIENT")&&Yp(_e.uid,this.channelName))return;let tt=this._users.find(rt=>rt.uid===_e.uid);tt&&(this._handleRemoveStream(_e),this._handleRemoveDataChannels(_e),tt._audio_pre_subscribed||tt._video_pre_subscribed?tt._is_pre_created=!0:T_(this._users,tt),this._remoteStreamTypeCacheMap.delete(tt.uid),this._streamFallbackTypeCacheMap.delete(tt.uid),Et.debug("[".concat(this._clientId,"] user offline"),_e.uid,"reason:",_e.reason),this.safeEmit(Jn.USER_LEAVED,tt,_e.reason))}),gt(this,"_handleAddAudioOrVideoStream",(_e,tt,rt,it,at,ct,dt)=>{if(Ft("BLOCK_LOCAL_CLIENT")&&Yp(tt,this.channelName))return;let ut=this._users.find(mt=>mt.uid===tt);if(!ut)return void Et.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));Et.debug("[".concat(this._clientId,"] stream added with uid ").concat(tt,", type ").concat(_e)),this.store.subscribe(ut.uid,_e,void 0,void 0,void 0,Date.now());let pt=_e==="audio"?ut.hasAudio:ut.hasVideo;ut._uintid||(ut._uintid=at||tt),_e==="audio"?ut._trust_audio_stream_added_state_=!0:ut._trust_video_stream_added_state_=!0,_e==="audio"?(ut._audio_added_=!0,rt!==void 0&&(ut._audioSSRC=rt),it!==void 0&&(ut._cname=it),ct&&(ut._audioOrtc=ct)):(ut._video_added_=!0,rt!==void 0&&(ut._videoSSRC=rt),it!==void 0&&(ut._cname=it),dt!==void 0&&(ut._rtxSsrcId=dt),ct&&(ut._videoOrtc=ct)),(_e==="audio"?ut.hasAudio:ut.hasVideo)&&!pt&&(Et.info("[".concat(this._clientId,"] remote user ").concat(ut.uid," published ").concat(_e)),this.safeEmit(Jn.USER_PUBLISHED,ut,_e)),_e==="video"?An.onGatewayStream(this._sessionId,Co.ON_ADD_VIDEO_STREAM,kr.ON_ADD_VIDEO_STREAM,{peer:at||tt,ssrc:ut._videoSSRC}):An.onGatewayStream(this._sessionId,Co.ON_ADD_AUDIO_STREAM,kr.ON_ADD_AUDIO_STREAM,{peer:at||tt,ssrc:ut._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(ut,_e,rt).then(mt=>{if(mt&&(Et.debug("[".concat(this._clientId,"] resubscribe ").concat(_e," for user ").concat(ut.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof Uo))return this._p2pChannel.unsubscribe(ut,_e,!0).then(()=>this._subscribe(ut,_e,!0).catch(yt=>{Et.error("[".concat(this._clientId,"] resubscribe error"),yt.toString())}))}),this._p2pChannel.hasPendingRemoteMedia(ut,_e)&&(Et.debug("[".concat(this._clientId,"] resubscribe ").concat(_e," for user ").concat(ut.uid," after reconnect.")),this._subscribe(ut,_e,!0).catch(mt=>{Et.error("[".concat(this._clientId,"] resubscribe error"),mt.toString())}))}),gt(this,"_handleRemoveStream",_e=>{if(Ft("BLOCK_LOCAL_CLIENT")&&Yp(_e.uid,this.channelName))return;let tt=this._users.find(it=>it.uid===_e.uid);if(!tt)return void Et.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));Et.debug("[".concat(this._clientId,"] stream removed with uid ").concat(_e.uid));let rt=()=>{};tt.hasAudio&&tt.hasVideo?rt=()=>{Et.info("[".concat(this._clientId,"] remote user ").concat(tt.uid," unpublished audio track")),this.safeEmit(Jn.USER_UNPUBLISHED,tt,"audio"),Et.info("[".concat(this._clientId,"] remote user ").concat(tt.uid," unpublished video track")),this.safeEmit(Jn.USER_UNPUBLISHED,tt,"video")}:tt.hasVideo?rt=()=>{Et.info("[".concat(this._clientId,"] remote user ").concat(tt.uid," unpublished video track")),this.safeEmit(Jn.USER_UNPUBLISHED,tt,"video")}:tt.hasAudio&&(rt=()=>{Et.info("[".concat(this._clientId,"] remote user ").concat(tt.uid," unpublished audio track")),this.safeEmit(Jn.USER_UNPUBLISHED,tt,"audio")}),tt._video_pre_subscribed||tt._audio_pre_subscribed||(tt._trust_audio_stream_added_state_=!0,tt._trust_video_stream_added_state_=!0,tt._audio_added_=!1,tt._video_added_=!1,this._p2pChannel instanceof Uo&&this._p2pChannel.unsubscribe(tt).then(it=>{if(it)return this._gateway.unsubscribe(it,tt.uid)}),tt._audioSSRC=void 0,tt._videoSSRC=void 0,tt._audioOrtc=void 0,tt._videoOrtc=void 0,tt._rtxSsrcId=void 0),An.onGatewayStream(this._sessionId,Co.ON_REMOVE_STREAM,kr.ON_REMOVE_STREAM,{peer:_e.uint_id||_e.uid}),rt()}),gt(this,"_handleSetStreamLocalEnable",(_e,tt,rt)=>{if(Ft("BLOCK_LOCAL_CLIENT")&&Yp(tt,this.channelName))return;let it=this._users.find(dt=>dt.uid===tt);if(!it)return void Et.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));Et.debug("[".concat(this._clientId,"] local ").concat(_e," ").concat(rt?"enabled":"disabled"," with uid ").concat(tt));let at=_e==="audio"?it.hasAudio:it.hasVideo;if(_e==="audio"){it._trust_audio_enabled_state_=!0;let dt=it._audio_enabled_;if(it._audio_enabled_=rt,it._audio_enabled_===dt)return;{let ut=it._audio_enabled_?"enable-local-audio":"disable-local-audio";Et.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(tt,", msg: ").concat(ut)),this.safeEmit(Jn.USER_INFO_UPDATED,tt,ut)}}else{it._trust_video_enabled_state_=!0;let dt=it._video_enabled_;if(it._video_enabled_=rt,it._video_enabled_===dt)return;{let ut=it._video_enabled_?"enable-local-video":"disable-local-video";Et.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(tt,", msg: ").concat(ut)),this.safeEmit(Jn.USER_INFO_UPDATED,tt,ut)}}let ct=_e==="audio"?it.hasAudio:it.hasVideo;return at!==ct?!at&&ct?(Et.info("[".concat(this._clientId,"] remote user ").concat(tt," published ").concat(_e)),void this.safeEmit(Jn.USER_PUBLISHED,it,_e)):(_e==="video"&&it._videoTrack&&it._videoTrack._destroy(),_e==="audio"&&it._audioTrack,this._p2pChannel.muteRemote(it,_e),Et.info("[".concat(this._clientId,"] remote user ").concat(tt," unpublished ").concat(_e)),void this.safeEmit(Jn.USER_UNPUBLISHED,it,_e)):void 0}),gt(this,"_handleMuteStream",(_e,tt,rt)=>{if(Ft("BLOCK_LOCAL_CLIENT")&&Yp(_e,this.channelName))return;Et.debug("[".concat(this._clientId,"] receive mute message"),_e,tt,rt);let it=this._users.find(dt=>dt.uid===_e);if(!it)return void Et.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(_e));let at=tt==="audio"?it.hasAudio:it.hasVideo;if(tt==="audio"){it._trust_audio_mute_state_=!0;let dt=it._audio_muted_;if(it._audio_muted_=rt,it._audio_muted_===dt)return;{let ut=it._audio_muted_?"mute-audio":"unmute-audio";Et.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(_e,", msg: ").concat(ut)),this.safeEmit(Jn.USER_INFO_UPDATED,_e,ut)}}else{it._trust_video_mute_state_=!0;let dt=it._video_muted_;if(it._video_muted_=rt,it._video_muted_===dt)return;{let ut=it._video_muted_?"mute-video":"unmute-video";Et.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(_e,", msg: ").concat(ut)),this.safeEmit(Jn.USER_INFO_UPDATED,_e,ut)}}let ct=tt==="audio"?it.hasAudio:it.hasVideo;if(at!==ct){if(!at&&ct)return(tt==="audio"?it._audioSSRC:it._videoSSRC)?(Et.info("[".concat(this._clientId,"] remote user ").concat(_e," published ").concat(tt)),void this.safeEmit(Jn.USER_PUBLISHED,it,tt)):void Et.warning("[".concat(this._clientId,"] remote user ").concat(_e," receive ").concat(tt," unmute message  before add stream message, ").concat(tt," SSRC doesn't exist yet."));tt==="video"&&it._videoTrack&&!it._video_pre_subscribed&&it._videoTrack._destroy(),tt==="audio"&&it._audioTrack,this._p2pChannel.muteRemote(it,tt),Et.info("[".concat(this._clientId,"] remote user ").concat(_e," unpublished ").concat(tt)),this.safeEmit(Jn.USER_UNPUBLISHED,it,tt)}}),gt(this,"_handleP2PLost",async _e=>{Et.debug("[".concat(this._clientId,"] receive p2p lost"),_e),parseInt(_e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():Et.warning("[".concat(this._clientId,"] P2PLost stream not found"),_e)}),gt(this,"_handleTokenWillExpire",()=>{Et.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(Jn.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)}),gt(this,"_handleBeforeUnload",_e=>{_e.type==="beforeunload"&&_e.returnValue!==void 0&&_e.returnValue!==""||(this.leave(),Et.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))}),gt(this,"_handleUpdateNetworkQuality",()=>{if(this._networkQualitySensitivity==="normal")return;if(navigator&&navigator.onLine!==void 0&&!navigator.onLine)return void this.safeEmit(Jn.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});let _e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};_e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),_e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(Jn.NETWORK_QUALITY,_e)}),gt(this,"_handleP2PAddAudioOrVideoStream",(_e,tt,rt,it)=>{let at=this._users.find(dt=>dt.uid===tt);if(!at)return void Et.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));Et.debug("[".concat(this._clientId,"] stream added with uid ").concat(tt,", type ").concat(_e)),this.store.subscribe(at.uid,_e,void 0,void 0,void 0,Date.now());let ct=_e==="audio"?at.hasAudio:at.hasVideo;_e==="audio"?at._trust_audio_stream_added_state_=!0:at._trust_video_stream_added_state_=!0,_e==="audio"?(at._audio_added_=!0,rt!==void 0&&(at._audioSSRC=rt),it!==void 0&&(at._audioMid=it)):(at._video_added_=!0,rt!==void 0&&(at._videoSSRC=rt),it!==void 0&&(at._videoMid=it)),(_e==="audio"?at.hasAudio:at.hasVideo)&&!ct&&(Et.info("[".concat(this._clientId,"] remote user ").concat(at.uid," published ").concat(_e)),this.safeEmit(Jn.USER_PUBLISHED,at,_e)),this._p2pChannel.hasPendingRemoteMedia(at,_e)&&(Et.debug("[".concat(this._clientId,"] resubscribe ").concat(_e," for user ").concat(at.uid," after reconnect.")),this._subscribe(at,_e,!0).catch(dt=>{Et.error("[".concat(this._clientId,"] resubscribe error"),dt.toString())}))}),this._config=s,this._clientId=Ir(5,"client-"),this.store=new oM(s.codec,s.audioCodec,s.mode,this._clientId),this.store.clientCreated(),s.proxyServer&&this.setProxyServer(s.proxyServer,!0),s.turnServer&&this.setTurnServer(s.turnServer,!0),Et.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(Sl," build: ").concat(GS,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),s.clientRoleOptions)try{aA(s.clientRoleOptions),$=Object.assign({},s.clientRoleOptions)}catch(_e){Et.warning("[".concat(this._clientId,"] ").concat(_e.toString()))}this._statsCollector=new g0(this.store),this._statsCollector.onStatsException=(_e,tt,rt)=>{Et.debug("[".concat(this._clientId,"] receive exception msg, code: ").concat(_e,", msg: ").concat(tt,", uid: ").concat(rt)),this.safeEmit(Jn.EXCEPTION,{code:_e,msg:tt,uid:rt})},this._statsCollector.onUploadPublishDuration=(_e,tt,rt,it)=>{let at=this._users.find(ct=>ct.uid===_e);at&&An.peerPublishStatus(this._sessionId,{subscribeElapse:it,audioPublishDuration:tt,videoPublishDuration:rt,peer:at._uintid})},this.store.useDataChannel=vr().supportDataChannel&&Ft("SIGNAL_CHANNEL"),this.store.useP2P=s.mode==="p2p",this._gateway=new jM(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:s.websocketRetryConfig||po,httpRetryConfig:s.httpRetryConfig||po,forceWaitGatewayResponse:s.forceWaitGatewayResponse===void 0||s.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:s.role,clientRoleOptions:$}),this._configDistribute=new qM,this.store.useP2P?(this._p2pChannel=new Io(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new Uo(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(s,$,_e,tt,rt){let it=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],at=arguments.length>6&&arguments[6]!==void 0&&arguments[6];Tr("JOIN_GATEWAY_USE_443PORT_ONLY",it),Tr("JOIN_GATEWAY_USE_DUAL_DOMAIN",at);let ct=this._gateway.signal.websocket;return ct instanceof G1&&(ct.use443PortOnly=it,ct.tryDoubleDomain=at),async function(dt,ut,pt){g_.get(dt)||g_.set(dt,[]),m_.get(dt)||m_.set(dt,ut),uu.get(dt)||uu.set(dt,0);let mt=g_.get(dt),yt=m_.get(dt);if(!mt||!yt)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(uu.get(dt)===yt){let Vt=L1();mt.push(Vt),await Vt.promise}uu.set(dt,uu.get(dt)+1);for(var At=arguments.length,Ct=new Array(At>3?At-3:0),It=3;It<At;It++)Ct[It-3]=arguments[It];let kt=await pt(...Ct);return uu.set(dt,uu.get(dt)-1),uu.get(dt)===yt-1&&mt.length>0&&(mt[0].resolve(),mt.shift()),uu.get(dt)===0&&(g_.set(dt,[]),m_.set(dt,0),uu.set(dt,0)),kt}("client.join",Ft("JOIN_MAX_CONCURRENCY"),this.join.bind(this),s,$,_e,tt,rt)}async join(s,$,_e,tt,rt){let it=++this._numberOfJoinCount;this.store.joinStart(),tt&&(this.store.uid=tt);let at=rM(),ct=uN()?window.isSecureContext:"Browser Not Support";(!uN()&&!at||!window.isSecureContext)&&Et.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser");let dt=yS();this.connectionState==="DISCONNECTED"&&(this.store.avoidJoinStart=Math.round(Date.now()),Et.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart)));let ut=An.reportApiInvoke(dt,{name:mo.JOIN,options:[s,$,_e,tt],states:{isHttps:at,isSecureContext:ct},tag:Wr.TRACER});An.setAppId(s);try{if(!_e&&_e!==null)throw new Wt(Nt.INVALID_PARAMS,"Invalid token: ".concat(_e,". If you don not use token, set it to null"));_e&&zo(_e,"token",1,2047),zo(s,"appid",1,2047),KS($),tt&&YS(tt),rt&&zo(rt,"optionalInfo",1,2047)}catch(Ct){throw ut.onError(Ct),Ct}if(Et.info("[".concat(this._clientId,"] start join channel ").concat($,", join number: ").concat(it)),this._leaveMutex.isLocked&&(Et.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Et.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,this.connectionState!=="DISCONNECTED"){let Ct=new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw ut.onError(Ct),Ct}this._sessionId||(this._sessionId=dt,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";let pt=Wu(Wu({},this._rtmConfig),{},{clientId:this._clientId,appId:s,sid:this._sessionId,cname:$,uid:typeof tt!="string"?tt:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:_e||s,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:rt,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},this._remoteDefaultVideoStreamType!==void 0&&{defaultVideoStream:this._remoteDefaultVideoStreamType});if(this._useLocalAccessPoint&&(pt.setLocalAPVersion=this._setLocalAPVersion),typeof tt=="string"&&(pt.stringUid=tt,this._uintUid?(pt.uid=this._uintUid,this._uintUid=void 0):pt.uid=0),this._encryptionMode!=="none"&&this._encryptionSecret){if(pt.aesmode=this._encryptionMode,pt.aespassword=await p$(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(pt.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:$,appId:s,stringUid:pt.stringUid});let mt=this._sessionId;setTimeout(()=>{this.connectionState==="CONNECTING"&&mt===this._sessionId&&An.joinChannelTimeout(this._sessionId,5)},5e3);try{var yt;let Ct,It=pt.cloudProxyServer;if(vn(yt=["proxy3","proxy4","proxy5"]).call(yt,It)){let zt=Ft("PROXY_SERVER_TYPE3");Array.isArray(zt)?pt.proxyServer=zt[0]:pt.proxyServer=zt}if(An.setProxyServer(pt.proxyServer),Et.setProxyServer(pt.proxyServer),this.store.requestAPStart(),pt.stringUid&&!pt.uid){let zt;[zt,Ct]=await Jt.all([nw(pt.stringUid,pt,this._axiosCancelSource.token,this._config.httpRetryConfig||po,this.store),tw(pt,this._axiosCancelSource.token,this._config.httpRetryConfig||po,!0,this.store)]),Et.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(pt.stringUid," => ").concat(zt)),pt.uid=zt,Ct.gatewayInfo.uid=zt,Ct.gatewayInfo.res.uid=zt}else Ct=await tw(pt,this._axiosCancelSource.token,this._config.httpRetryConfig||po,!0,this.store);if(!this._joinAndNotLeaveYet)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),setTimeout(()=>{this._configDistribute.startGetConfigDistribute(pt,this._axiosCancelSource.token),this._configDistribute.on(B1.UPDATE_BITRATE_LIMIT,zt=>{this._p2pChannel.updateBitrateLimit(zt)})},0),this._key=_e||s;let kt=Ct.gatewayInfo,Vt=pt.uid?pt.uid:kt.uid;this._joinInfo=Wu(Wu({},pt),{},{cid:kt.cid,uid:Vt,vid:kt.vid,apResponse:kt.res,uni_lbs_ip:kt.uni_lbs_ip,gatewayAddrs:kt.gatewayAddrs}),this.store.intUid=Vt;let Bt=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));ut.onSuccess(Bt),this._appId=s,this._channelName=pt.cname,this._uid=Bt,this.store.uid=Bt,setTimeout(()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(ls()?"beforeunload":"pagehide",this._handleBeforeUnload)},0);let en=pt.stringUid?"string uid: ".concat(pt.stringUid,",uid: ").concat(pt.uid):"uid: ".concat(this._uid);return Et.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat($,",").concat(en)),setTimeout(()=>{Et.startUpload()},5e3),this.store.joinEnd(),At=this,vn(sp).call(sp,At)||sp.push(At),Bt}catch(Ct){let It=Array.isArray(Ct)?Ct[0]:Ct;throw It&&It.code===Nt.OPERATION_ABORTED?Et.warning("[".concat(this._clientId,"] join number: ").concat(it,", Joining channel failed, rollback"),It):Et.error("[".concat(this._clientId,"] join number: ").concat(it,", Joining channel failed, rollback"),It),It.code!==Nt.OPERATION_ABORTED&&this._numberOfJoinCount===it&&(this._gateway.state="DISCONNECTED",this._reset()),ut.onError(It),It}var At}_joinGateway(){if(!this._joinInfo||!this._key)throw new Wt(Nt.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!(this._joinInfo.cloudProxyServer!=="disabled"||this._joinInfo.proxyServer||!Ft("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then(s=>s).catch(s=>{if(s.code===Nt.INIT_WEBSOCKET_TIMEOUT)return this._gateway.leave(!0,Xn.FALLBACK),s;if(s.code===Nt.INIT_DATACHANNEL_TIMEOUT)return this._gateway.leave(!0,Xn.FALLBACK),s;throw s}).then(s=>{if(s instanceof Wt){if(s.code===Nt.INIT_WEBSOCKET_TIMEOUT){if(Et.info("[".concat(this._clientId,"] join timeout, fallback to proxy")),!this._joinInfo||!this._key)throw new Wt(Nt.INVALID_OPERATION);this._joinInfo.cloudProxyServer="fallback",this._cloudProxyServerMode="fallback",this.store.cloudProxyServerMode="fallback";let $=Ft("PROXY_SERVER_TYPE3");if(Array.isArray($))if(this._joinInfo.apUrl){let tt=/^https?:\/\/(.+?)(\/.*)?$/.exec(this._joinInfo.apUrl)[1].split("."),rt=tt.slice(tt.length-2).join(".");$.forEach(it=>{this._joinInfo&&vn(it).call(it,rt)&&(this._joinInfo.proxyServer=it)}),this._joinInfo.proxyServer||(this._joinInfo.proxyServer=$[0])}else this._joinInfo.proxyServer=$[0];else this._joinInfo.proxyServer=$;let _e=Ft("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return _e&&_e[1]&&_e[1]!=="443"&&Et.setProxyServer(this._joinInfo.proxyServer),Ft("STATS_COLLECTOR_PORT").toString()!=="443"&&An.setProxyServer(this._joinInfo.proxyServer),An.reportApiInvoke(this._sessionId,{name:mo.JOIN_FALLBACK_TO_PROXY,options:[this._joinInfo.proxyServer],tag:Wr.TRACER}).onSuccess(),this.safeEmit(Jn.JOIN_FALLBACK_TO_PROXY,this._joinInfo.proxyServer),Ft("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&this._joinInfo.turnServer.servers.forEach(tt=>{"forceturn"in tt&&(tt.forceturn=!0)}),this._gateway.join(this._joinInfo,this._key)}if(Et.info("[".concat(this._clientId,"] join by datachannel timeout, fallback to websocket")),!this._joinInfo||!this._key)throw new Wt(Nt.INVALID_OPERATION);return An.reportApiInvoke(this._sessionId,{name:mo.DATACHANNEL_FAILBACK,options:[this.store.clientId],tag:Wr.TRACER}).onSuccess(),this._joinGateway()}return s}).then(s=>s)}async leave(){Et.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(ls()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function($){let _e=sp.indexOf($);_e!==-1&&sp.splice(_e,1)}(this);let s=await this._leaveMutex.lock();if(this.connectionState==="DISCONNECTED")return Et.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void s();await this._gateway.leave(this.connectionState!=="CONNECTED"),Et.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),s()}async publish(s){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!Array.isArray(s)){if(!(s instanceof Yo))return this._publishDataChannel(s);s=[s]}if(s.length===0)throw new Wt(Nt.INVALID_PARAMS,"param list is empty");let _e=s;if(this._gateway.role==="audience")throw new Wt(Nt.INVALID_OPERATION,"audience can not publish stream");for(let rt of _e){if(!(rt instanceof Yo))throw new Wt(Nt.INVALID_PARAMS,"parameter is not local track");if(!rt._enabled&&$)throw new Wt(Nt.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(rt.getTrackId()))}Et.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(_e.map(rt=>"".concat(rt.getTrackId()," "))));let tt=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),$&&_e.forEach(rt=>{let it=this._configDistribute.getBitrateLimit();rt instanceof Hn&&it&&rt.setBitrateLimit(it.uplink)});try{await this._publishHighStream(_e),Et.info("[".concat(this._clientId,"] Publish success, id ").concat(_e.map(rt=>"".concat(rt.getTrackId()," "))))}catch(rt){throw Et.error("[".concat(this._clientId,"] publish error"),rt.toString()),rt}finally{tt()}}async _publishDataChannel(s){Sr(s.id,"id",0,65535,!0),np(s.ordered,"ordered"),zo(s.metadata,"metadata",0,512),Et.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(s.id));let $=await this._publishMutex.lock();try{if(this._p2pChannel.getAllDataChannels().findIndex(tt=>tt.id===s.id)!==-1)throw new Wt(Nt.INVALID_PARAMS,"Invalid id: ".concat(s.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||this._uid===void 0)throw new Wt(Nt.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&Ft("FORCE_TURN")&&!Ft("TURN_ENABLE_TCP")&&!Ft("TURN_ENABLE_UDP"))throw new Wt(Nt.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");let _e=new w4(s);await this._p2pChannel.publishDataChannel([_e]);try{let tt={streamId:s.id,ordered:s.ordered,maxRetransmits:Ft("DATASTREAM_MAX_RETRANSMITS"),metadata:s.metadata,channelId:_e._originDataChannelId};await this._gateway.publishDataChannel(this._uid,tt,!0)}catch(tt){if(tt.code!==Nt.DISCONNECT_P2P)throw tt}return await _e._waitTillOpen(),Et.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(_e.id)),_e}catch(_e){throw Et.error("[".concat(this._clientId,"] publish datachannels error"),_e.toString()),_e}finally{$()}}async unpublish(s){if(!this._joinInfo||this._uid===void 0)throw new Wt(Nt.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let $=[];if(s)if(Array.isArray(s))$=s;else{if(!(s instanceof Yo))return this._unpublishDataChannel([s]);$=[s]}else this.store.useP2P||await this._unpublishDataChannel(),$=this._p2pChannel.getAllTracks(!0);Et.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat($.map(tt=>"".concat(tt.getTrackId()," "))," "));let _e=await this._publishMutex.lock();try{if(this._p2pChannel instanceof Io){let tt=await this._p2pChannel.unpublish($);tt&&await this._gateway.sendExtensionMessage(Kr.UNPUBLISH,{unpubMsg:tt},!0)}else{let tt=await this._p2pChannel.unpublish($);tt&&await this._gateway.unpublish(tt,this._uid),Et.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat($.map(rt=>"".concat(rt.getTrackId()))))}}catch(tt){throw Et.error("[".concat(this._clientId,"] unpublish error"),tt.toString()),tt}finally{_e&&_e()}}async _unpublishDataChannel(s){s!==void 0&&s.length!==0||(s=this._p2pChannel.getAllDataChannels()),Et.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(s.map(_e=>"".concat(_e.id," "))," "));let $=await this._publishMutex.lock();try{let _e=await this._p2pChannel.unpublishDataChannel(s);_e&&await this._gateway.unpublishDataChannel(_e),Et.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(s.map(tt=>"".concat(tt.id))))}catch(_e){throw Et.error("[".concat(this._clientId,"] unpublish dataChannel error"),_e.toString()),_e}finally{$&&$()}}async subscribe(s,$,_e){return $==="datachannel"?this._subscribeDataChannel(s,_e):this._subscribe(s,$)}async presubscribe(s,$){if(vo($,"mediaType",["audio","video"]),this._p2pChannel instanceof Io)throw new Wt(Nt.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"can't presub when not join");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));let _e=$===Cn.AUDIO,tt=$===Cn.VIDEO,rt=await this._subscribeMutex.lock();try{let{ssrcId:it,ortc:at,rtxSsrcId:ct,cname:dt,uint_id:ut}=await this._gateway.presubscribe(s,$,!0);if(it==null)throw new Wt(Nt.UNEXPECTED_RESPONSE,"no ssrc id");let pt=this._users.find(yt=>yt.uid===s);pt||(pt=new Bo(s,ut||s),pt._is_pre_created=!0,this._users.push(pt)),dt&&(pt._cname=dt),pt._uintid||(pt._uintid=ut||s),_e&&(pt._audioSSRC=it,pt._audio_pre_subscribed=!0,at&&(pt._audioOrtc=at)),tt&&(pt._videoSSRC=it,pt._video_pre_subscribed=!0,at&&(pt._videoOrtc=at),ct!=null&&(pt._rtxSsrcId=ct)),Et.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(it)),await this._p2pChannel.subscribe(pt,$,it,ct,at);let mt=_e?pt._audioTrack:pt._videoTrack;if(!mt)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find remote track in user");return _e&&(pt._trust_audio_stream_added_state_=!0,pt._audio_added_=!0),tt&&(pt._trust_video_stream_added_state_=!0,pt._video_added_=!0),mt}catch(it){throw Et.error("[".concat(this._clientId,"] presub user ").concat(s," error"),it),it}finally{rt()}}async _subscribeDataChannel(s,$){var _e;if(Sr($,"channelId",0,65535,!0),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find(at=>at===s))throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid,", this user is not in the channel")),new Wt(Nt.INVALID_REMOTE_USER,"user is not in the channel");if(!s.hasAudio&&!s.hasVideo&&s._dataChannels.length===0)throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid,", user is not published")),new Wt(Nt.INVALID_REMOTE_USER,"user is not published");let tt=(_e=s._dataChannels)===null||_e===void 0?void 0:_e.find(at=>at.id===$);if(!tt)throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid," with mediaType datachannel, remote datachannel is not published")),new Wt(Nt.REMOTE_USER_IS_NOT_PUBLISHED);let rt=await this._subscribeMutex.lock();Et.info("[".concat(this._clientId,"] subscribe user ").concat(s.uid,", mediaType: datachannel"));try{let at=await this._p2pChannel.subscribeDataChannel(s,[tt]);if(at&&vn(at).call(at,tt.id))try{var it;if(!tt._originDataChannelId)throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid," with mediaType datachannel, cannot get RTCDatachannel")),new Wt(Nt.REMOTE_USER_IS_NOT_PUBLISHED);let ct={id:tt.id,datachannelId:tt._originDataChannelId,ordered:tt.ordered,maxRetransmits:tt.maxRetransmits,metadata:(it=tt.metadata)!==null&&it!==void 0?it:""};await this._gateway.subscribeDataChannel(s.uid,ct,!0)}catch(ct){if((ct==null?void 0:ct.code)!==Nt.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(s,[tt]),ct;await this._p2pChannel.unsubscribeDataChannel(s,[tt]),this._p2pChannel.setPendingRemoteDataChannel(s,tt.id)}return await tt._waitTillOpen(),Et.info("[".concat(this._clientId,"] subscribe success user ").concat(s.uid,", mediaType: datachannel")),tt}finally{rt()}}async _p2pSubscribe(s,$,_e){if(vo($,"mediaType",["audio","video"]),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(rt=>rt===s)){let rt=new Wt(Nt.INVALID_REMOTE_USER,"user is not in the channel");throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid,", this user is not in the channel")),rt}if(!s.hasAudio&&!s.hasVideo){let rt=new Wt(Nt.INVALID_REMOTE_USER,"user is not published");throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid,", user is not published")),rt}if(!_e&&($==="audio"&&!s.hasAudio||$==="video"&&!s.hasVideo)){let rt=new Wt(Nt.REMOTE_USER_IS_NOT_PUBLISHED);throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid," with mediaType ").concat($,", remote track is not published")),rt}let tt=await this._subscribeMutex.lock();Et.info("[".concat(this._clientId,"] subscribe user ").concat(s.uid,", mediaType: ").concat($));try{if(await this._p2pChannel.hasRemoteMediaWithLock(s,$))await this._p2pChannel.unmuteRemote(s,$);else try{let it=$==="audio"?s._audioSSRC:s._videoSSRC,at=$==="audio"?s._audioMid:s._videoMid;this.store.subscribe(s.uid,$,Date.now()),this._p2pChannel instanceof Io&&await this._p2pChannel.subscribe(s,$,it,at)}catch(it){throw it}Et.info("[".concat(this._clientId,"] subscribe success user ").concat(s.uid,", mediaType: ").concat($)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(s.uid,this._defaultStreamFallbackType).catch(it=>{Et.warning("[".concat(this._clientId,"] auto set fallback failed"),it)});let rt=$==="audio"?s._audioTrack:s._videoTrack;if(!rt)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find remote track in user object");return rt}catch(rt){throw Et.error("[".concat(this._clientId,"] subscribe user ").concat(s.uid," error"),rt),rt}finally{tt()}}async _subscribe(s,$,_e){if(this._p2pChannel instanceof Io)return this._p2pSubscribe(s,$);if(vo($,"mediaType",["audio","video"]),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find(dt=>dt===s)){let dt=new Wt(Nt.INVALID_REMOTE_USER,"user is not in the channel");throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid,", this user is not in the channel")),dt}if(!s.hasAudio&&!s.hasVideo){let dt=new Wt(Nt.INVALID_REMOTE_USER,"user is not published");throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid,", user is not published")),dt}if(!(_e||($!=="audio"||s.hasAudio&&s._audioSSRC!==void 0)&&($!=="video"||s.hasVideo&&s._videoSSRC!==void 0))){let dt=new Wt(Nt.REMOTE_USER_IS_NOT_PUBLISHED);throw Et.error("[".concat(this._clientId,"] can not subscribe ").concat(s.uid," with mediaType ").concat($,", remote track is not published")),dt}let tt=$==="audio"?s._audioSSRC:s._videoSSRC,rt=$==="audio"?s._audioOrtc:s._videoOrtc,it=$==="video"?s._rtxSsrcId:void 0,at={stream_type:$==="audio"?Cn.AUDIO:Cn.VIDEO,ssrcId:tt},ct=await this._subscribeMutex.lock();Et.info("[".concat(this._clientId,"] subscribe user ").concat(s.uid,", mediaType: ").concat($));try{if(await this._p2pChannel.hasRemoteMediaWithLock(s,$))await this._p2pChannel.unmuteRemote(s,$);else try{let ut=$==="audio"?s._audioSSRC:s._videoSSRC;ut!==void 0&&ut!==tt&&(tt=ut,rt=$==="audio"?s._audioOrtc:s._videoOrtc,it=$==="video"?s._rtxSsrcId:void 0,at={stream_type:$==="audio"?Cn.AUDIO:Cn.VIDEO,ssrcId:tt}),qo.markSubscribeStart(this.store.clientId,tt),this.store.subscribe(s.uid,$,Date.now()),await this._p2pChannel.subscribe(s,$,tt,it,rt);try{await this._gateway.subscribe(s.uid,at,!0)}catch(pt){if((pt==null?void 0:pt.code)!==Nt.WS_ABORT)throw await this._p2pChannel.unsubscribe(s,$),pt;await this._p2pChannel.unsubscribe(s,$,!0),this._p2pChannel.setPendingRemoteMedia(s,$)}this.store.subscribe(s.uid,$,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,s,$)}catch(ut){throw this._p2pChannel.reportSubscribeEvent(!1,ut==null?void 0:ut.code,s,$),ut}Et.info("[".concat(this._clientId,"] subscribe success user ").concat(s.uid,", mediaType: ").concat($)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(s.uid,this._defaultStreamFallbackType).catch(ut=>{Et.warning("[".concat(this._clientId,"] auto set fallback failed"),ut)});let dt=$==="audio"?s._audioTrack:s._videoTrack;if(!dt)throw new Wt(Nt.UNEXPECTED_ERROR,"can not find remote track in user object");return dt}catch(dt){throw Et.error("[".concat(this._clientId,"] subscribe user ").concat(s.uid," error"),dt),dt}finally{ct()}}async massSubscribe(s){if(Pu(s,"subscribeList"),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe stream, not joined");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));let $=Date.now(),_e=new Map,tt=await this._subscribeMutex.lock();Et.info("[".concat(this._clientId,"]start massSubscribe user ").concat(s.map(ct=>{let{user:dt,mediaType:ut}=ct;return"user: ".concat(dt==null?void 0:dt.uid,", mediaType: ").concat(ut)}).join("; ")));let rt=(s=[...s]).map(ct=>{let{user:dt,mediaType:ut}=ct;return{user:dt,mediaType:ut}}),it=await this._p2pChannel.globalLock();try{var at;for(let dt=s.length-1;dt>=0;dt--){let ut=s[dt],{user:pt,mediaType:mt}=ut;if(vo(mt,"mediaType",["audio","video"]),!pt){let Ct=new Wt(Nt.INVALID_PARAMS,"user property does not exist in subscribeList item");throw Et.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),Ct}if(!this._users.find(Ct=>Ct===pt)){let Ct=new Wt(Nt.INVALID_REMOTE_USER,"user is not in the channel");Et.error("[".concat(this._clientId,"] can not massSubscribe ").concat(pt.uid,", this user is not in the channel")),rt[dt].error=Ct,s.splice(dt,1);continue}if(mt==="audio"&&(!pt.hasAudio||pt._audioSSRC===void 0)||mt==="video"&&(!pt.hasVideo||pt._videoSSRC===void 0)){let Ct=new Wt(Nt.REMOTE_USER_IS_NOT_PUBLISHED);Et.error("[".concat(this._clientId,"] can not subscribe ").concat(pt.uid," with mediaType ").concat(mt,", remote user is not published")),rt[dt].error=Ct,s.splice(dt,1);continue}let yt=_o.Video|_o.LwoVideo,At=_e.get(pt);if(At){if(mt==="video"?At&yt:At&_o.Audio){s.splice(dt,1),Et.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(pt.uid,", mediaType:").concat(mt," twice"));continue}_e.set(pt,At|(mt==="video"?yt:_o.Audio))}else _e.set(pt,mt==="video"?yt:_o.Audio)}for(let dt=s.length-1;dt>=0;dt--){let ut=s[dt],{user:pt,mediaType:mt}=ut,yt=_o.Video|_o.LwoVideo;if(this._p2pChannel.hasRemoteMedia(pt,mt)){await this._p2pChannel.unmuteRemoteNoLock(pt,mt);let At=_e.get(pt);_e.set(pt,mt==="video"?At^yt:At^_o.Audio),s.splice(dt,1)}}this.store.massSubscribe(s.map(dt=>({userId:dt.user.uid,type:dt.mediaType})),$);let ct=zp(at=Array.from(_e.entries())).call(at,(dt,ut)=>{let[pt,mt]=ut;if(mt===0)return dt;let yt={stream_id:pt.uid,stream_type:mt};return mt&_o.Audio&&(yt.audio_ssrc=pt._audioSSRC),mt&_o.Video&&(yt.video_ssrc=pt._videoSSRC),dt.push(yt),dt},[]);try{s.length>0&&await this._p2pChannel.massSubscribeNoLock(s.map(ut=>{let{user:pt,mediaType:mt}=ut;return{user:pt,mediaType:mt,ssrcId:mt===Cn.VIDEO?pt._videoSSRC:pt._audioSSRC,rtxSsrcId:mt===Cn.VIDEO?pt._rtxSsrcId:void 0}}));let dt=new Map;if(ct.length>0){let ut=await this._gateway.subscribeAll(ct,!0);((ut==null?void 0:ut.users)||[]).forEach(pt=>{let{stream_id:mt,video_error_code:yt,audio_error_code:At,error_code:Ct}=pt;(yt||At||Ct)&&dt.set(mt,{video_error_code:yt,audio_error_code:At,error_code:Ct})})}if(Array.from(dt.entries()).length>0){let ut=Array.from(dt.entries()).map(pt=>{let mt,[yt,At]=pt;return At.error_code||At.video_error_code&&At.audio_error_code?mt=void 0:At.video_error_code?mt=Cn.VIDEO:At.audio_error_code&&(mt=Cn.AUDIO),{user:this.remoteUsers.find(Ct=>Ct.uid===yt),mediaType:mt}});await this._p2pChannel.massUnsubscribeNoLock(ut)}for(let ut of rt){let pt=dt.get(ut.user.uid);if(pt){let mt=pt.error_code||ut.mediaType==="audio"&&pt.audio_error_code||ut.mediaType==="video"&&pt.video_error_code;if(mt){let yt=Xp(mt);Et.error("user:".concat(ut.user.uid," mediaType:").concat(ut.mediaType," has massSubscribe error ").concat(yt.desc)),ut.error=new Wt(Nt.SUBSCRIBE_FAILED,"code ".concat(mt,": ").concat(yt.desc))}}ut.error||(ut.mediaType==="video"?ut.track=ut.user.videoTrack:ut.track=ut.user.audioTrack)}return this.store.massSubscribe(rt.filter(ut=>!ut.error).map(ut=>({userId:ut.user.uid,type:ut.mediaType})),void 0,Date.now()),rt.forEach(ut=>{var pt;An.subscribe(this.store.sessionId,{succ:!!ut.error,ec:((pt=ut.error)===null||pt===void 0?void 0:pt.code)||null,video:ut.mediaType===Cn.VIDEO,audio:ut.mediaType===Cn.AUDIO,peerid:ut.user.uid,subscribeRequestid:ut.mediaType===Cn.VIDEO?ut.user._videoSSRC:ut.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-$)},!0)}),Et.info("[".concat(this._clientId,"] massSubscribe success ").concat(s.map(ut=>{let{user:pt,mediaType:mt}=ut;return"user: ".concat(pt==null?void 0:pt.uid,", mediaType: ").concat(mt)}).join("; "))),rt}catch(dt){throw await this._p2pChannel.massUnsubscribeNoLock(s),dt}}finally{it(),tt()}}async unsubscribe(s,$,_e){if($||this.store.useP2P){if($==="datachannel")return this._unsubscribeDataChannel(s,_e)}else await this._unsubscribeDataChannel(s,_e);if($&&vo($,"mediaType",["audio","video"]),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find(rt=>rt===s)){let rt=new Wt(Nt.INVALID_REMOTE_USER,"user is not in the channel");throw Et.error("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),rt}Et.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(s.uid,", mediaType: ").concat($));let tt=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof Io)await this._p2pChannel.unsubscribe(s,$);else{let rt=await this._p2pChannel.unsubscribe(s,$);rt&&await this._gateway.unsubscribe(rt,s.uid),$&&$!=="audio"||(s._audio_pre_subscribed=!1),$&&$!=="video"||(s._video_pre_subscribed=!1),s._is_pre_created&&T_(this._users,s),Et.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(s.uid,", mediaType: ").concat($))}}catch(rt){if(rt.code===Nt.DISCONNECT_P2P)return void Et.warning("disconnecting p2p, abort unsubscribe request.");throw Et.error("[".concat(this._clientId,"] unsubscribe user ").concat(s.uid," error"),rt.toString()),rt}finally{tt()}}async _unsubscribeDataChannel(s,$){if($&&Sr($,"id",0,65535,!0),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find(tt=>tt===s)){let tt=new Wt(Nt.INVALID_REMOTE_USER,"user is not in the channel");throw Et.error("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid,", user is not in the channel")),tt}let _e;if(typeof $=="number"){let tt=s._dataChannels.find(rt=>rt.id===$);tt&&(_e=[tt])}else _e=s._dataChannels;if(_e===void 0){let tt=new Wt(Nt.REMOTE_USER_IS_NOT_PUBLISHED);throw Et.error("[".concat(this._clientId,"] can not unsubscribe ").concat(s.uid," with channelId ").concat($,", remote datachannel is not published")),tt}Et.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(s.uid,", mediaType: datachannel, ids: ").concat(_e.map(tt=>tt.id)));try{let tt=await this._p2pChannel.unsubscribeDataChannel(s,_e);tt&&await this._gateway.unsubscribeDataChannel(tt,s.uid),Et.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(s.uid,", mediaType: datachannel, ids: ").concat(tt))}catch(tt){if(tt.code===Nt.DISCONNECT_P2P)return void Et.warning("disconnecting p2p, abort unsubscribe request.");throw Et.error("[".concat(this._clientId,"] unsubscribe user ").concat(s.uid," error"),tt.toString()),tt}}async massUnsubscribe(s){if(Pu(s,"unsubscribeList"),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");Et.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(s.map(_e=>{let{user:tt,mediaType:rt}=_e;return"user: ".concat(tt==null?void 0:tt.uid,", mediaType: ").concat(rt,";")}).join())),s=[...s];let $=new Map;for(let _e=s.length-1;_e>=0;_e--){let{user:tt,mediaType:rt}=s[_e];if(!tt){let at=new Wt(Nt.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw Et.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),at}if(vo(rt,"mediaType",["video","audio",void 0]),!this._users.find(at=>at===tt)){Et.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(tt.uid,", user is not in the channel")),s.splice(_e,1);continue}let it=_o.Video|_o.LwoVideo;if($.has(tt)){let at=$.get(tt),ct;switch(rt){case"video":ct=at&it;break;case"audio":ct=at&_o.Audio;break;default:ct=at&(_o.Audio|it)}if(ct){Et.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(tt.uid,",mediaType:").concat(rt," twice.")),s.splice(_e,1);continue}rt?rt==="audio"?$.set(tt,at|_o.Audio):rt==="video"&&$.set(tt,at|it):$.set(tt,at|_o.Audio|it)}else rt?rt==="audio"?$.set(tt,_o.Audio):rt==="video"&&$.set(tt,it):$.set(tt,_o.Audio|it)}try{let _e=await this._p2pChannel.massUnsubscribe(s);_e&&await this._gateway.massUnsubscribe(_e),Et.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(s.map(tt=>{let{user:rt,mediaType:it}=tt;return"user: ".concat(rt==null?void 0:rt.uid,", mediaType: ").concat(it,";")}).join()))}catch(_e){if(_e.code===Nt.DISCONNECT_P2P)return void Et.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw Et.error("[".concat(this._clientId,"] massUnsubscribe error"),_e.toString()),_e}}async setLowStreamParameter(s){(function(_e){if(!_e)throw new rn(Nt.INVALID_PARAMS);Gr(_e.width)||gS(_e.width,"streamParameter.width"),Gr(_e.height)||gS(_e.height,"streamParameter.height"),Gr(_e.framerate)||gS(_e.framerate,"streamParameter.framerate"),Gr(_e.bitrate)||Sr(_e.bitrate,"streamParameter.bitrate")})(s),(!s.width&&s.height||s.width&&!s.height)&&Et.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Et.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(s));let $=this._configDistribute.getLowStreamConfigDistribute();if($&&$.bitrate&&s.bitrate&&$.bitrate<s.bitrate&&(s.bitrate=$.bitrate),this._lowStreamParameter=s,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(s,an.LocalVideoLowTrack)}async enableDualStream(){if(!vr().supportDualStream)throw An.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Wt(Nt.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new Wt(Nt.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(s){throw An.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),s}this._isDualStreamEnabled=!0,An.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),Et.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(an.LocalVideoLowTrack))try{let s=await this._p2pChannel.unpublishLowStream();s&&await this._gateway.unpublish(s,this._joinInfo.stringUid||this._joinInfo.uid)}catch(s){throw An.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),s}this._isDualStreamEnabled=!1,An.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),Et.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(s,$){if(function(_e){vo(_e,"role",["audience","host"])}(s),$&&aA($),this.mode==="rtc"||this.mode==="p2p")throw Et.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new Wt(Nt.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if($&&$.level&&s==="host")throw new Wt(Nt.INVALID_OPERATION,"host mode can not set audience latency level");if(s==="audience"&&this._p2pChannel.hasLocalMedia())throw new Wt(Nt.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(s,$),this._config.role=s,Et.info("[".concat(this._clientId,"] set client role to ").concat(s,", level: ").concat($&&$.level))}getRemoteInboundOffset(){var s;let $=(s=this._p2pChannel.getStats())===null||s===void 0?void 0:s.audioSend[0];if(!$||!$.timestamp)return 0;let _e=$.timestamp-Date.now();return Math.abs(_e)>1e3+$.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?_e:0}getNtpWallTimeInMs(){return document.visibilityState==="visible"&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(s,$){if(zo(s,"proxyServer"),!$){if(this.connectionState!=="DISCONNECTED")throw new Wt(Nt.INVALID_OPERATION,"Set proxy server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Wt(Nt.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=s,An.setProxyServer(this._proxyServer),Et.setProxyServer(this._proxyServer),Et.info("[".concat(this._clientId,"] Set proxy server ").concat($?"by initialize call":""," success."))}setTurnServer(s,$){if(Array.isArray(s)||(s=[s]),!$){if(this.connectionState!=="DISCONNECTED")throw new Wt(Nt.INVALID_OPERATION,"Set turn server before join channel");if(this._cloudProxyServerMode!=="disabled"||this._useLocalAccessPoint)throw new Wt(Nt.INVALID_OPERATION,"You have already set the proxy")}if(Pm(s))return this._turnServer={servers:s,mode:"original-manual"},void Et.info("[".concat(this._clientId,"] Set original turnserver ").concat($?"by initialize call":""," success: ").concat(s.map(_e=>_e.urls).join(","),"."));s.forEach(_e=>sA(_e)),this._turnServer={servers:s,mode:"manual"},Et.info("[".concat(this._clientId,"] Set turnserver ").concat($?"by initialize call":""," success."))}setLicense(s){if(this.connectionState!=="DISCONNECTED")throw new Wt(Nt.INVALID_OPERATION,"you should set license before join channel");if(zo(s,"license",32,32),!/^[A-Za-z\d]+$/.test(s))throw new Wt(Nt.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=s,Et.info("[".concat(this._clientId,"] set license success"),s)}startProxyServer(s){if(this.connectionState!=="DISCONNECTED")throw new Wt(Nt.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||this._turnServer.mode==="manual"||this._useLocalAccessPoint)throw new Wt(Nt.INVALID_OPERATION,"You have already set the proxy");let $=[3,4,5],_e;switch(s===void 0&&(s=3),s){case 1:case 2:throw new Wt(Nt.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:_e="proxy3";break;case 4:_e="proxy4";break;case 5:_e="proxy5";break;default:throw new Wt(Nt.INVALID_PARAMS,"proxy server mode must be ".concat($.join("|")))}this._cloudProxyServerMode=_e,this.store.cloudProxyServerMode=_e,Et.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if(this.connectionState!=="DISCONNECTED")throw new Wt(Nt.INVALID_OPERATION,"Stop proxy server after leave channel");An.setProxyServer(),Et.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",Et.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(s){if(!s.accessPoints)throw new Wt(Nt.INVALID_PARAMS,"accessPoints is required.");Pu(s.accessPoints.serverList,"accessPoints.serverList"),zo(s.accessPoints.domain,"accessPoints.domain");let $=(yt,At)=>{Sr(yt,At,0,65535,!0)},_e=443;if(s.accessPoints.port&&($(s.accessPoints.port,"accessPoints.port"),_e=s.accessPoints.port),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Wt(Nt.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");Ft("CLOSE_AFB_FOR_LOCAL_AP")&&(Tr("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),Tr("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));let tt=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,rt=s.accessPoints.domain,it=s.accessPoints.serverList.map(yt=>tt.test(yt)?"".concat(yt.replace(/\./g,"-"),".").concat(rt):yt),at=it.map(yt=>"".concat(yt,":").concat(_e));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,Tr("WEBCS_DOMAIN",at),Tr("WEBCS_DOMAIN_BACKUP_LIST",at),Tr("GATEWAY_DOMAINS",[rt]),s.report&&s.report.hostname&&Array.isArray(s.report.hostname)&&s.report.hostname.length?(Pu(s.report.hostname,"report.hostname"),Tr("EVENT_REPORT_DOMAIN",s.report.hostname[0]),Tr("EVENT_REPORT_BACKUP_DOMAIN",s.report.hostname[1]||s.report.hostname[0])):(Tr("EVENT_REPORT_DOMAIN",it[0]),Tr("EVENT_REPORT_BACKUP_DOMAIN",it[1]||it[0]));let ct=6443;s.report&&s.report.port&&($(s.report.port,"report.port"),ct=s.report.port),Tr("STATS_COLLECTOR_PORT",ct),s.report?Tr("ENABLE_EVENT_REPORT",!0):Tr("ENABLE_EVENT_REPORT",!1);let dt="";s.log&&s.log.hostname&&Array.isArray(s.log.hostname)&&s.log.hostname.length?(Pu(s.log.hostname,"log.hostname"),dt=s.log.hostname[0]):dt=it[0];let ut=6444;s.log&&s.log.port&&($(s.log.port,"log.port"),ut=s.log.port),Tr("LOG_UPLOAD_SERVER","".concat(dt,":").concat(ut));let pt=[];s.cds&&s.cds.hostname&&Array.isArray(s.cds.hostname)&&s.cds.hostname.length?(Pu(s.cds.hostname,"cds.hostname"),pt=s.cds.hostname):pt=it;let mt=443;s.cds&&s.cds.port&&($(s.cds.port,"cds.port"),mt=s.cds.port),Tr("CDS_AP",pt.map(yt=>"".concat(yt,":").concat(mt))),s.cds?Tr("ENABLE_CONFIG_DISTRIBUTE",!0):Tr("ENABLE_CONFIG_DISTRIBUTE",!1),Et.info("set local access point v2 success")}setLocalAccessPoints(s,$){if(Pu(s,"serverList"),zo($,"domain"),this._proxyServer||this._cloudProxyServerMode!=="disabled")throw new Wt(Nt.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");let _e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;s=s.map(tt=>_e.test(tt)?"".concat(tt.replace(/\./g,"-"),".").concat($):tt),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,Tr("WEBCS_DOMAIN",s),Tr("WEBCS_DOMAIN_BACKUP_LIST",s),Tr("GATEWAY_DOMAINS",[$]),Tr("EVENT_REPORT_DOMAIN",s[0]),Tr("EVENT_REPORT_BACKUP_DOMAIN",s[1]||s[0]),Tr("LOG_UPLOAD_SERVER","".concat(s[0],":6444")),Et.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(s){if(vo(s,"streamType",[0,1]),this._remoteDefaultVideoStreamType=s,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(s),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch($){throw Et.error("[".concat(this._clientId,"] set default remote video stream type error"),$.toString()),$}else Et.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(s))}async setRemoteVideoStreamType(s,$){vo($,"streamType",[0,1]);try{await this._gateway.setRemoteVideoStreamType(s,$),setTimeout(()=>{let _e=this._users.find(tt=>tt.uid===s);_e&&_e.videoTrack&&_e.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(_e){throw Et.error("[".concat(this._clientId,"] set remote video stream type error"),_e.toString()),_e}Et.info("[".concat(this._clientId,"] set remote ").concat(s," video stream type to ").concat($)),this._remoteStreamTypeCacheMap.set(s,$)}async setStreamFallbackOption(s,$){vo($,"fallbackType",[0,1,2]);try{await this._gateway.setStreamFallbackOption(s,$)}catch(_e){throw Et.error("[".concat(this._clientId,"] set stream fallback option"),_e.toString()),_e}Et.info("[".concat(this._clientId,"] set remote ").concat(s," stream fallback type to ").concat($)),this._streamFallbackTypeCacheMap.set(s,$)}setEncryptionConfig(s,$,_e){(function(rt){vo(rt,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])})(s),zo($,"secret");let tt=["aes-128-gcm2","aes-256-gcm2"];if(vn(tt).call(tt,s)){if(!_e||!(_e instanceof Uint8Array&&_e.length===32))throw new Wt(Nt.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(_e)throw new Wt(Nt.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp(`^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'"|{}\\[\\]])(?=.{8,})`).test($)||Et.warning(`The secret is not strong:
      The secret must contain at least 1 lowercase alphabetical character,
      The secret must contain at least 1 uppercase alphabetical character,
      The secret must contain at least 1 numeric character,
      The secret must contain at least one special character,
      The secret must be eight characters or longer.
      `),this._encryptionMode=s,this._encryptionSecret=$,_e&&(this._encryptionSalt=xm(_e))}async renewToken(s){if(zo(s,"token",1,2047),!this._key||!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"renewToken should not be called before user join");let $=this._key;this._key=s,this._joinInfo&&(this._joinInfo.token=s);let _e=await this._renewTokenMutex.lock();try{if(Ft("USE_NEW_TOKEN")){Et.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));let tt=await YM(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||po);Et.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:s,ticket:tt})}else Et.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:s});Et.debug("[".concat(this._clientId,"] renewToken success"))}catch(tt){throw this._key=$,this._joinInfo.token=$,Et.error("[".concat(this._clientId,"] renewToken failed"),tt.toString()),tt}finally{_e()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?Et.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval(()=>{let s=this._p2pChannel.getAudioLevels();this.safeEmit(Jn.VOLUME_INDICATOR,s)},Ft("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){let s=this._statsCollector.getRTCStats(),$=this._gateway.getInChannelInfo();return s.Duration=Math.round($.duration/1e3),s}async startLiveStreaming(s,$){if(!$){if(this.codec!=="h264")throw new Wt(Nt.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new Wt(Nt.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(s)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(s))throw new Wt(Nt.LIVE_STREAMING_TASK_CONFLICT);let _e=$?bo.TRANSCODE:bo.RAW;return this._createLiveStreamingClient(_e).startLiveStreamingTask(s,_e)}setLiveTranscoding(s){return this._createLiveStreamingClient(bo.TRANSCODE).setTranscodingConfig(s)}async stopLiveStreaming(s){let $=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter(_e=>_e&&_e.hasUrl(s));if(!$.length)throw new Wt(Nt.INVALID_PARAMS,"can not find live streaming url to stop");await Jt.all($.map(_e=>_e&&_e.stopLiveStreamingTask(s)))}async addInjectStreamUrl(s,$){if(!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");let _e=this._createLiveStreamingClient(bo.INJECT);_e.setInjectStreamConfig($,0),await _e.startLiveStreamingTask(s,bo.INJECT)}async removeInjectStreamUrl(){var s;let $=this._createLiveStreamingClient(bo.INJECT),_e=Array.from(nu(s=$.streamingTasks).call(s)).find(tt=>tt.mode===bo.INJECT);if(!this._joinInfo||!_e)throw new Wt(Nt.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await $.stopLiveStreamingTask(_e.url)}async startChannelMediaRelay(s){sO(s),await this._createChannelMediaRelayClient().startChannelMediaRelay(s)}async updateChannelMediaRelay(s){sO(s),await this._createChannelMediaRelayClient().updateChannelMediaRelay(s)}async stopChannelMediaRelay(){await this._createChannelMediaRelayClient().stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}sendStreamMessage(s){let $=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"can not send data stream, not joined");if((typeof s=="string"||s instanceof Uint8Array)&&(s={payload:s}),typeof s.payload=="string"){let _e=new TextEncoder;s.payload=_e.encode(s.payload)}if(new Blob([s.payload]).size>1024)throw new Wt(Nt.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Pn.DATA_STREAM,{payload:xm(s.payload),syncWithAudio:s.syncWithAudio,sendTs:Date.now()-iV},!$)}sendMetadata(s){if(!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([s]).size>1024)throw new Wt(Nt.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Pn.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:xm(s)})}async sendCustomReportMessage(s){if(Array.isArray(s)||(s=[s]),s.forEach(sM),!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"can not send custom report, not joined");await An.sendCustomReportMessage(this._joinInfo.sid,s)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(s,$){vo($.spatialLayer,"spatialLayer",[0,1,2,3]),vo($.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(s,$)}catch(_e){throw Et.error("[".concat(this._clientId,"] pick SVC layer failed"),_e.toString()),_e}}async setRTMConfig(s){let{apRTM:$=!1,rtmFlag:_e}=s;if(np($,"apRTM"),Sr(_e,"rtmFlag",0),this._rtmConfig.apRTM=$,this._rtmConfig.rtmFlag=_e,Et.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(s)," in ").concat(this.connectionState," state")),(this.connectionState==="CONNECTED"||this.connectionState==="RECONNECTING")&&this._joinInfo)return this._joinInfo.apRTM=$,this._joinInfo.rtmFlag=_e,this._gateway.setRTM2Flag(_e)}_reset(){if(Et.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=As.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._pendingPublishedUsers=[],this._users.forEach(s=>{s._audioTrack&&s._audioTrack._destroy(),s._videoTrack&&s._videoTrack._destroy(),s._dataChannels&&(s._dataChannels.forEach($=>$._close()),s._dataChannels.length=0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._cloudProxyServerMode==="fallback"&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Lo("client-publish"),this._subscribeMutex=new Lo("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch{}if(this._moderation)try{this.setImageModeration(!1)}catch{}}_startSession(s,$){var _e;let tt=s||yS();s?Et.debug("[".concat(this._clientId,"] new Session ").concat(tt)):Et.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(tt));let rt=s?"":this._sessionId||"";this._sessionId=tt,this.store.sessionId=tt;let it={lts:new Date().getTime(),mode:this.mode,stringUid:($==null?void 0:$.stringUid)||((_e=this._joinInfo)===null||_e===void 0?void 0:_e.stringUid),channelProfile:this.mode==="live"?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:rt,clientRole:this.role==="audience"?2:1};$?An.sessionInit(this._sessionId,Wu({cname:$.channel,appid:$.appId},it)):this._joinInfo?An.sessionInit(this._sessionId,Wu({cname:this._joinInfo.cname,appid:this._joinInfo.appId},it)):this._gateway.joinInfo&&An.sessionInit(this._sessionId,Wu({cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId},it)),this._joinInfo&&(this._joinInfo.sid=tt),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=tt)}async _publishHighStream(s){if(!this._joinInfo||this._uid===void 0)throw new Wt(Nt.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(this._turnServer.mode==="auto"&&Ft("FORCE_TURN")&&!Ft("TURN_ENABLE_TCP")&&!Ft("TURN_ENABLE_UDP"))throw new Wt(Nt.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");Et.debug("[".concat(this._clientId,"] publish high stream"));try{let _e=await this._p2pChannel.publish(s,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof Io){let tt=(await _e.next()).value;if(tt){try{await this._gateway.sendExtensionMessage(Kr.PUBLISH,tt,!0)}catch(rt){throw _e.throw(rt),rt}await _e.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{let tt=(await _e.next()).value;if(tt){var $;let rt;try{rt=await this._gateway.publish(this._uid,tt,!0)}catch(it){if(it.code!==Nt.DISCONNECT_P2P)throw _e.throw(it),it}await _e.next((($=rt)===null||$===void 0?void 0:$.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(let rt of s)rt instanceof Hn&&rt._encoderConfig&&this._gateway.setVideoProfile(rt._encoderConfig),!rt.muted&&rt.enabled||await this._p2pChannel.muteLocalTrack(rt)}}catch(_e){if(this._p2pChannel.reportPublishEvent(!1,_e==null?void 0:_e.code,s),(_e==null?void 0:_e.code)===Nt.WS_ABORT)return;throw _e}}async _publishLowStream(){if(!this._joinInfo||this._uid===void 0)throw new Wt(Nt.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this.connectionState!=="CONNECTED"&&this.connectionState!=="RECONNECTING")throw new Wt(Nt.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));Et.debug("[".concat(this._clientId,"] publish low stream"));let s=this._configDistribute.getLowStreamConfigDistribute();s&&s.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&s.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=s.bitrate));try{let _e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),tt=(await _e.next()).value;if(tt){var $;let rt;try{rt=await this._gateway.publish(this._uid,tt,!0)}catch(it){if(it.code!==Nt.DISCONNECT_P2P)throw _e.throw(it),it}_e.next((($=rt)===null||$===void 0?void 0:$.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(_e){if(this._p2pChannel.reportPublishEvent(!1,_e==null?void 0:_e.code,void 0,!0),(_e==null?void 0:_e.code)===Nt.WS_ABORT)return;throw _e}}_createLiveStreamingClient(s){if(!this._joinInfo||!this._appId)return new Wt(Nt.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();let $=()=>new UF(this._joinInfo,this._config.websocketRetryConfig||po,this._config.httpRetryConfig||po),_e=tt=>{tt.onLiveStreamError=(rt,it)=>{An.reportApiInvoke(this._sessionId,{name:mo.ON_LIVE_STREAM_ERROR,options:[rt,it],tag:Wr.TRACER}).onSuccess(),this.safeEmit(Jn.LIVE_STREAMING_ERROR,rt,it)},tt.onLiveStreamWarning=(rt,it)=>{An.reportApiInvoke(this._sessionId,{name:mo.ON_LIVE_STREAM_WARNING,options:[rt,it],tag:Wr.TRACER}).onSuccess(),this.safeEmit(Jn.LIVE_STREAMING_WARNING,rt,it)},tt.on(jm.REQUEST_WORKER_MANAGER_LIST,(rt,it,at)=>{if(!this._joinInfo)return at(new Wt(Nt.INVALID_OPERATION,"can not find join info to get worker manager"));ow(rt,this._joinInfo,this._axiosCancelSource.token,po).then(it).catch(at)})};switch(s){case bo.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=$(),_e(this._liveRawStreamingClient)),this._liveRawStreamingClient;case bo.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=$(),_e(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case bo.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=$(),this._injectStreamingClient.on(jm.REQUEST_WORKER_MANAGER_LIST,(tt,rt,it)=>{if(!this._joinInfo)return it(new Wt(Nt.INVALID_OPERATION,"can not find join info to get worker manager"));ow(tt,this._joinInfo,this._axiosCancelSource.token,po).then(rt).catch(it)}),this._injectStreamingClient.onInjectStatusChange=(tt,rt,it)=>{this.safeEmit(Jn.INJECT_STREAM_STATUS,tt,rt,it)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){if(!this._joinInfo)return new Wt(Nt.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){let{sendResolutionWidth:s,sendResolutionHeight:$}=this.getLocalVideoStats(),_e={width:s,height:$};this._channelMediaRelayClient=new jF(this._joinInfo,this._clientId,this._config.websocketRetryConfig||po,this._config.httpRetryConfig||po,_e),this._channelMediaRelayClient.on("state",tt=>{tt===ms.RELAY_STATE_FAILURE&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.safeEmit(Jn.CHANNEL_MEDIA_RELAY_STATE,tt)}),this._channelMediaRelayClient.on("event",tt=>{this.safeEmit(Jn.CHANNEL_MEDIA_RELAY_EVENT,tt)}),this._statsCollector.onStatsChanged=(tt,rt)=>{var it;tt==="resolution"&&((it=this._channelMediaRelayClient)===null||it===void 0||it.setVideoProfile(rt))}}return this._channelMediaRelayClient}_handleUpdateDataChannel(s,$){let{added:_e,deleted:tt}=s,rt=[];Array.isArray(_e)&&_e.length>0&&_e.forEach(it=>{let{uid:at,stream_id:ct,ordered:dt,max_retrans_times:ut,metadata:pt}=it,mt=this._users.find(yt=>yt._uintid===at);if(!mt)return void Et.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"));if(Et.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(at)),vn(rt).call(rt,mt)||rt.push(mt),mt._uintid||(mt._uintid=at),mt._dataChannels.findIndex(yt=>yt.id===it.stream_id)===-1){let yt={id:ct,ordered:!!dt,maxRetransmits:ut,metadata:pt},At=new mF(yt);mt._dataChannels.push(At),Et.info("[".concat(this._clientId,"] remote user ").concat(mt.uid," published datachannel")),$||this.safeEmit(Jn.USER_PUBLISHED,mt,"datachannel",yt)}this._p2pChannel.hasPendingRemoteDataChannel(mt,it.stream_id)&&(Et.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(mt.uid," after reconnect.")),this._subscribeDataChannel(mt,it.stream_id).catch(yt=>{Et.error("[".concat(this._clientId,"] resubscribe datachannel error"),yt.toString())}))}),$&&(this.safeEmit(Jn.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(tt)&&tt.length>0&&tt.forEach(it=>{let{uid:at,stream_id:ct}=it,dt=this._users.find(pt=>pt._uintid===at);if(!dt)return void Et.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));let ut=dt._dataChannels.find(pt=>pt.id===it.stream_id);ut&&(Et.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(at)),this._p2pChannel.unsubscribeDataChannel(dt,[ut]).then(pt=>{if(dt._dataChannels=dt._dataChannels.filter(mt=>mt!==ut),pt)return this._gateway.unsubscribeDataChannel(pt,dt.uid)}),Et.info("[".concat(this._clientId,"] remote user ").concat(at," unpublished datachannel ,id:").concat(ut.id)),this.safeEmit(Jn.USER_UNPUBLISHED,dt,"datachannel",ut._config))})}_handleRemoveDataChannels(s){let $=this._users.find(_e=>_e.uid===s.uid);if($){if($._dataChannels!==void 0&&$._dataChannels.length>0){Et.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(s.uid));let _e=()=>{Et.info("[".concat(this._clientId,"] remote user ").concat($.uid," unpublished datachannel")),$._dataChannels.forEach(tt=>{this.safeEmit(Jn.USER_UNPUBLISHED,$,"datachannel",tt._config)})};this._p2pChannel.unsubscribeDataChannel($,$._dataChannels).then(tt=>{if(tt)return this._gateway.unsubscribeDataChannel(tt,$.uid)}),_e()}}else Et.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(zr.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(zr.CONNECTION_STATE_CHANGE,(s,$,_e)=>{var tt;if(_e===Xn.FALLBACK)return;let rt=()=>{this.safeEmit(Jn.CONNECTION_STATE_CHANGE,s,$,_e)};if(An.reportApiInvoke(this._sessionId||((tt=this._gateway.joinInfo)===null||tt===void 0?void 0:tt.sid)||null,{name:mo.CONNECTION_STATE_CHANGE,options:[s,$,_e],tag:Wr.TRACER}).onSuccess(JSON.stringify({cur:s,prev:$,reason:_e})),Et.info("[".concat(this._clientId,"] connection state change: ").concat($," -> ").concat(s)),s==="DISCONNECTED")return this._reset(),void rt();if(s==="RECONNECTING")this._users.forEach(at=>{at._trust_in_room_=!1,at._trust_audio_enabled_state_=!1,at._trust_video_enabled_state_=!1,at._trust_audio_mute_state_=!1,at._trust_video_mute_state_=!1,at._trust_audio_stream_added_state_=!1,at._trust_video_stream_added_state_=!1,at._is_pre_created||(at._audio_pre_subscribed||(at._audioSSRC=void 0,at._audioOrtc=void 0),at._video_pre_subscribed||(at._videoSSRC=void 0,at._videoOrtc=void 0,at._rtxSsrcId=void 0),at._cname=void 0)}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if(s==="CONNECTED"){var it;this._streamFallbackTypeCacheMap.forEach((at,ct)=>{this._gateway.setStreamFallbackOption(ct,at).catch(dt=>{Et.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),dt)})}),this._remoteStreamTypeCacheMap.forEach((at,ct)=>{this._gateway.setRemoteVideoStreamType(ct,at).catch(dt=>{Et.warning("[".concat(this._clientId,"] auto set remote stream type failed"),dt)})}),this._remoteDefaultVideoStreamType!==void 0&&((it=this._joinInfo)===null||it===void 0?void 0:it.defaultVideoStream)===void 0&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then(()=>{Et.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))}).catch(at=>{Et.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(at))}),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._userOfflineTimeout=void 0,this._users.filter(at=>!at._trust_in_room_).forEach(at=>{Et.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(at.uid)),this._handleUserOffline({uid:at.uid})}))},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{this.connectionState==="CONNECTED"&&(this._streamRemovedTimeout=void 0,this._users.forEach(at=>{at._trust_audio_mute_state_||(Et.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(at.uid)),this._handleMuteStream(at.uid,Cn.AUDIO,!1)),at._trust_video_mute_state_||(Et.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(at.uid)),this._handleMuteStream(at.uid,Cn.VIDEO,!1)),at._trust_audio_enabled_state_||(Et.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(at.uid)),this._handleSetStreamLocalEnable("audio",at.uid,!0)),at._trust_video_enabled_state_||(Et.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(at.uid)),this._handleSetStreamLocalEnable("video",at.uid,!0)),at._trust_video_stream_added_state_||(Et.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(at.uid)),this._handleResetAddStream(at,"video")),at._trust_audio_stream_added_state_||(Et.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(at.uid)),this._handleResetAddStream(at,"audio")),at._video_added_||at._audio_added_||(Et.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(at.uid)),this._handleRemoveStream({uid:at.uid,uint_id:at._uintid}))}))},1e3))}rt()}),this._gateway.on(zr.REQUEST_NEW_GATEWAY_LIST,(s,$)=>{if(!this._joinInfo)return $(new Wt(Nt.UNEXPECTED_ERROR,"can not recover, no join info"));pT(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||po,this.store).then(_e=>{this._joinInfo&&(this._joinInfo.apResponse=_e.gatewayInfo.res,this._joinInfo.gatewayAddrs=_e.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=_e.gatewayInfo.uni_lbs_ip);let tt=[];_e.gatewayInfo.gatewayAddrs.forEach(rt=>{let{address:it}=rt,[at,ct]=it.split(":");this._joinInfo&&this._joinInfo.proxyServer?tt.push({proxy:this._joinInfo.proxyServer,host:at,port:ct}):tt.push({host:at,port:ct})}),s(tt)}).catch($)}),this._gateway.on(zr.NETWORK_QUALITY,s=>{this._networkQualitySensitivity==="normal"&&this.safeEmit(Jn.NETWORK_QUALITY,s)}),this._gateway.on(zr.STREAM_TYPE_CHANGE,(s,$)=>{this.safeEmit(Jn.STREAM_TYPE_CHANGED,s,$),An.reportApiInvoke(this._sessionId,{name:mo.STREAM_TYPE_CHANGE,options:[s,$],tag:Wr.TRACER}).onSuccess(JSON.stringify({uid:s,streamType:$}))}),this._gateway.on(zr.IS_P2P_DISCONNECTED,s=>{this._p2pChannel.isP2PDisconnected()?s(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?s(!1):s(!0)}),this._gateway.on(zr.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(zr.REQUEST_P2P_CONNECTION_PARAMS,async(s,$,_e)=>{try{$(await this._p2pChannel.startP2PConnection(s))}catch(tt){_e(tt)}}),this._gateway.on(zr.JOIN_RESPONSE,(s,$)=>{if(this.store.useP2P)return;let{dtlsParameters:_e,iceParameters:tt,candidates:rt,rtpCapabilities:it,setup:at,cname:ct}=q4(s.ortc,$);this._p2pChannel.connect(tt,_e,rt,it,at,ct)}),this._gateway.on(zr.REQUEST_DC_CONNECTION_PARAMS,s=>{s(this._p2pChannel.getEstablishParams())}),this._gateway.on(zr.RESET_SIGNAL,s=>{this._p2pChannel.resetConnection(s),this._handleGatewaySignalEvents()}),this._gateway.on(zr.DATACHANNEL_FAILBACK,()=>{this._joinGateway()}),this._gateway.on(zr.DATACHANNEL_PRECONNECT,async(s,$,_e,tt)=>{var rt,it,at,ct,dt,ut;await this._p2pChannel.startP2PConnection({turnServer:(rt=this._joinInfo)===null||rt===void 0?void 0:rt.turnServer},!0);let pt=function(mt,yt){let At;return yt&&yt.ip&&typeof yt.port=="number"?(At=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:yt.ip,port:yt.port.toString(),type:"host",extension:{}}],Et.debug("Using remote candidate from AP ".concat(yt.ip,":").concat(yt.port)),yt.ip6&&(At.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:yt.ip6,port:yt.port.toString(),type:"host",extension:{}}),Et.debug("Using IPV6 remote candidate from AP ".concat(yt.ip6,":").concat(yt.port)))):At=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:mt.ip,port:mt.port.toString(),type:"host",extension:{}}],At}(s,$);return this._p2pChannel.preConnect({iceUfrag:"".concat((it=this._joinInfo)===null||it===void 0?void 0:it.apResponse.cid,"_").concat((at=this._joinInfo)===null||at===void 0?void 0:at.apResponse.cert),icePwd:"".concat((ct=this._joinInfo)===null||ct===void 0?void 0:ct.apResponse.cid,"_").concat((dt=this._joinInfo)===null||dt===void 0?void 0:dt.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:(ut=Ft("FINGERPRINT"))!==null&&ut!==void 0?ut:s.fingerprint}]},pt,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(_e).catch(tt)})}_handleGatewaySignalEvents(){this._gateway.signal.on(Un.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Un.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Un.ON_ADD_AUDIO_STREAM,s=>this._handleAddAudioOrVideoStream("audio",s.uid,s.ssrcId,s.cname,s.uint_id,s.ortc)),this._gateway.signal.on(Un.ON_ADD_VIDEO_STREAM,s=>this._handleAddAudioOrVideoStream("video",s.uid,s.ssrcId,s.cname,s.uint_id,s.ortc,s.rtxSsrcId)),this._gateway.signal.on(Un.ON_REMOTE_DATASTREAM_UPDATE,s=>{this._handleUpdateDataChannel(s)}),this._gateway.signal.on(Un.ON_REMOTE_FULL_DATASTREAM_INFO,s=>{this._handleUpdateDataChannel({added:s.datastreams,deleted:[]},!0)}),this._gateway.signal.on(Un.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Un.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Un.MUTE_AUDIO,s=>this._handleMuteStream(s.uid,Cn.AUDIO,!0)),this._gateway.signal.on(Un.UNMUTE_AUDIO,s=>this._handleMuteStream(s.uid,Cn.AUDIO,!1)),this._gateway.signal.on(Un.MUTE_VIDEO,s=>this._handleMuteStream(s.uid,Cn.VIDEO,!0)),this._gateway.signal.on(Un.UNMUTE_VIDEO,s=>this._handleMuteStream(s.uid,Cn.VIDEO,!1)),this._gateway.signal.on(Un.RECEIVE_METADATA,s=>{let $=C_(s.metadata);this.safeEmit(Jn.RECEIVE_METADATA,s.uid,$)}),this._gateway.signal.on(Un.ON_DATA_STREAM,async s=>{if(!s)return;let $=0;if(s.ordered||s.syncWithAudio){let _e=this._p2pChannel.getStats(),tt=this.remoteUsers.find(it=>it.uid===s.uid),rt=_e==null?void 0:_e.audioRecv.find(it=>it.ssrc===(tt==null?void 0:tt._audioSSRC));$=rt==null?void 0:rt.jitterBufferMs}$==null&&($=0),aV(s,$,{id:this._clientId,onStreamMessage:typeof this.onStreamMessage=="function"?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})}),this._gateway.signal.on(Un.ON_CRYPT_ERROR,()=>{U1(()=>{Et.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(Jn.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(Un.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Un.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{Et.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Xn.TOKEN_EXPIRE),this.safeEmit(Jn.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(Un.ON_STREAM_FALLBACK_UPDATE,s=>{Et.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(s.stream_id,", attr: ").concat(s.stream_type)),this.safeEmit(Jn.STREAM_FALLBACK,s.stream_id,s.stream_type===1?"fallback":"recover")}),this._gateway.signal.on(Un.ON_PUBLISH_STREAM,s=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:s.proxy})),Et.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(s))))}),this._gateway.signal.on(Un.ENABLE_LOCAL_VIDEO,s=>{this._handleSetStreamLocalEnable("video",s.uid,!0)}),this._gateway.signal.on(Un.DISABLE_LOCAL_VIDEO,s=>{this._handleSetStreamLocalEnable("video",s.uid,!1)}),this._gateway.signal.on(En.REQUEST_TIMEOUT,(s,$)=>{if(this._joinInfo)switch(s){case Pn.PUBLISH:{if(!$)return;let rt=$.ortc;if(rt){var _e,tt;let it=rt.some(dt=>{let{stream_type:ut}=dt;return ut===cr.Audio}),at=rt.some(dt=>{let{stream_type:ut}=dt;return ut!==cr.Audio}),ct=rt.some(dt=>{let{stream_type:ut}=dt;return ut===cr.Screen||ut===cr.ScreenLow});$.state==="offer"&&An.publish(this._joinInfo.sid,{eventElapse:qo.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:Nt.TIMEOUT,audio:it,video:at,p2pid:$.p2p_id,publishRequestid:this.store.pubId,screenshare:ct,audioName:it?(_e=rt.find(dt=>{let{stream_type:ut}=dt;return ut===cr.Audio}))===null||_e===void 0||(_e=_e.ssrcs[0])===null||_e===void 0?void 0:_e.ssrcId.toString():void 0,videoName:at?(tt=rt.find(dt=>{let{stream_type:ut}=dt;return ut!==cr.Audio}))===null||tt===void 0||(tt=tt.ssrcs[0])===null||tt===void 0?void 0:tt.ssrcId.toString():void 0})}break}case Pn.SUBSCRIBE:$&&An.subscribe(this._joinInfo.sid,{succ:!1,ec:Nt.TIMEOUT,audio:$.stream_type===Cn.AUDIO,video:$.stream_type===Cn.VIDEO,peerid:$.stream_id,subscribeRequestid:$.ssrcId,p2pid:this.store.p2pId,eventElapse:qo.measureFromSubscribeStart(this.store.clientId,$.ssrcId)})}}),this._gateway.signal.on(Un.ON_P2P_OK,s=>{this.uid,this._uid}),this._gateway.signal.on(Un.ON_PUBLISHED_USER_LIST,s=>{if(s==null||!s.users)return;Ft("BLOCK_LOCAL_CLIENT")&&(s.users=s.users.filter(tt=>!Yp(tt.string_id||tt.stream_id,this.channelName)));let $=[],_e=[];for(let tt of s.users){let rt=this._users.find(pt=>pt._uintid===tt.stream_id);rt?rt._trust_in_room_=!0:(rt=new Bo(tt.string_id||tt.stream_id,tt.stream_id),this._users.push(rt),this.getListeners(Jn.PUBLISHED_USER_LIST).length===0&&(Et.debug("[".concat(this._clientId,"] user online"),tt.stream_id),this.safeEmit(Jn.USER_JOINED,rt)));let it=_o.Audio&tt.stream_type,at=(_o.Video|_o.LwoVideo)&tt.stream_type,ct=(65280&tt.stream_type)!=0,dt=it&&rt.hasAudio,ut=at&&rt.hasVideo;at&&(rt._trust_video_stream_added_state_=!0,rt._video_added_=!0,rt._videoSSRC=tt.video_ssrc,rt._rtxSsrcId=tt.video_rtx),it&&(rt._trust_audio_stream_added_state_=!0,rt._audio_added_=!0,rt._audioSSRC=tt.audio_ssrc),it&&!dt&&this.getListeners(Jn.PUBLISHED_USER_LIST).length===0&&(Et.info("[".concat(this._clientId,"] remote user ").concat(rt.uid," published audio")),this.safeEmit(Jn.USER_PUBLISHED,rt,"audio")),at&&!ut&&this.getListeners(Jn.PUBLISHED_USER_LIST).length===0&&(Et.info("[".concat(this._clientId,"] remote user ").concat(rt.uid," published video")),this.safeEmit(Jn.USER_PUBLISHED,rt,"video")),(it&&!dt||at&&!ut||ct)&&$.push(rt),at&&this._p2pChannel.hasPendingRemoteMedia(rt,"video")&&_e.push({user:rt,mediaType:"video"}),it&&this._p2pChannel.hasPendingRemoteMedia(rt,"audio")&&_e.push({user:rt,mediaType:"audio"})}_e.length>0&&(Et.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(_e.map(tt=>"user: ".concat(tt.user.uid,", mediaType: ").concat(tt.mediaType)).join("; ")," ")),this.massSubscribe(_e).catch(tt=>{Et.error("[".concat(this._clientId,"] mass resubscribe error"),tt.toString())})),this.getListeners(Jn.PUBLISHED_USER_LIST).length>0?Ft("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=$:(Et.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat($.map(tt=>tt.uid).join(", "))),this.safeEmit(Jn.PUBLISHED_USER_LIST,$)):Et.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat($.map(tt=>tt.uid).join(", ")))}),this._gateway.signal.on(Un.ON_RTP_CAPABILITY_CHANGE,s=>{let{video_codec:$}=s;this._p2pChannel instanceof Uo&&this._p2pChannel.updateRemoteRTPCapabilities($.map(_e=>_e.toLowerCase()).filter(_e=>{var tt;return vn(tt=Object.keys(ip)).call(tt,_e)}))})}_handleP2PEvents(){this._gateway.signal.on(Un.ON_USER_OFFLINE,()=>{this._p2pChannel.disconnectForReconnect()}),this._gateway.signal.on(Kr.PUBLISH,(s,$,_e)=>{let{uid:tt}=s;s.forEach(rt=>{let{kind:it,ssrcs:at,mid:ct,isMuted:dt}=rt;this._handleP2PAddAudioOrVideoStream(it,tt,at[0].ssrcId,ct);let ut=this._users.find(pt=>pt.uid===tt);return ut&&this._p2pChannel instanceof Io?this._p2pChannel.mockSubscribe(ut,it,at[0].ssrcId,ct).then(()=>{$()}).catch(_e):$(),this._handleMuteStream(tt,it,!!dt)})}),this._gateway.signal.on(Kr.CALL,async(s,$,_e)=>{if(this._p2pChannel instanceof Io)try{var tt;$(await this._p2pChannel.startP2P({turnServer:(tt=this._joinInfo)===null||tt===void 0?void 0:tt.turnServer},s))}catch(rt){_e(rt)}}),this._gateway.signal.on(En.P2P_CONNECTION,async s=>{this._p2pChannel instanceof Io&&await this._p2pChannel.p2pConnect(s)}),this._gateway.signal.on(Kr.UNPUBLISH,async(s,$,_e)=>{if(this._p2pChannel instanceof Io){let{unpubMsg:tt,uid:rt}=s,it=this._users.find(at=>at.uid===rt);if(!it)return Et.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(rt)),void $();try{tt.forEach(async at=>{let{stream_type:ct}=at,dt=ct===cr.Audio?Cn.AUDIO:Cn.VIDEO;await this._p2pChannel.unsubscribe(it,dt),this._handleMuteStream(rt,dt,!0)}),$()}catch(at){_e(at)}}}),this._gateway.signal.on(Kr.CONTROL,async(s,$)=>{let{action:_e}=s;switch(_e){case gu.MUTE_LOCAL_VIDEO:this._handleMuteStream($,Cn.VIDEO,!0);break;case gu.MUTE_LOCAL_AUDIO:this._handleMuteStream($,Cn.AUDIO,!0);break;case gu.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",$),this._handleMuteStream($,Cn.VIDEO,!1);break;case gu.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",$),this._handleMuteStream($,Cn.AUDIO,!1)}}),this._gateway.signal.on(Kr.RESTART_ICE,async(s,$,_e)=>{if(this._p2pChannel instanceof Io)try{let{direction:tt,iceParameter:rt}=s;tt!==es.SEND_ONLY||rt?$(await this._p2pChannel.restartICE(tt,rt)):(this._p2pChannel.handleDisconnect(tt),$())}catch(tt){_e(tt)}}),this._gateway.signal.on(Kr.CANDIDATE,s=>{if(this._p2pChannel instanceof Io){let{candidate:$,direction:_e}=s;this._p2pChannel.addRemoteCandidate($,_e)}}),this._p2pChannel.on(kn.RequestP2PRestartICE,async(s,$,_e)=>{try{let{direction:tt}=s;$(await this._gateway.sendExtensionMessage(Kr.RESTART_ICE,s,tt===es.SEND_ONLY))}catch(tt){_e(tt)}}),this._p2pChannel.on(kn.LocalCandidate,s=>{this._gateway.sendExtensionMessage(Kr.CANDIDATE,JSON.stringify(s),!0)}),this._p2pChannel.on(kn.RequestP2PMuteLocal,async(s,$,_e)=>{try{await this._gateway.sendExtensionMessage(Kr.CONTROL,s,!0),$()}catch(tt){_e(tt)}}),this._p2pChannel.on(kn.RequestP2PUnmuteRemote,async(s,$,_e)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(s,this._joinInfo.stringUid||this._joinInfo.uid),$()}catch(tt){tt.code===Nt.DISCONNECT_P2P?$():_e(tt)}else $()}),this._p2pChannel.on(kn.RequestP2PMuteRemote,async(s,$,_e)=>{if(this._joinInfo)try{await this._gateway.muteRemote(s,this._joinInfo.stringUid||this._joinInfo.uid),$()}catch(tt){tt.code===Nt.DISCONNECT_P2P?$():_e(tt)}else $()}),this._p2pChannel.on(kn.StateChange,(s,$)=>{$===mr.Connected&&this._p2pChannel.republish()})}_handleP2PChannelEvents(){this._p2pChannel.on(kn.RequestMuteLocal,async(s,$,_e)=>{if(this._joinInfo)try{await this._gateway.muteLocal(s,this._joinInfo.stringUid||this._joinInfo.uid),$()}catch(tt){tt.code===Nt.DISCONNECT_P2P?$():_e(tt)}else $()}),this._p2pChannel.on(kn.RequestUnmuteLocal,async(s,$,_e)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(s,this._joinInfo.stringUid||this._joinInfo.uid),$()}catch(tt){tt.code===Nt.DISCONNECT_P2P?$():_e(tt)}else $()}),this._p2pChannel.on(kn.RequestRePublish,(s,$,_e)=>{this.publish(s,!1).then($).catch(_e)}),this._p2pChannel.on(kn.RequestRePublishDataChannel,(s,$,_e)=>{Jt.all(s.map(async tt=>{await this._p2pChannel.publishDataChannel([tt]);let rt={streamId:tt.id,ordered:tt.ordered,maxRetransmits:tt.maxRetransmits,metadata:tt.metadata,channelId:tt._originDataChannelId};try{await this._gateway.publishDataChannel(this._uid,rt,!0)}catch(it){if(it.code!==Nt.DISCONNECT_P2P)throw it}})).then($).catch(_e)}),this._p2pChannel.on(kn.RequestReSubscribe,async(s,$,_e)=>{try{for(let{user:tt,kind:rt}of s)rt===Cn.VIDEO?await this.subscribe(tt,"video"):await this.subscribe(tt,"audio");$()}catch(tt){_e(tt)}}),this._p2pChannel.on(kn.RequestUpload,(s,$)=>{this._gateway.upload(s,$)}),this._p2pChannel.on(kn.RequestUploadStats,s=>{this._gateway.uploadWRTCStats(s)}),this._p2pChannel.on(kn.MediaReconnectStart,s=>{this.safeEmit(Jn.MEDIA_RECONNECT_START,s)}),this._p2pChannel.on(kn.MediaReconnectEnd,s=>{this.safeEmit(Jn.MEDIA_RECONNECT_END,s)}),this._p2pChannel.on(kn.NeedSignalRTT,s=>{s(this._gateway.getSignalRTT())}),this._p2pChannel.on(kn.RequestRestartICE,async s=>{if(this._p2pChannel instanceof Io)return;let $=await this._p2pChannel.restartICE(s),_e=await $.next();if(_e.done)return;let tt=_e.value,rt;try{rt=await this._gateway.restartICE({iceParameters:tt})}catch(at){return void $.throw(at)}let{iceParameters:it}=function(at){let ct=at.iceParameters;return{iceParameters:{iceUfrag:ct.iceUfrag,icePwd:ct.icePwd}}}(rt);await $.next({remoteIceParameters:it})}),this._p2pChannel.on(kn.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(kn.RequestReconnectPC,async()=>{var s;let{iceParameters:$,dtlsParameters:_e,rtpCapabilities:tt}=await this._p2pChannel.startP2PConnection({turnServer:(s=this._joinInfo)===null||s===void 0?void 0:s.turnServer}),{gatewayEstablishParams:rt,gatewayAddress:it}=await this._gateway.reconnectPC({iceParameters:$,dtlsParameters:_e,rtpCapabilities:tt}),{dtlsParameters:at,iceParameters:ct,candidates:dt,rtpCapabilities:ut,setup:pt,cname:mt}=q4(rt,it);await this._p2pChannel.connect(ct,at,dt,ut,pt,mt),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(kn.RequestUnpublishForReconnectPC,async(s,$,_e)=>{this._joinInfo&&this._uid!==void 0?(await this._gateway.unpublish(s,this._uid),$()):_e()}),this._p2pChannel.on(kn.P2PLost,()=>{this.safeEmit(Jn.P2P_LOST,this.store.uid)}),this._p2pChannel.on(kn.UpdateVideoEncoder,s=>{s._encoderConfig&&this._gateway.setVideoProfile(s._encoderConfig)}),this._p2pChannel.on(kn.ConnectionTypeChange,s=>{this.safeEmit(Jn.IS_USING_CLOUD_PROXY,s)}),this._p2pChannel.on(kn.RequestLowStreamParameter,s=>{s(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})}),this._p2pChannel.on(kn.QueryClientConnectionState,s=>{s(this.connectionState)})}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(s){if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));if(this._inspect)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));if(!s)throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));if(!s.inspectType||!Array.isArray(s.inspectType))throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));{let $=[...new Set(s.inspectType)];$.forEach(_e=>{var tt;if(!vn(tt=["supervise","moderation"]).call(tt,_e))throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] ").concat(_e," is not a valid inspect type."))}),s.inspectType=$}if(s&&s.extraInfo&&s.extraInfo.length>1024)throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));try{let $=new kE(s);this._inspect=$,this.handleVideoInspectEvents(this._inspect),await $.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},po)}catch($){throw Array.isArray($)?$[0]:$}}async disableContentInspect(){if(!this._inspect)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(s){throw Array.isArray(s)?s[0]:s}}async setImageModeration(s,$){if(np(s,"enabled"),s){if(!$)throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] config is necessary"));if(Sr($.interval,"interval",1e3,1/0),$&&$.extraInfo&&$.extraInfo.length>1024)throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] config.extraInfo length cannot exceed 1024 bytes"));if($&&$.vendor&&$.vendor.length>1024)throw new Wt(Nt.INVALID_PARAMS,"[".concat(this._clientId,"] config.vendor length cannot exceed 1024 bytes"));if(this.connectionState!=="CONNECTED"||!this._joinInfo)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,'] can not enable image moderation, not joined"'));try{if(this._moderation)return void this._moderation.updateConfig($);let _e=new vv($);this._moderation=_e,this.handleImageModerationEvents(this._moderation),await _e.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},po)}catch(_e){throw Array.isArray(_e)?_e[0]:_e}}else{if(!this._moderation)throw new Wt(Nt.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(_e){throw Array.isArray(_e)?_e[0]:_e}}}setP2PTransport(s){if(function($){vo($,"transport",["default","auto","relay","sd-rtn"])}(s),this.mode!=="p2p")throw new Wt(Nt.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=s,Et.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(s))}handleImageModerationEvents(s){s.on(Cl.CONNECTION_STATE_CHANGE,($,_e)=>{if(this.safeEmit(Jn.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,$,_e),$===Us.CONNECTED){if(this.connectionState!=="CONNECTED")throw this.setImageModeration(!1),new Wt(Nt.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");s.inspectImage()}}),s.on(Cl.CLIENT_LOCAL_VIDEO_TRACK,$=>{$(this.localTracks.filter(_e=>_e.trackMediaType==="video")[0])})}handleVideoInspectEvents(s){s.on(Ro.CONNECTION_STATE_CHANGE,($,_e)=>{if(this.safeEmit(Jn.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,$,_e),_e===qs.CONNECTED){if(this.connectionState!=="CONNECTED")return void this.safeEmit(Jn.CONTENT_INSPECT_ERROR,new Wt(Nt.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));s.inspectImage()}}),s.on(Ro.INSPECT_RESULT,($,_e)=>{var tt;if((_e==null?void 0:_e.code)===Nt.INVALID_OPERATION&&this.connectionState==="DISCONNECTED")return Et.debug("Stop inspect content because that has left channel"),this==null||(tt=this._inspect)===null||tt===void 0||tt.close(),void(this._inspect=void 0);this.safeEmit(Jn.CONTENT_INSPECT_RESULT,$,_e)}),s.on(Ro.CLIENT_LOCAL_VIDEO_TRACK,$=>{$(this.localTracks.filter(_e=>_e.trackMediaType==="video")[0])})}getJoinChannelServiceRecords(){return Et.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(s){np(s,"enabled"),Tr("ENABLE_PUBLISH_AUDIO_FILTER",s),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(s)}_handleResetAddStream(s,$){switch($){case"audio":s._audio_added_=!1,s._trust_audio_stream_added_state_=!0;break;case"video":s._video_added_=!1,s._trust_video_stream_added_state_=!0}}}on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],yr.prototype,"leave",null),on([xn({argsMap:(j,s)=>{if(!Array.isArray(s)){if(!(s instanceof Yo))return[s];s=[s]}return s.map($=>$?Object($).toString():"null")}}),bt("design:type",Function),bt("design:paramtypes",[Object,Boolean]),bt("design:returntype",Jt)],yr.prototype,"publish",null),on([xn({argsMap:(j,s)=>(s||(s=[]),s instanceof w4?[s.getChannelId()]:(Array.isArray(s)||(s=[s]),s.map($=>$.getTrackId())))}),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],yr.prototype,"unpublish",null),on([xn({argsMap:(j,s,$,_e)=>[s.uid,$,_e]}),bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number]),bt("design:returntype",Jt)],yr.prototype,"subscribe",null),on([xn({argsMap:(j,s,$)=>[s,$]}),bt("design:type",Function),bt("design:paramtypes",[Object,String]),bt("design:returntype",Jt)],yr.prototype,"presubscribe",null),on([xn({argsMap:(j,s)=>s.map($=>{let{user:_e,mediaType:tt}=$;return[_e==null?void 0:_e.uid,tt]})}),bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],yr.prototype,"massSubscribe",null),on([xn({argsMap:(j,s,$,_e)=>[s.uid,$,_e]}),bt("design:type",Function),bt("design:paramtypes",[Bo,String,Number]),bt("design:returntype",Jt)],yr.prototype,"unsubscribe",null),on([xn({argsMap:(j,s)=>s.map($=>{let{user:_e,mediaType:tt}=$;return{uid:_e==null?void 0:_e.uid,mediaType:tt}})}),bt("design:type",Function),bt("design:paramtypes",[Array]),bt("design:returntype",Jt)],yr.prototype,"massUnsubscribe",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],yr.prototype,"setLowStreamParameter",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],yr.prototype,"enableDualStream",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],yr.prototype,"disableDualStream",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String,Object]),bt("design:returntype",Jt)],yr.prototype,"setClientRole",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String,Boolean]),bt("design:returntype",void 0)],yr.prototype,"setProxyServer",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object,Boolean]),bt("design:returntype",void 0)],yr.prototype,"setTurnServer",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",void 0)],yr.prototype,"setLicense",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",void 0)],yr.prototype,"startProxyServer",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],yr.prototype,"stopProxyServer",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",void 0)],yr.prototype,"setLocalAccessPointsV2",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Array,String]),bt("design:returntype",void 0)],yr.prototype,"setLocalAccessPoints",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",Jt)],yr.prototype,"setRemoteDefaultVideoStreamType",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object,Number]),bt("design:returntype",Jt)],yr.prototype,"setRemoteVideoStreamType",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object,Number]),bt("design:returntype",Jt)],yr.prototype,"setStreamFallbackOption",null),on([xn({argsMap:(j,s)=>[s]}),bt("design:type",Function),bt("design:paramtypes",[String,String,Uint8Array]),bt("design:returntype",void 0)],yr.prototype,"setEncryptionConfig",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],yr.prototype,"renewToken",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],yr.prototype,"enableAudioVolumeIndicator",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String,Boolean]),bt("design:returntype",Jt)],yr.prototype,"startLiveStreaming",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],yr.prototype,"setLiveTranscoding",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",Jt)],yr.prototype,"stopLiveStreaming",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String,Object]),bt("design:returntype",Jt)],yr.prototype,"addInjectStreamUrl",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],yr.prototype,"removeInjectStreamUrl",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[wE]),bt("design:returntype",Jt)],yr.prototype,"startChannelMediaRelay",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[wE]),bt("design:returntype",Jt)],yr.prototype,"updateChannelMediaRelay",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],yr.prototype,"stopChannelMediaRelay",null),on([xn({argsMap:(j,s)=>(Array.isArray(s)||(s=[s]),[JSON.stringify(s)])}),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],yr.prototype,"sendCustomReportMessage",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object,Object]),bt("design:returntype",Jt)],yr.prototype,"pickSVCLayer",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],yr.prototype,"setRTMConfig",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Object]),bt("design:returntype",Jt)],yr.prototype,"enableContentInspect",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Jt)],yr.prototype,"disableContentInspect",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Boolean,Object]),bt("design:returntype",Jt)],yr.prototype,"setImageModeration",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[String]),bt("design:returntype",void 0)],yr.prototype,"setP2PTransport",null),on([xn({reportResult:!0}),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",Array)],yr.prototype,"getJoinChannelServiceRecords",null),on([xn(),bt("design:type",Function),bt("design:paramtypes",[Boolean]),bt("design:returntype",Jt)],yr.prototype,"setPublishAudioFilterEnabled",null);class y0{constructor(s,$){gt(this,"id",0),gt(this,"element",void 0),gt(this,"peerPair",void 0),gt(this,"context",void 0),gt(this,"audioPlayerElement",void 0),gt(this,"audioTrack",void 0),y0.count+=1,this.id=y0.count,this.element=s,this.context=$}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=s=>{let $=document.createElement("audio");$.srcObject=new MediaStream([s.track]),$.play(),this.audioPlayerElement=$}}async switchSdp(){if(!this.peerPair)return;let s=async(_e,tt)=>{let rt=tt==="offer"?await _e.createOffer():await _e.createAnswer();return await _e.setLocalDescription(rt),_e.iceGatheringState==="complete"?_e.localDescription:new Jt(it=>{_e.onicegatheringstatechange=()=>{_e.iceGatheringState==="complete"&&it(_e.localDescription)}})},$=async(_e,tt)=>await _e.setRemoteDescription(tt);try{let _e=await s(this.peerPair[0],"offer");await $(this.peerPair[1],_e);let tt=await s(this.peerPair[1],"answer");await $(this.peerPair[0],tt)}catch(_e){throw new Wt(Nt.LOCAL_AEC_ERROR,_e.toString()).print()}}async getTracksFromMediaElement(s){if(this.audioTrack)return this.audioTrack;let $;try{s instanceof HTMLVideoElement&&(s.captureStream?s.captureStream():s.mozCaptureStream()),$=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(s).connect($)}catch(tt){throw new Wt(Nt.LOCAL_AEC_ERROR,tt.toString()).print()}if(!$)throw new Wt(Nt.LOCAL_AEC_ERROR,"no dest node when local aec").print();let _e=$.stream.getAudioTracks()[0];return this.audioTrack=_e,_e}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();let s=this.element,$=await this.getTracksFromMediaElement(s);this.peerPair&&this.peerPair[0].addTrack($),await this.switchSdp()}close(){Et.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach(s=>{s.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}gt(y0,"count",0);let dV=window.AudioContext||window.webkitAudioContext;class zO{constructor(){gt(this,"units",[]),gt(this,"context",void 0)}processExternalMediaAEC(s){if(!this._doesEnvironmentNeedAEC())return Et.debug("the system does not need to process local aec"),-1;this.context||(this.context=new dV);let $=this.units.find(_e=>_e&&_e.getElement()===s);return $||($=new y0(s,this.context),this.units.push($)),$.startEchoCancellation(),Et.debug("start processing local audio echo cancellation, id is",$.id),$.id}_doesEnvironmentNeedAEC(){return ir().name!==lr.SAFARI}}on([xn({report:An}),bt("design:type",Function),bt("design:paramtypes",[HTMLAudioElement]),bt("design:returntype",Number)],zO.prototype,"processExternalMediaAEC",null);let uV=new zO;function KO(j,s){var $=Object.keys(j);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(j);s&&(_e=_e.filter(function(tt){return Object.getOwnPropertyDescriptor(j,tt).enumerable})),$.push.apply($,_e)}return $}function YO(j){for(var s=1;s<arguments.length;s++){var $=arguments[s]!=null?arguments[s]:{};s%2?KO(Object($),!0).forEach(function(_e){gt(j,_e,$[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors($)):KO(Object($)).forEach(function(_e){Object.defineProperty(j,_e,Object.getOwnPropertyDescriptor($,_e))})}return j}let bv=window||document;function qO(j){let s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!bv)return;let $=fo._cspEventHandlerPointer;if($&&s)return void console.error($,s);let _e=tt=>{if(!(tt&&tt.blockedURI&&(fo.onSecurityPolicyViolation||fo.getListeners(Gl.SECURITY_POLICY_VIOLATION).length>0)))return;let rt=tt.blockedURI;Ft("CSP_DETECTED_HOSTNAME_LIST").some(it=>vn(rt).call(rt,it))&&(fo.onSecurityPolicyViolation&&typeof fo.onSecurityPolicyViolation=="function"&&fo.onSecurityPolicyViolation(tt),fo.getListeners(Gl.SECURITY_POLICY_VIOLATION).length>0&&fo.safeEmit(Gl.SECURITY_POLICY_VIOLATION,tt))};$&&bv.removeEventListener("securitypolicyviolation",$),(s||j&&typeof j=="function"||fo.getListeners(Gl.SECURITY_POLICY_VIOLATION).length>0)&&bv.addEventListener("securitypolicyviolation",_e),fo._cspEventHandlerPointer=_e}Tr("PROCESS_ID","process-".concat(Ir(8,""),"-").concat(Ir(4,""),"-").concat(Ir(4,""),"-").concat(Ir(4,""),"-").concat(Ir(12,""))),function(){let j;try{j=window.localStorage.getItem("websdk_ng_global_parameter")}catch(s){return void Et.error("Error loading sdk config",s.message)}if(j)try{let s=JSON.parse(window.atob(j)),$=Date.now();Et.debug("Loading global parameters from cache",s),Object.keys(s).forEach(_e=>{if(Object.prototype.hasOwnProperty.call(fs,_e)){let{value:tt,expires:rt}=s[_e];if(rt&&rt<=$)return;op[_e]=tt,fs[_e]=tt}})}catch(s){Et.error("Error loading mutableParamsCache: ".concat(j),s.message)}}(),Array.isArray(op.AREAS)&&op.AREAS.length>0&&cT(op.AREAS,!0);let XO=(j,s,$)=>{Et.debug("setParameter key:".concat(j,", value:").concat(JSON.stringify(s))),Tr(j,s,$)},fo=function(j){let s=new Fr,$=j,_e={getListeners:s.getListeners.bind(s),on:(tt,rt)=>(function(it,at){it===Gl.SECURITY_POLICY_VIOLATION&&qO(at,!0)}(tt,rt),s.on.bind(s)(tt,rt)),addListener:s.addListener.bind(s),once:s.once.bind(s),off:s.off.bind(s),removeAllListeners:s.removeAllListeners.bind(s),emit:s.emit.bind(s),safeEmit:s.safeEmit.bind(s)};return YO(YO({},$),_e)}({__TRACK_LIST__:Wm,VERSION:Sl,BUILD:GS,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:XO,getParameter:Ft,getSupportedCodec:async function(){let j={audio:[],video:[]};try{let s=new RTCPeerConnection;s.addTransceiver("video",{direction:"recvonly"}),s.addTransceiver("audio",{direction:"recvonly"});let $=(await s.createOffer()).sdp;if(!$)return j;s.close(),s=null,j=function(_e){let tt={video:[],audio:[]};return _e.match(/ VP8/i)&&tt.video.push("VP8"),_e.match(/ VP9/i)&&tt.video.push("VP9"),_e.match(/ AV1/i)&&tt.video.push("AV1"),_e.match(/ H264/i)&&tt.video.push("H264"),_e.match(/ H265/i)&&tt.video.push("H265"),_e.match(/ opus/i)&&tt.audio.push("OPUS"),_e.match(/ PCMU/i)&&tt.audio.push("PCMU"),_e.match(/ PCMA/i)&&tt.audio.push("PCMA"),_e.match(/ G722/i)&&tt.audio.push("G722"),tt}($)}catch(s){throw new Wt(Nt.CREATE_OFFER_FAILED,s.toString&&s.toString()).print()}return j},checkSystemRequirements:function(){let j=An.reportApiInvoke(null,{name:mo.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Wr.TRACER}),s=!1;try{let rt=window.RTCPeerConnection,it=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,at=window.WebSocket;s=!!(rt&&it&&at)}catch(rt){return Et.error("check system requirement failed: ",rt),!1}let $=!1,_e=ir();_e.name===lr.CHROME&&Number(_e.version)>=58&&(!u$()||d$())&&($=!0),_e.name===lr.FIREFOX&&Number(_e.version)>=56&&($=!0),_e.name===lr.OPERA&&Number(_e.version)>=45&&($=!0),_e.name===lr.SAFARI&&Number(_e.version)>=11&&($=!0),(JI()||ir().name===lr.QQ)&&($=!0),Et.debug("checkSystemRequirements, api:",s,"browser",$);let tt=s&&$;return j.onSuccess(tt),tt},getDevices:function(j){return na.enumerateDevices(!0,!0,j)},getMicrophones:function(j){return na.getRecordingDevices(j)},getCameras:function(j){return na.getCamerasDevices(j)},getElectronScreenSources:_w,getPlaybackDevices:function(j){return na.getSpeakers(j)},createClient:function(){var j;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},$=An.reportApiInvoke(null,{name:mo.CREATE_CLIENT,options:[s],tag:Wr.TRACER});try{(function(_e){vo(_e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),vo(_e.mode,"config.mode",["rtc","live","p2p"]),_e.audioCodec!==void 0&&vo(_e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),_e.proxyServer!==void 0&&zo(_e.proxyServer,"config.proxyServer",1,1e4),_e.turnServer!==void 0&&sA(_e.turnServer),_e.httpRetryConfig!==void 0&&iA(_e.httpRetryConfig),_e.websocketRetryConfig!==void 0&&iA(_e.websocketRetryConfig)})(s)}catch(_e){throw $.onError(_e),_e}return lV()||(s.codec==="vp9"&&(s.codec="vp8",Et.debug("browser not support vp9, force use vp8")),Tr("UNSUPPORTED_VIDEO_CODEC",["vp9"])),s.audioCodec===void 0&&(s.audioCodec="opus"),$.onSuccess(),new yr(Wu(Wu({forceWaitGatewayResponse:!0},s),{},{role:vn(j=["rtc","p2p"]).call(j,s.mode)?"host":s.role||"audience"}))},createCameraVideoTrack:async function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_CAM_VIDEO_TRACK,options:[dE({},j)]}),$=lE(j),_e=Ir(8,"track-cam-"),tt=null,rt=j.encoderConfig==="720p_auto";Et.info("start create camera video track with config",JSON.stringify(j),"trackId",_e);try{tt=(await Zs({video:$},_e)).getVideoTracks()[0]||null}catch(at){throw s.onError(at),at}if(!tt){let at=new rn(Nt.UNEXPECTED_ERROR,"can not find track in media stream");return s.onError(at),at.throw(Et)}j.optimizationMode&&PT(_e,tt,j,mu(j.encoderConfig));let it=new mp(tt,j,$,j.scalabiltyMode?J_(j.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},j.optimizationMode,_e);return rt&&it.startMonitorStats(),s.onSuccess(it.getTrackId()),Et.info("create camera video success, trackId:",_e),it},createCustomVideoTrack:function(j){let s=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_CUSTOM_VIDEO_TRACK,options:[j]}),$=new Hn(j.mediaStreamTrack,{width:j.width,height:j.height,frameRate:j.frameRate,bitrateMax:j.bitrateMax,bitrateMin:j.bitrateMin},j.scalabiltyMode?J_(j.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},j.optimizationMode,Ir(8,"track-cus-"),[wr.CUSTOM_TRACK]);return s.onSuccess($.getTrackId()),Et.info("create custom video track success with config",j,"trackId",$.getTrackId()),$},createScreenVideoTrack:async function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"disable",$=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_SCREEN_VIDEO_TRACK,options:[dE({},j),s]}),_e=j.encoderConfig==="720p_auto";j.encoderConfig?typeof j.encoderConfig=="string"||j.encoderConfig.width&&j.encoderConfig.height||(j.encoderConfig.width={max:1920},j.encoderConfig.height={max:1080}):j.encoderConfig="1080p_2";let tt=function(pt){let mt={};pt.screenSourceType&&(mt.mediaSource=pt.screenSourceType),pt.extensionId&&k1()&&(mt.extensionId=pt.extensionId);let{displaySurface:yt,selfBrowserSurface:At,surfaceSwitching:Ct,systemAudio:It}=pt;(hS(107)||zI(107)||KI(93))&&(yt&&(vo(yt,"displaySurface",["browser","window","monitor"]),mt.displaySurface=yt),At?(vo(At,"selfBrowserSurface",["exclude","include"]),mt.selfBrowserSurface=At):mt.selfBrowserSurface="include",Ct&&(vo(Ct,"surfaceSwitching",["exclude","include"]),mt.surfaceSwitching=Ct)),(hS(105)||zI(105)||KI(91))&&It&&(vo(It,"systemAudio",["exclude","include"]),mt.systemAudio=It),pt.electronScreenSourceId&&(mt.sourceId=pt.electronScreenSourceId);let kt=pt.encoderConfig?fT(pt.encoderConfig):null;return mt.mandatory={chromeMediaSource:"desktop",maxWidth:kt?kt.width:void 0,maxHeight:kt?kt.height:void 0},kt&&(kt.frameRate&&(typeof kt.frameRate=="number"?(mt.mandatory.maxFrameRate=kt.frameRate,mt.mandatory.minFrameRate=kt.frameRate):(mt.mandatory.maxFrameRate=kt.frameRate.max||kt.frameRate.ideal||kt.frameRate.exact||void 0,mt.mandatory.minFrameRate=kt.frameRate.min||kt.frameRate.ideal||kt.frameRate.exact||void 0),mt.frameRate=kt.frameRate),kt.width&&(mt.width=kt.width),kt.height&&(mt.height=kt.height)),mt}(j),rt=Ir(8,"track-scr-v-"),it=null,at=null,ct=vr();if(!ct.supportShareAudio&&s==="enable"){let pt=new rn(Nt.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return $.onError(pt),pt.throw(Et)}Et.info("start create screen video track with config",j,"withAudio",s,"trackId",rt);try{let pt=await Zs({screen:tt,screenAudio:s==="auto"?ct.supportShareAudio:s==="enable"},rt);it=pt.getVideoTracks()[0]||null,at=pt.getAudioTracks()[0]||null}catch(pt){throw $.onError(pt),pt}if(!it){let pt=new rn(Nt.UNEXPECTED_ERROR,"can not find track in media stream");return $.onError(pt),pt.throw(Et)}if(!at&&s==="enable"){it&&it.stop();let pt=new rn(Nt.SHARE_AUDIO_NOT_ALLOWED);return $.onError(pt),pt.throw(Et)}j.optimizationMode||(j.optimizationMode="detail"),j.optimizationMode&&(PT(rt,it,j,j.encoderConfig&&fT(j.encoderConfig)||void 0),j.encoderConfig&&typeof j.encoderConfig!="string"&&(j.encoderConfig.bitrateMin=j.encoderConfig.bitrateMax));let dt=new Hn(it,j.encoderConfig?fT(j.encoderConfig):{},j.scalabiltyMode?J_(j.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},j.optimizationMode,rt,[wr.SCREEN_TRACK]);if(_e&&dt.startMonitorStats(),!at)return $.onSuccess(dt.getTrackId()),Et.info("create screen video track success","video:",dt.getTrackId()),dt;let ut=new dr(at,void 0,Ir(8,"track-scr-a-"),!1,!0);return $.onSuccess([dt.getTrackId(),ut.getTrackId()]),Et.info("create screen video track success","video:",dt.getTrackId(),"audio:",ut.getTrackId()),[dt,ut]},createMicrophoneAndCameraTracks:async function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_MIC_AND_CAM_TRACKS,options:[j,s]}),_e=s.encoderConfig==="720p_auto",tt=lE(s),rt=ww(j),it=Ir(8,"track-mic-"),at=Ir(8,"track-cam-"),ct=null,dt=null;Et.info("start create camera video track(".concat(at,") and microphone audio track(").concat(it,") with config, audio: ").concat(JSON.stringify(j),", video: ").concat(JSON.stringify(s)));try{let mt=await Zs({audio:rt,video:tt},"".concat(it,"-").concat(at));ct=mt.getAudioTracks()[0],dt=mt.getVideoTracks()[0]}catch(mt){throw $.onError(mt),mt}if(!ct||!dt){let mt=new rn(Nt.UNEXPECTED_ERROR,"can not find tracks in media stream");return $.onError(mt),mt.throw(Et)}s.optimizationMode&&PT(at,dt,s,mu(s.encoderConfig));let ut=new _f(ct,j,rt,it),pt=new mp(dt,s,tt,s.scalabiltyMode?J_(s.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},s.optimizationMode,at);return _e&&pt.startMonitorStats(),$.onSuccess([ut.getTrackId(),pt.getTrackId()]),Et.info("create camera video track(".concat(at,") and microphone audio track(").concat(it,") success")),[ut,pt]},createMicrophoneAudioTrack:async function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_MIC_AUDIO_TRACK,options:[j]}),$=ww(j),_e=Ir(8,"track-mic-"),tt=null;Et.info("start create microphone audio track with config",JSON.stringify(j),"trackId",_e);try{tt=(await Zs({audio:$},_e)).getAudioTracks()[0]||null}catch(it){throw s.onError(it),it}if(!tt){let it=new rn(Nt.UNEXPECTED_ERROR,"can not find track in media stream");return s.onError(it),it.throw(Et)}let rt=new _f(tt,j,$,_e);return s.onSuccess(rt.getTrackId()),Et.info("create microphone audio track success, trackId:",_e),rt},createCustomAudioTrack:function(j){let s=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_CUSTOM_AUDIO_TRACK,options:[j]}),$=new dr(j.mediaStreamTrack,j.encoderConfig?Q_(j.encoderConfig):{},Ir(8,"track-cus-"),!1,!0);return Et.info("create custom audio track success with config",j,"trackId",$.getTrackId()),s.onSuccess($.getTrackId()),$},createBufferSourceAudioTrack:async function(j){var s;let{cacheOnlineFile:$,encoderConfig:_e}=j,{source:tt}=j,rt={source:tt instanceof AudioBuffer?"AudioBuffer":tt instanceof File?(s=File.name)!==null&&s!==void 0?s:"File":tt,cacheOnlineFile:$,encoderConfig:_e},it=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CREATE_BUFFER_AUDIO_TRACK,options:[rt]});if(Ft("DISABLE_WEBAUDIO"))throw new rn(Nt.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");let at=Ir(8,"track-buf-");Et.info("start create buffer source audio track with config",JSON.stringify(rt),"trackId",at);let ct=tt;if(!(tt instanceof AudioBuffer))try{tt=await cU(tt,$)}catch(pt){return it.onError(pt),pt.throw(Et)}let dt=new aU(tt),ut=new gp(ct,dt,_e?Q_(_e):{},at);return Et.info("create buffer source audio track success, trackId:",at),it.onSuccess(ut.getTrackId()),ut},setAppType:function(j){if(Et.debug("setAppType: ".concat(j)),!(Number.isInteger(j)&&j>=0))throw Et.debug("Invalid appType"),new Wt(Nt.INVALID_PARAMS,"invalid app type",j);Tr("APP_TYPE",Math.floor(j))},setLogLevel:function(j){Et.setLogLevel(j)},enableLogUpload:function(){Ft("USE_NEW_LOG")?Tr("UPLOAD_LOG",!0):Et.enableLogUpload()},disableLogUpload:function(){Ft("USE_NEW_LOG")?Tr("UPLOAD_LOG",!1):Et.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new wE},checkAudioTrackIsActive:async function(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,$=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[s]});if(!(j instanceof dr||j instanceof zl)){let ct=new Wt(Nt.INVALID_TRACK,"the parameter is not a audio track");return $.onError(ct),ct.throw()}s&&s<1e3&&(s=1e3);let _e=j instanceof dr?j.getTrackLabel():"remote_track",tt=j.getVolumeLevel(),rt=tt,it=tt,at=Date.now();return new Jt(ct=>{let dt=setInterval(()=>{let ut=j.getVolumeLevel();rt=ut>rt?ut:rt,it=ut<it?ut:it;let pt=rt-it>1e-4,mt=Date.now()-at;if(pt||mt>s){clearInterval(dt);let yt=pt,At={duration:mt,deviceLabel:_e,maxVolumeLevel:rt,result:yt};Et.info("[track-".concat(j.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(At))),$.onSuccess(At),ct(yt)}},200)})},checkVideoTrackIsActive:async function(j){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5e3,$=An.reportApiInvoke(null,{tag:Wr.TRACER,name:mo.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[s]});if(!(j instanceof Hn||j instanceof _u)){let pt=new Wt(Nt.INVALID_TRACK,"the parameter is not a video track");return $.onError(pt),pt.throw()}s&&s<1e3&&(s=1e3);let _e=j instanceof Hn?j.getTrackLabel():"remote_track",tt=j.getMediaStreamTrack(!0),rt=document.createElement("video");rt.style.width="1px",rt.style.height="1px",rt.setAttribute("muted",""),rt.muted=!0,rt.setAttribute("playsinline",""),rt.controls=!1,(ls()||E_())&&(rt.style.opacity="0.01",rt.style.position="fixed",rt.style.left="0",rt.style.top="0",document.body.appendChild(rt)),rt.srcObject=new MediaStream([tt]),rt.play();let it=document.createElement("canvas");it.width=160,it.height=120;let at=0,ct=0;try{let pt=Date.now();at=await function(mt,yt,At,Ct){let It,kt=0,Vt=null;return new Jt((Bt,en)=>{function zt(){kt>Ct&&It&&(It(),Bt(kt));let Yt=At.getContext("2d");if(!Yt){let cn=new Wt(Nt.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Et.error(cn.toString()),void en(cn)}Yt.drawImage(mt,0,0,160,120);let Qt=Yt.getImageData(0,0,At.width,At.height),Xt=Math.floor(Qt.data.length/3);if(Vt){for(let cn=0;cn<Xt;cn+=3)if(Qt.data[cn]!==Vt[cn])return kt+=1,void(Vt=Qt.data);Vt=Qt.data}else Vt=Qt.data}setTimeout(()=>{It&&(It(),Bt(kt))},yt),It=vT(()=>{zt()},30)})}(rt,s,it,4),ct=Date.now()-pt}catch(pt){throw $.onError(pt),pt}cV===lr.SAFARI&&(rt.pause(),rt.remove()),rt.srcObject=null;let dt=at>4,ut={duration:ct,changedPicNum:at,deviceLabel:_e,result:dt};return Et.info("[track-".concat(j.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(ut))),$.onSuccess(ut),dt},setArea:cT,audioElementPlayCenter:Ps,resumeAudioContext:function(){Ps.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(j){uV.processExternalMediaAEC(j)},registerExtensions:function(j){let s=Ft("PLUGIN_INFO")||[];j.forEach($=>{"name"in $&&!vn(s).call(s,$.name)&&s.push($.name);let _e=$;_e.__registered__=!0,_e.logger.hookLog=Et.extLog,_e.reporter.hookApiInvoke=An.extApiInvoke,_e.parameters&&Object.keys(_e.parameters).forEach(tt=>{_e.parameters[tt]=Ft(tt)})}),XO("PLUGIN_INFO",s)},ChannelMediaRelayError:cp,ChannelMediaRelayEvent:ru,ChannelMediaRelayState:ms,RemoteStreamFallbackType:_T,RemoteStreamType:mT,ConnectionDisconnectedReason:Xn,AudienceLatencyLevelType:ES,AREAS:rr});return Object.defineProperties(fo,{onAudioAutoplayFailed:{get:()=>ga.onAudioAutoplayFailed,set:j=>{ga.onAudioAutoplayFailed=j}},onAutoplayFailed:{get:()=>ga.onAutoplayFailed,set:j=>{ga.onAutoplayFailed=j}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>fo._onSecurityPolicyViolation,set(j){fo._onSecurityPolicyViolation=j,qO(j)}},__CLIENT_LIST__:{get:()=>Ft("SHOW_GLOBAL_CLIENT_LIST")?sp:[]}}),na.on(Mu.CAMERA_DEVICE_CHANGED,j=>{Et.info("camera device changed",JSON.stringify(j)),fo.onCameraChanged&&fo.onCameraChanged(j),fo.safeEmit(Gl.CAMERA_CHANGED,j)}),na.on(Mu.RECORDING_DEVICE_CHANGED,j=>{Et.info("microphone device changed",JSON.stringify(j)),fo.onMicrophoneChanged&&fo.onMicrophoneChanged(j),fo.safeEmit(Gl.MICROPHONE_CHANGED,j)}),na.on(Mu.PLAYOUT_DEVICE_CHANGED,j=>{Et.debug("playout device changed",JSON.stringify(j)),fo.onPlaybackDeviceChanged&&fo.onPlaybackDeviceChanged(j),fo.safeEmit(Gl.PLAYBACK_DEVICE_CHANGED,j)}),Ps.onAutoplayFailed=()=>{Et.info("detect audio element autoplay failed"),ga.onAudioAutoplayFailed&&ga.onAudioAutoplayFailed()},Er.on("autoplay-failed",()=>{Et.info("detect webaudio autoplay failed"),ga.onAudioAutoplayFailed&&ga.onAudioAutoplayFailed(),fo.safeEmit(Gl.AUTOPLAY_FAILED)}),Er.on(wo.STATE_CHANGE,(j,s)=>{Et.info("audio context state changed: ".concat(s," => ").concat(j)),fo.onAudioContextStateChanged&&fo.onAudioContextStateChanged(j,s),fo.safeEmit(Gl.AUDIO_CONTEXT_STATE_CHANGED,j,s)}),uo.on(Du.NETWORK_STATE_CHANGE,(j,s)=>{Et.info("[network-indicator] network state changed, ".concat(s," => ").concat(j))}),window&&(window.__ARTC__=fo),fo})}),zn={};s2(zn,{AgoraRTCProvider:()=>m2,AgoraRTCReactError:()=>Ue,AgoraRTCScreenShareProvider:()=>R2,LocalAudioTrack:()=>eE,LocalUser:()=>_x,LocalVideoTrack:()=>iE,RemoteAudioTrack:()=>rE,RemoteUser:()=>Sx,RemoteVideoTrack:()=>sE,TrackBoundary:()=>nx,VERSION:()=>Cx,default:()=>Ix,useAutoPlayAudioTrack:()=>Tc,useAutoPlayVideoTrack:()=>gc,useClientEvent:()=>h2,useConnectionState:()=>A2,useCurrentUID:()=>D2,useIsConnected:()=>yi,useJoin:()=>L2,useLocalCameraTrack:()=>W2,useLocalMicrophoneTrack:()=>G2,useLocalScreenTrack:()=>$2,useNetworkQuality:()=>U2,usePublish:()=>V2,useRTCClient:()=>ni,useRTCScreenShareClient:()=>C2,useRemoteAudioTracks:()=>K2,useRemoteUserTrack:()=>Ol,useRemoteUsers:()=>Z2,useRemoteVideoTracks:()=>q2,useTrackEvent:()=>p2,useVolumeLevel:()=>j2});var py=no(Ts());function Me(o,i,et){return o.on(i,et),()=>o.off(i,et)}function o2(o){try{return o()}catch(i){console.error(i)}}function ln(o){return()=>o.forEach(o2)}function zv(o,i){let et=setInterval(o,i);return()=>clearInterval(et)}function Ss(o,i){let et=setTimeout(o,i);return()=>clearTimeout(et)}function aa(){let o,i,et;function nt(){if(i){let St=i;i=void 0,St()}}async function ot(){if(et){let St=et;et=void 0;try{await St()}catch(vt){console.error(vt)}}}async function st(St){o=!0,await ot();try{et=await St()}catch(vt){console.error(vt)}o=!1,nt()}async function lt(){o=!0,await ot(),o=!1,nt()}function ht(St){o?i=()=>st(St):st(St)}function ft(){o?i=lt:lt()}return{run:ht,dispose:ft}}var ca=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function l2(o){return o!=null&&typeof o.then=="function"}function Ki(){let o=reactExports.useRef(!1);return reactExports.useEffect(()=>(o.current=!1,()=>{o.current=!0}),[]),o}function u2(){let o=Ki();function i(et,nt){return new Promise(async(ot,st)=>{try{let lt=await et;o.current||ot(lt)}catch(lt){o.current?nt&&nt(lt):st(lt)}})}return reactExports.useCallback(i,[o])}function wl(o){let i=u2(),[et,nt]=reactExports.useState();return ca(()=>{l2(o)?i(o).then(nt):nt(o)},[o,i]),et}function un(o,i){let et=reactExports.useRef();reactExports.useEffect(()=>{let{run:nt,dispose:ot}=et.current||(et.current=aa());return nt(o),ot},i)}function Qv(o,i){let et=o.split("."),nt=i.split("."),ot=Math.max(et.length,nt.length);for(let st=0;st<ot;st++){let lt=parseInt(et[st]||"0"),ht=parseInt(nt[st]||"0");if(lt>ht)return 1;if(lt<ht)return-1}return 0}function h2(o,i,et){let nt=reactExports.useRef(et);ca(()=>{nt.current=et},[et]),reactExports.useEffect(()=>{if(o)return Me(o,i,(...ot)=>{nt.current&&nt.current(...ot)})},[i,o])}function p2(o,i,et){let nt=reactExports.useRef(et);ca(()=>{nt.current=et},[et]),reactExports.useEffect(()=>{if(o)return Me(o,i,(...ot)=>{nt.current&&nt.current(...ot)})},[i,o])}var ty=reactExports.createContext(null);function m2({client:o,children:i}){return jsxRuntimeExports.jsx(ty.Provider,{value:o,children:i})}function f2(o){let i=reactExports.useContext(ty);return o||i}function ni(o){let i=f2(o);if(!i)throw new Error("Agora RTC client not found. Should be wrapped in <AgoraRTCProvider value={client} />");return i}var ey=reactExports.createContext(null);function R2({client:o,children:i}){return jsxRuntimeExports.jsx(ey.Provider,{value:o,children:i})}function C2(o){let i=reactExports.useContext(ey);return o||i}function A2(o){let i=ni(o),[et,nt]=reactExports.useState(i?i.connectionState:"DISCONNECTED");return reactExports.useEffect(()=>{if(i){nt(i.connectionState);let ot;return ln([Me(i,"connection-state-change",st=>{ot==null||ot(),st==="CONNECTED"?ot=Ss(()=>nt(st),0):nt(st)}),()=>ot==null?void 0:ot()])}else nt("DISCONNECTED")},[i]),et}function yi(o){let i=ni(o),[et,nt]=reactExports.useState(i?i.connectionState==="CONNECTED":!1);return reactExports.useEffect(()=>{if(i){nt(i.connectionState==="CONNECTED");let ot;return ln([Me(i,"connection-state-change",st=>{ot==null||ot(),ot=Ss(()=>nt(st==="CONNECTED"),0)}),()=>ot==null?void 0:ot()])}else nt(!1)},[i]),et}function D2(o){let i=ni(o),[et,nt]=reactExports.useState(i==null?void 0:i.uid);return reactExports.useEffect(()=>{if(i)return Me(i,"connection-state-change",ot=>{if(ot==="CONNECTED")return Ss(()=>nt(i.uid),0);ot==="DISCONNECTED"&&nt(void 0)})},[i]),et}var Ue=class extends Error{constructor(i,et){var o=(...FV)=>(super(...FV),Ul(this,"rtcMethod"),Ul(this,"rtcError"),Ul(this,"name","AgoraRTCReactException"),this);o(typeof et=="string"?et:et.message),this.rtcMethod=i,this.rtcError=et}log(i){console[i](this)}};function L2(o,i=!0,et){let nt=ni(et),ot=yi(et),st=reactExports.useRef(),[lt,ht]=reactExports.useState(!1),[ft,St]=reactExports.useState(0),[vt,Rt]=reactExports.useState(null),wt=Ki();return un(async()=>{if(wt.current||(Rt(null),St(0),ht(!1)),i&&nt){try{wt.current||ht(!0);let{appid:Dt,channel:Pt,token:Ut,uid:Ot}=typeof o=="function"?await o():o,Lt=await nt.join(Dt,Pt,Ut,Ot);wt.current||St(Lt)}catch(Dt){console.error(Dt),wt.current||Rt(new Ue("IAgoraRTCClient.join",Dt))}wt.current||ht(!1);let $t=st.current||(st.current=aa());return ln([()=>{$t.dispose()},()=>{$t.run(()=>nt.unpublish(nt.localTracks))},()=>{for(let Dt of nt.localTracks)Dt.isPlaying&&Dt.stop(),Dt.close();$t.run(()=>nt.leave())}])}},[i,et]),{data:ft,isLoading:lt,isConnected:ot,error:vt}}var iy=()=>({uplinkNetworkQuality:0,downlinkNetworkQuality:0,delay:0});function U2(o){let i=ni(o),[et,nt]=reactExports.useState(iy);return reactExports.useEffect(()=>{if(i)return Me(i,"network-quality",ot=>nt({uplinkNetworkQuality:ot.uplinkNetworkQuality,downlinkNetworkQuality:ot.downlinkNetworkQuality,delay:i.getRTCStats().RTT??0}));nt(iy())},[i]),et}var ry=no(Ts());function V2(o,i=!0,et){let nt=ni(et),ot=yi(et),st=reactExports.useRef([]),[lt,ht]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),vt=Ki();return un(async()=>{if(vt.current||(ht(!1),St(null)),!nt||!ot||!i)return;let Rt=o.filter(Boolean),wt=Pt=>{let Ut=Qv(ry.default.VERSION,"4.18.2")>=0;return Ut||new Ue("usePublish","please check your agora-rtc-sdk-ng version in package.json, it's recommend upgrade to >= 4.18.2").log("warn"),Ut?nt.mode!=="live"||nt.role!=="audience":!0},$t=Pt=>st.current.some(Ut=>Ut&&Ut.getTrackId()===Pt.getTrackId()),Dt=Pt=>wt()&&Pt.enabled&&i&&!$t(Pt);for(let Pt=0;Pt<Rt.length;Pt++){let Ut=Rt[Pt];if(Ut&&Dt(Ut)){await nt.unpublish(st.current.filter(Ot=>(Ot==null?void 0:Ot.trackMediaType)===Ut.trackMediaType));try{vt.current||ht(!0),await nt.publish(Ut)}catch(Ot){console.error(Ot),vt.current||St(new Ue("IAgoraRTCClient.publish",Ot))}vt.current||ht(!1)}}st.current=Rt},[ot,i,nt,o]),{isLoading:lt,error:ft}}function j2(o){let[i,et]=reactExports.useState(0);return reactExports.useEffect(()=>{if(o)return zv(()=>{et(o.getVolumeLevel())},1e3)},[o]),i}var sy=no(Ts());function G2(o=!0,i={ANS:!0,AEC:!0},et){let nt=yi(et),[ot,st]=reactExports.useState(null),[lt,ht]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),vt=Ki();return un(async()=>{if(vt.current||(ht(!1),St(null)),nt&&o&&!ot){try{vt.current||ht(!0);let Rt=await sy.default.createMicrophoneAudioTrack(i);vt.current||st(Rt)}catch(Rt){console.error(Rt),vt.current||St(new Ue("IAgoraRTC.createMicrophoneAudioTrack",Rt))}vt.current||ht(!1)}!nt&&!vt.current&&st(null)},[nt,o]),{localMicrophoneTrack:ot,isLoading:lt,error:ft}}var oy=no(Ts());function W2(o=!0,i,et){let nt=yi(et),[ot,st]=reactExports.useState(null),[lt,ht]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),vt=Ki();return un(async()=>{if(vt.current||(ht(!1),St(null)),nt&&o&&!ot){try{vt.current||ht(!0);let Rt=await oy.default.createCameraVideoTrack(i);vt.current||st(Rt)}catch(Rt){console.error(Rt),vt.current||St(new Ue("IAgoraRTC.createCameraVideoTrack",Rt))}vt.current||ht(!1)}!nt&&!vt.current&&st(null)},[nt,o]),{localCameraTrack:ot,isLoading:lt,error:ft}}function K2(o,i){let et=ni(i),[nt,ot]=reactExports.useState([]),st=yi(),lt=reactExports.useRef([]),[ht,ft]=reactExports.useState(!1),[St,vt]=reactExports.useState(null),Rt=Ki();return un(async()=>{if(Rt.current||vt(null),!Array.isArray(o)||!st)return;let wt=async Pt=>{if(!Pt.audioTrack&&o.some(({uid:Ut})=>Pt.uid===Ut)){try{Rt.current||ft(!0),await et.subscribe(Pt,"audio")}catch(Ut){console.error(Ut),Rt.current||vt(new Ue("IAgoraRTCClient.subscribe",Ut))}Pt.audioTrack&&!lt.current.some(Ut=>Ut.getUserId()===Pt.uid)&&lt.current.push(Pt.audioTrack),lt.current=lt.current.map(Ut=>Pt.audioTrack&&Ut.getUserId()===Pt.uid&&Ut.getTrackId()!==Pt.audioTrack.getTrackId()?Pt.audioTrack:Ut),Rt.current||(ot(lt.current),ft(!1))}},$t=async Pt=>{if(o.some(({uid:Ut})=>Pt.uid===Ut)){Rt.current||(lt.current=lt.current.filter(Ut=>Ut.getUserId()!==Pt.uid),ot(lt.current));try{Rt.current||ft(!0),await et.unsubscribe(Pt,"audio")}catch(Ut){console.error(Ut),Rt.current||vt(new Ue("IAgoraRTCClient.unsubscribe",Ut))}Rt.current||ft(!1)}};o.map(Pt=>{!Pt.audioTrack&&Pt.hasAudio&&wt(Pt)});let Dt=[];for(let Pt=0;Pt<lt.current.length;Pt++){let Ut=lt.current[Pt];if(!o.some(Ot=>Ot.uid===Ut.getUserId())){let Ot=et.remoteUsers.find(Lt=>Lt.uid===Ut.getUserId());Ot&&Dt.push({user:Ot,mediaType:"audio"}),lt.current.splice(Pt,1),Pt--}}if(Dt.length>0){try{Rt.current||ft(!0),await et.massUnsubscribe(Dt)}catch(Pt){console.error(Pt),Rt.current||vt(new Ue("IAgoraRTCClient.massUnsubscribe",Pt))}Rt.current||(ot(lt.current.slice()),ft(!1))}return ln([Me(et,"user-published",(Pt,Ut)=>{o.find(Ot=>Ot.uid===Pt.uid)&&Ut==="audio"&&wt(Pt)}),Me(et,"user-unpublished",(Pt,Ut)=>{o.find(Ot=>Ot.uid===Pt.uid)&&Ut==="audio"&&$t(Pt)})])},[st,et,o]),{audioTracks:nt,isLoading:ht,error:St}}function q2(o,i){let et=ni(i),[nt,ot]=reactExports.useState([]),st=yi(),lt=reactExports.useRef([]),[ht,ft]=reactExports.useState(!1),[St,vt]=reactExports.useState(null),Rt=Ki();return un(async()=>{if(Rt.current||vt(null),!Array.isArray(o)||!st)return;let wt=async Pt=>{if(!Pt.videoTrack&&o.some(({uid:Ut})=>Pt.uid===Ut)){try{Rt.current||ft(!0),await et.subscribe(Pt,"video")}catch(Ut){console.error(Ut),Rt.current||vt(new Ue("IAgoraRTCClient.subscribe",Ut))}Pt.videoTrack&&!lt.current.some(Ut=>Ut.getUserId()===Pt.uid)&&lt.current.push(Pt.videoTrack),lt.current=lt.current.map(Ut=>Pt.videoTrack&&Ut.getUserId()===Pt.uid&&Ut.getTrackId()!==Pt.videoTrack.getTrackId()?Pt.videoTrack:Ut),Rt.current||(ot(lt.current),ft(!1))}},$t=async Pt=>{if(o.some(({uid:Ut})=>Pt.uid===Ut)){Rt.current||(lt.current=lt.current.filter(Ut=>Ut.getUserId()!==Pt.uid),ot(lt.current));try{Rt.current||ft(!0),await et.unsubscribe(Pt,"video")}catch(Ut){console.error(Ut),Rt.current||vt(new Ue("IAgoraRTCClient.unsubscribe",Ut))}Rt.current||ft(!1)}};o.map(Pt=>{!Pt.videoTrack&&Pt.hasVideo&&wt(Pt)});let Dt=[];for(let Pt=0;Pt<lt.current.length;Pt++){let Ut=lt.current[Pt];if(!o.some(Ot=>Ot.uid===Ut.getUserId())){let Ot=et.remoteUsers.find(Lt=>Lt.uid===Ut.getUserId());Ot&&Dt.push({user:Ot,mediaType:"video"}),lt.current.splice(Pt,1),Pt--}}if(Dt.length>0){try{Rt.current||ft(!0),await et.massUnsubscribe(Dt)}catch(Pt){console.error(Pt),Rt.current||vt(new Ue("IAgoraRTCClient.massUnsubscribe",Pt))}Rt.current||(ot(lt.current.slice()),ft(!1))}return ln([Me(et,"user-published",(Pt,Ut)=>{o.find(Ot=>Ot.uid===Pt.uid)&&Ut==="video"&&wt(Pt)}),Me(et,"user-unpublished",(Pt,Ut)=>{o.find(Ot=>Ot.uid===Pt.uid)&&Ut==="video"&&$t(Pt)})])},[st,et,o]),{videoTracks:nt,isLoading:ht,error:St}}function Ol(o,i,et){let nt=ni(et),ot=i==="audio"?"audioTrack":"videoTrack",[st,lt]=reactExports.useState(o&&o[ot]),ht=yi(),ft=reactExports.useRef(),[St,vt]=reactExports.useState(!1),[Rt,wt]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!o||!ht)return;let $t=!1;$t||wt(null);let Dt=i==="audio"?"hasAudio":"hasVideo",Pt=o.uid,Ut=async(xt,jt)=>{if(xt[ot]&&nt.remoteUsers.some(({uid:Ht})=>xt.uid===Ht))try{$t||vt(!0),await nt.unsubscribe(xt,jt)}catch(Ht){$t||wt(new Ue("IAgoraRTCClient.unsubscribe",Ht)),console.error(Ht)}$t||(lt(void 0),vt(!1))},Ot=async(xt,jt)=>{try{!xt[ot]&&nt.remoteUsers.some(({uid:Ht})=>xt.uid===Ht)&&($t||vt(!0),await nt.subscribe(xt,jt)),$t||lt(xt[ot])}catch(Ht){$t||wt(new Ue("IAgoraRTCClient.subscribe",Ht)),console.error(Ht)}$t||vt(!1)},Lt=ft.current||(ft.current=aa());return!o[ot]&&o[Dt]?Lt.run(()=>Ot(o,i)):lt(o[ot]),ln([()=>{$t=!0,Lt.dispose()},Me(nt,"user-published",(xt,jt)=>{xt.uid===Pt&&jt===i&&Lt.run(()=>Ot(xt,i))}),Me(nt,"user-unpublished",(xt,jt)=>{xt.uid===Pt&&jt===i&&Lt.run(()=>Ut(xt,i))})])},[ht,nt,o,i,ot]),{track:st,isLoading:St,error:Rt}}function Z2(o){let i=ni(o),[et,nt]=reactExports.useState(i?i.remoteUsers:[]);return reactExports.useEffect(()=>{if(i){let ot=()=>nt(i.remoteUsers.slice());return ln([Me(i,"user-joined",ot),Me(i,"user-left",ot),Me(i,"user-published",ot),Me(i,"user-unpublished",ot)])}},[i]),et}var ay=no(Ts());function $2(o=!0,i,et,nt){let ot=yi(nt),[st,lt]=reactExports.useState(null),[ht,ft]=reactExports.useState(!1),[St,vt]=reactExports.useState(null),Rt=Ki();return un(async()=>{if(Rt.current||(ft(!1),vt(null)),ot&&o&&!st){try{Rt.current||ft(!0);let wt=await ay.default.createScreenVideoTrack(i,et);Rt.current||lt(wt)}catch(wt){console.error(wt),Rt.current||vt(new Ue("IAgoraRTC.createScreenVideoTrack",wt))}Rt.current||ft(!1)}(!ot||!o)&&!Rt.current&&lt(null)},[ot,o]),{screenTrack:st,isLoading:ht,error:St}}function ix(){let o=new Map,i=1500;return{onMount:et=>{let nt=o.get(et);nt&&(nt(),o.delete(et))},onUnmount:et=>{let nt=o.get(et);nt&&nt(),o.set(et,Ss(()=>{et.isPlaying&&et.stop(),o.delete(et)},i))},dispose:()=>{for(let[et,nt]of o)et.isPlaying&&et.stop(),nt&&nt();o.clear()}}}var $_=reactExports.createContext(void 0);function nx({children:o}){let[i]=reactExports.useState(ix);return reactExports.useEffect(()=>i.dispose,[i]),jsxRuntimeExports.jsx($_.Provider,{value:i,children:o})}function gc(o,i,et){let nt=reactExports.useContext($_);reactExports.useEffect(()=>{if(o)return et&&i?o.play(et):o.stop(),nt?(nt.onMount(o),()=>nt.onUnmount(o)):()=>{o.isPlaying&&o.stop()}},[o,et,i,nt])}function Tc(o,i){let et=reactExports.useContext($_);ca(()=>{if(o)return i?o.play():o.stop(),et?(et.onMount(o),()=>et.onUnmount(o)):()=>{o.isPlaying&&o.stop()}},[o,i,et])}function eE({track:o,play:i=!1,volume:et,disabled:nt,muted:ot,children:st}){let lt=wl(o);return Tc(lt,i),reactExports.useEffect(()=>{lt&&et!=null&&lt.setVolume(et)},[lt,et]),reactExports.useEffect(()=>{lt&&nt!=null&&lt.setEnabled(!nt).catch(console.warn)},[nt,lt]),reactExports.useEffect(()=>{lt&&ot!=null&&lt.setMuted(ot).catch(console.warn)},[ot,lt]),st?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:st}):null}var Nl={position:"relative",width:"100%",height:"100%",overflow:"hidden",background:"#000"},Dl={width:"100%",height:"100%"},da={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:2},Rs=(o,i)=>reactExports.useMemo(()=>({...o,...i}),[o,i]);function iE({track:o,play:i,disabled:et,muted:nt,style:ot,...st}){let lt=Rs(Dl,ot),[ht,ft]=reactExports.useState(null),St=wl(o);return gc(St,i,ht),reactExports.useEffect(()=>{St&&et!=null&&St.setEnabled(!et).catch(console.warn)},[et,St]),reactExports.useEffect(()=>{St&&nt!=null&&St.setMuted(nt).catch(console.warn)},[nt,St]),jsxRuntimeExports.jsx("div",{...st,ref:ft,style:lt})}var lx={width:"100%",height:"100%",background:"#1a1e21 center/cover no-repeat",filter:"blur(16px) brightness(0.4)"},ux={position:"absolute",top:"50%",left:"50%",maxWidth:"50%",maxHeight:"50%",aspectRatio:"1",transform:"translate(-50%, -50%)",borderRadius:"50%",overflow:"hidden",objectFit:"cover"};function Pl({cover:o}){return jsxRuntimeExports.jsx("div",{style:da,children:typeof o=="string"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{...lx,backgroundImage:`url(${o})`}}),jsxRuntimeExports.jsx("img",{src:o,style:ux})]}):o()})}function _x({micOn:o,cameraOn:i,audioTrack:et,videoTrack:nt,playAudio:ot,playVideo:st,volume:lt,cover:ht,children:ft,style:St,...vt}){let Rt=Rs(Nl,St);return st=st??!!i,ot=ot??!!o,jsxRuntimeExports.jsxs("div",{...vt,style:Rt,children:[jsxRuntimeExports.jsx(iE,{disabled:!i,play:st,track:nt}),jsxRuntimeExports.jsx(eE,{disabled:!o,play:ot,track:et,volume:lt}),ht&&!i&&jsxRuntimeExports.jsx(Pl,{cover:ht}),jsxRuntimeExports.jsx("div",{style:da,children:ft})]})}function rE({track:o,play:i=!1,playbackDeviceId:et,volume:nt,children:ot}){return Tc(o,i),reactExports.useEffect(()=>{o&&et!=null&&o.setPlaybackDevice(et).catch(console.warn)},[o,et]),reactExports.useEffect(()=>{o&&nt!=null&&o.setVolume(nt)},[o,nt]),ot?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ot}):null}function sE({track:o,play:i,style:et,...nt}){let ot=Rs(Dl,et),[st,lt]=reactExports.useState(null);return gc(o,i,st),jsxRuntimeExports.jsx("div",{...nt,ref:lt,style:ot})}function Sx({user:o,playVideo:i,playAudio:et,playbackDeviceId:nt,volume:ot,cover:st,style:lt,children:ht,...ft}){let St=Rs(Nl,lt),{track:vt}=Ol(o,"video"),{track:Rt}=Ol(o,"audio");return i=i??(o==null?void 0:o.hasVideo),et=et??(o==null?void 0:o.hasAudio),jsxRuntimeExports.jsxs("div",{...ft,style:St,children:[jsxRuntimeExports.jsx(sE,{play:i,track:vt}),jsxRuntimeExports.jsx(rE,{play:et,playbackDeviceId:nt,track:Rt,volume:ot}),st&&!i&&jsxRuntimeExports.jsx(Pl,{cover:st}),jsxRuntimeExports.jsx("div",{style:da,children:ht})]})}var hy=no(Ts()),oE=class{constructor(){Ul(this,"appType",1001);hy.default.setAppType(this.appType)}};new oE;var Cx="2.1.0";_r(zn,no(Ts()));var Ix=py.default,Send={},interopRequireDefault={exports:{}};(function(o){function i(et){return et&&et.__esModule?et:{default:et}}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon$1={};function isPlainObject$2(o){if(typeof o!="object"||o===null)return!1;const i=Object.getPrototypeOf(o);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)}function deepClone(o){if(!isPlainObject$2(o))return o;const i={};return Object.keys(o).forEach(et=>{i[et]=deepClone(o[et])}),i}function deepmerge(o,i,et={clone:!0}){const nt=et.clone?_extends$3({},o):o;return isPlainObject$2(o)&&isPlainObject$2(i)&&Object.keys(i).forEach(ot=>{ot!=="__proto__"&&(isPlainObject$2(i[ot])&&ot in o&&isPlainObject$2(o[ot])?nt[ot]=deepmerge(o[ot],i[ot],et):et.clone?nt[ot]=isPlainObject$2(i[ot])?deepClone(i[ot]):i[ot]:nt[ot]=i[ot])}),nt}function formatMuiErrorMessage(o){let i="https://mui.com/production-error/?code="+o;for(let et=1;et<arguments.length;et+=1)i+="&args[]="+encodeURIComponent(arguments[et]);return"Minified MUI error #"+o+"; visit "+i+" for the full message."}var reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),h=Symbol.for("react.context"),k=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v(o){if(typeof o=="object"&&o!==null){var i=o.$$typeof;switch(i){case b:switch(o=o.type,o){case d:case f:case e:case m:case n:return o;default:switch(o=o&&o.$$typeof,o){case k:case h:case l:case q:case p:case g:return o;default:return i}}case c:return i}}}reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=g;reactIs_production_min.Element=b;reactIs_production_min.ForwardRef=l;reactIs_production_min.Fragment=d;reactIs_production_min.Lazy=q;reactIs_production_min.Memo=p;reactIs_production_min.Portal=c;reactIs_production_min.Profiler=f;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m;reactIs_production_min.SuspenseList=n;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(o){return v(o)===h};reactIs_production_min.isContextProvider=function(o){return v(o)===g};reactIs_production_min.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===b};reactIs_production_min.isForwardRef=function(o){return v(o)===l};reactIs_production_min.isFragment=function(o){return v(o)===d};reactIs_production_min.isLazy=function(o){return v(o)===q};reactIs_production_min.isMemo=function(o){return v(o)===p};reactIs_production_min.isPortal=function(o){return v(o)===c};reactIs_production_min.isProfiler=function(o){return v(o)===f};reactIs_production_min.isStrictMode=function(o){return v(o)===e};reactIs_production_min.isSuspense=function(o){return v(o)===m};reactIs_production_min.isSuspenseList=function(o){return v(o)===n};reactIs_production_min.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===d||o===f||o===e||o===m||o===n||o===t||typeof o=="object"&&o!==null&&(o.$$typeof===q||o.$$typeof===p||o.$$typeof===g||o.$$typeof===h||o.$$typeof===l||o.$$typeof===u||o.getModuleId!==void 0)};reactIs_production_min.typeOf=v;function capitalize(o){if(typeof o!="string")throw new Error(formatMuiErrorMessage(7));return o.charAt(0).toUpperCase()+o.slice(1)}function createChainedFunction(...o){return o.reduce((i,et)=>et==null?i:function(...ot){i.apply(this,ot),et.apply(this,ot)},()=>{})}function debounce$1(o,i=166){let et;function nt(...ot){const st=()=>{o.apply(this,ot)};clearTimeout(et),et=setTimeout(st,i)}return nt.clear=()=>{clearTimeout(et)},nt}function deprecatedPropType(o,i){return()=>null}function isMuiElement(o,i){var et,nt;return reactExports.isValidElement(o)&&i.indexOf((et=o.type.muiName)!=null?et:(nt=o.type)==null||(nt=nt._payload)==null||(nt=nt.value)==null?void 0:nt.muiName)!==-1}function ownerDocument(o){return o&&o.ownerDocument||document}function ownerWindow(o){return ownerDocument(o).defaultView||window}function requirePropFactory(o,i){return()=>null}function setRef(o,i){typeof o=="function"?o(i):o&&(o.current=i)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let globalId=0;function useGlobalId(o){const[i,et]=reactExports.useState(o),nt=o||i;return reactExports.useEffect(()=>{i==null&&(globalId+=1,et(`mui-${globalId}`))},[i]),nt}const maybeReactUseId=React$2.useId;function useId(o){if(maybeReactUseId!==void 0){const i=maybeReactUseId();return o??i}return useGlobalId(o)}function unsupportedProp(o,i,et,nt,ot){return null}function useControlled({controlled:o,default:i,name:et,state:nt="value"}){const{current:ot}=reactExports.useRef(o!==void 0),[st,lt]=reactExports.useState(i),ht=ot?o:st,ft=reactExports.useCallback(St=>{ot||lt(St)},[]);return[ht,ft]}function useEventCallback(o){const i=reactExports.useRef(o);return useEnhancedEffect(()=>{i.current=o}),reactExports.useRef((...et)=>(0,i.current)(...et)).current}function useForkRef(...o){return reactExports.useMemo(()=>o.every(i=>i==null)?null:i=>{o.forEach(et=>{setRef(et,i)})},o)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(o){const{type:i,tagName:et}=o;return!!(et==="INPUT"&&inputTypesWhitelist[i]&&!o.readOnly||et==="TEXTAREA"&&!o.readOnly||o.isContentEditable)}function handleKeyDown(o){o.metaKey||o.altKey||o.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(o){o.addEventListener("keydown",handleKeyDown,!0),o.addEventListener("mousedown",handlePointerDown,!0),o.addEventListener("pointerdown",handlePointerDown,!0),o.addEventListener("touchstart",handlePointerDown,!0),o.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(o){const{target:i}=o;try{return i.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(i)}function useIsFocusVisible(){const o=reactExports.useCallback(ot=>{ot!=null&&prepare(ot.ownerDocument)},[]),i=reactExports.useRef(!1);function et(){return i.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),i.current=!1,!0):!1}function nt(ot){return isFocusVisible(ot)?(i.current=!0,!0):!1}return{isFocusVisibleRef:i,onFocus:nt,onBlur:et,ref:o}}function getScrollbarSize(o){const i=o.documentElement.clientWidth;return Math.abs(window.innerWidth-i)}function resolveProps(o,i){const et=_extends$3({},i);return Object.keys(o).forEach(nt=>{if(nt.toString().match(/^(components|slots)$/))et[nt]=_extends$3({},o[nt],et[nt]);else if(nt.toString().match(/^(componentsProps|slotProps)$/)){const ot=o[nt]||{},st=i[nt];et[nt]={},!st||!Object.keys(st)?et[nt]=ot:!ot||!Object.keys(ot)?et[nt]=st:(et[nt]=_extends$3({},st),Object.keys(ot).forEach(lt=>{et[nt][lt]=resolveProps(ot[lt],st[lt])}))}else et[nt]===void 0&&(et[nt]=o[nt])}),et}function composeClasses(o,i,et=void 0){const nt={};return Object.keys(o).forEach(ot=>{nt[ot]=o[ot].reduce((st,lt)=>{if(lt){const ht=i(lt);ht!==""&&st.push(ht),et&&et[lt]&&st.push(et[lt])}return st},[]).join(" ")}),nt}const defaultGenerator=o=>o,createClassNameGenerator=()=>{let o=defaultGenerator;return{configure(i){o=i},generate(i){return o(i)},reset(){o=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass$1(o,i,et="Mui"){const nt=globalStateClasses[i];return nt?`${et}-${nt}`:`${ClassNameGenerator$1.generate(o)}-${i}`}function generateUtilityClasses$1(o,i,et="Mui"){const nt={};return i.forEach(ot=>{nt[ot]=generateUtilityClass$1(o,ot,et)}),nt}function clamp(o,i=Number.MIN_SAFE_INTEGER,et=Number.MAX_SAFE_INTEGER){return Math.max(i,Math.min(o,et))}function _objectWithoutPropertiesLoose(o,i){if(o==null)return{};var et={},nt=Object.keys(o),ot,st;for(st=0;st<nt.length;st++)ot=nt[st],!(i.indexOf(ot)>=0)&&(et[ot]=o[ot]);return et}function r(o){var i,et,nt="";if(typeof o=="string"||typeof o=="number")nt+=o;else if(typeof o=="object")if(Array.isArray(o)){var ot=o.length;for(i=0;i<ot;i++)o[i]&&(et=r(o[i]))&&(nt&&(nt+=" "),nt+=et)}else for(et in o)o[et]&&(nt&&(nt+=" "),nt+=et);return nt}function clsx(){for(var o,i,et=0,nt="",ot=arguments.length;et<ot;et++)(o=arguments[et])&&(i=r(o))&&(nt&&(nt+=" "),nt+=i);return nt}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(o){return reactPropsRegex.test(o)||o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&o.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(i){return i!=="theme"},getDefaultShouldForwardProp=function(i){return typeof i=="string"&&i.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(i,et,nt){var ot;if(et){var st=et.shouldForwardProp;ot=i.__emotion_forwardProp&&st?function(lt){return i.__emotion_forwardProp(lt)&&st(lt)}:st}return typeof ot!="function"&&nt&&(ot=i.__emotion_forwardProp),ot},Insertion=function(i){var et=i.cache,nt=i.serialized,ot=i.isStringTag;return registerStyles(et,nt,ot),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(et,nt,ot)}),null},createStyled$1=function o(i,et){var nt=i.__emotion_real===i,ot=nt&&i.__emotion_base||i,st,lt;et!==void 0&&(st=et.label,lt=et.target);var ht=composeShouldForwardProps(i,et,nt),ft=ht||getDefaultShouldForwardProp(ot),St=!ft("as");return function(){var vt=arguments,Rt=nt&&i.__emotion_styles!==void 0?i.__emotion_styles.slice(0):[];if(st!==void 0&&Rt.push("label:"+st+";"),vt[0]==null||vt[0].raw===void 0)Rt.push.apply(Rt,vt);else{Rt.push(vt[0][0]);for(var wt=vt.length,$t=1;$t<wt;$t++)Rt.push(vt[$t],vt[0][$t])}var Dt=withEmotionCache(function(Pt,Ut,Ot){var Lt=St&&Pt.as||ot,xt="",jt=[],Ht=Pt;if(Pt.theme==null){Ht={};for(var qt in Pt)Ht[qt]=Pt[qt];Ht.theme=reactExports.useContext(ThemeContext)}typeof Pt.className=="string"?xt=getRegisteredStyles(Ut.registered,jt,Pt.className):Pt.className!=null&&(xt=Pt.className+" ");var Kt=serializeStyles(Rt.concat(jt),Ut.registered,Ht);xt+=Ut.key+"-"+Kt.name,lt!==void 0&&(xt+=" "+lt);var nn=St&&ht===void 0?getDefaultShouldForwardProp(Lt):ft,Zt={};for(var tn in Pt)St&&tn==="as"||nn(tn)&&(Zt[tn]=Pt[tn]);return Zt.className=xt,Zt.ref=Ot,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:Ut,serialized:Kt,isStringTag:typeof Lt=="string"}),reactExports.createElement(Lt,Zt))});return Dt.displayName=st!==void 0?st:"Styled("+(typeof ot=="string"?ot:ot.displayName||ot.name||"Component")+")",Dt.defaultProps=i.defaultProps,Dt.__emotion_real=Dt,Dt.__emotion_base=ot,Dt.__emotion_styles=Rt,Dt.__emotion_forwardProp=ht,Object.defineProperty(Dt,"toString",{value:function(){return"."+lt}}),Dt.withComponent=function(Pt,Ut){return o(Pt,_extends$3({},et,Ut,{shouldForwardProp:composeShouldForwardProps(Dt,Ut,!0)})).apply(void 0,Rt)},Dt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(o){newStyled[o]=newStyled(o)});function isEmpty$4(o){return o==null||Object.keys(o).length===0}function GlobalStyles$2(o){const{styles:i,defaultTheme:et={}}=o,nt=typeof i=="function"?ot=>i(isEmpty$4(ot)?et:ot):i;return jsxRuntimeExports.jsx(Global,{styles:nt})}function styled$2(o,i){return newStyled(o,i)}const internal_processStyles=(o,i)=>{Array.isArray(o.__emotion_styles)&&(o.__emotion_styles=i(o.__emotion_styles))},_excluded$U=["values","unit","step"],sortBreakpointsValues=o=>{const i=Object.keys(o).map(et=>({key:et,val:o[et]}))||[];return i.sort((et,nt)=>et.val-nt.val),i.reduce((et,nt)=>_extends$3({},et,{[nt.key]:nt.val}),{})};function createBreakpoints(o){const{values:i={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:et="px",step:nt=5}=o,ot=_objectWithoutPropertiesLoose(o,_excluded$U),st=sortBreakpointsValues(i),lt=Object.keys(st);function ht(wt){return`@media (min-width:${typeof i[wt]=="number"?i[wt]:wt}${et})`}function ft(wt){return`@media (max-width:${(typeof i[wt]=="number"?i[wt]:wt)-nt/100}${et})`}function St(wt,$t){const Dt=lt.indexOf($t);return`@media (min-width:${typeof i[wt]=="number"?i[wt]:wt}${et}) and (max-width:${(Dt!==-1&&typeof i[lt[Dt]]=="number"?i[lt[Dt]]:$t)-nt/100}${et})`}function vt(wt){return lt.indexOf(wt)+1<lt.length?St(wt,lt[lt.indexOf(wt)+1]):ht(wt)}function Rt(wt){const $t=lt.indexOf(wt);return $t===0?ht(lt[1]):$t===lt.length-1?ft(lt[$t]):St(wt,lt[lt.indexOf(wt)+1]).replace("@media","@media not all and")}return _extends$3({keys:lt,values:st,up:ht,down:ft,between:St,only:vt,not:Rt,unit:et},ot)}const shape={borderRadius:4},shape$1=shape;function merge(o,i){return i?deepmerge(o,i,{clone:!1}):o}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:o=>`@media (min-width:${values$1[o]}px)`};function handleBreakpoints(o,i,et){const nt=o.theme||{};if(Array.isArray(i)){const st=nt.breakpoints||defaultBreakpoints;return i.reduce((lt,ht,ft)=>(lt[st.up(st.keys[ft])]=et(i[ft]),lt),{})}if(typeof i=="object"){const st=nt.breakpoints||defaultBreakpoints;return Object.keys(i).reduce((lt,ht)=>{if(Object.keys(st.values||values$1).indexOf(ht)!==-1){const ft=st.up(ht);lt[ft]=et(i[ht],ht)}else{const ft=ht;lt[ft]=i[ft]}return lt},{})}return et(i)}function createEmptyBreakpointObject(o={}){var i;return((i=o.keys)==null?void 0:i.reduce((nt,ot)=>{const st=o.up(ot);return nt[st]={},nt},{}))||{}}function removeUnusedBreakpoints(o,i){return o.reduce((et,nt)=>{const ot=et[nt];return(!ot||Object.keys(ot).length===0)&&delete et[nt],et},i)}function mergeBreakpointsInOrder(o,...i){const et=createEmptyBreakpointObject(o),nt=[et,...i].reduce((ot,st)=>deepmerge(ot,st),{});return removeUnusedBreakpoints(Object.keys(et),nt)}function computeBreakpointsBase(o,i){if(typeof o!="object")return{};const et={},nt=Object.keys(i);return Array.isArray(o)?nt.forEach((ot,st)=>{st<o.length&&(et[ot]=!0)}):nt.forEach(ot=>{o[ot]!=null&&(et[ot]=!0)}),et}function resolveBreakpointValues({values:o,breakpoints:i,base:et}){const nt=et||computeBreakpointsBase(o,i),ot=Object.keys(nt);if(ot.length===0)return o;let st;return ot.reduce((lt,ht,ft)=>(Array.isArray(o)?(lt[ht]=o[ft]!=null?o[ft]:o[st],st=ft):typeof o=="object"?(lt[ht]=o[ht]!=null?o[ht]:o[st],st=ht):lt[ht]=o,lt),{})}function getPath(o,i,et=!0){if(!i||typeof i!="string")return null;if(o&&o.vars&&et){const nt=`vars.${i}`.split(".").reduce((ot,st)=>ot&&ot[st]?ot[st]:null,o);if(nt!=null)return nt}return i.split(".").reduce((nt,ot)=>nt&&nt[ot]!=null?nt[ot]:null,o)}function getStyleValue$1(o,i,et,nt=et){let ot;return typeof o=="function"?ot=o(et):Array.isArray(o)?ot=o[et]||nt:ot=getPath(o,et)||nt,i&&(ot=i(ot,nt,o)),ot}function style$2(o){const{prop:i,cssProperty:et=o.prop,themeKey:nt,transform:ot}=o,st=lt=>{if(lt[i]==null)return null;const ht=lt[i],ft=lt.theme,St=getPath(ft,nt)||{};return handleBreakpoints(lt,ht,Rt=>{let wt=getStyleValue$1(St,ot,Rt);return Rt===wt&&typeof Rt=="string"&&(wt=getStyleValue$1(St,ot,`${i}${Rt==="default"?"":capitalize(Rt)}`,Rt)),et===!1?wt:{[et]:wt}})};return st.propTypes={},st.filterProps=[i],st}function memoize(o){const i={};return et=>(i[et]===void 0&&(i[et]=o(et)),i[et])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(o=>{if(o.length>2)if(aliases[o])o=aliases[o];else return[o];const[i,et]=o.split(""),nt=properties[i],ot=directions[et]||"";return Array.isArray(ot)?ot.map(st=>nt+st):[nt+ot]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(o,i,et,nt){var ot;const st=(ot=getPath(o,i,!1))!=null?ot:et;return typeof st=="number"?lt=>typeof lt=="string"?lt:st*lt:Array.isArray(st)?lt=>typeof lt=="string"?lt:st[lt]:typeof st=="function"?st:()=>{}}function createUnarySpacing(o){return createUnaryUnit(o,"spacing",8)}function getValue(o,i){if(typeof i=="string"||i==null)return i;const et=Math.abs(i),nt=o(et);return i>=0?nt:typeof nt=="number"?-nt:`-${nt}`}function getStyleFromPropValue(o,i){return et=>o.reduce((nt,ot)=>(nt[ot]=getValue(i,et),nt),{})}function resolveCssProperty(o,i,et,nt){if(i.indexOf(et)===-1)return null;const ot=getCssProperties(et),st=getStyleFromPropValue(ot,nt),lt=o[et];return handleBreakpoints(o,lt,st)}function style$1(o,i){const et=createUnarySpacing(o.theme);return Object.keys(o).map(nt=>resolveCssProperty(o,i,nt,et)).reduce(merge,{})}function margin(o){return style$1(o,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(o){return style$1(o,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(o=8){if(o.mui)return o;const i=createUnarySpacing({spacing:o}),et=(...nt)=>(nt.length===0?[1]:nt).map(st=>{const lt=i(st);return typeof lt=="number"?`${lt}px`:lt}).join(" ");return et.mui=!0,et}function compose$1(...o){const i=o.reduce((nt,ot)=>(ot.filterProps.forEach(st=>{nt[st]=ot}),nt),{}),et=nt=>Object.keys(nt).reduce((ot,st)=>i[st]?merge(ot,i[st](nt)):ot,{});return et.propTypes={},et.filterProps=o.reduce((nt,ot)=>nt.concat(ot.filterProps),[]),et}function borderTransform(o){return typeof o!="number"?o:`${o}px solid`}function createBorderStyle(o,i){return style$2({prop:o,themeKey:"borders",transform:i})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=o=>{if(o.borderRadius!==void 0&&o.borderRadius!==null){const i=createUnaryUnit(o.theme,"shape.borderRadius",4),et=nt=>({borderRadius:getValue(i,nt)});return handleBreakpoints(o,o.borderRadius,et)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose$1(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=o=>{if(o.gap!==void 0&&o.gap!==null){const i=createUnaryUnit(o.theme,"spacing",8),et=nt=>({gap:getValue(i,nt)});return handleBreakpoints(o,o.gap,et)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=o=>{if(o.columnGap!==void 0&&o.columnGap!==null){const i=createUnaryUnit(o.theme,"spacing",8),et=nt=>({columnGap:getValue(i,nt)});return handleBreakpoints(o,o.columnGap,et)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=o=>{if(o.rowGap!==void 0&&o.rowGap!==null){const i=createUnaryUnit(o.theme,"spacing",8),et=nt=>({rowGap:getValue(i,nt)});return handleBreakpoints(o,o.rowGap,et)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose$1(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(o,i){return i==="grey"?i:o}const color=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose$1(color,bgcolor,backgroundColor);function sizingTransform(o){return o<=1&&o!==0?`${o*100}%`:o}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=o=>{if(o.maxWidth!==void 0&&o.maxWidth!==null){const i=et=>{var nt,ot;const st=((nt=o.theme)==null||(nt=nt.breakpoints)==null||(nt=nt.values)==null?void 0:nt[et])||values$1[et];return st?((ot=o.theme)==null||(ot=ot.breakpoints)==null?void 0:ot.unit)!=="px"?{maxWidth:`${st}${o.theme.breakpoints.unit}`}:{maxWidth:st}:{maxWidth:sizingTransform(et)}};return handleBreakpoints(o,o.maxWidth,i)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose$1(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:o=>({"@media print":{display:o}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...o){const i=o.reduce((nt,ot)=>nt.concat(Object.keys(ot)),[]),et=new Set(i);return o.every(nt=>et.size===Object.keys(nt).length)}function callIfFn(o,i){return typeof o=="function"?o(i):o}function unstable_createStyleFunctionSx(){function o(et,nt,ot,st){const lt={[et]:nt,theme:ot},ht=st[et];if(!ht)return{[et]:nt};const{cssProperty:ft=et,themeKey:St,transform:vt,style:Rt}=ht;if(nt==null)return null;if(St==="typography"&&nt==="inherit")return{[et]:nt};const wt=getPath(ot,St)||{};return Rt?Rt(lt):handleBreakpoints(lt,nt,Dt=>{let Pt=getStyleValue$1(wt,vt,Dt);return Dt===Pt&&typeof Dt=="string"&&(Pt=getStyleValue$1(wt,vt,`${et}${Dt==="default"?"":capitalize(Dt)}`,Dt)),ft===!1?Pt:{[ft]:Pt}})}function i(et){var nt;const{sx:ot,theme:st={}}=et||{};if(!ot)return null;const lt=(nt=st.unstable_sxConfig)!=null?nt:defaultSxConfig$1;function ht(ft){let St=ft;if(typeof ft=="function")St=ft(st);else if(typeof ft!="object")return ft;if(!St)return null;const vt=createEmptyBreakpointObject(st.breakpoints),Rt=Object.keys(vt);let wt=vt;return Object.keys(St).forEach($t=>{const Dt=callIfFn(St[$t],st);if(Dt!=null)if(typeof Dt=="object")if(lt[$t])wt=merge(wt,o($t,Dt,st,lt));else{const Pt=handleBreakpoints({theme:st},Dt,Ut=>({[$t]:Ut}));objectsHaveSameKeys(Pt,Dt)?wt[$t]=i({sx:Dt,theme:st}):wt=merge(wt,Pt)}else wt=merge(wt,o($t,Dt,st,lt))}),removeUnusedBreakpoints(Rt,wt)}return Array.isArray(ot)?ot.map(ht):ht(ot)}return i}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const _excluded$T=["breakpoints","palette","spacing","shape"];function createTheme$1(o={},...i){const{breakpoints:et={},palette:nt={},spacing:ot,shape:st={}}=o,lt=_objectWithoutPropertiesLoose(o,_excluded$T),ht=createBreakpoints(et),ft=createSpacing(ot);let St=deepmerge({breakpoints:ht,direction:"ltr",components:{},palette:_extends$3({mode:"light"},nt),spacing:ft,shape:_extends$3({},shape$1,st)},lt);return St=i.reduce((vt,Rt)=>deepmerge(vt,Rt),St),St.unstable_sxConfig=_extends$3({},defaultSxConfig$1,lt==null?void 0:lt.unstable_sxConfig),St.unstable_sx=function(Rt){return styleFunctionSx({sx:Rt,theme:this})},St}function isObjectEmpty(o){return Object.keys(o).length===0}function useTheme$2(o=null){const i=reactExports.useContext(ThemeContext);return!i||isObjectEmpty(i)?o:i}const systemDefaultTheme$1=createTheme$1();function useTheme$1(o=systemDefaultTheme$1){return useTheme$2(o)}function GlobalStyles$1({styles:o,themeId:i,defaultTheme:et={}}){const nt=useTheme$1(et),ot=typeof o=="function"?o(i&&nt[i]||nt):o;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:ot})}const _excluded$S=["sx"],splitProps=o=>{var i,et;const nt={systemProps:{},otherProps:{}},ot=(i=o==null||(et=o.theme)==null?void 0:et.unstable_sxConfig)!=null?i:defaultSxConfig$1;return Object.keys(o).forEach(st=>{ot[st]?nt.systemProps[st]=o[st]:nt.otherProps[st]=o[st]}),nt};function extendSxProp(o){const{sx:i}=o,et=_objectWithoutPropertiesLoose(o,_excluded$S),{systemProps:nt,otherProps:ot}=splitProps(et);let st;return Array.isArray(i)?st=[nt,...i]:typeof i=="function"?st=(...lt)=>{const ht=i(...lt);return isPlainObject$2(ht)?_extends$3({},nt,ht):nt}:st=_extends$3({},nt,i),_extends$3({},ot,{sx:st})}const _excluded$R=["className","component"];function createBox(o={}){const{themeId:i,defaultTheme:et,defaultClassName:nt="MuiBox-root",generateClassName:ot}=o,st=styled$2("div",{shouldForwardProp:ht=>ht!=="theme"&&ht!=="sx"&&ht!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(ft,St){const vt=useTheme$1(et),Rt=extendSxProp(ft),{className:wt,component:$t="div"}=Rt,Dt=_objectWithoutPropertiesLoose(Rt,_excluded$R);return jsxRuntimeExports.jsx(st,_extends$3({as:$t,ref:St,className:clsx(wt,ot?ot(nt):nt),theme:i&&vt[i]||vt},Dt))})}const _excluded$Q=["variant"];function isEmpty$3(o){return o.length===0}function propsToClassKey(o){const{variant:i}=o,et=_objectWithoutPropertiesLoose(o,_excluded$Q);let nt=i||"";return Object.keys(et).sort().forEach(ot=>{ot==="color"?nt+=isEmpty$3(nt)?o[ot]:capitalize(o[ot]):nt+=`${isEmpty$3(nt)?ot:capitalize(ot)}${capitalize(o[ot].toString())}`}),nt}const _excluded$P=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty$2(o){return Object.keys(o).length===0}function isStringTag(o){return typeof o=="string"&&o.charCodeAt(0)>96}const getStyleOverrides=(o,i)=>i.components&&i.components[o]&&i.components[o].styleOverrides?i.components[o].styleOverrides:null,transformVariants=o=>{let i=0;const et={};return o&&o.forEach(nt=>{let ot="";typeof nt.props=="function"?(ot=`callback${i}`,i+=1):ot=propsToClassKey(nt.props),et[ot]=nt.style}),et},getVariantStyles=(o,i)=>{let et=[];return i&&i.components&&i.components[o]&&i.components[o].variants&&(et=i.components[o].variants),transformVariants(et)},variantsResolver=(o,i,et)=>{const{ownerState:nt={}}=o,ot=[];let st=0;return et&&et.forEach(lt=>{let ht=!0;if(typeof lt.props=="function"){const ft=_extends$3({},o,nt);ht=lt.props(ft)}else Object.keys(lt.props).forEach(ft=>{nt[ft]!==lt.props[ft]&&o[ft]!==lt.props[ft]&&(ht=!1)});ht&&(typeof lt.props=="function"?ot.push(i[`callback${st}`]):ot.push(i[propsToClassKey(lt.props)])),typeof lt.props=="function"&&(st+=1)}),ot},themeVariantsResolver=(o,i,et,nt)=>{var ot;const st=et==null||(ot=et.components)==null||(ot=ot[nt])==null?void 0:ot.variants;return variantsResolver(o,i,st)};function shouldForwardProp(o){return o!=="ownerState"&&o!=="theme"&&o!=="sx"&&o!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=o=>o&&o.charAt(0).toLowerCase()+o.slice(1);function resolveTheme({defaultTheme:o,theme:i,themeId:et}){return isEmpty$2(i)?o:i[et]||i}function defaultOverridesResolver(o){return o?(i,et)=>et[o]:null}const muiStyledFunctionResolver=({styledArg:o,props:i,defaultTheme:et,themeId:nt})=>{const ot=o(_extends$3({},i,{theme:resolveTheme(_extends$3({},i,{defaultTheme:et,themeId:nt}))}));let st;if(ot&&ot.variants&&(st=ot.variants,delete ot.variants),st){const lt=variantsResolver(i,transformVariants(st),st);return[ot,...lt]}return ot};function createStyled(o={}){const{themeId:i,defaultTheme:et=systemDefaultTheme,rootShouldForwardProp:nt=shouldForwardProp,slotShouldForwardProp:ot=shouldForwardProp}=o,st=lt=>styleFunctionSx(_extends$3({},lt,{theme:resolveTheme(_extends$3({},lt,{defaultTheme:et,themeId:i}))}));return st.__mui_systemSx=!0,(lt,ht={})=>{internal_processStyles(lt,jt=>jt.filter(Ht=>!(Ht!=null&&Ht.__mui_systemSx)));const{name:ft,slot:St,skipVariantsResolver:vt,skipSx:Rt,overridesResolver:wt=defaultOverridesResolver(lowercaseFirstLetter(St))}=ht,$t=_objectWithoutPropertiesLoose(ht,_excluded$P),Dt=vt!==void 0?vt:St&&St!=="Root"&&St!=="root"||!1,Pt=Rt||!1;let Ut,Ot=shouldForwardProp;St==="Root"||St==="root"?Ot=nt:St?Ot=ot:isStringTag(lt)&&(Ot=void 0);const Lt=styled$2(lt,_extends$3({shouldForwardProp:Ot,label:Ut},$t)),xt=(jt,...Ht)=>{const qt=Ht?Ht.map(tn=>{if(typeof tn=="function"&&tn.__emotion_real!==tn)return dn=>muiStyledFunctionResolver({styledArg:tn,props:dn,defaultTheme:et,themeId:i});if(isPlainObject$2(tn)){let dn=tn,wn;return tn&&tn.variants&&(wn=tn.variants,delete dn.variants,dn=In=>{let Sn=tn;return variantsResolver(In,transformVariants(wn),wn).forEach(Rn=>{Sn=deepmerge(Sn,Rn)}),Sn}),dn}return tn}):[];let Kt=jt;if(isPlainObject$2(jt)){let tn;jt&&jt.variants&&(tn=jt.variants,delete Kt.variants,Kt=dn=>{let wn=jt;return variantsResolver(dn,transformVariants(tn),tn).forEach(Sn=>{wn=deepmerge(wn,Sn)}),wn})}else typeof jt=="function"&&jt.__emotion_real!==jt&&(Kt=tn=>muiStyledFunctionResolver({styledArg:jt,props:tn,defaultTheme:et,themeId:i}));ft&&wt&&qt.push(tn=>{const dn=resolveTheme(_extends$3({},tn,{defaultTheme:et,themeId:i})),wn=getStyleOverrides(ft,dn);if(wn){const In={};return Object.entries(wn).forEach(([Sn,Nn])=>{In[Sn]=typeof Nn=="function"?Nn(_extends$3({},tn,{theme:dn})):Nn}),wt(tn,In)}return null}),ft&&!Dt&&qt.push(tn=>{const dn=resolveTheme(_extends$3({},tn,{defaultTheme:et,themeId:i}));return themeVariantsResolver(tn,getVariantStyles(ft,dn),dn,ft)}),Pt||qt.push(st);const nn=qt.length-Ht.length;if(Array.isArray(jt)&&nn>0){const tn=new Array(nn).fill("");Kt=[...jt,...tn],Kt.raw=[...jt.raw,...tn]}const Zt=Lt(Kt,...qt);return lt.muiName&&(Zt.muiName=lt.muiName),Zt};return Lt.withConfig&&(xt.withConfig=Lt.withConfig),xt}}const styled$1=createStyled();function getThemeProps(o){const{theme:i,name:et,props:nt}=o;return!i||!i.components||!i.components[et]||!i.components[et].defaultProps?nt:resolveProps(i.components[et].defaultProps,nt)}function useThemeProps$1({props:o,name:i,defaultTheme:et,themeId:nt}){let ot=useTheme$1(et);return nt&&(ot=ot[nt]||ot),getThemeProps({theme:ot,name:i,props:o})}function clampWrapper(o,i=0,et=1){return clamp(o,i,et)}function hexToRgb(o){o=o.slice(1);const i=new RegExp(`.{1,${o.length>=6?2:1}}`,"g");let et=o.match(i);return et&&et[0].length===1&&(et=et.map(nt=>nt+nt)),et?`rgb${et.length===4?"a":""}(${et.map((nt,ot)=>ot<3?parseInt(nt,16):Math.round(parseInt(nt,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(o){if(o.type)return o;if(o.charAt(0)==="#")return decomposeColor(hexToRgb(o));const i=o.indexOf("("),et=o.substring(0,i);if(["rgb","rgba","hsl","hsla","color"].indexOf(et)===-1)throw new Error(formatMuiErrorMessage(9,o));let nt=o.substring(i+1,o.length-1),ot;if(et==="color"){if(nt=nt.split(" "),ot=nt.shift(),nt.length===4&&nt[3].charAt(0)==="/"&&(nt[3]=nt[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(ot)===-1)throw new Error(formatMuiErrorMessage(10,ot))}else nt=nt.split(",");return nt=nt.map(st=>parseFloat(st)),{type:et,values:nt,colorSpace:ot}}function recomposeColor(o){const{type:i,colorSpace:et}=o;let{values:nt}=o;return i.indexOf("rgb")!==-1?nt=nt.map((ot,st)=>st<3?parseInt(ot,10):ot):i.indexOf("hsl")!==-1&&(nt[1]=`${nt[1]}%`,nt[2]=`${nt[2]}%`),i.indexOf("color")!==-1?nt=`${et} ${nt.join(" ")}`:nt=`${nt.join(", ")}`,`${i}(${nt})`}function hslToRgb(o){o=decomposeColor(o);const{values:i}=o,et=i[0],nt=i[1]/100,ot=i[2]/100,st=nt*Math.min(ot,1-ot),lt=(St,vt=(St+et/30)%12)=>ot-st*Math.max(Math.min(vt-3,9-vt,1),-1);let ht="rgb";const ft=[Math.round(lt(0)*255),Math.round(lt(8)*255),Math.round(lt(4)*255)];return o.type==="hsla"&&(ht+="a",ft.push(i[3])),recomposeColor({type:ht,values:ft})}function getLuminance(o){o=decomposeColor(o);let i=o.type==="hsl"||o.type==="hsla"?decomposeColor(hslToRgb(o)).values:o.values;return i=i.map(et=>(o.type!=="color"&&(et/=255),et<=.03928?et/12.92:((et+.055)/1.055)**2.4)),Number((.2126*i[0]+.7152*i[1]+.0722*i[2]).toFixed(3))}function getContrastRatio(o,i){const et=getLuminance(o),nt=getLuminance(i);return(Math.max(et,nt)+.05)/(Math.min(et,nt)+.05)}function alpha(o,i){return o=decomposeColor(o),i=clampWrapper(i),(o.type==="rgb"||o.type==="hsl")&&(o.type+="a"),o.type==="color"?o.values[3]=`/${i}`:o.values[3]=i,recomposeColor(o)}function darken(o,i){if(o=decomposeColor(o),i=clampWrapper(i),o.type.indexOf("hsl")!==-1)o.values[2]*=1-i;else if(o.type.indexOf("rgb")!==-1||o.type.indexOf("color")!==-1)for(let et=0;et<3;et+=1)o.values[et]*=1-i;return recomposeColor(o)}function lighten(o,i){if(o=decomposeColor(o),i=clampWrapper(i),o.type.indexOf("hsl")!==-1)o.values[2]+=(100-o.values[2])*i;else if(o.type.indexOf("rgb")!==-1)for(let et=0;et<3;et+=1)o.values[et]+=(255-o.values[et])*i;else if(o.type.indexOf("color")!==-1)for(let et=0;et<3;et+=1)o.values[et]+=(1-o.values[et])*i;return recomposeColor(o)}const _excluded$O=["className","component","disableGutters","fixed","maxWidth","classes"],defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$1=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[`maxWidth${capitalize(String(et.maxWidth))}`],et.fixed&&i.fixed,et.disableGutters&&i.disableGutters]}}),useThemePropsDefault$1=o=>useThemeProps$1({props:o,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$B=(o,i)=>{const et=ft=>generateUtilityClass$1(i,ft),{classes:nt,fixed:ot,disableGutters:st,maxWidth:lt}=o,ht={root:["root",lt&&`maxWidth${capitalize(String(lt))}`,ot&&"fixed",st&&"disableGutters"]};return composeClasses(ht,et,nt)};function createContainer(o={}){const{createStyledComponent:i=defaultCreateStyledComponent$1,useThemeProps:et=useThemePropsDefault$1,componentName:nt="MuiContainer"}=o,ot=i(({theme:lt,ownerState:ht})=>_extends$3({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!ht.disableGutters&&{paddingLeft:lt.spacing(2),paddingRight:lt.spacing(2),[lt.breakpoints.up("sm")]:{paddingLeft:lt.spacing(3),paddingRight:lt.spacing(3)}}),({theme:lt,ownerState:ht})=>ht.fixed&&Object.keys(lt.breakpoints.values).reduce((ft,St)=>{const vt=St,Rt=lt.breakpoints.values[vt];return Rt!==0&&(ft[lt.breakpoints.up(vt)]={maxWidth:`${Rt}${lt.breakpoints.unit}`}),ft},{}),({theme:lt,ownerState:ht})=>_extends$3({},ht.maxWidth==="xs"&&{[lt.breakpoints.up("xs")]:{maxWidth:Math.max(lt.breakpoints.values.xs,444)}},ht.maxWidth&&ht.maxWidth!=="xs"&&{[lt.breakpoints.up(ht.maxWidth)]:{maxWidth:`${lt.breakpoints.values[ht.maxWidth]}${lt.breakpoints.unit}`}}));return reactExports.forwardRef(function(ht,ft){const St=et(ht),{className:vt,component:Rt="div",disableGutters:wt=!1,fixed:$t=!1,maxWidth:Dt="lg"}=St,Pt=_objectWithoutPropertiesLoose(St,_excluded$O),Ut=_extends$3({},St,{component:Rt,disableGutters:wt,fixed:$t,maxWidth:Dt}),Ot=useUtilityClasses$B(Ut,nt);return jsxRuntimeExports.jsx(ot,_extends$3({as:Rt,ownerState:Ut,className:clsx(Ot.root,vt),ref:ft},Pt))})}const _excluded$N=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(o,i)=>i.root});function useThemePropsDefault(o){return useThemeProps$1({props:o,name:"MuiStack",defaultTheme:defaultTheme$3})}function joinChildren(o,i){const et=reactExports.Children.toArray(o).filter(Boolean);return et.reduce((nt,ot,st)=>(nt.push(ot),st<et.length-1&&nt.push(reactExports.cloneElement(i,{key:`separator-${st}`})),nt),[])}const getSideFromDirection=o=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[o],style=({ownerState:o,theme:i})=>{let et=_extends$3({display:"flex",flexDirection:"column"},handleBreakpoints({theme:i},resolveBreakpointValues({values:o.direction,breakpoints:i.breakpoints.values}),nt=>({flexDirection:nt})));if(o.spacing){const nt=createUnarySpacing(i),ot=Object.keys(i.breakpoints.values).reduce((ft,St)=>((typeof o.spacing=="object"&&o.spacing[St]!=null||typeof o.direction=="object"&&o.direction[St]!=null)&&(ft[St]=!0),ft),{}),st=resolveBreakpointValues({values:o.direction,base:ot}),lt=resolveBreakpointValues({values:o.spacing,base:ot});typeof st=="object"&&Object.keys(st).forEach((ft,St,vt)=>{if(!st[ft]){const wt=St>0?st[vt[St-1]]:"column";st[ft]=wt}}),et=deepmerge(et,handleBreakpoints({theme:i},lt,(ft,St)=>o.useFlexGap?{gap:getValue(nt,ft)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(St?st[St]:o.direction)}`]:getValue(nt,ft)}}))}return et=mergeBreakpointsInOrder(i.breakpoints,et),et};function createStack(o={}){const{createStyledComponent:i=defaultCreateStyledComponent,useThemeProps:et=useThemePropsDefault,componentName:nt="MuiStack"}=o,ot=()=>composeClasses({root:["root"]},ft=>generateUtilityClass$1(nt,ft),{}),st=i(style);return reactExports.forwardRef(function(ft,St){const vt=et(ft),Rt=extendSxProp(vt),{component:wt="div",direction:$t="column",spacing:Dt=0,divider:Pt,children:Ut,className:Ot,useFlexGap:Lt=!1}=Rt,xt=_objectWithoutPropertiesLoose(Rt,_excluded$N),jt={direction:$t,spacing:Dt,useFlexGap:Lt},Ht=ot();return jsxRuntimeExports.jsx(st,_extends$3({as:wt,ownerState:jt,ref:St,className:clsx(Ht.root,Ot)},xt,{children:Pt?joinChildren(Ut,Pt):Ut}))})}function createMixins(o,i){return _extends$3({toolbar:{minHeight:56,[o.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[o.up("sm")]:{minHeight:64}}},i)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$M=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(o,i,et,nt){const ot=nt.light||nt,st=nt.dark||nt*1.5;o[i]||(o.hasOwnProperty(et)?o[i]=o[et]:i==="light"?o.light=lighten(o.main,ot):i==="dark"&&(o.dark=darken(o.main,st)))}function getDefaultPrimary(o="light"){return o==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(o="light"){return o==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(o="light"){return o==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(o="light"){return o==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(o="light"){return o==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(o="light"){return o==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(o){const{mode:i="light",contrastThreshold:et=3,tonalOffset:nt=.2}=o,ot=_objectWithoutPropertiesLoose(o,_excluded$M),st=o.primary||getDefaultPrimary(i),lt=o.secondary||getDefaultSecondary(i),ht=o.error||getDefaultError(i),ft=o.info||getDefaultInfo(i),St=o.success||getDefaultSuccess(i),vt=o.warning||getDefaultWarning(i);function Rt(Pt){return getContrastRatio(Pt,dark.text.primary)>=et?dark.text.primary:light.text.primary}const wt=({color:Pt,name:Ut,mainShade:Ot=500,lightShade:Lt=300,darkShade:xt=700})=>{if(Pt=_extends$3({},Pt),!Pt.main&&Pt[Ot]&&(Pt.main=Pt[Ot]),!Pt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Ut?` (${Ut})`:"",Ot));if(typeof Pt.main!="string")throw new Error(formatMuiErrorMessage(12,Ut?` (${Ut})`:"",JSON.stringify(Pt.main)));return addLightOrDark(Pt,"light",Lt,nt),addLightOrDark(Pt,"dark",xt,nt),Pt.contrastText||(Pt.contrastText=Rt(Pt.main)),Pt},$t={dark,light};return deepmerge(_extends$3({common:_extends$3({},common$1),mode:i,primary:wt({color:st,name:"primary"}),secondary:wt({color:lt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:wt({color:ht,name:"error"}),warning:wt({color:vt,name:"warning"}),info:wt({color:ft,name:"info"}),success:wt({color:St,name:"success"}),grey:grey$1,contrastThreshold:et,getContrastText:Rt,augmentColor:wt,tonalOffset:nt},$t[i]),ot)}const _excluded$L=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$2(o){return Math.round(o*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(o,i){const et=typeof i=="function"?i(o):i,{fontFamily:nt=defaultFontFamily,fontSize:ot=14,fontWeightLight:st=300,fontWeightRegular:lt=400,fontWeightMedium:ht=500,fontWeightBold:ft=700,htmlFontSize:St=16,allVariants:vt,pxToRem:Rt}=et,wt=_objectWithoutPropertiesLoose(et,_excluded$L),$t=ot/14,Dt=Rt||(Ot=>`${Ot/St*$t}rem`),Pt=(Ot,Lt,xt,jt,Ht)=>_extends$3({fontFamily:nt,fontWeight:Ot,fontSize:Dt(Lt),lineHeight:xt},nt===defaultFontFamily?{letterSpacing:`${round$2(jt/Lt)}em`}:{},Ht,vt),Ut={h1:Pt(st,96,1.167,-1.5),h2:Pt(st,60,1.2,-.5),h3:Pt(lt,48,1.167,0),h4:Pt(lt,34,1.235,.25),h5:Pt(lt,24,1.334,0),h6:Pt(ht,20,1.6,.15),subtitle1:Pt(lt,16,1.75,.15),subtitle2:Pt(ht,14,1.57,.1),body1:Pt(lt,16,1.5,.15),body2:Pt(lt,14,1.43,.15),button:Pt(ht,14,1.75,.4,caseAllCaps),caption:Pt(lt,12,1.66,.4),overline:Pt(lt,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends$3({htmlFontSize:St,pxToRem:Dt,fontFamily:nt,fontSize:ot,fontWeightLight:st,fontWeightRegular:lt,fontWeightMedium:ht,fontWeightBold:ft},Ut),wt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...o){return[`${o[0]}px ${o[1]}px ${o[2]}px ${o[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${o[4]}px ${o[5]}px ${o[6]}px ${o[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${o[8]}px ${o[9]}px ${o[10]}px ${o[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$K=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(o){return`${Math.round(o)}ms`}function getAutoHeightDuration(o){if(!o)return 0;const i=o/36;return Math.round((4+15*i**.25+i/5)*10)}function createTransitions(o){const i=_extends$3({},easing,o.easing),et=_extends$3({},duration,o.duration);return _extends$3({getAutoHeightDuration,create:(ot=["all"],st={})=>{const{duration:lt=et.standard,easing:ht=i.easeInOut,delay:ft=0}=st;return _objectWithoutPropertiesLoose(st,_excluded$K),(Array.isArray(ot)?ot:[ot]).map(St=>`${St} ${typeof lt=="string"?lt:formatMs(lt)} ${ht} ${typeof ft=="string"?ft:formatMs(ft)}`).join(",")}},o,{easing:i,duration:et})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$J=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(o={},...i){const{mixins:et={},palette:nt={},transitions:ot={},typography:st={}}=o,lt=_objectWithoutPropertiesLoose(o,_excluded$J);if(o.vars)throw new Error(formatMuiErrorMessage(18));const ht=createPalette(nt),ft=createTheme$1(o);let St=deepmerge(ft,{mixins:createMixins(ft.breakpoints,et),palette:ht,shadows:shadows.slice(),typography:createTypography(ht,st),transitions:createTransitions(ot),zIndex:_extends$3({},zIndex$1),applyDarkStyles(vt){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:vt}:this.palette.mode==="dark"?vt:{}}});return St=deepmerge(St,lt),St=i.reduce((vt,Rt)=>deepmerge(vt,Rt),St),St.unstable_sxConfig=_extends$3({},defaultSxConfig$1,lt==null?void 0:lt.unstable_sxConfig),St.unstable_sx=function(Rt){return styleFunctionSx({sx:Rt,theme:this})},St}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1,THEME_ID="$$material";function useThemeProps({props:o,name:i}){return useThemeProps$1({props:o,name:i,defaultTheme:defaultTheme$2,themeId:THEME_ID})}const rootShouldForwardProp=o=>shouldForwardProp(o)&&o!=="classes",slotShouldForwardProp=shouldForwardProp,styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$2,rootShouldForwardProp});function getSvgIconUtilityClass(o){return generateUtilityClass$1("MuiSvgIcon",o)}generateUtilityClasses$1("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$I=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$A=o=>{const{color:i,fontSize:et,classes:nt}=o,ot={root:["root",i!=="inherit"&&`color${capitalize(i)}`,`fontSize${capitalize(et)}`]};return composeClasses(ot,getSvgIconUtilityClass,nt)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,et.color!=="inherit"&&i[`color${capitalize(et.color)}`],i[`fontSize${capitalize(et.fontSize)}`]]}})(({theme:o,ownerState:i})=>{var et,nt,ot,st,lt,ht,ft,St,vt,Rt,wt,$t,Dt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:i.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(et=o.transitions)==null||(nt=et.create)==null?void 0:nt.call(et,"fill",{duration:(ot=o.transitions)==null||(ot=ot.duration)==null?void 0:ot.shorter}),fontSize:{inherit:"inherit",small:((st=o.typography)==null||(lt=st.pxToRem)==null?void 0:lt.call(st,20))||"1.25rem",medium:((ht=o.typography)==null||(ft=ht.pxToRem)==null?void 0:ft.call(ht,24))||"1.5rem",large:((St=o.typography)==null||(vt=St.pxToRem)==null?void 0:vt.call(St,35))||"2.1875rem"}[i.fontSize],color:(Rt=(wt=(o.vars||o).palette)==null||(wt=wt[i.color])==null?void 0:wt.main)!=null?Rt:{action:($t=(o.vars||o).palette)==null||($t=$t.action)==null?void 0:$t.active,disabled:(Dt=(o.vars||o).palette)==null||(Dt=Dt.action)==null?void 0:Dt.disabled,inherit:void 0}[i.color]}}),SvgIcon=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiSvgIcon"}),{children:ot,className:st,color:lt="inherit",component:ht="svg",fontSize:ft="medium",htmlColor:St,inheritViewBox:vt=!1,titleAccess:Rt,viewBox:wt="0 0 24 24"}=nt,$t=_objectWithoutPropertiesLoose(nt,_excluded$I),Dt=reactExports.isValidElement(ot)&&ot.type==="svg",Pt=_extends$3({},nt,{color:lt,component:ht,fontSize:ft,instanceFontSize:i.fontSize,inheritViewBox:vt,viewBox:wt,hasSvgAsChild:Dt}),Ut={};vt||(Ut.viewBox=wt);const Ot=useUtilityClasses$A(Pt);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends$3({as:ht,className:clsx(Ot.root,st),focusable:"false",color:St,"aria-hidden":Rt?void 0:!0,role:Rt?"img":void 0,ref:et},Ut,$t,Dt&&ot.props,{ownerState:Pt,children:[Dt?ot.props.children:ot,Rt?jsxRuntimeExports.jsx("title",{children:Rt}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon(o,i){function et(nt,ot){return jsxRuntimeExports.jsx(SvgIcon,_extends$3({"data-testid":`${i}Icon`,ref:ot},nt,{children:o}))}return et.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(et))}const unstable_ClassNameGenerator={configure:o=>{ClassNameGenerator$1.configure(o)}},utils=Object.freeze(Object.defineProperty({__proto__:null,capitalize,createChainedFunction,createSvgIcon,debounce:debounce$1,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(utils);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(o){"use client";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=require$$0}(createSvgIcon$1)),createSvgIcon$1}var _interopRequireDefault$f=interopRequireDefaultExports;Object.defineProperty(Send,"__esModule",{value:!0});var default_1$f=Send.default=void 0,_createSvgIcon$f=_interopRequireDefault$f(requireCreateSvgIcon()),_jsxRuntime$f=jsxRuntimeExports;default_1$f=Send.default=(0,_createSvgIcon$f.default)((0,_jsxRuntime$f.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");function useTheme(){const o=useTheme$1(defaultTheme$2);return o[THEME_ID]||o}const getOverlayAlpha=o=>{let i;return o<1?i=5.11916*o**2:i=4.5*Math.log(o+1)+2,(i/100).toFixed(2)};function _setPrototypeOf(o,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nt,ot){return nt.__proto__=ot,nt},_setPrototypeOf(o,i)}function _inheritsLoose(o,i){o.prototype=Object.create(i.prototype),o.prototype.constructor=o,_setPrototypeOf(o,i)}const config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(i){return i.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(o){_inheritsLoose(i,o);function i(nt,ot){var st;st=o.call(this,nt,ot)||this;var lt=ot,ht=lt&&!lt.isMounting?nt.enter:nt.appear,ft;return st.appearStatus=null,nt.in?ht?(ft=EXITED,st.appearStatus=ENTERING):ft=ENTERED:nt.unmountOnExit||nt.mountOnEnter?ft=UNMOUNTED:ft=EXITED,st.state={status:ft},st.nextCallback=null,st}i.getDerivedStateFromProps=function(ot,st){var lt=ot.in;return lt&&st.status===UNMOUNTED?{status:EXITED}:null};var et=i.prototype;return et.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},et.componentDidUpdate=function(ot){var st=null;if(ot!==this.props){var lt=this.state.status;this.props.in?lt!==ENTERING&&lt!==ENTERED&&(st=ENTERING):(lt===ENTERING||lt===ENTERED)&&(st=EXITING)}this.updateStatus(!1,st)},et.componentWillUnmount=function(){this.cancelNextCallback()},et.getTimeouts=function(){var ot=this.props.timeout,st,lt,ht;return st=lt=ht=ot,ot!=null&&typeof ot!="number"&&(st=ot.exit,lt=ot.enter,ht=ot.appear!==void 0?ot.appear:lt),{exit:st,enter:lt,appear:ht}},et.updateStatus=function(ot,st){if(ot===void 0&&(ot=!1),st!==null)if(this.cancelNextCallback(),st===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var lt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);lt&&forceReflow(lt)}this.performEnter(ot)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},et.performEnter=function(ot){var st=this,lt=this.props.enter,ht=this.context?this.context.isMounting:ot,ft=this.props.nodeRef?[ht]:[ReactDOM.findDOMNode(this),ht],St=ft[0],vt=ft[1],Rt=this.getTimeouts(),wt=ht?Rt.appear:Rt.enter;if(!ot&&!lt||config.disabled){this.safeSetState({status:ENTERED},function(){st.props.onEntered(St)});return}this.props.onEnter(St,vt),this.safeSetState({status:ENTERING},function(){st.props.onEntering(St,vt),st.onTransitionEnd(wt,function(){st.safeSetState({status:ENTERED},function(){st.props.onEntered(St,vt)})})})},et.performExit=function(){var ot=this,st=this.props.exit,lt=this.getTimeouts(),ht=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!st||config.disabled){this.safeSetState({status:EXITED},function(){ot.props.onExited(ht)});return}this.props.onExit(ht),this.safeSetState({status:EXITING},function(){ot.props.onExiting(ht),ot.onTransitionEnd(lt.exit,function(){ot.safeSetState({status:EXITED},function(){ot.props.onExited(ht)})})})},et.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},et.safeSetState=function(ot,st){st=this.setNextCallback(st),this.setState(ot,st)},et.setNextCallback=function(ot){var st=this,lt=!0;return this.nextCallback=function(ht){lt&&(lt=!1,st.nextCallback=null,ot(ht))},this.nextCallback.cancel=function(){lt=!1},this.nextCallback},et.onTransitionEnd=function(ot,st){this.setNextCallback(st);var lt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),ht=ot==null&&!this.props.addEndListener;if(!lt||ht){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var ft=this.props.nodeRef?[this.nextCallback]:[lt,this.nextCallback],St=ft[0],vt=ft[1];this.props.addEndListener(St,vt)}ot!=null&&setTimeout(this.nextCallback,ot)},et.render=function(){var ot=this.state.status;if(ot===UNMOUNTED)return null;var st=this.props,lt=st.children;st.in,st.mountOnEnter,st.unmountOnExit,st.appear,st.enter,st.exit,st.timeout,st.addEndListener,st.onEnter,st.onEntering,st.onEntered,st.onExit,st.onExiting,st.onExited,st.nodeRef;var ht=_objectWithoutPropertiesLoose(st,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof lt=="function"?lt(ot,ht):React$1.cloneElement(React$1.Children.only(lt),ht))},i}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$1(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$1,onEntering:noop$1,onEntered:noop$1,onExit:noop$1,onExiting:noop$1,onExited:noop$1};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;function _assertThisInitialized(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function getChildMapping(o,i){var et=function(st){return i&&reactExports.isValidElement(st)?i(st):st},nt=Object.create(null);return o&&reactExports.Children.map(o,function(ot){return ot}).forEach(function(ot){nt[ot.key]=et(ot)}),nt}function mergeChildMappings(o,i){o=o||{},i=i||{};function et(vt){return vt in i?i[vt]:o[vt]}var nt=Object.create(null),ot=[];for(var st in o)st in i?ot.length&&(nt[st]=ot,ot=[]):ot.push(st);var lt,ht={};for(var ft in i){if(nt[ft])for(lt=0;lt<nt[ft].length;lt++){var St=nt[ft][lt];ht[nt[ft][lt]]=et(St)}ht[ft]=et(ft)}for(lt=0;lt<ot.length;lt++)ht[ot[lt]]=et(ot[lt]);return ht}function getProp(o,i,et){return et[i]!=null?et[i]:o.props[i]}function getInitialChildMapping(o,i){return getChildMapping(o.children,function(et){return reactExports.cloneElement(et,{onExited:i.bind(null,et),in:!0,appear:getProp(et,"appear",o),enter:getProp(et,"enter",o),exit:getProp(et,"exit",o)})})}function getNextChildMapping(o,i,et){var nt=getChildMapping(o.children),ot=mergeChildMappings(i,nt);return Object.keys(ot).forEach(function(st){var lt=ot[st];if(reactExports.isValidElement(lt)){var ht=st in i,ft=st in nt,St=i[st],vt=reactExports.isValidElement(St)&&!St.props.in;ft&&(!ht||vt)?ot[st]=reactExports.cloneElement(lt,{onExited:et.bind(null,lt),in:!0,exit:getProp(lt,"exit",o),enter:getProp(lt,"enter",o)}):!ft&&ht&&!vt?ot[st]=reactExports.cloneElement(lt,{in:!1}):ft&&ht&&reactExports.isValidElement(St)&&(ot[st]=reactExports.cloneElement(lt,{onExited:et.bind(null,lt),in:St.props.in,exit:getProp(lt,"exit",o),enter:getProp(lt,"enter",o)}))}}),ot}var values=Object.values||function(o){return Object.keys(o).map(function(i){return o[i]})},defaultProps={component:"div",childFactory:function(i){return i}},TransitionGroup=function(o){_inheritsLoose(i,o);function i(nt,ot){var st;st=o.call(this,nt,ot)||this;var lt=st.handleExited.bind(_assertThisInitialized(st));return st.state={contextValue:{isMounting:!0},handleExited:lt,firstRender:!0},st}var et=i.prototype;return et.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},et.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(ot,st){var lt=st.children,ht=st.handleExited,ft=st.firstRender;return{children:ft?getInitialChildMapping(ot,ht):getNextChildMapping(ot,lt,ht),firstRender:!1}},et.handleExited=function(ot,st){var lt=getChildMapping(this.props.children);ot.key in lt||(ot.props.onExited&&ot.props.onExited(st),this.mounted&&this.setState(function(ht){var ft=_extends$3({},ht.children);return delete ft[ot.key],{children:ft}}))},et.render=function(){var ot=this.props,st=ot.component,lt=ot.childFactory,ht=_objectWithoutPropertiesLoose(ot,["component","childFactory"]),ft=this.state.contextValue,St=values(this.state.children).map(lt);return delete ht.appear,delete ht.enter,delete ht.exit,st===null?React$1.createElement(TransitionGroupContext.Provider,{value:ft},St):React$1.createElement(TransitionGroupContext.Provider,{value:ft},React$1.createElement(st,ht,St))},i}(React$1.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup,reflow=o=>o.scrollTop;function getTransitionProps(o,i){var et,nt;const{timeout:ot,easing:st,style:lt={}}=o;return{duration:(et=lt.transitionDuration)!=null?et:typeof ot=="number"?ot:ot[i.mode]||0,easing:(nt=lt.transitionTimingFunction)!=null?nt:typeof st=="object"?st[i.mode]:st,delay:lt.transitionDelay}}function getPaperUtilityClass(o){return generateUtilityClass$1("MuiPaper",o)}generateUtilityClasses$1("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$H=["className","component","elevation","square","variant"],useUtilityClasses$z=o=>{const{square:i,elevation:et,variant:nt,classes:ot}=o,st={root:["root",nt,!i&&"rounded",nt==="elevation"&&`elevation${et}`]};return composeClasses(st,getPaperUtilityClass,ot)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[et.variant],!et.square&&i.rounded,et.variant==="elevation"&&i[`elevation${et.elevation}`]]}})(({theme:o,ownerState:i})=>{var et;return _extends$3({backgroundColor:(o.vars||o).palette.background.paper,color:(o.vars||o).palette.text.primary,transition:o.transitions.create("box-shadow")},!i.square&&{borderRadius:o.shape.borderRadius},i.variant==="outlined"&&{border:`1px solid ${(o.vars||o).palette.divider}`},i.variant==="elevation"&&_extends$3({boxShadow:(o.vars||o).shadows[i.elevation]},!o.vars&&o.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha(i.elevation))}, ${alpha("#fff",getOverlayAlpha(i.elevation))})`},o.vars&&{backgroundImage:(et=o.vars.overlays)==null?void 0:et[i.elevation]}))}),Paper=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiPaper"}),{className:ot,component:st="div",elevation:lt=1,square:ht=!1,variant:ft="elevation"}=nt,St=_objectWithoutPropertiesLoose(nt,_excluded$H),vt=_extends$3({},nt,{component:st,elevation:lt,square:ht,variant:ft}),Rt=useUtilityClasses$z(vt);return jsxRuntimeExports.jsx(PaperRoot,_extends$3({as:st,ownerState:vt,className:clsx(Rt.root,ot),ref:et},St))}),Paper$1=Paper;function isHostComponent(o){return typeof o=="string"}function appendOwnerState(o,i,et){return o===void 0||isHostComponent(o)?i:_extends$3({},i,{ownerState:_extends$3({},i.ownerState,et)})}const defaultContextValue={disableDefaultClasses:!1},ClassNameConfiguratorContext=reactExports.createContext(defaultContextValue);function useClassNamesOverride(o){const{disableDefaultClasses:i}=reactExports.useContext(ClassNameConfiguratorContext);return et=>i?"":o(et)}function extractEventHandlers(o,i=[]){if(o===void 0)return{};const et={};return Object.keys(o).filter(nt=>nt.match(/^on[A-Z]/)&&typeof o[nt]=="function"&&!i.includes(nt)).forEach(nt=>{et[nt]=o[nt]}),et}function resolveComponentProps(o,i,et){return typeof o=="function"?o(i,et):o}function omitEventHandlers(o){if(o===void 0)return{};const i={};return Object.keys(o).filter(et=>!(et.match(/^on[A-Z]/)&&typeof o[et]=="function")).forEach(et=>{i[et]=o[et]}),i}function mergeSlotProps(o){const{getSlotProps:i,additionalProps:et,externalSlotProps:nt,externalForwardedProps:ot,className:st}=o;if(!i){const $t=clsx(et==null?void 0:et.className,st,ot==null?void 0:ot.className,nt==null?void 0:nt.className),Dt=_extends$3({},et==null?void 0:et.style,ot==null?void 0:ot.style,nt==null?void 0:nt.style),Pt=_extends$3({},et,ot,nt);return $t.length>0&&(Pt.className=$t),Object.keys(Dt).length>0&&(Pt.style=Dt),{props:Pt,internalRef:void 0}}const lt=extractEventHandlers(_extends$3({},ot,nt)),ht=omitEventHandlers(nt),ft=omitEventHandlers(ot),St=i(lt),vt=clsx(St==null?void 0:St.className,et==null?void 0:et.className,st,ot==null?void 0:ot.className,nt==null?void 0:nt.className),Rt=_extends$3({},St==null?void 0:St.style,et==null?void 0:et.style,ot==null?void 0:ot.style,nt==null?void 0:nt.style),wt=_extends$3({},St,et,ft,ht);return vt.length>0&&(wt.className=vt),Object.keys(Rt).length>0&&(wt.style=Rt),{props:wt,internalRef:St.ref}}const _excluded$G=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function useSlotProps(o){var i;const{elementType:et,externalSlotProps:nt,ownerState:ot,skipResolvingSlotProps:st=!1}=o,lt=_objectWithoutPropertiesLoose(o,_excluded$G),ht=st?{}:resolveComponentProps(nt,ot),{props:ft,internalRef:St}=mergeSlotProps(_extends$3({},lt,{externalSlotProps:ht})),vt=useForkRef(St,ht==null?void 0:ht.ref,(i=o.additionalProps)==null?void 0:i.ref);return appendOwnerState(et,_extends$3({},ft,{ref:vt}),ot)}function Ripple(o){const{className:i,classes:et,pulsate:nt=!1,rippleX:ot,rippleY:st,rippleSize:lt,in:ht,onExited:ft,timeout:St}=o,[vt,Rt]=reactExports.useState(!1),wt=clsx(i,et.ripple,et.rippleVisible,nt&&et.ripplePulsate),$t={width:lt,height:lt,top:-(lt/2)+st,left:-(lt/2)+ot},Dt=clsx(et.child,vt&&et.childLeaving,nt&&et.childPulsate);return!ht&&!vt&&Rt(!0),reactExports.useEffect(()=>{if(!ht&&ft!=null){const Pt=setTimeout(ft,St);return()=>{clearTimeout(Pt)}}},[ft,ht,St]),jsxRuntimeExports.jsx("span",{className:wt,style:$t,children:jsxRuntimeExports.jsx("span",{className:Dt})})}const touchRippleClasses=generateUtilityClasses$1("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),_excluded$F=["center","classes","className"];let _=o=>o,_t,_t2,_t3,_t4;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t||(_t=_`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2||(_t2=_`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3||(_t3=_`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4||(_t4=_`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses.rippleVisible,enterKeyframe,DURATION,({theme:o})=>o.transitions.easing.easeInOut,touchRippleClasses.ripplePulsate,({theme:o})=>o.transitions.duration.shorter,touchRippleClasses.child,touchRippleClasses.childLeaving,exitKeyframe,DURATION,({theme:o})=>o.transitions.easing.easeInOut,touchRippleClasses.childPulsate,pulsateKeyframe,({theme:o})=>o.transitions.easing.easeInOut),TouchRipple=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiTouchRipple"}),{center:ot=!1,classes:st={},className:lt}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$F),[ft,St]=reactExports.useState([]),vt=reactExports.useRef(0),Rt=reactExports.useRef(null);reactExports.useEffect(()=>{Rt.current&&(Rt.current(),Rt.current=null)},[ft]);const wt=reactExports.useRef(!1),$t=reactExports.useRef(0),Dt=reactExports.useRef(null),Pt=reactExports.useRef(null);reactExports.useEffect(()=>()=>{$t.current&&clearTimeout($t.current)},[]);const Ut=reactExports.useCallback(jt=>{const{pulsate:Ht,rippleX:qt,rippleY:Kt,rippleSize:nn,cb:Zt}=jt;St(tn=>[...tn,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(st.ripple,touchRippleClasses.ripple),rippleVisible:clsx(st.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(st.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(st.child,touchRippleClasses.child),childLeaving:clsx(st.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(st.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:Ht,rippleX:qt,rippleY:Kt,rippleSize:nn},vt.current)]),vt.current+=1,Rt.current=Zt},[st]),Ot=reactExports.useCallback((jt={},Ht={},qt=()=>{})=>{const{pulsate:Kt=!1,center:nn=ot||Ht.pulsate,fakeElement:Zt=!1}=Ht;if((jt==null?void 0:jt.type)==="mousedown"&&wt.current){wt.current=!1;return}(jt==null?void 0:jt.type)==="touchstart"&&(wt.current=!0);const tn=Zt?null:Pt.current,dn=tn?tn.getBoundingClientRect():{width:0,height:0,left:0,top:0};let wn,In,Sn;if(nn||jt===void 0||jt.clientX===0&&jt.clientY===0||!jt.clientX&&!jt.touches)wn=Math.round(dn.width/2),In=Math.round(dn.height/2);else{const{clientX:Nn,clientY:Rn}=jt.touches&&jt.touches.length>0?jt.touches[0]:jt;wn=Math.round(Nn-dn.left),In=Math.round(Rn-dn.top)}if(nn)Sn=Math.sqrt((2*dn.width**2+dn.height**2)/3),Sn%2===0&&(Sn+=1);else{const Nn=Math.max(Math.abs((tn?tn.clientWidth:0)-wn),wn)*2+2,Rn=Math.max(Math.abs((tn?tn.clientHeight:0)-In),In)*2+2;Sn=Math.sqrt(Nn**2+Rn**2)}jt!=null&&jt.touches?Dt.current===null&&(Dt.current=()=>{Ut({pulsate:Kt,rippleX:wn,rippleY:In,rippleSize:Sn,cb:qt})},$t.current=setTimeout(()=>{Dt.current&&(Dt.current(),Dt.current=null)},DELAY_RIPPLE)):Ut({pulsate:Kt,rippleX:wn,rippleY:In,rippleSize:Sn,cb:qt})},[ot,Ut]),Lt=reactExports.useCallback(()=>{Ot({},{pulsate:!0})},[Ot]),xt=reactExports.useCallback((jt,Ht)=>{if(clearTimeout($t.current),(jt==null?void 0:jt.type)==="touchend"&&Dt.current){Dt.current(),Dt.current=null,$t.current=setTimeout(()=>{xt(jt,Ht)});return}Dt.current=null,St(qt=>qt.length>0?qt.slice(1):qt),Rt.current=Ht},[]);return reactExports.useImperativeHandle(et,()=>({pulsate:Lt,start:Ot,stop:xt}),[Lt,Ot,xt]),jsxRuntimeExports.jsx(TouchRippleRoot,_extends$3({className:clsx(touchRippleClasses.root,st.root,lt),ref:Pt},ht,{children:jsxRuntimeExports.jsx(TransitionGroup$1,{component:null,exit:!0,children:ft})}))}),TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(o){return generateUtilityClass$1("MuiButtonBase",o)}const buttonBaseClasses=generateUtilityClasses$1("MuiButtonBase",["root","disabled","focusVisible"]),_excluded$E=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$y=o=>{const{disabled:i,focusVisible:et,focusVisibleClassName:nt,classes:ot}=o,lt=composeClasses({root:["root",i&&"disabled",et&&"focusVisible"]},getButtonBaseUtilityClass,ot);return et&&nt&&(lt.root+=` ${nt}`),lt},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(o,i)=>i.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiButtonBase"}),{action:ot,centerRipple:st=!1,children:lt,className:ht,component:ft="button",disabled:St=!1,disableRipple:vt=!1,disableTouchRipple:Rt=!1,focusRipple:wt=!1,LinkComponent:$t="a",onBlur:Dt,onClick:Pt,onContextMenu:Ut,onDragLeave:Ot,onFocus:Lt,onFocusVisible:xt,onKeyDown:jt,onKeyUp:Ht,onMouseDown:qt,onMouseLeave:Kt,onMouseUp:nn,onTouchEnd:Zt,onTouchMove:tn,onTouchStart:dn,tabIndex:wn=0,TouchRippleProps:In,touchRippleRef:Sn,type:Nn}=nt,Rn=_objectWithoutPropertiesLoose(nt,_excluded$E),Ln=reactExports.useRef(null),gn=reactExports.useRef(null),_n=useForkRef(gn,Sn),{isFocusVisibleRef:bn,onFocus:tr,onBlur:Zn,ref:Pr}=useIsFocusVisible(),[Wn,pr]=reactExports.useState(!1);St&&Wn&&pr(!1),reactExports.useImperativeHandle(ot,()=>({focusVisible:()=>{pr(!0),Ln.current.focus()}}),[]);const[or,Qr]=reactExports.useState(!1);reactExports.useEffect(()=>{Qr(!0)},[]);const Br=or&&!vt&&!St;reactExports.useEffect(()=>{Wn&&wt&&!vt&&or&&gn.current.pulsate()},[vt,wt,Wn,or]);function xr(er,jo,Fl=Rt){return useEventCallback(Ws=>(jo&&jo(Ws),!Fl&&gn.current&&gn.current[er](Ws),!0))}const Fo=xr("start",qt),ur=xr("stop",Ut),Hr=xr("stop",Ot),fr=xr("stop",nn),Ur=xr("stop",er=>{Wn&&er.preventDefault(),Kt&&Kt(er)}),Cr=xr("start",dn),Es=xr("stop",Zt),as=xr("stop",tn),co=xr("stop",er=>{Zn(er),bn.current===!1&&pr(!1),Dt&&Dt(er)},!1),cs=useEventCallback(er=>{Ln.current||(Ln.current=er.currentTarget),tr(er),bn.current===!0&&(pr(!0),xt&&xt(er)),Lt&&Lt(er)}),So=()=>{const er=Ln.current;return ft&&ft!=="button"&&!(er.tagName==="A"&&er.href)},gr=reactExports.useRef(!1),go=useEventCallback(er=>{wt&&!gr.current&&Wn&&gn.current&&er.key===" "&&(gr.current=!0,gn.current.stop(er,()=>{gn.current.start(er)})),er.target===er.currentTarget&&So()&&er.key===" "&&er.preventDefault(),jt&&jt(er),er.target===er.currentTarget&&So()&&er.key==="Enter"&&!St&&(er.preventDefault(),Pt&&Pt(er))}),No=useEventCallback(er=>{wt&&er.key===" "&&gn.current&&Wn&&!er.defaultPrevented&&(gr.current=!1,gn.current.stop(er,()=>{gn.current.pulsate(er)})),Ht&&Ht(er),Pt&&er.target===er.currentTarget&&So()&&er.key===" "&&!er.defaultPrevented&&Pt(er)});let Lr=ft;Lr==="button"&&(Rn.href||Rn.to)&&(Lr=$t);const Zo={};Lr==="button"?(Zo.type=Nn===void 0?"button":Nn,Zo.disabled=St):(!Rn.href&&!Rn.to&&(Zo.role="button"),St&&(Zo["aria-disabled"]=St));const Go=useForkRef(et,Pr,Ln),Zr=_extends$3({},nt,{centerRipple:st,component:ft,disabled:St,disableRipple:vt,disableTouchRipple:Rt,focusRipple:wt,tabIndex:wn,focusVisible:Wn}),Ar=useUtilityClasses$y(Zr);return jsxRuntimeExports.jsxs(ButtonBaseRoot,_extends$3({as:Lr,className:clsx(Ar.root,ht),ownerState:Zr,onBlur:co,onClick:Pt,onContextMenu:ur,onFocus:cs,onKeyDown:go,onKeyUp:No,onMouseDown:Fo,onMouseLeave:Ur,onMouseUp:fr,onDragLeave:Hr,onTouchEnd:Es,onTouchMove:as,onTouchStart:Cr,ref:Go,tabIndex:St?-1:wn,type:Nn},Zo,Rn,{children:[lt,Br?jsxRuntimeExports.jsx(TouchRipple$1,_extends$3({ref:_n,center:st},In)):null]}))}),ButtonBase$1=ButtonBase;function getAlertUtilityClass(o){return generateUtilityClass$1("MuiAlert",o)}const alertClasses=generateUtilityClasses$1("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),alertClasses$1=alertClasses;function getIconButtonUtilityClass(o){return generateUtilityClass$1("MuiIconButton",o)}const iconButtonClasses=generateUtilityClasses$1("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_excluded$D=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$x=o=>{const{classes:i,disabled:et,color:nt,edge:ot,size:st}=o,lt={root:["root",et&&"disabled",nt!=="default"&&`color${capitalize(nt)}`,ot&&`edge${capitalize(ot)}`,`size${capitalize(st)}`]};return composeClasses(lt,getIconButtonUtilityClass,i)},IconButtonRoot=styled(ButtonBase$1,{name:"MuiIconButton",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,et.color!=="default"&&i[`color${capitalize(et.color)}`],et.edge&&i[`edge${capitalize(et.edge)}`],i[`size${capitalize(et.size)}`]]}})(({theme:o,ownerState:i})=>_extends$3({textAlign:"center",flex:"0 0 auto",fontSize:o.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(o.vars||o).palette.action.active,transition:o.transitions.create("background-color",{duration:o.transitions.duration.shortest})},!i.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette.action.activeChannel} / ${o.vars.palette.action.hoverOpacity})`:alpha(o.palette.action.active,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},i.edge==="start"&&{marginLeft:i.size==="small"?-3:-12},i.edge==="end"&&{marginRight:i.size==="small"?-3:-12}),({theme:o,ownerState:i})=>{var et;const nt=(et=(o.vars||o).palette)==null?void 0:et[i.color];return _extends$3({},i.color==="inherit"&&{color:"inherit"},i.color!=="inherit"&&i.color!=="default"&&_extends$3({color:nt==null?void 0:nt.main},!i.disableRipple&&{"&:hover":_extends$3({},nt&&{backgroundColor:o.vars?`rgba(${nt.mainChannel} / ${o.vars.palette.action.hoverOpacity})`:alpha(nt.main,o.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),i.size==="small"&&{padding:5,fontSize:o.typography.pxToRem(18)},i.size==="large"&&{padding:12,fontSize:o.typography.pxToRem(28)},{[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(o.vars||o).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiIconButton"}),{edge:ot=!1,children:st,className:lt,color:ht="default",disabled:ft=!1,disableFocusRipple:St=!1,size:vt="medium"}=nt,Rt=_objectWithoutPropertiesLoose(nt,_excluded$D),wt=_extends$3({},nt,{edge:ot,color:ht,disabled:ft,disableFocusRipple:St,size:vt}),$t=useUtilityClasses$x(wt);return jsxRuntimeExports.jsx(IconButtonRoot,_extends$3({className:clsx($t.root,lt),centerRipple:!0,focusRipple:!St,disabled:ft,ref:et,ownerState:wt},Rt,{children:st}))}),IconButton$1=IconButton,SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$C=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$w=o=>{const{variant:i,color:et,severity:nt,classes:ot}=o,st={root:["root",`${i}${capitalize(et||nt)}`,`${i}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(st,getAlertUtilityClass,ot)},AlertRoot=styled(Paper$1,{name:"MuiAlert",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[et.variant],i[`${et.variant}${capitalize(et.color||et.severity)}`]]}})(({theme:o,ownerState:i})=>{const et=o.palette.mode==="light"?darken:lighten,nt=o.palette.mode==="light"?lighten:darken,ot=i.color||i.severity;return _extends$3({},o.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},ot&&i.variant==="standard"&&{color:o.vars?o.vars.palette.Alert[`${ot}Color`]:et(o.palette[ot].light,.6),backgroundColor:o.vars?o.vars.palette.Alert[`${ot}StandardBg`]:nt(o.palette[ot].light,.9),[`& .${alertClasses$1.icon}`]:o.vars?{color:o.vars.palette.Alert[`${ot}IconColor`]}:{color:o.palette[ot].main}},ot&&i.variant==="outlined"&&{color:o.vars?o.vars.palette.Alert[`${ot}Color`]:et(o.palette[ot].light,.6),border:`1px solid ${(o.vars||o).palette[ot].light}`,[`& .${alertClasses$1.icon}`]:o.vars?{color:o.vars.palette.Alert[`${ot}IconColor`]}:{color:o.palette[ot].main}},ot&&i.variant==="filled"&&_extends$3({fontWeight:o.typography.fontWeightMedium},o.vars?{color:o.vars.palette.Alert[`${ot}FilledColor`],backgroundColor:o.vars.palette.Alert[`${ot}FilledBg`]}:{backgroundColor:o.palette.mode==="dark"?o.palette[ot].dark:o.palette[ot].main,color:o.palette.getContrastText(o.palette[ot].main)}))}),AlertIcon=styled("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(o,i)=>i.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled("div",{name:"MuiAlert",slot:"Message",overridesResolver:(o,i)=>i.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled("div",{name:"MuiAlert",slot:"Action",overridesResolver:(o,i)=>i.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(i,et){var nt,ot,st,lt,ht,ft;const St=useThemeProps({props:i,name:"MuiAlert"}),{action:vt,children:Rt,className:wt,closeText:$t="Close",color:Dt,components:Pt={},componentsProps:Ut={},icon:Ot,iconMapping:Lt=defaultIconMapping,onClose:xt,role:jt="alert",severity:Ht="success",slotProps:qt={},slots:Kt={},variant:nn="standard"}=St,Zt=_objectWithoutPropertiesLoose(St,_excluded$C),tn=_extends$3({},St,{color:Dt,severity:Ht,variant:nn}),dn=useUtilityClasses$w(tn),wn=(nt=(ot=Kt.closeButton)!=null?ot:Pt.CloseButton)!=null?nt:IconButton$1,In=(st=(lt=Kt.closeIcon)!=null?lt:Pt.CloseIcon)!=null?st:ClearIcon,Sn=(ht=qt.closeButton)!=null?ht:Ut.closeButton,Nn=(ft=qt.closeIcon)!=null?ft:Ut.closeIcon;return jsxRuntimeExports.jsxs(AlertRoot,_extends$3({role:jt,elevation:0,ownerState:tn,className:clsx(dn.root,wt),ref:et},Zt,{children:[Ot!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:tn,className:dn.icon,children:Ot||Lt[Ht]||defaultIconMapping[Ht]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:tn,className:dn.message,children:Rt}),vt!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:tn,className:dn.action,children:vt}):null,vt==null&&xt?jsxRuntimeExports.jsx(AlertAction,{ownerState:tn,className:dn.action,children:jsxRuntimeExports.jsx(wn,_extends$3({size:"small","aria-label":$t,title:$t,color:"inherit",onClick:xt},Sn,{children:jsxRuntimeExports.jsx(In,_extends$3({fontSize:"small"},Nn))}))}):null]}))}),Alert$1=Alert;function getTypographyUtilityClass(o){return generateUtilityClass$1("MuiTypography",o)}generateUtilityClasses$1("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$B=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$v=o=>{const{align:i,gutterBottom:et,noWrap:nt,paragraph:ot,variant:st,classes:lt}=o,ht={root:["root",st,o.align!=="inherit"&&`align${capitalize(i)}`,et&&"gutterBottom",nt&&"noWrap",ot&&"paragraph"]};return composeClasses(ht,getTypographyUtilityClass,lt)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,et.variant&&i[et.variant],et.align!=="inherit"&&i[`align${capitalize(et.align)}`],et.noWrap&&i.noWrap,et.gutterBottom&&i.gutterBottom,et.paragraph&&i.paragraph]}})(({theme:o,ownerState:i})=>_extends$3({margin:0},i.variant==="inherit"&&{font:"inherit"},i.variant!=="inherit"&&o.typography[i.variant],i.align!=="inherit"&&{textAlign:i.align},i.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},i.gutterBottom&&{marginBottom:"0.35em"},i.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations$1={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors$1=o=>colorTransformations$1[o]||o,Typography=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiTypography"}),ot=transformDeprecatedColors$1(nt.color),st=extendSxProp(_extends$3({},nt,{color:ot})),{align:lt="inherit",className:ht,component:ft,gutterBottom:St=!1,noWrap:vt=!1,paragraph:Rt=!1,variant:wt="body1",variantMapping:$t=defaultVariantMapping}=st,Dt=_objectWithoutPropertiesLoose(st,_excluded$B),Pt=_extends$3({},st,{align:lt,color:ot,className:ht,component:ft,gutterBottom:St,noWrap:vt,paragraph:Rt,variant:wt,variantMapping:$t}),Ut=ft||(Rt?"p":$t[wt]||defaultVariantMapping[wt])||"span",Ot=useUtilityClasses$v(Pt);return jsxRuntimeExports.jsx(TypographyRoot,_extends$3({as:Ut,ref:et,ownerState:Pt,className:clsx(Ot.root,ht)},Dt))}),Typography$1=Typography;function getAppBarUtilityClass(o){return generateUtilityClass$1("MuiAppBar",o)}generateUtilityClasses$1("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const _excluded$A=["className","color","enableColorOnDark","position"],useUtilityClasses$u=o=>{const{color:i,position:et,classes:nt}=o,ot={root:["root",`color${capitalize(i)}`,`position${capitalize(et)}`]};return composeClasses(ot,getAppBarUtilityClass,nt)},joinVars=(o,i)=>o?`${o==null?void 0:o.replace(")","")}, ${i})`:i,AppBarRoot=styled(Paper$1,{name:"MuiAppBar",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[`position${capitalize(et.position)}`],i[`color${capitalize(et.color)}`]]}})(({theme:o,ownerState:i})=>{const et=o.palette.mode==="light"?o.palette.grey[100]:o.palette.grey[900];return _extends$3({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},i.position==="fixed"&&{position:"fixed",zIndex:(o.vars||o).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},i.position==="absolute"&&{position:"absolute",zIndex:(o.vars||o).zIndex.appBar,top:0,left:"auto",right:0},i.position==="sticky"&&{position:"sticky",zIndex:(o.vars||o).zIndex.appBar,top:0,left:"auto",right:0},i.position==="static"&&{position:"static"},i.position==="relative"&&{position:"relative"},!o.vars&&_extends$3({},i.color==="default"&&{backgroundColor:et,color:o.palette.getContrastText(et)},i.color&&i.color!=="default"&&i.color!=="inherit"&&i.color!=="transparent"&&{backgroundColor:o.palette[i.color].main,color:o.palette[i.color].contrastText},i.color==="inherit"&&{color:"inherit"},o.palette.mode==="dark"&&!i.enableColorOnDark&&{backgroundColor:null,color:null},i.color==="transparent"&&_extends$3({backgroundColor:"transparent",color:"inherit"},o.palette.mode==="dark"&&{backgroundImage:"none"})),o.vars&&_extends$3({},i.color==="default"&&{"--AppBar-background":i.enableColorOnDark?o.vars.palette.AppBar.defaultBg:joinVars(o.vars.palette.AppBar.darkBg,o.vars.palette.AppBar.defaultBg),"--AppBar-color":i.enableColorOnDark?o.vars.palette.text.primary:joinVars(o.vars.palette.AppBar.darkColor,o.vars.palette.text.primary)},i.color&&!i.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":i.enableColorOnDark?o.vars.palette[i.color].main:joinVars(o.vars.palette.AppBar.darkBg,o.vars.palette[i.color].main),"--AppBar-color":i.enableColorOnDark?o.vars.palette[i.color].contrastText:joinVars(o.vars.palette.AppBar.darkColor,o.vars.palette[i.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:i.color==="inherit"?"inherit":"var(--AppBar-color)"},i.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),AppBar=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiAppBar"}),{className:ot,color:st="primary",enableColorOnDark:lt=!1,position:ht="fixed"}=nt,ft=_objectWithoutPropertiesLoose(nt,_excluded$A),St=_extends$3({},nt,{color:st,position:ht,enableColorOnDark:lt}),vt=useUtilityClasses$u(St);return jsxRuntimeExports.jsx(AppBarRoot,_extends$3({square:!0,component:"header",ownerState:St,elevation:4,className:clsx(vt.root,ot,ht==="fixed"&&"mui-fixed"),ref:et},ft))}),AppBar$1=AppBar,GLOBAL_CLASS_PREFIX="base";function buildStateClass(o){return`${GLOBAL_CLASS_PREFIX}--${o}`}function buildSlotClass(o,i){return`${GLOBAL_CLASS_PREFIX}-${o}-${i}`}function generateUtilityClass(o,i){const et=globalStateClasses[i];return et?buildStateClass(et):buildSlotClass(o,i)}function generateUtilityClasses(o,i){const et={};return i.forEach(nt=>{et[nt]=generateUtilityClass(o,nt)}),et}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(o){const i=parseInt(o.getAttribute("tabindex")||"",10);return Number.isNaN(i)?o.contentEditable==="true"||(o.nodeName==="AUDIO"||o.nodeName==="VIDEO"||o.nodeName==="DETAILS")&&o.getAttribute("tabindex")===null?0:o.tabIndex:i}function isNonTabbableRadio(o){if(o.tagName!=="INPUT"||o.type!=="radio"||!o.name)return!1;const i=nt=>o.ownerDocument.querySelector(`input[type="radio"]${nt}`);let et=i(`[name="${o.name}"]:checked`);return et||(et=i(`[name="${o.name}"]`)),et!==o}function isNodeMatchingSelectorFocusable(o){return!(o.disabled||o.tagName==="INPUT"&&o.type==="hidden"||isNonTabbableRadio(o))}function defaultGetTabbable(o){const i=[],et=[];return Array.from(o.querySelectorAll(candidatesSelector)).forEach((nt,ot)=>{const st=getTabIndex(nt);st===-1||!isNodeMatchingSelectorFocusable(nt)||(st===0?i.push(nt):et.push({documentOrder:ot,tabIndex:st,node:nt}))}),et.sort((nt,ot)=>nt.tabIndex===ot.tabIndex?nt.documentOrder-ot.documentOrder:nt.tabIndex-ot.tabIndex).map(nt=>nt.node).concat(i)}function defaultIsEnabled(){return!0}function FocusTrap(o){const{children:i,disableAutoFocus:et=!1,disableEnforceFocus:nt=!1,disableRestoreFocus:ot=!1,getTabbable:st=defaultGetTabbable,isEnabled:lt=defaultIsEnabled,open:ht}=o,ft=reactExports.useRef(!1),St=reactExports.useRef(null),vt=reactExports.useRef(null),Rt=reactExports.useRef(null),wt=reactExports.useRef(null),$t=reactExports.useRef(!1),Dt=reactExports.useRef(null),Pt=useForkRef(i.ref,Dt),Ut=reactExports.useRef(null);reactExports.useEffect(()=>{!ht||!Dt.current||($t.current=!et)},[et,ht]),reactExports.useEffect(()=>{if(!ht||!Dt.current)return;const xt=ownerDocument(Dt.current);return Dt.current.contains(xt.activeElement)||(Dt.current.hasAttribute("tabIndex")||Dt.current.setAttribute("tabIndex","-1"),$t.current&&Dt.current.focus()),()=>{ot||(Rt.current&&Rt.current.focus&&(ft.current=!0,Rt.current.focus()),Rt.current=null)}},[ht]),reactExports.useEffect(()=>{if(!ht||!Dt.current)return;const xt=ownerDocument(Dt.current),jt=Kt=>{Ut.current=Kt,!(nt||!lt()||Kt.key!=="Tab")&&xt.activeElement===Dt.current&&Kt.shiftKey&&(ft.current=!0,vt.current&&vt.current.focus())},Ht=()=>{const Kt=Dt.current;if(Kt===null)return;if(!xt.hasFocus()||!lt()||ft.current){ft.current=!1;return}if(Kt.contains(xt.activeElement)||nt&&xt.activeElement!==St.current&&xt.activeElement!==vt.current)return;if(xt.activeElement!==wt.current)wt.current=null;else if(wt.current!==null)return;if(!$t.current)return;let nn=[];if((xt.activeElement===St.current||xt.activeElement===vt.current)&&(nn=st(Dt.current)),nn.length>0){var Zt,tn;const dn=!!((Zt=Ut.current)!=null&&Zt.shiftKey&&((tn=Ut.current)==null?void 0:tn.key)==="Tab"),wn=nn[0],In=nn[nn.length-1];typeof wn!="string"&&typeof In!="string"&&(dn?In.focus():wn.focus())}else Kt.focus()};xt.addEventListener("focusin",Ht),xt.addEventListener("keydown",jt,!0);const qt=setInterval(()=>{xt.activeElement&&xt.activeElement.tagName==="BODY"&&Ht()},50);return()=>{clearInterval(qt),xt.removeEventListener("focusin",Ht),xt.removeEventListener("keydown",jt,!0)}},[et,nt,ot,lt,ht,st]);const Ot=xt=>{Rt.current===null&&(Rt.current=xt.relatedTarget),$t.current=!0,wt.current=xt.target;const jt=i.props.onFocus;jt&&jt(xt)},Lt=xt=>{Rt.current===null&&(Rt.current=xt.relatedTarget),$t.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:ht?0:-1,onFocus:Lt,ref:St,"data-testid":"sentinelStart"}),reactExports.cloneElement(i,{ref:Pt,onFocus:Ot}),jsxRuntimeExports.jsx("div",{tabIndex:ht?0:-1,onFocus:Lt,ref:vt,"data-testid":"sentinelEnd"})]})}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(o,i){return o.concat([i+"-"+start,i+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(o,i){return o.concat([i,i+"-"+start,i+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(o){return o?(o.nodeName||"").toLowerCase():null}function getWindow(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var i=o.ownerDocument;return i&&i.defaultView||window}return o}function isElement(o){var i=getWindow(o).Element;return o instanceof i||o instanceof Element}function isHTMLElement$1(o){var i=getWindow(o).HTMLElement;return o instanceof i||o instanceof HTMLElement}function isShadowRoot(o){if(typeof ShadowRoot>"u")return!1;var i=getWindow(o).ShadowRoot;return o instanceof i||o instanceof ShadowRoot}function applyStyles(o){var i=o.state;Object.keys(i.elements).forEach(function(et){var nt=i.styles[et]||{},ot=i.attributes[et]||{},st=i.elements[et];!isHTMLElement$1(st)||!getNodeName(st)||(Object.assign(st.style,nt),Object.keys(ot).forEach(function(lt){var ht=ot[lt];ht===!1?st.removeAttribute(lt):st.setAttribute(lt,ht===!0?"":ht)}))})}function effect$2(o){var i=o.state,et={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,et.popper),i.styles=et,i.elements.arrow&&Object.assign(i.elements.arrow.style,et.arrow),function(){Object.keys(i.elements).forEach(function(nt){var ot=i.elements[nt],st=i.attributes[nt]||{},lt=Object.keys(i.styles.hasOwnProperty(nt)?i.styles[nt]:et[nt]),ht=lt.reduce(function(ft,St){return ft[St]="",ft},{});!isHTMLElement$1(ot)||!getNodeName(ot)||(Object.assign(ot.style,ht),Object.keys(st).forEach(function(ft){ot.removeAttribute(ft)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(o){return o.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(i){return i.brand+"/"+i.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(o,i,et){i===void 0&&(i=!1),et===void 0&&(et=!1);var nt=o.getBoundingClientRect(),ot=1,st=1;i&&isHTMLElement$1(o)&&(ot=o.offsetWidth>0&&round$1(nt.width)/o.offsetWidth||1,st=o.offsetHeight>0&&round$1(nt.height)/o.offsetHeight||1);var lt=isElement(o)?getWindow(o):window,ht=lt.visualViewport,ft=!isLayoutViewport()&&et,St=(nt.left+(ft&&ht?ht.offsetLeft:0))/ot,vt=(nt.top+(ft&&ht?ht.offsetTop:0))/st,Rt=nt.width/ot,wt=nt.height/st;return{width:Rt,height:wt,top:vt,right:St+Rt,bottom:vt+wt,left:St,x:St,y:vt}}function getLayoutRect(o){var i=getBoundingClientRect(o),et=o.offsetWidth,nt=o.offsetHeight;return Math.abs(i.width-et)<=1&&(et=i.width),Math.abs(i.height-nt)<=1&&(nt=i.height),{x:o.offsetLeft,y:o.offsetTop,width:et,height:nt}}function contains(o,i){var et=i.getRootNode&&i.getRootNode();if(o.contains(i))return!0;if(et&&isShadowRoot(et)){var nt=i;do{if(nt&&o.isSameNode(nt))return!0;nt=nt.parentNode||nt.host}while(nt)}return!1}function getComputedStyle(o){return getWindow(o).getComputedStyle(o)}function isTableElement(o){return["table","td","th"].indexOf(getNodeName(o))>=0}function getDocumentElement(o){return((isElement(o)?o.ownerDocument:o.document)||window.document).documentElement}function getParentNode(o){return getNodeName(o)==="html"?o:o.assignedSlot||o.parentNode||(isShadowRoot(o)?o.host:null)||getDocumentElement(o)}function getTrueOffsetParent(o){return!isHTMLElement$1(o)||getComputedStyle(o).position==="fixed"?null:o.offsetParent}function getContainingBlock(o){var i=/firefox/i.test(getUAString()),et=/Trident/i.test(getUAString());if(et&&isHTMLElement$1(o)){var nt=getComputedStyle(o);if(nt.position==="fixed")return null}var ot=getParentNode(o);for(isShadowRoot(ot)&&(ot=ot.host);isHTMLElement$1(ot)&&["html","body"].indexOf(getNodeName(ot))<0;){var st=getComputedStyle(ot);if(st.transform!=="none"||st.perspective!=="none"||st.contain==="paint"||["transform","perspective"].indexOf(st.willChange)!==-1||i&&st.willChange==="filter"||i&&st.filter&&st.filter!=="none")return ot;ot=ot.parentNode}return null}function getOffsetParent(o){for(var i=getWindow(o),et=getTrueOffsetParent(o);et&&isTableElement(et)&&getComputedStyle(et).position==="static";)et=getTrueOffsetParent(et);return et&&(getNodeName(et)==="html"||getNodeName(et)==="body"&&getComputedStyle(et).position==="static")?i:et||getContainingBlock(o)||i}function getMainAxisFromPlacement(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function within(o,i,et){return max(o,min(i,et))}function withinMaxClamp(o,i,et){var nt=within(o,i,et);return nt>et?et:nt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(o){return Object.assign({},getFreshSideObject(),o)}function expandToHashMap(o,i){return i.reduce(function(et,nt){return et[nt]=o,et},{})}var toPaddingObject=function(i,et){return i=typeof i=="function"?i(Object.assign({},et.rects,{placement:et.placement})):i,mergePaddingObject(typeof i!="number"?i:expandToHashMap(i,basePlacements))};function arrow(o){var i,et=o.state,nt=o.name,ot=o.options,st=et.elements.arrow,lt=et.modifiersData.popperOffsets,ht=getBasePlacement(et.placement),ft=getMainAxisFromPlacement(ht),St=[left,right].indexOf(ht)>=0,vt=St?"height":"width";if(!(!st||!lt)){var Rt=toPaddingObject(ot.padding,et),wt=getLayoutRect(st),$t=ft==="y"?top:left,Dt=ft==="y"?bottom:right,Pt=et.rects.reference[vt]+et.rects.reference[ft]-lt[ft]-et.rects.popper[vt],Ut=lt[ft]-et.rects.reference[ft],Ot=getOffsetParent(st),Lt=Ot?ft==="y"?Ot.clientHeight||0:Ot.clientWidth||0:0,xt=Pt/2-Ut/2,jt=Rt[$t],Ht=Lt-wt[vt]-Rt[Dt],qt=Lt/2-wt[vt]/2+xt,Kt=within(jt,qt,Ht),nn=ft;et.modifiersData[nt]=(i={},i[nn]=Kt,i.centerOffset=Kt-qt,i)}}function effect$1(o){var i=o.state,et=o.options,nt=et.element,ot=nt===void 0?"[data-popper-arrow]":nt;ot!=null&&(typeof ot=="string"&&(ot=i.elements.popper.querySelector(ot),!ot)||contains(i.elements.popper,ot)&&(i.elements.arrow=ot))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(o){return o.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(o,i){var et=o.x,nt=o.y,ot=i.devicePixelRatio||1;return{x:round$1(et*ot)/ot||0,y:round$1(nt*ot)/ot||0}}function mapToStyles(o){var i,et=o.popper,nt=o.popperRect,ot=o.placement,st=o.variation,lt=o.offsets,ht=o.position,ft=o.gpuAcceleration,St=o.adaptive,vt=o.roundOffsets,Rt=o.isFixed,wt=lt.x,$t=wt===void 0?0:wt,Dt=lt.y,Pt=Dt===void 0?0:Dt,Ut=typeof vt=="function"?vt({x:$t,y:Pt}):{x:$t,y:Pt};$t=Ut.x,Pt=Ut.y;var Ot=lt.hasOwnProperty("x"),Lt=lt.hasOwnProperty("y"),xt=left,jt=top,Ht=window;if(St){var qt=getOffsetParent(et),Kt="clientHeight",nn="clientWidth";if(qt===getWindow(et)&&(qt=getDocumentElement(et),getComputedStyle(qt).position!=="static"&&ht==="absolute"&&(Kt="scrollHeight",nn="scrollWidth")),qt=qt,ot===top||(ot===left||ot===right)&&st===end){jt=bottom;var Zt=Rt&&qt===Ht&&Ht.visualViewport?Ht.visualViewport.height:qt[Kt];Pt-=Zt-nt.height,Pt*=ft?1:-1}if(ot===left||(ot===top||ot===bottom)&&st===end){xt=right;var tn=Rt&&qt===Ht&&Ht.visualViewport?Ht.visualViewport.width:qt[nn];$t-=tn-nt.width,$t*=ft?1:-1}}var dn=Object.assign({position:ht},St&&unsetSides),wn=vt===!0?roundOffsetsByDPR({x:$t,y:Pt},getWindow(et)):{x:$t,y:Pt};if($t=wn.x,Pt=wn.y,ft){var In;return Object.assign({},dn,(In={},In[jt]=Lt?"0":"",In[xt]=Ot?"0":"",In.transform=(Ht.devicePixelRatio||1)<=1?"translate("+$t+"px, "+Pt+"px)":"translate3d("+$t+"px, "+Pt+"px, 0)",In))}return Object.assign({},dn,(i={},i[jt]=Lt?Pt+"px":"",i[xt]=Ot?$t+"px":"",i.transform="",i))}function computeStyles(o){var i=o.state,et=o.options,nt=et.gpuAcceleration,ot=nt===void 0?!0:nt,st=et.adaptive,lt=st===void 0?!0:st,ht=et.roundOffsets,ft=ht===void 0?!0:ht,St={placement:getBasePlacement(i.placement),variation:getVariation(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:ot,isFixed:i.options.strategy==="fixed"};i.modifiersData.popperOffsets!=null&&(i.styles.popper=Object.assign({},i.styles.popper,mapToStyles(Object.assign({},St,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:lt,roundOffsets:ft})))),i.modifiersData.arrow!=null&&(i.styles.arrow=Object.assign({},i.styles.arrow,mapToStyles(Object.assign({},St,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ft})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(o){var i=o.state,et=o.instance,nt=o.options,ot=nt.scroll,st=ot===void 0?!0:ot,lt=nt.resize,ht=lt===void 0?!0:lt,ft=getWindow(i.elements.popper),St=[].concat(i.scrollParents.reference,i.scrollParents.popper);return st&&St.forEach(function(vt){vt.addEventListener("scroll",et.update,passive)}),ht&&ft.addEventListener("resize",et.update,passive),function(){st&&St.forEach(function(vt){vt.removeEventListener("scroll",et.update,passive)}),ht&&ft.removeEventListener("resize",et.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,function(i){return hash$1[i]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(o){return o.replace(/start|end/g,function(i){return hash[i]})}function getWindowScroll(o){var i=getWindow(o),et=i.pageXOffset,nt=i.pageYOffset;return{scrollLeft:et,scrollTop:nt}}function getWindowScrollBarX(o){return getBoundingClientRect(getDocumentElement(o)).left+getWindowScroll(o).scrollLeft}function getViewportRect(o,i){var et=getWindow(o),nt=getDocumentElement(o),ot=et.visualViewport,st=nt.clientWidth,lt=nt.clientHeight,ht=0,ft=0;if(ot){st=ot.width,lt=ot.height;var St=isLayoutViewport();(St||!St&&i==="fixed")&&(ht=ot.offsetLeft,ft=ot.offsetTop)}return{width:st,height:lt,x:ht+getWindowScrollBarX(o),y:ft}}function getDocumentRect(o){var i,et=getDocumentElement(o),nt=getWindowScroll(o),ot=(i=o.ownerDocument)==null?void 0:i.body,st=max(et.scrollWidth,et.clientWidth,ot?ot.scrollWidth:0,ot?ot.clientWidth:0),lt=max(et.scrollHeight,et.clientHeight,ot?ot.scrollHeight:0,ot?ot.clientHeight:0),ht=-nt.scrollLeft+getWindowScrollBarX(o),ft=-nt.scrollTop;return getComputedStyle(ot||et).direction==="rtl"&&(ht+=max(et.clientWidth,ot?ot.clientWidth:0)-st),{width:st,height:lt,x:ht,y:ft}}function isScrollParent(o){var i=getComputedStyle(o),et=i.overflow,nt=i.overflowX,ot=i.overflowY;return/auto|scroll|overlay|hidden/.test(et+ot+nt)}function getScrollParent(o){return["html","body","#document"].indexOf(getNodeName(o))>=0?o.ownerDocument.body:isHTMLElement$1(o)&&isScrollParent(o)?o:getScrollParent(getParentNode(o))}function listScrollParents(o,i){var et;i===void 0&&(i=[]);var nt=getScrollParent(o),ot=nt===((et=o.ownerDocument)==null?void 0:et.body),st=getWindow(nt),lt=ot?[st].concat(st.visualViewport||[],isScrollParent(nt)?nt:[]):nt,ht=i.concat(lt);return ot?ht:ht.concat(listScrollParents(getParentNode(lt)))}function rectToClientRect(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function getInnerBoundingClientRect(o,i){var et=getBoundingClientRect(o,!1,i==="fixed");return et.top=et.top+o.clientTop,et.left=et.left+o.clientLeft,et.bottom=et.top+o.clientHeight,et.right=et.left+o.clientWidth,et.width=o.clientWidth,et.height=o.clientHeight,et.x=et.left,et.y=et.top,et}function getClientRectFromMixedType(o,i,et){return i===viewport?rectToClientRect(getViewportRect(o,et)):isElement(i)?getInnerBoundingClientRect(i,et):rectToClientRect(getDocumentRect(getDocumentElement(o)))}function getClippingParents(o){var i=listScrollParents(getParentNode(o)),et=["absolute","fixed"].indexOf(getComputedStyle(o).position)>=0,nt=et&&isHTMLElement$1(o)?getOffsetParent(o):o;return isElement(nt)?i.filter(function(ot){return isElement(ot)&&contains(ot,nt)&&getNodeName(ot)!=="body"}):[]}function getClippingRect(o,i,et,nt){var ot=i==="clippingParents"?getClippingParents(o):[].concat(i),st=[].concat(ot,[et]),lt=st[0],ht=st.reduce(function(ft,St){var vt=getClientRectFromMixedType(o,St,nt);return ft.top=max(vt.top,ft.top),ft.right=min(vt.right,ft.right),ft.bottom=min(vt.bottom,ft.bottom),ft.left=max(vt.left,ft.left),ft},getClientRectFromMixedType(o,lt,nt));return ht.width=ht.right-ht.left,ht.height=ht.bottom-ht.top,ht.x=ht.left,ht.y=ht.top,ht}function computeOffsets(o){var i=o.reference,et=o.element,nt=o.placement,ot=nt?getBasePlacement(nt):null,st=nt?getVariation(nt):null,lt=i.x+i.width/2-et.width/2,ht=i.y+i.height/2-et.height/2,ft;switch(ot){case top:ft={x:lt,y:i.y-et.height};break;case bottom:ft={x:lt,y:i.y+i.height};break;case right:ft={x:i.x+i.width,y:ht};break;case left:ft={x:i.x-et.width,y:ht};break;default:ft={x:i.x,y:i.y}}var St=ot?getMainAxisFromPlacement(ot):null;if(St!=null){var vt=St==="y"?"height":"width";switch(st){case start:ft[St]=ft[St]-(i[vt]/2-et[vt]/2);break;case end:ft[St]=ft[St]+(i[vt]/2-et[vt]/2);break}}return ft}function detectOverflow(o,i){i===void 0&&(i={});var et=i,nt=et.placement,ot=nt===void 0?o.placement:nt,st=et.strategy,lt=st===void 0?o.strategy:st,ht=et.boundary,ft=ht===void 0?clippingParents:ht,St=et.rootBoundary,vt=St===void 0?viewport:St,Rt=et.elementContext,wt=Rt===void 0?popper:Rt,$t=et.altBoundary,Dt=$t===void 0?!1:$t,Pt=et.padding,Ut=Pt===void 0?0:Pt,Ot=mergePaddingObject(typeof Ut!="number"?Ut:expandToHashMap(Ut,basePlacements)),Lt=wt===popper?reference:popper,xt=o.rects.popper,jt=o.elements[Dt?Lt:wt],Ht=getClippingRect(isElement(jt)?jt:jt.contextElement||getDocumentElement(o.elements.popper),ft,vt,lt),qt=getBoundingClientRect(o.elements.reference),Kt=computeOffsets({reference:qt,element:xt,strategy:"absolute",placement:ot}),nn=rectToClientRect(Object.assign({},xt,Kt)),Zt=wt===popper?nn:qt,tn={top:Ht.top-Zt.top+Ot.top,bottom:Zt.bottom-Ht.bottom+Ot.bottom,left:Ht.left-Zt.left+Ot.left,right:Zt.right-Ht.right+Ot.right},dn=o.modifiersData.offset;if(wt===popper&&dn){var wn=dn[ot];Object.keys(tn).forEach(function(In){var Sn=[right,bottom].indexOf(In)>=0?1:-1,Nn=[top,bottom].indexOf(In)>=0?"y":"x";tn[In]+=wn[Nn]*Sn})}return tn}function computeAutoPlacement(o,i){i===void 0&&(i={});var et=i,nt=et.placement,ot=et.boundary,st=et.rootBoundary,lt=et.padding,ht=et.flipVariations,ft=et.allowedAutoPlacements,St=ft===void 0?placements:ft,vt=getVariation(nt),Rt=vt?ht?variationPlacements:variationPlacements.filter(function(Dt){return getVariation(Dt)===vt}):basePlacements,wt=Rt.filter(function(Dt){return St.indexOf(Dt)>=0});wt.length===0&&(wt=Rt);var $t=wt.reduce(function(Dt,Pt){return Dt[Pt]=detectOverflow(o,{placement:Pt,boundary:ot,rootBoundary:st,padding:lt})[getBasePlacement(Pt)],Dt},{});return Object.keys($t).sort(function(Dt,Pt){return $t[Dt]-$t[Pt]})}function getExpandedFallbackPlacements(o){if(getBasePlacement(o)===auto)return[];var i=getOppositePlacement(o);return[getOppositeVariationPlacement(o),i,getOppositeVariationPlacement(i)]}function flip(o){var i=o.state,et=o.options,nt=o.name;if(!i.modifiersData[nt]._skip){for(var ot=et.mainAxis,st=ot===void 0?!0:ot,lt=et.altAxis,ht=lt===void 0?!0:lt,ft=et.fallbackPlacements,St=et.padding,vt=et.boundary,Rt=et.rootBoundary,wt=et.altBoundary,$t=et.flipVariations,Dt=$t===void 0?!0:$t,Pt=et.allowedAutoPlacements,Ut=i.options.placement,Ot=getBasePlacement(Ut),Lt=Ot===Ut,xt=ft||(Lt||!Dt?[getOppositePlacement(Ut)]:getExpandedFallbackPlacements(Ut)),jt=[Ut].concat(xt).reduce(function(Wn,pr){return Wn.concat(getBasePlacement(pr)===auto?computeAutoPlacement(i,{placement:pr,boundary:vt,rootBoundary:Rt,padding:St,flipVariations:Dt,allowedAutoPlacements:Pt}):pr)},[]),Ht=i.rects.reference,qt=i.rects.popper,Kt=new Map,nn=!0,Zt=jt[0],tn=0;tn<jt.length;tn++){var dn=jt[tn],wn=getBasePlacement(dn),In=getVariation(dn)===start,Sn=[top,bottom].indexOf(wn)>=0,Nn=Sn?"width":"height",Rn=detectOverflow(i,{placement:dn,boundary:vt,rootBoundary:Rt,altBoundary:wt,padding:St}),Ln=Sn?In?right:left:In?bottom:top;Ht[Nn]>qt[Nn]&&(Ln=getOppositePlacement(Ln));var gn=getOppositePlacement(Ln),_n=[];if(st&&_n.push(Rn[wn]<=0),ht&&_n.push(Rn[Ln]<=0,Rn[gn]<=0),_n.every(function(Wn){return Wn})){Zt=dn,nn=!1;break}Kt.set(dn,_n)}if(nn)for(var bn=Dt?3:1,tr=function(pr){var or=jt.find(function(Qr){var Br=Kt.get(Qr);if(Br)return Br.slice(0,pr).every(function(xr){return xr})});if(or)return Zt=or,"break"},Zn=bn;Zn>0;Zn--){var Pr=tr(Zn);if(Pr==="break")break}i.placement!==Zt&&(i.modifiersData[nt]._skip=!0,i.placement=Zt,i.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(o,i,et){return et===void 0&&(et={x:0,y:0}),{top:o.top-i.height-et.y,right:o.right-i.width+et.x,bottom:o.bottom-i.height+et.y,left:o.left-i.width-et.x}}function isAnySideFullyClipped(o){return[top,right,bottom,left].some(function(i){return o[i]>=0})}function hide(o){var i=o.state,et=o.name,nt=i.rects.reference,ot=i.rects.popper,st=i.modifiersData.preventOverflow,lt=detectOverflow(i,{elementContext:"reference"}),ht=detectOverflow(i,{altBoundary:!0}),ft=getSideOffsets(lt,nt),St=getSideOffsets(ht,ot,st),vt=isAnySideFullyClipped(ft),Rt=isAnySideFullyClipped(St);i.modifiersData[et]={referenceClippingOffsets:ft,popperEscapeOffsets:St,isReferenceHidden:vt,hasPopperEscaped:Rt},i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-reference-hidden":vt,"data-popper-escaped":Rt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(o,i,et){var nt=getBasePlacement(o),ot=[left,top].indexOf(nt)>=0?-1:1,st=typeof et=="function"?et(Object.assign({},i,{placement:o})):et,lt=st[0],ht=st[1];return lt=lt||0,ht=(ht||0)*ot,[left,right].indexOf(nt)>=0?{x:ht,y:lt}:{x:lt,y:ht}}function offset(o){var i=o.state,et=o.options,nt=o.name,ot=et.offset,st=ot===void 0?[0,0]:ot,lt=placements.reduce(function(vt,Rt){return vt[Rt]=distanceAndSkiddingToXY(Rt,i.rects,st),vt},{}),ht=lt[i.placement],ft=ht.x,St=ht.y;i.modifiersData.popperOffsets!=null&&(i.modifiersData.popperOffsets.x+=ft,i.modifiersData.popperOffsets.y+=St),i.modifiersData[nt]=lt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(o){var i=o.state,et=o.name;i.modifiersData[et]=computeOffsets({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(o){return o==="x"?"y":"x"}function preventOverflow(o){var i=o.state,et=o.options,nt=o.name,ot=et.mainAxis,st=ot===void 0?!0:ot,lt=et.altAxis,ht=lt===void 0?!1:lt,ft=et.boundary,St=et.rootBoundary,vt=et.altBoundary,Rt=et.padding,wt=et.tether,$t=wt===void 0?!0:wt,Dt=et.tetherOffset,Pt=Dt===void 0?0:Dt,Ut=detectOverflow(i,{boundary:ft,rootBoundary:St,padding:Rt,altBoundary:vt}),Ot=getBasePlacement(i.placement),Lt=getVariation(i.placement),xt=!Lt,jt=getMainAxisFromPlacement(Ot),Ht=getAltAxis(jt),qt=i.modifiersData.popperOffsets,Kt=i.rects.reference,nn=i.rects.popper,Zt=typeof Pt=="function"?Pt(Object.assign({},i.rects,{placement:i.placement})):Pt,tn=typeof Zt=="number"?{mainAxis:Zt,altAxis:Zt}:Object.assign({mainAxis:0,altAxis:0},Zt),dn=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,wn={x:0,y:0};if(qt){if(st){var In,Sn=jt==="y"?top:left,Nn=jt==="y"?bottom:right,Rn=jt==="y"?"height":"width",Ln=qt[jt],gn=Ln+Ut[Sn],_n=Ln-Ut[Nn],bn=$t?-nn[Rn]/2:0,tr=Lt===start?Kt[Rn]:nn[Rn],Zn=Lt===start?-nn[Rn]:-Kt[Rn],Pr=i.elements.arrow,Wn=$t&&Pr?getLayoutRect(Pr):{width:0,height:0},pr=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:getFreshSideObject(),or=pr[Sn],Qr=pr[Nn],Br=within(0,Kt[Rn],Wn[Rn]),xr=xt?Kt[Rn]/2-bn-Br-or-tn.mainAxis:tr-Br-or-tn.mainAxis,Fo=xt?-Kt[Rn]/2+bn+Br+Qr+tn.mainAxis:Zn+Br+Qr+tn.mainAxis,ur=i.elements.arrow&&getOffsetParent(i.elements.arrow),Hr=ur?jt==="y"?ur.clientTop||0:ur.clientLeft||0:0,fr=(In=dn==null?void 0:dn[jt])!=null?In:0,Ur=Ln+xr-fr-Hr,Cr=Ln+Fo-fr,Es=within($t?min(gn,Ur):gn,Ln,$t?max(_n,Cr):_n);qt[jt]=Es,wn[jt]=Es-Ln}if(ht){var as,co=jt==="x"?top:left,cs=jt==="x"?bottom:right,So=qt[Ht],gr=Ht==="y"?"height":"width",go=So+Ut[co],No=So-Ut[cs],Lr=[top,left].indexOf(Ot)!==-1,Zo=(as=dn==null?void 0:dn[Ht])!=null?as:0,Go=Lr?go:So-Kt[gr]-nn[gr]-Zo+tn.altAxis,Zr=Lr?So+Kt[gr]+nn[gr]-Zo-tn.altAxis:No,Ar=$t&&Lr?withinMaxClamp(Go,So,Zr):within($t?Go:go,So,$t?Zr:No);qt[Ht]=Ar,wn[Ht]=Ar-So}i.modifiersData[nt]=wn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function getNodeScroll(o){return o===getWindow(o)||!isHTMLElement$1(o)?getWindowScroll(o):getHTMLElementScroll(o)}function isElementScaled(o){var i=o.getBoundingClientRect(),et=round$1(i.width)/o.offsetWidth||1,nt=round$1(i.height)/o.offsetHeight||1;return et!==1||nt!==1}function getCompositeRect(o,i,et){et===void 0&&(et=!1);var nt=isHTMLElement$1(i),ot=isHTMLElement$1(i)&&isElementScaled(i),st=getDocumentElement(i),lt=getBoundingClientRect(o,ot,et),ht={scrollLeft:0,scrollTop:0},ft={x:0,y:0};return(nt||!nt&&!et)&&((getNodeName(i)!=="body"||isScrollParent(st))&&(ht=getNodeScroll(i)),isHTMLElement$1(i)?(ft=getBoundingClientRect(i,!0),ft.x+=i.clientLeft,ft.y+=i.clientTop):st&&(ft.x=getWindowScrollBarX(st))),{x:lt.left+ht.scrollLeft-ft.x,y:lt.top+ht.scrollTop-ft.y,width:lt.width,height:lt.height}}function order(o){var i=new Map,et=new Set,nt=[];o.forEach(function(st){i.set(st.name,st)});function ot(st){et.add(st.name);var lt=[].concat(st.requires||[],st.requiresIfExists||[]);lt.forEach(function(ht){if(!et.has(ht)){var ft=i.get(ht);ft&&ot(ft)}}),nt.push(st)}return o.forEach(function(st){et.has(st.name)||ot(st)}),nt}function orderModifiers(o){var i=order(o);return modifierPhases.reduce(function(et,nt){return et.concat(i.filter(function(ot){return ot.phase===nt}))},[])}function debounce(o){var i;return function(){return i||(i=new Promise(function(et){Promise.resolve().then(function(){i=void 0,et(o())})})),i}}function mergeByName(o){var i=o.reduce(function(et,nt){var ot=et[nt.name];return et[nt.name]=ot?Object.assign({},ot,nt,{options:Object.assign({},ot.options,nt.options),data:Object.assign({},ot.data,nt.data)}):nt,et},{});return Object.keys(i).map(function(et){return i[et]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var o=arguments.length,i=new Array(o),et=0;et<o;et++)i[et]=arguments[et];return!i.some(function(nt){return!(nt&&typeof nt.getBoundingClientRect=="function")})}function popperGenerator(o){o===void 0&&(o={});var i=o,et=i.defaultModifiers,nt=et===void 0?[]:et,ot=i.defaultOptions,st=ot===void 0?DEFAULT_OPTIONS:ot;return function(ht,ft,St){St===void 0&&(St=st);var vt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,st),modifiersData:{},elements:{reference:ht,popper:ft},attributes:{},styles:{}},Rt=[],wt=!1,$t={state:vt,setOptions:function(Ot){var Lt=typeof Ot=="function"?Ot(vt.options):Ot;Pt(),vt.options=Object.assign({},st,vt.options,Lt),vt.scrollParents={reference:isElement(ht)?listScrollParents(ht):ht.contextElement?listScrollParents(ht.contextElement):[],popper:listScrollParents(ft)};var xt=orderModifiers(mergeByName([].concat(nt,vt.options.modifiers)));return vt.orderedModifiers=xt.filter(function(jt){return jt.enabled}),Dt(),$t.update()},forceUpdate:function(){if(!wt){var Ot=vt.elements,Lt=Ot.reference,xt=Ot.popper;if(areValidElements(Lt,xt)){vt.rects={reference:getCompositeRect(Lt,getOffsetParent(xt),vt.options.strategy==="fixed"),popper:getLayoutRect(xt)},vt.reset=!1,vt.placement=vt.options.placement,vt.orderedModifiers.forEach(function(tn){return vt.modifiersData[tn.name]=Object.assign({},tn.data)});for(var jt=0;jt<vt.orderedModifiers.length;jt++){if(vt.reset===!0){vt.reset=!1,jt=-1;continue}var Ht=vt.orderedModifiers[jt],qt=Ht.fn,Kt=Ht.options,nn=Kt===void 0?{}:Kt,Zt=Ht.name;typeof qt=="function"&&(vt=qt({state:vt,options:nn,name:Zt,instance:$t})||vt)}}}},update:debounce(function(){return new Promise(function(Ut){$t.forceUpdate(),Ut(vt)})}),destroy:function(){Pt(),wt=!0}};if(!areValidElements(ht,ft))return $t;$t.setOptions(St).then(function(Ut){!wt&&St.onFirstUpdate&&St.onFirstUpdate(Ut)});function Dt(){vt.orderedModifiers.forEach(function(Ut){var Ot=Ut.name,Lt=Ut.options,xt=Lt===void 0?{}:Lt,jt=Ut.effect;if(typeof jt=="function"){var Ht=jt({state:vt,name:Ot,instance:$t,options:xt}),qt=function(){};Rt.push(Ht||qt)}})}function Pt(){Rt.forEach(function(Ut){return Ut()}),Rt=[]}return $t}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getContainer$1(o){return typeof o=="function"?o():o}const Portal=reactExports.forwardRef(function(i,et){const{children:nt,container:ot,disablePortal:st=!1}=i,[lt,ht]=reactExports.useState(null),ft=useForkRef(reactExports.isValidElement(nt)?nt.ref:null,et);if(useEnhancedEffect(()=>{st||ht(getContainer$1(ot)||document.body)},[ot,st]),useEnhancedEffect(()=>{if(lt&&!st)return setRef(et,lt),()=>{setRef(et,null)}},[et,lt,st]),st){if(reactExports.isValidElement(nt)){const St={ref:ft};return reactExports.cloneElement(nt,St)}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:nt})}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:lt&&reactDomExports.createPortal(nt,lt)})}),COMPONENT_NAME="Popper";function getPopperUtilityClass(o){return generateUtilityClass(COMPONENT_NAME,o)}generateUtilityClasses(COMPONENT_NAME,["root"]);const _excluded$z=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$3=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(o,i){if(i==="ltr")return o;switch(o){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return o}}function resolveAnchorEl$1(o){return typeof o=="function"?o():o}function isHTMLElement(o){return o.nodeType!==void 0}const useUtilityClasses$t=()=>composeClasses({root:["root"]},useClassNamesOverride(getPopperUtilityClass)),defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(i,et){var nt;const{anchorEl:ot,children:st,direction:lt,disablePortal:ht,modifiers:ft,open:St,placement:vt,popperOptions:Rt,popperRef:wt,slotProps:$t={},slots:Dt={},TransitionProps:Pt}=i,Ut=_objectWithoutPropertiesLoose(i,_excluded$z),Ot=reactExports.useRef(null),Lt=useForkRef(Ot,et),xt=reactExports.useRef(null),jt=useForkRef(xt,wt),Ht=reactExports.useRef(jt);useEnhancedEffect(()=>{Ht.current=jt},[jt]),reactExports.useImperativeHandle(wt,()=>xt.current,[]);const qt=flipPlacement(vt,lt),[Kt,nn]=reactExports.useState(qt),[Zt,tn]=reactExports.useState(resolveAnchorEl$1(ot));reactExports.useEffect(()=>{xt.current&&xt.current.forceUpdate()}),reactExports.useEffect(()=>{ot&&tn(resolveAnchorEl$1(ot))},[ot]),useEnhancedEffect(()=>{if(!Zt||!St)return;const Nn=gn=>{nn(gn.placement)};let Rn=[{name:"preventOverflow",options:{altBoundary:ht}},{name:"flip",options:{altBoundary:ht}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:gn})=>{Nn(gn)}}];ft!=null&&(Rn=Rn.concat(ft)),Rt&&Rt.modifiers!=null&&(Rn=Rn.concat(Rt.modifiers));const Ln=createPopper(Zt,Ot.current,_extends$3({placement:qt},Rt,{modifiers:Rn}));return Ht.current(Ln),()=>{Ln.destroy(),Ht.current(null)}},[Zt,ht,ft,St,Rt,qt]);const dn={placement:Kt};Pt!==null&&(dn.TransitionProps=Pt);const wn=useUtilityClasses$t(),In=(nt=Dt.root)!=null?nt:"div",Sn=useSlotProps({elementType:In,externalSlotProps:$t.root,externalForwardedProps:Ut,additionalProps:{role:"tooltip",ref:Lt},ownerState:i,className:wn.root});return jsxRuntimeExports.jsx(In,_extends$3({},Sn,{children:typeof st=="function"?st(dn):st}))}),Popper$2=reactExports.forwardRef(function(i,et){const{anchorEl:nt,children:ot,container:st,direction:lt="ltr",disablePortal:ht=!1,keepMounted:ft=!1,modifiers:St,open:vt,placement:Rt="bottom",popperOptions:wt=defaultPopperOptions,popperRef:$t,style:Dt,transition:Pt=!1,slotProps:Ut={},slots:Ot={}}=i,Lt=_objectWithoutPropertiesLoose(i,_excluded2$3),[xt,jt]=reactExports.useState(!0),Ht=()=>{jt(!1)},qt=()=>{jt(!0)};if(!ft&&!vt&&(!Pt||xt))return null;let Kt;if(st)Kt=st;else if(nt){const tn=resolveAnchorEl$1(nt);Kt=tn&&isHTMLElement(tn)?ownerDocument(tn).body:ownerDocument(null).body}const nn=!vt&&ft&&(!Pt||xt)?"none":void 0,Zt=Pt?{in:vt,onEnter:Ht,onExited:qt}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:ht,container:Kt,children:jsxRuntimeExports.jsx(PopperTooltip,_extends$3({anchorEl:nt,direction:lt,disablePortal:ht,modifiers:St,ref:et,open:Pt?!xt:vt,placement:Rt,popperOptions:wt,popperRef:$t,slotProps:Ut,slots:Ot},Lt,{style:_extends$3({position:"fixed",top:0,left:0,display:nn},Dt),TransitionProps:Zt,children:ot}))})});function isOverflowing(o){const i=ownerDocument(o);return i.body===o?ownerWindow(o).innerWidth>i.documentElement.clientWidth:o.scrollHeight>o.clientHeight}function ariaHidden(o,i){i?o.setAttribute("aria-hidden","true"):o.removeAttribute("aria-hidden")}function getPaddingRight(o){return parseInt(ownerWindow(o).getComputedStyle(o).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(o){const et=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(o.tagName)!==-1,nt=o.tagName==="INPUT"&&o.getAttribute("type")==="hidden";return et||nt}function ariaHiddenSiblings(o,i,et,nt,ot){const st=[i,et,...nt];[].forEach.call(o.children,lt=>{const ht=st.indexOf(lt)===-1,ft=!isAriaHiddenForbiddenOnElement(lt);ht&&ft&&ariaHidden(lt,ot)})}function findIndexOf(o,i){let et=-1;return o.some((nt,ot)=>i(nt)?(et=ot,!0):!1),et}function handleContainer(o,i){const et=[],nt=o.container;if(!i.disableScrollLock){if(isOverflowing(nt)){const lt=getScrollbarSize(ownerDocument(nt));et.push({value:nt.style.paddingRight,property:"padding-right",el:nt}),nt.style.paddingRight=`${getPaddingRight(nt)+lt}px`;const ht=ownerDocument(nt).querySelectorAll(".mui-fixed");[].forEach.call(ht,ft=>{et.push({value:ft.style.paddingRight,property:"padding-right",el:ft}),ft.style.paddingRight=`${getPaddingRight(ft)+lt}px`})}let st;if(nt.parentNode instanceof DocumentFragment)st=ownerDocument(nt).body;else{const lt=nt.parentElement,ht=ownerWindow(nt);st=(lt==null?void 0:lt.nodeName)==="HTML"&&ht.getComputedStyle(lt).overflowY==="scroll"?lt:nt}et.push({value:st.style.overflow,property:"overflow",el:st},{value:st.style.overflowX,property:"overflow-x",el:st},{value:st.style.overflowY,property:"overflow-y",el:st}),st.style.overflow="hidden"}return()=>{et.forEach(({value:st,el:lt,property:ht})=>{st?lt.style.setProperty(ht,st):lt.style.removeProperty(ht)})}}function getHiddenSiblings(o){const i=[];return[].forEach.call(o.children,et=>{et.getAttribute("aria-hidden")==="true"&&i.push(et)}),i}class ModalManager{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(i,et){let nt=this.modals.indexOf(i);if(nt!==-1)return nt;nt=this.modals.length,this.modals.push(i),i.modalRef&&ariaHidden(i.modalRef,!1);const ot=getHiddenSiblings(et);ariaHiddenSiblings(et,i.mount,i.modalRef,ot,!0);const st=findIndexOf(this.containers,lt=>lt.container===et);return st!==-1?(this.containers[st].modals.push(i),nt):(this.containers.push({modals:[i],container:et,restore:null,hiddenSiblings:ot}),nt)}mount(i,et){const nt=findIndexOf(this.containers,st=>st.modals.indexOf(i)!==-1),ot=this.containers[nt];ot.restore||(ot.restore=handleContainer(ot,et))}remove(i,et=!0){const nt=this.modals.indexOf(i);if(nt===-1)return nt;const ot=findIndexOf(this.containers,lt=>lt.modals.indexOf(i)!==-1),st=this.containers[ot];if(st.modals.splice(st.modals.indexOf(i),1),this.modals.splice(nt,1),st.modals.length===0)st.restore&&st.restore(),i.modalRef&&ariaHidden(i.modalRef,et),ariaHiddenSiblings(st.container,i.mount,i.modalRef,st.hiddenSiblings,!1),this.containers.splice(ot,1);else{const lt=st.modals[st.modals.length-1];lt.modalRef&&ariaHidden(lt.modalRef,!1)}return nt}isTopModal(i){return this.modals.length>0&&this.modals[this.modals.length-1]===i}}function getContainer(o){return typeof o=="function"?o():o}function getHasTransition(o){return o?o.props.hasOwnProperty("in"):!1}const defaultManager=new ModalManager;function useModal(o){const{container:i,disableEscapeKeyDown:et=!1,disableScrollLock:nt=!1,manager:ot=defaultManager,closeAfterTransition:st=!1,onTransitionEnter:lt,onTransitionExited:ht,children:ft,onClose:St,open:vt,rootRef:Rt}=o,wt=reactExports.useRef({}),$t=reactExports.useRef(null),Dt=reactExports.useRef(null),Pt=useForkRef(Dt,Rt),[Ut,Ot]=reactExports.useState(!vt),Lt=getHasTransition(ft);let xt=!0;(o["aria-hidden"]==="false"||o["aria-hidden"]===!1)&&(xt=!1);const jt=()=>ownerDocument($t.current),Ht=()=>(wt.current.modalRef=Dt.current,wt.current.mount=$t.current,wt.current),qt=()=>{ot.mount(Ht(),{disableScrollLock:nt}),Dt.current&&(Dt.current.scrollTop=0)},Kt=useEventCallback(()=>{const Rn=getContainer(i)||jt().body;ot.add(Ht(),Rn),Dt.current&&qt()}),nn=reactExports.useCallback(()=>ot.isTopModal(Ht()),[ot]),Zt=useEventCallback(Rn=>{$t.current=Rn,Rn&&(vt&&nn()?qt():Dt.current&&ariaHidden(Dt.current,xt))}),tn=reactExports.useCallback(()=>{ot.remove(Ht(),xt)},[xt,ot]);reactExports.useEffect(()=>()=>{tn()},[tn]),reactExports.useEffect(()=>{vt?Kt():(!Lt||!st)&&tn()},[vt,tn,Lt,st,Kt]);const dn=Rn=>Ln=>{var gn;(gn=Rn.onKeyDown)==null||gn.call(Rn,Ln),!(Ln.key!=="Escape"||Ln.which===229||!nn())&&(et||(Ln.stopPropagation(),St&&St(Ln,"escapeKeyDown")))},wn=Rn=>Ln=>{var gn;(gn=Rn.onClick)==null||gn.call(Rn,Ln),Ln.target===Ln.currentTarget&&St&&St(Ln,"backdropClick")};return{getRootProps:(Rn={})=>{const Ln=extractEventHandlers(o);delete Ln.onTransitionEnter,delete Ln.onTransitionExited;const gn=_extends$3({},Ln,Rn);return _extends$3({role:"presentation"},gn,{onKeyDown:dn(gn),ref:Pt})},getBackdropProps:(Rn={})=>{const Ln=Rn;return _extends$3({"aria-hidden":!0},Ln,{onClick:wn(Ln),open:vt})},getTransitionProps:()=>{const Rn=()=>{Ot(!1),lt&&lt()},Ln=()=>{Ot(!0),ht&&ht(),st&&tn()};return{onEnter:createChainedFunction(Rn,ft==null?void 0:ft.props.onEnter),onExited:createChainedFunction(Ln,ft==null?void 0:ft.props.onExited)}},rootRef:Pt,portalRef:Zt,isTopModal:nn,exited:Ut,hasTransition:Lt}}const _excluded$y=["onChange","maxRows","minRows","style","value"];function getStyleValue(o){return parseInt(o,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isEmpty$1(o){return o==null||Object.keys(o).length===0||o.outerHeightStyle===0&&!o.overflow}const TextareaAutosize=reactExports.forwardRef(function(i,et){const{onChange:nt,maxRows:ot,minRows:st=1,style:lt,value:ht}=i,ft=_objectWithoutPropertiesLoose(i,_excluded$y),{current:St}=reactExports.useRef(ht!=null),vt=reactExports.useRef(null),Rt=useForkRef(et,vt),wt=reactExports.useRef(null),$t=reactExports.useRef(0),[Dt,Pt]=reactExports.useState({outerHeightStyle:0}),Ut=reactExports.useCallback(()=>{const jt=vt.current,qt=ownerWindow(jt).getComputedStyle(jt);if(qt.width==="0px")return{outerHeightStyle:0};const Kt=wt.current;Kt.style.width=qt.width,Kt.value=jt.value||i.placeholder||"x",Kt.value.slice(-1)===`
`&&(Kt.value+=" ");const nn=qt.boxSizing,Zt=getStyleValue(qt.paddingBottom)+getStyleValue(qt.paddingTop),tn=getStyleValue(qt.borderBottomWidth)+getStyleValue(qt.borderTopWidth),dn=Kt.scrollHeight;Kt.value="x";const wn=Kt.scrollHeight;let In=dn;st&&(In=Math.max(Number(st)*wn,In)),ot&&(In=Math.min(Number(ot)*wn,In)),In=Math.max(In,wn);const Sn=In+(nn==="border-box"?Zt+tn:0),Nn=Math.abs(In-dn)<=1;return{outerHeightStyle:Sn,overflow:Nn}},[ot,st,i.placeholder]),Ot=(jt,Ht)=>{const{outerHeightStyle:qt,overflow:Kt}=Ht;return $t.current<20&&(qt>0&&Math.abs((jt.outerHeightStyle||0)-qt)>1||jt.overflow!==Kt)?($t.current+=1,{overflow:Kt,outerHeightStyle:qt}):jt},Lt=reactExports.useCallback(()=>{const jt=Ut();isEmpty$1(jt)||Pt(Ht=>Ot(Ht,jt))},[Ut]);useEnhancedEffect(()=>{const jt=()=>{const dn=Ut();isEmpty$1(dn)||reactDomExports.flushSync(()=>{Pt(wn=>Ot(wn,dn))})},Ht=()=>{$t.current=0,jt()};let qt;const Kt=debounce$1(Ht),nn=vt.current,Zt=ownerWindow(nn);Zt.addEventListener("resize",Kt);let tn;return typeof ResizeObserver<"u"&&(tn=new ResizeObserver(Ht),tn.observe(nn)),()=>{Kt.clear(),cancelAnimationFrame(qt),Zt.removeEventListener("resize",Kt),tn&&tn.disconnect()}},[Ut]),useEnhancedEffect(()=>{Lt()}),reactExports.useEffect(()=>{$t.current=0},[ht]);const xt=jt=>{$t.current=0,St||Lt(),nt&&nt(jt)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",_extends$3({value:ht,onChange:xt,ref:Rt,rows:st,style:_extends$3({height:Dt.outerHeightStyle,overflow:Dt.overflow?"hidden":void 0},lt)},ft)),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:i.className,readOnly:!0,ref:wt,tabIndex:-1,style:_extends$3({},styles$2.shadow,lt,{paddingTop:0,paddingBottom:0})})]})}),_excluded$x=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled(Popper$2,{name:"MuiPopper",slot:"Root",overridesResolver:(o,i)=>i.root})({}),Popper=reactExports.forwardRef(function(i,et){var nt;const ot=useTheme$2(),st=useThemeProps({props:i,name:"MuiPopper"}),{anchorEl:lt,component:ht,components:ft,componentsProps:St,container:vt,disablePortal:Rt,keepMounted:wt,modifiers:$t,open:Dt,placement:Pt,popperOptions:Ut,popperRef:Ot,transition:Lt,slots:xt,slotProps:jt}=st,Ht=_objectWithoutPropertiesLoose(st,_excluded$x),qt=(nt=xt==null?void 0:xt.root)!=null?nt:ft==null?void 0:ft.Root,Kt=_extends$3({anchorEl:lt,container:vt,disablePortal:Rt,keepMounted:wt,modifiers:$t,open:Dt,placement:Pt,popperOptions:Ut,popperRef:Ot,transition:Lt},Ht);return jsxRuntimeExports.jsx(PopperRoot,_extends$3({as:ht,direction:ot==null?void 0:ot.direction,slots:{root:qt},slotProps:jt??St},Kt,{ref:et}))}),Popper$1=Popper;function formControlState({props:o,states:i,muiFormControl:et}){return i.reduce((nt,ot)=>(nt[ot]=o[ot],et&&typeof o[ot]>"u"&&(nt[ot]=et[ot]),nt),{})}const FormControlContext=reactExports.createContext(void 0),FormControlContext$1=FormControlContext;function useFormControl(){return reactExports.useContext(FormControlContext$1)}function GlobalStyles(o){return jsxRuntimeExports.jsx(GlobalStyles$1,_extends$3({},o,{defaultTheme:defaultTheme$2,themeId:THEME_ID}))}function hasValue(o){return o!=null&&!(Array.isArray(o)&&o.length===0)}function isFilled(o,i=!1){return o&&(hasValue(o.value)&&o.value!==""||i&&hasValue(o.defaultValue)&&o.defaultValue!=="")}function isAdornedStart(o){return o.startAdornment}function getInputBaseUtilityClass(o){return generateUtilityClass$1("MuiInputBase",o)}const inputBaseClasses=generateUtilityClasses$1("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),inputBaseClasses$1=inputBaseClasses,_excluded$w=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],rootOverridesResolver=(o,i)=>{const{ownerState:et}=o;return[i.root,et.formControl&&i.formControl,et.startAdornment&&i.adornedStart,et.endAdornment&&i.adornedEnd,et.error&&i.error,et.size==="small"&&i.sizeSmall,et.multiline&&i.multiline,et.color&&i[`color${capitalize(et.color)}`],et.fullWidth&&i.fullWidth,et.hiddenLabel&&i.hiddenLabel]},inputOverridesResolver=(o,i)=>{const{ownerState:et}=o;return[i.input,et.size==="small"&&i.inputSizeSmall,et.multiline&&i.inputMultiline,et.type==="search"&&i.inputTypeSearch,et.startAdornment&&i.inputAdornedStart,et.endAdornment&&i.inputAdornedEnd,et.hiddenLabel&&i.inputHiddenLabel]},useUtilityClasses$s=o=>{const{classes:i,color:et,disabled:nt,error:ot,endAdornment:st,focused:lt,formControl:ht,fullWidth:ft,hiddenLabel:St,multiline:vt,readOnly:Rt,size:wt,startAdornment:$t,type:Dt}=o,Pt={root:["root",`color${capitalize(et)}`,nt&&"disabled",ot&&"error",ft&&"fullWidth",lt&&"focused",ht&&"formControl",wt&&wt!=="medium"&&`size${capitalize(wt)}`,vt&&"multiline",$t&&"adornedStart",st&&"adornedEnd",St&&"hiddenLabel",Rt&&"readOnly"],input:["input",nt&&"disabled",Dt==="search"&&"inputTypeSearch",vt&&"inputMultiline",wt==="small"&&"inputSizeSmall",St&&"inputHiddenLabel",$t&&"inputAdornedStart",st&&"inputAdornedEnd",Rt&&"readOnly"]};return composeClasses(Pt,getInputBaseUtilityClass,i)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:o,ownerState:i})=>_extends$3({},o.typography.body1,{color:(o.vars||o).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses$1.disabled}`]:{color:(o.vars||o).palette.text.disabled,cursor:"default"}},i.multiline&&_extends$3({padding:"4px 0 5px"},i.size==="small"&&{paddingTop:1}),i.fullWidth&&{width:"100%"})),InputBaseComponent=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:o,ownerState:i})=>{const et=o.palette.mode==="light",nt=_extends$3({color:"currentColor"},o.vars?{opacity:o.vars.opacity.inputPlaceholder}:{opacity:et?.42:.5},{transition:o.transitions.create("opacity",{duration:o.transitions.duration.shorter})}),ot={opacity:"0 !important"},st=o.vars?{opacity:o.vars.opacity.inputPlaceholder}:{opacity:et?.42:.5};return _extends$3({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":nt,"&::-moz-placeholder":nt,"&:-ms-input-placeholder":nt,"&::-ms-input-placeholder":nt,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses$1.formControl} &`]:{"&::-webkit-input-placeholder":ot,"&::-moz-placeholder":ot,"&:-ms-input-placeholder":ot,"&::-ms-input-placeholder":ot,"&:focus::-webkit-input-placeholder":st,"&:focus::-moz-placeholder":st,"&:focus:-ms-input-placeholder":st,"&:focus::-ms-input-placeholder":st},[`&.${inputBaseClasses$1.disabled}`]:{opacity:1,WebkitTextFillColor:(o.vars||o).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},i.size==="small"&&{paddingTop:1},i.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},i.type==="search"&&{MozAppearance:"textfield"})}),inputGlobalStyles=jsxRuntimeExports.jsx(GlobalStyles,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),InputBase=reactExports.forwardRef(function(i,et){var nt;const ot=useThemeProps({props:i,name:"MuiInputBase"}),{"aria-describedby":st,autoComplete:lt,autoFocus:ht,className:ft,components:St={},componentsProps:vt={},defaultValue:Rt,disabled:wt,disableInjectingGlobalStyles:$t,endAdornment:Dt,fullWidth:Pt=!1,id:Ut,inputComponent:Ot="input",inputProps:Lt={},inputRef:xt,maxRows:jt,minRows:Ht,multiline:qt=!1,name:Kt,onBlur:nn,onChange:Zt,onClick:tn,onFocus:dn,onKeyDown:wn,onKeyUp:In,placeholder:Sn,readOnly:Nn,renderSuffix:Rn,rows:Ln,slotProps:gn={},slots:_n={},startAdornment:bn,type:tr="text",value:Zn}=ot,Pr=_objectWithoutPropertiesLoose(ot,_excluded$w),Wn=Lt.value!=null?Lt.value:Zn,{current:pr}=reactExports.useRef(Wn!=null),or=reactExports.useRef(),Qr=reactExports.useCallback(Ar=>{},[]),Br=useForkRef(or,xt,Lt.ref,Qr),[xr,Fo]=reactExports.useState(!1),ur=useFormControl(),Hr=formControlState({props:ot,muiFormControl:ur,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Hr.focused=ur?ur.focused:xr,reactExports.useEffect(()=>{!ur&&wt&&xr&&(Fo(!1),nn&&nn())},[ur,wt,xr,nn]);const fr=ur&&ur.onFilled,Ur=ur&&ur.onEmpty,Cr=reactExports.useCallback(Ar=>{isFilled(Ar)?fr&&fr():Ur&&Ur()},[fr,Ur]);useEnhancedEffect(()=>{pr&&Cr({value:Wn})},[Wn,Cr,pr]);const Es=Ar=>{if(Hr.disabled){Ar.stopPropagation();return}dn&&dn(Ar),Lt.onFocus&&Lt.onFocus(Ar),ur&&ur.onFocus?ur.onFocus(Ar):Fo(!0)},as=Ar=>{nn&&nn(Ar),Lt.onBlur&&Lt.onBlur(Ar),ur&&ur.onBlur?ur.onBlur(Ar):Fo(!1)},co=(Ar,...er)=>{if(!pr){const jo=Ar.target||or.current;if(jo==null)throw new Error(formatMuiErrorMessage(1));Cr({value:jo.value})}Lt.onChange&&Lt.onChange(Ar,...er),Zt&&Zt(Ar,...er)};reactExports.useEffect(()=>{Cr(or.current)},[]);const cs=Ar=>{or.current&&Ar.currentTarget===Ar.target&&or.current.focus(),tn&&tn(Ar)};let So=Ot,gr=Lt;qt&&So==="input"&&(Ln?gr=_extends$3({type:void 0,minRows:Ln,maxRows:Ln},gr):gr=_extends$3({type:void 0,maxRows:jt,minRows:Ht},gr),So=TextareaAutosize);const go=Ar=>{Cr(Ar.animationName==="mui-auto-fill-cancel"?or.current:{value:"x"})};reactExports.useEffect(()=>{ur&&ur.setAdornedStart(!!bn)},[ur,bn]);const No=_extends$3({},ot,{color:Hr.color||"primary",disabled:Hr.disabled,endAdornment:Dt,error:Hr.error,focused:Hr.focused,formControl:ur,fullWidth:Pt,hiddenLabel:Hr.hiddenLabel,multiline:qt,size:Hr.size,startAdornment:bn,type:tr}),Lr=useUtilityClasses$s(No),Zo=_n.root||St.Root||InputBaseRoot,Go=gn.root||vt.root||{},Zr=_n.input||St.Input||InputBaseComponent;return gr=_extends$3({},gr,(nt=gn.input)!=null?nt:vt.input),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!$t&&inputGlobalStyles,jsxRuntimeExports.jsxs(Zo,_extends$3({},Go,!isHostComponent(Zo)&&{ownerState:_extends$3({},No,Go.ownerState)},{ref:et,onClick:cs},Pr,{className:clsx(Lr.root,Go.className,ft,Nn&&"MuiInputBase-readOnly"),children:[bn,jsxRuntimeExports.jsx(FormControlContext$1.Provider,{value:null,children:jsxRuntimeExports.jsx(Zr,_extends$3({ownerState:No,"aria-invalid":Hr.error,"aria-describedby":st,autoComplete:lt,autoFocus:ht,defaultValue:Rt,disabled:Hr.disabled,id:Ut,onAnimationStart:go,name:Kt,placeholder:Sn,readOnly:Nn,required:Hr.required,rows:Ln,value:Wn,onKeyDown:wn,onKeyUp:In,type:tr},gr,!isHostComponent(Zr)&&{as:So,ownerState:_extends$3({},No,gr.ownerState)},{ref:Br,className:clsx(Lr.input,gr.className,Nn&&"MuiInputBase-readOnly"),onBlur:as,onChange:co,onFocus:Es}))}),Dt,Rn?Rn(_extends$3({},Hr,{startAdornment:bn})):null]}))]})}),InputBase$1=InputBase;function getInputUtilityClass(o){return generateUtilityClass$1("MuiInput",o)}const inputClasses=_extends$3({},inputBaseClasses$1,generateUtilityClasses$1("MuiInput",["root","underline","input"])),inputClasses$1=inputClasses;function getOutlinedInputUtilityClass(o){return generateUtilityClass$1("MuiOutlinedInput",o)}const outlinedInputClasses=_extends$3({},inputBaseClasses$1,generateUtilityClasses$1("MuiOutlinedInput",["root","notchedOutline","input"])),outlinedInputClasses$1=outlinedInputClasses;function getFilledInputUtilityClass(o){return generateUtilityClass$1("MuiFilledInput",o)}const filledInputClasses=_extends$3({},inputBaseClasses$1,generateUtilityClasses$1("MuiFilledInput",["root","underline","input"])),filledInputClasses$1=filledInputClasses,ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Person=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function getAvatarUtilityClass(o){return generateUtilityClass$1("MuiAvatar",o)}generateUtilityClasses$1("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const _excluded$v=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],useUtilityClasses$r=o=>{const{classes:i,variant:et,colorDefault:nt}=o;return composeClasses({root:["root",et,nt&&"colorDefault"],img:["img"],fallback:["fallback"]},getAvatarUtilityClass,i)},AvatarRoot=styled("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[et.variant],et.colorDefault&&i.colorDefault]}})(({theme:o})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:o.typography.fontFamily,fontSize:o.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(o.vars||o).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:_extends$3({color:(o.vars||o).palette.background.default},o.vars?{backgroundColor:o.vars.palette.Avatar.defaultBg}:_extends$3({backgroundColor:o.palette.grey[400]},o.applyDarkStyles({backgroundColor:o.palette.grey[600]})))}]})),AvatarImg=styled("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(o,i)=>i.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),AvatarFallback=styled(Person,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(o,i)=>i.fallback})({width:"75%",height:"75%"});function useLoaded({crossOrigin:o,referrerPolicy:i,src:et,srcSet:nt}){const[ot,st]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!et&&!nt)return;st(!1);let lt=!0;const ht=new Image;return ht.onload=()=>{lt&&st("loaded")},ht.onerror=()=>{lt&&st("error")},ht.crossOrigin=o,ht.referrerPolicy=i,ht.src=et,nt&&(ht.srcset=nt),()=>{lt=!1}},[o,i,et,nt]),ot}const Avatar=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiAvatar"}),{alt:ot,children:st,className:lt,component:ht="div",imgProps:ft,sizes:St,src:vt,srcSet:Rt,variant:wt="circular"}=nt,$t=_objectWithoutPropertiesLoose(nt,_excluded$v);let Dt=null;const Pt=useLoaded(_extends$3({},ft,{src:vt,srcSet:Rt})),Ut=vt||Rt,Ot=Ut&&Pt!=="error",Lt=_extends$3({},nt,{colorDefault:!Ot,component:ht,variant:wt}),xt=useUtilityClasses$r(Lt);return Ot?Dt=jsxRuntimeExports.jsx(AvatarImg,_extends$3({alt:ot,srcSet:Rt,src:vt,sizes:St,ownerState:Lt,className:xt.img},ft)):st!=null?Dt=st:Ut&&ot?Dt=ot[0]:Dt=jsxRuntimeExports.jsx(AvatarFallback,{ownerState:Lt,className:xt.fallback}),jsxRuntimeExports.jsx(AvatarRoot,_extends$3({as:ht,ownerState:Lt,className:clsx(xt.root,lt),ref:et},$t,{children:Dt}))}),Avatar$1=Avatar,_excluded$u=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],styles$1={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(i,et){const nt=useTheme(),ot={enter:nt.transitions.duration.enteringScreen,exit:nt.transitions.duration.leavingScreen},{addEndListener:st,appear:lt=!0,children:ht,easing:ft,in:St,onEnter:vt,onEntered:Rt,onEntering:wt,onExit:$t,onExited:Dt,onExiting:Pt,style:Ut,timeout:Ot=ot,TransitionComponent:Lt=Transition$1}=i,xt=_objectWithoutPropertiesLoose(i,_excluded$u),jt=reactExports.useRef(null),Ht=useForkRef(jt,ht.ref,et),qt=Sn=>Nn=>{if(Sn){const Rn=jt.current;Nn===void 0?Sn(Rn):Sn(Rn,Nn)}},Kt=qt(wt),nn=qt((Sn,Nn)=>{reflow(Sn);const Rn=getTransitionProps({style:Ut,timeout:Ot,easing:ft},{mode:"enter"});Sn.style.webkitTransition=nt.transitions.create("opacity",Rn),Sn.style.transition=nt.transitions.create("opacity",Rn),vt&&vt(Sn,Nn)}),Zt=qt(Rt),tn=qt(Pt),dn=qt(Sn=>{const Nn=getTransitionProps({style:Ut,timeout:Ot,easing:ft},{mode:"exit"});Sn.style.webkitTransition=nt.transitions.create("opacity",Nn),Sn.style.transition=nt.transitions.create("opacity",Nn),$t&&$t(Sn)}),wn=qt(Dt),In=Sn=>{st&&st(jt.current,Sn)};return jsxRuntimeExports.jsx(Lt,_extends$3({appear:lt,in:St,nodeRef:jt,onEnter:nn,onEntered:Zt,onEntering:Kt,onExit:dn,onExited:wn,onExiting:tn,addEndListener:In,timeout:Ot},xt,{children:(Sn,Nn)=>reactExports.cloneElement(ht,_extends$3({style:_extends$3({opacity:0,visibility:Sn==="exited"&&!St?"hidden":void 0},styles$1[Sn],Ut,ht.props.style),ref:Ht},Nn))}))}),Fade$1=Fade;function getBackdropUtilityClass(o){return generateUtilityClass$1("MuiBackdrop",o)}generateUtilityClasses$1("MuiBackdrop",["root","invisible"]);const _excluded$t=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],useUtilityClasses$q=o=>{const{classes:i,invisible:et}=o;return composeClasses({root:["root",et&&"invisible"]},getBackdropUtilityClass,i)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,et.invisible&&i.invisible]}})(({ownerState:o})=>_extends$3({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},o.invisible&&{backgroundColor:"transparent"})),Backdrop=reactExports.forwardRef(function(i,et){var nt,ot,st;const lt=useThemeProps({props:i,name:"MuiBackdrop"}),{children:ht,className:ft,component:St="div",components:vt={},componentsProps:Rt={},invisible:wt=!1,open:$t,slotProps:Dt={},slots:Pt={},TransitionComponent:Ut=Fade$1,transitionDuration:Ot}=lt,Lt=_objectWithoutPropertiesLoose(lt,_excluded$t),xt=_extends$3({},lt,{component:St,invisible:wt}),jt=useUtilityClasses$q(xt),Ht=(nt=Dt.root)!=null?nt:Rt.root;return jsxRuntimeExports.jsx(Ut,_extends$3({in:$t,timeout:Ot},Lt,{children:jsxRuntimeExports.jsx(BackdropRoot,_extends$3({"aria-hidden":!0},Ht,{as:(ot=(st=Pt.root)!=null?st:vt.Root)!=null?ot:St,className:clsx(jt.root,ft,Ht==null?void 0:Ht.className),ownerState:_extends$3({},xt,Ht==null?void 0:Ht.ownerState),classes:jt,ref:et,children:ht}))}))}),Backdrop$1=Backdrop,boxClasses=generateUtilityClasses$1("MuiBox",["root"]),boxClasses$1=boxClasses,defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses$1.root,generateClassName:ClassNameGenerator$1.generate}),Box$1=Box;function getButtonUtilityClass(o){return generateUtilityClass$1("MuiButton",o)}const buttonClasses=generateUtilityClasses$1("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),buttonClasses$1=buttonClasses,ButtonGroupContext=reactExports.createContext({}),ButtonGroupContext$1=ButtonGroupContext,ButtonGroupButtonContext=reactExports.createContext(void 0),ButtonGroupButtonContext$1=ButtonGroupButtonContext,_excluded$s=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$p=o=>{const{color:i,disableElevation:et,fullWidth:nt,size:ot,variant:st,classes:lt}=o,ht={root:["root",st,`${st}${capitalize(i)}`,`size${capitalize(ot)}`,`${st}Size${capitalize(ot)}`,i==="inherit"&&"colorInherit",et&&"disableElevation",nt&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(ot)}`],endIcon:["endIcon",`iconSize${capitalize(ot)}`]},ft=composeClasses(ht,getButtonUtilityClass,lt);return _extends$3({},lt,ft)},commonIconStyles=o=>_extends$3({},o.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},o.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},o.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled(ButtonBase$1,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiButton",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[et.variant],i[`${et.variant}${capitalize(et.color)}`],i[`size${capitalize(et.size)}`],i[`${et.variant}Size${capitalize(et.size)}`],et.color==="inherit"&&i.colorInherit,et.disableElevation&&i.disableElevation,et.fullWidth&&i.fullWidth]}})(({theme:o,ownerState:i})=>{var et,nt;const ot=o.palette.mode==="light"?o.palette.grey[300]:o.palette.grey[800],st=o.palette.mode==="light"?o.palette.grey.A100:o.palette.grey[700];return _extends$3({},o.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(o.vars||o).shape.borderRadius,transition:o.transitions.create(["background-color","box-shadow","border-color","color"],{duration:o.transitions.duration.short}),"&:hover":_extends$3({textDecoration:"none",backgroundColor:o.vars?`rgba(${o.vars.palette.text.primaryChannel} / ${o.vars.palette.action.hoverOpacity})`:alpha(o.palette.text.primary,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},i.variant==="text"&&i.color!=="inherit"&&{backgroundColor:o.vars?`rgba(${o.vars.palette[i.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:alpha(o.palette[i.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},i.variant==="outlined"&&i.color!=="inherit"&&{border:`1px solid ${(o.vars||o).palette[i.color].main}`,backgroundColor:o.vars?`rgba(${o.vars.palette[i.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:alpha(o.palette[i.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},i.variant==="contained"&&{backgroundColor:o.vars?o.vars.palette.Button.inheritContainedHoverBg:st,boxShadow:(o.vars||o).shadows[4],"@media (hover: none)":{boxShadow:(o.vars||o).shadows[2],backgroundColor:(o.vars||o).palette.grey[300]}},i.variant==="contained"&&i.color!=="inherit"&&{backgroundColor:(o.vars||o).palette[i.color].dark,"@media (hover: none)":{backgroundColor:(o.vars||o).palette[i.color].main}}),"&:active":_extends$3({},i.variant==="contained"&&{boxShadow:(o.vars||o).shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends$3({},i.variant==="contained"&&{boxShadow:(o.vars||o).shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends$3({color:(o.vars||o).palette.action.disabled},i.variant==="outlined"&&{border:`1px solid ${(o.vars||o).palette.action.disabledBackground}`},i.variant==="contained"&&{color:(o.vars||o).palette.action.disabled,boxShadow:(o.vars||o).shadows[0],backgroundColor:(o.vars||o).palette.action.disabledBackground})},i.variant==="text"&&{padding:"6px 8px"},i.variant==="text"&&i.color!=="inherit"&&{color:(o.vars||o).palette[i.color].main},i.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},i.variant==="outlined"&&i.color!=="inherit"&&{color:(o.vars||o).palette[i.color].main,border:o.vars?`1px solid rgba(${o.vars.palette[i.color].mainChannel} / 0.5)`:`1px solid ${alpha(o.palette[i.color].main,.5)}`},i.variant==="contained"&&{color:o.vars?o.vars.palette.text.primary:(et=(nt=o.palette).getContrastText)==null?void 0:et.call(nt,o.palette.grey[300]),backgroundColor:o.vars?o.vars.palette.Button.inheritContainedBg:ot,boxShadow:(o.vars||o).shadows[2]},i.variant==="contained"&&i.color!=="inherit"&&{color:(o.vars||o).palette[i.color].contrastText,backgroundColor:(o.vars||o).palette[i.color].main},i.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},i.size==="small"&&i.variant==="text"&&{padding:"4px 5px",fontSize:o.typography.pxToRem(13)},i.size==="large"&&i.variant==="text"&&{padding:"8px 11px",fontSize:o.typography.pxToRem(15)},i.size==="small"&&i.variant==="outlined"&&{padding:"3px 9px",fontSize:o.typography.pxToRem(13)},i.size==="large"&&i.variant==="outlined"&&{padding:"7px 21px",fontSize:o.typography.pxToRem(15)},i.size==="small"&&i.variant==="contained"&&{padding:"4px 10px",fontSize:o.typography.pxToRem(13)},i.size==="large"&&i.variant==="contained"&&{padding:"8px 22px",fontSize:o.typography.pxToRem(15)},i.fullWidth&&{width:"100%"})},({ownerState:o})=>o.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.startIcon,i[`iconSize${capitalize(et.size)}`]]}})(({ownerState:o})=>_extends$3({display:"inherit",marginRight:8,marginLeft:-4},o.size==="small"&&{marginLeft:-2},commonIconStyles(o))),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.endIcon,i[`iconSize${capitalize(et.size)}`]]}})(({ownerState:o})=>_extends$3({display:"inherit",marginRight:-4,marginLeft:8},o.size==="small"&&{marginRight:-2},commonIconStyles(o))),Button=reactExports.forwardRef(function(i,et){const nt=reactExports.useContext(ButtonGroupContext$1),ot=reactExports.useContext(ButtonGroupButtonContext$1),st=resolveProps(nt,i),lt=useThemeProps({props:st,name:"MuiButton"}),{children:ht,color:ft="primary",component:St="button",className:vt,disabled:Rt=!1,disableElevation:wt=!1,disableFocusRipple:$t=!1,endIcon:Dt,focusVisibleClassName:Pt,fullWidth:Ut=!1,size:Ot="medium",startIcon:Lt,type:xt,variant:jt="text"}=lt,Ht=_objectWithoutPropertiesLoose(lt,_excluded$s),qt=_extends$3({},lt,{color:ft,component:St,disabled:Rt,disableElevation:wt,disableFocusRipple:$t,fullWidth:Ut,size:Ot,type:xt,variant:jt}),Kt=useUtilityClasses$p(qt),nn=Lt&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:Kt.startIcon,ownerState:qt,children:Lt}),Zt=Dt&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:Kt.endIcon,ownerState:qt,children:Dt}),tn=ot||"";return jsxRuntimeExports.jsxs(ButtonRoot,_extends$3({ownerState:qt,className:clsx(nt.className,Kt.root,vt,tn),component:St,disabled:Rt,focusRipple:!$t,focusVisibleClassName:clsx(Kt.focusVisible,Pt),ref:et,type:xt},Ht,{classes:Kt,children:[nn,ht,Zt]}))}),Button$1=Button;function getCardUtilityClass(o){return generateUtilityClass$1("MuiCard",o)}generateUtilityClasses$1("MuiCard",["root"]);const _excluded$r=["className","raised"],useUtilityClasses$o=o=>{const{classes:i}=o;return composeClasses({root:["root"]},getCardUtilityClass,i)},CardRoot=styled(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(o,i)=>i.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiCard"}),{className:ot,raised:st=!1}=nt,lt=_objectWithoutPropertiesLoose(nt,_excluded$r),ht=_extends$3({},nt,{raised:st}),ft=useUtilityClasses$o(ht);return jsxRuntimeExports.jsx(CardRoot,_extends$3({className:clsx(ft.root,ot),elevation:st?8:void 0,ref:et,ownerState:ht},lt))}),Card$1=Card;function getCardActionAreaUtilityClass(o){return generateUtilityClass$1("MuiCardActionArea",o)}const cardActionAreaClasses=generateUtilityClasses$1("MuiCardActionArea",["root","focusVisible","focusHighlight"]),cardActionAreaClasses$1=cardActionAreaClasses,_excluded$q=["children","className","focusVisibleClassName"],useUtilityClasses$n=o=>{const{classes:i}=o;return composeClasses({root:["root"],focusHighlight:["focusHighlight"]},getCardActionAreaUtilityClass,i)},CardActionAreaRoot=styled(ButtonBase$1,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(o,i)=>i.root})(({theme:o})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${cardActionAreaClasses$1.focusHighlight}`]:{opacity:(o.vars||o).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${cardActionAreaClasses$1.focusVisible} .${cardActionAreaClasses$1.focusHighlight}`]:{opacity:(o.vars||o).palette.action.focusOpacity}})),CardActionAreaFocusHighlight=styled("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(o,i)=>i.focusHighlight})(({theme:o})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:o.transitions.create("opacity",{duration:o.transitions.duration.short})})),CardActionArea=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiCardActionArea"}),{children:ot,className:st,focusVisibleClassName:lt}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$q),ft=nt,St=useUtilityClasses$n(ft);return jsxRuntimeExports.jsxs(CardActionAreaRoot,_extends$3({className:clsx(St.root,st),focusVisibleClassName:clsx(lt,St.focusVisible),ref:et,ownerState:ft},ht,{children:[ot,jsxRuntimeExports.jsx(CardActionAreaFocusHighlight,{className:St.focusHighlight,ownerState:ft})]}))}),CardActionArea$1=CardActionArea;function getCardContentUtilityClass(o){return generateUtilityClass$1("MuiCardContent",o)}generateUtilityClasses$1("MuiCardContent",["root"]);const _excluded$p=["className","component"],useUtilityClasses$m=o=>{const{classes:i}=o;return composeClasses({root:["root"]},getCardContentUtilityClass,i)},CardContentRoot=styled("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(o,i)=>i.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiCardContent"}),{className:ot,component:st="div"}=nt,lt=_objectWithoutPropertiesLoose(nt,_excluded$p),ht=_extends$3({},nt,{component:st}),ft=useUtilityClasses$m(ht);return jsxRuntimeExports.jsx(CardContentRoot,_extends$3({as:st,className:clsx(ft.root,ot),ownerState:ht,ref:et},lt))}),CardContent$1=CardContent;function getSwitchBaseUtilityClass(o){return generateUtilityClass$1("PrivateSwitchBase",o)}generateUtilityClasses$1("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$o=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$l=o=>{const{classes:i,checked:et,disabled:nt,edge:ot}=o,st={root:["root",et&&"checked",nt&&"disabled",ot&&`edge${capitalize(ot)}`],input:["input"]};return composeClasses(st,getSwitchBaseUtilityClass,i)},SwitchBaseRoot=styled(ButtonBase$1)(({ownerState:o})=>_extends$3({padding:9,borderRadius:"50%"},o.edge==="start"&&{marginLeft:o.size==="small"?-3:-12},o.edge==="end"&&{marginRight:o.size==="small"?-3:-12})),SwitchBaseInput=styled("input",{shouldForwardProp:rootShouldForwardProp})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(i,et){const{autoFocus:nt,checked:ot,checkedIcon:st,className:lt,defaultChecked:ht,disabled:ft,disableFocusRipple:St=!1,edge:vt=!1,icon:Rt,id:wt,inputProps:$t,inputRef:Dt,name:Pt,onBlur:Ut,onChange:Ot,onFocus:Lt,readOnly:xt,required:jt=!1,tabIndex:Ht,type:qt,value:Kt}=i,nn=_objectWithoutPropertiesLoose(i,_excluded$o),[Zt,tn]=useControlled({controlled:ot,default:!!ht,name:"SwitchBase",state:"checked"}),dn=useFormControl(),wn=_n=>{Lt&&Lt(_n),dn&&dn.onFocus&&dn.onFocus(_n)},In=_n=>{Ut&&Ut(_n),dn&&dn.onBlur&&dn.onBlur(_n)},Sn=_n=>{if(_n.nativeEvent.defaultPrevented)return;const bn=_n.target.checked;tn(bn),Ot&&Ot(_n,bn)};let Nn=ft;dn&&typeof Nn>"u"&&(Nn=dn.disabled);const Rn=qt==="checkbox"||qt==="radio",Ln=_extends$3({},i,{checked:Zt,disabled:Nn,disableFocusRipple:St,edge:vt}),gn=useUtilityClasses$l(Ln);return jsxRuntimeExports.jsxs(SwitchBaseRoot,_extends$3({component:"span",className:clsx(gn.root,lt),centerRipple:!0,focusRipple:!St,disabled:Nn,tabIndex:null,role:void 0,onFocus:wn,onBlur:In,ownerState:Ln,ref:et},nn,{children:[jsxRuntimeExports.jsx(SwitchBaseInput,_extends$3({autoFocus:nt,checked:ot,defaultChecked:ht,className:gn.input,disabled:Nn,id:Rn?wt:void 0,name:Pt,onChange:Sn,readOnly:xt,ref:Dt,required:jt,ownerState:Ln,tabIndex:Ht,type:qt},qt==="checkbox"&&Kt===void 0?{}:{value:Kt},$t)),Zt?st:Rt]}))}),SwitchBase$1=SwitchBase,CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(o){return generateUtilityClass$1("MuiCheckbox",o)}const checkboxClasses=generateUtilityClasses$1("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),checkboxClasses$1=checkboxClasses,_excluded$n=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses$k=o=>{const{classes:i,indeterminate:et,color:nt,size:ot}=o,st={root:["root",et&&"indeterminate",`color${capitalize(nt)}`,`size${capitalize(ot)}`]},lt=composeClasses(st,getCheckboxUtilityClass,i);return _extends$3({},i,lt)},CheckboxRoot=styled(SwitchBase$1,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,et.indeterminate&&i.indeterminate,i[`size${capitalize(et.size)}`],et.color!=="default"&&i[`color${capitalize(et.color)}`]]}})(({theme:o,ownerState:i})=>_extends$3({color:(o.vars||o).palette.text.secondary},!i.disableRipple&&{"&:hover":{backgroundColor:o.vars?`rgba(${i.color==="default"?o.vars.palette.action.activeChannel:o.vars.palette[i.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:alpha(i.color==="default"?o.palette.action.active:o.palette[i.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},i.color!=="default"&&{[`&.${checkboxClasses$1.checked}, &.${checkboxClasses$1.indeterminate}`]:{color:(o.vars||o).palette[i.color].main},[`&.${checkboxClasses$1.disabled}`]:{color:(o.vars||o).palette.action.disabled}})),defaultCheckedIcon=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(i,et){var nt,ot;const st=useThemeProps({props:i,name:"MuiCheckbox"}),{checkedIcon:lt=defaultCheckedIcon,color:ht="primary",icon:ft=defaultIcon,indeterminate:St=!1,indeterminateIcon:vt=defaultIndeterminateIcon,inputProps:Rt,size:wt="medium",className:$t}=st,Dt=_objectWithoutPropertiesLoose(st,_excluded$n),Pt=St?vt:ft,Ut=St?vt:lt,Ot=_extends$3({},st,{color:ht,indeterminate:St,size:wt}),Lt=useUtilityClasses$k(Ot);return jsxRuntimeExports.jsx(CheckboxRoot,_extends$3({type:"checkbox",inputProps:_extends$3({"data-indeterminate":St},Rt),icon:reactExports.cloneElement(Pt,{fontSize:(nt=Pt.props.fontSize)!=null?nt:wt}),checkedIcon:reactExports.cloneElement(Ut,{fontSize:(ot=Ut.props.fontSize)!=null?ot:wt}),ownerState:Ot,ref:et,className:clsx(Lt.root,$t)},Dt,{classes:Lt}))}),Checkbox$1=Checkbox,Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[`maxWidth${capitalize(String(et.maxWidth))}`],et.fixed&&i.fixed,et.disableGutters&&i.disableGutters]}}),useThemeProps:o=>useThemeProps({props:o,name:"MuiContainer"})}),Container$1=Container;function getModalUtilityClass(o){return generateUtilityClass$1("MuiModal",o)}generateUtilityClasses$1("MuiModal",["root","hidden","backdrop"]);const _excluded$m=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],useUtilityClasses$j=o=>{const{open:i,exited:et,classes:nt}=o;return composeClasses({root:["root",!i&&et&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,nt)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,!et.open&&et.exited&&i.hidden]}})(({theme:o,ownerState:i})=>_extends$3({position:"fixed",zIndex:(o.vars||o).zIndex.modal,right:0,bottom:0,top:0,left:0},!i.open&&i.exited&&{visibility:"hidden"})),ModalBackdrop=styled(Backdrop$1,{name:"MuiModal",slot:"Backdrop",overridesResolver:(o,i)=>i.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(i,et){var nt,ot,st,lt,ht,ft;const St=useThemeProps({name:"MuiModal",props:i}),{BackdropComponent:vt=ModalBackdrop,BackdropProps:Rt,className:wt,closeAfterTransition:$t=!1,children:Dt,container:Pt,component:Ut,components:Ot={},componentsProps:Lt={},disableAutoFocus:xt=!1,disableEnforceFocus:jt=!1,disableEscapeKeyDown:Ht=!1,disablePortal:qt=!1,disableRestoreFocus:Kt=!1,disableScrollLock:nn=!1,hideBackdrop:Zt=!1,keepMounted:tn=!1,onBackdropClick:dn,open:wn,slotProps:In,slots:Sn}=St,Nn=_objectWithoutPropertiesLoose(St,_excluded$m),Rn=_extends$3({},St,{closeAfterTransition:$t,disableAutoFocus:xt,disableEnforceFocus:jt,disableEscapeKeyDown:Ht,disablePortal:qt,disableRestoreFocus:Kt,disableScrollLock:nn,hideBackdrop:Zt,keepMounted:tn}),{getRootProps:Ln,getBackdropProps:gn,getTransitionProps:_n,portalRef:bn,isTopModal:tr,exited:Zn,hasTransition:Pr}=useModal(_extends$3({},Rn,{rootRef:et})),Wn=_extends$3({},Rn,{exited:Zn}),pr=useUtilityClasses$j(Wn),or={};if(Dt.props.tabIndex===void 0&&(or.tabIndex="-1"),Pr){const{onEnter:fr,onExited:Ur}=_n();or.onEnter=fr,or.onExited=Ur}const Qr=(nt=(ot=Sn==null?void 0:Sn.root)!=null?ot:Ot.Root)!=null?nt:ModalRoot,Br=(st=(lt=Sn==null?void 0:Sn.backdrop)!=null?lt:Ot.Backdrop)!=null?st:vt,xr=(ht=In==null?void 0:In.root)!=null?ht:Lt.root,Fo=(ft=In==null?void 0:In.backdrop)!=null?ft:Lt.backdrop,ur=useSlotProps({elementType:Qr,externalSlotProps:xr,externalForwardedProps:Nn,getSlotProps:Ln,additionalProps:{ref:et,as:Ut},ownerState:Wn,className:clsx(wt,xr==null?void 0:xr.className,pr==null?void 0:pr.root,!Wn.open&&Wn.exited&&(pr==null?void 0:pr.hidden))}),Hr=useSlotProps({elementType:Br,externalSlotProps:Fo,additionalProps:Rt,getSlotProps:fr=>gn(_extends$3({},fr,{onClick:Ur=>{dn&&dn(Ur),fr!=null&&fr.onClick&&fr.onClick(Ur)}})),className:clsx(Fo==null?void 0:Fo.className,Rt==null?void 0:Rt.className,pr==null?void 0:pr.backdrop),ownerState:Wn});return!tn&&!wn&&(!Pr||Zn)?null:jsxRuntimeExports.jsx(Portal,{ref:bn,container:Pt,disablePortal:qt,children:jsxRuntimeExports.jsxs(Qr,_extends$3({},ur,{children:[!Zt&&vt?jsxRuntimeExports.jsx(Br,_extends$3({},Hr)):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:jt,disableAutoFocus:xt,disableRestoreFocus:Kt,isEnabled:tr,open:wn,children:reactExports.cloneElement(Dt,or)})]}))})}),Modal$1=Modal,dividerClasses=generateUtilityClasses$1("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),dividerClasses$1=dividerClasses,_excluded$l=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$i=o=>{const{classes:i,disableUnderline:et}=o,ot=composeClasses({root:["root",!et&&"underline"],input:["input"]},getFilledInputUtilityClass,i);return _extends$3({},i,ot)},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[...rootOverridesResolver(o,i),!et.disableUnderline&&i.underline]}})(({theme:o,ownerState:i})=>{var et;const nt=o.palette.mode==="light",ot=nt?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",st=nt?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",lt=nt?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",ht=nt?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _extends$3({position:"relative",backgroundColor:o.vars?o.vars.palette.FilledInput.bg:st,borderTopLeftRadius:(o.vars||o).shape.borderRadius,borderTopRightRadius:(o.vars||o).shape.borderRadius,transition:o.transitions.create("background-color",{duration:o.transitions.duration.shorter,easing:o.transitions.easing.easeOut}),"&:hover":{backgroundColor:o.vars?o.vars.palette.FilledInput.hoverBg:lt,"@media (hover: none)":{backgroundColor:o.vars?o.vars.palette.FilledInput.bg:st}},[`&.${filledInputClasses$1.focused}`]:{backgroundColor:o.vars?o.vars.palette.FilledInput.bg:st},[`&.${filledInputClasses$1.disabled}`]:{backgroundColor:o.vars?o.vars.palette.FilledInput.disabledBg:ht}},!i.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(et=(o.vars||o).palette[i.color||"primary"])==null?void 0:et.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:o.transitions.create("transform",{duration:o.transitions.duration.shorter,easing:o.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses$1.error}`]:{"&::before, &::after":{borderBottomColor:(o.vars||o).palette.error.main}},"&::before":{borderBottom:`1px solid ${o.vars?`rgba(${o.vars.palette.common.onBackgroundChannel} / ${o.vars.opacity.inputUnderline})`:ot}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:o.transitions.create("border-bottom-color",{duration:o.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses$1.disabled}, .${filledInputClasses$1.error}):before`]:{borderBottom:`1px solid ${(o.vars||o).palette.text.primary}`},[`&.${filledInputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}},i.startAdornment&&{paddingLeft:12},i.endAdornment&&{paddingRight:12},i.multiline&&_extends$3({padding:"25px 12px 8px"},i.size==="small"&&{paddingTop:21,paddingBottom:4},i.hiddenLabel&&{paddingTop:16,paddingBottom:17},i.hiddenLabel&&i.size==="small"&&{paddingTop:8,paddingBottom:9}))}),FilledInputInput=styled(InputBaseComponent,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:o,ownerState:i})=>_extends$3({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!o.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:o.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:o.palette.mode==="light"?null:"#fff",caretColor:o.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},o.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[o.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},i.size==="small"&&{paddingTop:21,paddingBottom:4},i.hiddenLabel&&{paddingTop:16,paddingBottom:17},i.startAdornment&&{paddingLeft:0},i.endAdornment&&{paddingRight:0},i.hiddenLabel&&i.size==="small"&&{paddingTop:8,paddingBottom:9},i.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),FilledInput=reactExports.forwardRef(function(i,et){var nt,ot,st,lt;const ht=useThemeProps({props:i,name:"MuiFilledInput"}),{components:ft={},componentsProps:St,fullWidth:vt=!1,inputComponent:Rt="input",multiline:wt=!1,slotProps:$t,slots:Dt={},type:Pt="text"}=ht,Ut=_objectWithoutPropertiesLoose(ht,_excluded$l),Ot=_extends$3({},ht,{fullWidth:vt,inputComponent:Rt,multiline:wt,type:Pt}),Lt=useUtilityClasses$i(ht),xt={root:{ownerState:Ot},input:{ownerState:Ot}},jt=$t??St?deepmerge(xt,$t??St):xt,Ht=(nt=(ot=Dt.root)!=null?ot:ft.Root)!=null?nt:FilledInputRoot,qt=(st=(lt=Dt.input)!=null?lt:ft.Input)!=null?st:FilledInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends$3({slots:{root:Ht,input:qt},componentsProps:jt,fullWidth:vt,inputComponent:Rt,multiline:wt,ref:et,type:Pt},Ut,{classes:Lt}))});FilledInput.muiName="Input";const FilledInput$1=FilledInput;function getFormControlUtilityClasses(o){return generateUtilityClass$1("MuiFormControl",o)}generateUtilityClasses$1("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const _excluded$k=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],useUtilityClasses$h=o=>{const{classes:i,margin:et,fullWidth:nt}=o,ot={root:["root",et!=="none"&&`margin${capitalize(et)}`,nt&&"fullWidth"]};return composeClasses(ot,getFormControlUtilityClasses,i)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:o},i)=>_extends$3({},i.root,i[`margin${capitalize(o.margin)}`],o.fullWidth&&i.fullWidth)})(({ownerState:o})=>_extends$3({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},o.margin==="normal"&&{marginTop:16,marginBottom:8},o.margin==="dense"&&{marginTop:8,marginBottom:4},o.fullWidth&&{width:"100%"})),FormControl=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiFormControl"}),{children:ot,className:st,color:lt="primary",component:ht="div",disabled:ft=!1,error:St=!1,focused:vt,fullWidth:Rt=!1,hiddenLabel:wt=!1,margin:$t="none",required:Dt=!1,size:Pt="medium",variant:Ut="outlined"}=nt,Ot=_objectWithoutPropertiesLoose(nt,_excluded$k),Lt=_extends$3({},nt,{color:lt,component:ht,disabled:ft,error:St,fullWidth:Rt,hiddenLabel:wt,margin:$t,required:Dt,size:Pt,variant:Ut}),xt=useUtilityClasses$h(Lt),[jt,Ht]=reactExports.useState(()=>{let In=!1;return ot&&reactExports.Children.forEach(ot,Sn=>{if(!isMuiElement(Sn,["Input","Select"]))return;const Nn=isMuiElement(Sn,["Select"])?Sn.props.input:Sn;Nn&&isAdornedStart(Nn.props)&&(In=!0)}),In}),[qt,Kt]=reactExports.useState(()=>{let In=!1;return ot&&reactExports.Children.forEach(ot,Sn=>{isMuiElement(Sn,["Input","Select"])&&(isFilled(Sn.props,!0)||isFilled(Sn.props.inputProps,!0))&&(In=!0)}),In}),[nn,Zt]=reactExports.useState(!1);ft&&nn&&Zt(!1);const tn=vt!==void 0&&!ft?vt:nn;let dn;const wn=reactExports.useMemo(()=>({adornedStart:jt,setAdornedStart:Ht,color:lt,disabled:ft,error:St,filled:qt,focused:tn,fullWidth:Rt,hiddenLabel:wt,size:Pt,onBlur:()=>{Zt(!1)},onEmpty:()=>{Kt(!1)},onFilled:()=>{Kt(!0)},onFocus:()=>{Zt(!0)},registerEffect:dn,required:Dt,variant:Ut}),[jt,lt,ft,St,qt,tn,Rt,wt,dn,Dt,Pt,Ut]);return jsxRuntimeExports.jsx(FormControlContext$1.Provider,{value:wn,children:jsxRuntimeExports.jsx(FormControlRoot,_extends$3({as:ht,ownerState:Lt,className:clsx(xt.root,st),ref:et},Ot,{children:ot}))})}),FormControl$1=FormControl,Stack=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root",overridesResolver:(o,i)=>i.root}),useThemeProps:o=>useThemeProps({props:o,name:"MuiStack"})}),Stack$1=Stack;function getFormControlLabelUtilityClasses(o){return generateUtilityClass$1("MuiFormControlLabel",o)}const formControlLabelClasses=generateUtilityClasses$1("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),formControlLabelClasses$1=formControlLabelClasses,_excluded$j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],useUtilityClasses$g=o=>{const{classes:i,disabled:et,labelPlacement:nt,error:ot,required:st}=o,lt={root:["root",et&&"disabled",`labelPlacement${capitalize(nt)}`,ot&&"error",st&&"required"],label:["label",et&&"disabled"],asterisk:["asterisk",ot&&"error"]};return composeClasses(lt,getFormControlLabelUtilityClasses,i)},FormControlLabelRoot=styled("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[{[`& .${formControlLabelClasses$1.label}`]:i.label},i.root,i[`labelPlacement${capitalize(et.labelPlacement)}`]]}})(({theme:o,ownerState:i})=>_extends$3({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses$1.disabled}`]:{cursor:"default"}},i.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},i.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},i.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${formControlLabelClasses$1.label}`]:{[`&.${formControlLabelClasses$1.disabled}`]:{color:(o.vars||o).palette.text.disabled}}})),AsteriskComponent$1=styled("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(o,i)=>i.asterisk})(({theme:o})=>({[`&.${formControlLabelClasses$1.error}`]:{color:(o.vars||o).palette.error.main}})),FormControlLabel=reactExports.forwardRef(function(i,et){var nt,ot;const st=useThemeProps({props:i,name:"MuiFormControlLabel"}),{className:lt,componentsProps:ht={},control:ft,disabled:St,disableTypography:vt,label:Rt,labelPlacement:wt="end",required:$t,slotProps:Dt={}}=st,Pt=_objectWithoutPropertiesLoose(st,_excluded$j),Ut=useFormControl(),Ot=(nt=St??ft.props.disabled)!=null?nt:Ut==null?void 0:Ut.disabled,Lt=$t??ft.props.required,xt={disabled:Ot,required:Lt};["checked","name","onChange","value","inputRef"].forEach(Zt=>{typeof ft.props[Zt]>"u"&&typeof st[Zt]<"u"&&(xt[Zt]=st[Zt])});const jt=formControlState({props:st,muiFormControl:Ut,states:["error"]}),Ht=_extends$3({},st,{disabled:Ot,labelPlacement:wt,required:Lt,error:jt.error}),qt=useUtilityClasses$g(Ht),Kt=(ot=Dt.typography)!=null?ot:ht.typography;let nn=Rt;return nn!=null&&nn.type!==Typography$1&&!vt&&(nn=jsxRuntimeExports.jsx(Typography$1,_extends$3({component:"span"},Kt,{className:clsx(qt.label,Kt==null?void 0:Kt.className),children:nn}))),jsxRuntimeExports.jsxs(FormControlLabelRoot,_extends$3({className:clsx(qt.root,lt),ownerState:Ht,ref:et},Pt,{children:[reactExports.cloneElement(ft,xt),Lt?jsxRuntimeExports.jsxs(Stack$1,{display:"block",children:[nn,jsxRuntimeExports.jsxs(AsteriskComponent$1,{ownerState:Ht,"aria-hidden":!0,className:qt.asterisk,children:[" ","*"]})]}):nn]}))}),FormControlLabel$1=FormControlLabel;function getFormHelperTextUtilityClasses(o){return generateUtilityClass$1("MuiFormHelperText",o)}const formHelperTextClasses=generateUtilityClasses$1("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),formHelperTextClasses$1=formHelperTextClasses;var _span$3;const _excluded$i=["children","className","component","disabled","error","filled","focused","margin","required","variant"],useUtilityClasses$f=o=>{const{classes:i,contained:et,size:nt,disabled:ot,error:st,filled:lt,focused:ht,required:ft}=o,St={root:["root",ot&&"disabled",st&&"error",nt&&`size${capitalize(nt)}`,et&&"contained",ht&&"focused",lt&&"filled",ft&&"required"]};return composeClasses(St,getFormHelperTextUtilityClasses,i)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,et.size&&i[`size${capitalize(et.size)}`],et.contained&&i.contained,et.filled&&i.filled]}})(({theme:o,ownerState:i})=>_extends$3({color:(o.vars||o).palette.text.secondary},o.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses$1.disabled}`]:{color:(o.vars||o).palette.text.disabled},[`&.${formHelperTextClasses$1.error}`]:{color:(o.vars||o).palette.error.main}},i.size==="small"&&{marginTop:4},i.contained&&{marginLeft:14,marginRight:14})),FormHelperText=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiFormHelperText"}),{children:ot,className:st,component:lt="p"}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$i),ft=useFormControl(),St=formControlState({props:nt,muiFormControl:ft,states:["variant","size","disabled","error","filled","focused","required"]}),vt=_extends$3({},nt,{component:lt,contained:St.variant==="filled"||St.variant==="outlined",variant:St.variant,size:St.size,disabled:St.disabled,error:St.error,filled:St.filled,focused:St.focused,required:St.required}),Rt=useUtilityClasses$f(vt);return jsxRuntimeExports.jsx(FormHelperTextRoot,_extends$3({as:lt,ownerState:vt,className:clsx(Rt.root,st),ref:et},ht,{children:ot===" "?_span$3||(_span$3=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"})):ot}))}),FormHelperText$1=FormHelperText;function getFormLabelUtilityClasses(o){return generateUtilityClass$1("MuiFormLabel",o)}const formLabelClasses=generateUtilityClasses$1("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),formLabelClasses$1=formLabelClasses,_excluded$h=["children","className","color","component","disabled","error","filled","focused","required"],useUtilityClasses$e=o=>{const{classes:i,color:et,focused:nt,disabled:ot,error:st,filled:lt,required:ht}=o,ft={root:["root",`color${capitalize(et)}`,ot&&"disabled",st&&"error",lt&&"filled",nt&&"focused",ht&&"required"],asterisk:["asterisk",st&&"error"]};return composeClasses(ft,getFormLabelUtilityClasses,i)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:o},i)=>_extends$3({},i.root,o.color==="secondary"&&i.colorSecondary,o.filled&&i.filled)})(({theme:o,ownerState:i})=>_extends$3({color:(o.vars||o).palette.text.secondary},o.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${formLabelClasses$1.focused}`]:{color:(o.vars||o).palette[i.color].main},[`&.${formLabelClasses$1.disabled}`]:{color:(o.vars||o).palette.text.disabled},[`&.${formLabelClasses$1.error}`]:{color:(o.vars||o).palette.error.main}})),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(o,i)=>i.asterisk})(({theme:o})=>({[`&.${formLabelClasses$1.error}`]:{color:(o.vars||o).palette.error.main}})),FormLabel=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiFormLabel"}),{children:ot,className:st,component:lt="label"}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$h),ft=useFormControl(),St=formControlState({props:nt,muiFormControl:ft,states:["color","required","focused","disabled","error","filled"]}),vt=_extends$3({},nt,{color:St.color||"primary",component:lt,disabled:St.disabled,error:St.error,filled:St.filled,focused:St.focused,required:St.required}),Rt=useUtilityClasses$e(vt);return jsxRuntimeExports.jsxs(FormLabelRoot,_extends$3({as:lt,ownerState:vt,className:clsx(Rt.root,st),ref:et},ht,{children:[ot,St.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:vt,"aria-hidden":!0,className:Rt.asterisk,children:[" ","*"]})]}))}),FormLabel$1=FormLabel,_excluded$g=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function getScale(o){return`scale(${o}, ${o**2})`}const styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(i,et){const{addEndListener:nt,appear:ot=!0,children:st,easing:lt,in:ht,onEnter:ft,onEntered:St,onEntering:vt,onExit:Rt,onExited:wt,onExiting:$t,style:Dt,timeout:Pt="auto",TransitionComponent:Ut=Transition$1}=i,Ot=_objectWithoutPropertiesLoose(i,_excluded$g),Lt=reactExports.useRef(),xt=reactExports.useRef(),jt=useTheme(),Ht=reactExports.useRef(null),qt=useForkRef(Ht,st.ref,et),Kt=Nn=>Rn=>{if(Nn){const Ln=Ht.current;Rn===void 0?Nn(Ln):Nn(Ln,Rn)}},nn=Kt(vt),Zt=Kt((Nn,Rn)=>{reflow(Nn);const{duration:Ln,delay:gn,easing:_n}=getTransitionProps({style:Dt,timeout:Pt,easing:lt},{mode:"enter"});let bn;Pt==="auto"?(bn=jt.transitions.getAutoHeightDuration(Nn.clientHeight),xt.current=bn):bn=Ln,Nn.style.transition=[jt.transitions.create("opacity",{duration:bn,delay:gn}),jt.transitions.create("transform",{duration:isWebKit154?bn:bn*.666,delay:gn,easing:_n})].join(","),ft&&ft(Nn,Rn)}),tn=Kt(St),dn=Kt($t),wn=Kt(Nn=>{const{duration:Rn,delay:Ln,easing:gn}=getTransitionProps({style:Dt,timeout:Pt,easing:lt},{mode:"exit"});let _n;Pt==="auto"?(_n=jt.transitions.getAutoHeightDuration(Nn.clientHeight),xt.current=_n):_n=Rn,Nn.style.transition=[jt.transitions.create("opacity",{duration:_n,delay:Ln}),jt.transitions.create("transform",{duration:isWebKit154?_n:_n*.666,delay:isWebKit154?Ln:Ln||_n*.333,easing:gn})].join(","),Nn.style.opacity=0,Nn.style.transform=getScale(.75),Rt&&Rt(Nn)}),In=Kt(wt),Sn=Nn=>{Pt==="auto"&&(Lt.current=setTimeout(Nn,xt.current||0)),nt&&nt(Ht.current,Nn)};return reactExports.useEffect(()=>()=>{clearTimeout(Lt.current)},[]),jsxRuntimeExports.jsx(Ut,_extends$3({appear:ot,in:ht,nodeRef:Ht,onEnter:Zt,onEntered:tn,onEntering:nn,onExit:wn,onExited:In,onExiting:dn,addEndListener:Sn,timeout:Pt==="auto"?null:Pt},Ot,{children:(Nn,Rn)=>reactExports.cloneElement(st,_extends$3({style:_extends$3({opacity:0,transform:getScale(.75),visibility:Nn==="exited"&&!ht?"hidden":void 0},styles[Nn],Dt,st.props.style),ref:qt},Rn))}))});Grow.muiSupportAuto=!0;const Grow$1=Grow,_excluded$f=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$d=o=>{const{classes:i,disableUnderline:et}=o,ot=composeClasses({root:["root",!et&&"underline"],input:["input"]},getInputUtilityClass,i);return _extends$3({},i,ot)},InputRoot=styled(InputBaseRoot,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiInput",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[...rootOverridesResolver(o,i),!et.disableUnderline&&i.underline]}})(({theme:o,ownerState:i})=>{let nt=o.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return o.vars&&(nt=`rgba(${o.vars.palette.common.onBackgroundChannel} / ${o.vars.opacity.inputUnderline})`),_extends$3({position:"relative"},i.formControl&&{"label + &":{marginTop:16}},!i.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(o.vars||o).palette[i.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:o.transitions.create("transform",{duration:o.transitions.duration.shorter,easing:o.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses$1.error}`]:{"&::before, &::after":{borderBottomColor:(o.vars||o).palette.error.main}},"&::before":{borderBottom:`1px solid ${nt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:o.transitions.create("border-bottom-color",{duration:o.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses$1.disabled}, .${inputClasses$1.error}):before`]:{borderBottom:`2px solid ${(o.vars||o).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${nt}`}},[`&.${inputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}})}),InputInput=styled(InputBaseComponent,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(i,et){var nt,ot,st,lt;const ht=useThemeProps({props:i,name:"MuiInput"}),{disableUnderline:ft,components:St={},componentsProps:vt,fullWidth:Rt=!1,inputComponent:wt="input",multiline:$t=!1,slotProps:Dt,slots:Pt={},type:Ut="text"}=ht,Ot=_objectWithoutPropertiesLoose(ht,_excluded$f),Lt=useUtilityClasses$d(ht),jt={root:{ownerState:{disableUnderline:ft}}},Ht=Dt??vt?deepmerge(Dt??vt,jt):jt,qt=(nt=(ot=Pt.root)!=null?ot:St.Root)!=null?nt:InputRoot,Kt=(st=(lt=Pt.input)!=null?lt:St.Input)!=null?st:InputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends$3({slots:{root:qt,input:Kt},slotProps:Ht,fullWidth:Rt,inputComponent:wt,multiline:$t,ref:et,type:Ut},Ot,{classes:Lt}))});Input.muiName="Input";const Input$1=Input;function getInputAdornmentUtilityClass(o){return generateUtilityClass$1("MuiInputAdornment",o)}const inputAdornmentClasses=generateUtilityClasses$1("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),inputAdornmentClasses$1=inputAdornmentClasses;var _span$2;const _excluded$e=["children","className","component","disablePointerEvents","disableTypography","position","variant"],overridesResolver$1=(o,i)=>{const{ownerState:et}=o;return[i.root,i[`position${capitalize(et.position)}`],et.disablePointerEvents===!0&&i.disablePointerEvents,i[et.variant]]},useUtilityClasses$c=o=>{const{classes:i,disablePointerEvents:et,hiddenLabel:nt,position:ot,size:st,variant:lt}=o,ht={root:["root",et&&"disablePointerEvents",ot&&`position${capitalize(ot)}`,lt,nt&&"hiddenLabel",st&&`size${capitalize(st)}`]};return composeClasses(ht,getInputAdornmentUtilityClass,i)},InputAdornmentRoot=styled("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:overridesResolver$1})(({theme:o,ownerState:i})=>_extends$3({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(o.vars||o).palette.action.active},i.variant==="filled"&&{[`&.${inputAdornmentClasses$1.positionStart}&:not(.${inputAdornmentClasses$1.hiddenLabel})`]:{marginTop:16}},i.position==="start"&&{marginRight:8},i.position==="end"&&{marginLeft:8},i.disablePointerEvents===!0&&{pointerEvents:"none"})),InputAdornment=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiInputAdornment"}),{children:ot,className:st,component:lt="div",disablePointerEvents:ht=!1,disableTypography:ft=!1,position:St,variant:vt}=nt,Rt=_objectWithoutPropertiesLoose(nt,_excluded$e),wt=useFormControl()||{};let $t=vt;vt&&wt.variant,wt&&!$t&&($t=wt.variant);const Dt=_extends$3({},nt,{hiddenLabel:wt.hiddenLabel,size:wt.size,disablePointerEvents:ht,position:St,variant:$t}),Pt=useUtilityClasses$c(Dt);return jsxRuntimeExports.jsx(FormControlContext$1.Provider,{value:null,children:jsxRuntimeExports.jsx(InputAdornmentRoot,_extends$3({as:lt,ownerState:Dt,className:clsx(Pt.root,st),ref:et},Rt,{children:typeof ot=="string"&&!ft?jsxRuntimeExports.jsx(Typography$1,{color:"text.secondary",children:ot}):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[St==="start"?_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"})):null,ot]})}))})}),InputAdornment$1=InputAdornment;function getInputLabelUtilityClasses(o){return generateUtilityClass$1("MuiInputLabel",o)}generateUtilityClasses$1("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const _excluded$d=["disableAnimation","margin","shrink","variant","className"],useUtilityClasses$b=o=>{const{classes:i,formControl:et,size:nt,shrink:ot,disableAnimation:st,variant:lt,required:ht}=o,ft={root:["root",et&&"formControl",!st&&"animated",ot&&"shrink",nt&&nt!=="normal"&&`size${capitalize(nt)}`,lt],asterisk:[ht&&"asterisk"]},St=composeClasses(ft,getInputLabelUtilityClasses,i);return _extends$3({},i,St)},InputLabelRoot=styled(FormLabel$1,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[{[`& .${formLabelClasses$1.asterisk}`]:i.asterisk},i.root,et.formControl&&i.formControl,et.size==="small"&&i.sizeSmall,et.shrink&&i.shrink,!et.disableAnimation&&i.animated,et.focused&&i.focused,i[et.variant]]}})(({theme:o,ownerState:i})=>_extends$3({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},i.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},i.size==="small"&&{transform:"translate(0, 17px) scale(1)"},i.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!i.disableAnimation&&{transition:o.transitions.create(["color","transform","max-width"],{duration:o.transitions.duration.shorter,easing:o.transitions.easing.easeOut})},i.variant==="filled"&&_extends$3({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},i.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},i.shrink&&_extends$3({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},i.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),i.variant==="outlined"&&_extends$3({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},i.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},i.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),InputLabel=reactExports.forwardRef(function(i,et){const nt=useThemeProps({name:"MuiInputLabel",props:i}),{disableAnimation:ot=!1,shrink:st,className:lt}=nt,ht=_objectWithoutPropertiesLoose(nt,_excluded$d),ft=useFormControl();let St=st;typeof St>"u"&&ft&&(St=ft.filled||ft.focused||ft.adornedStart);const vt=formControlState({props:nt,muiFormControl:ft,states:["size","variant","required","focused"]}),Rt=_extends$3({},nt,{disableAnimation:ot,formControl:ft,shrink:St,size:vt.size,variant:vt.variant,required:vt.required,focused:vt.focused}),wt=useUtilityClasses$b(Rt);return jsxRuntimeExports.jsx(InputLabelRoot,_extends$3({"data-shrink":St,ownerState:Rt,ref:et,className:clsx(wt.root,lt)},ht,{classes:wt}))}),InputLabel$1=InputLabel;function getLinkUtilityClass(o){return generateUtilityClass$1("MuiLink",o)}const linkClasses=generateUtilityClasses$1("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),linkClasses$1=linkClasses,colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=o=>colorTransformations[o]||o,getTextDecoration=({theme:o,ownerState:i})=>{const et=transformDeprecatedColors(i.color),nt=getPath(o,`palette.${et}`,!1)||i.color,ot=getPath(o,`palette.${et}Channel`);return"vars"in o&&ot?`rgba(${ot} / 0.4)`:alpha(nt,.4)},_excluded$c=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],useUtilityClasses$a=o=>{const{classes:i,component:et,focusVisible:nt,underline:ot}=o,st={root:["root",`underline${capitalize(ot)}`,et==="button"&&"button",nt&&"focusVisible"]};return composeClasses(st,getLinkUtilityClass,i)},LinkRoot=styled(Typography$1,{name:"MuiLink",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,i[`underline${capitalize(et.underline)}`],et.component==="button"&&i.button]}})(({theme:o,ownerState:i})=>_extends$3({},i.underline==="none"&&{textDecoration:"none"},i.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},i.underline==="always"&&_extends$3({textDecoration:"underline"},i.color!=="inherit"&&{textDecorationColor:getTextDecoration({theme:o,ownerState:i})},{"&:hover":{textDecorationColor:"inherit"}}),i.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses$1.focusVisible}`]:{outline:"auto"}})),Link=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiLink"}),{className:ot,color:st="primary",component:lt="a",onBlur:ht,onFocus:ft,TypographyClasses:St,underline:vt="always",variant:Rt="inherit",sx:wt}=nt,$t=_objectWithoutPropertiesLoose(nt,_excluded$c),{isFocusVisibleRef:Dt,onBlur:Pt,onFocus:Ut,ref:Ot}=useIsFocusVisible(),[Lt,xt]=reactExports.useState(!1),jt=useForkRef(et,Ot),Ht=Zt=>{Pt(Zt),Dt.current===!1&&xt(!1),ht&&ht(Zt)},qt=Zt=>{Ut(Zt),Dt.current===!0&&xt(!0),ft&&ft(Zt)},Kt=_extends$3({},nt,{color:st,component:lt,focusVisible:Lt,underline:vt,variant:Rt}),nn=useUtilityClasses$a(Kt);return jsxRuntimeExports.jsx(LinkRoot,_extends$3({color:st,className:clsx(nn.root,ot),classes:St,component:lt,onBlur:Ht,onFocus:qt,ref:jt,ownerState:Kt,variant:Rt,sx:[...Object.keys(colorTransformations).includes(st)?[]:[{color:st}],...Array.isArray(wt)?wt:[wt]]},$t))}),Link$1=Link,ListContext=reactExports.createContext({}),ListContext$1=ListContext;function getListUtilityClass(o){return generateUtilityClass$1("MuiList",o)}generateUtilityClasses$1("MuiList",["root","padding","dense","subheader"]);const _excluded$b=["children","className","component","dense","disablePadding","subheader"],useUtilityClasses$9=o=>{const{classes:i,disablePadding:et,dense:nt,subheader:ot}=o;return composeClasses({root:["root",!et&&"padding",nt&&"dense",ot&&"subheader"]},getListUtilityClass,i)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.root,!et.disablePadding&&i.padding,et.dense&&i.dense,et.subheader&&i.subheader]}})(({ownerState:o})=>_extends$3({listStyle:"none",margin:0,padding:0,position:"relative"},!o.disablePadding&&{paddingTop:8,paddingBottom:8},o.subheader&&{paddingTop:0})),List=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiList"}),{children:ot,className:st,component:lt="ul",dense:ht=!1,disablePadding:ft=!1,subheader:St}=nt,vt=_objectWithoutPropertiesLoose(nt,_excluded$b),Rt=reactExports.useMemo(()=>({dense:ht}),[ht]),wt=_extends$3({},nt,{component:lt,dense:ht,disablePadding:ft}),$t=useUtilityClasses$9(wt);return jsxRuntimeExports.jsx(ListContext$1.Provider,{value:Rt,children:jsxRuntimeExports.jsxs(ListRoot,_extends$3({as:lt,className:clsx($t.root,st),ref:et,ownerState:wt},vt,{children:[St,ot]}))})}),List$1=List,listItemIconClasses=generateUtilityClasses$1("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemIconClasses$1=listItemIconClasses,listItemTextClasses=generateUtilityClasses$1("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),listItemTextClasses$1=listItemTextClasses,_excluded$a=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function nextItem(o,i,et){return o===i?o.firstChild:i&&i.nextElementSibling?i.nextElementSibling:et?null:o.firstChild}function previousItem(o,i,et){return o===i?et?o.firstChild:o.lastChild:i&&i.previousElementSibling?i.previousElementSibling:et?null:o.lastChild}function textCriteriaMatches(o,i){if(i===void 0)return!0;let et=o.innerText;return et===void 0&&(et=o.textContent),et=et.trim().toLowerCase(),et.length===0?!1:i.repeating?et[0]===i.keys[0]:et.indexOf(i.keys.join(""))===0}function moveFocus(o,i,et,nt,ot,st){let lt=!1,ht=ot(o,i,i?et:!1);for(;ht;){if(ht===o.firstChild){if(lt)return!1;lt=!0}const ft=nt?!1:ht.disabled||ht.getAttribute("aria-disabled")==="true";if(!ht.hasAttribute("tabindex")||!textCriteriaMatches(ht,st)||ft)ht=ot(o,ht,et);else return ht.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(i,et){const{actions:nt,autoFocus:ot=!1,autoFocusItem:st=!1,children:lt,className:ht,disabledItemsFocusable:ft=!1,disableListWrap:St=!1,onKeyDown:vt,variant:Rt="selectedMenu"}=i,wt=_objectWithoutPropertiesLoose(i,_excluded$a),$t=reactExports.useRef(null),Dt=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{ot&&$t.current.focus()},[ot]),reactExports.useImperativeHandle(nt,()=>({adjustStyleForScrollbar:(xt,jt)=>{const Ht=!$t.current.style.width;if(xt.clientHeight<$t.current.clientHeight&&Ht){const qt=`${getScrollbarSize(ownerDocument(xt))}px`;$t.current.style[jt.direction==="rtl"?"paddingLeft":"paddingRight"]=qt,$t.current.style.width=`calc(100% + ${qt})`}return $t.current}}),[]);const Pt=xt=>{const jt=$t.current,Ht=xt.key,qt=ownerDocument(jt).activeElement;if(Ht==="ArrowDown")xt.preventDefault(),moveFocus(jt,qt,St,ft,nextItem);else if(Ht==="ArrowUp")xt.preventDefault(),moveFocus(jt,qt,St,ft,previousItem);else if(Ht==="Home")xt.preventDefault(),moveFocus(jt,null,St,ft,nextItem);else if(Ht==="End")xt.preventDefault(),moveFocus(jt,null,St,ft,previousItem);else if(Ht.length===1){const Kt=Dt.current,nn=Ht.toLowerCase(),Zt=performance.now();Kt.keys.length>0&&(Zt-Kt.lastTime>500?(Kt.keys=[],Kt.repeating=!0,Kt.previousKeyMatched=!0):Kt.repeating&&nn!==Kt.keys[0]&&(Kt.repeating=!1)),Kt.lastTime=Zt,Kt.keys.push(nn);const tn=qt&&!Kt.repeating&&textCriteriaMatches(qt,Kt);Kt.previousKeyMatched&&(tn||moveFocus(jt,qt,!1,ft,nextItem,Kt))?xt.preventDefault():Kt.previousKeyMatched=!1}vt&&vt(xt)},Ut=useForkRef($t,et);let Ot=-1;reactExports.Children.forEach(lt,(xt,jt)=>{if(!reactExports.isValidElement(xt)){Ot===jt&&(Ot+=1,Ot>=lt.length&&(Ot=-1));return}xt.props.disabled||(Rt==="selectedMenu"&&xt.props.selected||Ot===-1)&&(Ot=jt),Ot===jt&&(xt.props.disabled||xt.props.muiSkipListHighlight||xt.type.muiSkipListHighlight)&&(Ot+=1,Ot>=lt.length&&(Ot=-1))});const Lt=reactExports.Children.map(lt,(xt,jt)=>{if(jt===Ot){const Ht={};return st&&(Ht.autoFocus=!0),xt.props.tabIndex===void 0&&Rt==="selectedMenu"&&(Ht.tabIndex=0),reactExports.cloneElement(xt,Ht)}return xt});return jsxRuntimeExports.jsx(List$1,_extends$3({role:"menu",ref:Ut,className:ht,onKeyDown:Pt,tabIndex:ot?0:-1},wt,{children:Lt}))}),MenuList$1=MenuList;function getPopoverUtilityClass(o){return generateUtilityClass$1("MuiPopover",o)}generateUtilityClasses$1("MuiPopover",["root","paper"]);const _excluded$9=["onEntering"],_excluded2$2=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],_excluded3=["slotProps"];function getOffsetTop(o,i){let et=0;return typeof i=="number"?et=i:i==="center"?et=o.height/2:i==="bottom"&&(et=o.height),et}function getOffsetLeft(o,i){let et=0;return typeof i=="number"?et=i:i==="center"?et=o.width/2:i==="right"&&(et=o.width),et}function getTransformOriginValue(o){return[o.horizontal,o.vertical].map(i=>typeof i=="number"?`${i}px`:i).join(" ")}function resolveAnchorEl(o){return typeof o=="function"?o():o}const useUtilityClasses$8=o=>{const{classes:i}=o;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,i)},PopoverRoot=styled(Modal$1,{name:"MuiPopover",slot:"Root",overridesResolver:(o,i)=>i.root})({}),PopoverPaper=styled(Paper$1,{name:"MuiPopover",slot:"Paper",overridesResolver:(o,i)=>i.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(i,et){var nt,ot,st;const lt=useThemeProps({props:i,name:"MuiPopover"}),{action:ht,anchorEl:ft,anchorOrigin:St={vertical:"top",horizontal:"left"},anchorPosition:vt,anchorReference:Rt="anchorEl",children:wt,className:$t,container:Dt,elevation:Pt=8,marginThreshold:Ut=16,open:Ot,PaperProps:Lt={},slots:xt,slotProps:jt,transformOrigin:Ht={vertical:"top",horizontal:"left"},TransitionComponent:qt=Grow$1,transitionDuration:Kt="auto",TransitionProps:{onEntering:nn}={},disableScrollLock:Zt=!1}=lt,tn=_objectWithoutPropertiesLoose(lt.TransitionProps,_excluded$9),dn=_objectWithoutPropertiesLoose(lt,_excluded2$2),wn=(nt=jt==null?void 0:jt.paper)!=null?nt:Lt,In=reactExports.useRef(),Sn=useForkRef(In,wn.ref),Nn=_extends$3({},lt,{anchorOrigin:St,anchorReference:Rt,elevation:Pt,marginThreshold:Ut,externalPaperSlotProps:wn,transformOrigin:Ht,TransitionComponent:qt,transitionDuration:Kt,TransitionProps:tn}),Rn=useUtilityClasses$8(Nn),Ln=reactExports.useCallback(()=>{if(Rt==="anchorPosition")return vt;const fr=resolveAnchorEl(ft),Cr=(fr&&fr.nodeType===1?fr:ownerDocument(In.current).body).getBoundingClientRect();return{top:Cr.top+getOffsetTop(Cr,St.vertical),left:Cr.left+getOffsetLeft(Cr,St.horizontal)}},[ft,St.horizontal,St.vertical,vt,Rt]),gn=reactExports.useCallback(fr=>({vertical:getOffsetTop(fr,Ht.vertical),horizontal:getOffsetLeft(fr,Ht.horizontal)}),[Ht.horizontal,Ht.vertical]),_n=reactExports.useCallback(fr=>{const Ur={width:fr.offsetWidth,height:fr.offsetHeight},Cr=gn(Ur);if(Rt==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Cr)};const Es=Ln();let as=Es.top-Cr.vertical,co=Es.left-Cr.horizontal;const cs=as+Ur.height,So=co+Ur.width,gr=ownerWindow(resolveAnchorEl(ft)),go=gr.innerHeight-Ut,No=gr.innerWidth-Ut;if(Ut!==null&&as<Ut){const Lr=as-Ut;as-=Lr,Cr.vertical+=Lr}else if(Ut!==null&&cs>go){const Lr=cs-go;as-=Lr,Cr.vertical+=Lr}if(Ut!==null&&co<Ut){const Lr=co-Ut;co-=Lr,Cr.horizontal+=Lr}else if(So>No){const Lr=So-No;co-=Lr,Cr.horizontal+=Lr}return{top:`${Math.round(as)}px`,left:`${Math.round(co)}px`,transformOrigin:getTransformOriginValue(Cr)}},[ft,Rt,Ln,gn,Ut]),[bn,tr]=reactExports.useState(Ot),Zn=reactExports.useCallback(()=>{const fr=In.current;if(!fr)return;const Ur=_n(fr);Ur.top!==null&&(fr.style.top=Ur.top),Ur.left!==null&&(fr.style.left=Ur.left),fr.style.transformOrigin=Ur.transformOrigin,tr(!0)},[_n]);reactExports.useEffect(()=>(Zt&&window.addEventListener("scroll",Zn),()=>window.removeEventListener("scroll",Zn)),[ft,Zt,Zn]);const Pr=(fr,Ur)=>{nn&&nn(fr,Ur),Zn()},Wn=()=>{tr(!1)};reactExports.useEffect(()=>{Ot&&Zn()}),reactExports.useImperativeHandle(ht,()=>Ot?{updatePosition:()=>{Zn()}}:null,[Ot,Zn]),reactExports.useEffect(()=>{if(!Ot)return;const fr=debounce$1(()=>{Zn()}),Ur=ownerWindow(ft);return Ur.addEventListener("resize",fr),()=>{fr.clear(),Ur.removeEventListener("resize",fr)}},[ft,Ot,Zn]);let pr=Kt;Kt==="auto"&&!qt.muiSupportAuto&&(pr=void 0);const or=Dt||(ft?ownerDocument(resolveAnchorEl(ft)).body:void 0),Qr=(ot=xt==null?void 0:xt.root)!=null?ot:PopoverRoot,Br=(st=xt==null?void 0:xt.paper)!=null?st:PopoverPaper,xr=useSlotProps({elementType:Br,externalSlotProps:_extends$3({},wn,{style:bn?wn.style:_extends$3({},wn.style,{opacity:0})}),additionalProps:{elevation:Pt,ref:Sn},ownerState:Nn,className:clsx(Rn.paper,wn==null?void 0:wn.className)}),Fo=useSlotProps({elementType:Qr,externalSlotProps:(jt==null?void 0:jt.root)||{},externalForwardedProps:dn,additionalProps:{ref:et,slotProps:{backdrop:{invisible:!0}},container:or,open:Ot},ownerState:Nn,className:clsx(Rn.root,$t)}),{slotProps:ur}=Fo,Hr=_objectWithoutPropertiesLoose(Fo,_excluded3);return jsxRuntimeExports.jsx(Qr,_extends$3({},Hr,!isHostComponent(Qr)&&{slotProps:ur,disableScrollLock:Zt},{children:jsxRuntimeExports.jsx(qt,_extends$3({appear:!0,in:Ot,onEntering:Pr,onExited:Wn,timeout:pr},tn,{children:jsxRuntimeExports.jsx(Br,_extends$3({},xr,{children:wt}))}))}))}),Popover$1=Popover;function getMenuUtilityClass(o){return generateUtilityClass$1("MuiMenu",o)}generateUtilityClasses$1("MuiMenu",["root","paper","list"]);const _excluded$8=["onEntering"],_excluded2$1=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$7=o=>{const{classes:i}=o;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,i)},MenuRoot=styled(Popover$1,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(o,i)=>i.root})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(o,i)=>i.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList$1,{name:"MuiMenu",slot:"List",overridesResolver:(o,i)=>i.list})({outline:0}),Menu$1=reactExports.forwardRef(function(i,et){var nt,ot;const st=useThemeProps({props:i,name:"MuiMenu"}),{autoFocus:lt=!0,children:ht,className:ft,disableAutoFocusItem:St=!1,MenuListProps:vt={},onClose:Rt,open:wt,PaperProps:$t={},PopoverClasses:Dt,transitionDuration:Pt="auto",TransitionProps:{onEntering:Ut}={},variant:Ot="selectedMenu",slots:Lt={},slotProps:xt={}}=st,jt=_objectWithoutPropertiesLoose(st.TransitionProps,_excluded$8),Ht=_objectWithoutPropertiesLoose(st,_excluded2$1),qt=useTheme(),Kt=qt.direction==="rtl",nn=_extends$3({},st,{autoFocus:lt,disableAutoFocusItem:St,MenuListProps:vt,onEntering:Ut,PaperProps:$t,transitionDuration:Pt,TransitionProps:jt,variant:Ot}),Zt=useUtilityClasses$7(nn),tn=lt&&!St&&wt,dn=reactExports.useRef(null),wn=(_n,bn)=>{dn.current&&dn.current.adjustStyleForScrollbar(_n,qt),Ut&&Ut(_n,bn)},In=_n=>{_n.key==="Tab"&&(_n.preventDefault(),Rt&&Rt(_n,"tabKeyDown"))};let Sn=-1;reactExports.Children.map(ht,(_n,bn)=>{reactExports.isValidElement(_n)&&(_n.props.disabled||(Ot==="selectedMenu"&&_n.props.selected||Sn===-1)&&(Sn=bn))});const Nn=(nt=Lt.paper)!=null?nt:MenuPaper,Rn=(ot=xt.paper)!=null?ot:$t,Ln=useSlotProps({elementType:Lt.root,externalSlotProps:xt.root,ownerState:nn,className:[Zt.root,ft]}),gn=useSlotProps({elementType:Nn,externalSlotProps:Rn,ownerState:nn,className:Zt.paper});return jsxRuntimeExports.jsx(MenuRoot,_extends$3({onClose:Rt,anchorOrigin:{vertical:"bottom",horizontal:Kt?"right":"left"},transformOrigin:Kt?RTL_ORIGIN:LTR_ORIGIN,slots:{paper:Nn,root:Lt.root},slotProps:{root:Ln,paper:gn},open:wt,ref:et,transitionDuration:Pt,TransitionProps:_extends$3({onEntering:wn},jt),ownerState:nn},Ht,{classes:Dt,children:jsxRuntimeExports.jsx(MenuMenuList,_extends$3({onKeyDown:In,actions:dn,autoFocus:lt&&(Sn===-1||St),autoFocusItem:tn,variant:Ot},vt,{className:clsx(Zt.list,vt.className),children:ht}))}))}),Menu$2=Menu$1;function getMenuItemUtilityClass(o){return generateUtilityClass$1("MuiMenuItem",o)}const menuItemClasses=generateUtilityClasses$1("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),menuItemClasses$1=menuItemClasses,_excluded$7=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],overridesResolver=(o,i)=>{const{ownerState:et}=o;return[i.root,et.dense&&i.dense,et.divider&&i.divider,!et.disableGutters&&i.gutters]},useUtilityClasses$6=o=>{const{disabled:i,dense:et,divider:nt,disableGutters:ot,selected:st,classes:lt}=o,ft=composeClasses({root:["root",et&&"dense",i&&"disabled",!ot&&"gutters",nt&&"divider",st&&"selected"]},getMenuItemUtilityClass,lt);return _extends$3({},lt,ft)},MenuItemRoot=styled(ButtonBase$1,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(({theme:o,ownerState:i})=>_extends$3({},o.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!i.disableGutters&&{paddingLeft:16,paddingRight:16},i.divider&&{borderBottom:`1px solid ${(o.vars||o).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(o.vars||o).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses$1.selected}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / ${o.vars.palette.action.selectedOpacity})`:alpha(o.palette.primary.main,o.palette.action.selectedOpacity),[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.focusOpacity}))`:alpha(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.focusOpacity)}},[`&.${menuItemClasses$1.selected}:hover`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.hoverOpacity}))`:alpha(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / ${o.vars.palette.action.selectedOpacity})`:alpha(o.palette.primary.main,o.palette.action.selectedOpacity)}},[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},[`&.${menuItemClasses$1.disabled}`]:{opacity:(o.vars||o).palette.action.disabledOpacity},[`& + .${dividerClasses$1.root}`]:{marginTop:o.spacing(1),marginBottom:o.spacing(1)},[`& + .${dividerClasses$1.inset}`]:{marginLeft:52},[`& .${listItemTextClasses$1.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses$1.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses$1.root}`]:{minWidth:36}},!i.dense&&{[o.breakpoints.up("sm")]:{minHeight:"auto"}},i.dense&&_extends$3({minHeight:32,paddingTop:4,paddingBottom:4},o.typography.body2,{[`& .${listItemIconClasses$1.root} svg`]:{fontSize:"1.25rem"}}))),MenuItem=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiMenuItem"}),{autoFocus:ot=!1,component:st="li",dense:lt=!1,divider:ht=!1,disableGutters:ft=!1,focusVisibleClassName:St,role:vt="menuitem",tabIndex:Rt,className:wt}=nt,$t=_objectWithoutPropertiesLoose(nt,_excluded$7),Dt=reactExports.useContext(ListContext$1),Pt=reactExports.useMemo(()=>({dense:lt||Dt.dense||!1,disableGutters:ft}),[Dt.dense,lt,ft]),Ut=reactExports.useRef(null);useEnhancedEffect(()=>{ot&&Ut.current&&Ut.current.focus()},[ot]);const Ot=_extends$3({},nt,{dense:Pt.dense,divider:ht,disableGutters:ft}),Lt=useUtilityClasses$6(nt),xt=useForkRef(Ut,et);let jt;return nt.disabled||(jt=Rt!==void 0?Rt:-1),jsxRuntimeExports.jsx(ListContext$1.Provider,{value:Pt,children:jsxRuntimeExports.jsx(MenuItemRoot,_extends$3({ref:xt,role:vt,tabIndex:jt,component:st,focusVisibleClassName:clsx(Lt.focusVisible,St),className:clsx(Lt.root,wt)},$t,{ownerState:Ot,classes:Lt}))})}),MenuItem$1=MenuItem;function getNativeSelectUtilityClasses(o){return generateUtilityClass$1("MuiNativeSelect",o)}const nativeSelectClasses=generateUtilityClasses$1("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),nativeSelectClasses$1=nativeSelectClasses,_excluded$6=["className","disabled","error","IconComponent","inputRef","variant"],useUtilityClasses$5=o=>{const{classes:i,variant:et,disabled:nt,multiple:ot,open:st,error:lt}=o,ht={select:["select",et,nt&&"disabled",ot&&"multiple",lt&&"error"],icon:["icon",`icon${capitalize(et)}`,st&&"iconOpen",nt&&"disabled"]};return composeClasses(ht,getNativeSelectUtilityClasses,i)},nativeSelectSelectStyles=({ownerState:o,theme:i})=>_extends$3({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_extends$3({},i.vars?{backgroundColor:`rgba(${i.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:i.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${nativeSelectClasses$1.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(i.vars||i).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},o.variant==="filled"&&{"&&&":{paddingRight:32}},o.variant==="outlined"&&{borderRadius:(i.vars||i).shape.borderRadius,"&:focus":{borderRadius:(i.vars||i).shape.borderRadius},"&&&":{paddingRight:32}}),NativeSelectSelect=styled("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.select,i[et.variant],et.error&&i.error,{[`&.${nativeSelectClasses$1.multiple}`]:i.multiple}]}})(nativeSelectSelectStyles),nativeSelectIconStyles=({ownerState:o,theme:i})=>_extends$3({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(i.vars||i).palette.action.active,[`&.${nativeSelectClasses$1.disabled}`]:{color:(i.vars||i).palette.action.disabled}},o.open&&{transform:"rotate(180deg)"},o.variant==="filled"&&{right:7},o.variant==="outlined"&&{right:7}),NativeSelectIcon=styled("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.icon,et.variant&&i[`icon${capitalize(et.variant)}`],et.open&&i.iconOpen]}})(nativeSelectIconStyles),NativeSelectInput=reactExports.forwardRef(function(i,et){const{className:nt,disabled:ot,error:st,IconComponent:lt,inputRef:ht,variant:ft="standard"}=i,St=_objectWithoutPropertiesLoose(i,_excluded$6),vt=_extends$3({},i,{disabled:ot,variant:ft,error:st}),Rt=useUtilityClasses$5(vt);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,_extends$3({ownerState:vt,className:clsx(Rt.select,nt),disabled:ot,ref:ht||et},St)),i.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:lt,ownerState:vt,className:Rt.icon})]})}),NativeSelectInput$1=NativeSelectInput;var _span$1;const _excluded$5=["children","classes","className","label","notched"],NotchedOutlineRoot$1=styled("fieldset",{shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{shouldForwardProp:rootShouldForwardProp})(({ownerState:o,theme:i})=>_extends$3({float:"unset",width:"auto",overflow:"hidden"},!o.withLabel&&{padding:0,lineHeight:"11px",transition:i.transitions.create("width",{duration:150,easing:i.transitions.easing.easeOut})},o.withLabel&&_extends$3({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:i.transitions.create("max-width",{duration:50,easing:i.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},o.notched&&{maxWidth:"100%",transition:i.transitions.create("max-width",{duration:100,easing:i.transitions.easing.easeOut,delay:50})})));function NotchedOutline(o){const{className:i,label:et,notched:nt}=o,ot=_objectWithoutPropertiesLoose(o,_excluded$5),st=et!=null&&et!=="",lt=_extends$3({},o,{notched:nt,withLabel:st});return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,_extends$3({"aria-hidden":!0,className:i,ownerState:lt},ot,{children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:lt,children:st?jsxRuntimeExports.jsx("span",{children:et}):_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"}))})}))}const _excluded$4=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],useUtilityClasses$4=o=>{const{classes:i}=o,nt=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,i);return _extends$3({},i,nt)},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:o=>rootShouldForwardProp(o)||o==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:o,ownerState:i})=>{const et=o.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _extends$3({position:"relative",borderRadius:(o.vars||o).shape.borderRadius,[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(o.vars||o).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:o.vars?`rgba(${o.vars.palette.common.onBackgroundChannel} / 0.23)`:et}},[`&.${outlinedInputClasses$1.focused} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(o.vars||o).palette[i.color].main,borderWidth:2},[`&.${outlinedInputClasses$1.error} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(o.vars||o).palette.error.main},[`&.${outlinedInputClasses$1.disabled} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(o.vars||o).palette.action.disabled}},i.startAdornment&&{paddingLeft:14},i.endAdornment&&{paddingRight:14},i.multiline&&_extends$3({padding:"16.5px 14px"},i.size==="small"&&{padding:"8.5px 14px"}))}),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(o,i)=>i.notchedOutline})(({theme:o})=>{const i=o.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:o.vars?`rgba(${o.vars.palette.common.onBackgroundChannel} / 0.23)`:i}}),OutlinedInputInput=styled(InputBaseComponent,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:o,ownerState:i})=>_extends$3({padding:"16.5px 14px"},!o.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:o.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:o.palette.mode==="light"?null:"#fff",caretColor:o.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},o.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[o.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},i.size==="small"&&{padding:"8.5px 14px"},i.multiline&&{padding:0},i.startAdornment&&{paddingLeft:0},i.endAdornment&&{paddingRight:0})),OutlinedInput=reactExports.forwardRef(function(i,et){var nt,ot,st,lt,ht;const ft=useThemeProps({props:i,name:"MuiOutlinedInput"}),{components:St={},fullWidth:vt=!1,inputComponent:Rt="input",label:wt,multiline:$t=!1,notched:Dt,slots:Pt={},type:Ut="text"}=ft,Ot=_objectWithoutPropertiesLoose(ft,_excluded$4),Lt=useUtilityClasses$4(ft),xt=useFormControl(),jt=formControlState({props:ft,muiFormControl:xt,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),Ht=_extends$3({},ft,{color:jt.color||"primary",disabled:jt.disabled,error:jt.error,focused:jt.focused,formControl:xt,fullWidth:vt,hiddenLabel:jt.hiddenLabel,multiline:$t,size:jt.size,type:Ut}),qt=(nt=(ot=Pt.root)!=null?ot:St.Root)!=null?nt:OutlinedInputRoot,Kt=(st=(lt=Pt.input)!=null?lt:St.Input)!=null?st:OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends$3({slots:{root:qt,input:Kt},renderSuffix:nn=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:Ht,className:Lt.notchedOutline,label:wt!=null&&wt!==""&&jt.required?ht||(ht=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[wt," ","*"]})):wt,notched:typeof Dt<"u"?Dt:!!(nn.startAdornment||nn.filled||nn.focused)}),fullWidth:vt,inputComponent:Rt,multiline:$t,ref:et,type:Ut},Ot,{classes:_extends$3({},Lt,{notchedOutline:null})}))});OutlinedInput.muiName="Input";const OutlinedInput$1=OutlinedInput;function getSelectUtilityClasses(o){return generateUtilityClass$1("MuiSelect",o)}const selectClasses=generateUtilityClasses$1("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const _excluded$3=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SelectSelect=styled("div",{name:"MuiSelect",slot:"Select",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[{[`&.${selectClasses.select}`]:i.select},{[`&.${selectClasses.select}`]:i[et.variant]},{[`&.${selectClasses.error}`]:i.error},{[`&.${selectClasses.multiple}`]:i.multiple}]}})(nativeSelectSelectStyles,{[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.icon,et.variant&&i[`icon${capitalize(et.variant)}`],et.open&&i.iconOpen]}})(nativeSelectIconStyles),SelectNativeInput=styled("input",{shouldForwardProp:o=>slotShouldForwardProp(o)&&o!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(o,i)=>i.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(o,i){return typeof i=="object"&&i!==null?o===i:String(o)===String(i)}function isEmpty(o){return o==null||typeof o=="string"&&!o.trim()}const useUtilityClasses$3=o=>{const{classes:i,variant:et,disabled:nt,multiple:ot,open:st,error:lt}=o,ht={select:["select",et,nt&&"disabled",ot&&"multiple",lt&&"error"],icon:["icon",`icon${capitalize(et)}`,st&&"iconOpen",nt&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(ht,getSelectUtilityClasses,i)},SelectInput=reactExports.forwardRef(function(i,et){var nt;const{"aria-describedby":ot,"aria-label":st,autoFocus:lt,autoWidth:ht,children:ft,className:St,defaultOpen:vt,defaultValue:Rt,disabled:wt,displayEmpty:$t,error:Dt=!1,IconComponent:Pt,inputRef:Ut,labelId:Ot,MenuProps:Lt={},multiple:xt,name:jt,onBlur:Ht,onChange:qt,onClose:Kt,onFocus:nn,onOpen:Zt,open:tn,readOnly:dn,renderValue:wn,SelectDisplayProps:In={},tabIndex:Sn,value:Nn,variant:Rn="standard"}=i,Ln=_objectWithoutPropertiesLoose(i,_excluded$3),[gn,_n]=useControlled({controlled:Nn,default:Rt,name:"Select"}),[bn,tr]=useControlled({controlled:tn,default:vt,name:"Select"}),Zn=reactExports.useRef(null),Pr=reactExports.useRef(null),[Wn,pr]=reactExports.useState(null),{current:or}=reactExports.useRef(tn!=null),[Qr,Br]=reactExports.useState(),xr=useForkRef(et,Ut),Fo=reactExports.useCallback(Qn=>{Pr.current=Qn,Qn&&pr(Qn)},[]),ur=Wn==null?void 0:Wn.parentNode;reactExports.useImperativeHandle(xr,()=>({focus:()=>{Pr.current.focus()},node:Zn.current,value:gn}),[gn]),reactExports.useEffect(()=>{vt&&bn&&Wn&&!or&&(Br(ht?null:ur.clientWidth),Pr.current.focus())},[Wn,ht]),reactExports.useEffect(()=>{lt&&Pr.current.focus()},[lt]),reactExports.useEffect(()=>{if(!Ot)return;const Qn=ownerDocument(Pr.current).getElementById(Ot);if(Qn){const Yr=()=>{getSelection().isCollapsed&&Pr.current.focus()};return Qn.addEventListener("click",Yr),()=>{Qn.removeEventListener("click",Yr)}}},[Ot]);const Hr=(Qn,Yr)=>{Qn?Zt&&Zt(Yr):Kt&&Kt(Yr),or||(Br(ht?null:ur.clientWidth),tr(Qn))},fr=Qn=>{Qn.button===0&&(Qn.preventDefault(),Pr.current.focus(),Hr(!0,Qn))},Ur=Qn=>{Hr(!1,Qn)},Cr=reactExports.Children.toArray(ft),Es=Qn=>{const Yr=Cr.find(eo=>eo.props.value===Qn.target.value);Yr!==void 0&&(_n(Yr.props.value),qt&&qt(Qn,Yr))},as=Qn=>Yr=>{let eo;if(Yr.currentTarget.hasAttribute("tabindex")){if(xt){eo=Array.isArray(gn)?gn.slice():[];const _l=gn.indexOf(Qn.props.value);_l===-1?eo.push(Qn.props.value):eo.splice(_l,1)}else eo=Qn.props.value;if(Qn.props.onClick&&Qn.props.onClick(Yr),gn!==eo&&(_n(eo),qt)){const _l=Yr.nativeEvent||Yr,Pp=new _l.constructor(_l.type,_l);Object.defineProperty(Pp,"target",{writable:!0,value:{value:eo,name:jt}}),qt(Pp,Qn)}xt||Hr(!1,Yr)}},co=Qn=>{dn||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Qn.key)!==-1&&(Qn.preventDefault(),Hr(!0,Qn))},cs=Wn!==null&&bn,So=Qn=>{!cs&&Ht&&(Object.defineProperty(Qn,"target",{writable:!0,value:{value:gn,name:jt}}),Ht(Qn))};delete Ln["aria-invalid"];let gr,go;const No=[];let Lr=!1;(isFilled({value:gn})||$t)&&(wn?gr=wn(gn):Lr=!0);const Zo=Cr.map(Qn=>{if(!reactExports.isValidElement(Qn))return null;let Yr;if(xt){if(!Array.isArray(gn))throw new Error(formatMuiErrorMessage(2));Yr=gn.some(eo=>areEqualValues(eo,Qn.props.value)),Yr&&Lr&&No.push(Qn.props.children)}else Yr=areEqualValues(gn,Qn.props.value),Yr&&Lr&&(go=Qn.props.children);return reactExports.cloneElement(Qn,{"aria-selected":Yr?"true":"false",onClick:as(Qn),onKeyUp:eo=>{eo.key===" "&&eo.preventDefault(),Qn.props.onKeyUp&&Qn.props.onKeyUp(eo)},role:"option",selected:Yr,value:void 0,"data-value":Qn.props.value})});Lr&&(xt?No.length===0?gr=null:gr=No.reduce((Qn,Yr,eo)=>(Qn.push(Yr),eo<No.length-1&&Qn.push(", "),Qn),[]):gr=go);let Go=Qr;!ht&&or&&Wn&&(Go=ur.clientWidth);let Zr;typeof Sn<"u"?Zr=Sn:Zr=wt?null:0;const Ar=In.id||(jt?`mui-component-select-${jt}`:void 0),er=_extends$3({},i,{variant:Rn,value:gn,open:cs,error:Dt}),jo=useUtilityClasses$3(er),Fl=_extends$3({},Lt.PaperProps,(nt=Lt.slotProps)==null?void 0:nt.paper),Ws=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,_extends$3({ref:Fo,tabIndex:Zr,role:"combobox","aria-controls":Ws,"aria-disabled":wt?"true":void 0,"aria-expanded":cs?"true":"false","aria-haspopup":"listbox","aria-label":st,"aria-labelledby":[Ot,Ar].filter(Boolean).join(" ")||void 0,"aria-describedby":ot,onKeyDown:co,onMouseDown:wt||dn?null:fr,onBlur:So,onFocus:nn},In,{ownerState:er,className:clsx(In.className,jo.select,St),id:Ar,children:isEmpty(gr)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"})):gr})),jsxRuntimeExports.jsx(SelectNativeInput,_extends$3({"aria-invalid":Dt,value:Array.isArray(gn)?gn.join(","):gn,name:jt,ref:Zn,"aria-hidden":!0,onChange:Es,tabIndex:-1,disabled:wt,className:jo.nativeInput,autoFocus:lt,ownerState:er},Ln)),jsxRuntimeExports.jsx(SelectIcon,{as:Pt,className:jo.icon,ownerState:er}),jsxRuntimeExports.jsx(Menu$2,_extends$3({id:`menu-${jt||""}`,anchorEl:ur,open:cs,onClose:Ur,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},Lt,{MenuListProps:_extends$3({"aria-labelledby":Ot,role:"listbox","aria-multiselectable":xt?"true":void 0,disableListWrap:!0,id:Ws},Lt.MenuListProps),slotProps:_extends$3({},Lt.slotProps,{paper:_extends$3({},Fl,{style:_extends$3({minWidth:Go},Fl!=null?Fl.style:null)})}),children:Zo}))]})}),SelectInput$1=SelectInput,_excluded$2=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],_excluded2=["root"],useUtilityClasses$2=o=>{const{classes:i}=o;return i},styledRootConfig={name:"MuiSelect",overridesResolver:(o,i)=>i.root,shouldForwardProp:o=>rootShouldForwardProp(o)&&o!=="variant",slot:"Root"},StyledInput=styled(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput$1,styledRootConfig)(""),StyledFilledInput=styled(FilledInput$1,styledRootConfig)(""),Select=reactExports.forwardRef(function(i,et){const nt=useThemeProps({name:"MuiSelect",props:i}),{autoWidth:ot=!1,children:st,classes:lt={},className:ht,defaultOpen:ft=!1,displayEmpty:St=!1,IconComponent:vt=ArrowDropDownIcon,id:Rt,input:wt,inputProps:$t,label:Dt,labelId:Pt,MenuProps:Ut,multiple:Ot=!1,native:Lt=!1,onClose:xt,onOpen:jt,open:Ht,renderValue:qt,SelectDisplayProps:Kt,variant:nn="outlined"}=nt,Zt=_objectWithoutPropertiesLoose(nt,_excluded$2),tn=Lt?NativeSelectInput$1:SelectInput$1,dn=useFormControl(),wn=formControlState({props:nt,muiFormControl:dn,states:["variant","error"]}),In=wn.variant||nn,Sn=_extends$3({},nt,{variant:In,classes:lt}),Nn=useUtilityClasses$2(Sn),Rn=_objectWithoutPropertiesLoose(Nn,_excluded2),Ln=wt||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:Sn}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:Dt,ownerState:Sn}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:Sn})}[In],gn=useForkRef(et,Ln.ref);return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(Ln,_extends$3({inputComponent:tn,inputProps:_extends$3({children:st,error:wn.error,IconComponent:vt,variant:In,type:void 0,multiple:Ot},Lt?{id:Rt}:{autoWidth:ot,defaultOpen:ft,displayEmpty:St,labelId:Pt,MenuProps:Ut,onClose:xt,onOpen:jt,open:Ht,renderValue:qt,SelectDisplayProps:_extends$3({id:Rt},Kt)},$t,{classes:$t?deepmerge(Rn,$t.classes):Rn},wt?wt.props.inputProps:{})},Ot&&Lt&&In==="outlined"?{notched:!0}:{},{ref:gn,className:clsx(Ln.props.className,ht,Nn.root)},!wt&&{variant:In},Zt))})});Select.muiName="Select";const Select$1=Select;function getTooltipUtilityClass(o){return generateUtilityClass$1("MuiTooltip",o)}const tooltipClasses=generateUtilityClasses$1("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),tooltipClasses$1=tooltipClasses,_excluded$1=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round(o){return Math.round(o*1e5)/1e5}const useUtilityClasses$1=o=>{const{classes:i,disableInteractive:et,arrow:nt,touch:ot,placement:st}=o,lt={popper:["popper",!et&&"popperInteractive",nt&&"popperArrow"],tooltip:["tooltip",nt&&"tooltipArrow",ot&&"touch",`tooltipPlacement${capitalize(st.split("-")[0])}`],arrow:["arrow"]};return composeClasses(lt,getTooltipUtilityClass,i)},TooltipPopper=styled(Popper$1,{name:"MuiTooltip",slot:"Popper",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.popper,!et.disableInteractive&&i.popperInteractive,et.arrow&&i.popperArrow,!et.open&&i.popperClose]}})(({theme:o,ownerState:i,open:et})=>_extends$3({zIndex:(o.vars||o).zIndex.tooltip,pointerEvents:"none"},!i.disableInteractive&&{pointerEvents:"auto"},!et&&{pointerEvents:"none"},i.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses$1.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses$1.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses$1.arrow}`]:_extends$3({},i.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses$1.arrow}`]:_extends$3({},i.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(o,i)=>{const{ownerState:et}=o;return[i.tooltip,et.touch&&i.touch,et.arrow&&i.tooltipArrow,i[`tooltipPlacement${capitalize(et.placement.split("-")[0])}`]]}})(({theme:o,ownerState:i})=>_extends$3({backgroundColor:o.vars?o.vars.palette.Tooltip.bg:alpha(o.palette.grey[700],.92),borderRadius:(o.vars||o).shape.borderRadius,color:(o.vars||o).palette.common.white,fontFamily:o.typography.fontFamily,padding:"4px 8px",fontSize:o.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:o.typography.fontWeightMedium},i.arrow&&{position:"relative",margin:0},i.touch&&{padding:"8px 16px",fontSize:o.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:o.typography.fontWeightRegular},{[`.${tooltipClasses$1.popper}[data-popper-placement*="left"] &`]:_extends$3({transformOrigin:"right center"},i.isRtl?_extends$3({marginLeft:"14px"},i.touch&&{marginLeft:"24px"}):_extends$3({marginRight:"14px"},i.touch&&{marginRight:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="right"] &`]:_extends$3({transformOrigin:"left center"},i.isRtl?_extends$3({marginRight:"14px"},i.touch&&{marginRight:"24px"}):_extends$3({marginLeft:"14px"},i.touch&&{marginLeft:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="top"] &`]:_extends$3({transformOrigin:"center bottom",marginBottom:"14px"},i.touch&&{marginBottom:"24px"}),[`.${tooltipClasses$1.popper}[data-popper-placement*="bottom"] &`]:_extends$3({transformOrigin:"center top",marginTop:"14px"},i.touch&&{marginTop:"24px"})})),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(o,i)=>i.arrow})(({theme:o})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:o.vars?o.vars.palette.Tooltip.bg:alpha(o.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1,hystersisTimer=null,cursorPosition={x:0,y:0};function composeEventHandler(o,i){return et=>{i&&i(et),o(et)}}const Tooltip=reactExports.forwardRef(function(i,et){var nt,ot,st,lt,ht,ft,St,vt,Rt,wt,$t,Dt,Pt,Ut,Ot,Lt,xt,jt,Ht;const qt=useThemeProps({props:i,name:"MuiTooltip"}),{arrow:Kt=!1,children:nn,components:Zt={},componentsProps:tn={},describeChild:dn=!1,disableFocusListener:wn=!1,disableHoverListener:In=!1,disableInteractive:Sn=!1,disableTouchListener:Nn=!1,enterDelay:Rn=100,enterNextDelay:Ln=0,enterTouchDelay:gn=700,followCursor:_n=!1,id:bn,leaveDelay:tr=0,leaveTouchDelay:Zn=1500,onClose:Pr,onOpen:Wn,open:pr,placement:or="bottom",PopperComponent:Qr,PopperProps:Br={},slotProps:xr={},slots:Fo={},title:ur,TransitionComponent:Hr=Grow$1,TransitionProps:fr}=qt,Ur=_objectWithoutPropertiesLoose(qt,_excluded$1),Cr=reactExports.isValidElement(nn)?nn:jsxRuntimeExports.jsx("span",{children:nn}),Es=useTheme(),as=Es.direction==="rtl",[co,cs]=reactExports.useState(),[So,gr]=reactExports.useState(null),go=reactExports.useRef(!1),No=Sn||_n,Lr=reactExports.useRef(),Zo=reactExports.useRef(),Go=reactExports.useRef(),Zr=reactExports.useRef(),[Ar,er]=useControlled({controlled:pr,default:!1,name:"Tooltip",state:"open"});let jo=Ar;const Fl=useId(bn),Ws=reactExports.useRef(),Qn=reactExports.useCallback(()=>{Ws.current!==void 0&&(document.body.style.WebkitUserSelect=Ws.current,Ws.current=void 0),clearTimeout(Zr.current)},[]);reactExports.useEffect(()=>()=>{clearTimeout(Lr.current),clearTimeout(Zo.current),clearTimeout(Go.current),Qn()},[Qn]);const Yr=Dr=>{clearTimeout(hystersisTimer),hystersisOpen=!0,er(!0),Wn&&!jo&&Wn(Dr)},eo=useEventCallback(Dr=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+tr),er(!1),Pr&&jo&&Pr(Dr),clearTimeout(Lr.current),Lr.current=setTimeout(()=>{go.current=!1},Es.transitions.duration.shortest)}),_l=Dr=>{go.current&&Dr.type!=="touchstart"||(co&&co.removeAttribute("title"),clearTimeout(Zo.current),clearTimeout(Go.current),Rn||hystersisOpen&&Ln?Zo.current=setTimeout(()=>{Yr(Dr)},hystersisOpen?Ln:Rn):Yr(Dr))},Pp=Dr=>{clearTimeout(Zo.current),clearTimeout(Go.current),Go.current=setTimeout(()=>{eo(Dr)},tr)},{isFocusVisibleRef:T0,onBlur:zu,onFocus:v0,ref:VE}=useIsFocusVisible(),[,C0]=reactExports.useState(!1),b0=Dr=>{zu(Dr),T0.current===!1&&(C0(!1),Pp(Dr))},R0=Dr=>{co||cs(Dr.currentTarget),v0(Dr),T0.current===!0&&(C0(!0),_l(Dr))},Ku=Dr=>{go.current=!0;const Wo=Cr.props;Wo.onTouchStart&&Wo.onTouchStart(Dr)},I0=_l,Iu=Pp,BE=Dr=>{Ku(Dr),clearTimeout(Go.current),clearTimeout(Lr.current),Qn(),Ws.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Zr.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ws.current,_l(Dr)},gn)},GE=Dr=>{Cr.props.onTouchEnd&&Cr.props.onTouchEnd(Dr),Qn(),clearTimeout(Go.current),Go.current=setTimeout(()=>{eo(Dr)},Zn)};reactExports.useEffect(()=>{if(!jo)return;function Dr(Wo){(Wo.key==="Escape"||Wo.key==="Esc")&&eo(Wo)}return document.addEventListener("keydown",Dr),()=>{document.removeEventListener("keydown",Dr)}},[eo,jo]);const WE=useForkRef(Cr.ref,VE,cs,et);!ur&&ur!==0&&(jo=!1);const bs=reactExports.useRef(),HE=Dr=>{const Wo=Cr.props;Wo.onMouseMove&&Wo.onMouseMove(Dr),cursorPosition={x:Dr.clientX,y:Dr.clientY},bs.current&&bs.current.update()},Dp={},xp=typeof ur=="string";dn?(Dp.title=!jo&&xp&&!In?ur:null,Dp["aria-describedby"]=jo?Fl:null):(Dp["aria-label"]=xp?ur:null,Dp["aria-labelledby"]=jo&&!xp?Fl:null);const $s=_extends$3({},Dp,Ur,Cr.props,{className:clsx(Ur.className,Cr.props.className),onTouchStart:Ku,ref:WE},_n?{onMouseMove:HE}:{}),Au={};Nn||($s.onTouchStart=BE,$s.onTouchEnd=GE),In||($s.onMouseOver=composeEventHandler(I0,$s.onMouseOver),$s.onMouseLeave=composeEventHandler(Iu,$s.onMouseLeave),No||(Au.onMouseOver=I0,Au.onMouseLeave=Iu)),wn||($s.onFocus=composeEventHandler(R0,$s.onFocus),$s.onBlur=composeEventHandler(b0,$s.onBlur),No||(Au.onFocus=R0,Au.onBlur=b0));const u1=reactExports.useMemo(()=>{var Dr;let Wo=[{name:"arrow",enabled:!!So,options:{element:So,padding:4}}];return(Dr=Br.popperOptions)!=null&&Dr.modifiers&&(Wo=Wo.concat(Br.popperOptions.modifiers)),_extends$3({},Br.popperOptions,{modifiers:Wo})},[So,Br]),Lp=_extends$3({},qt,{isRtl:as,arrow:Kt,disableInteractive:No,placement:or,PopperComponentProp:Qr,touch:go.current}),um=useUtilityClasses$1(Lp),p1=(nt=(ot=Fo.popper)!=null?ot:Zt.Popper)!=null?nt:TooltipPopper,A0=(st=(lt=(ht=Fo.transition)!=null?ht:Zt.Transition)!=null?lt:Hr)!=null?st:Grow$1,N0=(ft=(St=Fo.tooltip)!=null?St:Zt.Tooltip)!=null?ft:TooltipTooltip,h1=(vt=(Rt=Fo.arrow)!=null?Rt:Zt.Arrow)!=null?vt:TooltipArrow,f1=appendOwnerState(p1,_extends$3({},Br,(wt=xr.popper)!=null?wt:tn.popper,{className:clsx(um.popper,Br==null?void 0:Br.className,($t=(Dt=xr.popper)!=null?Dt:tn.popper)==null?void 0:$t.className)}),Lp),w0=appendOwnerState(A0,_extends$3({},fr,(Pt=xr.transition)!=null?Pt:tn.transition),Lp),Yu=appendOwnerState(N0,_extends$3({},(Ut=xr.tooltip)!=null?Ut:tn.tooltip,{className:clsx(um.tooltip,(Ot=(Lt=xr.tooltip)!=null?Lt:tn.tooltip)==null?void 0:Ot.className)}),Lp),zE=appendOwnerState(h1,_extends$3({},(xt=xr.arrow)!=null?xt:tn.arrow,{className:clsx(um.arrow,(jt=(Ht=xr.arrow)!=null?Ht:tn.arrow)==null?void 0:jt.className)}),Lp);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Cr,$s),jsxRuntimeExports.jsx(p1,_extends$3({as:Qr??Popper$1,placement:or,anchorEl:_n?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:co,popperRef:bs,open:co?jo:!1,id:Fl,transition:!0},Au,f1,{popperOptions:u1,children:({TransitionProps:Dr})=>jsxRuntimeExports.jsx(A0,_extends$3({timeout:Es.transitions.duration.shorter},Dr,w0,{children:jsxRuntimeExports.jsxs(N0,_extends$3({},Yu,{children:[ur,Kt?jsxRuntimeExports.jsx(h1,_extends$3({},zE,{ref:gr})):null]}))}))}))]})}),Tooltip$1=Tooltip;function getTextFieldUtilityClass(o){return generateUtilityClass$1("MuiTextField",o)}generateUtilityClasses$1("MuiTextField",["root"]);const _excluded=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],variantComponent={standard:Input$1,filled:FilledInput$1,outlined:OutlinedInput$1},useUtilityClasses=o=>{const{classes:i}=o;return composeClasses({root:["root"]},getTextFieldUtilityClass,i)},TextFieldRoot=styled(FormControl$1,{name:"MuiTextField",slot:"Root",overridesResolver:(o,i)=>i.root})({}),TextField=reactExports.forwardRef(function(i,et){const nt=useThemeProps({props:i,name:"MuiTextField"}),{autoComplete:ot,autoFocus:st=!1,children:lt,className:ht,color:ft="primary",defaultValue:St,disabled:vt=!1,error:Rt=!1,FormHelperTextProps:wt,fullWidth:$t=!1,helperText:Dt,id:Pt,InputLabelProps:Ut,inputProps:Ot,InputProps:Lt,inputRef:xt,label:jt,maxRows:Ht,minRows:qt,multiline:Kt=!1,name:nn,onBlur:Zt,onChange:tn,onFocus:dn,placeholder:wn,required:In=!1,rows:Sn,select:Nn=!1,SelectProps:Rn,type:Ln,value:gn,variant:_n="outlined"}=nt,bn=_objectWithoutPropertiesLoose(nt,_excluded),tr=_extends$3({},nt,{autoFocus:st,color:ft,disabled:vt,error:Rt,fullWidth:$t,multiline:Kt,required:In,select:Nn,variant:_n}),Zn=useUtilityClasses(tr),Pr={};_n==="outlined"&&(Ut&&typeof Ut.shrink<"u"&&(Pr.notched=Ut.shrink),Pr.label=jt),Nn&&((!Rn||!Rn.native)&&(Pr.id=void 0),Pr["aria-describedby"]=void 0);const Wn=useId(Pt),pr=Dt&&Wn?`${Wn}-helper-text`:void 0,or=jt&&Wn?`${Wn}-label`:void 0,Qr=variantComponent[_n],Br=jsxRuntimeExports.jsx(Qr,_extends$3({"aria-describedby":pr,autoComplete:ot,autoFocus:st,defaultValue:St,fullWidth:$t,multiline:Kt,name:nn,rows:Sn,maxRows:Ht,minRows:qt,type:Ln,value:gn,id:Wn,inputRef:xt,onBlur:Zt,onChange:tn,onFocus:dn,placeholder:wn,inputProps:Ot},Pr,Lt));return jsxRuntimeExports.jsxs(TextFieldRoot,_extends$3({className:clsx(Zn.root,ht),disabled:vt,error:Rt,fullWidth:$t,ref:et,required:In,color:ft,variant:_n,ownerState:tr},bn,{children:[jt!=null&&jt!==""&&jsxRuntimeExports.jsx(InputLabel$1,_extends$3({htmlFor:Wn,id:or},Ut,{children:jt})),Nn?jsxRuntimeExports.jsx(Select$1,_extends$3({"aria-describedby":pr,id:Wn,labelId:or,value:gn,input:Br},Rn,{children:lt})):Br,Dt&&jsxRuntimeExports.jsx(FormHelperText$1,_extends$3({id:pr},wt,{children:Dt}))]}))}),TextField$1=TextField;var DeleteOutline={},_interopRequireDefault$e=interopRequireDefaultExports;Object.defineProperty(DeleteOutline,"__esModule",{value:!0});var default_1$e=DeleteOutline.default=void 0,_createSvgIcon$e=_interopRequireDefault$e(requireCreateSvgIcon()),_jsxRuntime$e=jsxRuntimeExports;default_1$e=DeleteOutline.default=(0,_createSvgIcon$e.default)((0,_jsxRuntime$e.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");var Edit={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(Edit,"__esModule",{value:!0});var default_1$d=Edit.default=void 0,_createSvgIcon$d=_interopRequireDefault$d(requireCreateSvgIcon()),_jsxRuntime$d=jsxRuntimeExports;default_1$d=Edit.default=(0,_createSvgIcon$d.default)((0,_jsxRuntime$d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");function toDate(o){const i=Object.prototype.toString.call(o);return o instanceof Date||typeof o=="object"&&i==="[object Date]"?new o.constructor(+o):typeof o=="number"||i==="[object Number]"||typeof o=="string"||i==="[object String]"?new Date(o):new Date(NaN)}function constructFrom(o,i){return o instanceof Date?new o.constructor(i):new Date(i)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(o,i){var ht,ft,St,vt;const et=getDefaultOptions(),nt=(i==null?void 0:i.weekStartsOn)??((ft=(ht=i==null?void 0:i.locale)==null?void 0:ht.options)==null?void 0:ft.weekStartsOn)??et.weekStartsOn??((vt=(St=et.locale)==null?void 0:St.options)==null?void 0:vt.weekStartsOn)??0,ot=toDate(o),st=ot.getDay(),lt=(st<nt?7:0)+st-nt;return ot.setDate(ot.getDate()-lt),ot.setHours(0,0,0,0),ot}function startOfISOWeek(o){return startOfWeek(o,{weekStartsOn:1})}function getISOWeekYear(o){const i=toDate(o),et=i.getFullYear(),nt=constructFrom(o,0);nt.setFullYear(et+1,0,4),nt.setHours(0,0,0,0);const ot=startOfISOWeek(nt),st=constructFrom(o,0);st.setFullYear(et,0,4),st.setHours(0,0,0,0);const lt=startOfISOWeek(st);return i.getTime()>=ot.getTime()?et+1:i.getTime()>=lt.getTime()?et:et-1}function startOfDay(o){const i=toDate(o);return i.setHours(0,0,0,0),i}function getTimezoneOffsetInMilliseconds(o){const i=toDate(o),et=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return et.setUTCFullYear(i.getFullYear()),+o-+et}function differenceInCalendarDays(o,i){const et=startOfDay(o),nt=startOfDay(i),ot=+et-getTimezoneOffsetInMilliseconds(et),st=+nt-getTimezoneOffsetInMilliseconds(nt);return Math.round((ot-st)/millisecondsInDay)}function startOfISOWeekYear(o){const i=getISOWeekYear(o),et=constructFrom(o,0);return et.setFullYear(i,0,4),et.setHours(0,0,0,0),startOfISOWeek(et)}function isDate(o){return o instanceof Date||typeof o=="object"&&Object.prototype.toString.call(o)==="[object Date]"}function isValid(o){if(!isDate(o)&&typeof o!="number")return!1;const i=toDate(o);return!isNaN(Number(i))}function startOfYear(o){const i=toDate(o),et=constructFrom(o,0);return et.setFullYear(i.getFullYear(),0,1),et.setHours(0,0,0,0),et}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(o,i,et)=>{let nt;const ot=formatDistanceLocale[o];return typeof ot=="string"?nt=ot:i===1?nt=ot.one:nt=ot.other.replace("{{count}}",i.toString()),et!=null&&et.addSuffix?et.comparison&&et.comparison>0?"in "+nt:nt+" ago":nt};function buildFormatLongFn(o){return(i={})=>{const et=i.width?String(i.width):o.defaultWidth;return o.formats[et]||o.formats[o.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(o,i,et,nt)=>formatRelativeLocale[o];function buildLocalizeFn(o){return(i,et)=>{const nt=et!=null&&et.context?String(et.context):"standalone";let ot;if(nt==="formatting"&&o.formattingValues){const lt=o.defaultFormattingWidth||o.defaultWidth,ht=et!=null&&et.width?String(et.width):lt;ot=o.formattingValues[ht]||o.formattingValues[lt]}else{const lt=o.defaultWidth,ht=et!=null&&et.width?String(et.width):o.defaultWidth;ot=o.values[ht]||o.values[lt]}const st=o.argumentCallback?o.argumentCallback(i):i;return ot[st]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(o,i)=>{const et=Number(o),nt=et%100;if(nt>20||nt<10)switch(nt%10){case 1:return et+"st";case 2:return et+"nd";case 3:return et+"rd"}return et+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:o=>o-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(o){return(i,et={})=>{const nt=et.width,ot=nt&&o.matchPatterns[nt]||o.matchPatterns[o.defaultMatchWidth],st=i.match(ot);if(!st)return null;const lt=st[0],ht=nt&&o.parsePatterns[nt]||o.parsePatterns[o.defaultParseWidth],ft=Array.isArray(ht)?findIndex(ht,Rt=>Rt.test(lt)):findKey(ht,Rt=>Rt.test(lt));let St;St=o.valueCallback?o.valueCallback(ft):ft,St=et.valueCallback?et.valueCallback(St):St;const vt=i.slice(lt.length);return{value:St,rest:vt}}}function findKey(o,i){for(const et in o)if(Object.prototype.hasOwnProperty.call(o,et)&&i(o[et]))return et}function findIndex(o,i){for(let et=0;et<o.length;et++)if(i(o[et]))return et}function buildMatchPatternFn(o){return(i,et={})=>{const nt=i.match(o.matchPattern);if(!nt)return null;const ot=nt[0],st=i.match(o.parsePattern);if(!st)return null;let lt=o.valueCallback?o.valueCallback(st[0]):st[0];lt=et.valueCallback?et.valueCallback(lt):lt;const ht=i.slice(ot.length);return{value:lt,rest:ht}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:o=>parseInt(o,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:o=>o+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(o){const i=toDate(o);return differenceInCalendarDays(i,startOfYear(i))+1}function getISOWeek(o){const i=toDate(o),et=+startOfISOWeek(i)-+startOfISOWeekYear(i);return Math.round(et/millisecondsInWeek)+1}function getWeekYear(o,i){var vt,Rt,wt,$t;const et=toDate(o),nt=et.getFullYear(),ot=getDefaultOptions(),st=(i==null?void 0:i.firstWeekContainsDate)??((Rt=(vt=i==null?void 0:i.locale)==null?void 0:vt.options)==null?void 0:Rt.firstWeekContainsDate)??ot.firstWeekContainsDate??(($t=(wt=ot.locale)==null?void 0:wt.options)==null?void 0:$t.firstWeekContainsDate)??1,lt=constructFrom(o,0);lt.setFullYear(nt+1,0,st),lt.setHours(0,0,0,0);const ht=startOfWeek(lt,i),ft=constructFrom(o,0);ft.setFullYear(nt,0,st),ft.setHours(0,0,0,0);const St=startOfWeek(ft,i);return et.getTime()>=ht.getTime()?nt+1:et.getTime()>=St.getTime()?nt:nt-1}function startOfWeekYear(o,i){var ht,ft,St,vt;const et=getDefaultOptions(),nt=(i==null?void 0:i.firstWeekContainsDate)??((ft=(ht=i==null?void 0:i.locale)==null?void 0:ht.options)==null?void 0:ft.firstWeekContainsDate)??et.firstWeekContainsDate??((vt=(St=et.locale)==null?void 0:St.options)==null?void 0:vt.firstWeekContainsDate)??1,ot=getWeekYear(o,i),st=constructFrom(o,0);return st.setFullYear(ot,0,nt),st.setHours(0,0,0,0),startOfWeek(st,i)}function getWeek(o,i){const et=toDate(o),nt=+startOfWeek(et,i)-+startOfWeekYear(et,i);return Math.round(nt/millisecondsInWeek)+1}function addLeadingZeros(o,i){const et=o<0?"-":"",nt=Math.abs(o).toString().padStart(i,"0");return et+nt}const lightFormatters={y(o,i){const et=o.getFullYear(),nt=et>0?et:1-et;return addLeadingZeros(i==="yy"?nt%100:nt,i.length)},M(o,i){const et=o.getMonth();return i==="M"?String(et+1):addLeadingZeros(et+1,2)},d(o,i){return addLeadingZeros(o.getDate(),i.length)},a(o,i){const et=o.getHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return et.toUpperCase();case"aaa":return et;case"aaaaa":return et[0];case"aaaa":default:return et==="am"?"a.m.":"p.m."}},h(o,i){return addLeadingZeros(o.getHours()%12||12,i.length)},H(o,i){return addLeadingZeros(o.getHours(),i.length)},m(o,i){return addLeadingZeros(o.getMinutes(),i.length)},s(o,i){return addLeadingZeros(o.getSeconds(),i.length)},S(o,i){const et=i.length,nt=o.getMilliseconds(),ot=Math.trunc(nt*Math.pow(10,et-3));return addLeadingZeros(ot,i.length)}},dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(o,i,et){const nt=o.getFullYear()>0?1:0;switch(i){case"G":case"GG":case"GGG":return et.era(nt,{width:"abbreviated"});case"GGGGG":return et.era(nt,{width:"narrow"});case"GGGG":default:return et.era(nt,{width:"wide"})}},y:function(o,i,et){if(i==="yo"){const nt=o.getFullYear(),ot=nt>0?nt:1-nt;return et.ordinalNumber(ot,{unit:"year"})}return lightFormatters.y(o,i)},Y:function(o,i,et,nt){const ot=getWeekYear(o,nt),st=ot>0?ot:1-ot;if(i==="YY"){const lt=st%100;return addLeadingZeros(lt,2)}return i==="Yo"?et.ordinalNumber(st,{unit:"year"}):addLeadingZeros(st,i.length)},R:function(o,i){const et=getISOWeekYear(o);return addLeadingZeros(et,i.length)},u:function(o,i){const et=o.getFullYear();return addLeadingZeros(et,i.length)},Q:function(o,i,et){const nt=Math.ceil((o.getMonth()+1)/3);switch(i){case"Q":return String(nt);case"QQ":return addLeadingZeros(nt,2);case"Qo":return et.ordinalNumber(nt,{unit:"quarter"});case"QQQ":return et.quarter(nt,{width:"abbreviated",context:"formatting"});case"QQQQQ":return et.quarter(nt,{width:"narrow",context:"formatting"});case"QQQQ":default:return et.quarter(nt,{width:"wide",context:"formatting"})}},q:function(o,i,et){const nt=Math.ceil((o.getMonth()+1)/3);switch(i){case"q":return String(nt);case"qq":return addLeadingZeros(nt,2);case"qo":return et.ordinalNumber(nt,{unit:"quarter"});case"qqq":return et.quarter(nt,{width:"abbreviated",context:"standalone"});case"qqqqq":return et.quarter(nt,{width:"narrow",context:"standalone"});case"qqqq":default:return et.quarter(nt,{width:"wide",context:"standalone"})}},M:function(o,i,et){const nt=o.getMonth();switch(i){case"M":case"MM":return lightFormatters.M(o,i);case"Mo":return et.ordinalNumber(nt+1,{unit:"month"});case"MMM":return et.month(nt,{width:"abbreviated",context:"formatting"});case"MMMMM":return et.month(nt,{width:"narrow",context:"formatting"});case"MMMM":default:return et.month(nt,{width:"wide",context:"formatting"})}},L:function(o,i,et){const nt=o.getMonth();switch(i){case"L":return String(nt+1);case"LL":return addLeadingZeros(nt+1,2);case"Lo":return et.ordinalNumber(nt+1,{unit:"month"});case"LLL":return et.month(nt,{width:"abbreviated",context:"standalone"});case"LLLLL":return et.month(nt,{width:"narrow",context:"standalone"});case"LLLL":default:return et.month(nt,{width:"wide",context:"standalone"})}},w:function(o,i,et,nt){const ot=getWeek(o,nt);return i==="wo"?et.ordinalNumber(ot,{unit:"week"}):addLeadingZeros(ot,i.length)},I:function(o,i,et){const nt=getISOWeek(o);return i==="Io"?et.ordinalNumber(nt,{unit:"week"}):addLeadingZeros(nt,i.length)},d:function(o,i,et){return i==="do"?et.ordinalNumber(o.getDate(),{unit:"date"}):lightFormatters.d(o,i)},D:function(o,i,et){const nt=getDayOfYear(o);return i==="Do"?et.ordinalNumber(nt,{unit:"dayOfYear"}):addLeadingZeros(nt,i.length)},E:function(o,i,et){const nt=o.getDay();switch(i){case"E":case"EE":case"EEE":return et.day(nt,{width:"abbreviated",context:"formatting"});case"EEEEE":return et.day(nt,{width:"narrow",context:"formatting"});case"EEEEEE":return et.day(nt,{width:"short",context:"formatting"});case"EEEE":default:return et.day(nt,{width:"wide",context:"formatting"})}},e:function(o,i,et,nt){const ot=o.getDay(),st=(ot-nt.weekStartsOn+8)%7||7;switch(i){case"e":return String(st);case"ee":return addLeadingZeros(st,2);case"eo":return et.ordinalNumber(st,{unit:"day"});case"eee":return et.day(ot,{width:"abbreviated",context:"formatting"});case"eeeee":return et.day(ot,{width:"narrow",context:"formatting"});case"eeeeee":return et.day(ot,{width:"short",context:"formatting"});case"eeee":default:return et.day(ot,{width:"wide",context:"formatting"})}},c:function(o,i,et,nt){const ot=o.getDay(),st=(ot-nt.weekStartsOn+8)%7||7;switch(i){case"c":return String(st);case"cc":return addLeadingZeros(st,i.length);case"co":return et.ordinalNumber(st,{unit:"day"});case"ccc":return et.day(ot,{width:"abbreviated",context:"standalone"});case"ccccc":return et.day(ot,{width:"narrow",context:"standalone"});case"cccccc":return et.day(ot,{width:"short",context:"standalone"});case"cccc":default:return et.day(ot,{width:"wide",context:"standalone"})}},i:function(o,i,et){const nt=o.getDay(),ot=nt===0?7:nt;switch(i){case"i":return String(ot);case"ii":return addLeadingZeros(ot,i.length);case"io":return et.ordinalNumber(ot,{unit:"day"});case"iii":return et.day(nt,{width:"abbreviated",context:"formatting"});case"iiiii":return et.day(nt,{width:"narrow",context:"formatting"});case"iiiiii":return et.day(nt,{width:"short",context:"formatting"});case"iiii":default:return et.day(nt,{width:"wide",context:"formatting"})}},a:function(o,i,et){const ot=o.getHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return et.dayPeriod(ot,{width:"abbreviated",context:"formatting"});case"aaa":return et.dayPeriod(ot,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return et.dayPeriod(ot,{width:"narrow",context:"formatting"});case"aaaa":default:return et.dayPeriod(ot,{width:"wide",context:"formatting"})}},b:function(o,i,et){const nt=o.getHours();let ot;switch(nt===12?ot=dayPeriodEnum.noon:nt===0?ot=dayPeriodEnum.midnight:ot=nt/12>=1?"pm":"am",i){case"b":case"bb":return et.dayPeriod(ot,{width:"abbreviated",context:"formatting"});case"bbb":return et.dayPeriod(ot,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return et.dayPeriod(ot,{width:"narrow",context:"formatting"});case"bbbb":default:return et.dayPeriod(ot,{width:"wide",context:"formatting"})}},B:function(o,i,et){const nt=o.getHours();let ot;switch(nt>=17?ot=dayPeriodEnum.evening:nt>=12?ot=dayPeriodEnum.afternoon:nt>=4?ot=dayPeriodEnum.morning:ot=dayPeriodEnum.night,i){case"B":case"BB":case"BBB":return et.dayPeriod(ot,{width:"abbreviated",context:"formatting"});case"BBBBB":return et.dayPeriod(ot,{width:"narrow",context:"formatting"});case"BBBB":default:return et.dayPeriod(ot,{width:"wide",context:"formatting"})}},h:function(o,i,et){if(i==="ho"){let nt=o.getHours()%12;return nt===0&&(nt=12),et.ordinalNumber(nt,{unit:"hour"})}return lightFormatters.h(o,i)},H:function(o,i,et){return i==="Ho"?et.ordinalNumber(o.getHours(),{unit:"hour"}):lightFormatters.H(o,i)},K:function(o,i,et){const nt=o.getHours()%12;return i==="Ko"?et.ordinalNumber(nt,{unit:"hour"}):addLeadingZeros(nt,i.length)},k:function(o,i,et){let nt=o.getHours();return nt===0&&(nt=24),i==="ko"?et.ordinalNumber(nt,{unit:"hour"}):addLeadingZeros(nt,i.length)},m:function(o,i,et){return i==="mo"?et.ordinalNumber(o.getMinutes(),{unit:"minute"}):lightFormatters.m(o,i)},s:function(o,i,et){return i==="so"?et.ordinalNumber(o.getSeconds(),{unit:"second"}):lightFormatters.s(o,i)},S:function(o,i){return lightFormatters.S(o,i)},X:function(o,i,et){const nt=o.getTimezoneOffset();if(nt===0)return"Z";switch(i){case"X":return formatTimezoneWithOptionalMinutes(nt);case"XXXX":case"XX":return formatTimezone(nt);case"XXXXX":case"XXX":default:return formatTimezone(nt,":")}},x:function(o,i,et){const nt=o.getTimezoneOffset();switch(i){case"x":return formatTimezoneWithOptionalMinutes(nt);case"xxxx":case"xx":return formatTimezone(nt);case"xxxxx":case"xxx":default:return formatTimezone(nt,":")}},O:function(o,i,et){const nt=o.getTimezoneOffset();switch(i){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(nt,":");case"OOOO":default:return"GMT"+formatTimezone(nt,":")}},z:function(o,i,et){const nt=o.getTimezoneOffset();switch(i){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(nt,":");case"zzzz":default:return"GMT"+formatTimezone(nt,":")}},t:function(o,i,et){const nt=Math.trunc(o.getTime()/1e3);return addLeadingZeros(nt,i.length)},T:function(o,i,et){const nt=o.getTime();return addLeadingZeros(nt,i.length)}};function formatTimezoneShort(o,i=""){const et=o>0?"-":"+",nt=Math.abs(o),ot=Math.trunc(nt/60),st=nt%60;return st===0?et+String(ot):et+String(ot)+i+addLeadingZeros(st,2)}function formatTimezoneWithOptionalMinutes(o,i){return o%60===0?(o>0?"-":"+")+addLeadingZeros(Math.abs(o)/60,2):formatTimezone(o,i)}function formatTimezone(o,i=""){const et=o>0?"-":"+",nt=Math.abs(o),ot=addLeadingZeros(Math.trunc(nt/60),2),st=addLeadingZeros(nt%60,2);return et+ot+i+st}const dateLongFormatter=(o,i)=>{switch(o){case"P":return i.date({width:"short"});case"PP":return i.date({width:"medium"});case"PPP":return i.date({width:"long"});case"PPPP":default:return i.date({width:"full"})}},timeLongFormatter=(o,i)=>{switch(o){case"p":return i.time({width:"short"});case"pp":return i.time({width:"medium"});case"ppp":return i.time({width:"long"});case"pppp":default:return i.time({width:"full"})}},dateTimeLongFormatter=(o,i)=>{const et=o.match(/(P+)(p+)?/)||[],nt=et[1],ot=et[2];if(!ot)return dateLongFormatter(o,i);let st;switch(nt){case"P":st=i.dateTime({width:"short"});break;case"PP":st=i.dateTime({width:"medium"});break;case"PPP":st=i.dateTime({width:"long"});break;case"PPPP":default:st=i.dateTime({width:"full"});break}return st.replace("{{date}}",dateLongFormatter(nt,i)).replace("{{time}}",timeLongFormatter(ot,i))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(o){return dayOfYearTokenRE.test(o)}function isProtectedWeekYearToken(o){return weekYearTokenRE.test(o)}function warnOrThrowProtectedError(o,i,et){const nt=message(o,i,et);if(console.warn(nt),throwTokens.includes(o))throw new RangeError(nt)}function message(o,i,et){const nt=o[0]==="Y"?"years":"days of the month";return`Use \`${o.toLowerCase()}\` instead of \`${o}\` (in \`${i}\`) for formatting ${nt} to the input \`${et}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(o,i,et){var vt,Rt,wt,$t,Dt,Pt,Ut,Ot;const nt=getDefaultOptions(),ot=(et==null?void 0:et.locale)??nt.locale??enUS,st=(et==null?void 0:et.firstWeekContainsDate)??((Rt=(vt=et==null?void 0:et.locale)==null?void 0:vt.options)==null?void 0:Rt.firstWeekContainsDate)??nt.firstWeekContainsDate??(($t=(wt=nt.locale)==null?void 0:wt.options)==null?void 0:$t.firstWeekContainsDate)??1,lt=(et==null?void 0:et.weekStartsOn)??((Pt=(Dt=et==null?void 0:et.locale)==null?void 0:Dt.options)==null?void 0:Pt.weekStartsOn)??nt.weekStartsOn??((Ot=(Ut=nt.locale)==null?void 0:Ut.options)==null?void 0:Ot.weekStartsOn)??0,ht=toDate(o);if(!isValid(ht))throw new RangeError("Invalid time value");let ft=i.match(longFormattingTokensRegExp).map(Lt=>{const xt=Lt[0];if(xt==="p"||xt==="P"){const jt=longFormatters[xt];return jt(Lt,ot.formatLong)}return Lt}).join("").match(formattingTokensRegExp).map(Lt=>{if(Lt==="''")return{isToken:!1,value:"'"};const xt=Lt[0];if(xt==="'")return{isToken:!1,value:cleanEscapedString(Lt)};if(formatters[xt])return{isToken:!0,value:Lt};if(xt.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+xt+"`");return{isToken:!1,value:Lt}});ot.localize.preprocessor&&(ft=ot.localize.preprocessor(ht,ft));const St={firstWeekContainsDate:st,weekStartsOn:lt,locale:ot};return ft.map(Lt=>{if(!Lt.isToken)return Lt.value;const xt=Lt.value;(!(et!=null&&et.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(xt)||!(et!=null&&et.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(xt))&&warnOrThrowProtectedError(xt,i,String(o));const jt=formatters[xt[0]];return jt(ht,xt,ot.localize,St)}).join("")}function cleanEscapedString(o){const i=o.match(escapedStringRegExp);return i?i[1].replace(doubleQuoteRegExp,"'"):o}function ChatMessage(o){function i(et){const nt=new Date(et);return format(nt,"yyyy-MM-dd HH:mm")}return jsxRuntimeExports.jsxs(Card$1,{sx:{padding:2,marginBottom:2,display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.message.fullName&&jsxRuntimeExports.jsx(Avatar$1,{src:o.getProfilesAvatar(o.message.profileId),alt:o.message.fullName,sx:{marginRight:1}}),jsxRuntimeExports.jsx(Typography$1,{variant:"body1",sx:{fontWeight:600},children:o.message.fullName}),jsxRuntimeExports.jsx(Typography$1,{variant:"body2",sx:{marginLeft:1,color:"text.secondary"},children:i(o.message.dateCreated)})]}),o.message.conversationParticipantId===o.activeParticipant.id&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(IconButton$1,{size:"small",onClick:()=>o.handleDeleteMessage(o.message.id),children:jsxRuntimeExports.jsx(default_1$e,{})}),jsxRuntimeExports.jsx(IconButton$1,{size:"small",onClick:()=>o.handleSetEditMode(o.message),children:jsxRuntimeExports.jsx(default_1$d,{})})]})]}),jsxRuntimeExports.jsx(Typography$1,{variant:"body1",sx:{marginLeft:25},children:o.isEditMode&&o.messageIdToEdit==o.message.id?jsxRuntimeExports.jsx(TextField$1,{value:o.editedContent,onChange:et=>o.setEditedContent(et.target.value),type:"text",fullWidth:!0,variant:"outlined",onKeyDown:o.handleKeyPress}):o.message.content})]},o.message.id)}function formatProdErrorMessage$1(o){return`Minified Redux error #${o}; visit https://redux.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$1(o){if(typeof o!="object"||o===null)return!1;let i=o;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(o)===i||Object.getPrototypeOf(o)===null}function createStore(o,i,et){if(typeof o!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof i=="function"&&typeof et=="function"||typeof et=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof i=="function"&&typeof et>"u"&&(et=i,i=void 0),typeof et<"u"){if(typeof et!="function")throw new Error(formatProdErrorMessage$1(1));return et(createStore)(o,i)}let nt=o,ot=i,st=new Map,lt=st,ht=0,ft=!1;function St(){lt===st&&(lt=new Map,st.forEach((Ut,Ot)=>{lt.set(Ot,Ut)}))}function vt(){if(ft)throw new Error(formatProdErrorMessage$1(3));return ot}function Rt(Ut){if(typeof Ut!="function")throw new Error(formatProdErrorMessage$1(4));if(ft)throw new Error(formatProdErrorMessage$1(5));let Ot=!0;St();const Lt=ht++;return lt.set(Lt,Ut),function(){if(Ot){if(ft)throw new Error(formatProdErrorMessage$1(6));Ot=!1,St(),lt.delete(Lt),st=null}}}function wt(Ut){if(!isPlainObject$1(Ut))throw new Error(formatProdErrorMessage$1(7));if(typeof Ut.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof Ut.type!="string")throw new Error(formatProdErrorMessage$1(17));if(ft)throw new Error(formatProdErrorMessage$1(9));try{ft=!0,ot=nt(ot,Ut)}finally{ft=!1}return(st=lt).forEach(Lt=>{Lt()}),Ut}function $t(Ut){if(typeof Ut!="function")throw new Error(formatProdErrorMessage$1(10));nt=Ut,wt({type:actionTypes_default.REPLACE})}function Dt(){const Ut=Rt;return{subscribe(Ot){if(typeof Ot!="object"||Ot===null)throw new Error(formatProdErrorMessage$1(11));function Lt(){const jt=Ot;jt.next&&jt.next(vt())}return Lt(),{unsubscribe:Ut(Lt)}},[symbol_observable_default](){return this}}}return wt({type:actionTypes_default.INIT}),{dispatch:wt,subscribe:Rt,getState:vt,replaceReducer:$t,[symbol_observable_default]:Dt}}function assertReducerShape(o){Object.keys(o).forEach(i=>{const et=o[i];if(typeof et(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof et(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(o){const i=Object.keys(o),et={};for(let st=0;st<i.length;st++){const lt=i[st];typeof o[lt]=="function"&&(et[lt]=o[lt])}const nt=Object.keys(et);let ot;try{assertReducerShape(et)}catch(st){ot=st}return function(lt={},ht){if(ot)throw ot;let ft=!1;const St={};for(let vt=0;vt<nt.length;vt++){const Rt=nt[vt],wt=et[Rt],$t=lt[Rt],Dt=wt($t,ht);if(typeof Dt>"u")throw ht&&ht.type,new Error(formatProdErrorMessage$1(14));St[Rt]=Dt,ft=ft||Dt!==$t}return ft=ft||nt.length!==Object.keys(lt).length,ft?St:lt}}function compose(...o){return o.length===0?i=>i:o.length===1?o[0]:o.reduce((i,et)=>(...nt)=>i(et(...nt)))}function applyMiddleware(...o){return i=>(et,nt)=>{const ot=i(et,nt);let st=()=>{throw new Error(formatProdErrorMessage$1(15))};const lt={getState:ot.getState,dispatch:(ft,...St)=>st(ft,...St)},ht=o.map(ft=>ft(lt));return st=compose(...ht)(ot.dispatch),{...ot,dispatch:st}}}function isAction(o){return isPlainObject$1(o)&&"type"in o&&typeof o.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(o,...i){throw new Error(`[Immer] minified error nr: ${o}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(o){return!!o&&!!o[DRAFT_STATE]}function isDraftable(o){var i;return o?isPlainObject(o)||Array.isArray(o)||!!o[DRAFTABLE]||!!((i=o.constructor)!=null&&i[DRAFTABLE])||isMap(o)||isSet(o):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(o){if(!o||typeof o!="object")return!1;const i=getPrototypeOf(o);if(i===null)return!0;const et=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return et===Object?!0:typeof et=="function"&&Function.toString.call(et)===objectCtorString}function each(o,i){getArchtype(o)===0?Object.entries(o).forEach(([et,nt])=>{i(et,nt,o)}):o.forEach((et,nt)=>i(nt,et,o))}function getArchtype(o){const i=o[DRAFT_STATE];return i?i.type_:Array.isArray(o)?1:isMap(o)?2:isSet(o)?3:0}function has(o,i){return getArchtype(o)===2?o.has(i):Object.prototype.hasOwnProperty.call(o,i)}function set(o,i,et){const nt=getArchtype(o);nt===2?o.set(i,et):nt===3?o.add(et):o[i]=et}function is(o,i){return o===i?o!==0||1/o===1/i:o!==o&&i!==i}function isMap(o){return o instanceof Map}function isSet(o){return o instanceof Set}function latest(o){return o.copy_||o.base_}function shallowCopy(o,i){if(isMap(o))return new Map(o);if(isSet(o))return new Set(o);if(Array.isArray(o))return Array.prototype.slice.call(o);if(!i&&isPlainObject(o))return getPrototypeOf(o)?{...o}:Object.assign(Object.create(null),o);const et=Object.getOwnPropertyDescriptors(o);delete et[DRAFT_STATE];let nt=Reflect.ownKeys(et);for(let ot=0;ot<nt.length;ot++){const st=nt[ot],lt=et[st];lt.writable===!1&&(lt.writable=!0,lt.configurable=!0),(lt.get||lt.set)&&(et[st]={configurable:!0,writable:!0,enumerable:lt.enumerable,value:o[st]})}return Object.create(getPrototypeOf(o),et)}function freeze(o,i=!1){return isFrozen(o)||isDraft(o)||!isDraftable(o)||(getArchtype(o)>1&&(o.set=o.add=o.clear=o.delete=dontMutateFrozenCollections),Object.freeze(o),i&&each(o,(et,nt)=>freeze(nt,!0))),o}function dontMutateFrozenCollections(){die(2)}function isFrozen(o){return Object.isFrozen(o)}var plugins={};function getPlugin(o){const i=plugins[o];return i||die(0,o),i}var currentScope;function getCurrentScope(){return currentScope}function createScope(o,i){return{drafts_:[],parent_:o,immer_:i,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(o,i){i&&(getPlugin("Patches"),o.patches_=[],o.inversePatches_=[],o.patchListener_=i)}function revokeScope(o){leaveScope(o),o.drafts_.forEach(revokeDraft),o.drafts_=null}function leaveScope(o){o===currentScope&&(currentScope=o.parent_)}function enterScope(o){return currentScope=createScope(currentScope,o)}function revokeDraft(o){const i=o[DRAFT_STATE];i.type_===0||i.type_===1?i.revoke_():i.revoked_=!0}function processResult(o,i){i.unfinalizedDrafts_=i.drafts_.length;const et=i.drafts_[0];return o!==void 0&&o!==et?(et[DRAFT_STATE].modified_&&(revokeScope(i),die(4)),isDraftable(o)&&(o=finalize(i,o),i.parent_||maybeFreeze(i,o)),i.patches_&&getPlugin("Patches").generateReplacementPatches_(et[DRAFT_STATE].base_,o,i.patches_,i.inversePatches_)):o=finalize(i,et,[]),revokeScope(i),i.patches_&&i.patchListener_(i.patches_,i.inversePatches_),o!==NOTHING?o:void 0}function finalize(o,i,et){if(isFrozen(i))return i;const nt=i[DRAFT_STATE];if(!nt)return each(i,(ot,st)=>finalizeProperty(o,nt,i,ot,st,et)),i;if(nt.scope_!==o)return i;if(!nt.modified_)return maybeFreeze(o,nt.base_,!0),nt.base_;if(!nt.finalized_){nt.finalized_=!0,nt.scope_.unfinalizedDrafts_--;const ot=nt.copy_;let st=ot,lt=!1;nt.type_===3&&(st=new Set(ot),ot.clear(),lt=!0),each(st,(ht,ft)=>finalizeProperty(o,nt,ot,ht,ft,et,lt)),maybeFreeze(o,ot,!1),et&&o.patches_&&getPlugin("Patches").generatePatches_(nt,et,o.patches_,o.inversePatches_)}return nt.copy_}function finalizeProperty(o,i,et,nt,ot,st,lt){if(isDraft(ot)){const ht=st&&i&&i.type_!==3&&!has(i.assigned_,nt)?st.concat(nt):void 0,ft=finalize(o,ot,ht);if(set(et,nt,ft),isDraft(ft))o.canAutoFreeze_=!1;else return}else lt&&et.add(ot);if(isDraftable(ot)&&!isFrozen(ot)){if(!o.immer_.autoFreeze_&&o.unfinalizedDrafts_<1)return;finalize(o,ot),(!i||!i.scope_.parent_)&&maybeFreeze(o,ot)}}function maybeFreeze(o,i,et=!1){!o.parent_&&o.immer_.autoFreeze_&&o.canAutoFreeze_&&freeze(i,et)}function createProxyProxy(o,i){const et=Array.isArray(o),nt={type_:et?1:0,scope_:i?i.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:i,base_:o,draft_:null,copy_:null,revoke_:null,isManual_:!1};let ot=nt,st=objectTraps;et&&(ot=[nt],st=arrayTraps);const{revoke:lt,proxy:ht}=Proxy.revocable(ot,st);return nt.draft_=ht,nt.revoke_=lt,ht}var objectTraps={get(o,i){if(i===DRAFT_STATE)return o;const et=latest(o);if(!has(et,i))return readPropFromProto(o,et,i);const nt=et[i];return o.finalized_||!isDraftable(nt)?nt:nt===peek(o.base_,i)?(prepareCopy(o),o.copy_[i]=createProxy(nt,o)):nt},has(o,i){return i in latest(o)},ownKeys(o){return Reflect.ownKeys(latest(o))},set(o,i,et){const nt=getDescriptorFromProto(latest(o),i);if(nt!=null&&nt.set)return nt.set.call(o.draft_,et),!0;if(!o.modified_){const ot=peek(latest(o),i),st=ot==null?void 0:ot[DRAFT_STATE];if(st&&st.base_===et)return o.copy_[i]=et,o.assigned_[i]=!1,!0;if(is(et,ot)&&(et!==void 0||has(o.base_,i)))return!0;prepareCopy(o),markChanged(o)}return o.copy_[i]===et&&(et!==void 0||i in o.copy_)||Number.isNaN(et)&&Number.isNaN(o.copy_[i])||(o.copy_[i]=et,o.assigned_[i]=!0),!0},deleteProperty(o,i){return peek(o.base_,i)!==void 0||i in o.base_?(o.assigned_[i]=!1,prepareCopy(o),markChanged(o)):delete o.assigned_[i],o.copy_&&delete o.copy_[i],!0},getOwnPropertyDescriptor(o,i){const et=latest(o),nt=Reflect.getOwnPropertyDescriptor(et,i);return nt&&{writable:!0,configurable:o.type_!==1||i!=="length",enumerable:nt.enumerable,value:et[i]}},defineProperty(){die(11)},getPrototypeOf(o){return getPrototypeOf(o.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(o,i)=>{arrayTraps[o]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}});arrayTraps.deleteProperty=function(o,i){return arrayTraps.set.call(this,o,i,void 0)};arrayTraps.set=function(o,i,et){return objectTraps.set.call(this,o[0],i,et,o[0])};function peek(o,i){const et=o[DRAFT_STATE];return(et?latest(et):o)[i]}function readPropFromProto(o,i,et){var ot;const nt=getDescriptorFromProto(i,et);return nt?"value"in nt?nt.value:(ot=nt.get)==null?void 0:ot.call(o.draft_):void 0}function getDescriptorFromProto(o,i){if(!(i in o))return;let et=getPrototypeOf(o);for(;et;){const nt=Object.getOwnPropertyDescriptor(et,i);if(nt)return nt;et=getPrototypeOf(et)}}function markChanged(o){o.modified_||(o.modified_=!0,o.parent_&&markChanged(o.parent_))}function prepareCopy(o){o.copy_||(o.copy_=shallowCopy(o.base_,o.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(o){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(i,et,nt)=>{if(typeof i=="function"&&typeof et!="function"){const st=et;et=i;const lt=this;return function(ft=st,...St){return lt.produce(ft,vt=>et.call(this,vt,...St))}}typeof et!="function"&&die(6),nt!==void 0&&typeof nt!="function"&&die(7);let ot;if(isDraftable(i)){const st=enterScope(this),lt=createProxy(i,void 0);let ht=!0;try{ot=et(lt),ht=!1}finally{ht?revokeScope(st):leaveScope(st)}return usePatchesInScope(st,nt),processResult(ot,st)}else if(!i||typeof i!="object"){if(ot=et(i),ot===void 0&&(ot=i),ot===NOTHING&&(ot=void 0),this.autoFreeze_&&freeze(ot,!0),nt){const st=[],lt=[];getPlugin("Patches").generateReplacementPatches_(i,ot,st,lt),nt(st,lt)}return ot}else die(1,i)},this.produceWithPatches=(i,et)=>{if(typeof i=="function")return(lt,...ht)=>this.produceWithPatches(lt,ft=>i(ft,...ht));let nt,ot;return[this.produce(i,et,(lt,ht)=>{nt=lt,ot=ht}),nt,ot]},typeof(o==null?void 0:o.autoFreeze)=="boolean"&&this.setAutoFreeze(o.autoFreeze),typeof(o==null?void 0:o.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(o.useStrictShallowCopy)}createDraft(o){isDraftable(o)||die(8),isDraft(o)&&(o=current(o));const i=enterScope(this),et=createProxy(o,void 0);return et[DRAFT_STATE].isManual_=!0,leaveScope(i),et}finishDraft(o,i){const et=o&&o[DRAFT_STATE];(!et||!et.isManual_)&&die(9);const{scope_:nt}=et;return usePatchesInScope(nt,i),processResult(void 0,nt)}setAutoFreeze(o){this.autoFreeze_=o}setUseStrictShallowCopy(o){this.useStrictShallowCopy_=o}applyPatches(o,i){let et;for(et=i.length-1;et>=0;et--){const ot=i[et];if(ot.path.length===0&&ot.op==="replace"){o=ot.value;break}}et>-1&&(i=i.slice(et+1));const nt=getPlugin("Patches").applyPatches_;return isDraft(o)?nt(o,i):this.produce(o,ot=>nt(ot,i))}};function createProxy(o,i){const et=isMap(o)?getPlugin("MapSet").proxyMap_(o,i):isSet(o)?getPlugin("MapSet").proxySet_(o,i):createProxyProxy(o,i);return(i?i.scope_:getCurrentScope()).drafts_.push(et),et}function current(o){return isDraft(o)||die(10,o),currentImpl(o)}function currentImpl(o){if(!isDraftable(o)||isFrozen(o))return o;const i=o[DRAFT_STATE];let et;if(i){if(!i.modified_)return i.base_;i.finalized_=!0,et=shallowCopy(o,i.scope_.immer_.useStrictShallowCopy_)}else et=shallowCopy(o,!0);return each(et,(nt,ot)=>{set(et,nt,currentImpl(ot))}),i&&(i.finalized_=!1),et}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function assertIsFunction(o,i=`expected a function, instead received ${typeof o}`){if(typeof o!="function")throw new TypeError(i)}function assertIsObject(o,i=`expected an object, instead received ${typeof o}`){if(typeof o!="object")throw new TypeError(i)}function assertIsArrayOfFunctions(o,i="expected all items to be functions, instead received the following types: "){if(!o.every(et=>typeof et=="function")){const et=o.map(nt=>typeof nt=="function"?`function ${nt.name||"unnamed"}()`:typeof nt).join(", ");throw new TypeError(`${i}[${et}]`)}}var ensureIsArray=o=>Array.isArray(o)?o:[o];function getDependencies(o){const i=Array.isArray(o[0])?o[0]:o;return assertIsArrayOfFunctions(i,"createSelector expects all input-selectors to be functions, but received the following types: "),i}function collectInputSelectorResults(o,i){const et=[],{length:nt}=o;for(let ot=0;ot<nt;ot++)et.push(o[ot].apply(null,i));return et}var StrongRef=class{constructor(o){this.value=o}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(o,i={}){let et=createCacheNode();const{resultEqualityCheck:nt}=i;let ot,st=0;function lt(){var Rt;let ht=et;const{length:ft}=arguments;for(let wt=0,$t=ft;wt<$t;wt++){const Dt=arguments[wt];if(typeof Dt=="function"||typeof Dt=="object"&&Dt!==null){let Pt=ht.o;Pt===null&&(ht.o=Pt=new WeakMap);const Ut=Pt.get(Dt);Ut===void 0?(ht=createCacheNode(),Pt.set(Dt,ht)):ht=Ut}else{let Pt=ht.p;Pt===null&&(ht.p=Pt=new Map);const Ut=Pt.get(Dt);Ut===void 0?(ht=createCacheNode(),Pt.set(Dt,ht)):ht=Ut}}const St=ht;let vt;if(ht.s===TERMINATED?vt=ht.v:(vt=o.apply(null,arguments),st++),St.s=TERMINATED,nt){const wt=((Rt=ot==null?void 0:ot.deref)==null?void 0:Rt.call(ot))??ot;wt!=null&&nt(wt,vt)&&(vt=wt,st!==0&&st--),ot=typeof vt=="object"&&vt!==null||typeof vt=="function"?new Ref(vt):vt}return St.v=vt,vt}return lt.clearCache=()=>{et=createCacheNode(),lt.resetResultsCount()},lt.resultsCount=()=>st,lt.resetResultsCount=()=>{st=0},lt}function createSelectorCreator(o,...i){const et=typeof o=="function"?{memoize:o,memoizeOptions:i}:o,nt=(...ot)=>{let st=0,lt=0,ht,ft={},St=ot.pop();typeof St=="object"&&(ft=St,St=ot.pop()),assertIsFunction(St,`createSelector expects an output function after the inputs, but received: [${typeof St}]`);const vt={...et,...ft},{memoize:Rt,memoizeOptions:wt=[],argsMemoize:$t=weakMapMemoize,argsMemoizeOptions:Dt=[],devModeChecks:Pt={}}=vt,Ut=ensureIsArray(wt),Ot=ensureIsArray(Dt),Lt=getDependencies(ot),xt=Rt(function(){return st++,St.apply(null,arguments)},...Ut),jt=$t(function(){lt++;const qt=collectInputSelectorResults(Lt,arguments);return ht=xt.apply(null,qt),ht},...Ot);return Object.assign(jt,{resultFunc:St,memoizedResultFunc:xt,dependencies:Lt,dependencyRecomputations:()=>lt,resetDependencyRecomputations:()=>{lt=0},lastResult:()=>ht,recomputations:()=>st,resetRecomputations:()=>{st=0},memoize:Rt,argsMemoize:$t})};return Object.assign(nt,{withTypes:()=>nt}),nt}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((o,i=createSelector)=>{assertIsObject(o,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof o}`);const et=Object.keys(o),nt=et.map(st=>o[st]);return i(nt,(...st)=>st.reduce((lt,ht,ft)=>(lt[et[ft]]=ht,lt),{}))},{withTypes:()=>createStructuredSelector});function createThunkMiddleware(o){return({dispatch:et,getState:nt})=>ot=>st=>typeof st=="function"?st(et,nt,o):ot(st)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,createDraftSafeSelectorCreator=(...o)=>{const i=createSelectorCreator(...o),et=Object.assign((...nt)=>{const ot=i(...nt),st=(lt,...ht)=>ot(isDraft(lt)?current(lt):lt,...ht);return Object.assign(st,ot),st},{withTypes:()=>et});return et};createDraftSafeSelectorCreator(weakMapMemoize);var composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)},hasMatchFunction=o=>o&&typeof o.match=="function";function createAction(o,i){function et(...nt){if(i){let ot=i(...nt);if(!ot)throw new Error(formatProdErrorMessage(0));return{type:o,payload:ot.payload,..."meta"in ot&&{meta:ot.meta},..."error"in ot&&{error:ot.error}}}return{type:o,payload:nt[0]}}return et.toString=()=>`${o}`,et.type=o,et.match=nt=>isAction(nt)&&nt.type===o,et}var Tuple=class S0 extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,S0.prototype)}static get[Symbol.species](){return S0}concat(...i){return super.concat.apply(this,i)}prepend(...i){return i.length===1&&Array.isArray(i[0])?new S0(...i[0].concat(this)):new S0(...i.concat(this))}};function freezeDraftable(o){return isDraftable(o)?produce(o,()=>{}):o}function emplace(o,i,et){if(o.has(i)){let ot=o.get(i);return et.update&&(ot=et.update(ot,i,o),o.set(i,ot)),ot}if(!et.insert)throw new Error(formatProdErrorMessage(10));const nt=et.insert(i,o);return o.set(i,nt),nt}function isBoolean(o){return typeof o=="boolean"}var buildGetDefaultMiddleware=()=>function(i){const{thunk:et=!0,immutableCheck:nt=!0,serializableCheck:ot=!0,actionCreatorCheck:st=!0}=i??{};let lt=new Tuple;return et&&(isBoolean(et)?lt.push(thunk):lt.push(withExtraArgument(et.extraArgument))),lt},SHOULD_AUTOBATCH="RTK_autoBatch",createQueueWithTimer=o=>i=>{setTimeout(i,o)},rAF=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10),autoBatchEnhancer=(o={type:"raf"})=>i=>(...et)=>{const nt=i(...et);let ot=!0,st=!1,lt=!1;const ht=new Set,ft=o.type==="tick"?queueMicrotask:o.type==="raf"?rAF:o.type==="callback"?o.queueNotification:createQueueWithTimer(o.timeout),St=()=>{lt=!1,st&&(st=!1,ht.forEach(vt=>vt()))};return Object.assign({},nt,{subscribe(vt){const Rt=()=>ot&&vt(),wt=nt.subscribe(Rt);return ht.add(vt),()=>{wt(),ht.delete(vt)}},dispatch(vt){var Rt;try{return ot=!((Rt=vt==null?void 0:vt.meta)!=null&&Rt[SHOULD_AUTOBATCH]),st=!ot,st&&(lt||(lt=!0,ft(St))),nt.dispatch(vt)}finally{ot=!0}}})},buildGetDefaultEnhancers=o=>function(et){const{autoBatch:nt=!0}=et??{};let ot=new Tuple(o);return nt&&ot.push(autoBatchEnhancer(typeof nt=="object"?nt:void 0)),ot},IS_PRODUCTION=!0;function configureStore(o){const i=buildGetDefaultMiddleware(),{reducer:et=void 0,middleware:nt,devTools:ot=!0,preloadedState:st=void 0,enhancers:lt=void 0}=o||{};let ht;if(typeof et=="function")ht=et;else if(isPlainObject$1(et))ht=combineReducers(et);else throw new Error(formatProdErrorMessage(1));let ft;typeof nt=="function"?ft=nt(i):ft=i();let St=compose;ot&&(St=composeWithDevTools({trace:!IS_PRODUCTION,...typeof ot=="object"&&ot}));const vt=applyMiddleware(...ft),Rt=buildGetDefaultEnhancers(vt);let wt=typeof lt=="function"?lt(Rt):Rt();const $t=St(...wt);return createStore(ht,st,$t)}function executeReducerBuilderCallback(o){const i={},et=[];let nt;const ot={addCase(st,lt){const ht=typeof st=="string"?st:st.type;if(!ht)throw new Error(formatProdErrorMessage(28));if(ht in i)throw new Error(formatProdErrorMessage(29));return i[ht]=lt,ot},addMatcher(st,lt){return et.push({matcher:st,reducer:lt}),ot},addDefaultCase(st){return nt=st,ot}};return o(ot),[i,et,nt]}function isStateFunction(o){return typeof o=="function"}function createReducer(o,i){let[et,nt,ot]=executeReducerBuilderCallback(i),st;if(isStateFunction(o))st=()=>freezeDraftable(o());else{const ht=freezeDraftable(o);st=()=>ht}function lt(ht=st(),ft){let St=[et[ft.type],...nt.filter(({matcher:vt})=>vt(ft)).map(({reducer:vt})=>vt)];return St.filter(vt=>!!vt).length===0&&(St=[ot]),St.reduce((vt,Rt)=>{if(Rt)if(isDraft(vt)){const $t=Rt(vt,ft);return $t===void 0?vt:$t}else{if(isDraftable(vt))return produce(vt,wt=>Rt(wt,ft));{const wt=Rt(vt,ft);if(wt===void 0){if(vt===null)return vt;throw new Error(formatProdErrorMessage(9))}return wt}}return vt},ht)}return lt.getInitialState=st,lt}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(o=21)=>{let i="",et=o;for(;et--;)i+=urlAlphabet[Math.random()*64|0];return i},matches=(o,i)=>hasMatchFunction(o)?o.match(i):o(i);function isAnyOf(...o){return i=>o.some(et=>matches(et,i))}var commonProperties=["name","message","stack","code"],RejectWithValue=class{constructor(o,i){Ul(this,"_type");this.payload=o,this.meta=i}},FulfillWithMeta=class{constructor(o,i){Ul(this,"_type");this.payload=o,this.meta=i}},miniSerializeError=o=>{if(typeof o=="object"&&o!==null){const i={};for(const et of commonProperties)typeof o[et]=="string"&&(i[et]=o[et]);return i}return{message:String(o)}},createAsyncThunk=(()=>{function o(i,et,nt){const ot=createAction(i+"/fulfilled",(ft,St,vt,Rt)=>({payload:ft,meta:{...Rt||{},arg:vt,requestId:St,requestStatus:"fulfilled"}})),st=createAction(i+"/pending",(ft,St,vt)=>({payload:void 0,meta:{...vt||{},arg:St,requestId:ft,requestStatus:"pending"}})),lt=createAction(i+"/rejected",(ft,St,vt,Rt,wt)=>({payload:Rt,error:(nt&&nt.serializeError||miniSerializeError)(ft||"Rejected"),meta:{...wt||{},arg:vt,requestId:St,rejectedWithValue:!!Rt,requestStatus:"rejected",aborted:(ft==null?void 0:ft.name)==="AbortError",condition:(ft==null?void 0:ft.name)==="ConditionError"}}));function ht(ft){return(St,vt,Rt)=>{const wt=nt!=null&&nt.idGenerator?nt.idGenerator(ft):nanoid(),$t=new AbortController;let Dt,Pt;function Ut(Lt){Pt=Lt,$t.abort()}const Ot=async function(){var jt,Ht;let Lt;try{let qt=(jt=nt==null?void 0:nt.condition)==null?void 0:jt.call(nt,ft,{getState:vt,extra:Rt});if(isThenable(qt)&&(qt=await qt),qt===!1||$t.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const Kt=new Promise((nn,Zt)=>{Dt=()=>{Zt({name:"AbortError",message:Pt||"Aborted"})},$t.signal.addEventListener("abort",Dt)});St(st(wt,ft,(Ht=nt==null?void 0:nt.getPendingMeta)==null?void 0:Ht.call(nt,{requestId:wt,arg:ft},{getState:vt,extra:Rt}))),Lt=await Promise.race([Kt,Promise.resolve(et(ft,{dispatch:St,getState:vt,extra:Rt,requestId:wt,signal:$t.signal,abort:Ut,rejectWithValue:(nn,Zt)=>new RejectWithValue(nn,Zt),fulfillWithValue:(nn,Zt)=>new FulfillWithMeta(nn,Zt)})).then(nn=>{if(nn instanceof RejectWithValue)throw nn;return nn instanceof FulfillWithMeta?ot(nn.payload,wt,ft,nn.meta):ot(nn,wt,ft)})])}catch(qt){Lt=qt instanceof RejectWithValue?lt(null,wt,ft,qt.payload,qt.meta):lt(qt,wt,ft)}finally{Dt&&$t.signal.removeEventListener("abort",Dt)}return nt&&!nt.dispatchConditionRejection&&lt.match(Lt)&&Lt.meta.condition||St(Lt),Lt}();return Object.assign(Ot,{abort:Ut,requestId:wt,arg:ft,unwrap(){return Ot.then(unwrapResult)}})}}return Object.assign(ht,{pending:st,rejected:lt,fulfilled:ot,settled:isAnyOf(lt,ot),typePrefix:i})}return o.withTypes=()=>o,o})();function unwrapResult(o){if(o.meta&&o.meta.rejectedWithValue)throw o.payload;if(o.error)throw o.error;return o.payload}function isThenable(o){return o!==null&&typeof o=="object"&&typeof o.then=="function"}var asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(o,i){return`${o}/${i}`}function buildCreateSlice({creators:o}={}){var et;const i=(et=o==null?void 0:o.asyncThunk)==null?void 0:et[asyncThunkSymbol];return function(ot){const{name:st,reducerPath:lt=st}=ot;if(!st)throw new Error(formatProdErrorMessage(11));typeof process<"u";const ht=(typeof ot.reducers=="function"?ot.reducers(buildReducerCreators()):ot.reducers)||{},ft=Object.keys(ht),St={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},vt={addCase(xt,jt){const Ht=typeof xt=="string"?xt:xt.type;if(!Ht)throw new Error(formatProdErrorMessage(12));if(Ht in St.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return St.sliceCaseReducersByType[Ht]=jt,vt},addMatcher(xt,jt){return St.sliceMatchers.push({matcher:xt,reducer:jt}),vt},exposeAction(xt,jt){return St.actionCreators[xt]=jt,vt},exposeCaseReducer(xt,jt){return St.sliceCaseReducersByName[xt]=jt,vt}};ft.forEach(xt=>{const jt=ht[xt],Ht={reducerName:xt,type:getType(st,xt),createNotation:typeof ot.reducers=="function"};isAsyncThunkSliceReducerDefinition(jt)?handleThunkCaseReducerDefinition(Ht,jt,vt,i):handleNormalReducerDefinition(Ht,jt,vt)});function Rt(){const[xt={},jt=[],Ht=void 0]=typeof ot.extraReducers=="function"?executeReducerBuilderCallback(ot.extraReducers):[ot.extraReducers],qt={...xt,...St.sliceCaseReducersByType};return createReducer(ot.initialState,Kt=>{for(let nn in qt)Kt.addCase(nn,qt[nn]);for(let nn of St.sliceMatchers)Kt.addMatcher(nn.matcher,nn.reducer);for(let nn of jt)Kt.addMatcher(nn.matcher,nn.reducer);Ht&&Kt.addDefaultCase(Ht)})}const wt=xt=>xt,$t=new Map;let Dt;function Pt(xt,jt){return Dt||(Dt=Rt()),Dt(xt,jt)}function Ut(){return Dt||(Dt=Rt()),Dt.getInitialState()}function Ot(xt,jt=!1){function Ht(Kt){let nn=Kt[xt];return typeof nn>"u"&&jt&&(nn=Ut()),nn}function qt(Kt=wt){const nn=emplace($t,jt,{insert:()=>new WeakMap});return emplace(nn,Kt,{insert:()=>{const Zt={};for(const[tn,dn]of Object.entries(ot.selectors??{}))Zt[tn]=wrapSelector(dn,Kt,Ut,jt);return Zt}})}return{reducerPath:xt,getSelectors:qt,get selectors(){return qt(Ht)},selectSlice:Ht}}const Lt={name:st,reducer:Pt,actions:St.actionCreators,caseReducers:St.sliceCaseReducersByName,getInitialState:Ut,...Ot(lt),injectInto(xt,{reducerPath:jt,...Ht}={}){const qt=jt??lt;return xt.inject({reducerPath:qt,reducer:Pt},Ht),{...Lt,...Ot(qt,!0)}}};return Lt}}function wrapSelector(o,i,et,nt){function ot(st,...lt){let ht=i(st);return typeof ht>"u"&&nt&&(ht=et()),o(ht,...lt)}return ot.unwrapped=o,ot}var createSlice=buildCreateSlice();function buildReducerCreators(){function o(i,et){return{_reducerDefinitionType:"asyncThunk",payloadCreator:i,...et}}return o.withTypes=()=>o,{reducer(i){return Object.assign({[i.name](...et){return i(...et)}}[i.name],{_reducerDefinitionType:"reducer"})},preparedReducer(i,et){return{_reducerDefinitionType:"reducerWithPrepare",prepare:i,reducer:et}},asyncThunk:o}}function handleNormalReducerDefinition({type:o,reducerName:i,createNotation:et},nt,ot){let st,lt;if("reducer"in nt){if(et&&!isCaseReducerWithPrepareDefinition(nt))throw new Error(formatProdErrorMessage(17));st=nt.reducer,lt=nt.prepare}else st=nt;ot.addCase(o,st).exposeCaseReducer(i,st).exposeAction(i,lt?createAction(o,lt):createAction(o))}function isAsyncThunkSliceReducerDefinition(o){return o._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(o){return o._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:o,reducerName:i},et,nt,ot){if(!ot)throw new Error(formatProdErrorMessage(18));const{payloadCreator:st,fulfilled:lt,pending:ht,rejected:ft,settled:St,options:vt}=et,Rt=ot(o,st,vt);nt.exposeAction(i,Rt),lt&&nt.addCase(Rt.fulfilled,lt),ht&&nt.addCase(Rt.pending,ht),ft&&nt.addCase(Rt.rejected,ft),St&&nt.addMatcher(Rt.settled,St),nt.exposeCaseReducer(i,{fulfilled:lt||noop,pending:ht||noop,rejected:ft||noop,settled:St||noop})}function noop(){}var assertFunction=(o,i)=>{if(typeof o!="function")throw new Error(formatProdErrorMessage(32))},alm="listenerMiddleware",getListenerEntryPropsFrom=o=>{let{type:i,actionCreator:et,matcher:nt,predicate:ot,effect:st}=o;if(i)ot=createAction(i).match;else if(et)i=et.type,ot=et.match;else if(nt)ot=nt;else if(!ot)throw new Error(formatProdErrorMessage(21));return assertFunction(st),{predicate:ot,type:i,effect:st}},createListenerEntry=Object.assign(o=>{const{type:i,predicate:et,effect:nt}=getListenerEntryPropsFrom(o);return{id:nanoid(),effect:nt,type:i,predicate:et,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),addListener=Object.assign(createAction(`${alm}/add`),{withTypes:()=>addListener});createAction(`${alm}/removeAll`);var removeListener=Object.assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener});function formatProdErrorMessage(o){return`Minified Redux Toolkit error #${o}; visit https://redux-toolkit.js.org/Errors?code=${o} for the full message or use the non-minified dev environment for full errors. `}const conversationApiUrl=`http://${window.location.hostname}:5290/conversation`,FetchGetTeamMessages=async o=>{try{const i=await fetch(conversationApiUrl+"/teammessages",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error("Något gick fel vid hämtning av team conversation");const et=await i.json();return console.log("REPONSE: ",et),et.$values}catch(i){throw console.error(i),i}},FetchGetTeamConversation=async o=>{try{const i=await fetch(conversationApiUrl+"/teamconversation",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error("Något gick fel vid hämtning av team conversation");const et=await i.json();return console.log("REPONSE: ",et),et}catch(i){throw console.error(i),i}},FetchGetConversationParticipant=async(o,i)=>{try{const et={profileId:i,conversationId:o};console.log("DTO: ",et);const nt=await fetch(conversationApiUrl+"/conversationparticipant",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(et)});if(!nt.ok)throw new Error("Något gick fel vid hämtning av deltagare i konversationen");const ot=await nt.json();return console.log("REPONSE: ",ot),ot}catch(et){throw console.error(et),et}},initialState$6={teamConversation:void 0,activeConversation:void 0,activeConversationParticipant:void 0,error:null},GetTeamConversation=createAsyncThunk("conversation/getTeamConversation",async(o,i)=>{try{const et=await FetchGetTeamConversation(o);return et?(console.log("konverstion hämtade:",et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av konversation.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av konversation.")}}),GetConversationParticipant=createAsyncThunk("conversation/getConversationParticipant",async({profileId:o,conversationId:i},et)=>{try{const nt=await FetchGetConversationParticipant(i,o);return nt?(console.log("Deltagare hämtade:",nt),nt):et.rejectWithValue("Ett fel inträffade vid hämtning av deltagare.")}catch{return et.rejectWithValue("Ett fel inträffade vid hämtning av konversation.")}}),conversationSlice=createSlice({name:"conversation",initialState:initialState$6,reducers:{},extraReducers:o=>{o.addCase(GetTeamConversation.fulfilled,(i,et)=>{console.log("Fulfilled action payload:",et.payload),et.payload&&(console.log(et.payload),i.teamConversation=et.payload,i.error=null)}).addCase(GetTeamConversation.rejected,i=>{i.teamConversation=void 0,i.error="Något gick fel med hämtandet av konversation."}).addCase(GetConversationParticipant.fulfilled,(i,et)=>{et.payload&&(i.activeConversationParticipant=et.payload,i.error=null)}).addCase(GetConversationParticipant.rejected,i=>{i.activeConversationParticipant=void 0,i.error="Något gick fel med hämtandet av deltagare."})}}),conversationReducer=conversationSlice.reducer,messageApiUrl=`http://${window.location.hostname}:5290/message`,FetchDeleteMessage=async o=>{try{const i=await fetch(messageApiUrl,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("RESPONSE: ",i),i.ok)return!0;throw new Error("Något gick fel vid radering av meddelande")}catch(i){throw console.error(i),i}},FetchCreateMessage=async o=>{try{const i=await fetch(messageApiUrl+"/send",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(console.log("RESPONSE från create message: ",et),!i.ok)throw new Error("Något gick fel vid skapande av meddelande");const nt=et;return console.log("DATA: ",nt),nt}catch(i){throw console.error(i),i}},FetchEditMessage=async o=>{try{const i=await fetch(messageApiUrl,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(!i.ok)throw new Error("Något gick fel vid redigering av meddelande");return et}catch(i){throw console.error(i),i}};class HttpError extends Error{constructor(i,et){const nt=new.target.prototype;super(`${i}: Status code '${et}'`),this.statusCode=et,this.__proto__=nt}}class TimeoutError extends Error{constructor(i="A timeout occurred."){const et=new.target.prototype;super(i),this.__proto__=et}}class AbortError extends Error{constructor(i="An abort occurred."){const et=new.target.prototype;super(i),this.__proto__=et}}class UnsupportedTransportError extends Error{constructor(i,et){const nt=new.target.prototype;super(i),this.transport=et,this.errorType="UnsupportedTransportError",this.__proto__=nt}}class DisabledTransportError extends Error{constructor(i,et){const nt=new.target.prototype;super(i),this.transport=et,this.errorType="DisabledTransportError",this.__proto__=nt}}class FailedToStartTransportError extends Error{constructor(i,et){const nt=new.target.prototype;super(i),this.transport=et,this.errorType="FailedToStartTransportError",this.__proto__=nt}}class FailedToNegotiateWithServerError extends Error{constructor(i){const et=new.target.prototype;super(i),this.errorType="FailedToNegotiateWithServerError",this.__proto__=et}}class AggregateErrors extends Error{constructor(i,et){const nt=new.target.prototype;super(i),this.innerErrors=et,this.__proto__=nt}}class HttpResponse{constructor(i,et,nt){this.statusCode=i,this.statusText=et,this.content=nt}}class HttpClient{get(i,et){return this.send({...et,method:"GET",url:i})}post(i,et){return this.send({...et,method:"POST",url:i})}delete(i,et){return this.send({...et,method:"DELETE",url:i})}getCookieString(i){return""}}var LogLevel;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"})(LogLevel||(LogLevel={}));class NullLogger{constructor(){}log(i,et){}}NullLogger.instance=new NullLogger;const VERSION="8.0.0";class Arg{static isRequired(i,et){if(i==null)throw new Error(`The '${et}' argument is required.`)}static isNotEmpty(i,et){if(!i||i.match(/^\s*$/))throw new Error(`The '${et}' argument should not be empty.`)}static isIn(i,et,nt){if(!(i in et))throw new Error(`Unknown ${nt} value: ${i}.`)}}class Platform{static get isBrowser(){return!Platform.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Platform.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Platform.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function getDataDetail(o,i){let et="";return isArrayBuffer(o)?(et=`Binary data of length ${o.byteLength}`,i&&(et+=`. Content: '${formatArrayBuffer(o)}'`)):typeof o=="string"&&(et=`String data of length ${o.length}`,i&&(et+=`. Content: '${o}'`)),et}function formatArrayBuffer(o){const i=new Uint8Array(o);let et="";return i.forEach(nt=>{const ot=nt<16?"0":"";et+=`0x${ot}${nt.toString(16)} `}),et.substr(0,et.length-1)}function isArrayBuffer(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}async function sendMessage(o,i,et,nt,ot,st){const lt={},[ht,ft]=getUserAgentHeader();lt[ht]=ft,o.log(LogLevel.Trace,`(${i} transport) sending data. ${getDataDetail(ot,st.logMessageContent)}.`);const St=isArrayBuffer(ot)?"arraybuffer":"text",vt=await et.post(nt,{content:ot,headers:{...lt,...st.headers},responseType:St,timeout:st.timeout,withCredentials:st.withCredentials});o.log(LogLevel.Trace,`(${i} transport) request complete. Response status: ${vt.statusCode}.`)}function createLogger(o){return o===void 0?new ConsoleLogger(LogLevel.Information):o===null?NullLogger.instance:o.log!==void 0?o:new ConsoleLogger(o)}class SubjectSubscription{constructor(i,et){this._subject=i,this._observer=et}dispose(){const i=this._subject.observers.indexOf(this._observer);i>-1&&this._subject.observers.splice(i,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(et=>{})}}class ConsoleLogger{constructor(i){this._minLevel=i,this.out=console}log(i,et){if(i>=this._minLevel){const nt=`[${new Date().toISOString()}] ${LogLevel[i]}: ${et}`;switch(i){case LogLevel.Critical:case LogLevel.Error:this.out.error(nt);break;case LogLevel.Warning:this.out.warn(nt);break;case LogLevel.Information:this.out.info(nt);break;default:this.out.log(nt);break}}}}function getUserAgentHeader(){let o="X-SignalR-User-Agent";return Platform.isNode&&(o="User-Agent"),[o,constructUserAgent(VERSION,getOsName(),getRuntime(),getRuntimeVersion())]}function constructUserAgent(o,i,et,nt){let ot="Microsoft SignalR/";const st=o.split(".");return ot+=`${st[0]}.${st[1]}`,ot+=` (${o}; `,i&&i!==""?ot+=`${i}; `:ot+="Unknown OS; ",ot+=`${et}`,nt?ot+=`; ${nt}`:ot+="; Unknown Runtime Version",ot+=")",ot}function getOsName(){if(Platform.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function getRuntimeVersion(){if(Platform.isNode)return process.versions.node}function getRuntime(){return Platform.isNode?"NodeJS":"Browser"}function getErrorString(o){return o.stack?o.stack:o.message?o.message:`${o}`}function getGlobalThis(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function configureFetch(o){return typeof fetch>"u"||Platform.isNode?(o._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?o._fetchType=require("node-fetch"):o._fetchType=fetch,o._fetchType=require("fetch-cookie")(o._fetchType,o._jar),!0):!1}function configureAbortController(o){return typeof AbortController>"u"?(o._abortControllerType=require("abort-controller"),!0):!1}function getWS(){return require("ws")}function getEventSource(){return require("eventsource")}class FetchHttpClient extends HttpClient{constructor(i){super(),this._logger=i;const et={_fetchType:void 0,_jar:void 0};configureFetch(et)?(this._fetchType=et._fetchType,this._jar=et._jar):this._fetchType=fetch.bind(getGlobalThis()),this._abortControllerType=AbortController;const nt={_abortControllerType:this._abortControllerType};configureAbortController(nt)&&(this._abortControllerType=nt._abortControllerType)}async send(i){if(i.abortSignal&&i.abortSignal.aborted)throw new AbortError;if(!i.method)throw new Error("No method defined.");if(!i.url)throw new Error("No url defined.");const et=new this._abortControllerType;let nt;i.abortSignal&&(i.abortSignal.onabort=()=>{et.abort(),nt=new AbortError});let ot=null;if(i.timeout){const ft=i.timeout;ot=setTimeout(()=>{et.abort(),this._logger.log(LogLevel.Warning,"Timeout from HTTP request."),nt=new TimeoutError},ft)}i.content===""&&(i.content=void 0),i.content&&(i.headers=i.headers||{},isArrayBuffer(i.content)?i.headers["Content-Type"]="application/octet-stream":i.headers["Content-Type"]="text/plain;charset=UTF-8");let st;try{st=await this._fetchType(i.url,{body:i.content,cache:"no-cache",credentials:i.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...i.headers},method:i.method,mode:"cors",redirect:"follow",signal:et.signal})}catch(ft){throw nt||(this._logger.log(LogLevel.Warning,`Error from HTTP request. ${ft}.`),ft)}finally{ot&&clearTimeout(ot),i.abortSignal&&(i.abortSignal.onabort=null)}if(!st.ok){const ft=await deserializeContent(st,"text");throw new HttpError(ft||st.statusText,st.status)}const ht=await deserializeContent(st,i.responseType);return new HttpResponse(st.status,st.statusText,ht)}getCookieString(i){let et="";return Platform.isNode&&this._jar&&this._jar.getCookies(i,(nt,ot)=>et=ot.join("; ")),et}}function deserializeContent(o,i){let et;switch(i){case"arraybuffer":et=o.arrayBuffer();break;case"text":et=o.text();break;case"blob":case"document":case"json":throw new Error(`${i} is not supported.`);default:et=o.text();break}return et}class XhrHttpClient extends HttpClient{constructor(i){super(),this._logger=i}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new AbortError):i.method?i.url?new Promise((et,nt)=>{const ot=new XMLHttpRequest;ot.open(i.method,i.url,!0),ot.withCredentials=i.withCredentials===void 0?!0:i.withCredentials,ot.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.content===""&&(i.content=void 0),i.content&&(isArrayBuffer(i.content)?ot.setRequestHeader("Content-Type","application/octet-stream"):ot.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const st=i.headers;st&&Object.keys(st).forEach(lt=>{ot.setRequestHeader(lt,st[lt])}),i.responseType&&(ot.responseType=i.responseType),i.abortSignal&&(i.abortSignal.onabort=()=>{ot.abort(),nt(new AbortError)}),i.timeout&&(ot.timeout=i.timeout),ot.onload=()=>{i.abortSignal&&(i.abortSignal.onabort=null),ot.status>=200&&ot.status<300?et(new HttpResponse(ot.status,ot.statusText,ot.response||ot.responseText)):nt(new HttpError(ot.response||ot.responseText||ot.statusText,ot.status))},ot.onerror=()=>{this._logger.log(LogLevel.Warning,`Error from HTTP request. ${ot.status}: ${ot.statusText}.`),nt(new HttpError(ot.statusText,ot.status))},ot.ontimeout=()=>{this._logger.log(LogLevel.Warning,"Timeout from HTTP request."),nt(new TimeoutError)},ot.send(i.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class DefaultHttpClient extends HttpClient{constructor(i){if(super(),typeof fetch<"u"||Platform.isNode)this._httpClient=new FetchHttpClient(i);else if(typeof XMLHttpRequest<"u")this._httpClient=new XhrHttpClient(i);else throw new Error("No usable HttpClient found.")}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new AbortError):i.method?i.url?this._httpClient.send(i):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(i){return this._httpClient.getCookieString(i)}}class TextMessageFormat{static write(i){return`${i}${TextMessageFormat.RecordSeparator}`}static parse(i){if(i[i.length-1]!==TextMessageFormat.RecordSeparator)throw new Error("Message is incomplete.");const et=i.split(TextMessageFormat.RecordSeparator);return et.pop(),et}}TextMessageFormat.RecordSeparatorCode=30;TextMessageFormat.RecordSeparator=String.fromCharCode(TextMessageFormat.RecordSeparatorCode);class HandshakeProtocol{writeHandshakeRequest(i){return TextMessageFormat.write(JSON.stringify(i))}parseHandshakeResponse(i){let et,nt;if(isArrayBuffer(i)){const ht=new Uint8Array(i),ft=ht.indexOf(TextMessageFormat.RecordSeparatorCode);if(ft===-1)throw new Error("Message is incomplete.");const St=ft+1;et=String.fromCharCode.apply(null,Array.prototype.slice.call(ht.slice(0,St))),nt=ht.byteLength>St?ht.slice(St).buffer:null}else{const ht=i,ft=ht.indexOf(TextMessageFormat.RecordSeparator);if(ft===-1)throw new Error("Message is incomplete.");const St=ft+1;et=ht.substring(0,St),nt=ht.length>St?ht.substring(St):null}const ot=TextMessageFormat.parse(et),st=JSON.parse(ot[0]);if(st.type)throw new Error("Expected a handshake response from the server.");return[nt,st]}}var MessageType;(function(o){o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close",o[o.Ack=8]="Ack",o[o.Sequence=9]="Sequence"})(MessageType||(MessageType={}));class Subject{constructor(){this.observers=[]}next(i){for(const et of this.observers)et.next(i)}error(i){for(const et of this.observers)et.error&&et.error(i)}complete(){for(const i of this.observers)i.complete&&i.complete()}subscribe(i){return this.observers.push(i),new SubjectSubscription(this,i)}}class MessageBuffer{constructor(i,et,nt){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=i,this._connection=et,this._bufferSize=nt}async _send(i){const et=this._protocol.writeMessage(i);let nt=Promise.resolve();if(this._isInvocationMessage(i)){this._totalMessageCount++;let ot=()=>{},st=()=>{};isArrayBuffer(et)?this._bufferedByteCount+=et.byteLength:this._bufferedByteCount+=et.length,this._bufferedByteCount>=this._bufferSize&&(nt=new Promise((lt,ht)=>{ot=lt,st=ht})),this._messages.push(new BufferedItem(et,this._totalMessageCount,ot,st))}try{this._reconnectInProgress||await this._connection.send(et)}catch{this._disconnected()}await nt}_ack(i){let et=-1;for(let nt=0;nt<this._messages.length;nt++){const ot=this._messages[nt];if(ot._id<=i.sequenceId)et=nt,isArrayBuffer(ot._message)?this._bufferedByteCount-=ot._message.byteLength:this._bufferedByteCount-=ot._message.length,ot._resolver();else if(this._bufferedByteCount<this._bufferSize)ot._resolver();else break}et!==-1&&(this._messages=this._messages.slice(et+1))}_shouldProcessMessage(i){if(this._waitForSequenceMessage)return i.type!==MessageType.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(i))return!0;const et=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,et<=this._latestReceivedSequenceId?(et===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=et,this._ackTimer(),!0)}_resetSequence(i){if(i.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=i.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const i=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:MessageType.Sequence,sequenceId:i}));const et=this._messages;for(const nt of et)await this._connection.send(nt._message);this._reconnectInProgress=!1}_dispose(i){i??(i=new Error("Unable to reconnect to server."));for(const et of this._messages)et._rejector(i)}_isInvocationMessage(i){switch(i.type){case MessageType.Invocation:case MessageType.StreamItem:case MessageType.Completion:case MessageType.StreamInvocation:case MessageType.CancelInvocation:return!0;case MessageType.Close:case MessageType.Sequence:case MessageType.Ping:case MessageType.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:MessageType.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class BufferedItem{constructor(i,et,nt,ot){this._message=i,this._id=et,this._resolver=nt,this._rejector=ot}}const DEFAULT_TIMEOUT_IN_MS=30*1e3,DEFAULT_PING_INTERVAL_IN_MS=15*1e3,DEFAULT_STATEFUL_RECONNECT_BUFFER_SIZE=1e5;var HubConnectionState;(function(o){o.Disconnected="Disconnected",o.Connecting="Connecting",o.Connected="Connected",o.Disconnecting="Disconnecting",o.Reconnecting="Reconnecting"})(HubConnectionState||(HubConnectionState={}));class HubConnection{static create(i,et,nt,ot,st,lt,ht){return new HubConnection(i,et,nt,ot,st,lt,ht)}constructor(i,et,nt,ot,st,lt,ht){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(LogLevel.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Arg.isRequired(i,"connection"),Arg.isRequired(et,"logger"),Arg.isRequired(nt,"protocol"),this.serverTimeoutInMilliseconds=st??DEFAULT_TIMEOUT_IN_MS,this.keepAliveIntervalInMilliseconds=lt??DEFAULT_PING_INTERVAL_IN_MS,this._statefulReconnectBufferSize=ht??DEFAULT_STATEFUL_RECONNECT_BUFFER_SIZE,this._logger=et,this._protocol=nt,this.connection=i,this._reconnectPolicy=ot,this._handshakeProtocol=new HandshakeProtocol,this.connection.onreceive=ft=>this._processIncomingData(ft),this.connection.onclose=ft=>this._connectionClosed(ft),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=HubConnectionState.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:MessageType.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(i){if(this._connectionState!==HubConnectionState.Disconnected&&this._connectionState!==HubConnectionState.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!i)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=i}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==HubConnectionState.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=HubConnectionState.Connecting,this._logger.log(LogLevel.Debug,"Starting HubConnection.");try{await this._startInternal(),Platform.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=HubConnectionState.Connected,this._connectionStarted=!0,this._logger.log(LogLevel.Debug,"HubConnection connected successfully.")}catch(i){return this._connectionState=HubConnectionState.Disconnected,this._logger.log(LogLevel.Debug,`HubConnection failed to start successfully because of error '${i}'.`),Promise.reject(i)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const i=new Promise((et,nt)=>{this._handshakeResolver=et,this._handshakeRejecter=nt});await this.connection.start(this._protocol.transferFormat);try{let et=this._protocol.version;this.connection.features.reconnect||(et=1);const nt={protocol:this._protocol.name,version:et};if(this._logger.log(LogLevel.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(nt)),this._logger.log(LogLevel.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await i,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new MessageBuffer(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(et){throw this._logger.log(LogLevel.Debug,`Hub handshake failed with error '${et}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(et),et}}async stop(){const i=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await i}catch{}}_stopInternal(i){if(this._connectionState===HubConnectionState.Disconnected)return this._logger.log(LogLevel.Debug,`Call to HubConnection.stop(${i}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===HubConnectionState.Disconnecting)return this._logger.log(LogLevel.Debug,`Call to HttpConnection.stop(${i}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const et=this._connectionState;return this._connectionState=HubConnectionState.Disconnecting,this._logger.log(LogLevel.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(LogLevel.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(et===HubConnectionState.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=i||new AbortError("The connection was stopped before the hub handshake could complete."),this.connection.stop(i))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(i,...et){const[nt,ot]=this._replaceStreamingParams(et),st=this._createStreamInvocation(i,et,ot);let lt;const ht=new Subject;return ht.cancelCallback=()=>{const ft=this._createCancelInvocation(st.invocationId);return delete this._callbacks[st.invocationId],lt.then(()=>this._sendWithProtocol(ft))},this._callbacks[st.invocationId]=(ft,St)=>{if(St){ht.error(St);return}else ft&&(ft.type===MessageType.Completion?ft.error?ht.error(new Error(ft.error)):ht.complete():ht.next(ft.item))},lt=this._sendWithProtocol(st).catch(ft=>{ht.error(ft),delete this._callbacks[st.invocationId]}),this._launchStreams(nt,lt),ht}_sendMessage(i){return this._resetKeepAliveInterval(),this.connection.send(i)}_sendWithProtocol(i){return this._messageBuffer?this._messageBuffer._send(i):this._sendMessage(this._protocol.writeMessage(i))}send(i,...et){const[nt,ot]=this._replaceStreamingParams(et),st=this._sendWithProtocol(this._createInvocation(i,et,!0,ot));return this._launchStreams(nt,st),st}invoke(i,...et){const[nt,ot]=this._replaceStreamingParams(et),st=this._createInvocation(i,et,!1,ot);return new Promise((ht,ft)=>{this._callbacks[st.invocationId]=(vt,Rt)=>{if(Rt){ft(Rt);return}else vt&&(vt.type===MessageType.Completion?vt.error?ft(new Error(vt.error)):ht(vt.result):ft(new Error(`Unexpected message type: ${vt.type}`)))};const St=this._sendWithProtocol(st).catch(vt=>{ft(vt),delete this._callbacks[st.invocationId]});this._launchStreams(nt,St)})}on(i,et){!i||!et||(i=i.toLowerCase(),this._methods[i]||(this._methods[i]=[]),this._methods[i].indexOf(et)===-1&&this._methods[i].push(et))}off(i,et){if(!i)return;i=i.toLowerCase();const nt=this._methods[i];if(nt)if(et){const ot=nt.indexOf(et);ot!==-1&&(nt.splice(ot,1),nt.length===0&&delete this._methods[i])}else delete this._methods[i]}onclose(i){i&&this._closedCallbacks.push(i)}onreconnecting(i){i&&this._reconnectingCallbacks.push(i)}onreconnected(i){i&&this._reconnectedCallbacks.push(i)}_processIncomingData(i){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){const et=this._protocol.parseMessages(i,this._logger);for(const nt of et)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(nt)))switch(nt.type){case MessageType.Invocation:this._invokeClientMethod(nt);break;case MessageType.StreamItem:case MessageType.Completion:{const ot=this._callbacks[nt.invocationId];if(ot){nt.type===MessageType.Completion&&delete this._callbacks[nt.invocationId];try{ot(nt)}catch(st){this._logger.log(LogLevel.Error,`Stream callback threw error: ${getErrorString(st)}`)}}break}case MessageType.Ping:break;case MessageType.Close:{this._logger.log(LogLevel.Information,"Close message received from server.");const ot=nt.error?new Error("Server returned an error on close: "+nt.error):void 0;nt.allowReconnect===!0?this.connection.stop(ot):this._stopPromise=this._stopInternal(ot);break}case MessageType.Ack:this._messageBuffer&&this._messageBuffer._ack(nt);break;case MessageType.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(nt);break;default:this._logger.log(LogLevel.Warning,`Invalid message type: ${nt.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(i){let et,nt;try{[nt,et]=this._handshakeProtocol.parseHandshakeResponse(i)}catch(ot){const st="Error parsing handshake response: "+ot;this._logger.log(LogLevel.Error,st);const lt=new Error(st);throw this._handshakeRejecter(lt),lt}if(et.error){const ot="Server returned handshake error: "+et.error;this._logger.log(LogLevel.Error,ot);const st=new Error(ot);throw this._handshakeRejecter(st),st}else this._logger.log(LogLevel.Debug,"Server handshake complete.");return this._handshakeResolver(),nt}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let i=this._nextKeepAlive-new Date().getTime();i<0&&(i=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===HubConnectionState.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},i)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(i){const et=i.target.toLowerCase(),nt=this._methods[et];if(!nt){this._logger.log(LogLevel.Warning,`No client method with the name '${et}' found.`),i.invocationId&&(this._logger.log(LogLevel.Warning,`No result given for '${et}' method and invocation ID '${i.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)));return}const ot=nt.slice(),st=!!i.invocationId;let lt,ht,ft;for(const St of ot)try{const vt=lt;lt=await St.apply(this,i.arguments),st&&lt&&vt&&(this._logger.log(LogLevel.Error,`Multiple results provided for '${et}'. Sending error to server.`),ft=this._createCompletionMessage(i.invocationId,"Client provided multiple results.",null)),ht=void 0}catch(vt){ht=vt,this._logger.log(LogLevel.Error,`A callback for the method '${et}' threw error '${vt}'.`)}ft?await this._sendWithProtocol(ft):st?(ht?ft=this._createCompletionMessage(i.invocationId,`${ht}`,null):lt!==void 0?ft=this._createCompletionMessage(i.invocationId,null,lt):(this._logger.log(LogLevel.Warning,`No result given for '${et}' method and invocation ID '${i.invocationId}'.`),ft=this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(ft)):lt&&this._logger.log(LogLevel.Error,`Result given for '${et}' method but server is not expecting a result.`)}_connectionClosed(i){this._logger.log(LogLevel.Debug,`HubConnection.connectionClosed(${i}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||i||new AbortError("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(i||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===HubConnectionState.Disconnecting?this._completeClose(i):this._connectionState===HubConnectionState.Connected&&this._reconnectPolicy?this._reconnect(i):this._connectionState===HubConnectionState.Connected&&this._completeClose(i)}_completeClose(i){if(this._connectionStarted){this._connectionState=HubConnectionState.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(i??new Error("Connection closed.")),this._messageBuffer=void 0),Platform.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(et=>et.apply(this,[i]))}catch(et){this._logger.log(LogLevel.Error,`An onclose callback called with error '${i}' threw error '${et}'.`)}}}async _reconnect(i){const et=Date.now();let nt=0,ot=i!==void 0?i:new Error("Attempting to reconnect due to a unknown error."),st=this._getNextRetryDelay(nt++,0,ot);if(st===null){this._logger.log(LogLevel.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(i);return}if(this._connectionState=HubConnectionState.Reconnecting,i?this._logger.log(LogLevel.Information,`Connection reconnecting because of error '${i}'.`):this._logger.log(LogLevel.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(lt=>lt.apply(this,[i]))}catch(lt){this._logger.log(LogLevel.Error,`An onreconnecting callback called with error '${i}' threw error '${lt}'.`)}if(this._connectionState!==HubConnectionState.Reconnecting){this._logger.log(LogLevel.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;st!==null;){if(this._logger.log(LogLevel.Information,`Reconnect attempt number ${nt} will start in ${st} ms.`),await new Promise(lt=>{this._reconnectDelayHandle=setTimeout(lt,st)}),this._reconnectDelayHandle=void 0,this._connectionState!==HubConnectionState.Reconnecting){this._logger.log(LogLevel.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=HubConnectionState.Connected,this._logger.log(LogLevel.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(lt=>lt.apply(this,[this.connection.connectionId]))}catch(lt){this._logger.log(LogLevel.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${lt}'.`)}return}catch(lt){if(this._logger.log(LogLevel.Information,`Reconnect attempt failed because of error '${lt}'.`),this._connectionState!==HubConnectionState.Reconnecting){this._logger.log(LogLevel.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===HubConnectionState.Disconnecting&&this._completeClose();return}ot=lt instanceof Error?lt:new Error(lt.toString()),st=this._getNextRetryDelay(nt++,Date.now()-et,ot)}}this._logger.log(LogLevel.Information,`Reconnect retries have been exhausted after ${Date.now()-et} ms and ${nt} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(i,et,nt){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:et,previousRetryCount:i,retryReason:nt})}catch(ot){return this._logger.log(LogLevel.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${i}, ${et}) threw error '${ot}'.`),null}}_cancelCallbacksWithError(i){const et=this._callbacks;this._callbacks={},Object.keys(et).forEach(nt=>{const ot=et[nt];try{ot(null,i)}catch(st){this._logger.log(LogLevel.Error,`Stream 'error' callback called with '${i}' threw error: ${getErrorString(st)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(i,et,nt,ot){if(nt)return ot.length!==0?{arguments:et,streamIds:ot,target:i,type:MessageType.Invocation}:{arguments:et,target:i,type:MessageType.Invocation};{const st=this._invocationId;return this._invocationId++,ot.length!==0?{arguments:et,invocationId:st.toString(),streamIds:ot,target:i,type:MessageType.Invocation}:{arguments:et,invocationId:st.toString(),target:i,type:MessageType.Invocation}}}_launchStreams(i,et){if(i.length!==0){et||(et=Promise.resolve());for(const nt in i)i[nt].subscribe({complete:()=>{et=et.then(()=>this._sendWithProtocol(this._createCompletionMessage(nt)))},error:ot=>{let st;ot instanceof Error?st=ot.message:ot&&ot.toString?st=ot.toString():st="Unknown error",et=et.then(()=>this._sendWithProtocol(this._createCompletionMessage(nt,st)))},next:ot=>{et=et.then(()=>this._sendWithProtocol(this._createStreamItemMessage(nt,ot)))}})}}_replaceStreamingParams(i){const et=[],nt=[];for(let ot=0;ot<i.length;ot++){const st=i[ot];if(this._isObservable(st)){const lt=this._invocationId;this._invocationId++,et[lt]=st,nt.push(lt.toString()),i.splice(ot,1)}}return[et,nt]}_isObservable(i){return i&&i.subscribe&&typeof i.subscribe=="function"}_createStreamInvocation(i,et,nt){const ot=this._invocationId;return this._invocationId++,nt.length!==0?{arguments:et,invocationId:ot.toString(),streamIds:nt,target:i,type:MessageType.StreamInvocation}:{arguments:et,invocationId:ot.toString(),target:i,type:MessageType.StreamInvocation}}_createCancelInvocation(i){return{invocationId:i,type:MessageType.CancelInvocation}}_createStreamItemMessage(i,et){return{invocationId:i,item:et,type:MessageType.StreamItem}}_createCompletionMessage(i,et,nt){return et?{error:et,invocationId:i,type:MessageType.Completion}:{invocationId:i,result:nt,type:MessageType.Completion}}_createCloseMessage(){return{type:MessageType.Close}}}const DEFAULT_RETRY_DELAYS_IN_MILLISECONDS=[0,2e3,1e4,3e4,null];class DefaultReconnectPolicy{constructor(i){this._retryDelays=i!==void 0?[...i,null]:DEFAULT_RETRY_DELAYS_IN_MILLISECONDS}nextRetryDelayInMilliseconds(i){return this._retryDelays[i.previousRetryCount]}}class HeaderNames{}HeaderNames.Authorization="Authorization";HeaderNames.Cookie="Cookie";class AccessTokenHttpClient extends HttpClient{constructor(i,et){super(),this._innerClient=i,this._accessTokenFactory=et}async send(i){let et=!0;this._accessTokenFactory&&(!this._accessToken||i.url&&i.url.indexOf("/negotiate?")>0)&&(et=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(i);const nt=await this._innerClient.send(i);return et&&nt.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(i),await this._innerClient.send(i)):nt}_setAuthorizationHeader(i){i.headers||(i.headers={}),this._accessToken?i.headers[HeaderNames.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&i.headers[HeaderNames.Authorization]&&delete i.headers[HeaderNames.Authorization]}getCookieString(i){return this._innerClient.getCookieString(i)}}var HttpTransportType;(function(o){o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling"})(HttpTransportType||(HttpTransportType={}));var TransferFormat;(function(o){o[o.Text=1]="Text",o[o.Binary=2]="Binary"})(TransferFormat||(TransferFormat={}));let AbortController$1=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class LongPollingTransport{get pollAborted(){return this._pollAbort.aborted}constructor(i,et,nt){this._httpClient=i,this._logger=et,this._pollAbort=new AbortController$1,this._options=nt,this._running=!1,this.onreceive=null,this.onclose=null}async connect(i,et){if(Arg.isRequired(i,"url"),Arg.isRequired(et,"transferFormat"),Arg.isIn(et,TransferFormat,"transferFormat"),this._url=i,this._logger.log(LogLevel.Trace,"(LongPolling transport) Connecting."),et===TransferFormat.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[nt,ot]=getUserAgentHeader(),st={[nt]:ot,...this._options.headers},lt={abortSignal:this._pollAbort.signal,headers:st,timeout:1e5,withCredentials:this._options.withCredentials};et===TransferFormat.Binary&&(lt.responseType="arraybuffer");const ht=`${i}&_=${Date.now()}`;this._logger.log(LogLevel.Trace,`(LongPolling transport) polling: ${ht}.`);const ft=await this._httpClient.get(ht,lt);ft.statusCode!==200?(this._logger.log(LogLevel.Error,`(LongPolling transport) Unexpected response code: ${ft.statusCode}.`),this._closeError=new HttpError(ft.statusText||"",ft.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,lt)}async _poll(i,et){try{for(;this._running;)try{const nt=`${i}&_=${Date.now()}`;this._logger.log(LogLevel.Trace,`(LongPolling transport) polling: ${nt}.`);const ot=await this._httpClient.get(nt,et);ot.statusCode===204?(this._logger.log(LogLevel.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):ot.statusCode!==200?(this._logger.log(LogLevel.Error,`(LongPolling transport) Unexpected response code: ${ot.statusCode}.`),this._closeError=new HttpError(ot.statusText||"",ot.statusCode),this._running=!1):ot.content?(this._logger.log(LogLevel.Trace,`(LongPolling transport) data received. ${getDataDetail(ot.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(ot.content)):this._logger.log(LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(nt){this._running?nt instanceof TimeoutError?this._logger.log(LogLevel.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=nt,this._running=!1):this._logger.log(LogLevel.Trace,`(LongPolling transport) Poll errored after shutdown: ${nt.message}`)}}finally{this._logger.log(LogLevel.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(i){return this._running?sendMessage(this._logger,"LongPolling",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(LogLevel.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(LogLevel.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const i={},[et,nt]=getUserAgentHeader();i[et]=nt;const ot={headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let st;try{await this._httpClient.delete(this._url,ot)}catch(lt){st=lt}st?st instanceof HttpError&&(st.statusCode===404?this._logger.log(LogLevel.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(LogLevel.Trace,`(LongPolling transport) Error sending a DELETE request: ${st}`)):this._logger.log(LogLevel.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(LogLevel.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let i="(LongPolling transport) Firing onclose event.";this._closeError&&(i+=" Error: "+this._closeError),this._logger.log(LogLevel.Trace,i),this.onclose(this._closeError)}}}class ServerSentEventsTransport{constructor(i,et,nt,ot){this._httpClient=i,this._accessToken=et,this._logger=nt,this._options=ot,this.onreceive=null,this.onclose=null}async connect(i,et){return Arg.isRequired(i,"url"),Arg.isRequired(et,"transferFormat"),Arg.isIn(et,TransferFormat,"transferFormat"),this._logger.log(LogLevel.Trace,"(SSE transport) Connecting."),this._url=i,this._accessToken&&(i+=(i.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((nt,ot)=>{let st=!1;if(et!==TransferFormat.Text){ot(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let lt;if(Platform.isBrowser||Platform.isWebWorker)lt=new this._options.EventSource(i,{withCredentials:this._options.withCredentials});else{const ht=this._httpClient.getCookieString(i),ft={};ft.Cookie=ht;const[St,vt]=getUserAgentHeader();ft[St]=vt,lt=new this._options.EventSource(i,{withCredentials:this._options.withCredentials,headers:{...ft,...this._options.headers}})}try{lt.onmessage=ht=>{if(this.onreceive)try{this._logger.log(LogLevel.Trace,`(SSE transport) data received. ${getDataDetail(ht.data,this._options.logMessageContent)}.`),this.onreceive(ht.data)}catch(ft){this._close(ft);return}},lt.onerror=ht=>{st?this._close():ot(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},lt.onopen=()=>{this._logger.log(LogLevel.Information,`SSE connected to ${this._url}`),this._eventSource=lt,st=!0,nt()}}catch(ht){ot(ht);return}})}async send(i){return this._eventSource?sendMessage(this._logger,"SSE",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(i){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(i))}}class WebSocketTransport{constructor(i,et,nt,ot,st,lt){this._logger=nt,this._accessTokenFactory=et,this._logMessageContent=ot,this._webSocketConstructor=st,this._httpClient=i,this.onreceive=null,this.onclose=null,this._headers=lt}async connect(i,et){Arg.isRequired(i,"url"),Arg.isRequired(et,"transferFormat"),Arg.isIn(et,TransferFormat,"transferFormat"),this._logger.log(LogLevel.Trace,"(WebSockets transport) Connecting.");let nt;return this._accessTokenFactory&&(nt=await this._accessTokenFactory()),new Promise((ot,st)=>{i=i.replace(/^http/,"ws");let lt;const ht=this._httpClient.getCookieString(i);let ft=!1;if(Platform.isNode||Platform.isReactNative){const St={},[vt,Rt]=getUserAgentHeader();St[vt]=Rt,nt&&(St[HeaderNames.Authorization]=`Bearer ${nt}`),ht&&(St[HeaderNames.Cookie]=ht),lt=new this._webSocketConstructor(i,void 0,{headers:{...St,...this._headers}})}else nt&&(i+=(i.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(nt)}`);lt||(lt=new this._webSocketConstructor(i)),et===TransferFormat.Binary&&(lt.binaryType="arraybuffer"),lt.onopen=St=>{this._logger.log(LogLevel.Information,`WebSocket connected to ${i}.`),this._webSocket=lt,ft=!0,ot()},lt.onerror=St=>{let vt=null;typeof ErrorEvent<"u"&&St instanceof ErrorEvent?vt=St.error:vt="There was an error with the transport",this._logger.log(LogLevel.Information,`(WebSockets transport) ${vt}.`)},lt.onmessage=St=>{if(this._logger.log(LogLevel.Trace,`(WebSockets transport) data received. ${getDataDetail(St.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(St.data)}catch(vt){this._close(vt);return}},lt.onclose=St=>{if(ft)this._close(St);else{let vt=null;typeof ErrorEvent<"u"&&St instanceof ErrorEvent?vt=St.error:vt="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",st(new Error(vt))}}})}send(i){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(LogLevel.Trace,`(WebSockets transport) sending data. ${getDataDetail(i,this._logMessageContent)}.`),this._webSocket.send(i),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(i){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(LogLevel.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(i)&&(i.wasClean===!1||i.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${i.code} (${i.reason||"no reason given"}).`)):i instanceof Error?this.onclose(i):this.onclose())}_isCloseEvent(i){return i&&typeof i.wasClean=="boolean"&&typeof i.code=="number"}}const MAX_REDIRECTS=100;class HttpConnection{constructor(i,et={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Arg.isRequired(i,"url"),this._logger=createLogger(et.logger),this.baseUrl=this._resolveUrl(i),et=et||{},et.logMessageContent=et.logMessageContent===void 0?!1:et.logMessageContent,typeof et.withCredentials=="boolean"||et.withCredentials===void 0)et.withCredentials=et.withCredentials===void 0?!0:et.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");et.timeout=et.timeout===void 0?100*1e3:et.timeout;let nt=null,ot=null;Platform.isNode&&typeof require<"u"&&(nt=getWS(),ot=getEventSource()),!Platform.isNode&&typeof WebSocket<"u"&&!et.WebSocket?et.WebSocket=WebSocket:Platform.isNode&&!et.WebSocket&&nt&&(et.WebSocket=nt),!Platform.isNode&&typeof EventSource<"u"&&!et.EventSource?et.EventSource=EventSource:Platform.isNode&&!et.EventSource&&typeof ot<"u"&&(et.EventSource=ot),this._httpClient=new AccessTokenHttpClient(et.httpClient||new DefaultHttpClient(this._logger),et.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=et,this.onreceive=null,this.onclose=null}async start(i){if(i=i||TransferFormat.Binary,Arg.isIn(i,TransferFormat,"transferFormat"),this._logger.log(LogLevel.Debug,`Starting connection with transfer format '${TransferFormat[i]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(i),await this._startInternalPromise,this._connectionState==="Disconnecting"){const et="Failed to start the HttpConnection before stop() was called.";return this._logger.log(LogLevel.Error,et),await this._stopPromise,Promise.reject(new AbortError(et))}else if(this._connectionState!=="Connected"){const et="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(LogLevel.Error,et),Promise.reject(new AbortError(et))}this._connectionStarted=!0}send(i){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new TransportSendQueue(this.transport)),this._sendQueue.send(i))}async stop(i){if(this._connectionState==="Disconnected")return this._logger.log(LogLevel.Debug,`Call to HttpConnection.stop(${i}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(LogLevel.Debug,`Call to HttpConnection.stop(${i}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(et=>{this._stopPromiseResolver=et}),await this._stopInternal(i),await this._stopPromise}async _stopInternal(i){this._stopError=i;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(et){this._logger.log(LogLevel.Error,`HttpConnection.transport.stop() threw error '${et}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(LogLevel.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(i){let et=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===HttpTransportType.WebSockets)this.transport=this._constructTransport(HttpTransportType.WebSockets),await this._startTransport(et,i);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let nt=null,ot=0;do{if(nt=await this._getNegotiationResponse(et),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new AbortError("The connection was stopped during negotiation.");if(nt.error)throw new Error(nt.error);if(nt.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(nt.url&&(et=nt.url),nt.accessToken){const st=nt.accessToken;this._accessTokenFactory=()=>st,this._httpClient._accessToken=st,this._httpClient._accessTokenFactory=void 0}ot++}while(nt.url&&ot<MAX_REDIRECTS);if(ot===MAX_REDIRECTS&&nt.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(et,this._options.transport,nt,i)}this.transport instanceof LongPollingTransport&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(LogLevel.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(nt){return this._logger.log(LogLevel.Error,"Failed to start the connection: "+nt),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(nt)}}async _getNegotiationResponse(i){const et={},[nt,ot]=getUserAgentHeader();et[nt]=ot;const st=this._resolveNegotiateUrl(i);this._logger.log(LogLevel.Debug,`Sending negotiation request: ${st}.`);try{const lt=await this._httpClient.post(st,{content:"",headers:{...et,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(lt.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${lt.statusCode}'`));const ht=JSON.parse(lt.content);return(!ht.negotiateVersion||ht.negotiateVersion<1)&&(ht.connectionToken=ht.connectionId),ht.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new FailedToNegotiateWithServerError("Client didn't negotiate Stateful Reconnect but the server did.")):ht}catch(lt){let ht="Failed to complete negotiation with the server: "+lt;return lt instanceof HttpError&&lt.statusCode===404&&(ht=ht+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(LogLevel.Error,ht),Promise.reject(new FailedToNegotiateWithServerError(ht))}}_createConnectUrl(i,et){return et?i+(i.indexOf("?")===-1?"?":"&")+`id=${et}`:i}async _createTransport(i,et,nt,ot){let st=this._createConnectUrl(i,nt.connectionToken);if(this._isITransport(et)){this._logger.log(LogLevel.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=et,await this._startTransport(st,ot),this.connectionId=nt.connectionId;return}const lt=[],ht=nt.availableTransports||[];let ft=nt;for(const St of ht){const vt=this._resolveTransportOrError(St,et,ot,(ft==null?void 0:ft.useStatefulReconnect)===!0);if(vt instanceof Error)lt.push(`${St.transport} failed:`),lt.push(vt);else if(this._isITransport(vt)){if(this.transport=vt,!ft){try{ft=await this._getNegotiationResponse(i)}catch(Rt){return Promise.reject(Rt)}st=this._createConnectUrl(i,ft.connectionToken)}try{await this._startTransport(st,ot),this.connectionId=ft.connectionId;return}catch(Rt){if(this._logger.log(LogLevel.Error,`Failed to start the transport '${St.transport}': ${Rt}`),ft=void 0,lt.push(new FailedToStartTransportError(`${St.transport} failed: ${Rt}`,HttpTransportType[St.transport])),this._connectionState!=="Connecting"){const wt="Failed to select transport before stop() was called.";return this._logger.log(LogLevel.Debug,wt),Promise.reject(new AbortError(wt))}}}}return lt.length>0?Promise.reject(new AggregateErrors(`Unable to connect to the server with any of the available transports. ${lt.join(" ")}`,lt)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(i){switch(i){case HttpTransportType.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new WebSocketTransport(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case HttpTransportType.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ServerSentEventsTransport(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case HttpTransportType.LongPolling:return new LongPollingTransport(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${i}.`)}}_startTransport(i,et){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async nt=>{let ot=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(i,et),await this.features.resend()}catch{ot=!0}else{this._stopConnection(nt);return}ot&&this._stopConnection(nt)}:this.transport.onclose=nt=>this._stopConnection(nt),this.transport.connect(i,et)}_resolveTransportOrError(i,et,nt,ot){const st=HttpTransportType[i.transport];if(st==null)return this._logger.log(LogLevel.Debug,`Skipping transport '${i.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${i.transport}' because it is not supported by this client.`);if(transportMatches(et,st))if(i.transferFormats.map(ht=>TransferFormat[ht]).indexOf(nt)>=0){if(st===HttpTransportType.WebSockets&&!this._options.WebSocket||st===HttpTransportType.ServerSentEvents&&!this._options.EventSource)return this._logger.log(LogLevel.Debug,`Skipping transport '${HttpTransportType[st]}' because it is not supported in your environment.'`),new UnsupportedTransportError(`'${HttpTransportType[st]}' is not supported in your environment.`,st);this._logger.log(LogLevel.Debug,`Selecting transport '${HttpTransportType[st]}'.`);try{return this.features.reconnect=st===HttpTransportType.WebSockets?ot:void 0,this._constructTransport(st)}catch(ht){return ht}}else return this._logger.log(LogLevel.Debug,`Skipping transport '${HttpTransportType[st]}' because it does not support the requested transfer format '${TransferFormat[nt]}'.`),new Error(`'${HttpTransportType[st]}' does not support ${TransferFormat[nt]}.`);else return this._logger.log(LogLevel.Debug,`Skipping transport '${HttpTransportType[st]}' because it was disabled by the client.`),new DisabledTransportError(`'${HttpTransportType[st]}' is disabled by the client.`,st)}_isITransport(i){return i&&typeof i=="object"&&"connect"in i}_stopConnection(i){if(this._logger.log(LogLevel.Debug,`HttpConnection.stopConnection(${i}) called while in state ${this._connectionState}.`),this.transport=void 0,i=this._stopError||i,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(LogLevel.Debug,`Call to HttpConnection.stopConnection(${i}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(LogLevel.Warning,`Call to HttpConnection.stopConnection(${i}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${i}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),i?this._logger.log(LogLevel.Error,`Connection disconnected with error '${i}'.`):this._logger.log(LogLevel.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(et=>{this._logger.log(LogLevel.Error,`TransportSendQueue.stop() threw error '${et}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(i)}catch(et){this._logger.log(LogLevel.Error,`HttpConnection.onclose(${i}) threw error '${et}'.`)}}}_resolveUrl(i){if(i.lastIndexOf("https://",0)===0||i.lastIndexOf("http://",0)===0)return i;if(!Platform.isBrowser)throw new Error(`Cannot resolve '${i}'.`);const et=window.document.createElement("a");return et.href=i,this._logger.log(LogLevel.Information,`Normalizing '${i}' to '${et.href}'.`),et.href}_resolveNegotiateUrl(i){const et=new URL(i);et.pathname.endsWith("/")?et.pathname+="negotiate":et.pathname+="/negotiate";const nt=new URLSearchParams(et.searchParams);return nt.has("negotiateVersion")||nt.append("negotiateVersion",this._negotiateVersion.toString()),nt.has("useStatefulReconnect")?nt.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&nt.append("useStatefulReconnect","true"),et.search=nt.toString(),et.toString()}}function transportMatches(o,i){return!o||(i&o)!==0}class TransportSendQueue{constructor(i){this._transport=i,this._buffer=[],this._executing=!0,this._sendBufferedData=new PromiseSource,this._transportResult=new PromiseSource,this._sendLoopPromise=this._sendLoop()}send(i){return this._bufferData(i),this._transportResult||(this._transportResult=new PromiseSource),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(i){if(this._buffer.length&&typeof this._buffer[0]!=typeof i)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof i}`);this._buffer.push(i),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new PromiseSource;const i=this._transportResult;this._transportResult=void 0;const et=typeof this._buffer[0]=="string"?this._buffer.join(""):TransportSendQueue._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(et),i.resolve()}catch(nt){i.reject(nt)}}}static _concatBuffers(i){const et=i.map(st=>st.byteLength).reduce((st,lt)=>st+lt),nt=new Uint8Array(et);let ot=0;for(const st of i)nt.set(new Uint8Array(st),ot),ot+=st.byteLength;return nt.buffer}}class PromiseSource{constructor(){this.promise=new Promise((i,et)=>[this._resolver,this._rejecter]=[i,et])}resolve(){this._resolver()}reject(i){this._rejecter(i)}}const JSON_HUB_PROTOCOL_NAME="json";class JsonHubProtocol{constructor(){this.name=JSON_HUB_PROTOCOL_NAME,this.version=2,this.transferFormat=TransferFormat.Text}parseMessages(i,et){if(typeof i!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];et===null&&(et=NullLogger.instance);const nt=TextMessageFormat.parse(i),ot=[];for(const st of nt){const lt=JSON.parse(st);if(typeof lt.type!="number")throw new Error("Invalid payload.");switch(lt.type){case MessageType.Invocation:this._isInvocationMessage(lt);break;case MessageType.StreamItem:this._isStreamItemMessage(lt);break;case MessageType.Completion:this._isCompletionMessage(lt);break;case MessageType.Ping:break;case MessageType.Close:break;case MessageType.Ack:this._isAckMessage(lt);break;case MessageType.Sequence:this._isSequenceMessage(lt);break;default:et.log(LogLevel.Information,"Unknown message type '"+lt.type+"' ignored.");continue}ot.push(lt)}return ot}writeMessage(i){return TextMessageFormat.write(JSON.stringify(i))}_isInvocationMessage(i){this._assertNotEmptyString(i.target,"Invalid payload for Invocation message."),i.invocationId!==void 0&&this._assertNotEmptyString(i.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(i){if(this._assertNotEmptyString(i.invocationId,"Invalid payload for StreamItem message."),i.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(i){if(i.result&&i.error)throw new Error("Invalid payload for Completion message.");!i.result&&i.error&&this._assertNotEmptyString(i.error,"Invalid payload for Completion message."),this._assertNotEmptyString(i.invocationId,"Invalid payload for Completion message.")}_isAckMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(i,et){if(typeof i!="string"||i==="")throw new Error(et)}}const LogLevelNameMapping={trace:LogLevel.Trace,debug:LogLevel.Debug,info:LogLevel.Information,information:LogLevel.Information,warn:LogLevel.Warning,warning:LogLevel.Warning,error:LogLevel.Error,critical:LogLevel.Critical,none:LogLevel.None};function parseLogLevel(o){const i=LogLevelNameMapping[o.toLowerCase()];if(typeof i<"u")return i;throw new Error(`Unknown log level: ${o}`)}class HubConnectionBuilder{configureLogging(i){if(Arg.isRequired(i,"logging"),isLogger(i))this.logger=i;else if(typeof i=="string"){const et=parseLogLevel(i);this.logger=new ConsoleLogger(et)}else this.logger=new ConsoleLogger(i);return this}withUrl(i,et){return Arg.isRequired(i,"url"),Arg.isNotEmpty(i,"url"),this.url=i,typeof et=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...et}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:et},this}withHubProtocol(i){return Arg.isRequired(i,"protocol"),this.protocol=i,this}withAutomaticReconnect(i){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return i?Array.isArray(i)?this.reconnectPolicy=new DefaultReconnectPolicy(i):this.reconnectPolicy=i:this.reconnectPolicy=new DefaultReconnectPolicy,this}withServerTimeout(i){return Arg.isRequired(i,"milliseconds"),this._serverTimeoutInMilliseconds=i,this}withKeepAliveInterval(i){return Arg.isRequired(i,"milliseconds"),this._keepAliveIntervalInMilliseconds=i,this}withStatefulReconnect(i){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=i==null?void 0:i.bufferSize,this}build(){const i=this.httpConnectionOptions||{};if(i.logger===void 0&&(i.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const et=new HttpConnection(this.url,i);return HubConnection.create(et,this.logger||NullLogger.instance,this.protocol||new JsonHubProtocol,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function isLogger(o){return o.log!==void 0}const hubUrl$1=`http://${window.location.hostname}:5290/chathub`,lm=class lm{constructor(){Ul(this,"connection");Ul(this,"events");this.events={messageSent:()=>{},messageEdited:()=>{},messageDeleted:()=>{}},this.connection=new HubConnectionBuilder().withUrl(hubUrl$1).withAutomaticReconnect().build(),this.connection.on("messageSent",i=>{this.events.messageSent(i)}),this.connection.on("messageEdited",i=>{this.events.messageEdited(i)}),this.connection.on("messageDeleted",i=>{this.events.messageDeleted(i)}),this.connection.start().catch(i=>{console.error("SignalR connection error:",i)})}static getInstance(){return lm.instance||(lm.instance=new lm),lm.instance}async invokeHubMethod(i,...et){try{this.connection.state===HubConnectionState.Disconnected&&await this.connection.start(),await this.connection.invoke(i,...et)}catch(nt){throw console.error("Error invoking hub method:",nt),nt}}async start(){try{this.connection.state===HubConnectionState.Disconnected?(await this.connection.start(),console.log("SignalR connection started.")):console.log("SignalR connection is already started or in the process of reconnecting.")}catch(i){throw console.error("Error starting SignalR connection:",i),i}}getConnection(){return this.connection}getConnectionState(){return this.connection.state}};Ul(lm,"instance");let ChatConnector=lm;const initialState$5={messages:[],error:null},GetTeamConversationMessages=createAsyncThunk("message/getTeamConversationMessages",async(o,i)=>{try{const et=await FetchGetTeamMessages(o);return et?(console.log("meddelanden hämtade:",et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av konversation.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av konversation.")}}),CreateMessageAsync=createAsyncThunk("message/createMesssage",async(o,i)=>{try{const et=await FetchCreateMessage(o);return et?(console.log("meddelandet skapat:",et),et):i.rejectWithValue("Ett fel inträffade vid skapande av meddelande.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av konversation.")}}),EditMessageAsync=createAsyncThunk("message/editMessage",async(o,i)=>{try{const et=await FetchEditMessage(o);return et||i.rejectWithValue("Ett fel inträffade vid redigering av meddelande.")}catch{return i.rejectWithValue("Ett fel inträffade vid redigering av meddelande.")}}),DeleteMessageAsync=createAsyncThunk("message/deleteMessage",async(o,i)=>{try{return await FetchDeleteMessage(o)?o:i.rejectWithValue("Ett fel inträffade vid raderande av meddelande.")}catch{return i.rejectWithValue("Ett fel inträffade vid raderande av meddelande.")}}),liveUpdateMessageSent=createAsyncThunk("message/liveUpdateMessageSent",async o=>{const i=ChatConnector.getInstance();try{i.getConnectionState()!==HubConnectionState.Connected&&await i.start(),i.getConnectionState()===HubConnectionState.Connected?(await i.invokeHubMethod("MessageSent",o),console.log("Meddelande skickat")):console.error("SignalR chatconnection is not in the 'Connected' state.")}catch(et){console.error("Error sending enter meeting room request:",et)}}),liveUpdateMessageEdited=createAsyncThunk("message/liveUpdateMessageEdited",async o=>{const i=ChatConnector.getInstance();try{i.getConnectionState()!==HubConnectionState.Connected&&await i.start(),i.getConnectionState()===HubConnectionState.Connected?(await i.invokeHubMethod("MessageEdited",o),console.log("Meddelande redigerat")):console.error("SignalR chatconnection is not in the 'Connected' state.")}catch(et){console.error("Error sending enter meeting room request:",et)}}),liveUpdateMessageDeleted=createAsyncThunk("message/liveUpdateMessageDeleted",async o=>{const i=ChatConnector.getInstance();try{i.getConnectionState()!==HubConnectionState.Connected&&await i.start(),i.getConnectionState()===HubConnectionState.Connected?(await i.invokeHubMethod("MessageDeleted",o),console.log("Meddelande redigerat")):console.error("SignalR chatconnection is not in the 'Connected' state.")}catch(et){console.error("Error sending enter meeting room request:",et)}}),messageSent=createAsyncThunk("message/messageSent",async o=>o),messageEdited=createAsyncThunk("message/messageEdited",async o=>o),messageDeleted=createAsyncThunk("message/messageDeleted",async o=>o),messageSlice=createSlice({name:"message",initialState:initialState$5,reducers:{},extraReducers:o=>{o.addCase(GetTeamConversationMessages.fulfilled,(i,et)=>{console.log("Fulfilled action payload:",et.payload),et.payload&&(console.log(et.payload),i.messages=et.payload,i.error=null)}).addCase(GetTeamConversationMessages.rejected,i=>{i.messages=[],i.error="Något gick fel med hämtandet av konversation."}).addCase(CreateMessageAsync.fulfilled,(i,et)=>{console.log("Fulfilled action payload:",et.payload),et.payload&&(i.error=null)}).addCase(CreateMessageAsync.rejected,i=>{i.error="Något gick fel med skapandet av meddelandet."}).addCase(EditMessageAsync.fulfilled,(i,et)=>{console.log("Fulfilled action payload for editing message:",et.payload),et.payload&&(i.error=null)}).addCase(EditMessageAsync.rejected,i=>{i.error="Något gick fel med redigering av meddelandet."}).addCase(DeleteMessageAsync.fulfilled,(i,et)=>{console.log("Fulfilled action payload:",et.payload),et.payload&&(i.error=null)}).addCase(DeleteMessageAsync.rejected,i=>{i.error="Något gick fel när meddelandet skulle tas bort."}).addCase(messageSent.fulfilled,(i,et)=>{et.payload&&i.messages.push(et.payload)}).addCase(messageEdited.fulfilled,(i,et)=>{if(et.payload){const nt=i.messages.findIndex(ot=>ot.id===et.payload.id);nt!==-1&&(i.messages[nt].content=et.payload.content)}}).addCase(messageDeleted.fulfilled,(i,et)=>{et.payload&&(i.messages=i.messages.filter(nt=>nt.id!==et.payload))})}}),messageReducer=messageSlice.reducer,apiUrl$4=`http://${window.location.hostname}:5290/profile`,FetchGetTeamProfiles=async o=>{try{const i=await fetch(apiUrl$4,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(!i.ok)throw new Error("Något gick fel vid hämtning av profiler");return et.$values}catch(i){throw console.error(i),i}},FetchOnlineProfiles=async o=>{try{const i=await fetch(apiUrl$4+"/online",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(!i.ok)throw new Error("Något gick fel vid hämtning av online profiler");return et.$values}catch(i){throw console.error(i),i}},FetchMyProfile=async o=>{try{const i=await fetch(apiUrl$4+"/byauth",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(!i.ok)throw new Error("Något gick fel vid hämtning av min profil");return et}catch(i){throw console.error(i),i}},FetchUpdateProfile=async o=>{try{const i=await fetch(apiUrl$4,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(!i.ok)throw new Error("Något gick fel vid uppdateringen av profil");return et}catch(i){throw console.error(i),i}},hubUrl=`http://${window.location.hostname}:5290/meetingroomhub`,dm=class dm{constructor(){Ul(this,"connection");Ul(this,"events");this.events={profileOnline:()=>{},profileOffline:()=>{}},this.connection=new HubConnectionBuilder().withUrl(hubUrl).withAutomaticReconnect().build(),this.connection.on("profileOnline",i=>{this.events.profileOnline(i)}),this.connection.on("profileOffline",i=>{this.events.profileOffline(i)}),this.connection.start().catch(i=>{console.error("SignalR connection error:",i)})}static getInstance(){return dm.instance||(dm.instance=new dm),dm.instance}async invokeHubMethod(i,...et){try{this.connection.state===HubConnectionState.Disconnected&&await this.connection.start(),await this.connection.invoke(i,...et)}catch(nt){throw console.error("Error invoking hub method:",nt),nt}}async start(){try{this.connection.state===HubConnectionState.Disconnected?(await this.connection.start(),console.log("SignalR connection started.")):console.log("SignalR connection is already started or in the process of reconnecting.")}catch(i){throw console.error("Error starting SignalR connection:",i),i}}getConnection(){return this.connection}getConnectionState(){return this.connection.state}};Ul(dm,"instance");let Connector=dm;const saveProfilesToLocalStorage=o=>{localStorage.setItem("profiles",JSON.stringify(o))},loadProfilesFromLocalStorage=()=>{const o=localStorage.getItem("profiles");return o?JSON.parse(o):void 0},saveActiveProfileToLocalStorage=o=>{localStorage.setItem("activeProfile",JSON.stringify(o))},loadActiveProfileFromLocalStorage=()=>{const o=localStorage.getItem("activeProfile");return o?JSON.parse(o):void 0},initialState$4={profiles:loadProfilesFromLocalStorage(),activeProfile:loadActiveProfileFromLocalStorage(),error:null,onlineProfiles:[]},enterMeetingRoomAsync=createAsyncThunk("profile/enterMeetingRoom",async o=>{const i=Connector.getInstance();try{i.getConnectionState()!==HubConnectionState.Connected&&await i.start(),i.getConnectionState()===HubConnectionState.Connected?(await i.invokeHubMethod("ProfileEnterMeetingRoom",o),console.log("Profil gick in i mötesrummet")):console.error("SignalR connection is not in the 'Connected' state.")}catch(et){console.error("Error sending enter meeting room request:",et)}}),leaveMeetingRoomAsync=createAsyncThunk("profile/leaveMeetingRoom",async o=>{const i=Connector.getInstance();try{i.getConnectionState()===HubConnectionState.Disconnected&&await i.start(),i.invokeHubMethod("ProfileLeavingMeetingRoom",o)}catch(et){console.error("Error invoking hub method:",et)}}),GetTeamProfiles=createAsyncThunk("profile/getTeamProfiles",async(o,i)=>{try{const et=await FetchGetTeamProfiles(o);return et?(saveProfilesToLocalStorage(et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av profiler.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av profiler.")}}),GetOnlineProfiles=createAsyncThunk("profile/getOnlineProfiles",async(o,i)=>{try{const et=await FetchOnlineProfiles(o);return et?(console.log("ONLINEEEEEEEEEEEEEEEE:: ",et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av online profiler.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av online profiler.")}}),GetMyProfileAsync=createAsyncThunk("profile/getMyProfile",async(o,i)=>{try{const et=await FetchMyProfile(o);return et?(saveActiveProfileToLocalStorage(et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av profiler.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av profiler.")}}),UpdateProfileAsync=createAsyncThunk("profile/updateProfile",async(o,i)=>{try{const et=await FetchUpdateProfile(o);return et?(saveActiveProfileToLocalStorage(et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av profiler.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av profiler.")}}),profileOnline=createAsyncThunk("profile/profileOnline",o=>o),profileOffline=createAsyncThunk("profile/profileOffline",o=>o),profileSlice=createSlice({name:"profile",initialState:initialState$4,reducers:{setActiveProfile:(o,i)=>{var ot;const et=i.payload,nt=(ot=o.profiles)==null?void 0:ot.find(st=>st.id===et);nt&&(o.activeProfile=nt,saveActiveProfileToLocalStorage(nt))},getActiveProfile:o=>{const i=loadActiveProfileFromLocalStorage();i&&(o.activeProfile=i)}},extraReducers:o=>{o.addCase(GetTeamProfiles.fulfilled,(i,et)=>{et.payload&&(i.profiles=et.payload,i.error=null)}).addCase(GetTeamProfiles.rejected,i=>{i.profiles=void 0,i.error="Något gick fel med hämtandet av online profiler."}).addCase(GetOnlineProfiles.fulfilled,(i,et)=>{if(et.payload){const nt=et.payload.filter(ot=>{var st;return ot.profileId!==((st=i.activeProfile)==null?void 0:st.id)});i.onlineProfiles=nt,i.error=null}}).addCase(GetOnlineProfiles.rejected,i=>{i.onlineProfiles=[],i.error="Något gick fel med hämtandet av online profiler."}).addCase(GetMyProfileAsync.fulfilled,(i,et)=>{et.payload&&(i.activeProfile=et.payload,i.error=null)}).addCase(GetMyProfileAsync.rejected,i=>{i.activeProfile=void 0,i.error="Något gick fel med hämtandet av aktiv profil."}).addCase(UpdateProfileAsync.fulfilled,(i,et)=>{et.payload&&(i.activeProfile=et.payload,i.error=null)}).addCase(UpdateProfileAsync.rejected,i=>{i.activeProfile=void 0,i.error="Något gick fel med hämtandet av aktiv profil."}).addCase(profileOnline.fulfilled,(i,et)=>{et.payload&&(i.onlineProfiles=[...i.onlineProfiles,et.payload])}).addCase(profileOffline.fulfilled,(i,et)=>{et.payload&&i.onlineProfiles&&(i.onlineProfiles=i.onlineProfiles.filter(nt=>nt.profileId!==et.payload))})}});profileSlice.actions;const profileReducer=profileSlice.reducer,apiUrl$3=`http://${window.location.hostname}:5290/auth`,FetchForgotPassword=async o=>{try{if(!(await fetch(apiUrl$3,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Något gick fel vid mailutskick av nytt lösenord.");return!0}catch(i){throw console.error(i),i}},initialState$3={success:null,error:null},forgotPasswordAsync=createAsyncThunk("user/forgotPassword",async({email:o},i)=>{try{return await FetchForgotPassword(o)}catch{return i.rejectWithValue("Utskick av nytt lösenord misslyckades.")}}),authSlice=createSlice({name:"auth",initialState:initialState$3,reducers:{},extraReducers:o=>{o.addCase(forgotPasswordAsync.fulfilled,(i,et)=>{et.payload&&(i.success="Nytt lösenord har skickats till din e-post.",i.error=null)}).addCase(forgotPasswordAsync.rejected,i=>{i.success=null,i.error="Något gick fel vid utskick av nytt lösenord."})}}),authReducer=authSlice.reducer,meetingapiUrl=`http://${window.location.hostname}:5290/meeting`,meetingOccasionapiUrl=`http://${window.location.hostname}:5290/meetingoccasion`,FetchGetMyOccasions=async o=>{try{const i=await fetch(meetingOccasionapiUrl+"/meetingoccasion",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(console.log("RESPONSEBODYN : ",et),!i.ok)throw new Error("Något gick fel vid hämtning av occasions");const nt=et.$values;return console.log("RESPONSE NÄR DEN ÄR TYPAD: ",nt),nt}catch(i){throw console.error(i),i}},FetchGetMyMeetings=async o=>{try{const i=await fetch(meetingapiUrl+"/allmeetings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(console.log("RESPONSEBODYN : ",et),!i.ok)throw new Error("Något gick fel vid hämtning av meetings");const nt=et.$values.map(ot=>({...ot,date:new Date(ot.date)}));return console.log("RESPONSE NÄR DEN ÄR TYPAD: ",nt),nt}catch(i){throw console.error(i),i}},FetchGetMyPastMeetings=async o=>{try{const i=await fetch(meetingOccasionapiUrl+"/pastmeetingoccasion",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(console.log("RESPONSEBODYN : ",et),!i.ok)throw new Error("Något gick fel vid hämtning av meetings");const nt=et.$values;return console.log("RESPONSE NÄR DEN ÄR TYPAD: ",nt),nt}catch(i){throw console.error(i),i}},FetchCreateMeeting=async o=>{try{console.log("MÖTESDATUM SOM SKICKAS IN I REQUESTEN: ",o.date);const i=await fetch(meetingapiUrl+"/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)});if(!i.ok)throw new Error("Något gick fel vid skapandet av meeting.");return await i.json()}catch(i){throw console.error(i),i}},FetchCreateTeamMeeting=async o=>{try{console.log("MÖTESDATUM SOM SKICKAS IN I REQUESTEN: ",o.date);const i=await fetch(meetingapiUrl+"/createteammeeting",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)});if(!i.ok)throw new Error("Något gick fel vid skapandet av meeting.");return await i.json()}catch(i){throw console.error(i),i}},FetchGetMeetingRoomByTeam=async o=>{try{const i=await fetch(meetingapiUrl+"/meetingroom",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(console.log("RESPONSE från get activeteam: ",et),!i.ok)throw new Error("Något gick fel vid hämtning av meetings");return et}catch(i){throw console.error(i),i}},FetchDeleteMeeting=async o=>{try{const i=await fetch(`${meetingapiUrl}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("RESPONSE: ",i),i.ok)return!0;throw new Error("Något gick fel vid radering av meddelande")}catch(i){throw console.error(i),i}},FetchEditMeeting=async o=>{try{const i=await fetch(meetingapiUrl,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),et=await i.json();if(!i.ok)throw new Error("Något gick fel vid redigering av mötet");return et}catch(i){throw console.error(i),i}},initialState$2={meetings:void 0,occasions:void 0,teamMeetings:void 0,pastOccasions:void 0,meetingroom:void 0,deletemeeting:void 0,error:null},createMeetingAsync=createAsyncThunk("meeting/createMeeting",async(o,i)=>{try{const et=await FetchCreateMeeting(o);return et||i.rejectWithValue("failed to add meeting")}catch(et){return console.error("Error creating meeting:",et),i.rejectWithValue("Något gick fel.")}}),createTeamMeetingAsync=createAsyncThunk("meeting/createTeamMeeting",async(o,i)=>{try{const et=await FetchCreateTeamMeeting(o);return et||i.rejectWithValue("failed to add meeting")}catch(et){return console.error("Error creating meeting:",et),i.rejectWithValue("Något gick fel.")}}),GetMyOccasionsAsync=createAsyncThunk("meeting/getmyoccasions",async(o,i)=>{try{console.log("profilid: ",o);const et=await FetchGetMyOccasions(o);return et?(console.log("myoccasions: ",et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}}),GetMyMeetingsAsync=createAsyncThunk("meeting/getmymeetings",async(o,i)=>{try{console.log("profilid: ",o);const et=await FetchGetMyMeetings(o);return et?(console.log("mymeetings: ",et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}}),EditMeetingAsync=createAsyncThunk("meeting/editmeeting",async(o,i)=>{try{const et=await FetchEditMeeting(o);return et||i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}}),GetMyPastMeetingsAsync=createAsyncThunk("meeting/getmypastmeetings",async(o,i)=>{try{const et=await FetchGetMyPastMeetings(o);return et||i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}}),Getmyactiveroom=createAsyncThunk("meetingroom/getmyactiveroom",async(o,i)=>{try{const et=await FetchGetMeetingRoomByTeam(o);return et?(console.log("Room hämtade:",et),et):i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av team.")}}),DeleteMeetingAsync=createAsyncThunk("meeting/deletemeeting",async(o,i)=>{try{return await FetchDeleteMeeting(o)?o:i.rejectWithValue("Ett fel inträffade vid raderande av meddelande.")}catch{return i.rejectWithValue("Ett fel inträffade vid raderande av meddelande.")}}),meetingSlice=createSlice({name:"meeting",initialState:initialState$2,reducers:{},extraReducers:o=>{o.addCase(createMeetingAsync.fulfilled,(i,et)=>{var nt;et.payload&&((nt=i.meetings)==null||nt.push(et.payload),i.error=null)}).addCase(createMeetingAsync.rejected,i=>{i.error="Något gick fel med skapandet av team."}).addCase(createTeamMeetingAsync.fulfilled,(i,et)=>{var nt;et.payload&&((nt=i.teamMeetings)==null||nt.push(et.payload),i.error=null)}).addCase(createTeamMeetingAsync.rejected,i=>{i.error="Något gick fel med skapandet av team."}).addCase(GetMyMeetingsAsync.fulfilled,(i,et)=>{console.log("Fulfilled action payload MY MEETINGS:",et.payload),et.payload&&(i.meetings=et.payload,i.error=null)}).addCase(GetMyOccasionsAsync.rejected,i=>{i.occasions=void 0,i.error="Något gick fel med hämtandet av occasions."}).addCase(GetMyOccasionsAsync.fulfilled,(i,et)=>{console.log("Fulfilled action payload MY MEETINGS:",et.payload),et.payload&&(i.occasions=et.payload,i.error=null)}).addCase(GetMyMeetingsAsync.rejected,i=>{i.meetings=void 0,i.error="Något gick fel med hämtandet av möte."}).addCase(GetMyPastMeetingsAsync.fulfilled,(i,et)=>{console.log("Fulfilled action payload PAST MEETINGS:",et.payload),et.payload&&(console.log(et.payload),i.pastOccasions=et.payload,i.error=null)}).addCase(GetMyPastMeetingsAsync.rejected,i=>{i.pastOccasions=void 0,i.error="Något gick fel med hämtandet av möte."}).addCase(Getmyactiveroom.fulfilled,(i,et)=>{console.log("Fulfilled action payload:",et.payload),et.payload&&(console.log(et.payload),i.meetingroom=et.payload,i.error=null)}).addCase(Getmyactiveroom.rejected,i=>{i.meetingroom=void 0,i.error="Något gick fel med hämtandet av mötesrum."}).addCase(DeleteMeetingAsync.fulfilled,(i,et)=>{var nt;if(console.log("Fulfilled action payload:",et.payload),et.payload){const ot=(nt=i.occasions)==null?void 0:nt.filter(st=>st.meetingId!=et.payload);i.occasions=ot,i.error=null}}).addCase(DeleteMeetingAsync.rejected,i=>{i.error="Något gick fel när meddelandet skulle tas bort."}).addCase(EditMeetingAsync.fulfilled,(i,et)=>{if(et.payload){if(i.meetings){const nt=i.meetings.findIndex(ot=>ot.id===et.payload.id);nt!==-1&&(i.meetings[nt]=et.payload)}if(i.occasions){const nt=i.occasions.findIndex(ot=>ot.meetingId===et.payload.id);nt!==-1&&(i.occasions[nt].date=et.payload.date,i.occasions[nt].name=et.payload.name,i.occasions[nt].description=et.payload.description)}i.error=null}}).addCase(EditMeetingAsync.rejected,i=>{i.error="Något gick fel."})}}),meetingReducer=meetingSlice.reducer,apiUrl$2=`http://${window.location.hostname}:5290/team`,FetchGetMyTeams=async()=>{try{const o=await fetch(apiUrl$2,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),i=await o.json();if(!o.ok)throw new Error("Något gick fel vid hämtning av teams");return i.$values}catch(o){throw console.error(o),o}},FetchCreateTeam=async o=>{try{const i=await fetch(apiUrl$2+"/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)});if(!i.ok)throw new Error("Något gick fel vid skapandet av team.");return await i.json()}catch(i){throw console.error(i),i}},FetchJoinTeam=async({code:o,role:i})=>{try{const et=await fetch(apiUrl$2+"/join",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:o,role:i})});if(!et.ok)throw new Error("Något gick fel vid gå med i team.");return await et.json()}catch(et){throw console.error(et),et}},saveTeamToLocalStorage=o=>{localStorage.setItem("activeTeam",JSON.stringify(o))},loadTeamFromLocalStorage=()=>{const o=localStorage.getItem("activeTeam");return o?JSON.parse(o):void 0},initialState$1={teams:void 0,activeTeam:void 0,error:null},createTeamAsync=createAsyncThunk("team/createTeam",async(o,i)=>{try{const et=await FetchCreateTeam(o);return et||i.rejectWithValue("failed to add team")}catch{return i.rejectWithValue("Något gick fel.")}}),createJoinAsync=createAsyncThunk("team/joinTeam",async({code:o,role:i},et)=>{try{const nt=await FetchJoinTeam({code:o,role:i});return nt||et.rejectWithValue("failed to join team")}catch{return et.rejectWithValue("Något gick fel.")}}),GetMyTeamsAsync=createAsyncThunk("team/getmyteams",async(o,i)=>{try{const et=await FetchGetMyTeams();return et||i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}catch{return i.rejectWithValue("Ett fel inträffade vid hämtning av lag.")}}),teamSlice=createSlice({name:"team",initialState:initialState$1,reducers:{setActiveTeam:(o,i)=>{var ot;const et=i.payload,nt=(ot=o.teams)==null?void 0:ot.find(st=>st.id===et);nt&&(o.activeTeam=nt,saveTeamToLocalStorage(nt))},getActiveTeam:o=>{const i=loadTeamFromLocalStorage();i&&(o.activeTeam=i)}},extraReducers:o=>{o.addCase(createTeamAsync.fulfilled,(i,et)=>{var nt;et.payload&&((nt=i.teams)==null||nt.push(et.payload),i.error=null)}).addCase(createTeamAsync.rejected,i=>{i.error="Något gick fel med skapandet av team."}).addCase(createJoinAsync.fulfilled,(i,et)=>{var nt;et.payload&&((nt=i.teams)==null||nt.push(et.payload),i.error=null)}).addCase(createJoinAsync.rejected,i=>{i.error="Något gick fel med att gå med i team."}).addCase(GetMyTeamsAsync.fulfilled,(i,et)=>{et.payload&&(i.teams=et.payload,i.error=null)}).addCase(GetMyTeamsAsync.rejected,i=>{i.teams=void 0,i.error="Något gick fel med hämtandet av team."})}}),{setActiveTeam,getActiveTeam}=teamSlice.actions,teamReducer=teamSlice.reducer,apiUrl$1=`http://${window.location.hostname}:5290/login`,FetchSignIn=async(o,i)=>{try{if(!(await fetch(apiUrl$1,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:i})})).ok)throw new Error("Något gick fel vid inloggningen");return!0}catch(et){throw console.error(et),et}},FetchLogOut=async()=>{try{const o=await fetch(apiUrl$1+"/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(o.ok){if(o.ok)return!0}else throw new Error("Något gick fel vid utloggning av användare.");return!1}catch(o){throw console.error(o),o}},apiUrl=`http://${window.location.hostname}:5290/user`,FetchGetUseer=async()=>{try{const o=await fetch(apiUrl,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Något gick fel vid hämtning av user");return await o.json()}catch(o){throw console.error(o),o}},FetchCreateUseer=async o=>{try{const i=await fetch(apiUrl+"/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error("Något gick fel vid skapandet av användare.");return await i.json()}catch(i){throw console.error(i),i}},initialState={user:void 0,error:null},createUserAsync=createAsyncThunk("user/addUser",async(o,i)=>{try{const et=await FetchCreateUseer(o);return et||i.rejectWithValue("failed to add user")}catch{return i.rejectWithValue("Något gick fel.")}}),logOutUserAsync=createAsyncThunk("user/logOutUser",async()=>{try{const o=await FetchLogOut();return console.log("IS LOGGED OOUT: ",o),o}catch(o){throw console.error(o),new Error("Ett fel uppstod vid utloggningen.")}}),logInUserAsync=createAsyncThunk("user/logInUser",async({email:o,password:i},et)=>{try{if(await FetchSignIn(o,i)){const ot=await FetchGetUseer();return ot?(console.log("USER FINNS NU!! : ",ot),ot):et.rejectWithValue("Inloggningen misslyckades. Felaktiga uppgifter.")}else return et.rejectWithValue("Inloggningen misslyckades. Felaktiga uppgifter.")}catch(nt){throw console.error(nt),new Error("Ett fel uppstod vid inloggningen.")}}),getUserAsync=createAsyncThunk("user/getUser",async()=>{try{return await FetchGetUseer()}catch(o){throw console.error(o),new Error("Ett fel uppstod vid inloggningen.")}}),userSlice=createSlice({name:"user",initialState,reducers:{},extraReducers:o=>{o.addCase(logInUserAsync.fulfilled,(i,et)=>{et.payload&&(i.user=et.payload,i.error=null)}).addCase(logInUserAsync.rejected,i=>{i.user=void 0,i.error="Användarnamn eller lösenord är felaktigt."}).addCase(logOutUserAsync.fulfilled,(i,et)=>{et.payload&&(i.user=void 0,i.error=null)}).addCase(logOutUserAsync.rejected,i=>{i.user=void 0,i.error="Något gick fel vid utloggningen."}).addCase(getUserAsync.fulfilled,(i,et)=>{et.payload&&(i.user=et.payload,i.error=null)}).addCase(getUserAsync.rejected,i=>{i.user=void 0,i.error="Auth is not correct."}).addCase(createUserAsync.fulfilled,(i,et)=>{et.payload&&(i.error=null)}).addCase(createUserAsync.rejected,i=>{i.user=void 0,i.error="Något gick fel med skapandet av konto."})}}),userReducer=userSlice.reducer,store=configureStore({reducer:{profileSlice:profileReducer,userSlice:userReducer,authSlice:authReducer,teamSlice:teamReducer,meetingSlice:meetingReducer,conversationSlice:conversationReducer,messageSlice:messageReducer}}),useAppDispatch=useDispatch,useAppSelector=useSelector,theme1=createTheme({palette:{primary:{main:"#E4B7BF"},office:{main:"#FCF3CF"},room:{main:"#E2F2FC"},chat:{main:"#f3e4fa"},leave:{main:"#F5CBA7"},warning:{main:"#A4000D"}}}),StyledTextField=styled(TextField$1)({"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"lightgray"}});function ChatRoom(){const o=useAppDispatch(),i=reactExports.useRef(null),et=useAppSelector(Zt=>Zt.teamSlice.activeTeam),nt=useAppSelector(Zt=>Zt.profileSlice.profiles),ot=useAppSelector(Zt=>Zt.profileSlice.activeProfile),lt=[...useAppSelector(Zt=>Zt.messageSlice.messages)].sort((Zt,tn)=>new Date(Zt.dateCreated).getTime()-new Date(tn.dateCreated).getTime()),ht=useAppSelector(Zt=>Zt.conversationSlice.teamConversation),ft=useAppSelector(Zt=>Zt.conversationSlice.activeConversationParticipant),[St,vt]=reactExports.useState(""),[Rt,wt]=reactExports.useState(!1),[$t,Dt]=reactExports.useState(""),[Pt,Ut]=reactExports.useState(""),Ot=()=>{var Zt;(Zt=i.current)==null||Zt.scrollIntoView({behavior:"smooth"})};reactExports.useEffect(()=>{const Zt=ChatConnector.getInstance();Zt.events={messageSent:tn=>{o(messageSent(tn)),Ot()},messageEdited:tn=>{o(messageEdited(tn)),Ot()},messageDeleted:tn=>{o(messageDeleted(tn)),Ot()}}},[]),reactExports.useEffect(()=>{Ot(),o(getActiveTeam())},[]);const Lt=Zt=>{console.log("MESSAGE ID ÄR: ",Zt),o(DeleteMessageAsync(Zt)),o(liveUpdateMessageDeleted(Zt))};reactExports.useEffect(()=>{Ot()},[lt]),reactExports.useEffect(()=>{et&&(console.log("KÖRS"),o(GetMyProfileAsync(et.id)),o(GetTeamConversation(et.id)),o(GetTeamConversationMessages(et.id)),o(GetTeamProfiles(et.id)))},[et]),reactExports.useEffect(()=>{ht&&ot&&o(GetConversationParticipant({profileId:ot.id,conversationId:ht.id}))},[ht]);const xt=()=>{if(ft&&St.trim()!==""){console.log("PARTICIPANTID: ",ft.id);const Zt={conversationParticipantId:ft.id,content:St,messageId:""};o(CreateMessageAsync(Zt)).then(tn=>{const dn=tn.payload;typeof dn!="string"&&dn&&(o(liveUpdateMessageSent(dn)),vt(""),Ot())}).catch(tn=>{console.error("Error sending message:",tn)})}Ot()},jt=Zt=>{Zt.key==="Enter"&&(qt(),wt(!1))},Ht=Zt=>{wt(!0),Dt(Zt.id),Ut(Zt.content)},qt=()=>{if(Pt&&Rt&&$t){const Zt=lt.find(tn=>tn.id==$t);if(Zt){const tn={conversationParticipantId:Zt.conversationParticipantId,content:Pt,messageId:Zt.id};o(EditMessageAsync(tn)).then(dn=>{const wn=dn.payload;typeof wn!="string"&&wn&&(o(liveUpdateMessageEdited(wn)),vt(""),Ot())}).catch(dn=>{console.error("Error sending message:",dn)})}}},Kt=Zt=>{const tn=nt==null?void 0:nt.find(dn=>dn.id==Zt);if(tn)return tn.avatarUrl},nn=theme1.palette.chat.main;return jsxRuntimeExports.jsxs(Container$1,{sx:{padding:"20px",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs(Card$1,{className:"card-content",sx:{padding:2,backgroundColor:"#f5f5f5",height:"350px",flexGrow:1,overflow:"auto"},children:[jsxRuntimeExports.jsxs(Typography$1,{variant:"h6",children:[et==null?void 0:et.name," - Chat"]}),Array.isArray(lt)&&ft&&lt.map(Zt=>Zt.id?jsxRuntimeExports.jsx(ChatMessage,{message:Zt,activeParticipant:ft,getProfilesAvatar:()=>Kt(Zt.profileId),handleDeleteMessage:()=>Lt(Zt.id),handleSetEditMode:()=>Ht(Zt),isEditMode:Rt,messageIdToEdit:$t,handleKeyPress:tn=>jt(tn),editedContent:Pt,setEditedContent:Ut},Zt.id):null),jsxRuntimeExports.jsx("div",{ref:i})]}),jsxRuntimeExports.jsxs(Container$1,{sx:{display:"flex",alignItems:"center",marginTop:"10px"},children:[jsxRuntimeExports.jsx(StyledTextField,{fullWidth:!0,variant:"outlined",value:St,onChange:Zt=>vt(Zt.target.value),sx:{input:{color:"black",marginRight:"10px",borderColor:nn}},onKeyDown:Zt=>{Zt.key==="Enter"&&xt()}}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",onClick:xt,sx:{backgroundColor:St.trim()!=""?nn:"lightgray",marginLeft:2},children:jsxRuntimeExports.jsx(default_1$f,{sx:{color:"white"}})})]})]})}function CreateMeetingPage(){const o=useAppDispatch(),i=useAppSelector(dn=>dn.meetingSlice.meetings),et=useAppSelector(dn=>dn.meetingSlice.meetingroom),nt=useAppSelector(dn=>dn.meetingSlice.error),ot=useNavigate(),[st,lt]=reactExports.useState(""),[ht,ft]=reactExports.useState(""),[St,vt]=reactExports.useState(""),[Rt,wt]=reactExports.useState(0),[$t,Dt]=reactExports.useState(!1),[Pt,Ut]=reactExports.useState(""),[,Ot]=reactExports.useState(""),[Lt,xt]=reactExports.useState(0),[jt,Ht]=reactExports.useState(""),[qt,Kt]=reactExports.useState(!1),nn=useAppSelector(dn=>dn.teamSlice.activeTeam),Zt=useAppSelector(dn=>dn.profileSlice.activeProfile);reactExports.useEffect(()=>{o(getActiveTeam())},[]),reactExports.useEffect(()=>{nn&&(o(GetMyProfileAsync(nn==null?void 0:nn.id)),o(Getmyactiveroom(nn.id)))},[nn]);const tn=async()=>{if(console.log("name: ",st),console.log("des: ",ht),console.log("DATUM SOM VI VÄLJER:::: ",St),console.log("nmin: ",Rt),console.log("activeprofile id: ",Zt==null?void 0:Zt.id),console.log("roomid: ",Pt),st!==""&&ht!==""&&St!==""&&Zt&&et&&nn){Kt(!1);const dn=Lt.toString(),wn=new Date(St),In=new Date(jt);console.log("parseddata:,  ",wn);const Sn={name:st,description:ht,date:wn,minutes:Rt.toString(),isRepeating:$t,roomId:et.id,ownerId:Zt.id,interval:dn,endDate:In,teamId:nn==null?void 0:nn.id};await o(createTeamMeetingAsync(Sn)),lt(""),ft(""),vt(""),wt(0),Dt(!1),xt(0),Ht(""),Ot(""),ot("/meetinginteam")}else Kt(!0)};return jsxRuntimeExports.jsx(Container$1,{sx:{padding:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[qt&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Alla fält måste vara ifyllda"}),jsxRuntimeExports.jsx(Typography$1,{variant:"h4",children:"Create Meeting"}),jsxRuntimeExports.jsx(TextField$1,{label:"Meeting Name",value:st,onChange:dn=>lt(dn.target.value),variant:"outlined",sx:{width:"250px",marginTop:2}}),jsxRuntimeExports.jsx(TextField$1,{label:"Description",value:ht,onChange:dn=>ft(dn.target.value),variant:"outlined",sx:{width:"250px",marginTop:2}}),jsxRuntimeExports.jsx(TextField$1,{label:"Date",type:"datetime-local",value:St,onChange:dn=>vt(dn.target.value),variant:"outlined",sx:{width:"250px",marginTop:2,"& label":{color:"transparent"},"&:focus label":{color:"initial"}}}),jsxRuntimeExports.jsx(TextField$1,{label:"Minutes",type:"number",value:Rt,onChange:dn=>wt(parseInt(dn.target.value,10)),variant:"outlined",sx:{width:"250px",marginTop:2}}),jsxRuntimeExports.jsx(FormControlLabel$1,{control:jsxRuntimeExports.jsx(Checkbox$1,{checked:$t,onChange:()=>Dt(!$t)}),label:"Repeating",sx:{width:"250px",marginTop:2}}),$t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TextField$1,{label:"Interval",type:"number",value:Lt,onChange:dn=>xt(parseInt(dn.target.value,10)),variant:"outlined",sx:{width:"250px",marginTop:2}}),jsxRuntimeExports.jsx(TextField$1,{label:"End Date",type:"datetime-local",value:jt,onChange:dn=>Ht(dn.target.value),variant:"outlined",sx:{width:"250px",marginTop:2}})]}),jsxRuntimeExports.jsx(TextField$1,{type:"hidden",value:Pt,onChange:dn=>Ut(dn.target.value)}),jsxRuntimeExports.jsx(TextField$1,{type:"hidden",value:(Zt==null?void 0:Zt.id)||"",onChange:dn=>Ot(dn.target.value)}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",onClick:tn,children:"Create Meeting"}),i&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h6",children:"Latest Meeting:"}),jsxRuntimeExports.jsx(Typography$1,{children:i[i.length-1].name})]}),nt&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:nt})]})})}function EnterHouse(){const o=useNavigate();return reactExports.useEffect(()=>{const i=document.getElementById("video"),et=()=>{o("/menu")};return i&&i.addEventListener("ended",et),()=>{i&&i.removeEventListener("ended",et)}},[o]),jsxRuntimeExports.jsxs("video",{id:"video",autoPlay:!0,style:{height:"100%",width:"100%"},children:[jsxRuntimeExports.jsx("source",{src:"https://i.imgur.com/s4D0XN7.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}function InviteToMeeting(){return jsxRuntimeExports.jsx(Container$1,{sx:{padding:"20px"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:"Invite en profil till meeting som finns om du är ägaren av mötet"})})}var Mic={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(Mic,"__esModule",{value:!0});var default_1$c=Mic.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=Mic.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic");var MicOff={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(MicOff,"__esModule",{value:!0});var default_1$b=MicOff.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;default_1$b=MicOff.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff");var Videocam={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(Videocam,"__esModule",{value:!0});var default_1$a=Videocam.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$a=Videocam.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam");var VideocamOff={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(VideocamOff,"__esModule",{value:!0});var default_1$9=VideocamOff.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$9=VideocamOff.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73z"}),"VideocamOff");const LiveVideo=()=>{const o="164c628ea4b243ed8ebf6d36d0e1d3c9",{channelName:i}=useParams(),[et,nt]=reactExports.useState(!0),[ot,st]=reactExports.useState(!0),[lt,ht]=reactExports.useState(!1),{localMicrophoneTrack:ft}=G2(ot),{localCameraTrack:St}=W2(lt),vt=useNavigate();L2({appid:o,channel:i,token:null},et),V2([ft,St]);const Rt=Z2(),{audioTracks:wt}=K2(Rt),$t=useAppSelector(Dt=>Dt.profileSlice.activeProfile);return wt.forEach(Dt=>Dt.play()),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{id:"remoteVideoGrid",children:Rt.map(Dt=>jsxRuntimeExports.jsxs("div",{className:"remote-video-container",children:[jsxRuntimeExports.jsx("p",{children:$t==null?void 0:$t.fullName}),jsxRuntimeExports.jsx(Sx,{user:Dt})]},Dt.uid))}),jsxRuntimeExports.jsxs("div",{id:"localVideo",children:[jsxRuntimeExports.jsx(_x,{audioTrack:ft,videoTrack:St,cameraOn:lt,micOn:ot,playAudio:ot,playVideo:lt,className:""}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{id:"controlsToolbar",children:[jsxRuntimeExports.jsxs("div",{id:"mediaControls",children:[jsxRuntimeExports.jsx("button",{className:"btn",onClick:()=>st(Dt=>!Dt),children:ot?jsxRuntimeExports.jsx(default_1$c,{}):jsxRuntimeExports.jsx(default_1$b,{})}),jsxRuntimeExports.jsx("button",{className:"btn",onClick:()=>ht(Dt=>!Dt),children:lt?jsxRuntimeExports.jsx(default_1$a,{}):jsxRuntimeExports.jsx(default_1$9,{})})]}),jsxRuntimeExports.jsx("button",{id:"endConnection",className:"btn",onClick:()=>{nt(!1),vt("/meetingroom")},children:"Lämna"})]})})]})]})};var Delete={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(Delete,"__esModule",{value:!0});var default_1$8=Delete.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$8=Delete.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function MeetingInTeamsPage(){const o=useAppSelector(Zt=>Zt.teamSlice.activeTeam),i=useAppSelector(Zt=>Zt.meetingSlice.occasions),et=useAppSelector(Zt=>Zt.meetingSlice.meetings),nt=useAppSelector(Zt=>Zt.meetingSlice.error),ot=useAppSelector(Zt=>Zt.profileSlice.activeProfile),[st,lt]=reactExports.useState(!1),[ht,ft]=reactExports.useState(""),[St,vt]=reactExports.useState(""),[Rt,wt]=reactExports.useState(""),[$t,Dt]=reactExports.useState(""),Pt=theme1.palette.office.main,Ut=theme1.palette.chat.main,Ot=useAppDispatch();reactExports.useEffect(()=>{Ot(getActiveTeam())},[]),reactExports.useEffect(()=>{o&&(Ot(GetMyProfileAsync(o==null?void 0:o.id)),Ot(GetTeamProfiles(o==null?void 0:o.id)))},[Ot,o]),reactExports.useEffect(()=>{ot&&(console.log("OCH HÄR AKTIV PROFIL: ",ot),Ot(GetMyMeetingsAsync(ot.id)),Ot(GetMyOccasionsAsync(ot.id)),Ot(GetMyPastMeetingsAsync(ot.id)))},[ot]);const Lt=new Date,xt=i?i.filter(Zt=>new Date(Zt.date)>=Lt):[],jt=useAppSelector(Zt=>Zt.meetingSlice.pastOccasions)||[],Ht=Zt=>{console.log("MESSAGE ID ÄR: ",Zt),Ot(DeleteMeetingAsync(Zt))},qt=()=>{if(ht&&st){const Zt=et==null?void 0:et.find(tn=>tn.id==ht);if(Zt){console.log("datum ääääääääääääär: ",$t);const tn=Date.parse($t);if(console.log("datum ääääääääääääär: ",new Date(tn)),isNaN(tn))console.error("Ogiltig datumsträng");else{const dn={...Zt,name:St,description:Rt,date:new Date(tn)};Ot(EditMeetingAsync(dn))}}}},Kt=Zt=>{Zt.key==="Enter"&&(qt(),lt(!1))},nn=Zt=>{if(et){const tn=et.find(dn=>dn.id==Zt);if(tn){lt(!0),vt(tn==null?void 0:tn.name),wt(tn==null?void 0:tn.description);const dn=new Date(tn.date).toLocaleString("sv-SE",{timeZone:"Europe/Stockholm"});Dt(dn),ft(tn.id)}}};return jsxRuntimeExports.jsxs(Container$1,{children:[nt?jsxRuntimeExports.jsx(Typography$1,{children:"Endast skapare av mötet kan radera"}):null,jsxRuntimeExports.jsxs(Typography$1,{variant:"h4",children:["Mötes scheman för ",o==null?void 0:o.name]}),jsxRuntimeExports.jsxs(Box$1,{children:[xt.length>0&&jsxRuntimeExports.jsxs(Box$1,{children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h5",children:"Kommande möten"}),xt==null?void 0:xt.map(Zt=>jsxRuntimeExports.jsx(Card$1,{style:{marginBottom:"15px",backgroundColor:Pt},children:jsxRuntimeExports.jsxs(CardContent$1,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsxs("div",{children:[st&&ht==Zt.meetingId?jsxRuntimeExports.jsx(TextField$1,{value:St,onChange:tn=>vt(tn.target.value),type:"text",fullWidth:!0,variant:"outlined",onKeyDown:Kt}):jsxRuntimeExports.jsx(Typography$1,{variant:"subtitle1",children:Zt.name}),st&&Zt.meetingId==ht?jsxRuntimeExports.jsx(TextField$1,{label:"Date",type:"datetime-local",value:$t,onChange:tn=>Dt(tn.target.value),variant:"outlined",sx:{width:"250px",marginTop:2},onKeyDown:Kt}):jsxRuntimeExports.jsx(Typography$1,{variant:"body2",children:Zt.date.toString()}),st&&ht==Zt.meetingId?jsxRuntimeExports.jsx(TextField$1,{value:Rt,onChange:tn=>wt(tn.target.value),type:"text",fullWidth:!0,variant:"outlined",onKeyDown:Kt}):jsxRuntimeExports.jsx(Typography$1,{variant:"subtitle1",children:Zt.description})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(IconButton$1,{onClick:()=>Ht(Zt.meetingId),children:jsxRuntimeExports.jsx(default_1$8,{})}),jsxRuntimeExports.jsx(IconButton$1,{size:"small",onClick:()=>nn(Zt.meetingId),children:jsxRuntimeExports.jsx(default_1$d,{})})]})]})},Zt.id))]}),jt.length>0&&jsxRuntimeExports.jsxs(Box$1,{children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h5",children:"Passerade möten"}),jt==null?void 0:jt.map(Zt=>jsxRuntimeExports.jsx(Card$1,{style:{marginBottom:"15px",backgroundColor:Ut},children:jsxRuntimeExports.jsxs(CardContent$1,{children:[jsxRuntimeExports.jsx(Typography$1,{variant:"subtitle1",children:Zt.name}),jsxRuntimeExports.jsx(Typography$1,{variant:"body2",children:Zt.date.toString()})]})},Zt.id))]})]})]})}var FiberManualRecord={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(FiberManualRecord,"__esModule",{value:!0});var default_1$7=FiberManualRecord.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$7=FiberManualRecord.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");const MeetingRoom=({connectToVideo:o})=>{const i=useAppDispatch(),et=useAppSelector(Dt=>Dt.teamSlice.activeTeam),nt=useAppSelector(Dt=>Dt.profileSlice.activeProfile),ot=useAppSelector(Dt=>Dt.profileSlice.onlineProfiles),st=useAppSelector(Dt=>Dt.meetingSlice.occasions),lt=new Date,ht=st?st.find(Dt=>{const Pt=new Date(Dt.date),Ut=new Date(Pt.getTime()+Dt.minutes*6e4);return Pt<=lt&&Ut>=lt}):null;reactExports.useEffect(()=>{console.log("HÄMTAR TEAM"),i(getActiveTeam())},[]),reactExports.useEffect(()=>{et&&(i(GetMyProfileAsync(et==null?void 0:et.id)),i(GetTeamProfiles(et==null?void 0:et.id)),i(GetOnlineProfiles(et.id)),console.log("jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj"))},[et]),reactExports.useEffect(()=>{nt&&i(GetMyMeetingsAsync(nt.id))},[]),reactExports.useEffect(()=>{const Dt=Connector.getInstance();return Dt.events={profileOnline:Pt=>{i(profileOnline(Pt))},profileOffline:Pt=>{i(profileOffline(Pt))}},()=>{Dt&&(Connector.getInstance().events={profileOnline:()=>{},profileOffline:()=>{}})}},[]),reactExports.useEffect(()=>(nt&&i(enterMeetingRoomAsync(nt.id)),()=>{nt&&i(leaveMeetingRoomAsync(nt.id))}),[i,nt]);const ft="https://i.imgur.com/EC5f1XS.jpeg",St=window.innerWidth<=500,vt=theme1.palette.room.main,Rt=theme1.palette.leave.main,wt=useNavigate(),$t=reactExports.memo(({profile:Dt})=>jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[jsxRuntimeExports.jsx(default_1$7,{sx:{color:"lightgreen"}}),jsxRuntimeExports.jsx(Typography$1,{children:Dt.fullName})]},Dt.profileId));return jsxRuntimeExports.jsxs(Container$1,{sx:{padding:"20px",backgroundImage:`url(${ft})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh"},children:[jsxRuntimeExports.jsxs(Card$1,{sx:{padding:2,backgroundColor:vt},children:[jsxRuntimeExports.jsxs(Typography$1,{children:[" ",et==null?void 0:et.name,"'s mötesrum"]}),ot&&ot.length>0?jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column"},children:ot.map(Dt=>jsxRuntimeExports.jsx($t,{profile:Dt},Dt.profileId))}):jsxRuntimeExports.jsx(Typography$1,{children:"Inga profiler online"})]}),ht?jsxRuntimeExports.jsx(Card$1,{sx:{display:"inline-block",width:"300px",margin:"10px",backgroundColor:vt},children:jsxRuntimeExports.jsx(CardActionArea$1,{onClick:()=>{o(ht.meetingId)},children:jsxRuntimeExports.jsx(CardContent$1,{sx:{flex:"1 0 auto"},children:jsxRuntimeExports.jsxs(Typography$1,{component:"div",variant:"h6",sx:{textAlign:"center"},children:["Gå med i mötet ",ht.name]})})})}):null,jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",flexDirection:"column",marginTop:10,gap:10},children:[jsxRuntimeExports.jsx(Card$1,{sx:{display:"flex",minWidth:St?"100px":"250px",backgroundColor:vt},children:jsxRuntimeExports.jsx(CardActionArea$1,{onClick:()=>{wt("/createmeeting")},children:jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsx(CardContent$1,{sx:{flex:"1 0 auto"},children:jsxRuntimeExports.jsx(Typography$1,{component:"div",variant:"h6",sx:{textAlign:"center"},children:"Skapa möte"})})})})}),jsxRuntimeExports.jsx(Card$1,{sx:{display:"flex",minWidth:St?"100px":"250px",backgroundColor:vt},children:jsxRuntimeExports.jsx(CardActionArea$1,{onClick:()=>{wt("/meetinginteam")},children:jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsx(CardContent$1,{sx:{flex:"1 0 auto"},children:jsxRuntimeExports.jsx(Typography$1,{component:"div",variant:"h6",sx:{textAlign:"center"},children:"Teamets möten"})})})})}),jsxRuntimeExports.jsx(Card$1,{sx:{display:"flex",minWidth:St?"100px":"250px",backgroundColor:Rt},children:jsxRuntimeExports.jsx(CardActionArea$1,{onClick:()=>{wt("/menu")},children:jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsx(CardContent$1,{sx:{flex:"1 0 auto"},children:jsxRuntimeExports.jsx(Typography$1,{component:"div",variant:"h6",sx:{textAlign:"center"},children:"Lämna"})})})})})]})]})};var Groups={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(Groups,"__esModule",{value:!0});var default_1$6=Groups.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=Groups.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3"}),"Groups");var NotificationsNone={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(NotificationsNone,"__esModule",{value:!0});var default_1$5=NotificationsNone.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=NotificationsNone.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone");function NavCard(o){const i=window.innerWidth<=500,et=useNavigate();return jsxRuntimeExports.jsx(Card$1,{sx:{display:"flex",width:i?"100px":"200px",backgroundColor:o.backgroundColor},children:jsxRuntimeExports.jsx(CardActionArea$1,{onClick:()=>{o.onClick?o.onClick():et(o.navigationPage)},children:jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsxs(CardContent$1,{sx:{flex:"1 0 auto"},children:[jsxRuntimeExports.jsx(Typography$1,{component:"div",sx:{textAlign:"center",fontSize:i?"10":"22"},children:o.title}),o.icon?jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",justifyContent:"center"},children:o.icon}):null]})})})})}function Menu(){const[o,i]=reactExports.useState(!1),[et,nt]=React$1.useState(null),ot=useAppSelector(nn=>nn.teamSlice.activeTeam),st=theme1.palette.office.main,lt=theme1.palette.room.main,ht=theme1.palette.chat.main,ft=theme1.palette.leave.main,St=useAppDispatch(),vt=useAppSelector(nn=>nn.profileSlice.profiles),Rt=useAppSelector(nn=>nn.profileSlice.activeProfile),[wt,$t]=reactExports.useState(!1),Dt=useAppSelector(nn=>nn.meetingSlice.occasions),Pt=new Date,Ut=useNavigate(),Ot=Dt?Dt.find(nn=>{const Zt=new Date(nn.date),tn=new Date(Zt.getTime()+nn.minutes*6e4);return Zt<=Pt&&tn>=Pt}):null;reactExports.useEffect(()=>{St(getActiveTeam())},[]),reactExports.useEffect(()=>{ot&&(St(GetTeamProfiles(ot.id)),St(GetMyProfileAsync(ot.id)))},[]),reactExports.useEffect(()=>{Rt&&(console.log("körs"),console.log("AKTIVE PROFIL : ",Rt),St(GetMyMeetingsAsync(Rt.id)))},[]);const Lt=()=>{ot&&(navigator.clipboard.writeText(ot.code),$t(!0),setTimeout(()=>$t(!1),3e3))},xt=nn=>{nt(nn.currentTarget),i(!0)},jt=()=>{ot&&(St(GetOnlineProfiles(ot.id)),Ut("/meetingroom"))},Ht=()=>{i(!1)},qt="https://i.imgur.com/bpC29BQ.jpeg",Kt=window.innerWidth<=500;return jsxRuntimeExports.jsxs(Container$1,{sx:{padding:"20px",backgroundImage:`url(${qt})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx("div",{className:"company-name-container",children:jsxRuntimeExports.jsx(Typography$1,{variant:"h4",className:"company-name",sx:{textAlign:"center"},children:ot==null?void 0:ot.name})})}),jsxRuntimeExports.jsxs(Button$1,{onClick:Lt,variant:"contained",sx:{mt:2},children:["Kod: ",ot==null?void 0:ot.code]}),wt?jsxRuntimeExports.jsx(Alert$1,{variant:"filled",severity:"success",sx:{position:"absolute",marginTop:Kt?20:15},children:"Du har kopierat koden!"}):null]})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:100,height:"100%"},children:[jsxRuntimeExports.jsxs("div",{style:{flexDirection:"column",display:"flex",gap:50},children:[jsxRuntimeExports.jsx(NavCard,{backgroundColor:lt,navigationPage:"/meetingroom",title:"Mötesrum",onClick:jt,icon:Ot?jsxRuntimeExports.jsx(default_1$5,{sx:{paddingLeft:1,textAlign:"center",flexDirection:"row",fontSize:Kt?"10":"22"}}):null}),jsxRuntimeExports.jsx(NavCard,{backgroundColor:ht,navigationPage:"/chatroom",title:"Chattrum"})]}),jsxRuntimeExports.jsxs(Card$1,{sx:{backgroundColor:"transparent",padding:1},children:[jsxRuntimeExports.jsx(Box$1,{component:"div",sx:{backgroundColor:"transparent",padding:1},onMouseEnter:xt,onMouseLeave:Ht,children:jsxRuntimeExports.jsx(default_1$6,{sx:{fontSize:Kt?30:50}})}),o&&jsxRuntimeExports.jsx(Popper$1,{open:o,anchorEl:et,onMouseLeave:Ht,children:jsxRuntimeExports.jsx(Box$1,{sx:{border:1,p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:2,maxWidth:300},children:Array.isArray(vt)&&vt.map(nn=>jsxRuntimeExports.jsxs(Typography$1,{sx:{marginBottom:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[jsxRuntimeExports.jsx(Avatar$1,{src:nn.avatarUrl,sx:{height:25,width:20,marginRight:1}}),nn.fullName," - ",nn.role]},nn.id))})})]}),jsxRuntimeExports.jsxs("div",{style:{flexDirection:"column",display:"flex",gap:50},children:[jsxRuntimeExports.jsx(NavCard,{backgroundColor:st,navigationPage:"/office",title:"Mitt Kontor"}),jsxRuntimeExports.jsx(NavCard,{backgroundColor:ft,navigationPage:"/chooseteam",title:"Lämna"})]})]}),jsxRuntimeExports.jsx("a",{style:{bottom:0,position:"absolute",textDecoration:"none",color:"black"},href:"https://www.vecteezy.com/free-photos/interior",children:"Interior Stock photos by Vecteezy"})]})}function Office(){const o=useAppDispatch(),i=useAppSelector(st=>st.profileSlice.activeProfile),et=useAppSelector(st=>st.teamSlice.activeTeam);reactExports.useEffect(()=>{o(getActiveTeam())},[]),reactExports.useEffect(()=>{et&&o(GetMyProfileAsync(et==null?void 0:et.id))},[et]);const nt="https://i.imgur.com/uWBWv0m.jpeg",ot=theme1.palette.office.main;return jsxRuntimeExports.jsx(Container$1,{sx:{padding:"20px",backgroundImage:`url(${nt})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh"},children:jsxRuntimeExports.jsx(Card$1,{sx:{padding:2,backgroundColor:ot},children:jsxRuntimeExports.jsxs(Typography$1,{children:[" ",i==null?void 0:i.fullName,"'s kontor"]})})})}function OngoingMeeting(){return jsxRuntimeExports.jsx("div",{children:"Här ska vi ha själva samtalet då"})}function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var libphonenumber={exports:{}};(function(module,exports){(function(o){module.exports=o()})(function(){return function(){function o(i,et,nt){function ot(ht,ft){if(!et[ht]){if(!i[ht]){var St=typeof commonjsRequire=="function"&&commonjsRequire;if(!ft&&St)return St(ht,!0);if(st)return st(ht,!0);var vt=new Error("Cannot find module '"+ht+"'");throw vt.code="MODULE_NOT_FOUND",vt}var Rt=et[ht]={exports:{}};i[ht][0].call(Rt.exports,function(wt){var $t=i[ht][1][wt];return ot($t||wt)},Rt,Rt.exports,o,i,et,nt)}return et[ht].exports}for(var st=typeof commonjsRequire=="function"&&commonjsRequire,lt=0;lt<nt.length;lt++)ot(nt[lt]);return ot}return o}()({1:[function(require,module,exports){(function(global){(function(){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.createTemplateTagFirstArg=function(o){return o.raw=o},$jscomp.createTemplateTagFirstArgWithRaw=function(o,i){return o.raw=i,o},$jscomp.arrayIteratorImpl=function(o){var i=0;return function(){return i<o.length?{done:!1,value:o[i++]}:{done:!0}}},$jscomp.arrayIterator=function(o){return{next:$jscomp.arrayIteratorImpl(o)}},$jscomp.makeIterator=function(o){var i=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return i?i.call(o):$jscomp.arrayIterator(o)},$jscomp.arrayFromIterator=function(o){for(var i,et=[];!(i=o.next()).done;)et.push(i.value);return et},$jscomp.arrayFromIterable=function(o){return o instanceof Array?o:$jscomp.arrayFromIterator($jscomp.makeIterator(o))},$jscomp.checkStringArgs=function(o,i,et){if(o==null)throw new TypeError("The 'this' value for String.prototype."+et+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+et+" must not be a regular expression");return o+""},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(o,i,et){return o==Array.prototype||o==Object.prototype||(o[i]=et.value),o},$jscomp.getGlobal=function(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var i=0;i<o.length;++i){var et=o[i];if(et&&et.Math==Math)return et}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$",$jscomp.polyfill=function(o,i,et,nt){i&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(o,i,et,nt):$jscomp.polyfillUnisolated(o,i,et,nt))},$jscomp.polyfillUnisolated=function(o,i,et,nt){for(et=$jscomp.global,o=o.split("."),nt=0;nt<o.length-1;nt++){var ot=o[nt];if(!(ot in et))return;et=et[ot]}o=o[o.length-1],nt=et[o],i=i(nt),i!=nt&&i!=null&&$jscomp.defineProperty(et,o,{configurable:!0,writable:!0,value:i})},$jscomp.polyfillIsolated=function(o,i,et,nt){var ot=o.split(".");o=ot.length===1,nt=ot[0],nt=!o&&nt in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var st=0;st<ot.length-1;st++){var lt=ot[st];if(!(lt in nt))return;nt=nt[lt]}ot=ot[ot.length-1],et=$jscomp.IS_SYMBOL_NATIVE&&et==="es6"?nt[ot]:null,i=i(et),i!=null&&(o?$jscomp.defineProperty($jscomp.polyfills,ot,{configurable:!0,writable:!0,value:i}):i!==et&&($jscomp.propertyToPolyfillSymbol[ot]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(ot):$jscomp.POLYFILL_PREFIX+ot,ot=$jscomp.propertyToPolyfillSymbol[ot],$jscomp.defineProperty(nt,ot,{configurable:!0,writable:!0,value:i})))},$jscomp.polyfill("String.prototype.endsWith",function(o){return o||function(i,et){var nt=$jscomp.checkStringArgs(this,i,"endsWith");i+="",et===void 0&&(et=nt.length),et=Math.max(0,Math.min(et|0,nt.length));for(var ot=i.length;0<ot&&0<et;)if(nt[--et]!=i[--ot])return!1;return 0>=ot}},"es6","es3"),$jscomp.findInternal=function(o,i,et){o instanceof String&&(o=String(o));for(var nt=o.length,ot=0;ot<nt;ot++){var st=o[ot];if(i.call(et,st,ot,o))return{i:ot,v:st}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.find",function(o){return o||function(i,et){return $jscomp.findInternal(this,i,et).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(o){return o||function(i,et){var nt=$jscomp.checkStringArgs(this,i,"startsWith");i+="";var ot=nt.length,st=i.length;et=Math.max(0,Math.min(et|0,nt.length));for(var lt=0;lt<st&&et<ot;)if(nt[et++]!=i[lt++])return!1;return lt>=st}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(o){return o||function(i){var et=$jscomp.checkStringArgs(this,null,"repeat");if(0>i||1342177279<i)throw new RangeError("Invalid count value");i|=0;for(var nt="";i;)i&1&&(nt+=et),(i>>>=1)&&(et+=et);return nt}},"es6","es3"),$jscomp.initSymbol=function(){},$jscomp.polyfill("Symbol",function(o){if(o)return o;var i=function(ot,st){this.$jscomp$symbol$id_=ot,$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:st})};i.prototype.toString=function(){return this.$jscomp$symbol$id_};var et=0,nt=function(ot){if(this instanceof nt)throw new TypeError("Symbol is not a constructor");return new i("jscomp_symbol_"+(ot||"")+"_"+et++,ot)};return nt},"es6","es3"),$jscomp.polyfill("Symbol.iterator",function(o){if(o)return o;o=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),et=0;et<i.length;et++){var nt=$jscomp.global[i[et]];typeof nt=="function"&&typeof nt.prototype[o]!="function"&&$jscomp.defineProperty(nt.prototype,o,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return o},"es6","es3"),$jscomp.iteratorPrototype=function(o){return o={next:o},o[Symbol.iterator]=function(){return this},o},$jscomp.iteratorFromArray=function(o,i){o instanceof String&&(o+="");var et=0,nt=!1,ot={next:function(){if(!nt&&et<o.length){var st=et++;return{value:i(st,o[st]),done:!1}}return nt=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot},$jscomp.polyfill("Array.prototype.keys",function(o){return o||function(){return $jscomp.iteratorFromArray(this,function(i){return i})}},"es6","es3"),$jscomp.polyfill("Object.is",function(o){return o||function(i,et){return i===et?i!==0||1/i===1/et:i!==i&&et!==et}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(o){return o||function(i,et){var nt=this;nt instanceof String&&(nt=String(nt));var ot=nt.length;for(et=et||0,0>et&&(et=Math.max(et+ot,0));et<ot;et++){var st=nt[et];if(st===i||Object.is(st,i))return!0}return!1}},"es7","es3"),$jscomp.polyfill("String.prototype.includes",function(o){return o||function(i,et){return $jscomp.checkStringArgs(this,i,"includes").indexOf(i,et||0)!==-1}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.exportPath_=function(o,i,et,nt){o=o.split("."),nt=nt||goog.global,o[0]in nt||typeof nt.execScript>"u"||nt.execScript("var "+o[0]);for(var ot;o.length&&(ot=o.shift());)if(o.length||i===void 0)nt=nt[ot]&&nt[ot]!==Object.prototype[ot]?nt[ot]:nt[ot]={};else if(!et&&goog.isObject(i)&&goog.isObject(nt[ot]))for(var st in i)i.hasOwnProperty(st)&&(nt[ot][st]=i[st]);else nt[ot]=i},goog.define=function(o,i){return i},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(o){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(o)},goog.constructNamespace_=function(o,i,et){goog.exportPath_(o,i,et)},goog.getScriptNonce=function(o){return o&&o!=goog.global?goog.getScriptNonce_(o.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(o)?o:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(o){if(typeof o!="string"||!o||o.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+o+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=o},goog.module.get=function(o){return goog.module.getInternal_(o)},goog.module.getInternal_=function(o){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var o=goog.global.$jscomp;return o?typeof o.getCurrentModulePath!="function"?!1:!!o.getCurrentModulePath():!1},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(o){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=o;else{var i=goog.global.$jscomp;if(!i||typeof i.getCurrentModulePath!="function")throw Error('Module with namespace "'+o+'" has been loaded incorrectly.');i=i.require(i.getCurrentModulePath()),goog.loadedModules_[o]={exports:i,type:goog.ModuleType.ES6,moduleId:o}}},goog.setTestOnly=function(o){if(goog.DISALLOW_TEST_ONLY_CODE)throw o=o||"",Error("Importing test-only code into non-debug environment"+(o?": "+o:"."))},goog.forwardDeclare=function(o){},goog.getObjectByName=function(o,i){o=o.split("."),i=i||goog.global;for(var et=0;et<o.length;et++)if(i=i[o[et]],i==null)return null;return i},goog.addDependency=function(o,i,et,nt){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(o){goog.global.console&&goog.global.console.error(o)},goog.require=function(o){},goog.requireType=function(o){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(o){o.instance_=void 0,o.getInstance=function(){return o.instance_?o.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=o),o.instance_=new o)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(o){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(o){return"(function(){"+o+`
;})();
`},goog.loadModule=function(o){var i=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var et={},nt=et;if(typeof o=="function")nt=o.call(void 0,nt);else if(typeof o=="string")goog.useSafari10Workaround()&&(o=goog.workaroundSafari10EvalBug(o)),nt=goog.loadModuleFromSource_.call(void 0,nt,o);else throw Error("Invalid module definition");var ot=goog.moduleLoaderState_.moduleName;if(typeof ot=="string"&&ot)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(ot,nt,et!==nt):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof nt=="object"&&nt!=null&&Object.seal(nt),goog.loadedModules_[ot]={exports:nt,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+ot+'"')}finally{goog.moduleLoaderState_=i}},goog.loadModuleFromSource_=function(a,b){return eval(b),a},goog.normalizePath_=function(o){o=o.split("/");for(var i=0;i<o.length;)o[i]=="."?o.splice(i,1):i&&o[i]==".."&&o[i-1]&&o[i-1]!=".."?o.splice(--i,2):i++;return o.join("/")},goog.loadFileSync_=function(o){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(o);try{var i=new goog.global.XMLHttpRequest;return i.open("get",o,!1),i.send(),i.status==0||i.status==200?i.responseText:null}catch{return null}},goog.transpile_=function(o,i,et){var nt=goog.global.$jscomp;nt||(goog.global.$jscomp=nt={});var ot=nt.transpile;if(!ot){var st=goog.basePath+goog.TRANSPILER,lt=goog.loadFileSync_(st);if(lt){if((function(){(0,eval)(lt+`
//# sourceURL=`+st)}).call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,nt=goog.global.$jscomp,ot=nt.transpile}}return ot||(ot=nt.transpile=function(ht,ft){return goog.logToConsole_(ft+" requires transpilation but no transpiler was found."),ht}),ot(o,i,et)},goog.typeOf=function(o){var i=typeof o;return i!="object"?i:o?Array.isArray(o)?"array":i:"null"},goog.isArrayLike=function(o){var i=goog.typeOf(o);return i=="array"||i=="object"&&typeof o.length=="number"},goog.isDateLike=function(o){return goog.isObject(o)&&typeof o.getFullYear=="function"},goog.isObject=function(o){var i=typeof o;return i=="object"&&o!=null||i=="function"},goog.getUid=function(o){return Object.prototype.hasOwnProperty.call(o,goog.UID_PROPERTY_)&&o[goog.UID_PROPERTY_]||(o[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(o){return!!o[goog.UID_PROPERTY_]},goog.removeUid=function(o){o!==null&&"removeAttribute"in o&&o.removeAttribute(goog.UID_PROPERTY_);try{delete o[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.cloneObject=function(o){var i=goog.typeOf(o);if(i=="object"||i=="array"){if(typeof o.clone=="function")return o.clone();i=i=="array"?[]:{};for(var et in o)i[et]=goog.cloneObject(o[et]);return i}return o},goog.bindNative_=function(o,i,et){return o.call.apply(o.bind,arguments)},goog.bindJs_=function(o,i,et){if(!o)throw Error();if(2<arguments.length){var nt=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,nt),o.apply(i,ot)}}return function(){return o.apply(i,arguments)}},goog.bind=function(o,i,et){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(o,i){var et=Array.prototype.slice.call(arguments,1);return function(){var nt=et.slice();return nt.push.apply(nt,arguments),o.apply(this,nt)}},goog.mixin=function(o,i){for(var et in i)o[et]=i[et]},goog.now=function(){return Date.now()},goog.globalEval=function(o){(0,eval)(o)},goog.getCssName=function(o,i){if(String(o).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+o);var et=function(ot){return goog.cssNameMapping_[ot]||ot},nt=function(ot){ot=ot.split("-");for(var st=[],lt=0;lt<ot.length;lt++)st.push(et(ot[lt]));return st.join("-")};return nt=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?et:nt:function(ot){return ot},o=i?o+"-"+nt(i):nt(o),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(o):o},goog.setCssNameMapping=function(o,i){goog.cssNameMapping_=o,goog.cssNameMappingStyle_=i},goog.getMsg=function(o,i,et){return et&&et.html&&(o=o.replace(/</g,"&lt;")),et&&et.unescapeHtmlEntities&&(o=o.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),i&&(o=o.replace(/\{\$([^}]+)}/g,function(nt,ot){return i!=null&&ot in i?i[ot]:nt})),o},goog.getMsgWithFallback=function(o,i){return o},goog.exportSymbol=function(o,i,et){goog.exportPath_(o,i,!0,et)},goog.exportProperty=function(o,i,et){o[i]=et},goog.inherits=function(o,i){function et(){}et.prototype=i.prototype,o.superClass_=i.prototype,o.prototype=new et,o.prototype.constructor=o,o.base=function(nt,ot,st){for(var lt=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)lt[ht-2]=arguments[ht];return i.prototype[ot].apply(nt,lt)}},goog.scope=function(o){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");o.call(goog.global)},goog.defineClass=function(o,i){var et=i.constructor,nt=i.statics;return et&&et!=Object.prototype.constructor||(et=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),et=goog.defineClass.createSealingConstructor_(et,o),o&&goog.inherits(et,o),delete i.constructor,delete i.statics,goog.defineClass.applyProperties_(et.prototype,i),nt!=null&&(nt instanceof Function?nt(et):goog.defineClass.applyProperties_(et,nt)),et},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(o,i){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var et=o.apply(this,arguments)||this;return et[goog.UID_PROPERTY_]=et[goog.UID_PROPERTY_],et}:o},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(o,i){for(var et in i)Object.prototype.hasOwnProperty.call(i,et)&&(o[et]=i[et]);for(var nt=0;nt<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;nt++)et=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[nt],Object.prototype.hasOwnProperty.call(i,et)&&(o[et]=i[et])},goog.TRUSTED_TYPES_POLICY_NAME="goog",goog.identity_=function(o){return o},goog.createTrustedTypesPolicy=function(o){var i=null,et=goog.global.trustedTypes;if(!et||!et.createPolicy)return i;try{i=et.createPolicy(o,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(nt){goog.logToConsole_(nt.message)}return i},goog.debug={};function module$contents$goog$debug$Error_DebugError(o){if(Error.captureStackTrace)Error.captureStackTrace(this,module$contents$goog$debug$Error_DebugError);else{var i=Error().stack;i&&(this.stack=i)}o&&(this.message=String(o)),this.reportErrorToServer=!0}goog.inherits(module$contents$goog$debug$Error_DebugError,Error),module$contents$goog$debug$Error_DebugError.prototype.name="CustomError",goog.debug.Error=module$contents$goog$debug$Error_DebugError,goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(o,i){module$contents$goog$debug$Error_DebugError.call(this,goog.asserts.subs_(o,i)),this.messagePattern=o},goog.inherits(goog.asserts.AssertionError,module$contents$goog$debug$Error_DebugError),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(o){throw o},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(o,i){o=o.split("%s");for(var et="",nt=o.length-1,ot=0;ot<nt;ot++)et+=o[ot]+(ot<i.length?i[ot]:"%s");return et+o[nt]},goog.asserts.doAssertFailure_=function(o,i,et,nt){var ot="Assertion failed";if(et){ot+=": "+et;var st=nt}else o&&(ot+=": "+o,st=i);o=new goog.asserts.AssertionError(""+ot,st||[]),goog.asserts.errorHandler_(o)},goog.asserts.setErrorHandler=function(o){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=o)},goog.asserts.assert=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&!o&&goog.asserts.doAssertFailure_("",null,i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertExists=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&o==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.fail=function(o,i){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&typeof o!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertString=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&typeof o!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertFunction=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&typeof o!="function"&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertObject=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(o)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertArray=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(o)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertBoolean=function(o,i,et){return goog.asserts.ENABLE_ASSERTS&&typeof o!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertElement=function(o,i,et){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(o)&&o.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(o),o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertInstanceof=function(o,i,et,nt){return!goog.asserts.ENABLE_ASSERTS||o instanceof i||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(i),goog.asserts.getType_(o)],et,Array.prototype.slice.call(arguments,3)),o},goog.asserts.assertFinite=function(o,i,et){return!goog.asserts.ENABLE_ASSERTS||typeof o=="number"&&isFinite(o)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[o],i,Array.prototype.slice.call(arguments,2)),o},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var o in Object.prototype)goog.asserts.fail(o+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(o){return o instanceof Function?o.displayName||o.name||"unknown type name":o instanceof Object?o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o):o===null?"null":typeof o},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;var module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR;goog.array.ASSUME_NATIVE_FUNCTIONS=module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS;function module$contents$goog$array_peek(o){return o[o.length-1]}goog.array.peek=module$contents$goog$array_peek,goog.array.last=module$contents$goog$array_peek;var module$contents$goog$array_indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(o,i,et){return goog.asserts.assert(o.length!=null),Array.prototype.indexOf.call(o,i,et)}:function(o,i,et){if(et=et==null?0:0>et?Math.max(0,o.length+et):et,typeof o=="string")return typeof i!="string"||i.length!=1?-1:o.indexOf(i,et);for(;et<o.length;et++)if(et in o&&o[et]===i)return et;return-1};goog.array.indexOf=module$contents$goog$array_indexOf;var module$contents$goog$array_lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(o,i,et){return goog.asserts.assert(o.length!=null),Array.prototype.lastIndexOf.call(o,i,et??o.length-1)}:function(o,i,et){if(et=et??o.length-1,0>et&&(et=Math.max(0,o.length+et)),typeof o=="string")return typeof i!="string"||i.length!=1?-1:o.lastIndexOf(i,et);for(;0<=et;et--)if(et in o&&o[et]===i)return et;return-1};goog.array.lastIndexOf=module$contents$goog$array_lastIndexOf;var module$contents$goog$array_forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(o,i,et){goog.asserts.assert(o.length!=null),Array.prototype.forEach.call(o,i,et)}:function(o,i,et){for(var nt=o.length,ot=typeof o=="string"?o.split(""):o,st=0;st<nt;st++)st in ot&&i.call(et,ot[st],st,o)};goog.array.forEach=module$contents$goog$array_forEach;function module$contents$goog$array_forEachRight(o,i,et){var nt=o.length,ot=typeof o=="string"?o.split(""):o;for(--nt;0<=nt;--nt)nt in ot&&i.call(et,ot[nt],nt,o)}goog.array.forEachRight=module$contents$goog$array_forEachRight;var module$contents$goog$array_filter=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(o,i,et){return goog.asserts.assert(o.length!=null),Array.prototype.filter.call(o,i,et)}:function(o,i,et){for(var nt=o.length,ot=[],st=0,lt=typeof o=="string"?o.split(""):o,ht=0;ht<nt;ht++)if(ht in lt){var ft=lt[ht];i.call(et,ft,ht,o)&&(ot[st++]=ft)}return ot};goog.array.filter=module$contents$goog$array_filter;var module$contents$goog$array_map=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(o,i,et){return goog.asserts.assert(o.length!=null),Array.prototype.map.call(o,i,et)}:function(o,i,et){for(var nt=o.length,ot=Array(nt),st=typeof o=="string"?o.split(""):o,lt=0;lt<nt;lt++)lt in st&&(ot[lt]=i.call(et,st[lt],lt,o));return ot};goog.array.map=module$contents$goog$array_map;var module$contents$goog$array_reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(o,i,et,nt){return goog.asserts.assert(o.length!=null),nt&&(i=goog.bind(i,nt)),Array.prototype.reduce.call(o,i,et)}:function(o,i,et,nt){var ot=et;return module$contents$goog$array_forEach(o,function(st,lt){ot=i.call(nt,ot,st,lt,o)}),ot};goog.array.reduce=module$contents$goog$array_reduce;var module$contents$goog$array_reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(o,i,et,nt){return goog.asserts.assert(o.length!=null),goog.asserts.assert(i!=null),nt&&(i=goog.bind(i,nt)),Array.prototype.reduceRight.call(o,i,et)}:function(o,i,et,nt){var ot=et;return module$contents$goog$array_forEachRight(o,function(st,lt){ot=i.call(nt,ot,st,lt,o)}),ot};goog.array.reduceRight=module$contents$goog$array_reduceRight;var module$contents$goog$array_some=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(o,i,et){return goog.asserts.assert(o.length!=null),Array.prototype.some.call(o,i,et)}:function(o,i,et){for(var nt=o.length,ot=typeof o=="string"?o.split(""):o,st=0;st<nt;st++)if(st in ot&&i.call(et,ot[st],st,o))return!0;return!1};goog.array.some=module$contents$goog$array_some;var module$contents$goog$array_every=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(o,i,et){return goog.asserts.assert(o.length!=null),Array.prototype.every.call(o,i,et)}:function(o,i,et){for(var nt=o.length,ot=typeof o=="string"?o.split(""):o,st=0;st<nt;st++)if(st in ot&&!i.call(et,ot[st],st,o))return!1;return!0};goog.array.every=module$contents$goog$array_every;function module$contents$goog$array_count(o,i,et){var nt=0;return module$contents$goog$array_forEach(o,function(ot,st,lt){i.call(et,ot,st,lt)&&++nt},et),nt}goog.array.count=module$contents$goog$array_count;function module$contents$goog$array_find(o,i,et){return i=module$contents$goog$array_findIndex(o,i,et),0>i?null:typeof o=="string"?o.charAt(i):o[i]}goog.array.find=module$contents$goog$array_find;function module$contents$goog$array_findIndex(o,i,et){for(var nt=o.length,ot=typeof o=="string"?o.split(""):o,st=0;st<nt;st++)if(st in ot&&i.call(et,ot[st],st,o))return st;return-1}goog.array.findIndex=module$contents$goog$array_findIndex;function module$contents$goog$array_findRight(o,i,et){return i=module$contents$goog$array_findIndexRight(o,i,et),0>i?null:typeof o=="string"?o.charAt(i):o[i]}goog.array.findRight=module$contents$goog$array_findRight;function module$contents$goog$array_findIndexRight(o,i,et){var nt=o.length,ot=typeof o=="string"?o.split(""):o;for(--nt;0<=nt;nt--)if(nt in ot&&i.call(et,ot[nt],nt,o))return nt;return-1}goog.array.findIndexRight=module$contents$goog$array_findIndexRight;function module$contents$goog$array_contains(o,i){return 0<=module$contents$goog$array_indexOf(o,i)}goog.array.contains=module$contents$goog$array_contains;function module$contents$goog$array_isEmpty(o){return o.length==0}goog.array.isEmpty=module$contents$goog$array_isEmpty;function module$contents$goog$array_clear(o){if(!Array.isArray(o))for(var i=o.length-1;0<=i;i--)delete o[i];o.length=0}goog.array.clear=module$contents$goog$array_clear;function module$contents$goog$array_insert(o,i){module$contents$goog$array_contains(o,i)||o.push(i)}goog.array.insert=module$contents$goog$array_insert;function module$contents$goog$array_insertAt(o,i,et){module$contents$goog$array_splice(o,et,0,i)}goog.array.insertAt=module$contents$goog$array_insertAt;function module$contents$goog$array_insertArrayAt(o,i,et){goog.partial(module$contents$goog$array_splice,o,et,0).apply(null,i)}goog.array.insertArrayAt=module$contents$goog$array_insertArrayAt;function module$contents$goog$array_insertBefore(o,i,et){var nt;arguments.length==2||0>(nt=module$contents$goog$array_indexOf(o,et))?o.push(i):module$contents$goog$array_insertAt(o,i,nt)}goog.array.insertBefore=module$contents$goog$array_insertBefore;function module$contents$goog$array_remove(o,i){i=module$contents$goog$array_indexOf(o,i);var et;return(et=0<=i)&&module$contents$goog$array_removeAt(o,i),et}goog.array.remove=module$contents$goog$array_remove;function module$contents$goog$array_removeLast(o,i){return i=module$contents$goog$array_lastIndexOf(o,i),0<=i?(module$contents$goog$array_removeAt(o,i),!0):!1}goog.array.removeLast=module$contents$goog$array_removeLast;function module$contents$goog$array_removeAt(o,i){return goog.asserts.assert(o.length!=null),Array.prototype.splice.call(o,i,1).length==1}goog.array.removeAt=module$contents$goog$array_removeAt;function module$contents$goog$array_removeIf(o,i,et){return i=module$contents$goog$array_findIndex(o,i,et),0<=i?(module$contents$goog$array_removeAt(o,i),!0):!1}goog.array.removeIf=module$contents$goog$array_removeIf;function module$contents$goog$array_removeAllIf(o,i,et){var nt=0;return module$contents$goog$array_forEachRight(o,function(ot,st){i.call(et,ot,st,o)&&module$contents$goog$array_removeAt(o,st)&&nt++}),nt}goog.array.removeAllIf=module$contents$goog$array_removeAllIf;function module$contents$goog$array_concat(o){return Array.prototype.concat.apply([],arguments)}goog.array.concat=module$contents$goog$array_concat;function module$contents$goog$array_join(o){return Array.prototype.concat.apply([],arguments)}goog.array.join=module$contents$goog$array_join;function module$contents$goog$array_toArray(o){var i=o.length;if(0<i){for(var et=Array(i),nt=0;nt<i;nt++)et[nt]=o[nt];return et}return[]}var module$contents$goog$array_clone=goog.array.toArray=module$contents$goog$array_toArray;goog.array.clone=module$contents$goog$array_clone;function module$contents$goog$array_extend(o,i){for(var et=1;et<arguments.length;et++){var nt=arguments[et];if(goog.isArrayLike(nt)){var ot=o.length||0,st=nt.length||0;o.length=ot+st;for(var lt=0;lt<st;lt++)o[ot+lt]=nt[lt]}else o.push(nt)}}goog.array.extend=module$contents$goog$array_extend;function module$contents$goog$array_splice(o,i,et,nt){return goog.asserts.assert(o.length!=null),Array.prototype.splice.apply(o,module$contents$goog$array_slice(arguments,1))}goog.array.splice=module$contents$goog$array_splice;function module$contents$goog$array_slice(o,i,et){return goog.asserts.assert(o.length!=null),2>=arguments.length?Array.prototype.slice.call(o,i):Array.prototype.slice.call(o,i,et)}goog.array.slice=module$contents$goog$array_slice;function module$contents$goog$array_removeDuplicates(o,i,et){i=i||o;var nt=function(ft){return goog.isObject(ft)?"o"+goog.getUid(ft):(typeof ft).charAt(0)+ft};et=et||nt,nt={};for(var ot=0,st=0;st<o.length;){var lt=o[st++],ht=et(lt);Object.prototype.hasOwnProperty.call(nt,ht)||(nt[ht]=!0,i[ot++]=lt)}i.length=ot}goog.array.removeDuplicates=module$contents$goog$array_removeDuplicates;function module$contents$goog$array_binarySearch(o,i,et){return module$contents$goog$array_binarySearch_(o,et||module$contents$goog$array_defaultCompare,!1,i)}goog.array.binarySearch=module$contents$goog$array_binarySearch;function module$contents$goog$array_binarySelect(o,i,et){return module$contents$goog$array_binarySearch_(o,i,!0,void 0,et)}goog.array.binarySelect=module$contents$goog$array_binarySelect;function module$contents$goog$array_binarySearch_(o,i,et,nt,ot){for(var st=0,lt=o.length,ht;st<lt;){var ft=st+(lt-st>>>1),St=et?i.call(ot,o[ft],ft,o):i(nt,o[ft]);0<St?st=ft+1:(lt=ft,ht=!St)}return ht?st:-st-1}function module$contents$goog$array_sort(o,i){o.sort(i||module$contents$goog$array_defaultCompare)}goog.array.sort=module$contents$goog$array_sort;function module$contents$goog$array_stableSort(o,i){for(var et=Array(o.length),nt=0;nt<o.length;nt++)et[nt]={index:nt,value:o[nt]};var ot=i||module$contents$goog$array_defaultCompare;for(module$contents$goog$array_sort(et,function(st,lt){return ot(st.value,lt.value)||st.index-lt.index}),nt=0;nt<o.length;nt++)o[nt]=et[nt].value}goog.array.stableSort=module$contents$goog$array_stableSort;function module$contents$goog$array_sortByKey(o,i,et){var nt=et||module$contents$goog$array_defaultCompare;module$contents$goog$array_sort(o,function(ot,st){return nt(i(ot),i(st))})}goog.array.sortByKey=module$contents$goog$array_sortByKey;function module$contents$goog$array_sortObjectsByKey(o,i,et){module$contents$goog$array_sortByKey(o,function(nt){return nt[i]},et)}goog.array.sortObjectsByKey=module$contents$goog$array_sortObjectsByKey;function module$contents$goog$array_isSorted(o,i,et){i=i||module$contents$goog$array_defaultCompare;for(var nt=1;nt<o.length;nt++){var ot=i(o[nt-1],o[nt]);if(0<ot||ot==0&&et)return!1}return!0}goog.array.isSorted=module$contents$goog$array_isSorted;function module$contents$goog$array_equals(o,i,et){if(!goog.isArrayLike(o)||!goog.isArrayLike(i)||o.length!=i.length)return!1;var nt=o.length;et=et||module$contents$goog$array_defaultCompareEquality;for(var ot=0;ot<nt;ot++)if(!et(o[ot],i[ot]))return!1;return!0}goog.array.equals=module$contents$goog$array_equals;function module$contents$goog$array_compare3(o,i,et){et=et||module$contents$goog$array_defaultCompare;for(var nt=Math.min(o.length,i.length),ot=0;ot<nt;ot++){var st=et(o[ot],i[ot]);if(st!=0)return st}return module$contents$goog$array_defaultCompare(o.length,i.length)}goog.array.compare3=module$contents$goog$array_compare3;function module$contents$goog$array_defaultCompare(o,i){return o>i?1:o<i?-1:0}goog.array.defaultCompare=module$contents$goog$array_defaultCompare;function module$contents$goog$array_inverseDefaultCompare(o,i){return-module$contents$goog$array_defaultCompare(o,i)}goog.array.inverseDefaultCompare=module$contents$goog$array_inverseDefaultCompare;function module$contents$goog$array_defaultCompareEquality(o,i){return o===i}goog.array.defaultCompareEquality=module$contents$goog$array_defaultCompareEquality;function module$contents$goog$array_binaryInsert(o,i,et){return et=module$contents$goog$array_binarySearch(o,i,et),0>et?(module$contents$goog$array_insertAt(o,i,-(et+1)),!0):!1}goog.array.binaryInsert=module$contents$goog$array_binaryInsert;function module$contents$goog$array_binaryRemove(o,i,et){return i=module$contents$goog$array_binarySearch(o,i,et),0<=i?module$contents$goog$array_removeAt(o,i):!1}goog.array.binaryRemove=module$contents$goog$array_binaryRemove;function module$contents$goog$array_bucket(o,i,et){for(var nt={},ot=0;ot<o.length;ot++){var st=o[ot],lt=i.call(et,st,ot,o);lt!==void 0&&(nt[lt]||(nt[lt]=[])).push(st)}return nt}goog.array.bucket=module$contents$goog$array_bucket;function module$contents$goog$array_toObject(o,i,et){var nt={};return module$contents$goog$array_forEach(o,function(ot,st){nt[i.call(et,ot,st,o)]=ot}),nt}goog.array.toObject=module$contents$goog$array_toObject;function module$contents$goog$array_range(o,i,et){var nt=[],ot=0,st=o;if(et=et||1,i!==void 0&&(ot=o,st=i),0>et*(st-ot))return[];if(0<et)for(o=ot;o<st;o+=et)nt.push(o);else for(o=ot;o>st;o+=et)nt.push(o);return nt}goog.array.range=module$contents$goog$array_range;function module$contents$goog$array_repeat(o,i){for(var et=[],nt=0;nt<i;nt++)et[nt]=o;return et}goog.array.repeat=module$contents$goog$array_repeat;function module$contents$goog$array_flatten(o){for(var i=[],et=0;et<arguments.length;et++){var nt=arguments[et];if(Array.isArray(nt))for(var ot=0;ot<nt.length;ot+=8192){var st=module$contents$goog$array_slice(nt,ot,ot+8192);st=module$contents$goog$array_flatten.apply(null,st);for(var lt=0;lt<st.length;lt++)i.push(st[lt])}else i.push(nt)}return i}goog.array.flatten=module$contents$goog$array_flatten;function module$contents$goog$array_rotate(o,i){return goog.asserts.assert(o.length!=null),o.length&&(i%=o.length,0<i?Array.prototype.unshift.apply(o,o.splice(-i,i)):0>i&&Array.prototype.push.apply(o,o.splice(0,-i))),o}goog.array.rotate=module$contents$goog$array_rotate;function module$contents$goog$array_moveItem(o,i,et){goog.asserts.assert(0<=i&&i<o.length),goog.asserts.assert(0<=et&&et<o.length),i=Array.prototype.splice.call(o,i,1),Array.prototype.splice.call(o,et,0,i[0])}goog.array.moveItem=module$contents$goog$array_moveItem;function module$contents$goog$array_zip(o){if(!arguments.length)return[];for(var i=[],et=arguments[0].length,nt=1;nt<arguments.length;nt++)arguments[nt].length<et&&(et=arguments[nt].length);for(nt=0;nt<et;nt++){for(var ot=[],st=0;st<arguments.length;st++)ot.push(arguments[st][nt]);i.push(ot)}return i}goog.array.zip=module$contents$goog$array_zip;function module$contents$goog$array_shuffle(o,i){i=i||Math.random;for(var et=o.length-1;0<et;et--){var nt=Math.floor(i()*(et+1)),ot=o[et];o[et]=o[nt],o[nt]=ot}}goog.array.shuffle=module$contents$goog$array_shuffle;function module$contents$goog$array_copyByIndex(o,i){var et=[];return module$contents$goog$array_forEach(i,function(nt){et.push(o[nt])}),et}goog.array.copyByIndex=module$contents$goog$array_copyByIndex;function module$contents$goog$array_concatMap(o,i,et){return module$contents$goog$array_concat.apply([],module$contents$goog$array_map(o,i,et))}goog.array.concatMap=module$contents$goog$array_concatMap,goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(o){if(goog.asserts.ENABLE_ASSERTS){var i=goog.dom.asserts.getWindow_(o);i&&(!o||!(o instanceof i.Location)&&o instanceof i.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(o))}return o},goog.dom.asserts.assertIsElementType_=function(o,i){if(goog.asserts.ENABLE_ASSERTS){var et=goog.dom.asserts.getWindow_(o);et&&typeof et[i]<"u"&&(o&&(o instanceof et[i]||!(o instanceof et.Location||o instanceof et.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",i,goog.dom.asserts.debugStringForType_(o)))}return o},goog.dom.asserts.assertIsHTMLAnchorElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(o){return goog.dom.asserts.assertIsElementType_(o,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(o){if(goog.isObject(o))try{return o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{return"<object could not be stringified>"}else return o===void 0?"undefined":o===null?"null":typeof o},goog.dom.asserts.getWindow_=function(o){try{var i=o&&o.ownerDocument,et=i&&(i.defaultView||i.parentWindow);if(et=et||goog.global,et.Element&&et.Location)return et}catch{}return null},goog.dom.HtmlElement=function(){},goog.functions={},goog.functions.constant=function(o){return function(){return o}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(o,i){return o},goog.functions.error=function(o){return function(){throw Error(o)}},goog.functions.fail=function(o){return function(){throw o}},goog.functions.lock=function(o,i){return i=i||0,function(){return o.apply(this,Array.prototype.slice.call(arguments,0,i))}},goog.functions.nth=function(o){return function(){return arguments[o]}},goog.functions.partialRight=function(o,i){var et=Array.prototype.slice.call(arguments,1);return function(){var nt=this;nt===goog.global&&(nt=void 0);var ot=Array.prototype.slice.call(arguments);return ot.push.apply(ot,et),o.apply(nt,ot)}},goog.functions.withReturnValue=function(o,i){return goog.functions.sequence(o,goog.functions.constant(i))},goog.functions.equalTo=function(o,i){return function(et){return i?o==et:o===et}},goog.functions.compose=function(o,i){var et=arguments,nt=et.length;return function(){var ot;nt&&(ot=et[nt-1].apply(this,arguments));for(var st=nt-2;0<=st;st--)ot=et[st].call(this,ot);return ot}},goog.functions.sequence=function(o){var i=arguments,et=i.length;return function(){for(var nt,ot=0;ot<et;ot++)nt=i[ot].apply(this,arguments);return nt}},goog.functions.and=function(o){var i=arguments,et=i.length;return function(){for(var nt=0;nt<et;nt++)if(!i[nt].apply(this,arguments))return!1;return!0}},goog.functions.or=function(o){var i=arguments,et=i.length;return function(){for(var nt=0;nt<et;nt++)if(i[nt].apply(this,arguments))return!0;return!1}},goog.functions.not=function(o){return function(){return!o.apply(this,arguments)}},goog.functions.create=function(o,i){var et=function(){};return et.prototype=o.prototype,et=new et,o.apply(et,Array.prototype.slice.call(arguments,1)),et},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(o){var i=!1,et;return function(){return goog.functions.CACHE_RETURN_VALUE?(i||(et=o(),i=!0),et):o()}},goog.functions.once=function(o){var i=o;return function(){if(i){var et=i;i=null,et()}}},goog.functions.debounce=function(o,i,et){var nt=0;return function(ot){goog.global.clearTimeout(nt);var st=arguments;nt=goog.global.setTimeout(function(){o.apply(et,st)},i)}},goog.functions.throttle=function(o,i,et){var nt=0,ot=!1,st=[],lt=function(){nt=0,ot&&(ot=!1,ht())},ht=function(){nt=goog.global.setTimeout(lt,i),o.apply(et,st)};return function(ft){st=arguments,nt?ot=!0:ht()}},goog.functions.rateLimit=function(o,i,et){var nt=0,ot=function(){nt=0};return function(st){nt||(nt=goog.global.setTimeout(ot,i),o.apply(et,arguments))}},goog.functions.isFunction=function(o){return typeof o=="function"},goog.dom.TagName=function(){},goog.dom.TagName.cast=function(o,i){return o},goog.dom.TagName.prototype.toString=function(){},goog.dom.TagName.A="A",goog.dom.TagName.ABBR="ABBR",goog.dom.TagName.ACRONYM="ACRONYM",goog.dom.TagName.ADDRESS="ADDRESS",goog.dom.TagName.APPLET="APPLET",goog.dom.TagName.AREA="AREA",goog.dom.TagName.ARTICLE="ARTICLE",goog.dom.TagName.ASIDE="ASIDE",goog.dom.TagName.AUDIO="AUDIO",goog.dom.TagName.B="B",goog.dom.TagName.BASE="BASE",goog.dom.TagName.BASEFONT="BASEFONT",goog.dom.TagName.BDI="BDI",goog.dom.TagName.BDO="BDO",goog.dom.TagName.BIG="BIG",goog.dom.TagName.BLOCKQUOTE="BLOCKQUOTE",goog.dom.TagName.BODY="BODY",goog.dom.TagName.BR="BR",goog.dom.TagName.BUTTON="BUTTON",goog.dom.TagName.CANVAS="CANVAS",goog.dom.TagName.CAPTION="CAPTION",goog.dom.TagName.CENTER="CENTER",goog.dom.TagName.CITE="CITE",goog.dom.TagName.CODE="CODE",goog.dom.TagName.COL="COL",goog.dom.TagName.COLGROUP="COLGROUP",goog.dom.TagName.COMMAND="COMMAND",goog.dom.TagName.DATA="DATA",goog.dom.TagName.DATALIST="DATALIST",goog.dom.TagName.DD="DD",goog.dom.TagName.DEL="DEL",goog.dom.TagName.DETAILS="DETAILS",goog.dom.TagName.DFN="DFN",goog.dom.TagName.DIALOG="DIALOG",goog.dom.TagName.DIR="DIR",goog.dom.TagName.DIV="DIV",goog.dom.TagName.DL="DL",goog.dom.TagName.DT="DT",goog.dom.TagName.EM="EM",goog.dom.TagName.EMBED="EMBED",goog.dom.TagName.FIELDSET="FIELDSET",goog.dom.TagName.FIGCAPTION="FIGCAPTION",goog.dom.TagName.FIGURE="FIGURE",goog.dom.TagName.FONT="FONT",goog.dom.TagName.FOOTER="FOOTER",goog.dom.TagName.FORM="FORM",goog.dom.TagName.FRAME="FRAME",goog.dom.TagName.FRAMESET="FRAMESET",goog.dom.TagName.H1="H1",goog.dom.TagName.H2="H2",goog.dom.TagName.H3="H3",goog.dom.TagName.H4="H4",goog.dom.TagName.H5="H5",goog.dom.TagName.H6="H6",goog.dom.TagName.HEAD="HEAD",goog.dom.TagName.HEADER="HEADER",goog.dom.TagName.HGROUP="HGROUP",goog.dom.TagName.HR="HR",goog.dom.TagName.HTML="HTML",goog.dom.TagName.I="I",goog.dom.TagName.IFRAME="IFRAME",goog.dom.TagName.IMG="IMG",goog.dom.TagName.INPUT="INPUT",goog.dom.TagName.INS="INS",goog.dom.TagName.ISINDEX="ISINDEX",goog.dom.TagName.KBD="KBD",goog.dom.TagName.KEYGEN="KEYGEN",goog.dom.TagName.LABEL="LABEL",goog.dom.TagName.LEGEND="LEGEND",goog.dom.TagName.LI="LI",goog.dom.TagName.LINK="LINK",goog.dom.TagName.MAIN="MAIN",goog.dom.TagName.MAP="MAP",goog.dom.TagName.MARK="MARK",goog.dom.TagName.MATH="MATH",goog.dom.TagName.MENU="MENU",goog.dom.TagName.MENUITEM="MENUITEM",goog.dom.TagName.META="META",goog.dom.TagName.METER="METER",goog.dom.TagName.NAV="NAV",goog.dom.TagName.NOFRAMES="NOFRAMES",goog.dom.TagName.NOSCRIPT="NOSCRIPT",goog.dom.TagName.OBJECT="OBJECT",goog.dom.TagName.OL="OL",goog.dom.TagName.OPTGROUP="OPTGROUP",goog.dom.TagName.OPTION="OPTION",goog.dom.TagName.OUTPUT="OUTPUT",goog.dom.TagName.P="P",goog.dom.TagName.PARAM="PARAM",goog.dom.TagName.PICTURE="PICTURE",goog.dom.TagName.PRE="PRE",goog.dom.TagName.PROGRESS="PROGRESS",goog.dom.TagName.Q="Q",goog.dom.TagName.RP="RP",goog.dom.TagName.RT="RT",goog.dom.TagName.RTC="RTC",goog.dom.TagName.RUBY="RUBY",goog.dom.TagName.S="S",goog.dom.TagName.SAMP="SAMP",goog.dom.TagName.SCRIPT="SCRIPT",goog.dom.TagName.SECTION="SECTION",goog.dom.TagName.SELECT="SELECT",goog.dom.TagName.SMALL="SMALL",goog.dom.TagName.SOURCE="SOURCE",goog.dom.TagName.SPAN="SPAN",goog.dom.TagName.STRIKE="STRIKE",goog.dom.TagName.STRONG="STRONG",goog.dom.TagName.STYLE="STYLE",goog.dom.TagName.SUB="SUB",goog.dom.TagName.SUMMARY="SUMMARY",goog.dom.TagName.SUP="SUP",goog.dom.TagName.SVG="SVG",goog.dom.TagName.TABLE="TABLE",goog.dom.TagName.TBODY="TBODY",goog.dom.TagName.TD="TD",goog.dom.TagName.TEMPLATE="TEMPLATE",goog.dom.TagName.TEXTAREA="TEXTAREA",goog.dom.TagName.TFOOT="TFOOT",goog.dom.TagName.TH="TH",goog.dom.TagName.THEAD="THEAD",goog.dom.TagName.TIME="TIME",goog.dom.TagName.TITLE="TITLE",goog.dom.TagName.TR="TR",goog.dom.TagName.TRACK="TRACK",goog.dom.TagName.TT="TT",goog.dom.TagName.U="U",goog.dom.TagName.UL="UL",goog.dom.TagName.VAR="VAR",goog.dom.TagName.VIDEO="VIDEO",goog.dom.TagName.WBR="WBR",goog.object={},goog.object.forEach=function(o,i,et){for(var nt in o)i.call(et,o[nt],nt,o)},goog.object.filter=function(o,i,et){var nt={},ot;for(ot in o)i.call(et,o[ot],ot,o)&&(nt[ot]=o[ot]);return nt},goog.object.map=function(o,i,et){var nt={},ot;for(ot in o)nt[ot]=i.call(et,o[ot],ot,o);return nt},goog.object.some=function(o,i,et){for(var nt in o)if(i.call(et,o[nt],nt,o))return!0;return!1},goog.object.every=function(o,i,et){for(var nt in o)if(!i.call(et,o[nt],nt,o))return!1;return!0},goog.object.getCount=function(o){var i=0,et;for(et in o)i++;return i},goog.object.getAnyKey=function(o){for(var i in o)return i},goog.object.getAnyValue=function(o){for(var i in o)return o[i]},goog.object.contains=function(o,i){return goog.object.containsValue(o,i)},goog.object.getValues=function(o){var i=[],et=0,nt;for(nt in o)i[et++]=o[nt];return i},goog.object.getKeys=function(o){var i=[],et=0,nt;for(nt in o)i[et++]=nt;return i},goog.object.getValueByKeys=function(o,i){var et=goog.isArrayLike(i),nt=et?i:arguments;for(et=et?0:1;et<nt.length;et++){if(o==null)return;o=o[nt[et]]}return o},goog.object.containsKey=function(o,i){return o!==null&&i in o},goog.object.containsValue=function(o,i){for(var et in o)if(o[et]==i)return!0;return!1},goog.object.findKey=function(o,i,et){for(var nt in o)if(i.call(et,o[nt],nt,o))return nt},goog.object.findValue=function(o,i,et){return(i=goog.object.findKey(o,i,et))&&o[i]},goog.object.isEmpty=function(o){for(var i in o)return!1;return!0},goog.object.clear=function(o){for(var i in o)delete o[i]},goog.object.remove=function(o,i){var et;return(et=i in o)&&delete o[i],et},goog.object.add=function(o,i,et){if(o!==null&&i in o)throw Error('The object already contains the key "'+i+'"');goog.object.set(o,i,et)},goog.object.get=function(o,i,et){return o!==null&&i in o?o[i]:et},goog.object.set=function(o,i,et){o[i]=et},goog.object.setIfUndefined=function(o,i,et){return i in o?o[i]:o[i]=et},goog.object.setWithReturnValueIfNotSet=function(o,i,et){return i in o?o[i]:(et=et(),o[i]=et)},goog.object.equals=function(o,i){for(var et in o)if(!(et in i)||o[et]!==i[et])return!1;for(var nt in i)if(!(nt in o))return!1;return!0},goog.object.clone=function(o){var i={},et;for(et in o)i[et]=o[et];return i},goog.object.unsafeClone=function(o){if(!o||typeof o!="object")return o;if(typeof o.clone=="function")return o.clone();var i=Array.isArray(o)?[]:typeof ArrayBuffer!="function"||typeof ArrayBuffer.isView!="function"||!ArrayBuffer.isView(o)||o instanceof DataView?{}:new o.constructor(o.length),et;for(et in o)i[et]=goog.object.unsafeClone(o[et]);return i},goog.object.transpose=function(o){var i={},et;for(et in o)i[o[et]]=et;return i},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(o,i){for(var et,nt,ot=1;ot<arguments.length;ot++){nt=arguments[ot];for(et in nt)o[et]=nt[et];for(var st=0;st<goog.object.PROTOTYPE_FIELDS_.length;st++)et=goog.object.PROTOTYPE_FIELDS_[st],Object.prototype.hasOwnProperty.call(nt,et)&&(o[et]=nt[et])}},goog.object.create=function(o){var i=arguments.length;if(i==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(i%2)throw Error("Uneven number of arguments");for(var et={},nt=0;nt<i;nt+=2)et[arguments[nt]]=arguments[nt+1];return et},goog.object.createSet=function(o){var i=arguments.length;if(i==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var et={},nt=0;nt<i;nt++)et[arguments[nt]]=!0;return et},goog.object.createImmutableView=function(o){var i=o;return Object.isFrozen&&!Object.isFrozen(o)&&(i=Object.create(o),Object.freeze(i)),i},goog.object.isImmutableView=function(o){return!!Object.isFrozen&&Object.isFrozen(o)},goog.object.getAllPropertyNames=function(o,i,et){if(!o)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(o);for(var nt={};o&&(o!==Object.prototype||i)&&(o!==Function.prototype||et);){for(var ot=Object.getOwnPropertyNames(o),st=0;st<ot.length;st++)nt[ot[st]]=!0;o=Object.getPrototypeOf(o)}return goog.object.getKeys(nt)},goog.object.getSuperClass=function(o){return(o=Object.getPrototypeOf(o.prototype))&&o.constructor},goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(o){return goog.dom.tags.VOID_TAGS_[o]===!0},goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(o,i){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=o===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&i||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(o){return o instanceof goog.string.Const&&o.constructor===goog.string.Const&&o.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?o.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+o+"'"),"type_error:Const")},goog.string.Const.from=function(o){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,o)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse=function(){return goog.TRUSTED_TYPES_POLICY_NAME?(goog.html.trustedtypes.cachedPolicy_===void 0&&(goog.html.trustedtypes.cachedPolicy_=goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html")),goog.html.trustedtypes.cachedPolicy_):null};var module$contents$goog$html$SafeScript_CONSTRUCTOR_TOKEN_PRIVATE={},module$contents$goog$html$SafeScript_SafeScript=function(o,i){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=i===module$contents$goog$html$SafeScript_CONSTRUCTOR_TOKEN_PRIVATE?o:"",this.implementsGoogStringTypedString=!0};module$contents$goog$html$SafeScript_SafeScript.fromConstant=function(o){return o=goog.string.Const.unwrap(o),o.length===0?module$contents$goog$html$SafeScript_SafeScript.EMPTY:module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(o)},module$contents$goog$html$SafeScript_SafeScript.fromConstantAndArgs=function(o,i){for(var et=[],nt=1;nt<arguments.length;nt++)et.push(module$contents$goog$html$SafeScript_SafeScript.stringify_(arguments[nt]));return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(o)+")("+et.join(", ")+");")},module$contents$goog$html$SafeScript_SafeScript.fromJson=function(o){return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(module$contents$goog$html$SafeScript_SafeScript.stringify_(o))},module$contents$goog$html$SafeScript_SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},module$contents$goog$html$SafeScript_SafeScript.unwrap=function(o){return module$contents$goog$html$SafeScript_SafeScript.unwrapTrustedScript(o).toString()},module$contents$goog$html$SafeScript_SafeScript.unwrapTrustedScript=function(o){return o instanceof module$contents$goog$html$SafeScript_SafeScript&&o.constructor===module$contents$goog$html$SafeScript_SafeScript?o.privateDoNotAccessOrElseSafeScriptWrappedValue_:((0,goog.asserts.fail)("expected object of type SafeScript, got '"+o+"' of type "+goog.typeOf(o)),"type_error:SafeScript")},module$contents$goog$html$SafeScript_SafeScript.stringify_=function(o){return JSON.stringify(o).replace(/</g,"\\x3c")},module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(o){var i=goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse();return o=i?i.createScript(o):o,new module$contents$goog$html$SafeScript_SafeScript(o,module$contents$goog$html$SafeScript_CONSTRUCTOR_TOKEN_PRIVATE)},goog.DEBUG&&(module$contents$goog$html$SafeScript_SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),module$contents$goog$html$SafeScript_SafeScript.EMPTY=function(){return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("")}(),goog.html.SafeScript=module$contents$goog$html$SafeScript_SafeScript,goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(o){return goog.fs.url.getUrlObject_().createObjectURL(o)},goog.fs.url.revokeObjectUrl=function(o){goog.fs.url.getUrlObject_().revokeObjectURL(o)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(o){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(o){},goog.fs.url.getUrlObject_=function(){var o=goog.fs.url.findUrlObject_();if(o!=null)return o;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(o){var i=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(i!==void 0){i=new i;for(var et=0;et<arguments.length;et++)i.append(arguments[et]);return i.getBlob()}return goog.fs.blob.getBlobWithProperties(module$contents$goog$array_toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(o,i,et){var nt=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(nt!==void 0){nt=new nt;for(var ot=0;ot<o.length;ot++)nt.append(o[ot],et);return nt.getBlob(i)}if(goog.global.Blob!==void 0)return nt={},i&&(nt.type=i),et&&(nt.endings=et),new Blob(o,nt);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(o,i){return typeof o=="number"?0<o?goog.i18n.bidi.Dir.LTR:0>o?goog.i18n.bidi.Dir.RTL:i?null:goog.i18n.bidi.Dir.NEUTRAL:o==null?null:o?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\uD801\uD804-\uD839\uD83C-\uDBFF豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\uD802-\uD803\uD83A-\uD83Bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(o,i){return i?o.replace(goog.i18n.bidi.htmlSkipReg_,""):o},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(o,i){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(o,i))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(o,i){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(o,i))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(o){return goog.i18n.bidi.rtlRe_.test(o)},goog.i18n.bidi.isLtrChar=function(o){return goog.i18n.bidi.ltrRe_.test(o)},goog.i18n.bidi.isNeutralChar=function(o){return!goog.i18n.bidi.isLtrChar(o)&&!goog.i18n.bidi.isRtlChar(o)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(o,i){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(o,i))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(o,i){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(o,i))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(o,i){return o=goog.i18n.bidi.stripHtmlIfNeeded_(o,i),goog.i18n.bidi.isRequiredLtrRe_.test(o)||!goog.i18n.bidi.hasAnyLtr(o)&&!goog.i18n.bidi.hasAnyRtl(o)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(o,i){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(o,i))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(o,i){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(o,i))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(o){return goog.i18n.bidi.rtlLocalesRe_.test(o)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(o,i){return i=(i===void 0?goog.i18n.bidi.hasAnyRtl(o):i)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,o.replace(goog.i18n.bidi.bracketGuardTextRe_,i+"$&"+i)},goog.i18n.bidi.enforceRtlInHtml=function(o){return o.charAt(0)=="<"?o.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+o+"</span>"},goog.i18n.bidi.enforceRtlInText=function(o){return goog.i18n.bidi.Format.RLE+o+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(o){return o.charAt(0)=="<"?o.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+o+"</span>"},goog.i18n.bidi.enforceLtrInText=function(o){return goog.i18n.bidi.Format.LRE+o+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(o){return o.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(o){return o.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(o,i){var et=0,nt=0,ot=!1;for(o=goog.i18n.bidi.stripHtmlIfNeeded_(o,i).split(goog.i18n.bidi.wordSeparatorRe_),i=0;i<o.length;i++){var st=o[i];goog.i18n.bidi.startsWithRtl(st)?(et++,nt++):goog.i18n.bidi.isRequiredLtrRe_.test(st)?ot=!0:goog.i18n.bidi.hasAnyLtr(st)?nt++:goog.i18n.bidi.hasNumeralsRe_.test(st)&&(ot=!0)}return nt==0?ot?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:et/nt>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(o,i){return goog.i18n.bidi.estimateDirection(o,i)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(o,i){o&&(i=goog.i18n.bidi.toDir(i))&&(o.style.textAlign=i==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,o.dir=i==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(o,i){switch(goog.i18n.bidi.estimateDirection(i)){case goog.i18n.bidi.Dir.LTR:o.dir!=="ltr"&&(o.dir="ltr");break;case goog.i18n.bidi.Dir.RTL:o.dir!=="rtl"&&(o.dir="rtl");break;default:o.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(o,i){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=i===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_?o:""},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(o,i){var et=goog.html.TrustedResourceUrl.unwrap(this);et=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(et);var nt=et[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(et[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",et[2]||"",o)+goog.html.TrustedResourceUrl.stringifyParams_("#",nt,i))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(o){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(o).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(o){return o instanceof goog.html.TrustedResourceUrl&&o.constructor===goog.html.TrustedResourceUrl?o.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+o+"' of type "+goog.typeOf(o)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(o,i){var et=goog.string.Const.unwrap(o);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(et))throw Error("Invalid TrustedResourceUrl format: "+et);return o=et.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(nt,ot){if(!Object.prototype.hasOwnProperty.call(i,ot))throw Error('Found marker, "'+ot+'", in format string, "'+et+'", but no valid label mapping found in args: '+JSON.stringify(i));return nt=i[ot],nt instanceof goog.string.Const?goog.string.Const.unwrap(nt):encodeURIComponent(String(nt))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(o,i,et,nt){return goog.html.TrustedResourceUrl.format(o,i).cloneWithParams(et,nt)},goog.html.TrustedResourceUrl.fromConstant=function(o){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(o))},goog.html.TrustedResourceUrl.fromConstants=function(o){for(var i="",et=0;et<o.length;et++)i+=goog.string.Const.unwrap(o[et]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.TrustedResourceUrl.fromSafeScript=function(o){return o=goog.fs.blob.getBlobWithProperties([module$contents$goog$html$SafeScript_SafeScript.unwrap(o)],"text/javascript"),o=goog.fs.url.createObjectUrl(o),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(o){var i=goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse();return o=i?i.createScriptURL(o):o,new goog.html.TrustedResourceUrl(o,goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_)},goog.html.TrustedResourceUrl.stringifyParams_=function(o,i,et){if(et==null)return i;if(typeof et=="string")return et?o+encodeURIComponent(et):"";for(var nt in et)if(Object.prototype.hasOwnProperty.call(et,nt)){var ot=et[nt];ot=Array.isArray(ot)?ot:[ot];for(var st=0;st<ot.length;st++){var lt=ot[st];lt!=null&&(i||(i=o),i+=(i.length>o.length?"&":"")+encodeURIComponent(nt)+"="+encodeURIComponent(String(lt)))}}return i},goog.string.internal={},goog.string.internal.startsWith=function(o,i){return o.lastIndexOf(i,0)==0},goog.string.internal.endsWith=function(o,i){var et=o.length-i.length;return 0<=et&&o.indexOf(i,et)==et},goog.string.internal.caseInsensitiveStartsWith=function(o,i){return goog.string.internal.caseInsensitiveCompare(i,o.substr(0,i.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(o,i){return goog.string.internal.caseInsensitiveCompare(i,o.substr(o.length-i.length,i.length))==0},goog.string.internal.caseInsensitiveEquals=function(o,i){return o.toLowerCase()==i.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(o){return/^[\s\xa0]*$/.test(o)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},goog.string.internal.caseInsensitiveCompare=function(o,i){return o=String(o).toLowerCase(),i=String(i).toLowerCase(),o<i?-1:o==i?0:1},goog.string.internal.newLineToBr=function(o,i){return o.replace(/(\r\n|\r|\n)/g,i?"<br />":"<br>")},goog.string.internal.htmlEscape=function(o,i){if(i)o=o.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(o))return o;o.indexOf("&")!=-1&&(o=o.replace(goog.string.internal.AMP_RE_,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(goog.string.internal.LT_RE_,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(goog.string.internal.GT_RE_,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(goog.string.internal.QUOT_RE_,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(goog.string.internal.NULL_RE_,"&#0;"))}return o},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(o,i){return goog.string.internal.newLineToBr(o.replace(/  /g," &#160;"),i)},goog.string.internal.contains=function(o,i){return o.indexOf(i)!=-1},goog.string.internal.caseInsensitiveContains=function(o,i){return goog.string.internal.contains(o.toLowerCase(),i.toLowerCase())},goog.string.internal.compareVersions=function(o,i){var et=0;o=goog.string.internal.trim(String(o)).split("."),i=goog.string.internal.trim(String(i)).split(".");for(var nt=Math.max(o.length,i.length),ot=0;et==0&&ot<nt;ot++){var st=o[ot]||"",lt=i[ot]||"";do{if(st=/(\d*)(\D*)(.*)/.exec(st)||["","","",""],lt=/(\d*)(\D*)(.*)/.exec(lt)||["","","",""],st[0].length==0&&lt[0].length==0)break;et=st[1].length==0?0:parseInt(st[1],10);var ht=lt[1].length==0?0:parseInt(lt[1],10);et=goog.string.internal.compareElements_(et,ht)||goog.string.internal.compareElements_(st[2].length==0,lt[2].length==0)||goog.string.internal.compareElements_(st[2],lt[2]),st=st[3],lt=lt[3]}while(et==0)}return et},goog.string.internal.compareElements_=function(o,i){return o<i?-1:o>i?1:0},goog.html.SafeUrl=function(o,i){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=i===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_?o:""},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(o){return o instanceof goog.html.SafeUrl&&o.constructor===goog.html.SafeUrl?o.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+o+"' of type "+goog.typeOf(o)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(o){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(o))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(o){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(o)},goog.html.SafeUrl.fromBlob=function(o){return o=goog.html.SafeUrl.isSafeMimeType(o.type)?goog.fs.url.createObjectUrl(o):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.revokeObjectUrl=function(o){o=o.getTypedStringValue(),o!==goog.html.SafeUrl.INNOCUOUS_STRING&&goog.fs.url.revokeObjectUrl(o)},goog.html.SafeUrl.fromMediaSource=function(o){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),o=o instanceof MediaSource?goog.fs.url.createObjectUrl(o):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.tryFromDataUrl=function(o){o=String(o),o=o.replace(/(%0A|%0D)/g,"");var i=o.match(goog.html.DATA_URL_PATTERN_);return i&&goog.html.SafeUrl.isSafeMimeType(i[1])?goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o):null},goog.html.SafeUrl.fromDataUrl=function(o){return goog.html.SafeUrl.tryFromDataUrl(o)||goog.html.SafeUrl.INNOCUOUS_URL},goog.html.SafeUrl.fromTelUrl=function(o){return goog.string.internal.caseInsensitiveStartsWith(o,"tel:")||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(o){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(o))||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(o){return goog.string.internal.caseInsensitiveStartsWith(o,"fb-messenger://share")||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromWhatsAppUrl=function(o){return goog.string.internal.caseInsensitiveStartsWith(o,"whatsapp://send")||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.fromSmsUrl=function(o){return goog.string.internal.caseInsensitiveStartsWith(o,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(o)||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(o){var i=o.indexOf("#");if(0<i&&(o=o.substring(0,i)),i=o.match(/[?&]body=/gi),!i)return!0;if(1<i.length)return!1;if(o=o.match(/[?&]body=([^&]*)/)[1],!o)return!0;try{decodeURIComponent(o)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(o)},goog.html.SafeUrl.fromSshUrl=function(o){return goog.string.internal.caseInsensitiveStartsWith(o,"ssh://")||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(o,i){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,o,i)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(o,i){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,o,i)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(o,i){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,o,i)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(o,i,et){return(o=o.exec(i))?(o=o[1],(et instanceof goog.string.Const?[goog.string.Const.unwrap(et)]:et.map(function(nt){return goog.string.Const.unwrap(nt)})).indexOf(o)==-1&&(i=goog.html.SafeUrl.INNOCUOUS_STRING)):i=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.SafeUrl.fromTrustedResourceUrl=function(o){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(o))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.trySanitize=function(o){return o instanceof goog.html.SafeUrl?o:(o=typeof o=="object"&&o.implementsGoogStringTypedString?o.getTypedStringValue():String(o),goog.html.SAFE_URL_PATTERN_.test(o)?goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o):goog.html.SafeUrl.tryFromDataUrl(o))},goog.html.SafeUrl.sanitize=function(o){return goog.html.SafeUrl.trySanitize(o)||goog.html.SafeUrl.INNOCUOUS_URL},goog.html.SafeUrl.sanitizeAssertUnchanged=function(o,i){return o instanceof goog.html.SafeUrl?o:(o=typeof o=="object"&&o.implementsGoogStringTypedString?o.getTypedStringValue():String(o),i&&/^data:/i.test(o)&&(i=goog.html.SafeUrl.fromDataUrl(o),i.getTypedStringValue()==o)?i:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(o),"%s does not match the safe URL pattern",o)||(o=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o)))},goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(o){return new goog.html.SafeUrl(o,goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_)},goog.html.SafeUrl.INNOCUOUS_URL=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(o,i){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=i===goog.html.SafeStyle.CONSTRUCTOR_TOKEN_PRIVATE_?o:""},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.fromConstant=function(o){return o=goog.string.Const.unwrap(o),o.length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(o,";"),"Last character of style string is not ';': "+o),goog.asserts.assert(goog.string.internal.contains(o,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+o),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(o){return o instanceof goog.html.SafeStyle&&o.constructor===goog.html.SafeStyle?o.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+o+"' of type "+goog.typeOf(o)),"type_error:SafeStyle")},goog.html.SafeStyle.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(o){return new goog.html.SafeStyle(o,goog.html.SafeStyle.CONSTRUCTOR_TOKEN_PRIVATE_)},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(o){var i="",et;for(et in o)if(Object.prototype.hasOwnProperty.call(o,et)){if(!/^[-_a-zA-Z0-9]+$/.test(et))throw Error("Name allows only [-_a-zA-Z0-9], got: "+et);var nt=o[et];nt!=null&&(nt=Array.isArray(nt)?module$contents$goog$array_map(nt,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(nt),i+=et+":"+nt+";")}return i?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(o){if(o instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(o).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(o=o instanceof goog.string.Const?goog.string.Const.unwrap(o):goog.html.SafeStyle.sanitizePropertyValueString_(String(o)),/[{;}]/.test(o))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[o]);return o},goog.html.SafeStyle.sanitizePropertyValueString_=function(o){var i=o.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");if(goog.html.SafeStyle.VALUE_RE_.test(i)){if(goog.html.SafeStyle.COMMENT_RE_.test(o))return goog.asserts.fail("String value disallows comments, got: "+o),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedQuotes_(o))return goog.asserts.fail("String value requires balanced quotes, got: "+o),goog.html.SafeStyle.INNOCUOUS_STRING;if(!goog.html.SafeStyle.hasBalancedSquareBrackets_(o))return goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+o),goog.html.SafeStyle.INNOCUOUS_STRING}else return goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+o),goog.html.SafeStyle.INNOCUOUS_STRING;return goog.html.SafeStyle.sanitizeUrl_(o)},goog.html.SafeStyle.hasBalancedQuotes_=function(o){for(var i=!0,et=!0,nt=0;nt<o.length;nt++){var ot=o.charAt(nt);ot=="'"&&et?i=!i:ot=='"'&&i&&(et=!et)}return i&&et},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(o){for(var i=!0,et=/^[-_a-zA-Z0-9]$/,nt=0;nt<o.length;nt++){var ot=o.charAt(nt);if(ot=="]"){if(i)return!1;i=!0}else if(ot=="["){if(!i)return!1;i=!1}else if(!i&&!et.test(ot))return!1}return i},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(o){return o.replace(goog.html.SafeStyle.URL_RE_,function(i,et,nt,ot){var st="";return nt=nt.replace(/^(['"])(.*)\1$/,function(lt,ht,ft){return st=ht,ft}),i=goog.html.SafeUrl.sanitize(nt).getTypedStringValue(),et+st+i+st+ot})},goog.html.SafeStyle.concat=function(o){var i="",et=function(nt){Array.isArray(nt)?module$contents$goog$array_forEach(nt,et):i+=goog.html.SafeStyle.unwrap(nt)};return module$contents$goog$array_forEach(arguments,et),i?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i):goog.html.SafeStyle.EMPTY};var module$contents$goog$html$SafeStyleSheet_CONSTRUCTOR_TOKEN_PRIVATE={},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet=function(o,i){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=i===module$contents$goog$html$SafeStyleSheet_CONSTRUCTOR_TOKEN_PRIVATE?o:"",this.implementsGoogStringTypedString=!0};module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createRule=function(o,i){if((0,goog.string.internal.contains)(o,"<"))throw Error("Selector does not allow '<', got: "+o);var et=o.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(et))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+o);if(!module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.hasBalancedBrackets_(et))throw Error("() and [] in selector must be balanced, got: "+o);return i instanceof goog.html.SafeStyle||(i=goog.html.SafeStyle.create(i)),o=o+"{"+goog.html.SafeStyle.unwrap(i).replace(/</g,"\\3C ")+"}",module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.hasBalancedBrackets_=function(o){for(var i={"(":")","[":"]"},et=[],nt=0;nt<o.length;nt++){var ot=o[nt];if(i[ot])et.push(i[ot]);else if(goog.object.contains(i,ot)&&et.pop()!=ot)return!1}return et.length==0},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.concat=function(o){var i="",et=function(nt){Array.isArray(nt)?module$contents$goog$array_forEach(nt,et):i+=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.unwrap(nt)};return module$contents$goog$array_forEach(arguments,et),module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.fromConstant=function(o){return o=goog.string.Const.unwrap(o),o.length===0?module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.EMPTY:((0,goog.asserts.assert)(!(0,goog.string.internal.contains)(o,"<"),"Forbidden '<' character in style sheet string: "+o),module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o))},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.unwrap=function(o){return o instanceof module$contents$goog$html$SafeStyleSheet_SafeStyleSheet&&o.constructor===module$contents$goog$html$SafeStyleSheet_SafeStyleSheet?o.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:((0,goog.asserts.fail)("expected object of type SafeStyleSheet, got '"+o+"' of type "+goog.typeOf(o)),"type_error:SafeStyleSheet")},module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(o){return new module$contents$goog$html$SafeStyleSheet_SafeStyleSheet(o,module$contents$goog$html$SafeStyleSheet_CONSTRUCTOR_TOKEN_PRIVATE)},goog.DEBUG&&(module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.EMPTY=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyleSheet=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet,goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var o=goog.labs.userAgent.util.getNavigator_();return o&&(o=o.userAgent)?o:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(o){goog.labs.userAgent.util.userAgent_=o||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(o){var i=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(i,o)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(o){var i=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(i,o)},goog.labs.userAgent.util.extractVersionTuples=function(o){for(var i=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,et=[],nt;nt=i.exec(o);)et.push([nt[1],nt[2],nt[3]||void 0]);return et},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function o(ot){return ot=module$contents$goog$array_find(ot,nt),et[ot]||""}var i=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(i);i=goog.labs.userAgent.util.extractVersionTuples(i);var et={};module$contents$goog$array_forEach(i,function(ot){et[ot[0]]=ot[1]});var nt=goog.partial(goog.object.containsKey,et);return goog.labs.userAgent.browser.isOpera()?o(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?o(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?o(["Edg"]):goog.labs.userAgent.browser.isChrome()?o(["Chrome","CriOS","HeadlessChrome"]):(i=i[2])&&i[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(o){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),o)},goog.labs.userAgent.browser.getIEVersion_=function(o){var i=/rv: *([\d\.]*)/.exec(o);if(i&&i[1])return i[1];i="";var et=/MSIE +([\d\.]+)/.exec(o);if(et&&et[1])if(o=/Trident\/(\d.\d)/.exec(o),et[1]=="7.0")if(o&&o[1])switch(o[1]){case"4.0":i="8.0";break;case"5.0":i="9.0";break;case"6.0":i="10.0";break;case"7.0":i="11.0"}else i="7.0";else i=et[1];return i},goog.html.SafeHtml=function(o,i,et){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=et===goog.html.SafeHtml.CONSTRUCTOR_TOKEN_PRIVATE_?o:"",this.dir_=i},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(o){return goog.html.SafeHtml.unwrapTrustedHTML(o).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(o){return o instanceof goog.html.SafeHtml&&o.constructor===goog.html.SafeHtml?o.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+o+"' of type "+goog.typeOf(o)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(o){if(o instanceof goog.html.SafeHtml)return o;var i=typeof o=="object",et=null;return i&&o.implementsGoogI18nBidiDirectionalString&&(et=o.getDirection()),o=i&&o.implementsGoogStringTypedString?o.getTypedStringValue():String(o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(o),et)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(o){return o instanceof goog.html.SafeHtml?o:(o=goog.html.SafeHtml.htmlEscape(o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(o)),o.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(o){return o instanceof goog.html.SafeHtml?o:(o=goog.html.SafeHtml.htmlEscape(o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(o)),o.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(o){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(o)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.APPLET,goog.dom.TagName.BASE,goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.MATH,goog.dom.TagName.META,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.SVG,goog.dom.TagName.TEMPLATE),goog.html.SafeHtml.create=function(o,i,et){return goog.html.SafeHtml.verifyTagName(String(o)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(o),i,et)},goog.html.SafeHtml.verifyTagName=function(o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+o+">.":"");if(o.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+o+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(o,i,et,nt){o&&goog.html.TrustedResourceUrl.unwrap(o);var ot={};return ot.src=o||null,ot.srcdoc=i&&goog.html.SafeHtml.unwrap(i),o=goog.html.SafeHtml.combineAttributes(ot,{sandbox:""},et),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",o,nt)},goog.html.SafeHtml.createSandboxIframe=function(o,i,et,nt){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var ot={};return ot.src=o?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(o)):null,ot.srcdoc=i||null,ot.sandbox="",o=goog.html.SafeHtml.combineAttributes(ot,{},et),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",o,nt)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(o,i){return goog.html.TrustedResourceUrl.unwrap(o),o=goog.html.SafeHtml.combineAttributes({src:o},{},i),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",o)},goog.html.SafeHtml.createScript=function(o,i){for(var et in i)if(Object.prototype.hasOwnProperty.call(i,et)){var nt=et.toLowerCase();if(nt=="language"||nt=="src"||nt=="text"||nt=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+nt+'" attribute':"")}for(et="",o=module$contents$goog$array_concat(o),nt=0;nt<o.length;nt++)et+=module$contents$goog$html$SafeScript_SafeScript.unwrap(o[nt]);return o=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(et,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",i,o)},goog.html.SafeHtml.createStyle=function(o,i){i=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},i);var et="";o=module$contents$goog$array_concat(o);for(var nt=0;nt<o.length;nt++)et+=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.unwrap(o[nt]);return o=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(et,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",i,o)},goog.html.SafeHtml.createMetaRefresh=function(o,i){return o=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(o)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(i||0)+"; url="+o})},goog.html.SafeHtml.getAttrNameAndValue_=function(o,i,et){if(et instanceof goog.string.Const)et=goog.string.Const.unwrap(et);else if(i.toLowerCase()=="style")if(goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)et=goog.html.SafeHtml.getStyleValue_(et);else throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");else{if(/^on/i.test(i))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+i+'" requires goog.string.Const value, "'+et+'" given.':"");if(i.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(et instanceof goog.html.TrustedResourceUrl)et=goog.html.TrustedResourceUrl.unwrap(et);else if(et instanceof goog.html.SafeUrl)et=goog.html.SafeUrl.unwrap(et);else if(typeof et=="string")et=goog.html.SafeUrl.sanitize(et).getTypedStringValue();else throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+i+'" on tag "'+o+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+et+'" given.':"")}return et.implementsGoogStringTypedString&&(et=et.getTypedStringValue()),goog.asserts.assert(typeof et=="string"||typeof et=="number","String or number value expected, got "+typeof et+" with value: "+et),i+'="'+goog.string.internal.htmlEscape(String(et))+'"'},goog.html.SafeHtml.getStyleValue_=function(o){if(!goog.isObject(o))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof o+" given: "+o:"");return o instanceof goog.html.SafeStyle||(o=goog.html.SafeStyle.create(o)),goog.html.SafeStyle.unwrap(o)},goog.html.SafeHtml.createWithDir=function(o,i,et,nt){return i=goog.html.SafeHtml.create(i,et,nt),i.dir_=o,i},goog.html.SafeHtml.join=function(o,i){o=goog.html.SafeHtml.htmlEscape(o);var et=o.getDirection(),nt=[],ot=function(st){Array.isArray(st)?module$contents$goog$array_forEach(st,ot):(st=goog.html.SafeHtml.htmlEscape(st),nt.push(goog.html.SafeHtml.unwrap(st)),st=st.getDirection(),et==goog.i18n.bidi.Dir.NEUTRAL?et=st:st!=goog.i18n.bidi.Dir.NEUTRAL&&et!=st&&(et=null))};return module$contents$goog$array_forEach(i,ot),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(nt.join(goog.html.SafeHtml.unwrap(o)),et)},goog.html.SafeHtml.concat=function(o){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(o,i){var et=goog.html.SafeHtml.concat(module$contents$goog$array_slice(arguments,1));return et.dir_=o,et},goog.html.SafeHtml.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(o,i){var et=goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse();return o=et?et.createHTML(o):o,new goog.html.SafeHtml(o,i,goog.html.SafeHtml.CONSTRUCTOR_TOKEN_PRIVATE_)},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(o,i,et){var nt=null,ot="<"+o+goog.html.SafeHtml.stringifyAttributes(o,i);return et==null?et=[]:Array.isArray(et)||(et=[et]),goog.dom.tags.isVoidTag(o.toLowerCase())?(goog.asserts.assert(!et.length,"Void tag <"+o+"> does not allow content."),ot+=">"):(nt=goog.html.SafeHtml.concat(et),ot+=">"+goog.html.SafeHtml.unwrap(nt)+"</"+o+">",nt=nt.getDirection()),(o=i&&i.dir)&&(nt=/^(ltr|rtl|auto)$/i.test(o)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(ot,nt)},goog.html.SafeHtml.stringifyAttributes=function(o,i){var et="";if(i){for(var nt in i)if(Object.prototype.hasOwnProperty.call(i,nt)){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(nt))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+nt+'".':"");var ot=i[nt];ot!=null&&(et+=" "+goog.html.SafeHtml.getAttrNameAndValue_(o,nt,ot))}}return et},goog.html.SafeHtml.combineAttributes=function(o,i,et){var nt={},ot;for(ot in o)Object.prototype.hasOwnProperty.call(o,ot)&&(goog.asserts.assert(ot.toLowerCase()==ot,"Must be lower case"),nt[ot]=o[ot]);for(ot in i)Object.prototype.hasOwnProperty.call(i,ot)&&(goog.asserts.assert(ot.toLowerCase()==ot,"Must be lower case"),nt[ot]=i[ot]);if(et){for(ot in et)if(Object.prototype.hasOwnProperty.call(et,ot)){var st=ot.toLowerCase();if(st in o)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+st+'" attribute, got "'+ot+'" with value "'+et[ot]+'"':"");st in i&&delete nt[st],nt[ot]=et[ot]}}return nt},goog.html.SafeHtml.DOCTYPE_HTML=function(){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL)}(),goog.html.SafeHtml.EMPTY=new goog.html.SafeHtml(goog.global.trustedTypes&&goog.global.trustedTypes.emptyHTML||"",goog.i18n.bidi.Dir.NEUTRAL,goog.html.SafeHtml.CONSTRUCTOR_TOKEN_PRIVATE_),goog.html.SafeHtml.BR=function(){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL)}(),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(o,i,et){return goog.asserts.assertString(goog.string.Const.unwrap(o),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(o)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(i,et||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(o,i){return goog.asserts.assertString(goog.string.Const.unwrap(o),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(o)),"must provide non-empty justification"),module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(i)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(o,i){return goog.asserts.assertString(goog.string.Const.unwrap(o),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(o)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(i)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(o,i){return goog.asserts.assertString(goog.string.Const.unwrap(o),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(o)),"must provide non-empty justification"),module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(i)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(o,i){return goog.asserts.assertString(goog.string.Const.unwrap(o),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(o)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(i)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(o,i){return goog.asserts.assertString(goog.string.Const.unwrap(o),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(o)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(i)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(o,i,et){o.insertAdjacentHTML(i,goog.html.SafeHtml.unwrapTrustedHTML(et))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document>"u")return!1;var o=document.createElement("div"),i=document.createElement("div");return i.appendChild(document.createElement("div")),o.appendChild(i),goog.DEBUG&&!o.firstChild?!1:(i=o.firstChild.firstChild,o.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!i.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(o,i){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;o.lastChild;)o.removeChild(o.lastChild);o.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(i)},goog.dom.safe.setInnerHtml=function(o,i){if(goog.asserts.ENABLE_ASSERTS&&o.tagName){var et=o.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[et])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+o.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(o,i)},goog.dom.safe.setInnerHtmlFromConstant=function(o,i){goog.dom.safe.setInnerHtml(o,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML to be immediatelly used."),goog.string.Const.unwrap(i)))},goog.dom.safe.setOuterHtml=function(o,i){o.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(i)},goog.dom.safe.setFormElementAction=function(o,i){i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),goog.dom.asserts.assertIsHTMLFormElement(o).action=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setButtonFormAction=function(o,i){i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),goog.dom.asserts.assertIsHTMLButtonElement(o).formAction=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setInputFormAction=function(o,i){i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),goog.dom.asserts.assertIsHTMLInputElement(o).formAction=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setStyle=function(o,i){o.style.cssText=goog.html.SafeStyle.unwrap(i)},goog.dom.safe.documentWrite=function(o,i){o.write(goog.html.SafeHtml.unwrapTrustedHTML(i))},goog.dom.safe.setAnchorHref=function(o,i){goog.dom.asserts.assertIsHTMLAnchorElement(o),i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),o.href=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setImageSrc=function(o,i){if(goog.dom.asserts.assertIsHTMLImageElement(o),!(i instanceof goog.html.SafeUrl)){var et=/^data:image\//i.test(i);i=goog.html.SafeUrl.sanitizeAssertUnchanged(i,et)}o.src=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setAudioSrc=function(o,i){if(goog.dom.asserts.assertIsHTMLAudioElement(o),!(i instanceof goog.html.SafeUrl)){var et=/^data:audio\//i.test(i);i=goog.html.SafeUrl.sanitizeAssertUnchanged(i,et)}o.src=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setVideoSrc=function(o,i){if(goog.dom.asserts.assertIsHTMLVideoElement(o),!(i instanceof goog.html.SafeUrl)){var et=/^data:video\//i.test(i);i=goog.html.SafeUrl.sanitizeAssertUnchanged(i,et)}o.src=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.setEmbedSrc=function(o,i){goog.dom.asserts.assertIsHTMLEmbedElement(o),o.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i)},goog.dom.safe.setFrameSrc=function(o,i){goog.dom.asserts.assertIsHTMLFrameElement(o),o.src=goog.html.TrustedResourceUrl.unwrap(i)},goog.dom.safe.setIframeSrc=function(o,i){goog.dom.asserts.assertIsHTMLIFrameElement(o),o.src=goog.html.TrustedResourceUrl.unwrap(i)},goog.dom.safe.setIframeSrcdoc=function(o,i){goog.dom.asserts.assertIsHTMLIFrameElement(o),o.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(i)},goog.dom.safe.setLinkHrefAndRel=function(o,i,et){goog.dom.asserts.assertIsHTMLLinkElement(o),o.rel=et,goog.string.internal.caseInsensitiveContains(et,"stylesheet")?(goog.asserts.assert(i instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),o.href=goog.html.TrustedResourceUrl.unwrap(i)):o.href=i instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(i):i instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(i):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(i))},goog.dom.safe.setObjectData=function(o,i){goog.dom.asserts.assertIsHTMLObjectElement(o),o.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i)},goog.dom.safe.setScriptSrc=function(o,i){goog.dom.asserts.assertIsHTMLScriptElement(o),o.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(i),goog.dom.safe.setNonceForScriptElement_(o)},goog.dom.safe.setScriptContent=function(o,i){goog.dom.asserts.assertIsHTMLScriptElement(o),o.textContent=module$contents$goog$html$SafeScript_SafeScript.unwrapTrustedScript(i),goog.dom.safe.setNonceForScriptElement_(o)},goog.dom.safe.setNonceForScriptElement_=function(o){var i=goog.getScriptNonce(o.ownerDocument&&o.ownerDocument.defaultView);i&&o.setAttribute("nonce",i)},goog.dom.safe.setLocationHref=function(o,i){goog.dom.asserts.assertIsLocation(o),i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),o.href=goog.html.SafeUrl.unwrap(i)},goog.dom.safe.assignLocation=function(o,i){goog.dom.asserts.assertIsLocation(o),i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),o.assign(goog.html.SafeUrl.unwrap(i))},goog.dom.safe.replaceLocation=function(o,i){i=i instanceof goog.html.SafeUrl?i:goog.html.SafeUrl.sanitizeAssertUnchanged(i),o.replace(goog.html.SafeUrl.unwrap(i))},goog.dom.safe.openInWindow=function(o,i,et,nt,ot){return o=o instanceof goog.html.SafeUrl?o:goog.html.SafeUrl.sanitizeAssertUnchanged(o),i=i||goog.global,et=et instanceof goog.string.Const?goog.string.Const.unwrap(et):et||"",i.open(goog.html.SafeUrl.unwrap(o),et,nt,ot)},goog.dom.safe.parseFromStringHtml=function(o,i){return goog.dom.safe.parseFromString(o,i,"text/html")},goog.dom.safe.parseFromString=function(o,i,et){return o.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(i),et)},goog.dom.safe.createImageFromBlob=function(o){if(!/^image\/.*/g.test(o.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var i=goog.global.URL.createObjectURL(o);return o=new goog.global.Image,o.onload=function(){goog.global.URL.revokeObjectURL(i)},goog.dom.safe.setImageSrc(o,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),i)),o},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(o,i){for(var et=o.split("%s"),nt="",ot=Array.prototype.slice.call(arguments,1);ot.length&&1<et.length;)nt+=et.shift()+ot.shift();return nt+et.join("%s")},goog.string.collapseWhitespace=function(o){return o.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(o){return o.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(o){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(o))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(o){return!/[^\t\n\r ]/.test(o)},goog.string.isAlpha=function(o){return!/[^a-zA-Z]/.test(o)},goog.string.isNumeric=function(o){return!/[^0-9]/.test(o)},goog.string.isAlphaNumeric=function(o){return!/[^a-zA-Z0-9]/.test(o)},goog.string.isSpace=function(o){return o==" "},goog.string.isUnicodeChar=function(o){return o.length==1&&" "<=o&&"~">=o||""<=o&&"�">=o},goog.string.stripNewlines=function(o){return o.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(o){return o.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(o){return o.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(o){return o.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(o){return o.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(o){return o.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(o){return o.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(o,i,et){if(o==i)return 0;if(!o)return-1;if(!i)return 1;for(var nt=o.toLowerCase().match(et),ot=i.toLowerCase().match(et),st=Math.min(nt.length,ot.length),lt=0;lt<st;lt++){et=nt[lt];var ht=ot[lt];if(et!=ht)return o=parseInt(et,10),!isNaN(o)&&(i=parseInt(ht,10),!isNaN(i)&&o-i)?o-i:et<ht?-1:1}return nt.length!=ot.length?nt.length-ot.length:o<i?-1:1},goog.string.intAwareCompare=function(o,i){return goog.string.numberAwareCompare_(o,i,/\d+|\D+/g)},goog.string.floatAwareCompare=function(o,i){return goog.string.numberAwareCompare_(o,i,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(o){return encodeURIComponent(String(o))},goog.string.urlDecode=function(o){return decodeURIComponent(o.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(o,i){return o=goog.string.internal.htmlEscape(o,i),goog.string.DETECT_DOUBLE_ESCAPING&&(o=o.replace(goog.string.E_RE_,"&#101;")),o},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(o){return goog.string.contains(o,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(o):goog.string.unescapePureXmlEntities_(o):o},goog.string.unescapeEntitiesWithDocument=function(o,i){return goog.string.contains(o,"&")?goog.string.unescapeEntitiesUsingDom_(o,i):o},goog.string.unescapeEntitiesUsingDom_=function(o,i){var et={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},nt=i?i.createElement("div"):goog.global.document.createElement("div");return o.replace(goog.string.HTML_ENTITY_PATTERN_,function(ot,st){var lt=et[ot];return lt||(st.charAt(0)=="#"&&(st=+("0"+st.substr(1)),isNaN(st)||(lt=String.fromCharCode(st))),lt||(goog.dom.safe.setInnerHtml(nt,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),ot+" ")),lt=nt.firstChild.nodeValue.slice(0,-1)),et[ot]=lt)})},goog.string.unescapePureXmlEntities_=function(o){return o.replace(/&([^;]+);/g,function(i,et){switch(et){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return et.charAt(0)!="#"||(et=+("0"+et.substr(1)),isNaN(et))?i:String.fromCharCode(et)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(o,i){return goog.string.newLineToBr(o.replace(/  /g," &#160;"),i)},goog.string.preserveSpaces=function(o){return o.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(o,i){for(var et=i.length,nt=0;nt<et;nt++){var ot=et==1?i:i.charAt(nt);if(o.charAt(0)==ot&&o.charAt(o.length-1)==ot)return o.substring(1,o.length-1)}return o},goog.string.truncate=function(o,i,et){return et&&(o=goog.string.unescapeEntities(o)),o.length>i&&(o=o.substring(0,i-3)+"..."),et&&(o=goog.string.htmlEscape(o)),o},goog.string.truncateMiddle=function(o,i,et,nt){if(et&&(o=goog.string.unescapeEntities(o)),nt&&o.length>i){nt>i&&(nt=i);var ot=o.length-nt;o=o.substring(0,i-nt)+"..."+o.substring(ot)}else o.length>i&&(nt=Math.floor(i/2),ot=o.length-nt,o=o.substring(0,nt+i%2)+"..."+o.substring(ot));return et&&(o=goog.string.htmlEscape(o)),o},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(o){o=String(o);for(var i=['"'],et=0;et<o.length;et++){var nt=o.charAt(et),ot=nt.charCodeAt(0);i[et+1]=goog.string.specialEscapeChars_[nt]||(31<ot&&127>ot?nt:goog.string.escapeChar(nt))}return i.push('"'),i.join("")},goog.string.escapeString=function(o){for(var i=[],et=0;et<o.length;et++)i[et]=goog.string.escapeChar(o.charAt(et));return i.join("")},goog.string.escapeChar=function(o){if(o in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[o];if(o in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[o]=goog.string.specialEscapeChars_[o];var i=o.charCodeAt(0);if(31<i&&127>i)var et=o;else 256>i?(et="\\x",(16>i||256<i)&&(et+="0")):(et="\\u",4096>i&&(et+="0")),et+=i.toString(16).toUpperCase();return goog.string.jsEscapeCache_[o]=et},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(o,i){return o&&i?o.split(i).length-1:0},goog.string.removeAt=function(o,i,et){var nt=o;return 0<=i&&i<o.length&&0<et&&(nt=o.substr(0,i)+o.substr(i+et,o.length-i-et)),nt},goog.string.remove=function(o,i){return o.replace(i,"")},goog.string.removeAll=function(o,i){return i=new RegExp(goog.string.regExpEscape(i),"g"),o.replace(i,"")},goog.string.replaceAll=function(o,i,et){return i=new RegExp(goog.string.regExpEscape(i),"g"),o.replace(i,et.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(o){return String(o).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(o,i){return o.repeat(i)}:function(o,i){return Array(i+1).join(o)},goog.string.padNumber=function(o,i,et){return o=et!==void 0?o.toFixed(et):String(o),et=o.indexOf("."),et==-1&&(et=o.length),goog.string.repeat("0",Math.max(0,i-et))+o},goog.string.makeSafe=function(o){return o==null?"":String(o)},goog.string.buildString=function(o){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(o){for(var i=0,et=0;et<o.length;++et)i=31*i+o.charCodeAt(et)>>>0;return i},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(o){var i=Number(o);return i==0&&goog.string.isEmptyOrWhitespace(o)?NaN:i},goog.string.isLowerCamelCase=function(o){return/^[a-z]+([A-Z][a-z]*)*$/.test(o)},goog.string.isUpperCamelCase=function(o){return/^([A-Z][a-z]*)+$/.test(o)},goog.string.toCamelCase=function(o){return String(o).replace(/\-([a-z])/g,function(i,et){return et.toUpperCase()})},goog.string.toSelectorCase=function(o){return String(o).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(o,i){return i=typeof i=="string"?goog.string.regExpEscape(i):"\\s",o.replace(new RegExp("(^"+(i?"|["+i+"]+":"")+")([a-z])","g"),function(et,nt,ot){return nt+ot.toUpperCase()})},goog.string.capitalize=function(o){return String(o.charAt(0)).toUpperCase()+String(o.substr(1)).toLowerCase()},goog.string.parseInt=function(o){return isFinite(o)&&(o=String(o)),typeof o=="string"?/^\s*-?0x/i.test(o)?parseInt(o,16):parseInt(o,10):NaN},goog.string.splitLimit=function(o,i,et){o=o.split(i);for(var nt=[];0<et&&o.length;)nt.push(o.shift()),et--;return o.length&&nt.push(o.join(i)),nt},goog.string.lastComponent=function(o,i){if(i)typeof i=="string"&&(i=[i]);else return o;for(var et=-1,nt=0;nt<i.length;nt++)if(i[nt]!=""){var ot=o.lastIndexOf(i[nt]);ot>et&&(et=ot)}return et==-1?o:o.slice(et+1)},goog.string.editDistance=function(o,i){var et=[],nt=[];if(o==i)return 0;if(!o.length||!i.length)return Math.max(o.length,i.length);for(var ot=0;ot<i.length+1;ot++)et[ot]=ot;for(ot=0;ot<o.length;ot++){nt[0]=ot+1;for(var st=0;st<i.length;st++)nt[st+1]=Math.min(nt[st]+1,et[st+1]+1,et[st]+ +(o[ot]!=i[st]));for(st=0;st<et.length;st++)et[st]=nt[st]}return nt[i.length]},goog.proto2={},goog.proto2.Descriptor=function(o,i,et){for(this.messageType_=o,this.name_=i.name||null,this.fullName_=i.fullName||null,this.containingType_=i.containingType,this.fields_={},o=0;o<et.length;o++)i=et[o],this.fields_[i.getTag()]=i},goog.proto2.Descriptor.prototype.getName=function(){return this.name_},goog.proto2.Descriptor.prototype.getFullName=function(){return this.fullName_},goog.proto2.Descriptor.prototype.getContainingType=function(){return this.containingType_?this.containingType_.getDescriptor():null},goog.proto2.Descriptor.prototype.getFields=function(){var o=goog.object.getValues(this.fields_);return module$contents$goog$array_sort(o,function(i,et){return i.getTag()-et.getTag()}),o},goog.proto2.Descriptor.prototype.getFieldsMap=function(){return this.fields_},goog.proto2.Descriptor.prototype.findFieldByName=function(o){return goog.object.findValue(this.fields_,function(i,et,nt){return i.getName()==o})||null},goog.proto2.Descriptor.prototype.findFieldByTag=function(o){return goog.asserts.assert(goog.string.isNumeric(o)),this.fields_[parseInt(o,10)]||null},goog.proto2.Descriptor.prototype.createMessageInstance=function(){return new this.messageType_},goog.proto2.FieldDescriptor=function(o,i,et){switch(this.parent_=o,goog.asserts.assert(goog.string.isNumeric(i)),this.tag_=i,this.name_=et.name,this.isPacked_=!!et.packed,this.isRepeated_=!!et.repeated,this.isRequired_=!!et.required,this.fieldType_=et.fieldType,this.nativeType_=et.type,this.deserializationConversionPermitted_=!1,this.fieldType_){case goog.proto2.FieldDescriptor.FieldType.INT64:case goog.proto2.FieldDescriptor.FieldType.UINT64:case goog.proto2.FieldDescriptor.FieldType.FIXED64:case goog.proto2.FieldDescriptor.FieldType.SFIXED64:case goog.proto2.FieldDescriptor.FieldType.SINT64:case goog.proto2.FieldDescriptor.FieldType.FLOAT:case goog.proto2.FieldDescriptor.FieldType.DOUBLE:this.deserializationConversionPermitted_=!0}this.defaultValue_=et.defaultValue},goog.proto2.FieldDescriptor.FieldType={DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18},goog.proto2.FieldDescriptor.prototype.getTag=function(){return this.tag_},goog.proto2.FieldDescriptor.prototype.getContainingType=function(){return this.parent_.prototype.getDescriptor()},goog.proto2.FieldDescriptor.prototype.getName=function(){return this.name_},goog.proto2.FieldDescriptor.prototype.getDefaultValue=function(){if(this.defaultValue_===void 0){var o=this.nativeType_;if(o===Boolean)this.defaultValue_=!1;else if(o===Number)this.defaultValue_=0;else if(o===String)this.defaultValue_=this.deserializationConversionPermitted_?"0":"";else return new o}return this.defaultValue_},goog.proto2.FieldDescriptor.prototype.getFieldType=function(){return this.fieldType_},goog.proto2.FieldDescriptor.prototype.getNativeType=function(){return this.nativeType_},goog.proto2.FieldDescriptor.prototype.deserializationConversionPermitted=function(){return this.deserializationConversionPermitted_},goog.proto2.FieldDescriptor.prototype.getFieldMessageType=function(){return this.nativeType_.prototype.getDescriptor()},goog.proto2.FieldDescriptor.prototype.isCompositeType=function(){return this.fieldType_==goog.proto2.FieldDescriptor.FieldType.MESSAGE||this.fieldType_==goog.proto2.FieldDescriptor.FieldType.GROUP},goog.proto2.FieldDescriptor.prototype.isPacked=function(){return this.isPacked_},goog.proto2.FieldDescriptor.prototype.isRepeated=function(){return this.isRepeated_},goog.proto2.FieldDescriptor.prototype.isRequired=function(){return this.isRequired_},goog.proto2.FieldDescriptor.prototype.isOptional=function(){return!this.isRepeated_&&!this.isRequired_},goog.proto2.Message=function(){this.values_={},this.fields_=this.getDescriptor().getFieldsMap(),this.deserializedFields_=this.lazyDeserializer_=null},goog.proto2.Message.FieldType={DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18},goog.proto2.Message.prototype.initializeForLazyDeserializer=function(o,i){this.lazyDeserializer_=o,this.values_=i,this.deserializedFields_={}},goog.proto2.Message.prototype.setUnknown=function(o,i){goog.asserts.assert(!this.fields_[o],"Field is not unknown in this message"),goog.asserts.assert(1<=o,"Tag "+o+' has value "'+i+'" in descriptor '+this.getDescriptor().getName()),goog.asserts.assert(i!==null,"Value cannot be null"),this.values_[o]=i,this.deserializedFields_&&delete this.deserializedFields_[o]},goog.proto2.Message.prototype.forEachUnknown=function(o,i){i=i||this;for(var et in this.values_){var nt=Number(et);this.fields_[nt]||o.call(i,nt,this.values_[et])}},goog.proto2.Message.prototype.getDescriptor=goog.abstractMethod,goog.proto2.Message.prototype.has=function(o){return goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.has$Value(o.getTag())},goog.proto2.Message.prototype.arrayOf=function(o){return goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.array$Values(o.getTag())},goog.proto2.Message.prototype.countOf=function(o){return goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.count$Values(o.getTag())},goog.proto2.Message.prototype.get=function(o,i){return goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.get$Value(o.getTag(),i)},goog.proto2.Message.prototype.getOrDefault=function(o,i){return goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.get$ValueOrDefault(o.getTag(),i)},goog.proto2.Message.prototype.set=function(o,i){goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.set$Value(o.getTag(),i)},goog.proto2.Message.prototype.add=function(o,i){goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.add$Value(o.getTag(),i)},goog.proto2.Message.prototype.clear=function(o){goog.asserts.assert(o.getContainingType()==this.getDescriptor(),"The current message does not contain the given field"),this.clear$Field(o.getTag())},goog.proto2.Message.prototype.equals=function(o){if(!o||this.constructor!=o.constructor)return!1;for(var i=this.getDescriptor().getFields(),et=0;et<i.length;et++){var nt=i[et],ot=nt.getTag();if(this.has$Value(ot)!=o.has$Value(ot))return!1;if(this.has$Value(ot)){var st=nt.isCompositeType(),lt=this.getValueForTag_(ot);if(ot=o.getValueForTag_(ot),nt.isRepeated()){if(lt.length!=ot.length)return!1;for(nt=0;nt<lt.length;nt++){var ht=lt[nt],ft=ot[nt];if(st?!ht.equals(ft):ht!=ft)return!1}}else if(st?!lt.equals(ot):lt!=ot)return!1}}return!0},goog.proto2.Message.prototype.copyFrom=function(o){goog.asserts.assert(this.constructor==o.constructor,"The source message must have the same type."),this!=o&&(this.values_={},this.deserializedFields_&&(this.deserializedFields_={}),this.mergeFrom(o))},goog.proto2.Message.prototype.mergeFrom=function(o){goog.asserts.assert(this.constructor==o.constructor,"The source message must have the same type.");for(var i=this.getDescriptor().getFields(),et=0;et<i.length;et++){var nt=i[et],ot=nt.getTag();if(o.has$Value(ot)){this.deserializedFields_&&delete this.deserializedFields_[nt.getTag()];var st=nt.isCompositeType();if(nt.isRepeated()){nt=o.array$Values(ot);for(var lt=0;lt<nt.length;lt++)this.add$Value(ot,st?nt[lt].clone():nt[lt])}else nt=o.getValueForTag_(ot),st?(st=this.getValueForTag_(ot))?st.mergeFrom(nt):this.set$Value(ot,nt.clone()):this.set$Value(ot,nt)}}},goog.proto2.Message.prototype.clone=function(){var o=new this.constructor;return o.copyFrom(this),o},goog.proto2.Message.prototype.initDefaults=function(o){for(var i=this.getDescriptor().getFields(),et=0;et<i.length;et++){var nt=i[et],ot=nt.getTag(),st=nt.isCompositeType();if(this.has$Value(ot)||nt.isRepeated()||(st?this.values_[ot]=new(nt.getNativeType()):o&&(this.values_[ot]=nt.getDefaultValue())),st)if(nt.isRepeated())for(nt=this.array$Values(ot),ot=0;ot<nt.length;ot++)nt[ot].initDefaults(o);else this.get$Value(ot).initDefaults(o)}},goog.proto2.Message.prototype.has$Value=function(o){return this.values_[o]!=null},goog.proto2.Message.prototype.getValueForTag_=function(o){var i=this.values_[o];return i==null?null:this.lazyDeserializer_?o in this.deserializedFields_?this.deserializedFields_[o]:(i=this.lazyDeserializer_.deserializeField(this,this.fields_[o],i),this.deserializedFields_[o]=i):i},goog.proto2.Message.prototype.get$Value=function(o,i){var et=this.getValueForTag_(o);return this.fields_[o].isRepeated()?(o=i||0,goog.asserts.assert(0<=o&&o<et.length,"Given index %s is out of bounds.  Repeated field length: %s",o,et.length),et[o]):et},goog.proto2.Message.prototype.get$ValueOrDefault=function(o,i){return this.has$Value(o)?this.get$Value(o,i):this.fields_[o].getDefaultValue()},goog.proto2.Message.prototype.array$Values=function(o){return this.getValueForTag_(o)||[]},goog.proto2.Message.prototype.count$Values=function(o){return this.fields_[o].isRepeated()?this.has$Value(o)?this.values_[o].length:0:this.has$Value(o)?1:0},goog.proto2.Message.prototype.set$Value=function(o,i){goog.asserts.ENABLE_ASSERTS&&this.checkFieldType_(this.fields_[o],i),this.values_[o]=i,this.deserializedFields_&&(this.deserializedFields_[o]=i)},goog.proto2.Message.prototype.add$Value=function(o,i){goog.asserts.ENABLE_ASSERTS&&this.checkFieldType_(this.fields_[o],i),this.values_[o]||(this.values_[o]=[]),this.values_[o].push(i),this.deserializedFields_&&delete this.deserializedFields_[o]},goog.proto2.Message.prototype.checkFieldType_=function(o,i){o.getFieldType()==goog.proto2.FieldDescriptor.FieldType.ENUM?goog.asserts.assertNumber(i):goog.asserts.assert(Object(i).constructor==o.getNativeType())},goog.proto2.Message.prototype.clear$Field=function(o){delete this.values_[o],this.deserializedFields_&&delete this.deserializedFields_[o]},goog.proto2.Message.createDescriptor=function(o,i){var et=[],nt=i[0],ot;for(ot in i)ot!=0&&et.push(new goog.proto2.FieldDescriptor(o,ot,i[ot]));return new goog.proto2.Descriptor(o,nt,et)},goog.proto2.Serializer=function(){},goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS=!1,goog.proto2.Serializer.prototype.serialize=goog.abstractMethod,goog.proto2.Serializer.prototype.getSerializedValue=function(o,i){return o.isCompositeType()?this.serialize(i):typeof i!="number"||isFinite(i)?i:i.toString()},goog.proto2.Serializer.prototype.deserialize=function(o,i){return o=o.createMessageInstance(),this.deserializeTo(o,i),goog.asserts.assert(o instanceof goog.proto2.Message),o},goog.proto2.Serializer.prototype.deserializeTo=goog.abstractMethod,goog.proto2.Serializer.prototype.getDeserializedValue=function(o,i){if(o.isCompositeType())return i instanceof goog.proto2.Message?i:this.deserialize(o.getFieldMessageType(),i);if(o.getFieldType()==goog.proto2.FieldDescriptor.FieldType.ENUM)return goog.proto2.Serializer.DECODE_SYMBOLIC_ENUMS&&typeof i=="string"&&(o=o.getNativeType(),o.hasOwnProperty(i))?o[i]:typeof i=="string"&&goog.proto2.Serializer.INTEGER_REGEX.test(i)&&(o=Number(i),0<o)?o:i;if(!o.deserializationConversionPermitted())return i;if(o=o.getNativeType(),o===String){if(typeof i=="number")return String(i)}else if(o===Number&&typeof i=="string"&&(i==="Infinity"||i==="-Infinity"||i==="NaN"||goog.proto2.Serializer.INTEGER_REGEX.test(i)))return Number(i);return i},goog.proto2.Serializer.INTEGER_REGEX=/^-?[0-9]+$/,goog.proto2.LazyDeserializer=function(){},goog.inherits(goog.proto2.LazyDeserializer,goog.proto2.Serializer),goog.proto2.LazyDeserializer.prototype.deserialize=function(o,i){return o=o.createMessageInstance(),o.initializeForLazyDeserializer(this,i),goog.asserts.assert(o instanceof goog.proto2.Message),o},goog.proto2.LazyDeserializer.prototype.deserializeTo=function(o,i){throw Error("Unimplemented")},goog.proto2.LazyDeserializer.prototype.deserializeField=goog.abstractMethod,goog.proto2.PbLiteSerializer=function(){},goog.inherits(goog.proto2.PbLiteSerializer,goog.proto2.LazyDeserializer),goog.proto2.PbLiteSerializer.prototype.zeroIndexing_=!1,goog.proto2.PbLiteSerializer.prototype.setZeroIndexed=function(o){this.zeroIndexing_=o},goog.proto2.PbLiteSerializer.prototype.serialize=function(o){for(var i=o.getDescriptor().getFields(),et=[],nt=this.zeroIndexing_,ot=0;ot<i.length;ot++){var st=i[ot];if(o.has(st)){var lt=st.getTag();if(lt=nt?lt-1:lt,st.isRepeated()){et[lt]=[];for(var ht=0;ht<o.countOf(st);ht++)et[lt][ht]=this.getSerializedValue(st,o.get(st,ht))}else et[lt]=this.getSerializedValue(st,o.get(st))}}return o.forEachUnknown(function(ft,St){et[nt?ft-1:ft]=St}),et},goog.proto2.PbLiteSerializer.prototype.deserializeField=function(o,i,et){if(et==null)return et;if(i.isRepeated()){o=[],goog.asserts.assert(Array.isArray(et),"Value must be array: %s",et);for(var nt=0;nt<et.length;nt++)o[nt]=this.getDeserializedValue(i,et[nt]);return o}return this.getDeserializedValue(i,et)},goog.proto2.PbLiteSerializer.prototype.getSerializedValue=function(o,i){return o.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL?i?1:0:goog.proto2.Serializer.prototype.getSerializedValue.apply(this,arguments)},goog.proto2.PbLiteSerializer.prototype.getDeserializedValue=function(o,i){return o.getFieldType()==goog.proto2.FieldDescriptor.FieldType.BOOL?(goog.asserts.assert(typeof i=="number"||typeof i=="boolean","Value is expected to be a number or boolean"),!!i):goog.proto2.Serializer.prototype.getDeserializedValue.apply(this,arguments)},goog.proto2.PbLiteSerializer.prototype.deserialize=function(o,i){var et=i;if(this.zeroIndexing_){et=[];for(var nt in i)et[parseInt(nt,10)+1]=i[nt]}return goog.proto2.PbLiteSerializer.superClass_.deserialize.call(this,o,et)},goog.string.StringBuffer=function(o,i){o!=null&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(o){this.buffer_=""+o},goog.string.StringBuffer.prototype.append=function(o,i,et){if(this.buffer_+=String(o),i!=null)for(var nt=1;nt<arguments.length;nt++)this.buffer_+=arguments[nt];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_};var i18n={phonenumbers:{}};i18n.phonenumbers.NumberFormat=function(){goog.proto2.Message.call(this)},goog.inherits(i18n.phonenumbers.NumberFormat,goog.proto2.Message),i18n.phonenumbers.NumberFormat.descriptor_=null,i18n.phonenumbers.NumberFormat.prototype.getPattern=function(){return this.get$Value(1)},i18n.phonenumbers.NumberFormat.prototype.getPatternOrDefault=function(){return this.get$ValueOrDefault(1)},i18n.phonenumbers.NumberFormat.prototype.setPattern=function(o){this.set$Value(1,o)},i18n.phonenumbers.NumberFormat.prototype.hasPattern=function(){return this.has$Value(1)},i18n.phonenumbers.NumberFormat.prototype.patternCount=function(){return this.count$Values(1)},i18n.phonenumbers.NumberFormat.prototype.clearPattern=function(){this.clear$Field(1)},i18n.phonenumbers.NumberFormat.prototype.getFormat=function(){return this.get$Value(2)},i18n.phonenumbers.NumberFormat.prototype.getFormatOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.NumberFormat.prototype.setFormat=function(o){this.set$Value(2,o)},i18n.phonenumbers.NumberFormat.prototype.hasFormat=function(){return this.has$Value(2)},i18n.phonenumbers.NumberFormat.prototype.formatCount=function(){return this.count$Values(2)},i18n.phonenumbers.NumberFormat.prototype.clearFormat=function(){this.clear$Field(2)},i18n.phonenumbers.NumberFormat.prototype.getLeadingDigitsPattern=function(o){return this.get$Value(3,o)},i18n.phonenumbers.NumberFormat.prototype.getLeadingDigitsPatternOrDefault=function(o){return this.get$ValueOrDefault(3,o)},i18n.phonenumbers.NumberFormat.prototype.addLeadingDigitsPattern=function(o){this.add$Value(3,o)},i18n.phonenumbers.NumberFormat.prototype.leadingDigitsPatternArray=function(){return this.array$Values(3)},i18n.phonenumbers.NumberFormat.prototype.hasLeadingDigitsPattern=function(){return this.has$Value(3)},i18n.phonenumbers.NumberFormat.prototype.leadingDigitsPatternCount=function(){return this.count$Values(3)},i18n.phonenumbers.NumberFormat.prototype.clearLeadingDigitsPattern=function(){this.clear$Field(3)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixFormattingRule=function(){return this.get$Value(4)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixFormattingRuleOrDefault=function(){return this.get$ValueOrDefault(4)},i18n.phonenumbers.NumberFormat.prototype.setNationalPrefixFormattingRule=function(o){this.set$Value(4,o)},i18n.phonenumbers.NumberFormat.prototype.hasNationalPrefixFormattingRule=function(){return this.has$Value(4)},i18n.phonenumbers.NumberFormat.prototype.nationalPrefixFormattingRuleCount=function(){return this.count$Values(4)},i18n.phonenumbers.NumberFormat.prototype.clearNationalPrefixFormattingRule=function(){this.clear$Field(4)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixOptionalWhenFormatting=function(){return this.get$Value(6)},i18n.phonenumbers.NumberFormat.prototype.getNationalPrefixOptionalWhenFormattingOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.NumberFormat.prototype.setNationalPrefixOptionalWhenFormatting=function(o){this.set$Value(6,o)},i18n.phonenumbers.NumberFormat.prototype.hasNationalPrefixOptionalWhenFormatting=function(){return this.has$Value(6)},i18n.phonenumbers.NumberFormat.prototype.nationalPrefixOptionalWhenFormattingCount=function(){return this.count$Values(6)},i18n.phonenumbers.NumberFormat.prototype.clearNationalPrefixOptionalWhenFormatting=function(){this.clear$Field(6)},i18n.phonenumbers.NumberFormat.prototype.getDomesticCarrierCodeFormattingRule=function(){return this.get$Value(5)},i18n.phonenumbers.NumberFormat.prototype.getDomesticCarrierCodeFormattingRuleOrDefault=function(){return this.get$ValueOrDefault(5)},i18n.phonenumbers.NumberFormat.prototype.setDomesticCarrierCodeFormattingRule=function(o){this.set$Value(5,o)},i18n.phonenumbers.NumberFormat.prototype.hasDomesticCarrierCodeFormattingRule=function(){return this.has$Value(5)},i18n.phonenumbers.NumberFormat.prototype.domesticCarrierCodeFormattingRuleCount=function(){return this.count$Values(5)},i18n.phonenumbers.NumberFormat.prototype.clearDomesticCarrierCodeFormattingRule=function(){this.clear$Field(5)},i18n.phonenumbers.PhoneNumberDesc=function(){goog.proto2.Message.call(this)},goog.inherits(i18n.phonenumbers.PhoneNumberDesc,goog.proto2.Message),i18n.phonenumbers.PhoneNumberDesc.descriptor_=null,i18n.phonenumbers.PhoneNumberDesc.prototype.getNationalNumberPattern=function(){return this.get$Value(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.getNationalNumberPatternOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.setNationalNumberPattern=function(o){this.set$Value(2,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasNationalNumberPattern=function(){return this.has$Value(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.nationalNumberPatternCount=function(){return this.count$Values(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearNationalNumberPattern=function(){this.clear$Field(2)},i18n.phonenumbers.PhoneNumberDesc.prototype.getPossibleLength=function(o){return this.get$Value(9,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.getPossibleLengthOrDefault=function(o){return this.get$ValueOrDefault(9,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.addPossibleLength=function(o){this.add$Value(9,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.possibleLengthArray=function(){return this.array$Values(9)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasPossibleLength=function(){return this.has$Value(9)},i18n.phonenumbers.PhoneNumberDesc.prototype.possibleLengthCount=function(){return this.count$Values(9)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearPossibleLength=function(){this.clear$Field(9)},i18n.phonenumbers.PhoneNumberDesc.prototype.getPossibleLengthLocalOnly=function(o){return this.get$Value(10,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.getPossibleLengthLocalOnlyOrDefault=function(o){return this.get$ValueOrDefault(10,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.addPossibleLengthLocalOnly=function(o){this.add$Value(10,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.possibleLengthLocalOnlyArray=function(){return this.array$Values(10)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasPossibleLengthLocalOnly=function(){return this.has$Value(10)},i18n.phonenumbers.PhoneNumberDesc.prototype.possibleLengthLocalOnlyCount=function(){return this.count$Values(10)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearPossibleLengthLocalOnly=function(){this.clear$Field(10)},i18n.phonenumbers.PhoneNumberDesc.prototype.getExampleNumber=function(){return this.get$Value(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.getExampleNumberOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.setExampleNumber=function(o){this.set$Value(6,o)},i18n.phonenumbers.PhoneNumberDesc.prototype.hasExampleNumber=function(){return this.has$Value(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.exampleNumberCount=function(){return this.count$Values(6)},i18n.phonenumbers.PhoneNumberDesc.prototype.clearExampleNumber=function(){this.clear$Field(6)},i18n.phonenumbers.PhoneMetadata=function(){goog.proto2.Message.call(this)},goog.inherits(i18n.phonenumbers.PhoneMetadata,goog.proto2.Message),i18n.phonenumbers.PhoneMetadata.descriptor_=null,i18n.phonenumbers.PhoneMetadata.prototype.getGeneralDesc=function(){return this.get$Value(1)},i18n.phonenumbers.PhoneMetadata.prototype.getGeneralDescOrDefault=function(){return this.get$ValueOrDefault(1)},i18n.phonenumbers.PhoneMetadata.prototype.setGeneralDesc=function(o){this.set$Value(1,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasGeneralDesc=function(){return this.has$Value(1)},i18n.phonenumbers.PhoneMetadata.prototype.generalDescCount=function(){return this.count$Values(1)},i18n.phonenumbers.PhoneMetadata.prototype.clearGeneralDesc=function(){this.clear$Field(1)},i18n.phonenumbers.PhoneMetadata.prototype.getFixedLine=function(){return this.get$Value(2)},i18n.phonenumbers.PhoneMetadata.prototype.getFixedLineOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.PhoneMetadata.prototype.setFixedLine=function(o){this.set$Value(2,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasFixedLine=function(){return this.has$Value(2)},i18n.phonenumbers.PhoneMetadata.prototype.fixedLineCount=function(){return this.count$Values(2)},i18n.phonenumbers.PhoneMetadata.prototype.clearFixedLine=function(){this.clear$Field(2)},i18n.phonenumbers.PhoneMetadata.prototype.getMobile=function(){return this.get$Value(3)},i18n.phonenumbers.PhoneMetadata.prototype.getMobileOrDefault=function(){return this.get$ValueOrDefault(3)},i18n.phonenumbers.PhoneMetadata.prototype.setMobile=function(o){this.set$Value(3,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasMobile=function(){return this.has$Value(3)},i18n.phonenumbers.PhoneMetadata.prototype.mobileCount=function(){return this.count$Values(3)},i18n.phonenumbers.PhoneMetadata.prototype.clearMobile=function(){this.clear$Field(3)},i18n.phonenumbers.PhoneMetadata.prototype.getTollFree=function(){return this.get$Value(4)},i18n.phonenumbers.PhoneMetadata.prototype.getTollFreeOrDefault=function(){return this.get$ValueOrDefault(4)},i18n.phonenumbers.PhoneMetadata.prototype.setTollFree=function(o){this.set$Value(4,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasTollFree=function(){return this.has$Value(4)},i18n.phonenumbers.PhoneMetadata.prototype.tollFreeCount=function(){return this.count$Values(4)},i18n.phonenumbers.PhoneMetadata.prototype.clearTollFree=function(){this.clear$Field(4)},i18n.phonenumbers.PhoneMetadata.prototype.getPremiumRate=function(){return this.get$Value(5)},i18n.phonenumbers.PhoneMetadata.prototype.getPremiumRateOrDefault=function(){return this.get$ValueOrDefault(5)},i18n.phonenumbers.PhoneMetadata.prototype.setPremiumRate=function(o){this.set$Value(5,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasPremiumRate=function(){return this.has$Value(5)},i18n.phonenumbers.PhoneMetadata.prototype.premiumRateCount=function(){return this.count$Values(5)},i18n.phonenumbers.PhoneMetadata.prototype.clearPremiumRate=function(){this.clear$Field(5)},i18n.phonenumbers.PhoneMetadata.prototype.getSharedCost=function(){return this.get$Value(6)},i18n.phonenumbers.PhoneMetadata.prototype.getSharedCostOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.PhoneMetadata.prototype.setSharedCost=function(o){this.set$Value(6,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasSharedCost=function(){return this.has$Value(6)},i18n.phonenumbers.PhoneMetadata.prototype.sharedCostCount=function(){return this.count$Values(6)},i18n.phonenumbers.PhoneMetadata.prototype.clearSharedCost=function(){this.clear$Field(6)},i18n.phonenumbers.PhoneMetadata.prototype.getPersonalNumber=function(){return this.get$Value(7)},i18n.phonenumbers.PhoneMetadata.prototype.getPersonalNumberOrDefault=function(){return this.get$ValueOrDefault(7)},i18n.phonenumbers.PhoneMetadata.prototype.setPersonalNumber=function(o){this.set$Value(7,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasPersonalNumber=function(){return this.has$Value(7)},i18n.phonenumbers.PhoneMetadata.prototype.personalNumberCount=function(){return this.count$Values(7)},i18n.phonenumbers.PhoneMetadata.prototype.clearPersonalNumber=function(){this.clear$Field(7)},i18n.phonenumbers.PhoneMetadata.prototype.getVoip=function(){return this.get$Value(8)},i18n.phonenumbers.PhoneMetadata.prototype.getVoipOrDefault=function(){return this.get$ValueOrDefault(8)},i18n.phonenumbers.PhoneMetadata.prototype.setVoip=function(o){this.set$Value(8,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasVoip=function(){return this.has$Value(8)},i18n.phonenumbers.PhoneMetadata.prototype.voipCount=function(){return this.count$Values(8)},i18n.phonenumbers.PhoneMetadata.prototype.clearVoip=function(){this.clear$Field(8)},i18n.phonenumbers.PhoneMetadata.prototype.getPager=function(){return this.get$Value(21)},i18n.phonenumbers.PhoneMetadata.prototype.getPagerOrDefault=function(){return this.get$ValueOrDefault(21)},i18n.phonenumbers.PhoneMetadata.prototype.setPager=function(o){this.set$Value(21,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasPager=function(){return this.has$Value(21)},i18n.phonenumbers.PhoneMetadata.prototype.pagerCount=function(){return this.count$Values(21)},i18n.phonenumbers.PhoneMetadata.prototype.clearPager=function(){this.clear$Field(21)},i18n.phonenumbers.PhoneMetadata.prototype.getUan=function(){return this.get$Value(25)},i18n.phonenumbers.PhoneMetadata.prototype.getUanOrDefault=function(){return this.get$ValueOrDefault(25)},i18n.phonenumbers.PhoneMetadata.prototype.setUan=function(o){this.set$Value(25,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasUan=function(){return this.has$Value(25)},i18n.phonenumbers.PhoneMetadata.prototype.uanCount=function(){return this.count$Values(25)},i18n.phonenumbers.PhoneMetadata.prototype.clearUan=function(){this.clear$Field(25)},i18n.phonenumbers.PhoneMetadata.prototype.getEmergency=function(){return this.get$Value(27)},i18n.phonenumbers.PhoneMetadata.prototype.getEmergencyOrDefault=function(){return this.get$ValueOrDefault(27)},i18n.phonenumbers.PhoneMetadata.prototype.setEmergency=function(o){this.set$Value(27,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasEmergency=function(){return this.has$Value(27)},i18n.phonenumbers.PhoneMetadata.prototype.emergencyCount=function(){return this.count$Values(27)},i18n.phonenumbers.PhoneMetadata.prototype.clearEmergency=function(){this.clear$Field(27)},i18n.phonenumbers.PhoneMetadata.prototype.getVoicemail=function(){return this.get$Value(28)},i18n.phonenumbers.PhoneMetadata.prototype.getVoicemailOrDefault=function(){return this.get$ValueOrDefault(28)},i18n.phonenumbers.PhoneMetadata.prototype.setVoicemail=function(o){this.set$Value(28,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasVoicemail=function(){return this.has$Value(28)},i18n.phonenumbers.PhoneMetadata.prototype.voicemailCount=function(){return this.count$Values(28)},i18n.phonenumbers.PhoneMetadata.prototype.clearVoicemail=function(){this.clear$Field(28)},i18n.phonenumbers.PhoneMetadata.prototype.getShortCode=function(){return this.get$Value(29)},i18n.phonenumbers.PhoneMetadata.prototype.getShortCodeOrDefault=function(){return this.get$ValueOrDefault(29)},i18n.phonenumbers.PhoneMetadata.prototype.setShortCode=function(o){this.set$Value(29,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasShortCode=function(){return this.has$Value(29)},i18n.phonenumbers.PhoneMetadata.prototype.shortCodeCount=function(){return this.count$Values(29)},i18n.phonenumbers.PhoneMetadata.prototype.clearShortCode=function(){this.clear$Field(29)},i18n.phonenumbers.PhoneMetadata.prototype.getStandardRate=function(){return this.get$Value(30)},i18n.phonenumbers.PhoneMetadata.prototype.getStandardRateOrDefault=function(){return this.get$ValueOrDefault(30)},i18n.phonenumbers.PhoneMetadata.prototype.setStandardRate=function(o){this.set$Value(30,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasStandardRate=function(){return this.has$Value(30)},i18n.phonenumbers.PhoneMetadata.prototype.standardRateCount=function(){return this.count$Values(30)},i18n.phonenumbers.PhoneMetadata.prototype.clearStandardRate=function(){this.clear$Field(30)},i18n.phonenumbers.PhoneMetadata.prototype.getCarrierSpecific=function(){return this.get$Value(31)},i18n.phonenumbers.PhoneMetadata.prototype.getCarrierSpecificOrDefault=function(){return this.get$ValueOrDefault(31)},i18n.phonenumbers.PhoneMetadata.prototype.setCarrierSpecific=function(o){this.set$Value(31,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasCarrierSpecific=function(){return this.has$Value(31)},i18n.phonenumbers.PhoneMetadata.prototype.carrierSpecificCount=function(){return this.count$Values(31)},i18n.phonenumbers.PhoneMetadata.prototype.clearCarrierSpecific=function(){this.clear$Field(31)},i18n.phonenumbers.PhoneMetadata.prototype.getSmsServices=function(){return this.get$Value(33)},i18n.phonenumbers.PhoneMetadata.prototype.getSmsServicesOrDefault=function(){return this.get$ValueOrDefault(33)},i18n.phonenumbers.PhoneMetadata.prototype.setSmsServices=function(o){this.set$Value(33,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasSmsServices=function(){return this.has$Value(33)},i18n.phonenumbers.PhoneMetadata.prototype.smsServicesCount=function(){return this.count$Values(33)},i18n.phonenumbers.PhoneMetadata.prototype.clearSmsServices=function(){this.clear$Field(33)},i18n.phonenumbers.PhoneMetadata.prototype.getNoInternationalDialling=function(){return this.get$Value(24)},i18n.phonenumbers.PhoneMetadata.prototype.getNoInternationalDiallingOrDefault=function(){return this.get$ValueOrDefault(24)},i18n.phonenumbers.PhoneMetadata.prototype.setNoInternationalDialling=function(o){this.set$Value(24,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasNoInternationalDialling=function(){return this.has$Value(24)},i18n.phonenumbers.PhoneMetadata.prototype.noInternationalDiallingCount=function(){return this.count$Values(24)},i18n.phonenumbers.PhoneMetadata.prototype.clearNoInternationalDialling=function(){this.clear$Field(24)},i18n.phonenumbers.PhoneMetadata.prototype.getId=function(){return this.get$Value(9)},i18n.phonenumbers.PhoneMetadata.prototype.getIdOrDefault=function(){return this.get$ValueOrDefault(9)},i18n.phonenumbers.PhoneMetadata.prototype.setId=function(o){this.set$Value(9,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasId=function(){return this.has$Value(9)},i18n.phonenumbers.PhoneMetadata.prototype.idCount=function(){return this.count$Values(9)},i18n.phonenumbers.PhoneMetadata.prototype.clearId=function(){this.clear$Field(9)},i18n.phonenumbers.PhoneMetadata.prototype.getCountryCode=function(){return this.get$Value(10)},i18n.phonenumbers.PhoneMetadata.prototype.getCountryCodeOrDefault=function(){return this.get$ValueOrDefault(10)},i18n.phonenumbers.PhoneMetadata.prototype.setCountryCode=function(o){this.set$Value(10,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasCountryCode=function(){return this.has$Value(10)},i18n.phonenumbers.PhoneMetadata.prototype.countryCodeCount=function(){return this.count$Values(10)},i18n.phonenumbers.PhoneMetadata.prototype.clearCountryCode=function(){this.clear$Field(10)},i18n.phonenumbers.PhoneMetadata.prototype.getInternationalPrefix=function(){return this.get$Value(11)},i18n.phonenumbers.PhoneMetadata.prototype.getInternationalPrefixOrDefault=function(){return this.get$ValueOrDefault(11)},i18n.phonenumbers.PhoneMetadata.prototype.setInternationalPrefix=function(o){this.set$Value(11,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasInternationalPrefix=function(){return this.has$Value(11)},i18n.phonenumbers.PhoneMetadata.prototype.internationalPrefixCount=function(){return this.count$Values(11)},i18n.phonenumbers.PhoneMetadata.prototype.clearInternationalPrefix=function(){this.clear$Field(11)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredInternationalPrefix=function(){return this.get$Value(17)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredInternationalPrefixOrDefault=function(){return this.get$ValueOrDefault(17)},i18n.phonenumbers.PhoneMetadata.prototype.setPreferredInternationalPrefix=function(o){this.set$Value(17,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasPreferredInternationalPrefix=function(){return this.has$Value(17)},i18n.phonenumbers.PhoneMetadata.prototype.preferredInternationalPrefixCount=function(){return this.count$Values(17)},i18n.phonenumbers.PhoneMetadata.prototype.clearPreferredInternationalPrefix=function(){this.clear$Field(17)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefix=function(){return this.get$Value(12)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixOrDefault=function(){return this.get$ValueOrDefault(12)},i18n.phonenumbers.PhoneMetadata.prototype.setNationalPrefix=function(o){this.set$Value(12,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasNationalPrefix=function(){return this.has$Value(12)},i18n.phonenumbers.PhoneMetadata.prototype.nationalPrefixCount=function(){return this.count$Values(12)},i18n.phonenumbers.PhoneMetadata.prototype.clearNationalPrefix=function(){this.clear$Field(12)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredExtnPrefix=function(){return this.get$Value(13)},i18n.phonenumbers.PhoneMetadata.prototype.getPreferredExtnPrefixOrDefault=function(){return this.get$ValueOrDefault(13)},i18n.phonenumbers.PhoneMetadata.prototype.setPreferredExtnPrefix=function(o){this.set$Value(13,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasPreferredExtnPrefix=function(){return this.has$Value(13)},i18n.phonenumbers.PhoneMetadata.prototype.preferredExtnPrefixCount=function(){return this.count$Values(13)},i18n.phonenumbers.PhoneMetadata.prototype.clearPreferredExtnPrefix=function(){this.clear$Field(13)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixForParsing=function(){return this.get$Value(15)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixForParsingOrDefault=function(){return this.get$ValueOrDefault(15)},i18n.phonenumbers.PhoneMetadata.prototype.setNationalPrefixForParsing=function(o){this.set$Value(15,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasNationalPrefixForParsing=function(){return this.has$Value(15)},i18n.phonenumbers.PhoneMetadata.prototype.nationalPrefixForParsingCount=function(){return this.count$Values(15)},i18n.phonenumbers.PhoneMetadata.prototype.clearNationalPrefixForParsing=function(){this.clear$Field(15)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixTransformRule=function(){return this.get$Value(16)},i18n.phonenumbers.PhoneMetadata.prototype.getNationalPrefixTransformRuleOrDefault=function(){return this.get$ValueOrDefault(16)},i18n.phonenumbers.PhoneMetadata.prototype.setNationalPrefixTransformRule=function(o){this.set$Value(16,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasNationalPrefixTransformRule=function(){return this.has$Value(16)},i18n.phonenumbers.PhoneMetadata.prototype.nationalPrefixTransformRuleCount=function(){return this.count$Values(16)},i18n.phonenumbers.PhoneMetadata.prototype.clearNationalPrefixTransformRule=function(){this.clear$Field(16)},i18n.phonenumbers.PhoneMetadata.prototype.getSameMobileAndFixedLinePattern=function(){return this.get$Value(18)},i18n.phonenumbers.PhoneMetadata.prototype.getSameMobileAndFixedLinePatternOrDefault=function(){return this.get$ValueOrDefault(18)},i18n.phonenumbers.PhoneMetadata.prototype.setSameMobileAndFixedLinePattern=function(o){this.set$Value(18,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasSameMobileAndFixedLinePattern=function(){return this.has$Value(18)},i18n.phonenumbers.PhoneMetadata.prototype.sameMobileAndFixedLinePatternCount=function(){return this.count$Values(18)},i18n.phonenumbers.PhoneMetadata.prototype.clearSameMobileAndFixedLinePattern=function(){this.clear$Field(18)},i18n.phonenumbers.PhoneMetadata.prototype.getNumberFormat=function(o){return this.get$Value(19,o)},i18n.phonenumbers.PhoneMetadata.prototype.getNumberFormatOrDefault=function(o){return this.get$ValueOrDefault(19,o)},i18n.phonenumbers.PhoneMetadata.prototype.addNumberFormat=function(o){this.add$Value(19,o)},i18n.phonenumbers.PhoneMetadata.prototype.numberFormatArray=function(){return this.array$Values(19)},i18n.phonenumbers.PhoneMetadata.prototype.hasNumberFormat=function(){return this.has$Value(19)},i18n.phonenumbers.PhoneMetadata.prototype.numberFormatCount=function(){return this.count$Values(19)},i18n.phonenumbers.PhoneMetadata.prototype.clearNumberFormat=function(){this.clear$Field(19)},i18n.phonenumbers.PhoneMetadata.prototype.getIntlNumberFormat=function(o){return this.get$Value(20,o)},i18n.phonenumbers.PhoneMetadata.prototype.getIntlNumberFormatOrDefault=function(o){return this.get$ValueOrDefault(20,o)},i18n.phonenumbers.PhoneMetadata.prototype.addIntlNumberFormat=function(o){this.add$Value(20,o)},i18n.phonenumbers.PhoneMetadata.prototype.intlNumberFormatArray=function(){return this.array$Values(20)},i18n.phonenumbers.PhoneMetadata.prototype.hasIntlNumberFormat=function(){return this.has$Value(20)},i18n.phonenumbers.PhoneMetadata.prototype.intlNumberFormatCount=function(){return this.count$Values(20)},i18n.phonenumbers.PhoneMetadata.prototype.clearIntlNumberFormat=function(){this.clear$Field(20)},i18n.phonenumbers.PhoneMetadata.prototype.getMainCountryForCode=function(){return this.get$Value(22)},i18n.phonenumbers.PhoneMetadata.prototype.getMainCountryForCodeOrDefault=function(){return this.get$ValueOrDefault(22)},i18n.phonenumbers.PhoneMetadata.prototype.setMainCountryForCode=function(o){this.set$Value(22,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasMainCountryForCode=function(){return this.has$Value(22)},i18n.phonenumbers.PhoneMetadata.prototype.mainCountryForCodeCount=function(){return this.count$Values(22)},i18n.phonenumbers.PhoneMetadata.prototype.clearMainCountryForCode=function(){this.clear$Field(22)},i18n.phonenumbers.PhoneMetadata.prototype.getLeadingDigits=function(){return this.get$Value(23)},i18n.phonenumbers.PhoneMetadata.prototype.getLeadingDigitsOrDefault=function(){return this.get$ValueOrDefault(23)},i18n.phonenumbers.PhoneMetadata.prototype.setLeadingDigits=function(o){this.set$Value(23,o)},i18n.phonenumbers.PhoneMetadata.prototype.hasLeadingDigits=function(){return this.has$Value(23)},i18n.phonenumbers.PhoneMetadata.prototype.leadingDigitsCount=function(){return this.count$Values(23)},i18n.phonenumbers.PhoneMetadata.prototype.clearLeadingDigits=function(){this.clear$Field(23)},i18n.phonenumbers.PhoneMetadataCollection=function(){goog.proto2.Message.call(this)},goog.inherits(i18n.phonenumbers.PhoneMetadataCollection,goog.proto2.Message),i18n.phonenumbers.PhoneMetadataCollection.descriptor_=null,i18n.phonenumbers.PhoneMetadataCollection.prototype.getMetadata=function(o){return this.get$Value(1,o)},i18n.phonenumbers.PhoneMetadataCollection.prototype.getMetadataOrDefault=function(o){return this.get$ValueOrDefault(1,o)},i18n.phonenumbers.PhoneMetadataCollection.prototype.addMetadata=function(o){this.add$Value(1,o)},i18n.phonenumbers.PhoneMetadataCollection.prototype.metadataArray=function(){return this.array$Values(1)},i18n.phonenumbers.PhoneMetadataCollection.prototype.hasMetadata=function(){return this.has$Value(1)},i18n.phonenumbers.PhoneMetadataCollection.prototype.metadataCount=function(){return this.count$Values(1)},i18n.phonenumbers.PhoneMetadataCollection.prototype.clearMetadata=function(){this.clear$Field(1)},i18n.phonenumbers.NumberFormat.prototype.getDescriptor=function(){var o=i18n.phonenumbers.NumberFormat.descriptor_;return o||(i18n.phonenumbers.NumberFormat.descriptor_=o=goog.proto2.Message.createDescriptor(i18n.phonenumbers.NumberFormat,{0:{name:"NumberFormat",fullName:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},2:{name:"format",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},3:{name:"leading_digits_pattern",repeated:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},4:{name:"national_prefix_formatting_rule",fieldType:goog.proto2.Message.FieldType.STRING,type:String},6:{name:"national_prefix_optional_when_formatting",fieldType:goog.proto2.Message.FieldType.BOOL,defaultValue:!1,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",fieldType:goog.proto2.Message.FieldType.STRING,type:String}})),o},i18n.phonenumbers.NumberFormat.getDescriptor=i18n.phonenumbers.NumberFormat.prototype.getDescriptor,i18n.phonenumbers.PhoneNumberDesc.prototype.getDescriptor=function(){var o=i18n.phonenumbers.PhoneNumberDesc.descriptor_;return o||(i18n.phonenumbers.PhoneNumberDesc.descriptor_=o=goog.proto2.Message.createDescriptor(i18n.phonenumbers.PhoneNumberDesc,{0:{name:"PhoneNumberDesc",fullName:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",fieldType:goog.proto2.Message.FieldType.STRING,type:String},9:{name:"possible_length",repeated:!0,fieldType:goog.proto2.Message.FieldType.INT32,type:Number},10:{name:"possible_length_local_only",repeated:!0,fieldType:goog.proto2.Message.FieldType.INT32,type:Number},6:{name:"example_number",fieldType:goog.proto2.Message.FieldType.STRING,type:String}})),o},i18n.phonenumbers.PhoneNumberDesc.getDescriptor=i18n.phonenumbers.PhoneNumberDesc.prototype.getDescriptor,i18n.phonenumbers.PhoneMetadata.prototype.getDescriptor=function(){var o=i18n.phonenumbers.PhoneMetadata.descriptor_;return o||(i18n.phonenumbers.PhoneMetadata.descriptor_=o=goog.proto2.Message.createDescriptor(i18n.phonenumbers.PhoneMetadata,{0:{name:"PhoneMetadata",fullName:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},2:{name:"fixed_line",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},3:{name:"mobile",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},4:{name:"toll_free",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},5:{name:"premium_rate",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},6:{name:"shared_cost",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},7:{name:"personal_number",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},8:{name:"voip",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},21:{name:"pager",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},25:{name:"uan",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},27:{name:"emergency",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},28:{name:"voicemail",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},29:{name:"short_code",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},30:{name:"standard_rate",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},31:{name:"carrier_specific",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},33:{name:"sms_services",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},24:{name:"no_international_dialling",fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneNumberDesc},9:{name:"id",required:!0,fieldType:goog.proto2.Message.FieldType.STRING,type:String},10:{name:"country_code",fieldType:goog.proto2.Message.FieldType.INT32,type:Number},11:{name:"international_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},17:{name:"preferred_international_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},12:{name:"national_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},13:{name:"preferred_extn_prefix",fieldType:goog.proto2.Message.FieldType.STRING,type:String},15:{name:"national_prefix_for_parsing",fieldType:goog.proto2.Message.FieldType.STRING,type:String},16:{name:"national_prefix_transform_rule",fieldType:goog.proto2.Message.FieldType.STRING,type:String},18:{name:"same_mobile_and_fixed_line_pattern",fieldType:goog.proto2.Message.FieldType.BOOL,defaultValue:!1,type:Boolean},19:{name:"number_format",repeated:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.NumberFormat},20:{name:"intl_number_format",repeated:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.NumberFormat},22:{name:"main_country_for_code",fieldType:goog.proto2.Message.FieldType.BOOL,defaultValue:!1,type:Boolean},23:{name:"leading_digits",fieldType:goog.proto2.Message.FieldType.STRING,type:String}})),o},i18n.phonenumbers.PhoneMetadata.getDescriptor=i18n.phonenumbers.PhoneMetadata.prototype.getDescriptor,i18n.phonenumbers.PhoneMetadataCollection.prototype.getDescriptor=function(){var o=i18n.phonenumbers.PhoneMetadataCollection.descriptor_;return o||(i18n.phonenumbers.PhoneMetadataCollection.descriptor_=o=goog.proto2.Message.createDescriptor(i18n.phonenumbers.PhoneMetadataCollection,{0:{name:"PhoneMetadataCollection",fullName:"i18n.phonenumbers.PhoneMetadataCollection"},1:{name:"metadata",repeated:!0,fieldType:goog.proto2.Message.FieldType.MESSAGE,type:i18n.phonenumbers.PhoneMetadata}})),o},i18n.phonenumbers.PhoneMetadataCollection.getDescriptor=i18n.phonenumbers.PhoneMetadataCollection.prototype.getDescriptor,i18n.phonenumbers.PhoneNumber=function(){goog.proto2.Message.call(this)},goog.inherits(i18n.phonenumbers.PhoneNumber,goog.proto2.Message),i18n.phonenumbers.PhoneNumber.descriptor_=null,i18n.phonenumbers.PhoneNumber.prototype.getCountryCode=function(){return this.get$Value(1)},i18n.phonenumbers.PhoneNumber.prototype.getCountryCodeOrDefault=function(){return this.get$ValueOrDefault(1)},i18n.phonenumbers.PhoneNumber.prototype.setCountryCode=function(o){this.set$Value(1,o)},i18n.phonenumbers.PhoneNumber.prototype.hasCountryCode=function(){return this.has$Value(1)},i18n.phonenumbers.PhoneNumber.prototype.countryCodeCount=function(){return this.count$Values(1)},i18n.phonenumbers.PhoneNumber.prototype.clearCountryCode=function(){this.clear$Field(1)},i18n.phonenumbers.PhoneNumber.prototype.getNationalNumber=function(){return this.get$Value(2)},i18n.phonenumbers.PhoneNumber.prototype.getNationalNumberOrDefault=function(){return this.get$ValueOrDefault(2)},i18n.phonenumbers.PhoneNumber.prototype.setNationalNumber=function(o){this.set$Value(2,o)},i18n.phonenumbers.PhoneNumber.prototype.hasNationalNumber=function(){return this.has$Value(2)},i18n.phonenumbers.PhoneNumber.prototype.nationalNumberCount=function(){return this.count$Values(2)},i18n.phonenumbers.PhoneNumber.prototype.clearNationalNumber=function(){this.clear$Field(2)},i18n.phonenumbers.PhoneNumber.prototype.getExtension=function(){return this.get$Value(3)},i18n.phonenumbers.PhoneNumber.prototype.getExtensionOrDefault=function(){return this.get$ValueOrDefault(3)},i18n.phonenumbers.PhoneNumber.prototype.setExtension=function(o){this.set$Value(3,o)},i18n.phonenumbers.PhoneNumber.prototype.hasExtension=function(){return this.has$Value(3)},i18n.phonenumbers.PhoneNumber.prototype.extensionCount=function(){return this.count$Values(3)},i18n.phonenumbers.PhoneNumber.prototype.clearExtension=function(){this.clear$Field(3)},i18n.phonenumbers.PhoneNumber.prototype.getItalianLeadingZero=function(){return this.get$Value(4)},i18n.phonenumbers.PhoneNumber.prototype.getItalianLeadingZeroOrDefault=function(){return this.get$ValueOrDefault(4)},i18n.phonenumbers.PhoneNumber.prototype.setItalianLeadingZero=function(o){this.set$Value(4,o)},i18n.phonenumbers.PhoneNumber.prototype.hasItalianLeadingZero=function(){return this.has$Value(4)},i18n.phonenumbers.PhoneNumber.prototype.italianLeadingZeroCount=function(){return this.count$Values(4)},i18n.phonenumbers.PhoneNumber.prototype.clearItalianLeadingZero=function(){this.clear$Field(4)},i18n.phonenumbers.PhoneNumber.prototype.getNumberOfLeadingZeros=function(){return this.get$Value(8)},i18n.phonenumbers.PhoneNumber.prototype.getNumberOfLeadingZerosOrDefault=function(){return this.get$ValueOrDefault(8)},i18n.phonenumbers.PhoneNumber.prototype.setNumberOfLeadingZeros=function(o){this.set$Value(8,o)},i18n.phonenumbers.PhoneNumber.prototype.hasNumberOfLeadingZeros=function(){return this.has$Value(8)},i18n.phonenumbers.PhoneNumber.prototype.numberOfLeadingZerosCount=function(){return this.count$Values(8)},i18n.phonenumbers.PhoneNumber.prototype.clearNumberOfLeadingZeros=function(){this.clear$Field(8)},i18n.phonenumbers.PhoneNumber.prototype.getRawInput=function(){return this.get$Value(5)},i18n.phonenumbers.PhoneNumber.prototype.getRawInputOrDefault=function(){return this.get$ValueOrDefault(5)},i18n.phonenumbers.PhoneNumber.prototype.setRawInput=function(o){this.set$Value(5,o)},i18n.phonenumbers.PhoneNumber.prototype.hasRawInput=function(){return this.has$Value(5)},i18n.phonenumbers.PhoneNumber.prototype.rawInputCount=function(){return this.count$Values(5)},i18n.phonenumbers.PhoneNumber.prototype.clearRawInput=function(){this.clear$Field(5)},i18n.phonenumbers.PhoneNumber.prototype.getCountryCodeSource=function(){return this.get$Value(6)},i18n.phonenumbers.PhoneNumber.prototype.getCountryCodeSourceOrDefault=function(){return this.get$ValueOrDefault(6)},i18n.phonenumbers.PhoneNumber.prototype.setCountryCodeSource=function(o){this.set$Value(6,o)},i18n.phonenumbers.PhoneNumber.prototype.hasCountryCodeSource=function(){return this.has$Value(6)},i18n.phonenumbers.PhoneNumber.prototype.countryCodeSourceCount=function(){return this.count$Values(6)},i18n.phonenumbers.PhoneNumber.prototype.clearCountryCodeSource=function(){this.clear$Field(6)},i18n.phonenumbers.PhoneNumber.prototype.getPreferredDomesticCarrierCode=function(){return this.get$Value(7)},i18n.phonenumbers.PhoneNumber.prototype.getPreferredDomesticCarrierCodeOrDefault=function(){return this.get$ValueOrDefault(7)},i18n.phonenumbers.PhoneNumber.prototype.setPreferredDomesticCarrierCode=function(o){this.set$Value(7,o)},i18n.phonenumbers.PhoneNumber.prototype.hasPreferredDomesticCarrierCode=function(){return this.has$Value(7)},i18n.phonenumbers.PhoneNumber.prototype.preferredDomesticCarrierCodeCount=function(){return this.count$Values(7)},i18n.phonenumbers.PhoneNumber.prototype.clearPreferredDomesticCarrierCode=function(){this.clear$Field(7)},i18n.phonenumbers.PhoneNumber.CountryCodeSource={UNSPECIFIED:0,FROM_NUMBER_WITH_PLUS_SIGN:1,FROM_NUMBER_WITH_IDD:5,FROM_NUMBER_WITHOUT_PLUS_SIGN:10,FROM_DEFAULT_COUNTRY:20},i18n.phonenumbers.PhoneNumber.prototype.getDescriptor=function(){var o=i18n.phonenumbers.PhoneNumber.descriptor_;return o||(i18n.phonenumbers.PhoneNumber.descriptor_=o=goog.proto2.Message.createDescriptor(i18n.phonenumbers.PhoneNumber,{0:{name:"PhoneNumber",fullName:"i18n.phonenumbers.PhoneNumber"},1:{name:"country_code",required:!0,fieldType:goog.proto2.Message.FieldType.INT32,type:Number},2:{name:"national_number",required:!0,fieldType:goog.proto2.Message.FieldType.UINT64,type:Number},3:{name:"extension",fieldType:goog.proto2.Message.FieldType.STRING,type:String},4:{name:"italian_leading_zero",fieldType:goog.proto2.Message.FieldType.BOOL,type:Boolean},8:{name:"number_of_leading_zeros",fieldType:goog.proto2.Message.FieldType.INT32,defaultValue:1,type:Number},5:{name:"raw_input",fieldType:goog.proto2.Message.FieldType.STRING,type:String},6:{name:"country_code_source",fieldType:goog.proto2.Message.FieldType.ENUM,defaultValue:i18n.phonenumbers.PhoneNumber.CountryCodeSource.UNSPECIFIED,type:i18n.phonenumbers.PhoneNumber.CountryCodeSource},7:{name:"preferred_domestic_carrier_code",fieldType:goog.proto2.Message.FieldType.STRING,type:String}})),o},i18n.phonenumbers.PhoneNumber.ctor=i18n.phonenumbers.PhoneNumber,i18n.phonenumbers.PhoneNumber.ctor.getDescriptor=i18n.phonenumbers.PhoneNumber.prototype.getDescriptor,i18n.phonenumbers.metadata={},i18n.phonenumbers.metadata.countryCodeToRegionCodeMap={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" "),7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},i18n.phonenumbers.metadata.countryToMetadata={AC:[,[,,"(?:[01589]\\d|[46])\\d{4}",,,,,,,[5,6]],[,,"6[2-467]\\d{3}",,,,"62889",,,[5]],[,,"4\\d{4}",,,,"40123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AC",247,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:0[1-9]|[1589]\\d)\\d{4}",,,,"542011",,,[6]],,,[,,,,,,,,,[-1]]],AD:[,[,,"(?:1|6\\d)\\d{7}|[135-9]\\d{5}",,,,,,,[6,8,9]],[,,"[78]\\d{5}",,,,"712345",,,[6]],[,,"690\\d{6}|[356]\\d{5}",,,,"312345",,,[6,9]],[,,"180[02]\\d{4}",,,,"18001234",,,[8]],[,,"[19]\\d{5}",,,,"912345",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AD",376,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],[,"(\\d{4})(\\d{4})","$1 $2",["1"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,"1800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AE:[,[,,"(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"[2-4679][2-8]\\d{6}",,,,"22345678",,,[8],[7]],[,,"5[024-68]\\d{7}",,,,"501234567",,,[9]],[,,"400\\d{6}|800\\d{2,9}",,,,"800123456"],[,,"900[02]\\d{5}",,,,"900234567",,,[9]],[,,"700[05]\\d{5}",,,,"700012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AE",971,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],[,"(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"600[25]\\d{5}",,,,"600212345",,,[9]],,,[,,,,,,,,,[-1]]],AF:[,[,,"[2-7]\\d{8}",,,,,,,[9],[7]],[,,"(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}",,,,"234567890",,,,[7]],[,,"7\\d{8}",,,,"701234567",,,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AF",93,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AG:[,[,,"(?:268|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}",,,,"2684601234",,,,[7]],[,,"268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}",,,,"2684641234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"26848[01]\\d{4}",,,,"2684801234",,,,[7]],"AG",1,"011","1",,,"([457]\\d{6})$|1","268$1",,,,,[,,"26840[69]\\d{4}",,,,"2684061234",,,,[7]],,"268",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AI:[,[,,"(?:264|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"264(?:292|4(?:6[12]|9[78]))\\d{4}",,,,"2644612345",,,,[7]],[,,"264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}",,,,"2642351234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AI",1,"011","1",,,"([2457]\\d{6})$|1","264$1",,,,,[,,"264724\\d{4}",,,,"2647241234",,,,[7]],,"264",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AL:[,[,,"(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",,,,,,,[6,7,8,9],[5]],[,,"4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",,,,"22345678",,,[8],[5,6,7]],[,,"6(?:[78][2-9]|9\\d)\\d{6}",,,,"672123456",,,[9]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,"900[1-9]\\d\\d",,,,"900123",,,[6]],[,,"808[1-9]\\d\\d",,,,"808123",,,[6]],[,,"700[2-9]\\d{4}",,,,"70021234",,,[8]],[,,,,,,,,,[-1]],"AL",355,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AM:[,[,,"(?:[1-489]\\d|55|60|77)\\d{6}",,,,,,,[8],[5,6]],[,,"(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}",,,,"10123456",,,,[5,6]],[,,"(?:33|4[1349]|55|77|88|9[13-9])\\d{6}",,,,"77123456"],[,,"800\\d{5}",,,,"80012345"],[,,"90[016]\\d{5}",,,,"90012345"],[,,"80[1-4]\\d{5}",,,,"80112345"],[,,,,,,,,,[-1]],[,,"60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|9[0-2])\\d{4}",,,,"60271234"],"AM",374,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],[,"(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AO:[,[,,"[29]\\d{8}",,,,,,,[9]],[,,"2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}",,,,"222123456"],[,,"9[1-59]\\d{7}",,,,"923123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AO",244,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AR:[,[,,"(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",,,,,,,[10,11],[6,7,8]],[,,"3888[013-9]\\d{5}|3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:657|9(?:54|66))|3(?:7(?:55|77)|865))[2-8]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:284|3(?:02|23)|920)|3(?:4(?:46|8[27]|92)|541|878))[2-7]\\d{5}|(?:2(?:(?:26|62)2|320|477|9(?:42|83))|3(?:329|4(?:62|76|89)|564))[2-6]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[235][4-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|[17][2-6]|3[4-6]|[58][3-6])))\\d{6}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"1123456789",,,[10],[6,7,8]],[,,"93(?:7(?:1[15]|81)[46]|8(?:(?:21|4[16]|69|9[12])[46]|88[013-9]))\\d{5}|9(?:2(?:657|9(?:54|66))|3(?:7(?:55|77)|865))[2-8]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:284|3(?:02|23)|920)|3(?:4(?:46|8[27]|92)|541|878))[2-7]\\d{5}|9(?:2(?:(?:26|62)2|320|477|9(?:42|83))|3(?:329|4(?:62|76|89)|564))[2-6]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[235][4-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|[17][2-6]|3[4-6]|[58][3-6]))))\\d{6}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"91123456789",,,,[6,7,8]],[,,"800\\d{7,8}",,,,"8001234567"],[,,"60[04579]\\d{7}",,,,"6001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AR",54,"00","0",,,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",,,[[,"(\\d{3})","$1",["0|1(?:0[0-35-7]|1[02-5]|2[015]|3[47]|4[478])|911"]],[,"(\\d{2})(\\d{4})","$1-$2",["[1-9]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[1-8]"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1"],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1"]],[[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"]],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3-$4",["91"]],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3-$4",["9"]]],[,,,,,,,,,[-1]],,,[,,"810\\d{7}",,,,,,,[10]],[,,"810\\d{7}",,,,"8101234567",,,[10]],,,[,,,,,,,,,[-1]]],AS:[,[,,"(?:[58]\\d\\d|684|900)\\d{7}",,,,,,,[10],[7]],[,,"6846(?:22|33|44|55|77|88|9[19])\\d{4}",,,,"6846221234",,,,[7]],[,,"684(?:2(?:48|5[2468]|7[26])|7(?:3[13]|70|82))\\d{4}",,,,"6847331234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AS",1,"011","1",,,"([267]\\d{6})$|1","684$1",,,,,[,,,,,,,,,[-1]],,"684",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AT:[,[,,"1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",,,,,,,[4,5,6,7,8,9,10,11,12,13],[3]],[,,"1(?:11\\d|[2-9]\\d{3,11})|(?:316|463|(?:51|66|73)2)\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-8]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}",,,,"1234567890",,,,[3]],[,,"6(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}",,,,"664123456",,,[7,8,9,10,11,12,13]],[,,"800\\d{6,10}",,,,"800123456",,,[9,10,11,12,13]],[,,"(?:8[69][2-68]|9(?:0[01]|3[019]))\\d{6,10}",,,,"900123456",,,[9,10,11,12,13]],[,,"8(?:10|2[018])\\d{6,10}|828\\d{5}",,,,"810123456",,,[8,9,10,11,12,13]],[,,,,,,,,,[-1]],[,,"5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",,,,"780123456",,,[5,6,7,8,9,10,11,12,13]],"AT",43,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["14"]],[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{6})","$1",["[18]"]],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AU:[,[,,"1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",,,,,,,[5,6,7,8,9,10,12]],[,,"(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",,,,"212345678",,,[9],[8]],[,,"4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-26-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"AU",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"(183[12])|0",,"0011",,[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["13"]],[,"(\\d{3})(\\d{3})","$1 $2",["19"]],[,"(\\d{3})(\\d{4})","$1 $2",["180","1802"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["19"]],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["130"]]],[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[,,"163\\d{2,6}",,,,"1631234",,,[5,6,7,8,9]],1,,[,,"1(?:3(?:00\\d{5}|45[0-4])|802)\\d{3}|1[38]00\\d{6}|13\\d{4}",,,,,,,[6,7,8,10,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AW:[,[,,"(?:[25-79]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"5(?:2\\d|8[1-9])\\d{4}",,,,"5212345"],[,,"(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}",,,,"5601234"],[,,"800\\d{4}",,,,"8001234"],[,,"900\\d{4}",,,,"9001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:28\\d|501)\\d{4}",,,,"5011234"],"AW",297,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AX:[,[,,"2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"18[1-8]\\d{3,6}",,,,"181234567",,,[6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AX",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,,,[,,,,,,,,,[-1]],,"18",[,,,,,,,,,[-1]],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],AZ:[,[,,"365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",,,,,,,[9],[7]],[,,"(?:2[12]428|3655[02])\\d{4}|(?:2(?:22[0-79]|63[0-28])|3654)\\d{5}|(?:(?:1[28]|46)\\d|2(?:[014-6]2|[23]3))\\d{6}",,,,"123123456",,,,[7]],[,,"36554\\d{4}|(?:[16]0|4[04]|5[015]|7[07]|99)\\d{7}",,,,"401234567"],[,,"88\\d{7}",,,,"881234567"],[,,"900200\\d{3}",,,,"900200123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AZ",994,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[1-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BA:[,[,,"6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",,,,,,,[8,9],[6]],[,,"(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",,,,"30212345",,,[8],[6]],[,,"6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}",,,,"61123456"],[,,"8[08]\\d{6}",,,,"80123456",,,[8]],[,,"9[0246]\\d{6}",,,,"90123456",,,[8]],[,,"8[12]\\d{6}",,,,"82123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BA",387,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1-$2",["[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}",,,,"70341234",,,[8]],,,[,,,,,,,,,[-1]]],BB:[,[,,"(?:246|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"246521[0369]\\d{3}|246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",,,,"2464123456",,,,[7]],[,,"246(?:(?:2(?:[3568]\\d|4[0-57-9])|3(?:5[2-9]|6[0-6])|4(?:46|5\\d)|69[5-7]|8(?:[2-5]\\d|83))\\d|52(?:1[147]|20))\\d{3}",,,,"2462501234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"(?:246976|900[2-9]\\d\\d)\\d{4}",,,,"9002123456",,,,[7]],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"24631\\d{5}",,,,"2463101234",,,,[7]],"BB",1,"011","1",,,"([2-9]\\d{6})$|1","246$1",,,,,[,,,,,,,,,[-1]],,"246",[,,,,,,,,,[-1]],[,,"246(?:292|367|4(?:1[7-9]|3[01]|4[47-9]|67)|7(?:1[2-9]|2\\d|3[016]|53))\\d{4}",,,,"2464301234",,,,[7]],,,[,,,,,,,,,[-1]]],BD:[,[,,"[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",,,,,,,[6,7,8,9,10]],[,,"(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2(?:222|[45]\\d)\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}",,,,"27111234"],[,,"(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",,,,"1812345678",,,[10]],[,,"80[03]\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"96(?:0[469]|1[0-47]|3[389]|43|6[69]|7[78])\\d{6}",,,,"9604123456",,,[10]],"BD",880,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],[,"(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],[,"(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BE:[,[,,"4\\d{8}|[1-9]\\d{7}",,,,,,,[8,9]],[,,"80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",,,,"12345678",,,[8]],[,,"4[5-9]\\d{7}",,,,"470123456",,,[9]],[,,"800[1-9]\\d{4}",,,,"80012345",,,[8]],[,,"(?:70(?:2[0-57]|3[04-7]|44|6[4-69]|7[0579])|90\\d\\d)\\d{4}",,,,"90012345",,,[8]],[,,"7879\\d{4}",,,,"78791234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BE",32,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"78(?:0[57]|1[014-8]|2[25]|3[15-8]|48|[56]0|7[06-8]|9\\d)\\d{4}",,,,"78102345",,,[8]],,,[,,,,,,,,,[-1]]],BF:[,[,,"[025-7]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:49|5[23]|6[5-7]|9[016-9])|4(?:4[569]|5[4-6]|6[5-7]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}",,,,"20491234"],[,,"(?:0[1-35-7]|5[0-8]|[67]\\d)\\d{6}",,,,"70123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BF",226,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BG:[,[,,"00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",,,,,,,[6,7,8,9,12],[4,5]],[,,"2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",,,,"2123456",,,[6,7,8],[4,5]],[,,"(?:43[07-9]|99[69]\\d)\\d{5}|(?:8[7-9]|98)\\d{7}",,,,"43012345",,,[8,9]],[,,"(?:00800\\d\\d|800)\\d{5}",,,,"80012345",,,[8,12]],[,,"90\\d{6}",,,,"90123456",,,[8]],[,,"700\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BG",359,"00","0",,,"0",,,,[[,"(\\d{6})","$1",["1"]],[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BH:[,[,,"[136-9]\\d{7}",,,,,,,[8]],[,,"(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|55|7[7-9]|88)|9[69][69])|7(?:[07]\\d\\d|1(?:11|78)))\\d{4}",,,,"17001234"],[,,"(?:3(?:[0-79]\\d|8[0-57-9])\\d|6(?:3(?:00|33|6[16])|441|6(?:3[03-9]|[69]\\d|7[0-689])))\\d{4}",,,,"36001234"],[,,"8[02369]\\d{6}",,,,"80123456"],[,,"(?:87|9[0-8])\\d{6}",,,,"90123456"],[,,"84\\d{6}",,,,"84123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BH",973,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BI:[,[,,"(?:[267]\\d|31)\\d{6}",,,,,,,[8]],[,,"(?:22|31)\\d{6}",,,,"22201234"],[,,"(?:29|[67][125-9])\\d{6}",,,,"79561234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BI",257,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BJ:[,[,,"[24-689]\\d{7}",,,,,,,[8]],[,,"2(?:02|1[037]|2[45]|3[68]|4\\d)\\d{5}",,,,"20211234"],[,,"(?:4[0-6]|[56]\\d|9[013-9])\\d{6}",,,,"90011234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"857[58]\\d{4}",,,,"85751234"],"BJ",229,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"81\\d{6}",,,,"81123456"],,,[,,,,,,,,,[-1]]],BL:[,[,,"590\\d{6}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:395|76[018])\\d|475[0-5])\\d{4}",,,,"976012345"],"BL",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BM:[,[,,"(?:441|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}",,,,"4414123456",,,,[7]],[,,"441(?:[2378]\\d|5[0-39]|92)\\d{5}",,,,"4413701234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BM",1,"011","1",,,"([2-9]\\d{6})$|1","441$1",,,,,[,,,,,,,,,[-1]],,"441",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BN:[,[,,"[2-578]\\d{6}",,,,,,,[7]],[,,"22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}",,,,"2345678"],[,,"(?:22[89]|[78]\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[34]\\d{5}",,,,"5345678"],"BN",673,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BO:[,[,,"(?:[2-467]\\d\\d|8001)\\d{5}",,,,,,,[8,9],[7]],[,,"(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",,,,"22123456",,,[8],[7]],[,,"[67]\\d{7}",,,,"71234567",,,[8]],[,,"8001[07]\\d{4}",,,,"800171234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BO",591,"00(?:1\\d)?","0",,,"0(1\\d)?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[23]|4[46]"],,"0$CC $1"],[,"(\\d{8})","$1",["[67]"],,"0$CC $1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"],,"0$CC $1"]],,[,,,,,,,,,[-1]],,,[,,"8001[07]\\d{4}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BQ:[,[,,"(?:[34]1|7\\d)\\d{5}",,,,,,,[7]],[,,"(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}",,,,"7151234"],[,,"(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}",,,,"3181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BQ",599,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"[347]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BR:[,[,,"(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",,,,,,,[8,9,10,11]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",,,,"1123456789",,,[10],[8]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",,,,"11961234567",,,[10,11],[8,9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"300\\d{6}|[59]00\\d{6,7}",,,,"300123456",,,[9,10]],[,,"(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|370))\\d{4}|300\\d{5}",,,,"40041234",,,[8,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BR",55,"00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","0",,,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",,,[[,"(\\d{3,6})","$1",["1(?:1[25-8]|2[357-9]|3[02-68]|4[12568]|5|6[0-8]|8[015]|9[0-47-9])|321|610"]],[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{4})(\\d{4})","$1-$2",["[2-57]","[2357]|4(?:[0-24-9]|3(?:[0-689]|7[1-9]))"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{5})(\\d{4})","$1-$2",["9"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[,,,,,,,,,[-1]],,,[,,"30(?:0\\d{5,7}|3\\d{7})|40(?:0\\d|20)\\d{4}|800\\d{6,7}",,,,,,,[8,9,10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BS:[,[,,"(?:242|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-5]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",,,,"2423456789",,,,[7]],[,,"242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|[89]9))\\d{4}",,,,"2423591234",,,,[7]],[,,"242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,,[7]],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BS",1,"011","1",,,"([3-8]\\d{6})$|1","242$1",,,,,[,,,,,,,,,[-1]],,"242",[,,,,,,,,,[-1]],[,,"242225\\d{4}",,,,"2422250123"],,,[,,,,,,,,,[-1]]],BT:[,[,,"[17]\\d{7}|[2-8]\\d{6}",,,,,,,[7,8],[6]],[,,"(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",,,,"2345678",,,[7],[6]],[,,"(?:1[67]|77)\\d{6}",,,,"17123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BT",975,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BW:[,[,,"(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013]|81)|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}",,,,"2401234",,,[7]],[,,"(?:321|7[1-8]\\d)\\d{5}",,,,"71123456",,,[8]],[,,"(?:0800|800\\d)\\d{6}",,,,"0800012345",,,[10]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"79(?:1(?:[01]\\d|2[0-8])|2[0-7]\\d)\\d{3}",,,,"79101234",,,[8]],"BW",267,"00",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["90"]],[,"(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BY:[,[,,"(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",,,,"152450911",,,[9],[5,6,7]],[,,"(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",,,,"294911911",,,[9]],[,,"800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}",,,,"8011234567"],[,,"(?:810|902)\\d{7}",,,,"9021234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"249\\d{6}",,,,"249123456",,,[9]],"BY",375,"810","8",,,"0|80?",,"8~10",,[[,"(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],[,"(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],[,"(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,"800\\d{3,7}|(?:8(?:0[13]|10|20\\d)|902)\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BZ:[,[,,"(?:0800\\d|[2-8])\\d{6}",,,,,,,[7,11]],[,,"(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",,,,"2221234",,,[7]],[,,"6[0-35-7]\\d{5}",,,,"6221234",,,[7]],[,,"0800\\d{7}",,,,"08001234123",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BZ",501,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CA:[,[,,"(?:[2-8]\\d|90)\\d{8}|3\\d{6}",,,,,,,[7,10]],[,,"(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,[10],[7]],[,,"(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,[10],[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,[10]],[,,"900[2-9]\\d{6}",,,,"9002123456",,,[10]],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",,,,"5002345678",,,[10]],[,,"600[2-9]\\d{6}",,,,"6002012345",,,[10]],"CA",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"310\\d{4}",,,,"3101234",,,[7]],,,[,,,,,,,,,[-1]]],CC:[,[,,"1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10,12]],[,,"8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",,,,"891621234",,,[9],[8]],[,,"4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-26-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CC",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"([59]\\d{7})$|0","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CD:[,[,,"[189]\\d{8}|[1-68]\\d{6}",,,,,,,[7,9]],[,,"12\\d{7}|[1-6]\\d{6}",,,,"1234567"],[,,"88\\d{5}|(?:8[0-59]|9[017-9])\\d{7}",,,,"991234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CD",243,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CF:[,[,,"(?:[27]\\d{3}|8776)\\d{4}",,,,,,,[8]],[,,"2[12]\\d{6}",,,,"21612345"],[,,"7[024-7]\\d{6}",,,,"70012345"],[,,,,,,,,,[-1]],[,,"8776\\d{4}",,,,"87761234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CF",236,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CG:[,[,,"222\\d{6}|(?:0\\d|80)\\d{7}",,,,,,,[9]],[,,"222[1-589]\\d{5}",,,,"222123456"],[,,"026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}",,,,"061234567"],[,,,,,,,,,[-1]],[,,"80[0-2]\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CG",242,"00",,,,,,,,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CH:[,[,,"8\\d{11}|[2-9]\\d{8}",,,,,,,[9,12]],[,,"(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}",,,,"212345678",,,[9]],[,,"7[35-9]\\d{7}",,,,"781234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[016]\\d{6}",,,,"900123456",,,[9]],[,,"84[0248]\\d{6}",,,,"840123456",,,[9]],[,,"878\\d{6}",,,,"878123456",,,[9]],[,,,,,,,,,[-1]],"CH",41,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],,[,,"74[0248]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"5[18]\\d{7}",,,,"581234567",,,[9]],,,[,,"860\\d{9}",,,,"860123456789",,,[12]]],CI:[,[,,"[02]\\d{9}",,,,,,,[10]],[,,"2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|2[245]|3[45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}",,,,"2123456789"],[,,"0[157]\\d{8}",,,,"0123456789"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CI",225,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CK:[,[,,"[2-578]\\d{4}",,,,,,,[5]],[,,"(?:2\\d|3[13-7]|4[1-5])\\d{3}",,,,"21234"],[,,"[578]\\d{4}",,,,"71234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CK",682,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CL:[,[,,"12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",,,,,,,[9,10,11]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-3])|600)|646[59])|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-3])|600)|646[59])|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"(?:123|8)00\\d{6}",,,,"800123456",,,[9,11]],[,,,,,,,,,[-1]],[,,"600\\d{7,8}",,,,"6001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,"44\\d{7}",,,,"441234567",,,[9]],"CL",56,"(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0",,,,,,,1,[[,"(\\d{4})","$1",["1(?:[03-589]|21)|[29]0|78"]],[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[,,,,,,,,,[-1]],,,[,,"600\\d{7,8}",,,,,,,[10,11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CM:[,[,,"[26]\\d{8}|88\\d{6,7}",,,,,,,[8,9]],[,,"2(?:22|33)\\d{6}",,,,"222123456",,,[9]],[,,"(?:24[23]|6[25-9]\\d)\\d{6}",,,,"671234567",,,[9]],[,,"88\\d{6,7}",,,,"88012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CM",237,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CN:[,[,,"1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",,,,,,,[7,8,9,10,11,12],[5,6]],[,,"(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|21(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))\\d{5}|(?:43[35]|754)\\d{7,8}|8(?:078\\d{7}|51\\d{7,8})|(?:10|(?:2|85)1|43[35]|754)(?:100\\d\\d|95\\d{3,4})|(?:2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[1-9]\\d{6})|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[1-9]\\d{5})|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",,,,"1012345678",,,[7,8,9,10,11],[5,6]],[,,"1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|[59][0-35-9]|6[25-7]|7[0-35-8])\\d{8}",,,,"13123456789",,,[11]],[,,"(?:(?:10|21)8|8)00\\d{7}",,,,"8001234567",,,[10,12]],[,,"16[08]\\d{5}",,,,"16812345",,,[8]],[,,"10(?:10\\d{4}|96\\d{3,4})|400\\d{7}|950\\d{7,8}|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",,,,"4001234567",,,[7,8,9,10,11],[5,6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CN",86,"00|1(?:[12]\\d|79)\\d\\d00","0",,,"(1(?:[12]\\d|79)\\d\\d)|0",,"00",,[[,"(\\d{5,6})","$1",["10|96"]],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","1(?:0(?:[0-8]|9[0-47-9])|[1-9])|2(?:[0-57-9](?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])|6)|[3-9]"]],[,"(\\d{4})(\\d{4})","$1 $2",["16[08]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]","1(?:0(?:[02-8]|1[1-9]|9[0-47-9])|[1-9])|2(?:[0-57-9](?:[0-8]|9[0-47-9])|6)|[3-9]","1(?:0(?:[02-8]|1[1-9]|9[0-47-9])|[1-9])|26|3(?:[0268]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|8[1-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23][0-8])|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:33|85[23]9)[0-46-9]|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[0-8]|9[0-47-9])","1(?:0[02-8]|[1-9])|2(?:[0-57-9][0-8]|6)|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23](?:[02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:10|2[0-57-9])9[0-47-9]|(?:101|58|85[23]10)[1-9]|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"(?:(?:10|21)8|[48])00\\d{7}|950\\d{7,8}",,,,,,,[10,11,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CO:[,[,,"(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",,,,,,,[10,11],[7]],[,,"601055(?:[0-4]\\d|50)\\d\\d|6010(?:[0-4]\\d|5[0-4])\\d{4}|60(?:[124-7][2-9]|8[1-9])\\d{6}",,,,"6012345678",,,[10],[7]],[,,"333301[0-5]\\d{3}|3333(?:00|2[5-9]|[3-9]\\d)\\d{4}|(?:3(?:24[1-9]|3(?:00|3[0-24-9]))|9101)\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}",,,,"3211234567",,,[10]],[,,"1800\\d{7}",,,,"18001234567",,,[11]],[,,"19(?:0[01]|4[78])\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CO",57,"00(?:4(?:[14]4|56)|[579])","0",,,"0([3579]|4(?:[14]4|56))?",,,,[[,"(\\d{3})(\\d{7})","$1 $2",["6"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1"]],[[,"(\\d{3})(\\d{7})","$1 $2",["6"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CR:[,[,,"(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",,,,,,,[8,10]],[,,"210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",,,,"22123456",,,[8]],[,,"(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",,,,"83123456",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"90[059]\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210[0-6]|4\\d{3}|5100)\\d{4}",,,,"40001234",,,[8]],"CR",506,"00",,,,"(19(?:0[0-2468]|1[09]|20|66|77|99))",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CU:[,[,,"[27]\\d{6,7}|[34]\\d{5,7}|63\\d{6}|(?:5|8\\d\\d)\\d{7}",,,,,,,[6,7,8,10],[4,5]],[,,"(?:3[23]|4[89])\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}",,,,"71234567",,,,[4,5]],[,,"(?:5\\d|63)\\d{6}",,,,"51234567",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,"807\\d{7}",,,,"8071234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CU",53,"119","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],[,"(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],[,"(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CV:[,[,,"(?:[2-59]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}",,,,"2211234"],[,,"(?:36|5[1-389]|9\\d)\\d{5}",,,,"9911234"],[,,"800\\d{4}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[3-5]|4[356])\\d{5}",,,,"3401234"],"CV",238,"0",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CW:[,[,,"(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",,,,,,,[7,8]],[,,"9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}",,,,"94351234"],[,,"953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}",,,,"95181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"60[0-2]\\d{4}",,,,"6001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CW",599,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[3467]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],,[,,"955\\d{5}",,,,"95581234",,,[8]],1,"[69]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CX:[,[,,"1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10,12]],[,,"8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",,,,"891641234",,,[9],[8]],[,,"4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-26-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CX",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"([59]\\d{7})$|0","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CY:[,[,,"(?:[279]\\d|[58]0)\\d{6}",,,,,,,[8]],[,,"2[2-6]\\d{6}",,,,"22345678"],[,,"9(?:10|[4-79]\\d)\\d{5}",,,,"96123456"],[,,"800\\d{5}",,,,"80001234"],[,,"90[09]\\d{5}",,,,"90012345"],[,,"80[1-9]\\d{5}",,,,"80112345"],[,,"700\\d{5}",,,,"70012345"],[,,,,,,,,,[-1]],"CY",357,"00",,,,,,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:50|77)\\d{6}",,,,"77123456"],,,[,,,,,,,,,[-1]]],CZ:[,[,,"(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",,,,,,,[9,10,11,12]],[,,"(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}",,,,"212345678",,,[9]],[,,"(?:60[1-8]|7(?:0[2-5]|[2379]\\d))\\d{6}",,,,"601123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:0[05689]|76)\\d{6}",,,,"900123456",,,[9]],[,,"8[134]\\d{7}",,,,"811234567",,,[9]],[,,"70[01]\\d{6}",,,,"700123456",,,[9]],[,,"9[17]0\\d{6}",,,,"910123456",,,[9]],"CZ",420,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"9(?:5\\d|7[2-4])\\d{6}",,,,"972123456",,,[9]],,,[,,"9(?:3\\d{9}|6\\d{7,10})",,,,"93123456789"]],DE:[,[,,"[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",,,,,,,[4,5,6,7,8,9,10,11,12,13,14,15],[2,3]],[,,"32\\d{9,11}|49[1-6]\\d{10}|322\\d{6}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",,,,"30123456",,,[5,6,7,8,9,10,11,12,13,14,15],[2,3,4]],[,,"15(?:[0-25-9]\\d\\d|310)\\d{6}|1(?:6[023]|7\\d)\\d{7,8}",,,,"15123456789",,,[10,11]],[,,"800\\d{7,12}",,,,"8001234567890",,,[10,11,12,13,14,15]],[,,"(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",,,,"9001234567",,,[10,11]],[,,"180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",,,,"18012345",,,[7,8,9,10,11,12,13,14]],[,,"700\\d{8}",,,,"70012345678",,,[11]],[,,,,,,,,,[-1]],"DE",49,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],[,"(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],[,"(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],[,"(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],[,"(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],[,"(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],[,"(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],,[,,"16(?:4\\d{1,10}|[89]\\d{1,11})",,,,"16412345",,,[4,5,6,7,8,9,10,11,12,13,14]],,,[,,,,,,,,,[-1]],[,,"18(?:1\\d{5,11}|[2-9]\\d{8})",,,,"18500123456",,,[8,9,10,11,12,13,14]],,,[,,"1(?:6(?:013|255|399)|7(?:(?:[015]1|[69]3)3|[2-4]55|[78]99))\\d{7,8}|15(?:(?:[03-68]00|113)\\d|2\\d55|7\\d99|9\\d33)\\d{7}",,,,"177991234567",,,[12,13]]],DJ:[,[,,"(?:2\\d|77)\\d{6}",,,,,,,[8]],[,,"2(?:1[2-5]|7[45])\\d{5}",,,,"21360003"],[,,"77\\d{6}",,,,"77831001"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DJ",253,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DK:[,[,,"[2-9]\\d{7}",,,,,,,[8]],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DK",45,"00",,,,,,,1,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DM:[,[,,"(?:[58]\\d\\d|767|900)\\d{7}",,,,,,,[10],[7]],[,,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}",,,,"7674201234",,,,[7]],[,,"767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}",,,,"7672251234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DM",1,"011","1",,,"([2-7]\\d{6})$|1","767$1",,,,,[,,,,,,,,,[-1]],,"767",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DO:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",,,,"8092345678",,,,[7]],[,,"8[024]9[2-9]\\d{6}",,,,"8092345678",,,,[7]],[,,"8(?:00(?:14|[2-9]\\d)|(?:33|44|55|66|77|88)[2-9]\\d)\\d{5}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DO",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"8001|8[024]9",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DZ:[,[,,"(?:[1-4]|[5-79]\\d|80)\\d{7}",,,,,,,[8,9]],[,,"9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[013-689])\\d{6}",,,,"12345678"],[,,"(?:5(?:4[0-29]|5\\d|6[0-2])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",,,,"551234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"80[3-689]1\\d{5}",,,,"808123456",,,[9]],[,,"80[12]1\\d{5}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,"98[23]\\d{6}",,,,"983123456",,,[9]],"DZ",213,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EC:[,[,,"1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",,,,,,,[8,9,10,11],[7]],[,,"[2-7][2-7]\\d{6}",,,,"22123456",,,[8],[7]],[,,"964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",,,,"991234567",,,[9]],[,,"1800\\d{7}|1[78]00\\d{6}",,,,"18001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[2-7]890\\d{4}",,,,"28901234",,,[8]],"EC",593,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-7]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EE:[,[,,"8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",,,,"3212345",,,[7]],[,,"(?:5\\d{5}|8(?:1(?:0(?:0(?:00|[178]\\d)|[3-9]\\d\\d)|(?:1(?:0[236]|1\\d)|(?:2[0-59]|[3-79]\\d)\\d)\\d)|2(?:0(?:0(?:00|4\\d)|(?:19|[2-7]\\d)\\d)|(?:(?:[124-6]\\d|3[5-9])\\d|7(?:[0-79]\\d|8[13-9])|8(?:[2-6]\\d|7[01]))\\d)|[349]\\d{4}))\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",,,,"51234567",,,[7,8]],[,,"800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}",,,,"80012345"],[,,"(?:40\\d\\d|900)\\d{4}",,,,"9001234",,,[7,8]],[,,,,,,,,,[-1]],[,,"70[0-2]\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],"EE",372,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,"800[2-9]\\d{3}",,,,,,,[7]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EG:[,[,,"[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2[2-4]|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",,,,"234567890",,,[8,9],[6,7]],[,,"1[0-25]\\d{8}",,,,"1001234567",,,[10]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"EG",20,"00","0",,,"0",,,,[[,"(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],[,"(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EH:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"528[89]\\d{5}",,,,"528812345"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-2]|5[01]|8[0-3]))\\d{6}",,,,"650123456"],[,,"80[0-7]\\d{6}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}",,,,"592401234"],"EH",212,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"528[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ER:[,[,,"[178]\\d{6}",,,,,,,[7],[6]],[,,"(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}",,,,"8370362",,,,[6]],[,,"(?:17[1-3]|7\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ER",291,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ES:[,[,,"[5-9]\\d{8}",,,,,,,[9]],[,,"96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}",,,,"810123456"],[,,"(?:590[16]00\\d|9(?:6906(?:09|10)|7390\\d\\d))\\d\\d|(?:6\\d|7[1-48])\\d{7}",,,,"612345678"],[,,"[89]00\\d{6}",,,,"800123456"],[,,"80[367]\\d{6}",,,,"803123456"],[,,"90[12]\\d{6}",,,,"901123456"],[,,"70\\d{7}",,,,"701234567"],[,,,,,,,,,[-1]],"ES",34,"00",,,,,,,,[[,"(\\d{4})","$1",["905"]],[,"(\\d{6})","$1",["[79]9"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"51\\d{7}",,,,"511234567"],,,[,,,,,,,,,[-1]]],ET:[,[,,"(?:11|[2-579]\\d)\\d{7}",,,,,,,[9],[7]],[,,"11667[01]\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[578]|44|5[0-4])|6(?:1[578]|2[69]|39|4[5-7]|5[0-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}",,,,"111112345",,,,[7]],[,,"700[1-9]\\d{5}|(?:7(?:0[1-9]|1[0-8]|22|77|86|99)|9\\d\\d)\\d{6}",,,,"911234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ET",251,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FI:[,[,,"[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"(?:1[3-79][1-8]|[23568][1-8]\\d|9(?:00|[1-8]\\d))\\d{2,6}",,,,"131234567",,,[5,6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FI",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,[[,"(\\d{5})","$1",["75[12]"],"0$1"],[,"(\\d{5})","$1",["20[2-59]"],"0$1"],[,"(\\d{6})","$1",["11"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["(?:1[3-79]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],[[,"(\\d{5})","$1",["20[2-59]"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["(?:1[3-79]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],[,,,,,,,,,[-1]],1,"1[03-79]|[2-9]",[,,"20(?:2[023]|9[89])\\d{1,6}|(?:60[12]\\d|7099)\\d{4,5}|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:[1-3]00|7(?:0[1-5]\\d\\d|5[03-9]))\\d{3,7}"],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],FJ:[,[,,"45\\d{5}|(?:0800\\d|[235-9])\\d{6}",,,,,,,[7,11]],[,,"603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",,,,"3212345",,,[7]],[,,"(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",,,,"7012345",,,[7]],[,,"0800\\d{7}",,,,"08001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FJ",679,"0(?:0|52)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FK:[,[,,"[2-7]\\d{4}",,,,,,,[5]],[,,"[2-47]\\d{4}",,,,"31234"],[,,"[56]\\d{4}",,,,"51234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FK",500,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FM:[,[,,"(?:[39]\\d\\d|820)\\d{4}",,,,,,,[7]],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}",,,,"3201234"],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}",,,,"3501234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FM",691,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[389]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FO:[,[,,"[2-9]\\d{5}",,,,,,,[6]],[,,"(?:20|[34]\\d|8[19])\\d{4}",,,,"201234"],[,,"(?:[27][1-9]|5\\d|9[16])\\d{4}",,,,"211234"],[,,"80[257-9]\\d{3}",,,,"802123"],[,,"90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d",,,,"901123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:6[0-36]|88)\\d{4}",,,,"601234"],"FO",298,"00",,,,"(10(?:01|[12]0|88))",,,,[[,"(\\d{6})","$1",["[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FR:[,[,,"[1-9]\\d{8}",,,,,,,[9]],[,,"59[1-9]\\d{6}|(?:[1-3]\\d|4[1-9]|5[0-8])\\d{7}",,,,"123456789"],[,,"(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7[3-9]\\d)\\d{6}",,,,"612345678"],[,,"80[0-5]\\d{6}",,,,"801234567"],[,,"836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}",,,,"891123456"],[,,"8(?:1[01]|2[0156]|4[02]|84)\\d{6}",,,,"884012345"],[,,,,,,,,,[-1]],[,,"9\\d{8}",,,,"912345678"],"FR",33,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["10"]],[,"(\\d{3})(\\d{3})","$1 $2",["1"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"80[6-9]\\d{6}",,,,"806123456"],,,[,,,,,,,,,[-1]]],GA:[,[,,"(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",,,,,,,[7,8]],[,,"[01]1\\d{6}",,,,"01441234",,,[8]],[,,"(?:(?:0[2-7]|7[467])\\d|6(?:0[0-4]|10|[256]\\d))\\d{5}|[2-7]\\d{6}",,,,"06031234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GA",241,"00",,,,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1",,,[[,"(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GB:[,[,,"[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",,,,,,,[7,9,10],[4,5,6,8]],[,,"(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0-79])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-2]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",,,,"1212345678",,,[9,10],[4,5,6,7,8]],[,,"7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",,,,"7400123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GB",44,"00","0"," x",,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],,[,,"76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456",,,[10]],1,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GD:[,[,,"(?:473|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-49]|5[5-79]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",,,,"4732691234",,,,[7]],[,,"473(?:4(?:0[2-79]|1[04-9]|2[0-5]|58)|5(?:2[01]|3[3-8])|901)\\d{4}",,,,"4734031234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GD",1,"011","1",,,"([2-9]\\d{6})$|1","473$1",,,,,[,,,,,,,,,[-1]],,"473",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GE:[,[,,"(?:[3-57]\\d\\d|800)\\d{6}",,,,,,,[9],[6,7]],[,,"(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}",,,,"322123456",,,,[6,7]],[,,"5(?:(?:(?:0555|1(?:[17]77|555))[5-9]|757(?:7[7-9]|8[01]))\\d|22252[0-4])\\d\\d|(?:5(?:00(?:0\\d|11|22|33|44|5[05]|77|88|9[09])|1(?:1(?:00|[124]\\d|3[01])|4\\d\\d)|(?:44|68)\\d\\d|5(?:[0157-9]\\d\\d|200)|7(?:[0147-9]\\d\\d|5(?:00|[57]5))|8(?:0(?:[018]\\d|2[0-4])|58[89]|8(?:55|88))|9(?:090|[1-35-9]\\d\\d))|790\\d\\d)\\d{4}|5(?:0(?:0[17]0|505)|1(?:0[01]0|1(?:07|33|51))|2(?:0[02]0|2[25]2)|3(?:0[03]0|3[35]3)|(?:40[04]|900)0|5222)[0-4]\\d{3}",,,,"555123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70[67]\\d{6}",,,,"706123456"],"GE",995,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"70[67]\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GF:[,[,,"[56]94\\d{6}|(?:80|9\\d)\\d{7}",,,,,,,[9]],[,,"594(?:[02-49]\\d|1[0-4]|5[6-9]|6[0-3]|80)\\d{4}",,,,"594101234"],[,,"694(?:[0-249]\\d|3[0-8])\\d{4}",,,,"694201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:396|76\\d)\\d|476[0-5])\\d{4}",,,,"976012345"],"GF",594,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GG:[,[,,"(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",,,,,,,[7,9,10],[6]],[,,"1481[25-9]\\d{5}",,,,"1481256789",,,[10],[6]],[,,"7(?:(?:781|839)\\d|911[17])\\d{5}",,,,"7781123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GG",44,"00","0",,,"([25-9]\\d{5})$|0","1481$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456",,,[10]],,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GH:[,[,,"(?:[235]\\d{3}|800)\\d{5}",,,,,,,[8,9],[7]],[,,"3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",,,,"302345678",,,[9],[7]],[,,"(?:2(?:[0346-9]\\d|5[67])|5(?:[03-7]\\d|9[1-9]))\\d{6}",,,,"231234567",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GH",233,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[237]|8[0-2]"]],[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"800\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GI:[,[,,"(?:[25]\\d|60)\\d{6}",,,,,,,[8]],[,,"2190[0-2]\\d{3}|2(?:0(?:[02]\\d|3[01])|16[24-9]|2[2-5]\\d)\\d{4}",,,,"20012345"],[,,"5251[0-4]\\d{3}|(?:5(?:[146-8]\\d\\d|250)|60(?:1[01]|6\\d))\\d{4}",,,,"57123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GI",350,"00",,,,,,,,[[,"(\\d{3})(\\d{5})","$1 $2",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GL:[,[,,"(?:19|[2-689]\\d|70)\\d{4}",,,,,,,[6]],[,,"(?:19|3[1-7]|[68][1-9]|70|9\\d)\\d{4}",,,,"321000"],[,,"[245]\\d{5}",,,,"221234"],[,,"80\\d{4}",,,,"801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3[89]\\d{4}",,,,"381234"],"GL",299,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GM:[,[,,"[2-9]\\d{6}",,,,,,,[7]],[,,"(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}",,,,"5661234"],[,,"(?:[23679]\\d|5[0-489])\\d{5}",,,,"3012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GM",220,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GN:[,[,,"722\\d{6}|(?:3|6\\d)\\d{7}",,,,,,,[8,9]],[,,"3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",,,,"30241234",,,[8]],[,,"6[0-356]\\d{7}",,,,"601123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"722\\d{6}",,,,"722123456",,,[9]],"GN",224,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GP:[,[,,"590\\d{6}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}",,,,"590201234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:395|76[018])\\d|475[0-5])\\d{4}",,,,"976012345"],"GP",590,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GQ:[,[,,"222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",,,,,,,[9]],[,,"33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}",,,,"333091234"],[,,"(?:222|55\\d)\\d{6}",,,,"222123456"],[,,"80\\d[1-9]\\d{5}",,,,"800123456"],[,,"90\\d[1-9]\\d{5}",,,,"900123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GQ",240,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],[,"(\\d{3})(\\d{6})","$1 $2",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GR:[,[,,"5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",,,,,,,[10,11,12]],[,,"2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",,,,"2123456789",,,[10]],[,,"68[57-9]\\d{7}|(?:69|94)\\d{8}",,,,"6912345678",,,[10]],[,,"800\\d{7,9}",,,,"8001234567"],[,,"90[19]\\d{7}",,,,"9091234567",,,[10]],[,,"8(?:0[16]|12|[27]5|50)\\d{7}",,,,"8011234567",,,[10]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,,,,,,,,[-1]],"GR",30,"00",,,,,,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],[,"(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],[,"(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"5005000\\d{3}",,,,"5005000123",,,[10]],,,[,,,,,,,,,[-1]]],GT:[,[,,"80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",,,,,,,[8,11]],[,,"[267][2-9]\\d{6}",,,,"22456789",,,[8]],[,,"(?:[3-5]\\d\\d|80[0-4])\\d{5}",,,,"51234567",,,[8]],[,,"18[01]\\d{8}",,,,"18001112222",,,[11]],[,,"19\\d{9}",,,,"19001112222",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GT",502,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GU:[,[,,"(?:[58]\\d\\d|671|900)\\d{7}",,,,,,,[10],[7]],[,,"671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-46-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-46-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GU",1,"011","1",,,"([2-9]\\d{6})$|1","671$1",,1,,,[,,,,,,,,,[-1]],,"671",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GW:[,[,,"[49]\\d{8}|4\\d{6}",,,,,,,[7,9]],[,,"443\\d{6}",,,,"443201234",,,[9]],[,,"9(?:5\\d|6[569]|77)\\d{6}",,,,"955012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"40\\d{5}",,,,"4012345",,,[7]],"GW",245,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["40"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GY:[,[,,"(?:[2-8]\\d{3}|9008)\\d{3}",,,,,,,[7]],[,,"(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|50[0-6]|77[1-57])\\d{4}",,,,"2201234"],[,,"(?:510|6\\d\\d|7(?:0\\d|1[0-8]|25|49))\\d{4}",,,,"6091234"],[,,"(?:289|8(?:00|6[28]|88|99))\\d{4}",,,,"2891234"],[,,"9008\\d{3}",,,,"9008123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"515\\d{4}",,,,"5151234"],"GY",592,"001",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HK:[,[,,"8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",,,,,,,[5,6,7,8,9,11]],[,,"(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-8]|[59]\\d|6[01]))|58(?:0[1-9]|1[2-9]))\\d{4}",,,,"21234567",,,[8]],[,,"(?:4(?:44[5-9]|6(?:1[0-7]|4[0-57-9]|6[0-4]))|5(?:73[0-6]|95[0-8])|6(?:26[013-8]|66[0-3])|70(?:7[1-6]|8[0-4])|848[0-25-9]|9(?:29[013-9]|59[0-4]|899))\\d{4}|(?:4(?:4[0156]|6[02357-9])|5(?:[1-59][0-46-9]|6[0-4689]|7[0-246-9])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|709|84[09]|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",,,,"51234567",,,[8]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900(?:[0-24-9]\\d{7}|3\\d{1,4})",,,,"90012345678",,,[5,6,7,8,11]],[,,,,,,,,,[-1]],[,,"8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",,,,"81123456",,,[8]],[,,,,,,,,,[-1]],"HK",852,"00(?:30|5[09]|[126-9]?)",,,,,,"00",,[[,"(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,"7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",,,,"71123456",,,[8]],,,[,,,,,,,,,[-1]],[,,"30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",,,,"30161234",,,[8]],,,[,,,,,,,,,[-1]]],HN:[,[,,"8\\d{10}|[237-9]\\d{7}",,,,,,,[8,11]],[,,"2(?:2(?:0[0-59]|1[1-9]|[23]\\d|4[02-6]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[578]|2[3-59]|3[13-9]|4[0-68]|5[1-3589])|5(?:0[2357-9]|1[1-356]|4[03-5]|5\\d|6[014-69]|7[04]|80)|6(?:[056]\\d|17|2[067]|3[047]|4[0-378]|[78][0-8]|9[01])|7(?:0[5-79]|6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",,,,"22123456",,,[8]],[,,"[37-9]\\d{7}",,,,"91234567",,,[8]],[,,"8002\\d{7}",,,,"80021234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"HN",504,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["8"]]],[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],[,,,,,,,,,[-1]],,,[,,"8002\\d{7}",,,,,,,[11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HR:[,[,,"(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",,,,,,,[6,7,8,9]],[,,"1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"9(?:(?:0[1-9]|[12589]\\d)\\d\\d|7(?:[0679]\\d\\d|5(?:[01]\\d|44|77|9[5-7])))\\d{4}|98\\d{6}",,,,"921234567",,,[8,9]],[,,"80\\d{5,7}",,,,"800123456",,,[7,8,9]],[,,"6[01459]\\d{6}|6[01]\\d{4,5}",,,,"611234",,,[6,7,8]],[,,,,,,,,,[-1]],[,,"7[45]\\d{6}",,,,"74123456",,,[8]],[,,,,,,,,,[-1]],"HR",385,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"62\\d{6,7}|72\\d{6}",,,,"62123456",,,[8,9]],,,[,,,,,,,,,[-1]]],HT:[,[,,"(?:[2-489]\\d|55)\\d{6}",,,,,,,[8]],[,,"2(?:2\\d|5[1-5]|81|9[149])\\d{5}",,,,"22453300"],[,,"(?:[34]\\d|55)\\d{6}",,,,"34101234"],[,,"8\\d{7}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}",,,,"98901234"],"HT",509,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HU:[,[,,"[235-7]\\d{8}|[1-9]\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",,,,"12345678",,,[8],[6,7]],[,,"(?:[257]0|3[01])\\d{7}",,,,"201234567",,,[9]],[,,"(?:[48]0\\d|680[29])\\d{5}",,,,"80123456"],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"21\\d{7}",,,,"211234567",,,[9]],"HU",36,"00","06",,,"06",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],,[,,,,,,,,,[-1]],,,[,,"(?:[48]0\\d|680[29])\\d{5}"],[,,"38\\d{7}",,,,"381234567",,,[9]],,,[,,,,,,,,,[-1]]],ID:[,[,,"(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",,,,,,,[7,8,9,10,11,12,13],[5,6]],[,,"2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",,,,"218350123",,,[7,8,9,10,11],[5,6]],[,,"8[1-35-9]\\d{7,10}",,,,"812345678",,,[9,10,11,12]],[,,"00[17]803\\d{7}|(?:177\\d|800)\\d{5,7}|001803\\d{6}",,,,"8001234567",,,[8,9,10,11,12,13]],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,"804\\d{7}",,,,"8041234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ID",62,"00[89]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["001"]],[,"(\\d{2})(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"001803\\d{6,7}|(?:007803\\d|8071)\\d{6}",,,,,,,[10,12,13]],[,,"(?:1500|8071\\d{3})\\d{3}",,,,"8071123456",,,[7,10]],,,[,,,,,,,,,[-1]]],IE:[,[,,"(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",,,,,,,[7,8,9,10],[5,6]],[,,"(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}",,,,"2212345",,,,[5,6]],[,,"8(?:22|[35-9]\\d)\\d{6}",,,,"850123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"15(?:1[2-8]|[2-8]0|9[089])\\d{6}",,,,"1520123456",,,[10]],[,,"18[59]0\\d{6}",,,,"1850123456",,,[10]],[,,"700\\d{6}",,,,"700123456",,,[9]],[,,"76\\d{7}",,,,"761234567",,,[9]],"IE",353,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],[,"(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],[,"(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"18[59]0\\d{6}",,,,,,,[10]],[,,"818\\d{6}",,,,"818123456",,,[9]],,,[,,"88210[1-9]\\d{4}|8(?:[35-79]5\\d\\d|8(?:[013-9]\\d\\d|2(?:[01][1-9]|[2-9]\\d)))\\d{5}",,,,"8551234567",,,[10]]],IL:[,[,,"1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",,,,,,,[7,8,9,10,11,12]],[,,"153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",,,,"21234567",,,[8,11,12],[7]],[,,"55410\\d{4}|5(?:(?:[02][02-9]|[149][2-9]|[36]\\d|8[3-7])\\d|5(?:01|2\\d|3[0-3]|4[34]|5[0-25689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",,,,"502345678",,,[9]],[,,"1(?:255|80[019]\\d{3})\\d{3}",,,,"1800123456",,,[7,10]],[,,"1212\\d{4}|1(?:200|9(?:0[0-2]|19))\\d{6}",,,,"1919123456",,,[8,10]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,"7(?:38(?:0\\d|5[09]|88)|8(?:33|55|77|81)\\d)\\d{4}|7(?:18|2[23]|3[237]|47|6[258]|7\\d|82|9[2-9])\\d{6}",,,,"771234567",,,[9]],"IL",972,"0(?:0|1[2-9])","0",,,"0",,,,[[,"(\\d{4})(\\d{3})","$1-$2",["125"]],[,"(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],[,"(\\d{4})(\\d{6})","$1-$2",["159"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],[,"(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],,[,,,,,,,,,[-1]],,,[,,"1700\\d{6}",,,,,,,[10]],[,,"1599\\d{6}",,,,"1599123456",,,[10]],,,[,,"151\\d{8,9}",,,,"15112340000",,,[11,12]]],IM:[,[,,"1624\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1624(?:230|[5-8]\\d\\d)\\d{3}",,,,"1624756789",,,,[6]],[,,"76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}",,,,"7924123456"],[,,"808162\\d{4}",,,,"8081624567"],[,,"8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}",,,,"9016247890"],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678"],[,,"56\\d{8}",,,,"5612345678"],"IM",44,"00","0",,,"([25-8]\\d{5})$|0","1624$1",,,,,[,,,,,,,,,[-1]],,"74576|(?:16|7[56])24",[,,,,,,,,,[-1]],[,,"3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],IN:[,[,,"(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",,,,,,,[8,9,10,11,12,13],[6,7]],[,,"2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",,,,"7410410123",,,[10],[6,7,8]],[,,"(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",,,,"8123456789",,,[10]],[,,"000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))",,,,"1800123456"],[,,"186[12]\\d{9}",,,,"1861123456789",,,[13]],[,,"1860\\d{7}",,,,"18603451234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IN",91,"00","0",,,"0",,,,[[,"(\\d{7})","$1",["575"]],[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[,,,,,,,,,[-1]],,,[,,"1(?:600\\d{6}|800\\d{4,9})|(?:000800|18(?:03\\d\\d|6(?:0|[12]\\d\\d)))\\d{7}"],[,,"140\\d{7}",,,,"1409305260",,,[10]],,,[,,,,,,,,,[-1]]],IO:[,[,,"3\\d{6}",,,,,,,[7]],[,,"37\\d{5}",,,,"3709100"],[,,"38\\d{5}",,,,"3801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IO",246,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IQ:[,[,,"(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"7[3-9]\\d{8}",,,,"7912345678",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IQ",964,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IR:[,[,,"[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",,,,,,,[4,5,6,7,10],[8]],[,,"(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|2(?:121|[2689]0\\d)|30[0-2]\\d|4(?:111|40\\d))\\d{4}",,,,"2123456789",,,[6,7,10],[4,5,8]],[,,"9(?:(?:0(?:[0-35]\\d|4[4-6])|(?:[13]\\d|2[0-3])\\d)\\d|9(?:[0-46]\\d\\d|5[15]0|8(?:[12]\\d|88)|9(?:0[0-3]|[19]\\d|21|69|77|8[7-9])))\\d{5}",,,,"9123456789",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IR",98,"00","0",,,"0",,,,[[,"(\\d{4,5})","$1",["96"],"0$1"],[,"(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"9(?:4440\\d{5}|6(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19]))",,,,,,,[4,5,10]],[,,"96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",,,,"9601",,,[4,5]],,,[,,,,,,,,,[-1]]],IS:[,[,,"(?:38\\d|[4-9])\\d{6}",,,,,,,[7,9]],[,,"(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-24589]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",,,,"4101234",,,[7]],[,,"(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[026-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[238]))\\d{4}",,,,"6111234"],[,,"80[0-8]\\d{4}",,,,"8001234",,,[7]],[,,"90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"49[0-24-79]\\d{4}",,,,"4921234",,,[7]],"IS",354,"00|1(?:0(?:01|[12]0)|100)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"809\\d{4}",,,,"8091234",,,[7]],,,[,,"(?:689|8(?:7[18]|80)|95[48])\\d{4}",,,,"6891234",,,[7]]],IT:[,[,,"0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",,,,,,,[6,7,8,9,10,11,12]],[,,"0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",,,,"0212345678",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"IT",39,"00",,,,,,,,[[,"(\\d{4,5})","$1",["1(?:0|9[246])","1(?:0|9(?:2[2-9]|[46]))"]],[,"(\\d{6})","$1",["1(?:1|92)"]],[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[,,,,,,,,,[-1]],1,,[,,"848\\d{6}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],JE:[,[,,"1534\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1534[0-24-8]\\d{5}",,,,"1534456789",,,,[6]],[,,"7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}",,,,"7797712345"],[,,"80(?:07(?:35|81)|8901)\\d{4}",,,,"8007354567"],[,,"(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}",,,,"9018105678"],[,,,,,,,,,[-1]],[,,"701511\\d{4}",,,,"7015115678"],[,,"56\\d{8}",,,,"5612345678"],"JE",44,"00","0",,,"([0-24-8]\\d{5})$|0","1534$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456"],,,[,,,,,,,,,[-1]],[,,"(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],JM:[,[,,"(?:[58]\\d\\d|658|900)\\d{7}",,,,,,,[10],[7]],[,,"8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[0235-9]|[23]\\d|40|5[06]|6[2-589]|7[0-25-9]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",,,,"8765230123",,,,[7]],[,,"(?:658295|876(?:2(?:0[1-9]|[13-9]\\d|2[013-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}",,,,"8762101234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"JM",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"658|876",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],JO:[,[,,"(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",,,,,,,[8,9]],[,,"87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",,,,"62001234",,,[8]],[,,"7(?:[78][0-25-9]|9\\d)\\d{6}",,,,"790123456",,,[9]],[,,"80\\d{6}",,,,"80012345",,,[8]],[,,"9\\d{7}",,,,"90012345",,,[8]],[,,"85\\d{6}",,,,"85012345",,,[8]],[,,"70\\d{7}",,,,"700123456",,,[9]],[,,,,,,,,,[-1]],"JO",962,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],[,"(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,"74(?:66|77)\\d{5}",,,,"746612345",,,[9]],,,[,,,,,,,,,[-1]],[,,"8(?:10|8\\d)\\d{5}",,,,"88101234",,,[8]],,,[,,,,,,,,,[-1]]],JP:[,[,,"00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",,,,,,,[8,9,10,11,12,13,14,15,16,17]],[,,"(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",,,,"312345678",,,[9]],[,,"[7-9]0[1-9]\\d{7}",,,,"9012345678",,,[10]],[,,"00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}",,,,"120123456"],[,,"990\\d{6}",,,,"990123456",,,[9]],[,,,,,,,,,[-1]],[,,"60\\d{7}",,,,"601234567",,,[9]],[,,"50[1-9]\\d{7}",,,,"5012345678",,,[10]],"JP",81,"010","0",,,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1",,,[[,"(\\d{4})(\\d{4})","$1-$2",["007","0077","00777","00777[01]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3",["007","0077"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3",["008"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3",["0"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],[,,"20\\d{8}",,,,"2012345678",,,[10]],,,[,,"00(?:777(?:[01]|(?:5|8\\d)\\d)|882[1245]\\d\\d)\\d\\d|00(?:37|66|78)\\d{6,13}"],[,,"570\\d{6}",,,,"570123456",,,[9]],,,[,,,,,,,,,[-1]]],KE:[,[,,"(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",,,,,,,[7,8,9,10]],[,,"(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",,,,"202012345",,,[7,8,9]],[,,"(?:1(?:0[0-6]|1[0-5]|2[014]|30)|7\\d\\d)\\d{6}",,,,"712123456",,,[9]],[,,"800[2-8]\\d{5,6}",,,,"800223456",,,[9,10]],[,,"900[02-9]\\d{5}",,,,"900223456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KE",254,"000","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KG:[,[,,"8\\d{9}|[235-9]\\d{8}",,,,,,,[9,10],[5,6]],[,,"312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",,,,"312123456",,,[9],[5,6]],[,,"312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|600|7(?:[07]\\d|55)|88[08]|9(?:12|9[05-9]))\\d{6}",,,,"700123456",,,[9]],[,,"800\\d{6,7}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KG",996,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],[,"(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KH:[,[,,"1\\d{9}|[1-9]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",,,,"23756789",,,[8,9],[6,7]],[,,"(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",,,,"91234567",,,[8,9]],[,,"1800(?:1\\d|2[019])\\d{4}",,,,"1800123456",,,[10]],[,,"1900(?:1\\d|2[09])\\d{4}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KH",855,"00[14-9]","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KI:[,[,,"(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",,,,,,,[5,8]],[,,"(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}",,,,"31234"],[,,"(?:6200[01]|7(?:310[1-9]|5(?:02[03-9]|12[0-47-9]|22[0-7]|[34](?:0[1-9]|8[02-9])|50[1-9])))\\d{3}|(?:63\\d\\d|7(?:(?:[0146-9]\\d|2[0-689])\\d|3(?:[02-9]\\d|1[1-9])|5(?:[0-2][013-9]|[34][1-79]|5[1-9]|[6-9]\\d)))\\d{4}",,,,"72001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",,,,"30010000",,,[8]],"KI",686,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KM:[,[,,"[3478]\\d{6}",,,,,,,[7],[4]],[,,"7[4-7]\\d{5}",,,,"7712345",,,,[4]],[,,"[34]\\d{6}",,,,"3212345"],[,,,,,,,,,[-1]],[,,"8\\d{6}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KM",269,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KN:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}",,,,"8692361234",,,,[7]],[,,"869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}",,,,"8697652917",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KN",1,"011","1",,,"([2-7]\\d{6})$|1","869$1",,,,,[,,,,,,,,,[-1]],,"869",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KP:[,[,,"85\\d{6}|(?:19\\d|[2-7])\\d{7}",,,,,,,[8,10],[6,7]],[,,"(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}",,,,"21234567",,,,[6,7]],[,,"19[1-3]\\d{7}",,,,"1921234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KP",850,"00|99","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"238[02-9]\\d{4}|2(?:[0-24-9]\\d|3[0-79])\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KR:[,[,,"00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",,,,,,,[5,6,8,9,10,11,12,13,14],[3,4,7]],[,,"(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",,,,"22123456",,,[5,6,8,9,10],[3,4,7]],[,,"1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[0-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",,,,"1020000000",,,[9,10]],[,,"00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|80)\\d{7}",,,,"801234567",,,[9,11,12,13,14]],[,,"60[2-9]\\d{6}",,,,"602345678",,,[9]],[,,,,,,,,,[-1]],[,,"50\\d{8,9}",,,,"5012345678",,,[10,11]],[,,"70\\d{8}",,,,"7012345678",,,[10]],"KR",82,"00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","0",,,"0(8(?:[1-46-8]|5\\d\\d))?",,,,[[,"(\\d{5})","$1",["1[016-9]1","1[016-9]11","1[016-9]114"],"0$1"],[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3})(\\d{3})","$1 $2 $3",["003","0030"]],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3,4})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{5})(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"]],[,,"15\\d{7,8}",,,,"1523456789",,,[9,10]],,,[,,"00(?:3(?:08\\d{6,7}|68\\d{7})|798\\d{7,9})",,,,,,,[11,12,13,14]],[,,"1(?:5(?:22|33|44|66|77|88|99)|6(?:[07]0|44|6[168]|88)|8(?:00|33|55|77|99))\\d{4}",,,,"15441234",,,[8]],,,[,,,,,,,,,[-1]]],KW:[,[,,"18\\d{5}|(?:[2569]\\d|41)\\d{6}",,,,,,,[7,8]],[,,"2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",,,,"22345678",,,[8]],[,,"(?:41\\d\\d|5(?:(?:[05]\\d|1[0-7]|6[56])\\d|2(?:22|5[25])|7(?:55|77)|88[58])|6(?:(?:0[034679]|5[015-9]|6\\d)\\d|1(?:00|11|66)|222|3[36]3|444|7(?:0[013-9]|[67]\\d)|888|9(?:[069]\\d|3[039]))|9(?:(?:0[09]|[4679]\\d|8[057-9])\\d|1(?:1[01]|99)|2(?:00|2\\d)|3(?:00|3[03])|5(?:00|5\\d)))\\d{4}",,,,"50012345",,,[8]],[,,"18\\d{5}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KW",965,"00",,,,,,,,[[,"(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],[,"(\\d{3})(\\d{5})","$1 $2",["[245]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KY:[,[,,"(?:345|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|[48]8)|9(?:14|4[035-9]))\\d{4}",,,,"3452221234",,,,[7]],[,,"345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|82[56]|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}",,,,"3453231234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"(?:345976|900[2-9]\\d\\d)\\d{4}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KY",1,"011","1",,,"([2-9]\\d{6})$|1","345$1",,,,,[,,"345849\\d{4}",,,,"3458491234"],,"345",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KZ:[,[,,"(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",,,,,,,[10,14],[5,6,7]],[,,"(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9]|97)|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]|59))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",,,,"7123456789",,,[10],[5,6,7]],[,,"7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}",,,,"7710009998",,,[10]],[,,"8(?:00|108\\d{3})\\d{7}",,,,"8001234567"],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567",,,[10]],[,,"751\\d{7}",,,,"7511234567",,,[10]],"KZ",7,"810","8",,,"8",,"8~10",,,,[,,,,,,,,,[-1]],,"33|7",[,,"751\\d{7}",,,,,,,[10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LA:[,[,,"[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",,,,,,,[8,9,10],[6]],[,,"(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",,,,"21212862",,,[8],[6]],[,,"(?:20(?:[2359]\\d|7[6-8]|88)|302\\d)\\d{6}",,,,"2023123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LA",856,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"30[013-9]\\d{6}",,,,"301234567",,,[9]],,,[,,,,,,,,,[-1]]],LB:[,[,,"[27-9]\\d{7}|[13-9]\\d{6}",,,,,,,[7,8]],[,,"7(?:62|8[0-7]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}",,,,"1123456"],[,,"793(?:[01]\\d|2[0-4])\\d{3}|(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[89]|9[12]))\\d{5}",,,,"71123456"],[,,,,,,,,,[-1]],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,"80\\d{6}",,,,"80123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LB",961,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LC:[,[,,"(?:[58]\\d\\d|758|900)\\d{7}",,,,,,,[10],[7]],[,,"758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}",,,,"7584305678",,,,[7]],[,,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}",,,,"7582845678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"LC",1,"011","1",,,"([2-8]\\d{6})$|1","758$1",,,,,[,,,,,,,,,[-1]],,"758",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LI:[,[,,"[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",,,,,,,[7,9]],[,,"(?:2(?:01|1[27]|2[02]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",,,,"2345678",,,[7]],[,,"(?:6(?:(?:4[5-9]|5[0-469])\\d|6(?:[0245]\\d|[17]0|3[7-9]))\\d|7(?:[37-9]\\d|42|56))\\d{4}",,,,"660234567"],[,,"8002[28]\\d\\d|80(?:05\\d|9)\\d{4}",,,,"8002222"],[,,"90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",,,,"9002222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LI",423,"00","0",,,"(1001)|0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"870(?:28|87)\\d\\d",,,,"8702812",,,[7]],,,[,,"697(?:42|56|[78]\\d)\\d{4}",,,,"697861234",,,[9]]],LK:[,[,,"[1-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}",,,,"112345678",,,,[7]],[,,"7(?:[0-25-8]\\d|4[0-4])\\d{6}",,,,"712345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LK",94,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"1973\\d{5}",,,,"197312345"],,,[,,,,,,,,,[-1]]],LR:[,[,,"(?:[25]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",,,,,,,[7,8,9]],[,,"2\\d{7}",,,,"21234567",,,[8]],[,,"(?:(?:(?:22|33)0|555|(?:77|88)\\d)\\d|4[67])\\d{5}|[56]\\d{6}",,,,"770123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"332(?:02|[34]\\d)\\d{4}",,,,"332021234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LR",231,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23578]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LS:[,[,,"(?:[256]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2\\d{7}",,,,"22123456"],[,,"[56]\\d{7}",,,,"50123456"],[,,"800[256]\\d{4}",,,,"80021234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LS",266,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LT:[,[,,"(?:[3469]\\d|52|[78]0)\\d{6}",,,,,,,[8]],[,,"(?:3[1478]|4[124-6]|52)\\d{6}",,,,"31234567"],[,,"6\\d{7}",,,,"61234567"],[,,"80[02]\\d{5}",,,,"80012345"],[,,"9(?:0[0239]|10)\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,"70[05]\\d{5}",,,,"70012345"],[,,"[89]01\\d{5}",,,,"80123456"],"LT",370,"00","8",,,"[08]",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",,1],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",,1],[,"(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",,1],[,"(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70[67]\\d{5}",,,,"70712345"],,,[,,,,,,,,,[-1]]],LU:[,[,,"35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",,,,,,,[4,5,6,7,8,9,10,11]],[,,"(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}",,,,"27123456"],[,,"6(?:[269][18]|5[1568]|7[189]|81)\\d{6}",,,,"628123456",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90[015]\\d{5}",,,,"90012345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,,,,,,,,[-1]],[,,"20(?:1\\d{5}|[2-689]\\d{1,7})",,,,"20201234",,,[4,5,6,7,8,9,10]],"LU",352,"00",,,,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LV:[,[,,"(?:[268]\\d|90)\\d{6}",,,,,,,[8]],[,,"6\\d{7}",,,,"63123456"],[,,"23(?:23[0-57-9]|33[0238])\\d{3}|2(?:[0-24-9]\\d\\d|3(?:0[07]|[14-9]\\d|2[024-9]|3[0-24-9]))\\d{4}",,,,"21234567"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,"81\\d{6}",,,,"81123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LV",371,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LY:[,[,,"[2-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}",,,,"212345678",,,,[7]],[,,"9[1-6]\\d{7}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LY",218,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MA:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}",,,,"520123456"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-2]|5[01]|8[0-3]))\\d{6}",,,,"650123456"],[,,"80[0-7]\\d{6}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}",,,,"592401234"],"MA",212,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],[,"(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|8(?:0[89]|92)","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|8(?:0[89]|92)"],"0$1"],[,"(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],[,"(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MC:[,[,,"(?:[3489]|6\\d)\\d{7}",,,,,,,[8,9]],[,,"(?:870|9[2-47-9]\\d)\\d{5}",,,,"99123456",,,[8]],[,,"4(?:[46]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}",,,,"612345678"],[,,"(?:800|90\\d)\\d{5}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MC",377,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["87"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"8[07]0\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MD:[,[,,"(?:[235-7]\\d|[89]0)\\d{6}",,,,,,,[8]],[,,"(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}",,,,"22212345"],[,,"562\\d{5}|(?:6\\d|7[16-9])\\d{6}",,,,"62112345"],[,,"800\\d{5}",,,,"80012345"],[,,"90[056]\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,,,,,,,,[-1]],[,,"3[08]\\d{6}",,,,"30123456"],"MD",373,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"803\\d{5}",,,,"80312345"],,,[,,,,,,,,,[-1]]],ME:[,[,,"(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",,,,,,,[8,9],[6]],[,,"(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",,,,"30234567",,,[8],[6]],[,,"6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",,,,"67622901",,,[8]],[,,"80(?:[0-2578]|9\\d)\\d{5}",,,,"80080002"],[,,"9(?:4[1568]|5[178])\\d{5}",,,,"94515151",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"78[1-49]\\d{5}",,,,"78108780",,,[8]],"ME",382,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"77[1-9]\\d{5}",,,,"77273012",,,[8]],,,[,,,,,,,,,[-1]]],MF:[,[,,"590\\d{6}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:395|76[018])\\d|475[0-5])\\d{4}",,,,"976012345"],"MF",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MG:[,[,,"[23]\\d{8}",,,,,,,[9],[7]],[,,"2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[35]|8[268]|9[245])\\d{5}",,,,"202123456",,,,[7]],[,,"3[2-47-9]\\d{7}",,,,"321234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"22\\d{7}",,,,"221234567"],"MG",261,"00","0",,,"([24-9]\\d{6})$|0","20$1",,,[[,"(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MH:[,[,,"329\\d{4}|(?:[256]\\d|45)\\d{5}",,,,,,,[7]],[,,"(?:247|45[78]|528|625)\\d{4}",,,,"2471234"],[,,"(?:(?:23|54)5|329|45[356])\\d{4}",,,,"2351234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"635\\d{4}",,,,"6351234"],"MH",692,"011","1",,,"1",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MK:[,[,,"[2-578]\\d{7}",,,,,,,[8],[6,7]],[,,"(?:(?:2(?:62|77)0|3444)\\d|4[56]440)\\d{3}|(?:34|4[357])700\\d{3}|(?:2(?:[0-3]\\d|5[0-578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}",,,,"22012345",,,,[6,7]],[,,"7(?:3555|(?:474|9[019]7)7)\\d{3}|7(?:[0-25-8]\\d\\d|3(?:[1-48]\\d|6[01]|7[01578])|4(?:2\\d|60|7[01578])|9(?:[2-4]\\d|5[01]|7[015]))\\d{4}",,,,"72345678"],[,,"800\\d{5}",,,,"80012345"],[,,"5\\d{7}",,,,"50012345"],[,,"8(?:0[1-9]|[1-9]\\d)\\d{5}",,,,"80123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MK",389,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ML:[,[,,"[24-9]\\d{7}",,,,,,,[8]],[,,"2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-39]))\\d{5}",,,,"20212345"],[,,"2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[01]|[679]\\d|8[2-49])\\d{6}",,,,"65012345"],[,,"80\\d{6}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ML",223,"00",,,,,,,,[[,"(\\d{4})","$1",["67[057-9]|74[045]","67(?:0[09]|[59]9|77|8[89])|74(?:0[02]|44|55)"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[,,,,,,,,,[-1]],,,[,,"80\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MM:[,[,,"1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",,,,,,,[6,7,8,9,10],[5]],[,,"(?:1(?:(?:2\\d|3[56]|[89][0-6])\\d|4(?:2[29]|62|7[0-2]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|[26]2|7[0-2]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[013])|3(?:20\\d|4(?:70|83)|56)|420\\d|5470)|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|2472|3(?:20\\d|470)|4(?:2[04]\\d|472)|7(?:(?:3\\d|8[01459])\\d|4[67]0)))\\d{4}|5(?:2(?:2\\d{5,6}|47[02]\\d{4})|(?:3472|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[01])|8(?:20\\d|47[02])|9(?:20\\d|470))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:(?:2\\d|51)\\d|4(?:[1-35-9]\\d|4[0-57-9]))|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|[35]2\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",,,,"1234567",,,[6,7,8,9],[5]],[,,"(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",,,,"92123456",,,[7,8,9,10]],[,,"80080(?:0[1-9]|2\\d)\\d{3}",,,,"8008001234",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1333\\d{4}|[12]468\\d{4}",,,,"13331234",,,[8]],"MM",95,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],[,"(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],[,"(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MN:[,[,,"[12]\\d{7,9}|[5-9]\\d{7}",,,,,,,[8,9,10],[4,5,6]],[,,"[12]2[1-3]\\d{5,6}|(?:(?:[12](?:1|27)|5[368])\\d\\d|7(?:0(?:[0-5]\\d|7[078]|80)|128))\\d{4}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}",,,,"53123456",,,,[4,5,6]],[,,"(?:83[01]|92[039])\\d{5}|(?:5[05]|6[069]|8[015689]|9[013-9])\\d{6}",,,,"88123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"712[0-79]\\d{4}|7(?:1[013-9]|[25-9]\\d)\\d{5}",,,,"75123456",,,[8]],"MN",976,"001","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MO:[,[,,"0800\\d{3}|(?:28|[68]\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",,,,"28212345",,,[8]],[,,"6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",,,,"66123456",,,[8]],[,,"0800\\d{3}",,,,"0800501",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MO",853,"00",,,,,,,,[[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{4})(\\d{4})","$1 $2",["[268]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MP:[,[,,"[58]\\d{9}|(?:67|90)0\\d{7}",,,,,,,[10],[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MP",1,"011","1",,,"([2-9]\\d{6})$|1","670$1",,1,,,[,,,,,,,,,[-1]],,"670",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MQ:[,[,,"596\\d{6}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"596(?:[03-7]\\d|10|2[7-9]|8[0-39]|9[04-9])\\d{4}",,,,"596301234"],[,,"69(?:6(?:[0-46-9]\\d|5[0-6])|727)\\d{4}",,,,"696201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:397[0-2]|477[0-5]|76(?:6\\d|7[0-367]))\\d{4}",,,,"976612345"],"MQ",596,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MR:[,[,,"(?:[2-4]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"(?:25[08]|35\\d|45[1-7])\\d{5}",,,,"35123456"],[,,"[2-4][0-46-9]\\d{6}",,,,"22123456"],[,,"800\\d{5}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MR",222,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MS:[,[,,"(?:[58]\\d\\d|664|900)\\d{7}",,,,,,,[10],[7]],[,,"6644(?:1[0-3]|91)\\d{4}",,,,"6644912345",,,,[7]],[,,"664(?:3(?:49|9[1-6])|49[2-6])\\d{4}",,,,"6644923456",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MS",1,"011","1",,,"([34]\\d{6})$|1","664$1",,,,,[,,,,,,,,,[-1]],,"664",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MT:[,[,,"3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"20(?:3[1-4]|6[059])\\d{4}|2(?:0[19]|[1-357]\\d|60)\\d{5}",,,,"21001234"],[,,"(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}",,,,"96961234"],[,,"800(?:02|[3467]\\d)\\d{3}",,,,"80071234"],[,,"5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}",,,,"50037123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3550\\d{4}",,,,"35501234"],"MT",356,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],,[,,"7117\\d{4}",,,,"71171234"],,,[,,,,,,,,,[-1]],[,,"501\\d{5}",,,,"50112345"],,,[,,,,,,,,,[-1]]],MU:[,[,,"(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",,,,,,,[7,8,10]],[,,"(?:2(?:[0346-8]\\d|1[0-7])|4(?:[013568]\\d|2[4-8])|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",,,,"54480123",,,[7,8]],[,,"5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|(?:5(?:2[5-9]|4[3-689]|[57]\\d|8[0-689]|9[0-8])|7(?:0[0-3]|3[013]))\\d{5}",,,,"52512345",,,[8]],[,,"802\\d{7}|80[0-2]\\d{4}",,,,"8001234",,,[7,10]],[,,"30\\d{5}",,,,"3012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3(?:20|9\\d)\\d{4}",,,,"3201234",,,[7]],"MU",230,"0(?:0|[24-7]0|3[03])",,,,,,"020",,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[57]"]],[,"(\\d{5})(\\d{5})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MV:[,[,,"(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",,,,,,,[7,10]],[,,"(?:3(?:0[0-3]|3[0-59])|6(?:[58][024689]|6[024-68]|7[02468]))\\d{4}",,,,"6701234",,,[7]],[,,"(?:46[46]|[79]\\d\\d)\\d{4}",,,,"7712345",,,[7]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MV",960,"0(?:0|19)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1-$2",["[34679]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"4(?:0[01]|50)\\d{4}",,,,"4001234",,,[7]],,,[,,,,,,,,,[-1]]],MW:[,[,,"(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",,,,,,,[7,9]],[,,"(?:1[2-9]|2[12]\\d\\d)\\d{5}",,,,"1234567"],[,,"111\\d{6}|(?:31|77|[89][89])\\d{7}",,,,"991234567",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MW",265,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MX:[,[,,"1(?:(?:[27]2|44|87|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-9]|8[1-69]|9[1-8])|[2-9]\\d)\\d{8}",,,,,,,[10,11],[7,8]],[,,"657[12]\\d{6}|(?:2(?:0[01]|2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[13467][1-9]|2\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|6[1-9]|7[12]|8[1-8]|9\\d))\\d{7}",,,,"2001234567",,,[10],[7,8]],[,,"657[12]\\d{6}|(?:1(?:2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))|2(?:2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[13467][1-9]|2\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|6[1-9]|7[12]|8[1-8]|9\\d))\\d{7}",,,,"12221234567",,,,[7,8]],[,,"8(?:00|88)\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,"300\\d{7}",,,,"3001234567",,,[10]],[,,"500\\d{7}",,,,"5001234567",,,[10]],[,,,,,,,,,[-1]],"MX",52,"0[09]","01",,,"0(?:[12]|4[45])|1",,"00",,[[,"(\\d{5})","$1",["53"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MY:[,[,,"1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",,,,"323856789",,,[8,9],[6,7]],[,,"1(?:1888[689]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0-4]\\d|5[0-7]))|(?:[269]\\d|[37][1-9]|4[235-9])\\d|5(?:31|9\\d\\d)|8(?:1[23]|[236]\\d|4[06]|5(?:46|[7-9])|7[016-9]|8[01]|9[0-8]))\\d{5}",,,,"123456789",,,[9,10]],[,,"1[378]00\\d{6}",,,,"1300123456",,,[10]],[,,"1600\\d{6}",,,,"1600123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",,,,"1546012345",,,[10]],"MY",60,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MZ:[,[,,"(?:2|8\\d)\\d{7}",,,,,,,[8,9]],[,,"2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",,,,"21123456",,,[8]],[,,"8[2-79]\\d{7}",,,,"821234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MZ",258,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NA:[,[,,"[68]\\d{7,8}",,,,,,,[8,9]],[,,"64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}",,,,"61221234"],[,,"(?:60|8[1245])\\d{7}",,,,"811234567",,,[9]],[,,"80\\d{7}",,,,"800123456",,,[9]],[,,"8701\\d{5}",,,,"870123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8(?:3\\d\\d|86)\\d{5}",,,,"88612345"],"NA",264,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NC:[,[,,"(?:050|[2-57-9]\\d\\d)\\d{3}",,,,,,,[6]],[,,"(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}",,,,"201234"],[,,"(?:5[0-4]|[79]\\d|8[0-79])\\d{4}",,,,"751234"],[,,"050\\d{3}",,,,"050012"],[,,"36\\d{4}",,,,"366711"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NC",687,"00",,,,,,,,[[,"(\\d{3})","$1",["5[6-8]"]],[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NE:[,[,,"[027-9]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}",,,,"20201234"],[,,"(?:23|7[047]|[89]\\d)\\d{6}",,,,"93123456"],[,,"08\\d{6}",,,,"08123456"],[,,"09\\d{6}",,,,"09123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NE",227,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[047]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NF:[,[,,"[13]\\d{5}",,,,,,,[6],[5]],[,,"(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}",,,,"106609",,,,[5]],[,,"(?:14|3[58])\\d{4}",,,,"381234",,,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NF",672,"00",,,,"([0-258]\\d{4})$","3$1",,,[[,"(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],[,"(\\d)(\\d{5})","$1 $2",["[13]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NG:[,[,,"(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",,,,,,,[7,8,10,11,12,13,14],[5,6]],[,,"(?:(?:[1-356]\\d|4[02-8]|8[2-9])\\d|9(?:0[3-9]|[1-9]\\d))\\d{5}|7(?:0(?:[013-689]\\d|2[0-24-9])\\d{3,4}|[1-79]\\d{6})|(?:[12]\\d|4[147]|5[14579]|6[1578]|7[1-3578])\\d{5}",,,,"18040123",,,[7,8],[5,6]],[,,"(?:702[0-24-9]|819[01])\\d{6}|(?:70[13-689]|8(?:0[1-9]|1[0-8])|9(?:0[1-9]|1[1-356]))\\d{7}",,,,"8021234567",,,[10]],[,,"800\\d{7,11}",,,,"80017591759",,,[10,11,12,13,14]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NG",234,"009","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"700\\d{7,11}",,,,"7001234567",,,[10,11,12,13,14]],,,[,,,,,,,,,[-1]]],NI:[,[,,"(?:1800|[25-8]\\d{3})\\d{4}",,,,,,,[8]],[,,"2\\d{7}",,,,"21234567"],[,,"(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}",,,,"81234567"],[,,"1800\\d{4}",,,,"18001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NI",505,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NL:[,[,,"(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",,,,,,,[5,6,7,8,9,10,11]],[,,"(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",,,,"101234567",,,[9]],[,,"(?:6[1-58]|970\\d)\\d{7}",,,,"612345678",,,[9,11]],[,,"800\\d{4,7}",,,,"8001234",,,[7,8,9,10]],[,,"90[069]\\d{4,7}",,,,"9061234",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:85|91)\\d{7}",,,,"851234567",,,[9]],"NL",31,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["1[238]|[34]"]],[,"(\\d{2})(\\d{3,4})","$1 $2",["14"]],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],[,,"66\\d{7}",,,,"662345678",,,[9]],,,[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)\\d",,,,,,,[5,6]],[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",,,,"14020",,,[5,6,9]],,,[,,,,,,,,,[-1]]],NO:[,[,,"(?:0|[2-9]\\d{3})\\d{4}",,,,,,,[5,8]],[,,"(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",,,,"21234567",,,[8]],[,,"(?:4[015-8]|9\\d)\\d{6}",,,,"40612345",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"NO",47,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],,[,,,,,,,,,[-1]],1,"[02-689]|7[0-8]",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],NP:[,[,,"(?:1\\d|9)\\d{9}|[1-9]\\d{7}",,,,,,,[8,10,11],[6,7]],[,,"(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",,,,"14567890",,,[8],[6,7]],[,,"9(?:6[0-3]|7[024-6]|8[0-24-68])\\d{7}",,,,"9841234567",,,[10]],[,,"1(?:66001|800\\d\\d)\\d{5}",,,,"16600101234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NP",977,"00","0",,,"0",,,,[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]],[,"(\\d{4})(\\d{2})(\\d{5})","$1-$2-$3",["1"]]],[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NR:[,[,,"(?:444|(?:55|8\\d)\\d|666)\\d{4}",,,,,,,[7]],[,,"444\\d{4}",,,,"4441234"],[,,"(?:55[3-9]|666|8\\d\\d)\\d{4}",,,,"5551234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NR",674,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NU:[,[,,"(?:[4-7]|888\\d)\\d{3}",,,,,,,[4,7]],[,,"[47]\\d{3}",,,,"7012",,,[4]],[,,"(?:[56]|888[1-9])\\d{3}",,,,"8884012"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NU",683,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NZ:[,[,,"[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",,,,,,,[5,6,7,8,9,10]],[,,"24099\\d{3}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",,,,"32345678",,,[8],[7]],[,,"2(?:[0-27-9]\\d|6)\\d{6,7}|2(?:1\\d|75)\\d{5}",,,,"211234567",,,[8,9,10]],[,,"508\\d{6,7}|80\\d{6,8}",,,,"800123456",,,[8,9,10]],[,,"(?:1[13-57-9]\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",,,,"900123456",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,"70\\d{7}",,,,"701234567",,,[9]],[,,,,,,,,,[-1]],"NZ",64,"0(?:0|161)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"8(?:1[16-9]|22|3\\d|4[045]|5[459]|6[235-9]|7[0-3579]|90)\\d{2,7}",,,,"83012378"],,,[,,,,,,,,,[-1]]],OM:[,[,,"(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",,,,,,,[7,8,9]],[,,"2[1-6]\\d{6}",,,,"23123456",,,[8]],[,,"1505\\d{4}|(?:7(?:[1289]\\d|6[89]|7[0-5])|9(?:0[1-9]|[1-9]\\d))\\d{5}",,,,"92123456",,,[8]],[,,"8007\\d{4,5}|(?:500|800[05])\\d{4}",,,,"80071234"],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"OM",968,"00",,,,,,,,[[,"(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],[,"(\\d{2})(\\d{6})","$1 $2",["2"]],[,"(\\d{4})(\\d{4})","$1 $2",["[179]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PA:[,[,,"(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",,,,,,,[7,8,10,11]],[,,"(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[058]|7[0167]|8[2358]|9[1389])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[02-9])|3(?:[089]\\d|1[0-7]|2[0-5]|33|4[0-79]|5[0-35]|6[068]|7[0-8])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[0156]|7[0-24-9]|8[5-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",,,,"2001234",,,[7]],[,,"(?:1[16]1|21[89]|6\\d{3}|8(?:1[01]|7[23]))\\d{4}",,,,"61234567",,,[7,8]],[,,"800\\d{4,5}|(?:00800|800\\d)\\d{6}",,,,"8001234"],[,,"(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",,,,"8601234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PA",507,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[68]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PE:[,[,,"(?:[14-8]|9\\d)\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:(?:4[34]|5[14])[0-8]\\d|7(?:173|3[0-8]\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",,,,"11234567",,,[8],[6,7]],[,,"9\\d{8}",,,,"912345678",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"805\\d{5}",,,,"80512345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,"80[24]\\d{5}",,,,"80212345",,,[8]],[,,,,,,,,,[-1]],"PE",51,"00|19(?:1[124]|77|90)00","0"," Anexo ",,"0",,"00",,[[,"(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PF:[,[,,"4\\d{5}(?:\\d{2})?|8\\d{7,8}",,,,,,,[6,8,9]],[,,"4(?:0[4-689]|9[4-68])\\d{5}",,,,"40412345",,,[8]],[,,"8[7-9]\\d{6}",,,,"87123456",,,[8]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"499\\d{5}",,,,"49901234",,,[8]],"PF",689,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,"44\\d{4}",,,,,,,[6]],[,,"44\\d{4}",,,,"440123",,,[6]],,,[,,,,,,,,,[-1]]],PG:[,[,,"(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",,,,,,,[7,8]],[,,"(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}",,,,"3123456",,,[7]],[,,"(?:7\\d|8[128])\\d{6}",,,,"70123456",,,[8]],[,,"180\\d{4}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"2(?:0[0-57]|7[568])\\d{4}",,,,"2751234",,,[7]],"PG",675,"00|140[1-3]",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],[,"(\\d{4})(\\d{4})","$1 $2",["[78]"]]],,[,,"27[01]\\d{4}",,,,"2700123",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PH:[,[,,"(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",,,,,,,[6,8,9,10,11,12,13],[4,5,7]],[,,"(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",,,,"232345678",,,[6,8,9,10],[4,5,7]],[,,"(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[235-7]\\d|4[2-9]|8[135-9]|9[1-9]))\\d{7}",,,,"9051234567",,,[10]],[,,"1800\\d{7,9}",,,,"180012345678",,,[11,12,13]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PH",63,"00","0",,,"0",,,,[[,"(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],[,"(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],[,"(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PK:[,[,,"122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",,,,,,,[8,9,10,11,12],[5,6,7]],[,,"(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",,,,"2123456789",,,[9,10],[5,6,7,8]],[,,"3(?:[0-247]\\d|3[0-79]|55|64)\\d{7}",,,,"3012345678",,,[10]],[,,"800\\d{5}(?:\\d{3})?",,,,"80012345",,,[8,11]],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,"122\\d{6}",,,,"122044444",,,[9]],[,,,,,,,,,[-1]],"PK",92,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["1"]],[,"(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],[,"(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],[,"(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",,,,"21111825888",,,[11,12]],,,[,,,,,,,,,[-1]]],PL:[,[,,"(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",,,,,,,[6,7,8,9,10]],[,,"47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",,,,"123456789",,,[7,9]],[,,"21(?:1(?:[145]\\d|3[1-5])|2\\d\\d)\\d{4}|(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",,,,"512345678",,,[9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"70[01346-8]\\d{6}",,,,"701234567",,,[9]],[,,"801\\d{6}",,,,"801234567",,,[9]],[,,,,,,,,,[-1]],[,,"39\\d{7}",,,,"391234567",,,[9]],"PL",48,"00",,,,,,,,[[,"(\\d{5})","$1",["19"]],[,"(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]],,[,,"64\\d{4,7}",,,,"641234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]],[,,"804\\d{6}",,,,"804123456",,,[9]],,,[,,,,,,,,,[-1]]],PM:[,[,,"[45]\\d{5}|(?:708|80\\d)\\d{6}",,,,,,,[6,9]],[,,"(?:4[1-35-7]|5[01])\\d{4}",,,,"430123",,,[6]],[,,"(?:4[02-4]|5[056]|708[45][0-5])\\d{4}",,,,"551234"],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PM",508,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PR:[,[,,"(?:[589]\\d\\d|787)\\d{7}",,,,,,,[10],[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"PR",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,"787|939",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PS:[,[,,"[2489]2\\d{6}|(?:1\\d|5)\\d{8}",,,,,,,[8,9,10],[7]],[,,"(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",,,,"22234567",,,[8],[7]],[,,"5[69]\\d{7}",,,,"599123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,,,,,,,,[-1]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PS",970,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PT:[,[,,"1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",,,,,,,[9]],[,,"2(?:[12]\\d|3[1-689]|4[1-59]|[57][1-9]|6[1-35689]|8[1-69]|9[1256])\\d{6}",,,,"212345678"],[,,"6(?:[06]92(?:30|9\\d)|[35]92(?:3[03]|9\\d))\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}",,,,"912345678"],[,,"80[02]\\d{6}",,,,"800123456"],[,,"(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}",,,,"760123456"],[,,"80(?:8\\d|9[1579])\\d{5}",,,,"808123456"],[,,"884[0-4689]\\d{5}",,,,"884123456"],[,,"30\\d{7}",,,,"301234567"],"PT",351,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]],,[,,"6222\\d{5}",,,,"622212345"],,,[,,,,,,,,,[-1]],[,,"70(?:38[01]|596|(?:7\\d|8[17])\\d)\\d{4}",,,,"707123456"],,,[,,"600\\d{6}|6[06]9233\\d{3}",,,,"600110000"]],PW:[,[,,"(?:[24-8]\\d\\d|345|900)\\d{4}",,,,,,,[7]],[,,"(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}",,,,"2771234"],[,,"(?:(?:46|83)[0-5]|6[2-4689]0)\\d{4}|(?:45|77|88)\\d{5}",,,,"6201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PW",680,"01[12]",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PY:[,[,,"59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",,,,"212345678",,,[7,8,9],[5,6]],[,,"9(?:51|6[129]|7[1-6]|8[1-7]|9[1-5])\\d{6}",,,,"961456789",,,[9]],[,,"9800\\d{5,7}",,,,"98000123456",,,[9,10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8700[0-4]\\d{4}",,,,"870012345",,,[9]],"PY",595,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],[,"(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],[,"(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"[2-9]0\\d{4,7}",,,,"201234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]]],QA:[,[,,"800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",,,,,,,[7,8,9,11]],[,,"4(?:1111|2022)\\d{3}|4(?:[04]\\d\\d|14[0-6]|999)\\d{4}",,,,"44123456",,,[8]],[,,"[35-7]\\d{7}",,,,"33123456",,,[8]],[,,"800\\d{4}|(?:0080[01]|800)\\d{6}",,,,"8001234",,,[7,9,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"QA",974,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],[,"(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]],,[,,"2[16]\\d{5}",,,,"2123456",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RE:[,[,,"(?:26|[689]\\d)\\d{7}",,,,,,,[9]],[,,"26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}",,,,"262161234"],[,,"69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}",,,,"692123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89[1-37-9]\\d{6}",,,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"9(?:399[0-3]|479[0-5]|76(?:2[27]|3[0-37]))\\d{4}",,,,"939901234"],"RE",262,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RO:[,[,,"(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",,,,,,,[6,9]],[,,"[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d",,,,"211234567"],[,,"7020\\d{5}|(?:6(?:2\\d|40)|7(?:0[013-9]|1[0-3]|[2-7]\\d|8[03-8]|9[0-39]))\\d{6}",,,,"712034567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[0136]\\d{6}",,,,"900123456",,,[9]],[,,"801\\d{6}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RO",40,"00","0"," int ",,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],[,"(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:37\\d|80[578])\\d{6}",,,,"372123456",,,[9]],,,[,,,,,,,,,[-1]]],RS:[,[,,"38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",,,,,,,[6,7,8,9,10,11,12],[4,5]],[,,"(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",,,,"10234567",,,[7,8,9,10,11,12],[4,5,6]],[,,"6(?:[0-689]|7\\d)\\d{6,7}",,,,"601234567",,,[8,9,10]],[,,"800\\d{3,9}",,,,"80012345"],[,,"(?:78\\d|90[0169])\\d{3,7}",,,,"90012345",,,[6,7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RS",381,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],[,"(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7[06]\\d{4,10}",,,,"700123456"],,,[,,,,,,,,,[-1]]],RU:[,[,,"8\\d{13}|[347-9]\\d{9}",,,,,,,[10,14],[7]],[,,"(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}",,,,"3011234567",,,[10],[7]],[,,"9\\d{9}",,,,"9123456789",,,[10]],[,,"8(?:0[04]|108\\d{3})\\d{7}",,,,"8001234567"],[,,"80[39]\\d{7}",,,,"8091234567",,,[10]],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567",,,[10]],[,,,,,,,,,[-1]],"RU",7,"810","8",,,"8",,"8~10",,[[,"(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3",["[0-79]"]],[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",,1],[,"(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],[[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",,1],[,"(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],[,,,,,,,,,[-1]],1,"3[04-689]|[489]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RW:[,[,,"(?:06|[27]\\d\\d|[89]00)\\d{6}",,,,,,,[8,9]],[,,"(?:06|2[23568]\\d)\\d{6}",,,,"250123456"],[,,"7[237-9]\\d{7}",,,,"720123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900\\d{6}",,,,"900123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RW",250,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SA:[,[,,"92\\d{7}|(?:[15]|8\\d)\\d{8}",,,,,,,[9,10],[7]],[,,"1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",,,,"112345678",,,[9],[7]],[,,"579[01]\\d{5}|5(?:[013-689]\\d|7[0-8])\\d{6}",,,,"512345678",,,[9]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"925\\d{6}",,,,"925012345",,,[9]],[,,"920\\d{6}",,,,"920012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SA",966,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["9"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"811\\d{7}",,,,"8110123456",,,[10]],,,[,,,,,,,,,[-1]]],SB:[,[,,"(?:[1-6]|[7-9]\\d\\d)\\d{4}",,,,,,,[5,7]],[,,"(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",,,,"40123",,,[5]],[,,"48\\d{3}|(?:(?:7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}",,,,"7421234"],[,,"1[38]\\d{3}",,,,"18123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[12]\\d{3}",,,,"51123",,,[5]],"SB",677,"0[01]",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SC:[,[,,"800\\d{4}|(?:[249]\\d|64)\\d{5}",,,,,,,[7]],[,,"4[2-46]\\d{5}",,,,"4217123"],[,,"2[125-8]\\d{5}",,,,"2510123"],[,,"800[08]\\d{3}",,,,"8000000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"971\\d{4}|(?:64|95)\\d{5}",,,,"6412345"],"SC",248,"010|0[0-2]",,,,,,"00",,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SD:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1(?:5\\d|8[35-7])\\d{6}",,,,"153123456"],[,,"(?:1[0-2]|9[0-3569])\\d{7}",,,,"911231234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SD",249,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SE:[,[,,"(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",,,,,,,[6,7,8,9,10,12]],[,,"(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",,,,"8123456",,,[7,8,9]],[,,"7[02369]\\d{7}",,,,"701234567",,,[9]],[,,"20\\d{4,7}",,,,"20123456",,,[6,7,8,9]],[,,"649\\d{6}|99[1-59]\\d{4}(?:\\d{3})?|9(?:00|39|44)[1-8]\\d{3,6}",,,,"9001234567",,,[7,8,9,10]],[,,"77[0-7]\\d{6}",,,,"771234567",,,[9]],[,,"75[1-8]\\d{6}",,,,"751234567",,,[9]],[,,,,,,,,,[-1]],"SE",46,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1"],[,"(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1"],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1"]],[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1 $2 $3",["20"]],[,"(\\d{3})(\\d{4})","$1 $2",["9(?:00|39|44|9)"]],[,"(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"]],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1 $2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1 $2 $3",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["10|7"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]],[,,"74[02-9]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"10[1-8]\\d{6}",,,,"102345678",,,[9]],,,[,,"(?:25[245]|67[3-68])\\d{9}",,,,"254123456789",,,[12]]],SG:[,[,,"(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",,,,,,,[8,10,11]],[,,"662[0-24-9]\\d{4}|6(?:[0-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",,,,"61234567",,,[8]],[,,"8(?:08[013-9]|95[0-2])\\d{4}|(?:8(?:0[1-7]|[1-8]\\d|9[0-4])|9[0-8]\\d)\\d{5}",,,,"81234567",,,[8]],[,,"(?:18|8)00\\d{7}",,,,"18001234567",,,[10,11]],[,,"1900\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[12]\\d|666)\\d{5}",,,,"31234567",,,[8]],"SG",65,"0[0-3]\\d",,,,,,,,[[,"(\\d{4,5})","$1",["1[013-9]|77","1(?:[013-8]|9(?:0[1-9]|[1-9]))|77"]],[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-8]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-8]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7000\\d{7}",,,,"70001234567",,,[11]],,,[,,,,,,,,,[-1]]],SH:[,[,,"(?:[256]\\d|8)\\d{3}",,,,,,,[4,5]],[,,"2(?:[0-57-9]\\d|6[4-9])\\d\\d",,,,"22158"],[,,"[56]\\d{4}",,,,"51234",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"262\\d\\d",,,,"26212",,,[5]],"SH",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],1,"[256]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SI:[,[,,"[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",,,,,,,[5,6,7,8]],[,,"(?:[1-357][2-8]|4[24-8])\\d{6}",,,,"12345678",,,[8],[7]],[,,"65(?:[178]\\d|5[56]|6[01])\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",,,,"31234567",,,[8]],[,,"80\\d{4,6}",,,,"80123456",,,[6,7,8]],[,,"89[1-3]\\d{2,5}|90\\d{4,6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-589])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",,,,"59012345",,,[8]],"SI",386,"00|10(?:22|66|88|99)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SJ:[,[,,"0\\d{4}|(?:[489]\\d|79)\\d{6}",,,,,,,[5,8]],[,,"79\\d{6}",,,,"79123456",,,[8]],[,,"(?:4[015-8]|9\\d)\\d{6}",,,,"41234567",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"SJ",47,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"79",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],SK:[,[,,"[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",,,,,,,[6,7,9]],[,,"(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d",,,,"221234567"],[,,"909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",,,,"912123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:00|[78]\\d)\\d{6}",,,,"900123456",,,[9]],[,,"8[5-9]\\d{7}",,,,"850123456",,,[9]],[,,,,,,,,,[-1]],[,,"6(?:02|5[0-4]|9[0-6])\\d{6}",,,,"690123456",,,[9]],"SK",421,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d{4})(\\d{3})","$1 $2",["909","9090"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[,,"9090\\d{3}",,,,"9090123",,,[7]],,,[,,"9090\\d{3}|(?:602|8(?:00|[5-9]\\d)|9(?:00|[78]\\d))\\d{6}",,,,,,,[7,9]],[,,"96\\d{7}",,,,"961234567",,,[9]],,,[,,,,,,,,,[-1]]],SL:[,[,,"(?:[237-9]\\d|66)\\d{6}",,,,,,,[8],[6]],[,,"22[2-4][2-9]\\d{4}",,,,"22221234",,,,[6]],[,,"(?:25|3[0-5]|66|7[2-9]|8[08]|9[09])\\d{6}",,,,"25123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SL",232,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SM:[,[,,"(?:0549|[5-7]\\d)\\d{6}",,,,,,,[8,10],[6]],[,,"0549(?:8[0157-9]|9\\d)\\d{4}",,,,"0549886377",,,[10],[6]],[,,"6[16]\\d{6}",,,,"66661212",,,[8]],[,,,,,,,,,[-1]],[,,"7[178]\\d{6}",,,,"71123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[158]\\d{6}",,,,"58001110",,,[8]],"SM",378,"00",,,,"([89]\\d{5})$","0549$1",,,[[,"(\\d{6})","$1",["[89]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SN:[,[,,"(?:[378]\\d|93)\\d{7}",,,,,,,[9]],[,,"3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}",,,,"301012345"],[,,"7(?:(?:[06-8]\\d|21|90)\\d|5(?:01|[19]0|25|[38]3|[4-7]\\d))\\d{5}",,,,"701234567"],[,,"800\\d{6}",,,,"800123456"],[,,"88[4689]\\d{6}",,,,"884123456"],[,,"81[02468]\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"(?:3(?:392|9[01]\\d)\\d|93(?:3[13]0|929))\\d{4}",,,,"933301234"],"SN",221,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SO:[,[,,"[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",,,,,,,[6,7,8,9]],[,,"(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",,,,"4012345",,,[6,7]],[,,"(?:(?:15|(?:3[59]|4[89]|6\\d|7[79]|8[08])\\d|9(?:0\\d|[2-9]))\\d|2(?:4\\d|8))\\d{5}|(?:[67]\\d\\d|904)\\d{5}",,,,"71123456",,,[7,8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SO",252,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4})","$1 $2",["8[125]"]],[,"(\\d{6})","$1",["[134]"]],[,"(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],[,"(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],[,"(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SR:[,[,,"(?:[2-5]|68|[78]\\d)\\d{5}",,,,,,,[6,7]],[,,"(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}",,,,"211234"],[,,"(?:7[124-7]|8[124-9])\\d{5}",,,,"7412345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"56\\d{4}",,,,"561234",,,[6]],"SR",597,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],[,"(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SS:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1[89]\\d{7}",,,,"181234567"],[,,"(?:12|9[1257-9])\\d{7}",,,,"977123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SS",211,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ST:[,[,,"(?:22|9\\d)\\d{5}",,,,,,,[7]],[,,"22\\d{5}",,,,"2221234"],[,,"900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}",,,,"9812345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ST",239,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SV:[,[,,"[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",,,,,,,[7,8,11]],[,,"2(?:79(?:0[0347-9]|[1-9]\\d)|89(?:0[024589]|[1-9]\\d))\\d{3}|2(?:[1-69]\\d|[78][0-8])\\d{5}",,,,"21234567",,,[8]],[,,"[67]\\d{7}",,,,"70123456",,,[8]],[,,"800\\d{4}(?:\\d{4})?",,,,"8001234",,,[7,11]],[,,"900\\d{4}(?:\\d{4})?",,,,"9001234",,,[7,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SV",503,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[89]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[267]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SX:[,[,,"7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"7215(?:4[2-8]|8[239]|9[056])\\d{4}",,,,"7215425678",,,,[7]],[,,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}",,,,"7215205678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"SX",1,"011","1",,,"(5\\d{6})$|1","721$1",,,,,[,,,,,,,,,[-1]],,"721",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SY:[,[,,"[1-39]\\d{8}|[1-5]\\d{7}",,,,,,,[8,9],[6,7]],[,,"21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}",,,,"112345678",,,,[6,7]],[,,"9[1-689]\\d{7}",,,,"944567890",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SY",963,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SZ:[,[,,"0800\\d{4}|(?:[237]\\d|900)\\d{6}",,,,,,,[8,9]],[,,"[23][2-5]\\d{6}",,,,"22171234",,,[8]],[,,"7[6-9]\\d{6}",,,,"76123456",,,[8]],[,,"0800\\d{4}",,,,"08001234",,,[8]],[,,"900\\d{6}",,,,"900012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70\\d{6}",,,,"70012345",,,[8]],"SZ",268,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[0237]"]],[,"(\\d{5})(\\d{4})","$1 $2",["9"]]],,[,,,,,,,,,[-1]],,,[,,"0800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TA:[,[,,"8\\d{3}",,,,,,,[4]],[,,"8\\d{3}",,,,"8999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TA",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"8",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TC:[,[,,"(?:[58]\\d\\d|649|900)\\d{7}",,,,,,,[10],[7]],[,,"649(?:266|712|9(?:4\\d|50))\\d{4}",,,,"6497121234",,,,[7]],[,,"649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}",,,,"6492311234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"649(?:71[01]|966)\\d{4}",,,,"6497101234",,,,[7]],"TC",1,"011","1",,,"([2-479]\\d{6})$|1","649$1",,,,,[,,,,,,,,,[-1]],,"649",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TD:[,[,,"(?:22|[69]\\d|77)\\d{6}",,,,,,,[8]],[,,"22(?:[37-9]0|5[0-5]|6[89])\\d{4}",,,,"22501234"],[,,"(?:6[0235689]|77|9\\d)\\d{6}",,,,"63012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TD",235,"00|16",,,,,,"00",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TG:[,[,,"[279]\\d{7}",,,,,,,[8]],[,,"2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}",,,,"22212345"],[,,"(?:7[019]|9[0-36-9])\\d{6}",,,,"90112345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TG",228,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TH:[,[,,"(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",,,,,,,[8,9,10,13]],[,,"(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",,,,"21234567",,,[8]],[,,"671[0-8]\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}",,,,"812345678",,,[9]],[,,"(?:001800\\d|1800)\\d{6}",,,,"1800123456",,,[10,13]],[,,"1900\\d{6}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"6[08]\\d{7}",,,,"601234567",,,[9]],"TH",66,"00[1-9]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TJ:[,[,,"[0-57-9]\\d{8}",,,,,,,[9],[3,5,6,7]],[,,"(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}",,,,"372123456",,,,[3,5,6,7]],[,,"(?:4(?:1[18]|4[02-479])|81[1-9])\\d{6}|(?:0[0-57-9]|1[017]|2[02]|[34]0|5[05]|7[0178]|8[078]|9\\d)\\d{7}",,,,"917123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TJ",992,"810",,,,,,"8~10",,[[,"(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],[,"(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TK:[,[,,"[2-47]\\d{3,6}",,,,,,,[4,5,6,7]],[,,"(?:2[2-4]|[34]\\d)\\d{2,5}",,,,"3101"],[,,"7[2-4]\\d{2,5}",,,,"7290"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TK",690,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TL:[,[,,"7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",,,,,,,[7,8]],[,,"(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",,,,"2112345",,,[7]],[,,"7[2-8]\\d{6}",,,,"77212345",,,[8]],[,,"80\\d{5}",,,,"8012345",,,[7]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,"70\\d{5}",,,,"7012345",,,[7]],[,,,,,,,,,[-1]],"TL",670,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],[,"(\\d{4})(\\d{4})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TM:[,[,,"[1-6]\\d{7}",,,,,,,[8]],[,,"(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}",,,,"12345678"],[,,"6\\d{7}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TM",993,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],[,"(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TN:[,[,,"[2-57-9]\\d{7}",,,,,,,[8]],[,,"81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}",,,,"30010123"],[,,"3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-8])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}",,,,"20123456"],[,,"8010\\d{4}",,,,"80101234"],[,,"88\\d{6}",,,,"88123456"],[,,"8[12]10\\d{4}",,,,"81101234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TN",216,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TO:[,[,,"(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",,,,,,,[5,7]],[,,"(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",,,,"20123",,,[5]],[,,"(?:55[4-6]|6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",,,,"7715123",,,[7]],[,,"0800\\d{3}",,,,"0800222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"55[0-37-9]\\d{4}",,,,"5510123",,,[7]],"TO",676,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TR:[,[,,"4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",,,,,,,[7,10,12,13]],[,,"(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",,,,"2123456789",,,[10]],[,,"561(?:011|61\\d)\\d{4}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",,,,"5012345678",,,[10]],[,,"8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})",,,,"8001234567",,,[10,12,13]],[,,"(?:8[89]8|900)\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,"592(?:21[12]|461)\\d{4}",,,,"5922121234",,,[10]],[,,"850\\d{7}",,,,"8500123456",,,[10]],"TR",90,"00","0",,,"0",,,,[[,"(\\d{3})(\\d)(\\d{3})","$1 $2 $3",["444"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[,,"512\\d{7}",,,,"5123456789",,,[10]],,,[,,"(?:444|811\\d{3})\\d{4}",,,,,,,[7,10]],[,,"444\\d{4}",,,,"4441444",,,[7]],,,[,,,,,,,,,[-1]]],TT:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"868(?:2(?:01|1[5-9]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",,,,"8682211234",,,,[7]],[,,"868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}",,,,"8682911234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"TT",1,"011","1",,,"([2-46-8]\\d{6})$|1","868$1",,,,,[,,,,,,,,,[-1]],,"868",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"868619\\d{4}",,,,"8686191234",,,,[7]]],TV:[,[,,"(?:2|7\\d\\d|90)\\d{4}",,,,,,,[5,6,7]],[,,"2[02-9]\\d{3}",,,,"20123",,,[5]],[,,"(?:7[01]\\d|90)\\d{4}",,,,"901234",,,[6,7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TV",688,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2"]],[,"(\\d{2})(\\d{4})","$1 $2",["90"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TW:[,[,,"[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",,,,,,,[7,8,9,10,11]],[,,"(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",,,,"221234567",,,[8,9]],[,,"(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",,,,"912345678",,,[9]],[,,"80[0-79]\\d{6}|800\\d{5}",,,,"800123456",,,[8,9]],[,,"20(?:[013-9]\\d\\d|2)\\d{4}",,,,"203123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"99\\d{7}",,,,"990123456",,,[9]],[,,"7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",,,,"7012345678",,,[10,11]],"TW",886,"0(?:0[25-79]|19)","0","#",,"0",,,,[[,"(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"50[0-46-9]\\d{6}",,,,"500123456",,,[9]],,,[,,,,,,,,,[-1]]],TZ:[,[,,"(?:[25-8]\\d|41|90)\\d{7}",,,,,,,[9]],[,,"2[2-8]\\d{7}",,,,"222345678"],[,,"77[2-9]\\d{6}|(?:6[125-9]|7[13-689])\\d{7}",,,,"621234567"],[,,"80[08]\\d{6}",,,,"800123456"],[,,"90\\d{7}",,,,"900123456"],[,,"8(?:40|6[01])\\d{6}",,,,"840123456"],[,,,,,,,,,[-1]],[,,"41\\d{7}",,,,"412345678"],"TZ",255,"00[056]","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["5"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"(?:8(?:[04]0|6[01])|90\\d)\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UA:[,[,,"[89]\\d{9}|[3-9]\\d{8}",,,,,,,[9,10],[5,6,7]],[,,"(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",,,,"311234567",,,[9],[5,6,7]],[,,"(?:39|50|6[36-8]|7[1-3]|9[1-9])\\d{7}",,,,"501234567",,,[9]],[,,"800[1-8]\\d{5,6}",,,,"800123456"],[,,"900[239]\\d{5,6}",,,,"900212345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"89[1-579]\\d{6}",,,,"891234567",,,[9]],"UA",380,"00","0",,,"0",,"0~0",,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UG:[,[,,"800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",,,,,,,[9],[5,6,7]],[,,"20(?:(?:240|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[017]\\d|2[5-9]|32|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}",,,,"312345678",,,,[5,6,7]],[,,"726[01]\\d{5}|7(?:[015-8]\\d|20|36|4[0-4]|9[89])\\d{6}",,,,"712345678"],[,,"800[1-3]\\d{5}",,,,"800123456"],[,,"90[1-3]\\d{6}",,,,"901123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UG",256,"00[057]","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],US:[,[,,"[2-9]\\d{9}|3\\d{6}",,,,,,,[10],[7]],[,,"(?:5056(?:[0-35-9]\\d|4[468])|73020\\d)\\d{4}|(?:472[24]|505[2-57-9]|983[289])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[0149]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"(?:5056(?:[0-35-9]\\d|4[468])|73020\\d)\\d{4}|(?:472[24]|505[2-57-9]|983[289])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[0149]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"US",1,"011","1",,,"1",,,1,[[,"(\\d{3})(\\d{4})","$1-$2",["310"],,,1],[,"(\\d{3})(\\d{4})","$1-$2",["[24-9]|3(?:[02-9]|1[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],,,1]],[[,"(\\d{3})(\\d{4})","$1-$2",["310"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[2-9]"]]],[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UY:[,[,,"0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",,,,,,,[6,7,8,9,10,11,12,13]],[,,"(?:1(?:770|9(?:20|87))|(?:2\\d|4[2-7])\\d\\d)\\d{4}",,,,"21231234",,,[8],[7]],[,,"9[1-9]\\d{6}",,,,"94231234",,,[8]],[,,"0004\\d{2,9}|(?:405|80[05])\\d{4}",,,,"8001234"],[,,"90[0-8]\\d{4}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UY",598,"0(?:0|1[3-9]\\d)","0"," int. ",,"0",,"00",,[[,"(\\d{3})(\\d{3,4})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[124]"]],[,"(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UZ:[,[,,"(?:20|33|[5-79]\\d|88)\\d{7}",,,,,,,[9]],[,,"(?:55\\d\\d|6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d\\d|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|(?:1[12]|[68]\\d)\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|9(?:22|5[1-9])))\\d{5}",,,,"669050123"],[,,"(?:(?:[25]0|33|88|9[0-57-9])\\d{3}|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|3[01]|5\\d|7[0-4])|(?:5[67]|7\\d)\\d|6(?:2[0-26]|8\\d)))|7(?:[07]\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UZ",998,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VA:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"06698\\d{1,6}",,,,"0669812345",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"VA",39,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"06698",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],VC:[,[,,"(?:[58]\\d\\d|784|900)\\d{7}",,,,,,,[10],[7]],[,,"784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",,,,"7842661234",,,,[7]],[,,"784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}",,,,"7844301234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"78451[0-2]\\d{4}",,,,"7845101234",,,,[7]],"VC",1,"011","1",,,"([2-7]\\d{6})$|1","784$1",,,,,[,,,,,,,,,[-1]],,"784",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VE:[,[,,"[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}",,,,"2121234567",,,,[7]],[,,"4(?:1[24-8]|2[46])\\d{7}",,,,"4121234567"],[,,"800\\d{7}",,,,"8001234567"],[,,"90[01]\\d{7}",,,,"9001234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"VE",58,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1","$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"501\\d{7}",,,,"5010123456",,,,[7]],,,[,,,,,,,,,[-1]]],VG:[,[,,"(?:284|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}",,,,"2842291234",,,,[7]],[,,"284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|9[69])|5(?:4[0-7]|68|9[69]))\\d{4}",,,,"2843001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VG",1,"011","1",,,"([2-578]\\d{6})$|1","284$1",,,,,[,,,,,,,,,[-1]],,"284",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VI:[,[,,"[58]\\d{9}|(?:34|90)0\\d{7}",,,,,,,[10],[7]],[,,"340(?:2(?:0[0-368]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"340(?:2(?:0[0-368]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VI",1,"011","1",,,"([2-9]\\d{6})$|1","340$1",,1,,,[,,,,,,,,,[-1]],,"340",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VN:[,[,,"[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",,,,,,,[7,8,9,10]],[,,"2(?:0[3-9]|1[0-689]|2[0-25-9]|[38][2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|9[0-4679])\\d{7}",,,,"2101234567",,,[10]],[,,"(?:5(?:2[238]|59)|89[6-9]|99[013-9])\\d{6}|(?:3\\d|5[1689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",,,,"912345678",,,[9]],[,,"1800\\d{4,6}|12(?:0[13]|28)\\d{4}",,,,"1800123456",,,[8,9,10]],[,,"1900\\d{4,6}",,,,"1900123456",,,[8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"672\\d{6}",,,,"672012345",,,[9]],"VN",84,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[17]99"],"0$1",,1],[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{3})(\\d{4,5})","$1 $2",["69"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"[17]99\\d{4}|69\\d{5,6}",,,,,,,[7,8]],[,,"(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",,,,"1992000",,,[7,8]],,,[,,,,,,,,,[-1]]],VU:[,[,,"[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",,,,,,,[5,7]],[,,"(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",,,,"22123",,,[5]],[,,"(?:[58]\\d|7[013-7])\\d{5}",,,,"5912345",,,[7]],[,,"81[18]\\d\\d",,,,"81123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:0[1-9]|1[01])\\d{4}",,,,"9010123",,,[7]],"VU",678,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:3[03]|900\\d)\\d{3}",,,,"30123"],,,[,,,,,,,,,[-1]]],WF:[,[,,"(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",,,,,,,[6,9]],[,,"72\\d{4}",,,,"721234",,,[6]],[,,"(?:72|8[23])\\d{4}",,,,"821234",,,[6]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WF",681,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"[48]0\\d{4}",,,,"401234",,,[6]]],WS:[,[,,"(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",,,,,,,[5,6,7,10]],[,,"6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",,,,"22123",,,[5,6]],[,,"(?:7[1-35-7]|8(?:[3-7]|9\\d{3}))\\d{5}",,,,"7212345",,,[7,10]],[,,"800\\d{3}",,,,"800123",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WS",685,"0",,,,,,,,[[,"(\\d{5})","$1",["[2-5]|6[1-9]"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],XK:[,[,,"[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",,,,,,,[8,9]],[,,"(?:2[89]|39)0\\d{6}|[23][89]\\d{6}",,,,"28012345"],[,,"4[3-9]\\d{6}",,,,"43201234",,,[8]],[,,"800\\d{5}",,,,"80001234",,,[8]],[,,"900\\d{5}",,,,"90001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"XK",383,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YE:[,[,,"(?:1|7\\d)\\d{7}|[1-7]\\d{6}",,,,,,,[7,8,9],[6]],[,,"78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",,,,"1234567",,,[7,8],[6]],[,,"7[01378]\\d{7}",,,,"712345678",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YE",967,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YT:[,[,,"(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",,,,,,,[9]],[,,"269(?:0[0-467]|5[0-4]|6\\d|[78]0)\\d{4}",,,,"269601234"],[,,"639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}",,,,"639012345"],[,,"80\\d{7}",,,,"801234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:39|47)8[01]|769\\d)\\d{4}",,,,"939801234"],"YT",262,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZA:[,[,,"[1-79]\\d{8}|8\\d{4,9}",,,,,,,[5,6,7,8,9,10]],[,,"(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",,,,"101234567",,,[9]],[,,"(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:6\\d|7[0-46-9])\\d{3}|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",,,,"711234567",,,[5,6,7,8,9]],[,,"80\\d{7}",,,,"801234567",,,[9]],[,,"(?:86[2-9]|9[0-2]\\d)\\d{6}",,,,"862345678",,,[9]],[,,"860\\d{6}",,,,"860123456",,,[9]],[,,,,,,,,,[-1]],[,,"87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",,,,"871234567",,,[9]],"ZA",27,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"861\\d{6,7}",,,,"861123456",,,[9,10]],,,[,,,,,,,,,[-1]]],ZM:[,[,,"800\\d{6}|(?:21|63|[79]\\d)\\d{7}",,,,,,,[9],[6]],[,,"21[1-8]\\d{6}",,,,"211234567",,,,[6]],[,,"(?:7[5-79]|9[5-8])\\d{7}",,,,"955123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"63\\d{7}",,,,"630123456"],"ZM",260,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[1-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZW:[,[,,"2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",,,,,,,[5,6,7,8,9,10],[3,4]],[,,"(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}",,,,"1312345",,,,[3,4]],[,,"7(?:[178]\\d|3[1-9])\\d{6}",,,,"712345678",,,[9]],[,,"80(?:[01]\\d|20|8[0-8])\\d{3}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",,,,"8686123456",,,[10]],"ZW",263,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],[,"(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],[,"(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],800:[,[,,"(?:00|[1-9]\\d)\\d{6}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:00|[1-9]\\d)\\d{6}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",800,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["\\d"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],808:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",808,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],870:[,[,,"7\\d{11}|[35-7]\\d{8}",,,,,,,[9,12]],[,,,,,,,,,[-1]],[,,"(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}",,,,"301234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",870,,,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],878:[,[,,"10\\d{10}",,,,,,,[12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"10\\d{10}",,,,"101234567890"],"001",878,,,,,,,,1,[[,"(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],881:[,[,,"6\\d{9}|[0-36-9]\\d{8}",,,,,,,[9,10]],[,,,,,,,,,[-1]],[,,"6\\d{9}|[0-36-9]\\d{8}",,,,"612345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",881,,,,,,,,,[[,"(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],[,"(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],882:[,[,,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",,,,,,,[7,8,9,10,11,12]],[,,,,,,,,,[-1]],[,,"342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",,,,"3421234",,,[7,8,9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}",,,,"390123456789"],"001",882,,,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["16|342"]],[,"(\\d{2})(\\d{6})","$1 $2",["49"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],[,"(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],[,"(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"348[57]\\d{7}",,,,"34851234567",,,[11]]],883:[,[,,"(?:[1-4]\\d|51)\\d{6,10}",,,,,,,[8,9,10,11,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}",,,,"510012345"],"001",883,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],888:[,[,,"\\d{11}",,,,,,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",888,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"\\d{11}",,,,"12345678901"],,,[,,,,,,,,,[-1]]],979:[,[,,"[1359]\\d{8}",,,,,,,[9],[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1359]\\d{8}",,,,"123456789",,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",979,,,,,,,,1,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]]},i18n.phonenumbers.PhoneNumberUtil=function(){this.regionToMetadataMap={}},goog.addSingletonGetter(i18n.phonenumbers.PhoneNumberUtil),i18n.phonenumbers.Error={INVALID_COUNTRY_CODE:"Invalid country calling code",NOT_A_NUMBER:"The string supplied did not seem to be a phone number",TOO_SHORT_AFTER_IDD:"Phone number too short after IDD",TOO_SHORT_NSN:"The string supplied is too short to be a phone number",TOO_LONG:"The string supplied is too long to be a phone number"},i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_=1,i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_=2,i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_FOR_NSN_=17,i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_COUNTRY_CODE_=3,i18n.phonenumbers.PhoneNumberUtil.MAX_INPUT_STRING_LENGTH_=250,i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_="ZZ",i18n.phonenumbers.PhoneNumberUtil.MOBILE_TOKEN_MAPPINGS_={54:"9"},i18n.phonenumbers.PhoneNumberUtil.GEO_MOBILE_COUNTRIES_=[52,54,55],i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN="+",i18n.phonenumbers.PhoneNumberUtil.STAR_SIGN_="*",i18n.phonenumbers.PhoneNumberUtil.RFC3966_EXTN_PREFIX_=";ext=",i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_="tel:",i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_=";phone-context=",i18n.phonenumbers.PhoneNumberUtil.RFC3966_ISDN_SUBADDRESS_=";isub=",i18n.phonenumbers.PhoneNumberUtil.DIGIT_MAPPINGS={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"},i18n.phonenumbers.PhoneNumberUtil.DIALLABLE_CHAR_MAPPINGS_={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","+":i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN,"*":"*","#":"#"},i18n.phonenumbers.PhoneNumberUtil.ALPHA_MAPPINGS_={A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},i18n.phonenumbers.PhoneNumberUtil.ALL_NORMALIZATION_MAPPINGS_={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},i18n.phonenumbers.PhoneNumberUtil.ALL_PLUS_NUMBER_GROUPING_SYMBOLS_={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",a:"A",b:"B",c:"C",d:"D",e:"E",f:"F",g:"G",h:"H",i:"I",j:"J",k:"K",l:"L",m:"M",n:"N",o:"O",p:"P",q:"Q",r:"R",s:"S",t:"T",u:"U",v:"V",w:"W",x:"X",y:"Y",z:"Z","-":"-","－":"-","‐":"-","‑":"-","‒":"-","–":"-","—":"-","―":"-","−":"-","/":"/","／":"/"," ":" ","　":" ","⁠":" ",".":".","．":"."},i18n.phonenumbers.PhoneNumberUtil.SINGLE_INTERNATIONAL_PREFIX_=/[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?/,i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION="-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～",i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_="0-9０-９٠-٩۰-۹",i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_="A-Za-z",i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_="+＋",i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_PATTERN=new RegExp("["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+"]+"),i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN=new RegExp("^["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+"]+"),i18n.phonenumbers.PhoneNumberUtil.SEPARATOR_PATTERN_="["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]+",i18n.phonenumbers.PhoneNumberUtil.CAPTURING_DIGIT_PATTERN=new RegExp("(["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"])"),i18n.phonenumbers.PhoneNumberUtil.VALID_START_CHAR_PATTERN_=new RegExp("["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]"),i18n.phonenumbers.PhoneNumberUtil.SECOND_NUMBER_START_PATTERN_=/[\\\/] *x/,i18n.phonenumbers.PhoneNumberUtil.UNWANTED_END_CHAR_PATTERN_=new RegExp("[^"+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_+"#]+$"),i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_PHONE_PATTERN_=/(?:.*?[A-Za-z]){3}.*/,i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_PHONE_NUMBER_PATTERN_="["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]{"+i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_+"}",i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_="["+i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_+"]*(?:["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+i18n.phonenumbers.PhoneNumberUtil.STAR_SIGN_+"]*["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]){3,}["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+i18n.phonenumbers.PhoneNumberUtil.STAR_SIGN_+i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]*",i18n.phonenumbers.PhoneNumberUtil.DEFAULT_EXTN_PREFIX_=" ext. ",i18n.phonenumbers.PhoneNumberUtil.RFC3966_VISUAL_SEPARATOR_="[\\-\\.\\(\\)]?",i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_DIGIT_="(["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]|"+i18n.phonenumbers.PhoneNumberUtil.RFC3966_VISUAL_SEPARATOR_+")",i18n.phonenumbers.PhoneNumberUtil.RFC3966_GLOBAL_NUMBER_DIGITS_="^\\"+i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_DIGIT_+"*["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]"+i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_DIGIT_+"*$",i18n.phonenumbers.PhoneNumberUtil.RFC3966_GLOBAL_NUMBER_DIGITS_PATTERN_=new RegExp(i18n.phonenumbers.PhoneNumberUtil.RFC3966_GLOBAL_NUMBER_DIGITS_),i18n.phonenumbers.PhoneNumberUtil.ALPHANUM_=i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_,i18n.phonenumbers.PhoneNumberUtil.RFC3966_DOMAINLABEL_="["+i18n.phonenumbers.PhoneNumberUtil.ALPHANUM_+"]+((\\-)*["+i18n.phonenumbers.PhoneNumberUtil.ALPHANUM_+"])*",i18n.phonenumbers.PhoneNumberUtil.RFC3966_TOPLABEL_="["+i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_+"]+((\\-)*["+i18n.phonenumbers.PhoneNumberUtil.ALPHANUM_+"])*",i18n.phonenumbers.PhoneNumberUtil.RFC3966_DOMAINNAME_="^("+i18n.phonenumbers.PhoneNumberUtil.RFC3966_DOMAINLABEL_+"\\.)*"+i18n.phonenumbers.PhoneNumberUtil.RFC3966_TOPLABEL_+"\\.?$",i18n.phonenumbers.PhoneNumberUtil.RFC3966_DOMAINNAME_PATTERN_=new RegExp(i18n.phonenumbers.PhoneNumberUtil.RFC3966_DOMAINNAME_),i18n.phonenumbers.PhoneNumberUtil.extnDigits_=function(o){return"(["+i18n.phonenumbers.PhoneNumberUtil.VALID_DIGITS_+"]{1,"+o+"})"},i18n.phonenumbers.PhoneNumberUtil.createExtnPattern_=function(){var o=i18n.phonenumbers.PhoneNumberUtil.RFC3966_EXTN_PREFIX_+i18n.phonenumbers.PhoneNumberUtil.extnDigits_("20"),i="[  \\t,]*(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)[:\\.．]?[  \\t,-]*"+i18n.phonenumbers.PhoneNumberUtil.extnDigits_("20")+"#?",et="[  \\t,]*(?:[xｘ#＃~～]|int|ｉｎｔ)[:\\.．]?[  \\t,-]*"+i18n.phonenumbers.PhoneNumberUtil.extnDigits_("9")+"#?",nt="[- ]+"+i18n.phonenumbers.PhoneNumberUtil.extnDigits_("6")+"#",ot="[  \\t]*(?:,{2}|;)[:\\.．]?[  \\t,-]*"+i18n.phonenumbers.PhoneNumberUtil.extnDigits_("15")+"#?",st="[  \\t]*(?:,)+[:\\.．]?[  \\t,-]*"+i18n.phonenumbers.PhoneNumberUtil.extnDigits_("9")+"#?";return o+"|"+i+"|"+et+"|"+nt+"|"+ot+"|"+st},i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERN_=new RegExp("(?:"+i18n.phonenumbers.PhoneNumberUtil.createExtnPattern_()+")$","i"),i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_PATTERN_=new RegExp("^"+i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_PHONE_NUMBER_PATTERN_+"$|^"+i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_+"(?:"+i18n.phonenumbers.PhoneNumberUtil.createExtnPattern_()+")?$","i"),i18n.phonenumbers.PhoneNumberUtil.NON_DIGITS_PATTERN_=/\D+/,i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_PATTERN_=/(\$\d)/,i18n.phonenumbers.PhoneNumberUtil.NP_PATTERN_=/\$NP/,i18n.phonenumbers.PhoneNumberUtil.FG_PATTERN_=/\$FG/,i18n.phonenumbers.PhoneNumberUtil.CC_PATTERN_=/\$CC/,i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_ONLY_PREFIX_PATTERN_=/^\(?\$1\)?$/,i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY="001",i18n.phonenumbers.PhoneNumberFormat={E164:0,INTERNATIONAL:1,NATIONAL:2,RFC3966:3},i18n.phonenumbers.PhoneNumberType={FIXED_LINE:0,MOBILE:1,FIXED_LINE_OR_MOBILE:2,TOLL_FREE:3,PREMIUM_RATE:4,SHARED_COST:5,VOIP:6,PERSONAL_NUMBER:7,PAGER:8,UAN:9,VOICEMAIL:10,UNKNOWN:-1},i18n.phonenumbers.PhoneNumberUtil.MatchType={NOT_A_NUMBER:0,NO_MATCH:1,SHORT_NSN_MATCH:2,NSN_MATCH:3,EXACT_MATCH:4},i18n.phonenumbers.PhoneNumberUtil.ValidationResult={IS_POSSIBLE:0,IS_POSSIBLE_LOCAL_ONLY:4,INVALID_COUNTRY_CODE:1,TOO_SHORT:2,INVALID_LENGTH:5,TOO_LONG:3},i18n.phonenumbers.PhoneNumberUtil.extractPossibleNumber=function(o){var i=o.search(i18n.phonenumbers.PhoneNumberUtil.VALID_START_CHAR_PATTERN_);return 0<=i?(o=o.substring(i),o=o.replace(i18n.phonenumbers.PhoneNumberUtil.UNWANTED_END_CHAR_PATTERN_,""),i=o.search(i18n.phonenumbers.PhoneNumberUtil.SECOND_NUMBER_START_PATTERN_),0<=i&&(o=o.substring(0,i))):o="",o},i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber=function(o){return o.length<i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_?!1:i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i18n.phonenumbers.PhoneNumberUtil.VALID_PHONE_NUMBER_PATTERN_,o)},i18n.phonenumbers.PhoneNumberUtil.normalize=function(o){return i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_PHONE_PATTERN_,o)?i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(o,i18n.phonenumbers.PhoneNumberUtil.ALL_NORMALIZATION_MAPPINGS_,!0):i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(o)},i18n.phonenumbers.PhoneNumberUtil.normalizeSB_=function(o){var i=i18n.phonenumbers.PhoneNumberUtil.normalize(o.toString());o.clear(),o.append(i)},i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly=function(o){return i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(o,i18n.phonenumbers.PhoneNumberUtil.DIGIT_MAPPINGS,!0)},i18n.phonenumbers.PhoneNumberUtil.normalizeDiallableCharsOnly=function(o){return i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(o,i18n.phonenumbers.PhoneNumberUtil.DIALLABLE_CHAR_MAPPINGS_,!0)},i18n.phonenumbers.PhoneNumberUtil.convertAlphaCharactersInNumber=function(o){return i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(o,i18n.phonenumbers.PhoneNumberUtil.ALL_NORMALIZATION_MAPPINGS_,!1)},i18n.phonenumbers.PhoneNumberUtil.prototype.getLengthOfGeographicalAreaCode=function(o){var i=this.getMetadataForRegion(this.getRegionCodeForNumber(o));return i!=null&&(i.hasNationalPrefix()||o.hasItalianLeadingZero())&&this.isNumberGeographical(o)?this.getLengthOfNationalDestinationCode(o):0},i18n.phonenumbers.PhoneNumberUtil.prototype.getLengthOfNationalDestinationCode=function(o){if(o.hasExtension()){var i=o.clone();i.clearExtension()}else i=o;return i=this.format(i,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL).split(i18n.phonenumbers.PhoneNumberUtil.NON_DIGITS_PATTERN_),i[0].length==0&&i.shift(),2>=i.length?0:this.getNumberType(o)==i18n.phonenumbers.PhoneNumberType.MOBILE&&(o=i18n.phonenumbers.PhoneNumberUtil.getCountryMobileToken(o.getCountryCodeOrDefault()),o!="")?i[2].length+o.length:i[1].length},i18n.phonenumbers.PhoneNumberUtil.getCountryMobileToken=function(o){return i18n.phonenumbers.PhoneNumberUtil.MOBILE_TOKEN_MAPPINGS_[o]||""},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedRegions=function(){return Object.keys(i18n.phonenumbers.metadata.countryToMetadata).filter(function(o){return isNaN(o)})},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedGlobalNetworkCallingCodes=function(){return Object.keys(i18n.phonenumbers.metadata.countryToMetadata).filter(function(o){return!isNaN(o)}).map(function(o){return parseInt(o,10)})},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedCallingCodes=function(){var o=Object.keys(i18n.phonenumbers.metadata.countryCodeToRegionCodeMap);return[].concat($jscomp.arrayFromIterable(this.getSupportedGlobalNetworkCallingCodes()),$jscomp.arrayFromIterable(o.map(function(i){return parseInt(i,10)})))},i18n.phonenumbers.PhoneNumberUtil.descHasPossibleNumberData_=function(o){return o!=null&&(o.possibleLengthCount()!=1||o.possibleLengthArray()[0]!=-1)},i18n.phonenumbers.PhoneNumberUtil.descHasData_=function(o){return o!=null&&(o.hasExampleNumber()||i18n.phonenumbers.PhoneNumberUtil.descHasPossibleNumberData_(o)||o.hasNationalNumberPattern())},i18n.phonenumbers.PhoneNumberUtil.getSupportedTypesForMetadata_=function(o){var i=[];return goog.object.forEach(i18n.phonenumbers.PhoneNumberType,function(et){if(et!=i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE&&et!=i18n.phonenumbers.PhoneNumberType.UNKNOWN){var nt=i18n.phonenumbers.PhoneNumberUtil.getNumberDescByType_(o,et);i18n.phonenumbers.PhoneNumberUtil.descHasData_(nt)&&i.push(et)}}),i},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedTypesForRegion=function(o){return this.isValidRegionCode_(o)?i18n.phonenumbers.PhoneNumberUtil.getSupportedTypesForMetadata_(this.getMetadataForRegion(o)):[]},i18n.phonenumbers.PhoneNumberUtil.prototype.getSupportedTypesForNonGeoEntity=function(o){return o=this.getMetadataForNonGeographicalRegion(o),o==null?[]:i18n.phonenumbers.PhoneNumberUtil.getSupportedTypesForMetadata_(o)},i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_=function(o,i,et){for(var nt=new goog.string.StringBuffer,ot,st,lt=o.length,ht=0;ht<lt;++ht)ot=o.charAt(ht),st=i[ot.toUpperCase()],st!=null?nt.append(st):et||nt.append(ot);return nt.toString()},i18n.phonenumbers.PhoneNumberUtil.prototype.formattingRuleHasFirstGroupOnly=function(o){return o.length==0||i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_ONLY_PREFIX_PATTERN_.test(o)},i18n.phonenumbers.PhoneNumberUtil.prototype.isNumberGeographical=function(o){var i=this.getNumberType(o);return i==i18n.phonenumbers.PhoneNumberType.FIXED_LINE||i==i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE||i18n.phonenumbers.PhoneNumberUtil.GEO_MOBILE_COUNTRIES_.includes(o.getCountryCodeOrDefault())&&i==i18n.phonenumbers.PhoneNumberType.MOBILE},i18n.phonenumbers.PhoneNumberUtil.prototype.isValidRegionCode_=function(o){return o!=null&&isNaN(o)&&o.toUpperCase()in i18n.phonenumbers.metadata.countryToMetadata},i18n.phonenumbers.PhoneNumberUtil.prototype.hasValidCountryCallingCode_=function(o){return o in i18n.phonenumbers.metadata.countryCodeToRegionCodeMap},i18n.phonenumbers.PhoneNumberUtil.prototype.format=function(o,i){if(o.getNationalNumber()==0&&o.hasRawInput()){var et=o.getRawInputOrDefault();if(0<et.length)return et}et=o.getCountryCodeOrDefault();var nt=this.getNationalSignificantNumber(o);if(i==i18n.phonenumbers.PhoneNumberFormat.E164)return this.prefixNumberWithCountryCallingCode_(et,i18n.phonenumbers.PhoneNumberFormat.E164,nt,"");if(!this.hasValidCountryCallingCode_(et))return nt;var ot=this.getRegionCodeForCountryCode(et);return ot=this.getMetadataForRegionOrCallingCode_(et,ot),o=this.maybeGetFormattedExtension_(o,ot,i),nt=this.formatNsn_(nt,ot,i),this.prefixNumberWithCountryCallingCode_(et,i,nt,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatByPattern=function(o,i,et){var nt=o.getCountryCodeOrDefault(),ot=this.getNationalSignificantNumber(o);if(!this.hasValidCountryCallingCode_(nt))return ot;var st=this.getRegionCodeForCountryCode(nt);st=this.getMetadataForRegionOrCallingCode_(nt,st);var lt=this.chooseFormattingPatternForNumber_(et,ot);if(lt!=null){if(et=lt.clone(),lt=lt.getNationalPrefixFormattingRuleOrDefault(),0<lt.length){var ht=st.getNationalPrefixOrDefault();0<ht.length?(lt=lt.replace(i18n.phonenumbers.PhoneNumberUtil.NP_PATTERN_,ht).replace(i18n.phonenumbers.PhoneNumberUtil.FG_PATTERN_,"$1"),et.setNationalPrefixFormattingRule(lt)):et.clearNationalPrefixFormattingRule()}ot=this.formatNsnUsingPattern_(ot,et,i)}return o=this.maybeGetFormattedExtension_(o,st,i),this.prefixNumberWithCountryCallingCode_(nt,i,ot,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNationalNumberWithCarrierCode=function(o,i){var et=o.getCountryCodeOrDefault(),nt=this.getNationalSignificantNumber(o);if(!this.hasValidCountryCallingCode_(et))return nt;var ot=this.getRegionCodeForCountryCode(et);return ot=this.getMetadataForRegionOrCallingCode_(et,ot),o=this.maybeGetFormattedExtension_(o,ot,i18n.phonenumbers.PhoneNumberFormat.NATIONAL),i=this.formatNsn_(nt,ot,i18n.phonenumbers.PhoneNumberFormat.NATIONAL,i),this.prefixNumberWithCountryCallingCode_(et,i18n.phonenumbers.PhoneNumberFormat.NATIONAL,i,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.getMetadataForRegionOrCallingCode_=function(o,i){return i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY==i?this.getMetadataForNonGeographicalRegion(o):this.getMetadataForRegion(i)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNationalNumberWithPreferredCarrierCode=function(o,i){return this.formatNationalNumberWithCarrierCode(o,0<o.getPreferredDomesticCarrierCodeOrDefault().length?o.getPreferredDomesticCarrierCodeOrDefault():i)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNumberForMobileDialing=function(o,i,et){var nt=o.getCountryCodeOrDefault();if(!this.hasValidCountryCallingCode_(nt))return o.hasRawInput()?o.getRawInputOrDefault():"";var ot="";o=o.clone(),o.clearExtension();var st=this.getRegionCodeForCountryCode(nt),lt=this.getNumberType(o),ht=lt!=i18n.phonenumbers.PhoneNumberType.UNKNOWN;if(i==st)ot=lt==i18n.phonenumbers.PhoneNumberType.FIXED_LINE||lt==i18n.phonenumbers.PhoneNumberType.MOBILE||lt==i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE,st=="BR"&&ot?ot=0<o.getPreferredDomesticCarrierCodeOrDefault().length?this.formatNationalNumberWithPreferredCarrierCode(o,""):"":nt==i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_?(i=this.getMetadataForRegion(i),ot=this.canBeInternationallyDialled(o)&&this.testNumberLength_(this.getNationalSignificantNumber(o),i)!=i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_SHORT?this.format(o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL):this.format(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL)):ot=(st==i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY||(st=="MX"||st=="CL"||st=="UZ")&&ot)&&this.canBeInternationallyDialled(o)?this.format(o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL):this.format(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL);else if(ht&&this.canBeInternationallyDialled(o))return et?this.format(o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL):this.format(o,i18n.phonenumbers.PhoneNumberFormat.E164);return et?ot:i18n.phonenumbers.PhoneNumberUtil.normalizeDiallableCharsOnly(ot)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatOutOfCountryCallingNumber=function(o,i){if(!this.isValidRegionCode_(i))return this.format(o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL);var et=o.getCountryCodeOrDefault(),nt=this.getNationalSignificantNumber(o);if(!this.hasValidCountryCallingCode_(et))return nt;if(et==i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_){if(this.isNANPACountry(i))return et+" "+this.format(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL)}else if(et==this.getCountryCodeForValidRegion_(i))return this.format(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL);var ot=this.getMetadataForRegion(i),st=ot.getInternationalPrefixOrDefault();return i="",ot.hasPreferredInternationalPrefix()?i=ot.getPreferredInternationalPrefixOrDefault():i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i18n.phonenumbers.PhoneNumberUtil.SINGLE_INTERNATIONAL_PREFIX_,st)&&(i=st),ot=this.getRegionCodeForCountryCode(et),ot=this.getMetadataForRegionOrCallingCode_(et,ot),nt=this.formatNsn_(nt,ot,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL),o=this.maybeGetFormattedExtension_(o,ot,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL),0<i.length?i+" "+et+" "+nt+o:this.prefixNumberWithCountryCallingCode_(et,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL,nt,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatInOriginalFormat=function(o,i){if(o.hasRawInput()&&!this.hasFormattingPatternForNumber_(o))return o.getRawInputOrDefault();if(!o.hasCountryCodeSource())return this.format(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL);switch(o.getCountryCodeSource()){case i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN:i=this.format(o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL);break;case i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_IDD:i=this.formatOutOfCountryCallingNumber(o,i);break;case i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN:i=this.format(o,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL).substring(1);break;default:var et=this.getRegionCodeForCountryCode(o.getCountryCodeOrDefault()),nt=this.getNddPrefixForRegion(et,!0);if(i=this.format(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL),nt!=null&&nt.length!=0&&!this.rawInputContainsNationalPrefix_(o.getRawInputOrDefault(),nt,et)&&(et=this.getMetadataForRegion(et),nt=this.getNationalSignificantNumber(o),et=this.chooseFormattingPatternForNumber_(et.numberFormatArray(),nt),et!=null)){nt=et.getNationalPrefixFormattingRuleOrDefault();var ot=nt.indexOf("$1");0>=ot||(nt=nt.substring(0,ot),nt=i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(nt),nt.length!=0&&(i=et.clone(),i.clearNationalPrefixFormattingRule(),i=this.formatByPattern(o,i18n.phonenumbers.PhoneNumberFormat.NATIONAL,[i])))}}return o=o.getRawInputOrDefault(),i!=null&&0<o.length&&(et=i18n.phonenumbers.PhoneNumberUtil.normalizeDiallableCharsOnly(i),nt=i18n.phonenumbers.PhoneNumberUtil.normalizeDiallableCharsOnly(o),et!=nt&&(i=o)),i},i18n.phonenumbers.PhoneNumberUtil.prototype.rawInputContainsNationalPrefix_=function(o,i,et){if(o=i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(o),goog.string.startsWith(o,i))try{return this.isValidNumber(this.parse(o.substring(i.length),et))}catch{}return!1},i18n.phonenumbers.PhoneNumberUtil.prototype.hasFormattingPatternForNumber_=function(o){var i=o.getCountryCodeOrDefault(),et=this.getRegionCodeForCountryCode(i);return i=this.getMetadataForRegionOrCallingCode_(i,et),i==null?!1:(o=this.getNationalSignificantNumber(o),this.chooseFormattingPatternForNumber_(i.numberFormatArray(),o)!=null)},i18n.phonenumbers.PhoneNumberUtil.prototype.formatOutOfCountryKeepingAlphaChars=function(o,i){var et=o.getRawInputOrDefault();if(et.length==0)return this.formatOutOfCountryCallingNumber(o,i);var nt=o.getCountryCodeOrDefault();if(!this.hasValidCountryCallingCode_(nt))return et;et=i18n.phonenumbers.PhoneNumberUtil.normalizeHelper_(et,i18n.phonenumbers.PhoneNumberUtil.ALL_PLUS_NUMBER_GROUPING_SYMBOLS_,!0);var ot=this.getNationalSignificantNumber(o);if(3<ot.length){var st=et.indexOf(ot.substring(0,3));st!=-1&&(et=et.substring(st))}if(st=this.getMetadataForRegion(i),nt==i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_){if(this.isNANPACountry(i))return nt+" "+et}else if(st!=null&&nt==this.getCountryCodeForValidRegion_(i))return nt=this.chooseFormattingPatternForNumber_(st.numberFormatArray(),ot),nt==null?et:(nt=nt.clone(),nt.setPattern("(\\d+)(.*)"),nt.setFormat("$1$2"),this.formatNsnUsingPattern_(et,nt,i18n.phonenumbers.PhoneNumberFormat.NATIONAL));return i="",st!=null&&(i=st.getInternationalPrefixOrDefault(),i=i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i18n.phonenumbers.PhoneNumberUtil.SINGLE_INTERNATIONAL_PREFIX_,i)?i:st.getPreferredInternationalPrefixOrDefault()),st=this.getRegionCodeForCountryCode(nt),st=this.getMetadataForRegionOrCallingCode_(nt,st),o=this.maybeGetFormattedExtension_(o,st,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL),0<i.length?i+" "+nt+" "+et+o:this.prefixNumberWithCountryCallingCode_(nt,i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL,et,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.getNationalSignificantNumber=function(o){if(!o.hasNationalNumber())return"";var i=""+o.getNationalNumber();return o.hasItalianLeadingZero()&&o.getItalianLeadingZero()&&0<o.getNumberOfLeadingZerosOrDefault()?Array(o.getNumberOfLeadingZerosOrDefault()+1).join("0")+i:i},i18n.phonenumbers.PhoneNumberUtil.prototype.prefixNumberWithCountryCallingCode_=function(o,i,et,nt){switch(i){case i18n.phonenumbers.PhoneNumberFormat.E164:return i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+o+et+nt;case i18n.phonenumbers.PhoneNumberFormat.INTERNATIONAL:return i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+o+" "+et+nt;case i18n.phonenumbers.PhoneNumberFormat.RFC3966:return i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_+i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+o+"-"+et+nt;default:return et+nt}},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNsn_=function(o,i,et,nt){return i=i.intlNumberFormatArray().length==0||et==i18n.phonenumbers.PhoneNumberFormat.NATIONAL?i.numberFormatArray():i.intlNumberFormatArray(),i=this.chooseFormattingPatternForNumber_(i,o),i==null?o:this.formatNsnUsingPattern_(o,i,et,nt)},i18n.phonenumbers.PhoneNumberUtil.prototype.chooseFormattingPatternForNumber_=function(o,i){for(var et,nt=o.length,ot=0;ot<nt;++ot){et=o[ot];var st=et.leadingDigitsPatternCount();if((st==0||i.search(et.getLeadingDigitsPattern(st-1))==0)&&(st=new RegExp(et.getPattern()),i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(st,i)))return et}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.formatNsnUsingPattern_=function(o,i,et,nt){var ot=i.getFormatOrDefault(),st=new RegExp(i.getPattern()),lt=i.getDomesticCarrierCodeFormattingRuleOrDefault();return et==i18n.phonenumbers.PhoneNumberFormat.NATIONAL&&nt!=null&&0<nt.length&&0<lt.length?(i=lt.replace(i18n.phonenumbers.PhoneNumberUtil.CC_PATTERN_,nt),ot=ot.replace(i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_PATTERN_,i),o=o.replace(st,ot)):(i=i.getNationalPrefixFormattingRuleOrDefault(),o=et==i18n.phonenumbers.PhoneNumberFormat.NATIONAL&&i!=null&&0<i.length?o.replace(st,ot.replace(i18n.phonenumbers.PhoneNumberUtil.FIRST_GROUP_PATTERN_,i)):o.replace(st,ot)),et==i18n.phonenumbers.PhoneNumberFormat.RFC3966&&(o=o.replace(new RegExp("^"+i18n.phonenumbers.PhoneNumberUtil.SEPARATOR_PATTERN_),""),o=o.replace(new RegExp(i18n.phonenumbers.PhoneNumberUtil.SEPARATOR_PATTERN_,"g"),"-")),o},i18n.phonenumbers.PhoneNumberUtil.prototype.getExampleNumber=function(o){return this.getExampleNumberForType(o,i18n.phonenumbers.PhoneNumberType.FIXED_LINE)},i18n.phonenumbers.PhoneNumberUtil.prototype.getExampleNumberForType=function(o,i){if(!this.isValidRegionCode_(o))return null;i=i18n.phonenumbers.PhoneNumberUtil.getNumberDescByType_(this.getMetadataForRegion(o),i);try{if(i.hasExampleNumber())return this.parse(i.getExampleNumber(),o)}catch{}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.getExampleNumberForNonGeoEntity=function(o){var i=this.getMetadataForNonGeographicalRegion(o);if(i!=null&&(i=[i.getMobile(),i.getTollFree(),i.getSharedCost(),i.getVoip(),i.getVoicemail(),i.getUan(),i.getPremiumRate()].find(function(et,nt){return et.hasExampleNumber()}),i!==void 0))try{return this.parse("+"+o+i.getExampleNumber(),"ZZ")}catch{}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeGetFormattedExtension_=function(o,i,et){return o.hasExtension()&&o.getExtension().length!=0?et==i18n.phonenumbers.PhoneNumberFormat.RFC3966?i18n.phonenumbers.PhoneNumberUtil.RFC3966_EXTN_PREFIX_+o.getExtension():i.hasPreferredExtnPrefix()?i.getPreferredExtnPrefix()+o.getExtensionOrDefault():i18n.phonenumbers.PhoneNumberUtil.DEFAULT_EXTN_PREFIX_+o.getExtensionOrDefault():""},i18n.phonenumbers.PhoneNumberUtil.getNumberDescByType_=function(o,i){switch(i){case i18n.phonenumbers.PhoneNumberType.PREMIUM_RATE:return o.getPremiumRate();case i18n.phonenumbers.PhoneNumberType.TOLL_FREE:return o.getTollFree();case i18n.phonenumbers.PhoneNumberType.MOBILE:return o.getMobile();case i18n.phonenumbers.PhoneNumberType.FIXED_LINE:case i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE:return o.getFixedLine();case i18n.phonenumbers.PhoneNumberType.SHARED_COST:return o.getSharedCost();case i18n.phonenumbers.PhoneNumberType.VOIP:return o.getVoip();case i18n.phonenumbers.PhoneNumberType.PERSONAL_NUMBER:return o.getPersonalNumber();case i18n.phonenumbers.PhoneNumberType.PAGER:return o.getPager();case i18n.phonenumbers.PhoneNumberType.UAN:return o.getUan();case i18n.phonenumbers.PhoneNumberType.VOICEMAIL:return o.getVoicemail();default:return o.getGeneralDesc()}},i18n.phonenumbers.PhoneNumberUtil.prototype.getNumberType=function(o){var i=this.getRegionCodeForNumber(o);return i=this.getMetadataForRegionOrCallingCode_(o.getCountryCodeOrDefault(),i),i==null?i18n.phonenumbers.PhoneNumberType.UNKNOWN:(o=this.getNationalSignificantNumber(o),this.getNumberTypeHelper_(o,i))},i18n.phonenumbers.PhoneNumberUtil.prototype.getNumberTypeHelper_=function(o,i){return this.isNumberMatchingDesc_(o,i.getGeneralDesc())?this.isNumberMatchingDesc_(o,i.getPremiumRate())?i18n.phonenumbers.PhoneNumberType.PREMIUM_RATE:this.isNumberMatchingDesc_(o,i.getTollFree())?i18n.phonenumbers.PhoneNumberType.TOLL_FREE:this.isNumberMatchingDesc_(o,i.getSharedCost())?i18n.phonenumbers.PhoneNumberType.SHARED_COST:this.isNumberMatchingDesc_(o,i.getVoip())?i18n.phonenumbers.PhoneNumberType.VOIP:this.isNumberMatchingDesc_(o,i.getPersonalNumber())?i18n.phonenumbers.PhoneNumberType.PERSONAL_NUMBER:this.isNumberMatchingDesc_(o,i.getPager())?i18n.phonenumbers.PhoneNumberType.PAGER:this.isNumberMatchingDesc_(o,i.getUan())?i18n.phonenumbers.PhoneNumberType.UAN:this.isNumberMatchingDesc_(o,i.getVoicemail())?i18n.phonenumbers.PhoneNumberType.VOICEMAIL:this.isNumberMatchingDesc_(o,i.getFixedLine())?i.getSameMobileAndFixedLinePattern()||this.isNumberMatchingDesc_(o,i.getMobile())?i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE:i18n.phonenumbers.PhoneNumberType.FIXED_LINE:!i.getSameMobileAndFixedLinePattern()&&this.isNumberMatchingDesc_(o,i.getMobile())?i18n.phonenumbers.PhoneNumberType.MOBILE:i18n.phonenumbers.PhoneNumberType.UNKNOWN:i18n.phonenumbers.PhoneNumberType.UNKNOWN},i18n.phonenumbers.PhoneNumberUtil.prototype.getMetadataForRegion=function(o){if(o==null)return null;o=o.toUpperCase();var i=this.regionToMetadataMap[o];if(i==null){i=new goog.proto2.PbLiteSerializer;var et=i18n.phonenumbers.metadata.countryToMetadata[o];if(et==null)return null;i=i.deserialize(i18n.phonenumbers.PhoneMetadata.getDescriptor(),et),this.regionToMetadataMap[o]=i}return i},i18n.phonenumbers.PhoneNumberUtil.prototype.getMetadataForNonGeographicalRegion=function(o){return this.getMetadataForRegion(""+o)},i18n.phonenumbers.PhoneNumberUtil.prototype.isNumberMatchingDesc_=function(o,i){var et=o.length;return 0<i.possibleLengthCount()&&i.possibleLengthArray().indexOf(et)==-1?!1:i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i.getNationalNumberPatternOrDefault(),o)},i18n.phonenumbers.PhoneNumberUtil.prototype.isValidNumber=function(o){var i=this.getRegionCodeForNumber(o);return this.isValidNumberForRegion(o,i)},i18n.phonenumbers.PhoneNumberUtil.prototype.isValidNumberForRegion=function(o,i){var et=o.getCountryCodeOrDefault(),nt=this.getMetadataForRegionOrCallingCode_(et,i);return nt==null||i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY!=i&&et!=this.getCountryCodeForValidRegion_(i)?!1:(o=this.getNationalSignificantNumber(o),this.getNumberTypeHelper_(o,nt)!=i18n.phonenumbers.PhoneNumberType.UNKNOWN)},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodeForNumber=function(o){if(o==null)return null;var i=o.getCountryCodeOrDefault();return i=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[i],i==null?null:i.length==1?i[0]:this.getRegionCodeForNumberFromRegionList_(o,i)},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodeForNumberFromRegionList_=function(o,i){o=this.getNationalSignificantNumber(o);for(var et,nt=i.length,ot=0;ot<nt;ot++){et=i[ot];var st=this.getMetadataForRegion(et);if(st.hasLeadingDigits()){if(o.search(st.getLeadingDigits())==0)return et}else if(this.getNumberTypeHelper_(o,st)!=i18n.phonenumbers.PhoneNumberType.UNKNOWN)return et}return null},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodeForCountryCode=function(o){return o=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[o],o==null?i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_:o[0]},i18n.phonenumbers.PhoneNumberUtil.prototype.getRegionCodesForCountryCode=function(o){return o=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[o],o??[]},i18n.phonenumbers.PhoneNumberUtil.prototype.getCountryCodeForRegion=function(o){return this.isValidRegionCode_(o)?this.getCountryCodeForValidRegion_(o):0},i18n.phonenumbers.PhoneNumberUtil.prototype.getCountryCodeForValidRegion_=function(o){var i=this.getMetadataForRegion(o);if(i==null)throw Error("Invalid region code: "+o);return i.getCountryCodeOrDefault()},i18n.phonenumbers.PhoneNumberUtil.prototype.getNddPrefixForRegion=function(o,i){return o=this.getMetadataForRegion(o),o==null||(o=o.getNationalPrefixOrDefault(),o.length==0)?null:(i&&(o=o.replace("~","")),o)},i18n.phonenumbers.PhoneNumberUtil.prototype.isNANPACountry=function(o){return o!=null&&i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[i18n.phonenumbers.PhoneNumberUtil.NANPA_COUNTRY_CODE_].includes(o.toUpperCase())},i18n.phonenumbers.PhoneNumberUtil.prototype.isAlphaNumber=function(o){return i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber(o)?(o=new goog.string.StringBuffer(o),this.maybeStripExtension(o),i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i18n.phonenumbers.PhoneNumberUtil.VALID_ALPHA_PHONE_PATTERN_,o.toString())):!1},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumber=function(o){return o=this.isPossibleNumberWithReason(o),o==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE||o==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE_LOCAL_ONLY},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumberForType=function(o,i){return o=this.isPossibleNumberForTypeWithReason(o,i),o==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE||o==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE_LOCAL_ONLY},i18n.phonenumbers.PhoneNumberUtil.prototype.testNumberLength_=function(o,i){return this.testNumberLengthForType_(o,i,i18n.phonenumbers.PhoneNumberType.UNKNOWN)},i18n.phonenumbers.PhoneNumberUtil.prototype.testNumberLengthForType_=function(o,i,et){var nt=i18n.phonenumbers.PhoneNumberUtil.getNumberDescByType_(i,et),ot=nt.possibleLengthCount()==0?i.getGeneralDesc().possibleLengthArray():nt.possibleLengthArray();if(nt=nt.possibleLengthLocalOnlyArray(),et==i18n.phonenumbers.PhoneNumberType.FIXED_LINE_OR_MOBILE)if(i18n.phonenumbers.PhoneNumberUtil.descHasPossibleNumberData_(i18n.phonenumbers.PhoneNumberUtil.getNumberDescByType_(i,i18n.phonenumbers.PhoneNumberType.FIXED_LINE)))et=i18n.phonenumbers.PhoneNumberUtil.getNumberDescByType_(i,i18n.phonenumbers.PhoneNumberType.MOBILE),i18n.phonenumbers.PhoneNumberUtil.descHasPossibleNumberData_(et)&&(ot=ot.concat(et.possibleLengthCount()==0?i.getGeneralDesc().possibleLengthArray():et.possibleLengthArray()),ot.sort(),nt.length==0?nt=et.possibleLengthLocalOnlyArray():(nt=nt.concat(et.possibleLengthLocalOnlyArray()),nt.sort()));else return this.testNumberLengthForType_(o,i,i18n.phonenumbers.PhoneNumberType.MOBILE);return ot[0]==-1?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.INVALID_LENGTH:(o=o.length,-1<nt.indexOf(o)?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE_LOCAL_ONLY:(i=ot[0],i==o?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE:i>o?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_SHORT:ot[ot.length-1]<o?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_LONG:-1<ot.indexOf(o,1)?i18n.phonenumbers.PhoneNumberUtil.ValidationResult.IS_POSSIBLE:i18n.phonenumbers.PhoneNumberUtil.ValidationResult.INVALID_LENGTH))},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumberWithReason=function(o){return this.isPossibleNumberForTypeWithReason(o,i18n.phonenumbers.PhoneNumberType.UNKNOWN)},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumberForTypeWithReason=function(o,i){var et=this.getNationalSignificantNumber(o);if(o=o.getCountryCodeOrDefault(),!this.hasValidCountryCallingCode_(o))return i18n.phonenumbers.PhoneNumberUtil.ValidationResult.INVALID_COUNTRY_CODE;var nt=this.getRegionCodeForCountryCode(o);return o=this.getMetadataForRegionOrCallingCode_(o,nt),this.testNumberLengthForType_(et,o,i)},i18n.phonenumbers.PhoneNumberUtil.prototype.isPossibleNumberString=function(o,i){try{return this.isPossibleNumber(this.parse(o,i))}catch{return!1}},i18n.phonenumbers.PhoneNumberUtil.prototype.truncateTooLongNumber=function(o){if(this.isValidNumber(o))return!0;var i=o.clone(),et=o.getNationalNumberOrDefault();do if(et=Math.floor(et/10),i.setNationalNumber(et),et==0||this.isPossibleNumberWithReason(i)==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_SHORT)return!1;while(!this.isValidNumber(i));return o.setNationalNumber(et),!0},i18n.phonenumbers.PhoneNumberUtil.prototype.extractCountryCode=function(o,i){if(o=o.toString(),o.length==0||o.charAt(0)=="0")return 0;for(var et,nt=o.length,ot=1;ot<=i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_COUNTRY_CODE_&&ot<=nt;++ot)if(et=parseInt(o.substring(0,ot),10),et in i18n.phonenumbers.metadata.countryCodeToRegionCodeMap)return i.append(o.substring(ot)),et;return 0},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeExtractCountryCode=function(o,i,et,nt,ot){if(o.length==0)return 0;o=new goog.string.StringBuffer(o);var st;if(i!=null&&(st=i.getInternationalPrefix()),st==null&&(st="NonMatch"),st=this.maybeStripInternationalPrefixAndNormalize(o,st),nt&&ot.setCountryCodeSource(st),st!=i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_DEFAULT_COUNTRY){if(o.getLength()<=i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_)throw Error(i18n.phonenumbers.Error.TOO_SHORT_AFTER_IDD);if(i=this.extractCountryCode(o,et),i!=0)return ot.setCountryCode(i),i;throw Error(i18n.phonenumbers.Error.INVALID_COUNTRY_CODE)}if(i!=null){st=i.getCountryCodeOrDefault();var lt=""+st,ht=o.toString();if(goog.string.startsWith(ht,lt)&&(lt=new goog.string.StringBuffer(ht.substring(lt.length)),ht=i.getGeneralDesc(),ht=new RegExp(ht.getNationalNumberPatternOrDefault()),this.maybeStripNationalPrefixAndCarrierCode(lt,i,null),lt=lt.toString(),!i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(ht,o.toString())&&i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(ht,lt)||this.testNumberLength_(o.toString(),i)==i18n.phonenumbers.PhoneNumberUtil.ValidationResult.TOO_LONG))return et.append(lt),nt&&ot.setCountryCodeSource(i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN),ot.setCountryCode(st),st}return ot.setCountryCode(0),0},i18n.phonenumbers.PhoneNumberUtil.prototype.parsePrefixAsIdd_=function(o,i){var et=i.toString();if(et.search(o)==0){o=et.match(o)[0].length;var nt=et.substring(o).match(i18n.phonenumbers.PhoneNumberUtil.CAPTURING_DIGIT_PATTERN);return nt&&nt[1]!=null&&0<nt[1].length&&i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(nt[1])=="0"?!1:(i.clear(),i.append(et.substring(o)),!0)}return!1},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeStripInternationalPrefixAndNormalize=function(o,i){var et=o.toString();return et.length==0?i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_DEFAULT_COUNTRY:i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN.test(et)?(et=et.replace(i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN,""),o.clear(),o.append(i18n.phonenumbers.PhoneNumberUtil.normalize(et)),i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN):(i=new RegExp(i),i18n.phonenumbers.PhoneNumberUtil.normalizeSB_(o),this.parsePrefixAsIdd_(i,o)?i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_NUMBER_WITH_IDD:i18n.phonenumbers.PhoneNumber.CountryCodeSource.FROM_DEFAULT_COUNTRY)},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeStripNationalPrefixAndCarrierCode=function(o,i,et){var nt=o.toString(),ot=nt.length,st=i.getNationalPrefixForParsing();if(ot==0||st==null||st.length==0)return!1;var lt=new RegExp("^(?:"+st+")");if(ot=lt.exec(nt)){st=new RegExp(i.getGeneralDesc().getNationalNumberPatternOrDefault());var ht=i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(st,nt),ft=ot.length-1;if(i=i.getNationalPrefixTransformRule(),i==null||i.length==0||ot[ft]==null||ot[ft].length==0){if(ht&&!i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(st,nt.substring(ot[0].length)))return!1;et!=null&&0<ft&&ot[ft]!=null&&et.append(ot[1]),o.set(nt.substring(ot[0].length))}else{if(nt=nt.replace(lt,i),ht&&!i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(st,nt))return!1;et!=null&&0<ft&&et.append(ot[1]),o.set(nt)}return!0}return!1},i18n.phonenumbers.PhoneNumberUtil.prototype.maybeStripExtension=function(o){var i=o.toString(),et=i.search(i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERN_);if(0<=et&&i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber(i.substring(0,et))){for(var nt=i.match(i18n.phonenumbers.PhoneNumberUtil.EXTN_PATTERN_),ot=nt.length,st=1;st<ot;++st)if(nt[st]!=null&&0<nt[st].length)return o.clear(),o.append(i.substring(0,et)),nt[st]}return""},i18n.phonenumbers.PhoneNumberUtil.prototype.checkRegionForParsing_=function(o,i){return this.isValidRegionCode_(i)||o!=null&&0<o.length&&i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN.test(o)},i18n.phonenumbers.PhoneNumberUtil.prototype.parse=function(o,i){return this.parseHelper_(o,i,!1,!0)},i18n.phonenumbers.PhoneNumberUtil.prototype.parseAndKeepRawInput=function(o,i){if(!this.isValidRegionCode_(i)&&0<o.length&&o.charAt(0)!=i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN)throw Error(i18n.phonenumbers.Error.INVALID_COUNTRY_CODE);return this.parseHelper_(o,i,!0,!0)},i18n.phonenumbers.PhoneNumberUtil.setItalianLeadingZerosForPhoneNumber_=function(o,i){if(1<o.length&&o.charAt(0)=="0"){i.setItalianLeadingZero(!0);for(var et=1;et<o.length-1&&o.charAt(et)=="0";)et++;et!=1&&i.setNumberOfLeadingZeros(et)}},i18n.phonenumbers.PhoneNumberUtil.prototype.parseHelper_=function(o,i,et,nt){if(o==null)throw Error(i18n.phonenumbers.Error.NOT_A_NUMBER);if(o.length>i18n.phonenumbers.PhoneNumberUtil.MAX_INPUT_STRING_LENGTH_)throw Error(i18n.phonenumbers.Error.TOO_LONG);var ot=new goog.string.StringBuffer;if(this.buildNationalNumberForParsing_(o,ot),!i18n.phonenumbers.PhoneNumberUtil.isViablePhoneNumber(ot.toString()))throw Error(i18n.phonenumbers.Error.NOT_A_NUMBER);if(nt&&!this.checkRegionForParsing_(ot.toString(),i))throw Error(i18n.phonenumbers.Error.INVALID_COUNTRY_CODE);nt=new i18n.phonenumbers.PhoneNumber,et&&nt.setRawInput(o),o=this.maybeStripExtension(ot),0<o.length&&nt.setExtension(o);var st=this.getMetadataForRegion(i);o=new goog.string.StringBuffer;var lt=0,ht=ot.toString();try{lt=this.maybeExtractCountryCode(ht,st,o,et,nt)}catch(ft){if(ft.message==i18n.phonenumbers.Error.INVALID_COUNTRY_CODE&&i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN.test(ht)){if(ht=ht.replace(i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN,""),lt=this.maybeExtractCountryCode(ht,st,o,et,nt),lt==0)throw ft}else throw ft}if(lt!=0?(ot=this.getRegionCodeForCountryCode(lt),ot!=i&&(st=this.getMetadataForRegionOrCallingCode_(lt,ot))):(i18n.phonenumbers.PhoneNumberUtil.normalizeSB_(ot),o.append(ot.toString()),i!=null?(lt=st.getCountryCodeOrDefault(),nt.setCountryCode(lt)):et&&nt.clearCountryCodeSource()),o.getLength()<i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_||(st!=null&&(i=new goog.string.StringBuffer,ot=new goog.string.StringBuffer(o.toString()),this.maybeStripNationalPrefixAndCarrierCode(ot,st,i),st=this.testNumberLength_(ot.toString(),st),lt=i18n.phonenumbers.PhoneNumberUtil.ValidationResult,st!=lt.TOO_SHORT&&st!=lt.IS_POSSIBLE_LOCAL_ONLY&&st!=lt.INVALID_LENGTH&&(o=ot,et&&0<i.toString().length&&nt.setPreferredDomesticCarrierCode(i.toString()))),et=o.toString(),o=et.length,o<i18n.phonenumbers.PhoneNumberUtil.MIN_LENGTH_FOR_NSN_))throw Error(i18n.phonenumbers.Error.TOO_SHORT_NSN);if(o>i18n.phonenumbers.PhoneNumberUtil.MAX_LENGTH_FOR_NSN_)throw Error(i18n.phonenumbers.Error.TOO_LONG);return i18n.phonenumbers.PhoneNumberUtil.setItalianLeadingZerosForPhoneNumber_(et,nt),nt.setNationalNumber(parseInt(et,10)),nt},i18n.phonenumbers.PhoneNumberUtil.prototype.extractPhoneContext_=function(o){var i=o.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_);if(i===-1)return null;if(i+=i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_.length,i>=o.length)return"";var et=o.indexOf(";",i);return et!==-1?o.substring(i,et):o.substring(i)},i18n.phonenumbers.PhoneNumberUtil.prototype.isPhoneContextValid_=function(o){if(o==null)return!0;if(o.length===0)return!1;var i=i18n.phonenumbers.PhoneNumberUtil.RFC3966_GLOBAL_NUMBER_DIGITS_PATTERN_.exec(o);return o=i18n.phonenumbers.PhoneNumberUtil.RFC3966_DOMAINNAME_PATTERN_.exec(o),i!==null||o!==null},i18n.phonenumbers.PhoneNumberUtil.prototype.buildNationalNumberForParsing_=function(o,i){var et=i18n.phonenumbers.PhoneNumberUtil.prototype.extractPhoneContext_(o);if(!i18n.phonenumbers.PhoneNumberUtil.prototype.isPhoneContextValid_(et))throw Error(i18n.phonenumbers.Error.NOT_A_NUMBER);if(et!=null){et.charAt(0)===i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN&&i.append(et),et=o.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_),et=0<=et?et+i18n.phonenumbers.PhoneNumberUtil.RFC3966_PREFIX_.length:0;var nt=o.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_PHONE_CONTEXT_);i.append(o.substring(et,nt))}else i.append(i18n.phonenumbers.PhoneNumberUtil.extractPossibleNumber(o??""));o=i.toString(),et=o.indexOf(i18n.phonenumbers.PhoneNumberUtil.RFC3966_ISDN_SUBADDRESS_),0<et&&(i.clear(),i.append(o.substring(0,et)))},i18n.phonenumbers.PhoneNumberUtil.copyCoreFieldsOnly_=function(o){var i=new i18n.phonenumbers.PhoneNumber;return i.setCountryCode(o.getCountryCodeOrDefault()),i.setNationalNumber(o.getNationalNumberOrDefault()),0<o.getExtensionOrDefault().length&&i.setExtension(o.getExtensionOrDefault()),o.getItalianLeadingZero()&&(i.setItalianLeadingZero(!0),i.setNumberOfLeadingZeros(o.getNumberOfLeadingZerosOrDefault())),i},i18n.phonenumbers.PhoneNumberUtil.prototype.isNumberMatch=function(o,i){if(typeof o=="string")try{var et=this.parse(o,i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_)}catch(st){if(st.message!=i18n.phonenumbers.Error.INVALID_COUNTRY_CODE)return i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER;if(typeof i!="string"){var nt=this.getRegionCodeForCountryCode(i.getCountryCodeOrDefault());if(nt!=i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_){try{et=this.parse(o,nt)}catch{return i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER}var ot=this.isNumberMatch(et,i);return ot==i18n.phonenumbers.PhoneNumberUtil.MatchType.EXACT_MATCH?i18n.phonenumbers.PhoneNumberUtil.MatchType.NSN_MATCH:ot}}try{et=this.parseHelper_(o,null,!1,!1)}catch{return i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER}}else et=o.clone();if(typeof i=="string")try{return ot=this.parse(i,i18n.phonenumbers.PhoneNumberUtil.UNKNOWN_REGION_),this.isNumberMatch(o,ot)}catch(st){return st.message!=i18n.phonenumbers.Error.INVALID_COUNTRY_CODE?i18n.phonenumbers.PhoneNumberUtil.MatchType.NOT_A_NUMBER:this.isNumberMatch(i,et)}else ot=i.clone();return o=i18n.phonenumbers.PhoneNumberUtil.copyCoreFieldsOnly_(et),ot=i18n.phonenumbers.PhoneNumberUtil.copyCoreFieldsOnly_(ot),o.hasExtension()&&ot.hasExtension()&&o.getExtension()!=ot.getExtension()?i18n.phonenumbers.PhoneNumberUtil.MatchType.NO_MATCH:(i=o.getCountryCodeOrDefault(),et=ot.getCountryCodeOrDefault(),i!=0&&et!=0?o.equals(ot)?i18n.phonenumbers.PhoneNumberUtil.MatchType.EXACT_MATCH:i==et&&this.isNationalNumberSuffixOfTheOther_(o,ot)?i18n.phonenumbers.PhoneNumberUtil.MatchType.SHORT_NSN_MATCH:i18n.phonenumbers.PhoneNumberUtil.MatchType.NO_MATCH:(o.setCountryCode(0),ot.setCountryCode(0),o.equals(ot)?i18n.phonenumbers.PhoneNumberUtil.MatchType.NSN_MATCH:this.isNationalNumberSuffixOfTheOther_(o,ot)?i18n.phonenumbers.PhoneNumberUtil.MatchType.SHORT_NSN_MATCH:i18n.phonenumbers.PhoneNumberUtil.MatchType.NO_MATCH))},i18n.phonenumbers.PhoneNumberUtil.prototype.isNationalNumberSuffixOfTheOther_=function(o,i){return o=""+o.getNationalNumber(),i=""+i.getNationalNumber(),goog.string.endsWith(o,i)||goog.string.endsWith(i,o)},i18n.phonenumbers.PhoneNumberUtil.prototype.canBeInternationallyDialled=function(o){var i=this.getMetadataForRegion(this.getRegionCodeForNumber(o));return i==null?!0:(o=this.getNationalSignificantNumber(o),!this.isNumberMatchingDesc_(o,i.getNoInternationalDialling()))},i18n.phonenumbers.PhoneNumberUtil.matchesEntirely=function(o,i){return!!((o=typeof o=="string"?i.match("^(?:"+o+")$"):i.match(o))&&o[0].length==i.length)},i18n.phonenumbers.PhoneNumberUtil.matchesPrefix=function(o,i){return!!((o=typeof o=="string"?i.match("^(?:"+o+")"):i.match(o))&&goog.string.startsWith(i,o[0]))},i18n.phonenumbers.shortnumbermetadata={},i18n.phonenumbers.shortnumbermetadata.countryCodeToRegionCodeMap={0:"AC AD AE AF AG AI AL AM AO AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BQ BR BS BT BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EH ER ES ET FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GR GT GU GW GY HK HN HR HT HU ID IE IL IM IN IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NZ OM PA PE PF PG PH PK PL PM PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SX SY SZ TC TD TG TH TJ TL TM TN TO TR TT TV TW TZ UA UG US UY UZ VA VC VE VG VI VN VU WF WS XK YE YT ZA ZM ZW".split(" ")},i18n.phonenumbers.shortnumbermetadata.countryToMetadata={AC:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"AC",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"9(?:11|99)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],AD:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[0268]",,,,"110"],[,,,,,,,,,[-1]],,,,"AD",,,,,,,,,,,,,,,,,,[,,"11[0268]",,,,"110"],,[,,"11[0268]",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],AE:[,[,,"[149]\\d{2,3}",,,,,,,[3,4]],,,[,,"112|99[7-9]",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"AE",,,,,,,,,,,,,,,,,,[,,"112|99[7-9]",,,,"112",,,[3]],,[,,"112|445[16]|99[7-9]",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"445\\d",,,,"4450",,,[4]]],AF:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"1(?:0[02]|19)",,,,"100",,,[3]],[,,,,,,,,,[-1]],,,,"AF",,,,,,,,,,,,,,,,,,[,,"1(?:0[02]|19)",,,,"100",,,[3]],,[,,"1(?:0[02]|19)|40404",,,,"100"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],AG:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"AG",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"176|9(?:11|88|99)",,,,"176"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],AI:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"AI",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"176|9(?:11|88)",,,,"176"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],AL:[,[,,"[15]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:1(?:2|6[01]\\d\\d)|2[7-9]|3[15]|41)",,,,"112",,,[3,6]],[,,"5\\d{4}",,,,"50000",,,[5]],,,,"AL",,,,,,,,,,,,,,,,,,[,,"1(?:12|2[7-9])",,,,"112",,,[3]],,[,,"1(?:1(?:6(?:000|1(?:06|11|23))|8\\d\\d)|65\\d|89[12])|5\\d{4}|1(?:[1349]\\d|2[2-9])",,,,"110"],[,,,,,,,,,[-1]],[,,"123",,,,"123",,,[3]],,[,,"131|5\\d{4}",,,,"131",,,[3,5]]],AM:[,[,,"[148]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"10[1-3]",,,,"101",,,[3]],[,,,,,,,,,[-1]],,,,"AM",,,,,,,,,,,,,,,,,,[,,"10[1-3]",,,,"101",,,[3]],,[,,"(?:1|8[1-7])\\d\\d|40404",,,,"100"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],AO:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[235]",,,,"112"],[,,,,,,,,,[-1]],,,,"AO",,,,,,,,,,,,,,,,,,[,,"11[235]",,,,"112"],,[,,"11[235]",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],AR:[,[,,"[01389]\\d{1,4}",,,,,,,[2,3,4,5]],,,[,,"000|1(?:0[0-35-7]|1[0245]|2[015]|3[47]|4[478]|9)|911",,,,"19",,,[2,3]],[,,,,,,,,,[-1]],,,,"AR",,,,,,,,,,,,,,,,,,[,,"10[017]|911",,,,"100",,,[3]],,[,,"000|1(?:0[0-35-7]|1[02-5]|2[015]|3[47]|4[478]|9)|3372|89338|911",,,,"19"],[,,,,,,,,,[-1]],[,,"893\\d\\d",,,,"89300",,,[5]],,[,,"(?:337|893\\d)\\d",,,,"3370",,,[4,5]]],AS:[,[,,"[49]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"9(?:11|88)",,,,"911",,,[3]],[,,,,,,,,,[-1]],,,,"AS",,,,,,,,,,,,,,,,,,[,,"911",,,,"911",,,[3]],,[,,"40404|9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"404\\d\\d",,,,"40400",,,[5]]],AT:[,[,,"[168]\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"1(?:12|2[0238]|3[03]|4[0-247])|1(?:16\\d\\d|4[58])\\d",,,,"112"],[,,,,,,,,,[-1]],,,,"AT",,,,,,,,,,,,,,,,,,[,,"1(?:[12]2|33|44)",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:00[06]|1(?:17|23)))|2[0238]|3[03]|4(?:[0-247]|5[05]|84))|(?:61|8108[1-3])0",,,,"112"],[,,,,,,,,,[-1]],[,,"610|810\\d{3}",,,,"610",,,[3,6]],,[,,,,,,,,,[-1]]],AU:[,[,,"[0-27]\\d{2,7}",,,,,,,[3,4,5,6,7,8]],,,[,,"000|1(?:06|12|258885|55\\d)|733",,,,"000",,,[3,4,7]],[,,"1(?:2(?:34|456)|9\\d{4,6})",,,,"1234",,,[4,5,6,7,8]],,,,"AU",,,,,,,,,,,,,,,,,,[,,"000|1(?:06|12)",,,,"000",,,[3]],,[,,"000|1(?:06|1(?:00|2|9[46])|2(?:014[1-3]|[23]\\d|(?:4|5\\d)\\d{2,3}|68[689]|72(?:20|3\\d\\d)|8(?:[013-9]\\d|2))|555|9\\d{4,6})|225|7(?:33|67)",,,,"000"],[,,"1(?:1[09]\\d|24733)|225|767",,,,"225",,,[3,4,6]],[,,"1(?:258885|55\\d)",,,,"1550",,,[4,7]],,[,,"19\\d{4,6}",,,,"190000",,,[6,7,8]]],AW:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"100|911",,,,"100"],[,,,,,,,,,[-1]],,,,"AW",,,,,,,,,,,,,,,,,,[,,"100|911",,,,"100"],,[,,"1(?:00|18|76)|91[13]",,,,"100"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],AX:[,[,,"[17]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"112",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"AX",,,,,,,,,,,,,,,,,,[,,"112",,,,"112",,,[3]],,[,,"112|75[12]\\d\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],AZ:[,[,,"[148]\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:0[1-3]|12)",,,,"101",,,[3]],[,,,,,,,,,[-1]],,,,"AZ",,,,,,,,,,,,,,,,,,[,,"1(?:0[1-3]|12)",,,,"101",,,[3]],,[,,"1(?:0[1-3]|12)|(?:404|880)0",,,,"101"],[,,,,,,,,,[-1]],[,,"(?:404|880)\\d",,,,"4040",,,[4]],,[,,"(?:404|880)\\d",,,,"4040",,,[4]]],BA:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:16\\d{3}|2[2-4])",,,,"122",,,[3,6]],[,,,,,,,,,[-1]],,,,"BA",,,,,,,,,,,,,,,,,,[,,"12[2-4]",,,,"122",,,[3]],,[,,"1(?:16(?:00[06]|1(?:1[17]|23))|2(?:0[0-7]|[2-5]|6[0-26])|(?:[3-5]|7\\d)\\d\\d)|1(?:18|2[78])\\d\\d?",,,,"122"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BB:[,[,,"[2-689]\\d\\d",,,,,,,[3]],,,[,,"988|[2359]11",,,,"211"],[,,,,,,,,,[-1]],,,,"BB",,,,,,,,,,,,,,,,,,[,,"[2359]11",,,,"211"],,[,,"988|[2-689]11",,,,"211"],[,,,,,,,,,[-1]],[,,"[468]11",,,,"411"],,[,,,,,,,,,[-1]]],BD:[,[,,"[1579]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"10[0-26]|[19]99",,,,"100",,,[3]],[,,,,,,,,,[-1]],,,,"BD",,,,,,,,,,,,,,,,,,[,,"10[0-2]|[19]99",,,,"100",,,[3]],,[,,"1(?:0(?:[0-369]|5[1-4]|7[0-4]|8[0-29])|1[16-9]|2(?:[134]|2[0-5])|3(?:1\\d?|6[3-6])|5[2-9])|5012|786|9594|[19]99|1(?:0(?:50|6\\d)|33|4(?:0|1\\d))\\d",,,,"100"],[,,,,,,,,,[-1]],[,,"1(?:11|2[13])|(?:501|959)\\d|786",,,,"111",,,[3,4]],,[,,"959\\d",,,,"9590",,,[4]]],BE:[,[,,"[1-9]\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"1(?:0[0-35-8]|1[0269]|7(?:12|77)|813)|(?:116|8)\\d{3}",,,,"100"],[,,"1(?:2[03]|40)4|(?:1(?:[24]1|3[01])|[2-79]\\d\\d)\\d",,,,"1204",,,[4]],,,,"BE",,,,,,,,,,,,,,,,,,[,,"1(?:0[01]|12)",,,,"100",,,[3]],,[,,"1(?:0[0-8]|16117|2(?:12|3[0-24])|313|414|5(?:1[05]|5[15]|66|95)|6(?:1[167]|36|6[16])|7(?:[07][017]|1[27-9]|22|33|65)|81[39])|[2-9]\\d{3}|11[02679]|1(?:1600|45)0|1(?:[2-4]9|78)9|1[2-4]0[47]",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"[2-9]\\d{3}",,,,"2000",,,[4]]],BF:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],,,,"BF",,,,,,,,,,,,,,,,,,[,,"1[78]",,,,"17"],,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BG:[,[,,"1\\d\\d(?:\\d{3})?",,,,,,,[3,6]],,,[,,"1(?:1(?:2|6\\d{3})|50|6[06])",,,,"112"],[,,,,,,,,,[-1]],,,,"BG",,,,,,,,,,,,,,,,,,[,,"1(?:12|50|6[06])",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:000|111))|50|6[06])",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BH:[,[,,"[0189]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"(?:0[167]|81)\\d{3}|[19]99",,,,"199"],[,,"9[148]\\d{3}",,,,"91000",,,[5]],,,,"BH",,,,,,,,,,,,,,,,,,[,,"[19]99",,,,"199",,,[3]],,[,,"1(?:[02]\\d|12|4[01]|51|8[18]|9[169])|99[02489]|(?:0[167]|8[158]|9[148])\\d{3}",,,,"100"],[,,,,,,,,,[-1]],[,,"0[67]\\d{3}|88000|98555",,,,"06000",,,[5]],,[,,"88000|98555",,,,"88000",,,[5]]],BI:[,[,,"[16-9]\\d{2,3}",,,,,,,[3,4]],,,[,,"11[237]|611",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"BI",,,,,,,,,,,,,,,,,,[,,"11[237]",,,,"112",,,[3]],,[,,"1(?:1\\d|5[2-9]|6[0-256])|611|7(?:10|77|979)|8[28]8|900",,,,"110"],[,,,,,,,,,[-1]],[,,"611|7(?:10|77)|888|900",,,,"611",,,[3]],,[,,"(?:71|90)0",,,,"710",,,[3]]],BJ:[,[,,"[17]\\d{2,3}",,,,,,,[3,4]],,,[,,"11[78]|7[3-5]\\d\\d",,,,"117"],[,,,,,,,,,[-1]],,,,"BJ",,,,,,,,,,,,,,,,,,[,,"11[78]",,,,"117",,,[3]],,[,,"1(?:1[78]|2[02-5]|60)|7[0-5]\\d\\d",,,,"117"],[,,,,,,,,,[-1]],[,,"12[02-5]",,,,"120",,,[3]],,[,,,,,,,,,[-1]]],BL:[,[,,"1\\d",,,,,,,[2]],,,[,,"18",,,,"18"],[,,,,,,,,,[-1]],,,,"BL",,,,,,,,,,,,,,,,,,[,,"18",,,,"18"],,[,,"18",,,,"18"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BM:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"BM",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"176|9(?:11|88)",,,,"176"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],BN:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"99[135]",,,,"991"],[,,,,,,,,,[-1]],,,,"BN",,,,,,,,,,,,,,,,,,[,,"99[135]",,,,"991"],,[,,"99[135]",,,,"991"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BO:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"11[089]",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"BO",,,,,,,,,,,,,,,,,,[,,"11[089]",,,,"110",,,[3]],,[,,"11[089]|40404",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"404\\d\\d",,,,"40400",,,[5]]],BQ:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"112|911",,,,"112"],[,,,,,,,,,[-1]],,,,"BQ",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112"],,[,,"1(?:12|76)|911",,,,"112"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],BR:[,[,,"[1-69]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:00|12|28|8[015]|9[0-47-9])|4(?:57|82\\d)|911",,,,"100",,,[3,4]],[,,,,,,,,,[-1]],,,,"BR",,,,,,,,,,,,,,,,,,[,,"1(?:12|28|9[023])|911",,,,"112",,,[3]],,[,,"1(?:0(?:[02]|3(?:1[2-579]|2[13-9]|3[124-9]|4[1-3578]|5[1-468]|6[139]|8[149]|9[168])|5[0-35-9]|6(?:0|1[0-35-8]?|2[0145]|3[0137]?|4[37-9]?|5[0-35]|6[016]?|7[137]?|8[5-8]|9[1359]))|1[25-8]|2[357-9]|3[024-68]|4[12568]|5\\d|6[0-8]|8[015]|9[0-47-9])|2(?:7(?:330|878)|85959?)|(?:32|91)1|4(?:0404?|57|828)|55555|6(?:0\\d{4}|10000)|(?:133|411)[12]",,,,"100"],[,,"102|273\\d\\d|321",,,,"102",,,[3,5]],[,,"151|(?:278|555)\\d\\d|4(?:04\\d\\d?|11\\d|57)",,,,"151",,,[3,4,5]],,[,,"285\\d{2,3}|321|40404|(?:27[38]\\d|482)\\d|6(?:0\\d|10)\\d{3}",,,,"321"]],BS:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:1[19]|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"BS",,,,,,,,,,,,,,,,,,[,,"91[19]",,,,"911"],,[,,"9(?:1[19]|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BT:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"11[023]",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"BT",,,,,,,,,,,,,,,,,,[,,"11[023]",,,,"110",,,[3]],,[,,"11[0-6]|40404",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"404\\d\\d",,,,"40400",,,[5]]],BW:[,[,,"[19]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"9(?:11|9[7-9])",,,,"911",,,[3]],[,,,,,,,,,[-1]],,,,"BW",,,,,,,,,,,,,,,,,,[,,"9(?:11|9[7-9])",,,,"911",,,[3]],,[,,"1(?:1[26]|3123)|9(?:1[14]|9[1-57-9])",,,,"112"],[,,,,,,,,,[-1]],[,,"131\\d\\d",,,,"13100",,,[5]],,[,,"131\\d\\d",,,,"13100",,,[5]]],BY:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"1(?:0[1-3]|12)",,,,"101"],[,,,,,,,,,[-1]],,,,"BY",,,,,,,,,,,,,,,,,,[,,"1(?:0[1-3]|12)",,,,"101"],,[,,"1(?:0[1-79]|1[246]|35|5[1-35]|6[89]|7[5-7]|8[58]|9[1-7])",,,,"101"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],BZ:[,[,,"9\\d\\d?",,,,,,,[2,3]],,,[,,"9(?:0|11|22|66|77|9[09])",,,,"90"],[,,,,,,,,,[-1]],,,,"BZ",,,,,,,,,,,,,,,,,,[,,"9(?:0|11|90)",,,,"90"],,[,,"9(?:0|11|22|66|77|9[09])",,,,"90"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CA:[,[,,"[1-9]\\d\\d(?:\\d\\d(?:\\d(?:\\d{2})?)?)?",,,,,,,[3,5,6,8]],,,[,,"112|988|[29]11",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"CA",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112",,,[3]],,[,,"112|30000\\d{3}|[1-35-9]\\d{4,5}|[2-8]11|9(?:11|88)",,,,"112"],[,,,,,,,,,[-1]],[,,"[235-7]11",,,,"211",,,[3]],,[,,"300\\d{5}|[1-35-9]\\d{4,5}",,,,"10000",,,[5,6,8]]],CC:[,[,,"[01]\\d\\d",,,,,,,[3]],,,[,,"000|112",,,,"000"],[,,,,,,,,,[-1]],,,,"CC",,,,,,,,,,,,,,,,,,[,,"000|112",,,,"000"],,[,,"000|112",,,,"000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CD:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"1(?:1[348]|77|88)",,,,"113",,,[3]],[,,,,,,,,,[-1]],,,,"CD",,,,,,,,,,,,,,,,,,[,,"1(?:1[348]|77|88)",,,,"113",,,[3]],,[,,"1(?:1[348]|23|77|88)|40404",,,,"113"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],CF:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[78]|22\\d)",,,,"117"],[,,,,,,,,,[-1]],,,,"CF",,,,,,,,,,,,,,,,,,[,,"1(?:1[78]|220)",,,,"117"],,[,,"1(?:1[478]|220)",,,,"114"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CG:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[178]",,,,"111"],[,,,,,,,,,[-1]],,,,"CG",,,,,,,,,,,,,,,,,,[,,"11[78]",,,,"117"],,[,,"11[126-8]",,,,"111"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CH:[,[,,"[1-9]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:1(?:[278]|6\\d{3})|4[47])|5200",,,,"112",,,[3,4,6]],[,,"1(?:14|8[0-2589])\\d|543|83111",,,,"543",,,[3,4,5]],,,,"CH",,,,,,,,,,,,,,,,,,[,,"1(?:1[278]|44)",,,,"112",,,[3]],,[,,"1(?:0[78]\\d\\d|1(?:[278]|45|6(?:000|111))|4(?:[03-57]|1[0145])|6(?:00|[1-46])|8(?:02|1[189]|[25]0|7|8[08]|99))|[2-9]\\d{2,4}",,,,"112"],[,,"1(?:4[035]|6[1-46])|1(?:41|60)\\d",,,,"140",,,[3,4]],[,,"5(?:200|35)",,,,"535",,,[3,4]],,[,,"[2-9]\\d{2,4}",,,,"200",,,[3,4,5]]],CI:[,[,,"[14]\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[01]|[78]0)",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"CI",,,,,,,,,,,,,,,,,,[,,"1(?:1[01]|[78]0)",,,,"110",,,[3]],,[,,"1(?:1[01]|[78]0)|4443",,,,"110"],[,,,,,,,,,[-1]],[,,"444\\d",,,,"4440",,,[4]],,[,,"444\\d",,,,"4440",,,[4]]],CK:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"99[689]",,,,"996"],[,,,,,,,,,[-1]],,,,"CK",,,,,,,,,,,,,,,,,,[,,"99[689]",,,,"996"],,[,,"99[689]",,,,"996"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CL:[,[,,"[1-9]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:213|3[1-3])|434\\d|911",,,,"131",,,[3,4]],[,,"1(?:211|3(?:13|[348]0|5[01]))|(?:1(?:[05]6|[48]1|9[18])|2(?:01\\d|[23]2|77|88)|3(?:0[59]|13|3[279]|66)|4(?:[12]4|36\\d|4[017]|55)|5(?:00|41\\d|5[67]|99)|6(?:07\\d|13|22|3[06]|50|69)|787|8(?:[01]1|[48]8)|9(?:01|[12]0|33))\\d",,,,"1060",,,[4,5]],,,,"CL",,,,,,,,,,,,,,,,,,[,,"13[1-3]|911",,,,"131",,,[3]],,[,,"1(?:00|21[13]|3(?:13|[348]0|5[01])|4(?:0[02-6]|17|[379])|818|919)|2(?:0(?:01|122)|22[47]|323|777|882)|3(?:0(?:51|99)|132|3(?:29|[37]7)|665)|43656|5(?:(?:00|415)4|5(?:66|77)|995)|6(?:131|222|366|699)|7878|8(?:011|11[28]|482|889)|9(?:01|1)1|13\\d|4(?:[13]42|243|4(?:02|15|77)|554)|(?:1(?:[05]6|98)|339|6(?:07|[35])0|9(?:[12]0|33))0",,,,"100"],[,,"(?:200|333)\\d",,,,"2000",,,[4]],[,,,,,,,,,[-1]],,[,,"13(?:13|[348]0|5[01])|(?:1(?:[05]6|[28]1|4[01]|9[18])|2(?:0(?:0|1\\d)|[23]2|77|88)|3(?:0[59]|13|3[2379]|66)|436\\d|5(?:00|41\\d|5[67]|99)|6(?:07\\d|13|22|3[06]|50|69)|787|8(?:[01]1|[48]8)|9(?:01|[12]0|33))\\d|4(?:[1-3]4|4[017]|55)\\d",,,,"1060",,,[4,5]]],CM:[,[,,"[18]\\d{1,3}",,,,,,,[2,3,4]],,,[,,"1(?:1[37]|[37])",,,,"13",,,[2,3]],[,,,,,,,,,[-1]],,,,"CM",,,,,,,,,,,,,,,,,,[,,"1(?:1[37]|[37])",,,,"13",,,[2,3]],,[,,"1(?:1[37]|[37])|8711",,,,"13"],[,,,,,,,,,[-1]],[,,"871\\d",,,,"8710",,,[4]],,[,,"871\\d",,,,"8710",,,[4]]],CN:[,[,,"[19]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"1(?:1[09]|20)",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"CN",,,,,,,,,,,,,,,,,,[,,"1(?:1[09]|20)",,,,"110",,,[3]],,[,,"1(?:00\\d\\d|1[029]|20)|95\\d{3,4}",,,,"110"],[,,"1(?:00\\d\\d|12)|95\\d{3,4}",,,,"112"],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CO:[,[,,"[1-589]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"1(?:1[29]|23|32|56)",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"CO",,,,,,,,,,,,,,,,,,[,,"1(?:1[29]|23|32|56)",,,,"112",,,[3]],,[,,"1(?:06|1[2-9]|2[35-7]|3[27]|4[467]|5[36]|6[4-7]|95)|(?:29002|39003)9|40404|5930\\d\\d|85432|(?:[2359][57]|8(?:7|9\\d))\\d{3}",,,,"106"],[,,,,,,,,,[-1]],[,,"(?:40|85)4\\d\\d",,,,"40400",,,[5]],,[,,"(?:40|85)4\\d\\d",,,,"40400",,,[5]]],CR:[,[,,"[1359]\\d{2,3}",,,,,,,[3,4]],,,[,,"112|911",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"CR",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112",,,[3]],,[,,"1(?:0(?:00|15|2[2-4679])|1(?:1[0-35-9]|2|37|[46]6|7[57]|8[79]|9[0-379])|2(?:00|[12]2|34|55)|3(?:21|33)|4(?:0[06]|1[4-6])|5(?:15|5[15])|693|7(?:00|1[7-9]|2[02]|[67]7)|975)|3855|5(?:0(?:30|49)|510)|911",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"(?:385|5(?:0[34]|51))\\d",,,,"3850",,,[4]]],CU:[,[,,"[12]\\d\\d(?:\\d{3,4})?",,,,,,,[3,6,7]],,,[,,"10[4-7]|(?:116|204\\d)\\d{3}",,,,"104"],[,,,,,,,,,[-1]],,,,"CU",,,,,,,,,,,,,,,,,,[,,"10[4-6]",,,,"104",,,[3]],,[,,"1(?:0[4-7]|1(?:6111|8)|40)|2045252",,,,"104"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CV:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"13[0-2]",,,,"130"],[,,,,,,,,,[-1]],,,,"CV",,,,,,,,,,,,,,,,,,[,,"13[0-2]",,,,"130"],,[,,"13[0-2]",,,,"130"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CW:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"112|911",,,,"112"],[,,,,,,,,,[-1]],,,,"CW",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112"],,[,,"1(?:12|76)|911",,,,"112"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],CX:[,[,,"[01]\\d\\d",,,,,,,[3]],,,[,,"000|112",,,,"000"],[,,,,,,,,,[-1]],,,,"CX",,,,,,,,,,,,,,,,,,[,,"000|112",,,,"000"],,[,,"000|112",,,,"000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CY:[,[,,"1\\d\\d(?:\\d{3})?",,,,,,,[3,6]],,,[,,"1(?:1(?:2|6\\d{3})|99)",,,,"112"],[,,,,,,,,,[-1]],,,,"CY",,,,,,,,,,,,,,,,,,[,,"1(?:12|99)",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:000|111))|99)",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],CZ:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:1(?:2|6(?:00[06]|1(?:11|23)))|5\\d)",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"CZ",,,,,,,,,,,,,,,,,,[,,"1(?:12|5\\d)",,,,"112",,,[3]],,[,,"1(?:1(?:2|8\\d)|(?:2|3\\d)\\d{2,3}|5\\d|99)|1(?:16|4)\\d{3}",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],DE:[,[,,"1\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"11(?:[02]|6\\d{3})",,,,"110",,,[3,6]],[,,,,,,,,,[-1]],,,,"DE",,,,,,,,,,,,,,,,,,[,,"11[02]",,,,"110",,,[3]],,[,,"11(?:[025]|6(?:00[06]|1(?:1[167]|23))|800\\d)|118\\d\\d",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],DJ:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],,,,"DJ",,,,,,,,,,,,,,,,,,[,,"1[78]",,,,"17"],,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],DK:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:[24]|6\\d{3})",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"DK",,,,,,,,,,,,,,,,,,[,,"11[24]",,,,"112",,,[3]],,[,,"1(?:1(?:[2-48]|6(?:00[06]|111))|619[0-2]|8(?:01|1[0238]|28|30|5[13]|8[18]))",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],DM:[,[,,"[39]\\d\\d",,,,,,,[3]],,,[,,"333|9(?:11|88|99)",,,,"333"],[,,,,,,,,,[-1]],,,,"DM",,,,,,,,,,,,,,,,,,[,,"333|9(?:11|99)",,,,"333"],,[,,"333|9(?:11|88|99)",,,,"333"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],DO:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"112|9(?:11|88)",,,,"112"],[,,,,,,,,,[-1]],,,,"DO",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112"],,[,,"112|9(?:11|88)",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],DZ:[,[,,"[17]\\d{1,3}",,,,,,,[2,3,4]],,,[,,"1(?:12|[47]|54\\d)",,,,"14"],[,,,,,,,,,[-1]],,,,"DZ",,,,,,,,,,,,,,,,,,[,,"1(?:12|[47])",,,,"14",,,[2,3]],,[,,"1(?:055|12|[47]|548)|730",,,,"14"],[,,,,,,,,,[-1]],[,,"730",,,,"730",,,[3]],,[,,"730",,,,"730",,,[3]]],EC:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"1(?:0[12]|12)|911",,,,"101"],[,,,,,,,,,[-1]],,,,"EC",,,,,,,,,,,,,,,,,,[,,"1(?:0[12]|12)|911",,,,"101"],,[,,"1(?:0[12]|12)|911",,,,"101"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],EE:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:1(?:[02]|6\\d{3})|2(?:05|28)|3(?:014|3(?:21|5\\d?)|660)|492|5(?:1[03]|410|501)|6(?:112|333|644)|7(?:012|127|89)|8(?:10|8[57])|9(?:0[134]|14))",,,,"110"],[,,"1(?:18(?:00|[12458]\\d?)|2(?:0(?:[02-46-8]\\d?|1[0-36])|1(?:[0-4]\\d?|6[06])|2(?:[0-4]\\d?|5[25])|[367]|4(?:0[04]|[12]\\d?|4[24]|54)|55[12457])|3(?:0(?:[02]\\d?|1[13578]|3[356])|1[1347]|2[02-5]|3(?:[01347]\\d?|2[023]|88)|4(?:[35]\\d?|4[34])|5(?:3[134]|5[035])|666)|4(?:2(?:00|4\\d?)|4(?:0[01358]|1[024]|50|7\\d?)|900)|5(?:0[0-35]|1(?:[1267]\\d?|5[0-7]|82)|2(?:[014-6]\\d?|22)|330|4(?:[35]\\d?|44)|5(?:00|[1-69]\\d?)|9(?:[159]\\d?|[38]0|77))|6(?:1(?:00|1[19]|[35-9]\\d?)|2(?:2[26]|[68]\\d?)|3(?:22|36|6[36])|5|6(?:[0-359]\\d?|6[0-26])|7(?:00|55|7\\d?|8[89])|9(?:00|1\\d?|69))|7(?:0(?:[023]\\d?|1[0578])|1(?:00|2[034]|[4-9]\\d?)|2(?:[07]\\d?|20|44)|7(?:[0-57]\\d?|9[79])|8(?:0[08]|2\\d?|8[0178])|9(?:00|97))|8(?:1[127]|8[1268]|9[269])|9(?:0(?:[02]\\d?|69|9[0269])|1[1-3689]|21))",,,,"123",,,[3,4,5]],,,,"EE",,,,,,,,,,,,,,,,,,[,,"11[02]",,,,"110",,,[3]],,[,,"1(?:1(?:[02-579]|6(?:000|111)|8(?:[09]\\d|[1-8]))|2[36-9]|3[7-9]|4[05-7]|5[6-8]|6[05]|7[3-6]|8[02-7]|9[3-9])|1(?:2[0-245]|3[0-6]|4[1-489]|5[0-59]|6[1-46-9]|7[0-27-9]|8[189]|9[0-2])\\d\\d?",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"1(?:18[1258]|2(?:0(?:1[036]|[46]\\d?)|166|21|4(?:0[04]|1\\d?|5[47])|[67])|3(?:0(?:1[13-578]|2\\d?|3[56])|1[15]|2[045]|3(?:[13]\\d?|2[13])|43|5(?:00|3[34]|53))|44(?:0[0135]|14|50|7\\d?)|5(?:05|1(?:[12]\\d?|5[1246]|8[12])|2(?:[01]\\d?|22)|3(?:00|3[03])|4(?:15|5\\d?)|500|9(?:5\\d?|77|80))|6(?:1[35-8]|226|3(?:22|3[36]|66)|644|7(?:00|7\\d?|89)|9(?:00|69))|7(?:01[258]|1(?:00|[15]\\d?)|2(?:44|7\\d?)|8(?:00|87|9\\d?))|8(?:1[128]|8[56]|9(?:[26]\\d?|77))|90(?:2\\d?|69|92))",,,,"126",,,[3,4,5]]],EG:[,[,,"[13]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"1(?:2[23]|80)",,,,"122",,,[3]],[,,,,,,,,,[-1]],,,,"EG",,,,,,,,,,,,,,,,,,[,,"1(?:2[23]|80)",,,,"122",,,[3]],,[,,"1(?:2[23]|[69]\\d{3}|80)|34400",,,,"122"],[,,,,,,,,,[-1]],[,,"344\\d\\d",,,,"34400",,,[5]],,[,,"344\\d\\d",,,,"34400",,,[5]]],EH:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:[59]|77)",,,,"15"],[,,,,,,,,,[-1]],,,,"EH",,,,,,,,,,,,,,,,,,[,,"1(?:[59]|77)",,,,"15"],,[,,"1(?:[59]|77)",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ER:[,[,,"[12]\\d\\d(?:\\d{3})?",,,,,,,[3,6]],,,[,,"11[2-46]|(?:12[47]|20[12])\\d{3}",,,,"112"],[,,,,,,,,,[-1]],,,,"ER",,,,,,,,,,,,,,,,,,[,,"1(?:1[2-46]|24422)|20(?:1(?:606|917)|2914)|(?:1277|2020)99",,,,"112"],,[,,"1(?:1[2-6]|24422)|20(?:1(?:606|917)|2914)|(?:1277|2020)99",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ES:[,[,,"[0-379]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"0(?:16|6[57]|8[58])|1(?:006|12|[3-7]\\d\\d)|(?:116|20\\d)\\d{3}",,,,"016",,,[3,4,6]],[,,"[12]2\\d{1,4}|90(?:5\\d|7)|(?:118|2(?:[357]\\d|80)|3[357]\\d)\\d\\d|[79]9[57]\\d{3}",,,,"120"],,,,"ES",,,,,,,,,,,,,,,,,,[,,"08[58]|112",,,,"085",,,[3]],,[,,"0(?:1[0-26]|6[0-257]|8[058]|9[12])|1(?:0[03-57]\\d{1,3}|1(?:2|6(?:000|111)|8\\d\\d)|2\\d{1,4}|[3-9]\\d\\d)|2(?:2\\d{1,4}|80\\d\\d)|90(?:5[124578]|7)|1(?:3[34]|77)|(?:2[01]\\d|[79]9[57])\\d{3}|[23][357]\\d{3}",,,,"010"],[,,"0(?:[16][0-2]|80|9[12])|21\\d{4}",,,,"010",,,[3,6]],[,,"1(?:3[34]|77)|[12]2\\d{1,4}",,,,"120"],,[,,"(?:2[0-2]\\d|3[357]|[79]9[57])\\d{3}|2(?:[2357]\\d|80)\\d\\d",,,,"22000",,,[5,6]]],ET:[,[,,"9\\d\\d?",,,,,,,[2,3]],,,[,,"9(?:07|11?|2|39?|9[17])",,,,"91"],[,,,,,,,,,[-1]],,,,"ET",,,,,,,,,,,,,,,,,,[,,"9(?:11?|2|39?|9[17])",,,,"91"],,[,,"9(?:07|11?|2|39?|45|9[17])",,,,"91"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],FI:[,[,,"[17]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"11(?:2|6\\d{3})",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"FI",,,,,,,,,,,,,,,,,,[,,"112",,,,"112",,,[3]],,[,,"11(?:2|6(?:00[06]|1(?:1[17]|23)))|75[12]\\d\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],FJ:[,[,,"[0-579]\\d(?:\\d(?:\\d{2})?)?",,,,,,,[2,3,5]],,,[,,"91[17]",,,,"911",,,[3]],[,,,,,,,,,[-1]],,,,"FJ",,,,,,,,,,,,,,,,,,[,,"91[17]",,,,"911",,,[3]],,[,,"0(?:1[34]|8[1-4])|1(?:0[1-3]|[25]9)|2[289]|30|40404|91[137]|[45]4|75",,,,"22"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"404\\d\\d",,,,"40400",,,[5]]],FK:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"FK",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"1\\d\\d|999",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],FM:[,[,,"[39]\\d\\d(?:\\d{3})?",,,,,,,[3,6]],,,[,,"320\\d{3}|911",,,,"911"],[,,,,,,,,,[-1]],,,,"FM",,,,,,,,,,,,,,,,,,[,,"(?:32022|91)1",,,,"911"],,[,,"(?:32022|91)1",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],FO:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[24]|81\\d)",,,,"112"],[,,,,,,,,,[-1]],,,,"FO",,,,,,,,,,,,,,,,,,[,,"11[24]",,,,"112",,,[3]],,[,,"1(?:1[248]|819)|1(?:4[124]|71|8[7-9])\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],FR:[,[,,"[1-8]\\d{1,5}",,,,,,,[2,3,4,5,6]],,,[,,"1(?:0(?:07|[13]3)|1[02459]|[578]|9[167])|224|(?:3370|74)0|(?:116\\d|3[01])\\d\\d",,,,"15"],[,,"366\\d\\d|3[2-9]\\d\\d|(?:118|[4-8]\\d)\\d{3}",,,,"3200",,,[4,5,6]],,,,"FR",,,,,,,,,,,,,,,,,,[,,"1(?:12|[578])",,,,"15",,,[2,3]],,[,,"1(?:0\\d\\d|1(?:[02459]|6(?:000|111)|8\\d{3})|[578]|9[167])|2(?:0(?:00|2)0|24)|[3-8]\\d{4}|3\\d{3}|6(?:1[14]|34)|7(?:0[06]|22|40)",,,,"15"],[,,"10(?:[134]4|2[23]|5\\d|99)|202\\d|634|70[06]|(?:106|61)[14]",,,,"611",,,[3,4]],[,,"118777|224|6(?:1[14]|34)|7(?:0[06]|22|40)|20(?:0\\d|2)\\d",,,,"224",,,[3,4,5,6]],,[,,"114|[3-8]\\d{4}",,,,"114",,,[3,5]]],GA:[,[,,"1\\d(?:\\d{2})?",,,,,,,[2,4]],,,[,,"18|1(?:3\\d|73)\\d",,,,"18"],[,,,,,,,,,[-1]],,,,"GA",,,,,,,,,,,,,,,,,,[,,"1(?:3\\d\\d|730|8)",,,,"18"],,[,,"1(?:3\\d\\d|730|8)",,,,"18"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GB:[,[,,"[1-46-9]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:05|1(?:[29]|6\\d{3})|7[56]\\d|8000)|2(?:20\\d|48)|4444|999",,,,"105"],[,,,,,,,,,[-1]],,,,"GB",,,,,,,,,,,,,,,,,,[,,"112|999",,,,"112",,,[3]],,[,,"1(?:0[015]|1(?:[129]|6(?:000|1(?:11|23))|8\\d{3})|2(?:[1-3]|50)|33|4(?:1|7\\d)|571|7(?:0\\d|[56]0)|800\\d|9[15])|2(?:0202|1300|2(?:02|11)|3(?:02|336|45)|4(?:25|8))|3[13]3|4(?:0[02]|35[01]|44[45]|5\\d)|(?:[68]\\d|7[089])\\d{3}|15\\d|2[02]2|650|789|9(?:01|99)",,,,"100"],[,,,,,,,,,[-1]],[,,"1(?:(?:25|7[56])\\d|571)|2(?:02(?:\\d{2})?|[13]3\\d\\d|48)|4444|901",,,,"202",,,[3,4,5]],,[,,"(?:125|2(?:020|13\\d)|(?:7[089]|8[01])\\d\\d)\\d",,,,"1250",,,[4,5]]],GD:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"GD",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"176|9(?:11|88)",,,,"176"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],GE:[,[,,"[014]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"0(?:11|33)|11[1-3]|[01]22",,,,"011",,,[3]],[,,,,,,,,,[-1]],,,,"GE",,,,,,,,,,,,,,,,,,[,,"0(?:11|33)|11[1-3]|[01]22",,,,"011",,,[3]],,[,,"0(?:11|33)|11[1-3]|40404|[01]22",,,,"011"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],GF:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],,,,"GF",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15"],,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GG:[,[,,"[19]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"112|999",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"GG",,,,,,,,,,,,,,,,,,[,,"112|999",,,,"112",,,[3]],,[,,"1(?:0[01]|1[12]|23|41|55|9[05])|999|1(?:1[68]\\d\\d|47|800)\\d",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GH:[,[,,"[14589]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"19[1-3]|999",,,,"191",,,[3]],[,,,,,,,,,[-1]],,,,"GH",,,,,,,,,,,,,,,,,,[,,"19[1-3]|999",,,,"191",,,[3]],,[,,"19[1-3]|40404|(?:54|83)00|999",,,,"191"],[,,,,,,,,,[-1]],[,,"404\\d\\d|(?:54|83)0\\d",,,,"5400",,,[4,5]],,[,,"404\\d\\d|(?:54|83)0\\d",,,,"5400",,,[4,5]]],GI:[,[,,"[158]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:00|1[25]|23|4(?:1|7\\d)|5[15]|9[02-49])|555|(?:116\\d|80)\\d\\d",,,,"100",,,[3,4,6]],[,,"8[1-69]\\d\\d",,,,"8100",,,[4]],,,,"GI",,,,,,,,,,,,,,,,,,[,,"1(?:12|9[09])",,,,"112",,,[3]],,[,,"1(?:00|1(?:[25]|6(?:00[06]|1(?:1[17]|23))|8\\d\\d)|23|4(?:1|7[014])|5[015]|9[02-49])|555|8[0-79]\\d\\d|8(?:00|4[0-2]|8[0-589])",,,,"100"],[,,"150|87\\d\\d",,,,"150",,,[3,4]],[,,"1(?:00|1(?:5|8\\d\\d)|23|51|9[2-4])|555|8(?:00|4[0-2]|8[0-589])",,,,"100",,,[3,5]],,[,,,,,,,,,[-1]]],GL:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"112",,,,"112"],[,,,,,,,,,[-1]],,,,"GL",,,,,,,,,,,,,,,,,,[,,"112",,,,"112"],,[,,"1[1-8]\\d",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GM:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:1[6-8]|[6-8])",,,,"16"],[,,,,,,,,,[-1]],,,,"GM",,,,,,,,,,,,,,,,,,[,,"1(?:1[6-8]|[6-8])",,,,"16"],,[,,"1(?:1[6-8]|[6-8])",,,,"16"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GN:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,,"GN",,,,,,,,,,,,,,,,,,[,,,,,,,,,[-1]],,[,,"12\\d|40404",,,,"120"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],GP:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],,,,"GP",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15"],,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GR:[,[,,"1\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"1(?:0[089]|1(?:2|6\\d{3})|66|99)",,,,"100",,,[3,6]],[,,,,,,,,,[-1]],,,,"GR",,,,,,,,,,,,,,,,,,[,,"1(?:00|12|66|99)",,,,"100",,,[3]],,[,,"1(?:0[089]|1(?:2|320|6(?:000|1(?:1[17]|23)))|(?:389|9)9|66)",,,,"100"],[,,"113\\d\\d",,,,"11300",,,[5]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GT:[,[,,"[14]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:10|2[03])",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"GT",,,,,,,,,,,,,,,,,,[,,"1(?:10|2[03])",,,,"110",,,[3]],,[,,"110|40404|1(?:2|[57]\\d)\\d",,,,"110"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],GU:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"GU",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GW:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[378]",,,,"113"],[,,,,,,,,,[-1]],,,,"GW",,,,,,,,,,,,,,,,,,[,,"11[378]",,,,"113"],,[,,"11[378]",,,,"113"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],GY:[,[,,"[019]\\d{2,3}",,,,,,,[3,4]],,,[,,"91[1-3]",,,,"911",,,[3]],[,,,,,,,,,[-1]],,,,"GY",,,,,,,,,,,,,,,,,,[,,"91[1-3]",,,,"911",,,[3]],,[,,"0(?:02|(?:17|80)1|444|7(?:[67]7|9)|9(?:0[78]|[2-47]))|1(?:443|5[568])|91[1-3]",,,,"002"],[,,,,,,,,,[-1]],[,,"144\\d",,,,"1440",,,[4]],,[,,"144\\d",,,,"1440",,,[4]]],HK:[,[,,"[19]\\d{2,6}",,,,,,,[3,4,5,6,7]],,,[,,"112|99[29]",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"HK",,,,,,,,,,,,,,,,,,[,,"112|99[29]",,,,"112",,,[3]],,[,,"1(?:0(?:(?:[0136]\\d|2[14])\\d{0,3}|8[138])|12|2(?:[0-3]\\d{0,4}|(?:58|8[13])\\d{0,3})|7(?:[135-9]\\d{0,4}|219\\d{0,2})|8(?:0(?:(?:[13]|60\\d)\\d|8)|1(?:0\\d|[2-8])|2(?:0[5-9]|(?:18|2)2|3|8[128])|(?:(?:3[0-689]\\d|7(?:2[1-389]|8[0235-9]|93))\\d|8)\\d|50[138]|6(?:1(?:11|86)|8)))|99[29]|10[0139]",,,,"100"],[,,,,,,,,,[-1]],[,,"109|1(?:08|85\\d)\\d",,,,"109",,,[3,4,5]],,[,,"992",,,,"992",,,[3]]],HN:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"199",,,,"199",,,[3]],[,,,,,,,,,[-1]],,,,"HN",,,,,,,,,,,,,,,,,,[,,"199",,,,"199",,,[3]],,[,,"199|40404",,,,"199"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],HR:[,[,,"[19]\\d{1,5}",,,,,,,[2,3,4,5,6]],,,[,,"1(?:12|9[2-4])|9[34]|1(?:16\\d|39)\\d\\d",,,,"93",,,[2,3,5,6]],[,,"118\\d\\d",,,,"11800",,,[5]],,,,"HR",,,,,,,,,,,,,,,,,,[,,"1(?:12|9[2-4])|9[34]",,,,"93",,,[2,3]],,[,,"1(?:1(?:2|6(?:00[06]|1(?:1[17]|23))|8\\d\\d)|3977|9(?:[2-5]|87))|9[34]",,,,"93"],[,,,,,,,,,[-1]],[,,"139\\d\\d",,,,"13900",,,[5]],,[,,"139\\d\\d",,,,"13900",,,[5]]],HT:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"11[48]",,,,"114",,,[3]],[,,,,,,,,,[-1]],,,,"HT",,,,,,,,,,,,,,,,,,[,,"11[48]",,,,"114",,,[3]],,[,,"11[48]|40404",,,,"114"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],HU:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:0[457]|12|4[0-4]\\d)|1(?:16\\d|37|45)\\d\\d",,,,"104"],[,,,,,,,,,[-1]],,,,"HU",,,,,,,,,,,,,,,,,,[,,"1(?:0[457]|12)",,,,"104",,,[3]],,[,,"1(?:0[457]|1(?:2|6(?:000|1(?:11|23))|800)|2(?:0[0-4]|1[013489]|2[0-5]|3[0-46]|4[0-24-68]|5[0-2568]|6[06]|7[0-25-7]|8[028]|9[08])|37(?:00|37|7[07])|4(?:0[0-5]|1[013-8]|2[034]|3[23]|4[02-9]|5(?:00|41|67))|777|8(?:1[27-9]|2[04]|40|[589]))",,,,"104"],[,,,,,,,,,[-1]],[,,"1(?:4[0-4]|77)\\d|1(?:18|2|45)\\d\\d",,,,"1200",,,[4,5]],,[,,"184\\d",,,,"1840",,,[4]]],ID:[,[,,"[178]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"11[02389]",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"ID",,,,,,,,,,,,,,,,,,[,,"11[02389]",,,,"110",,,[3]],,[,,"1(?:1[02389]|40\\d\\d|50264)|71400|89887",,,,"110"],[,,,,,,,,,[-1]],[,,"(?:714|898)\\d\\d",,,,"71400",,,[5]],,[,,"714\\d\\d",,,,"71400",,,[5]]],IE:[,[,,"[159]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:2|6\\d{3})|999",,,,"112",,,[3,6]],[,,"5[37]\\d{3}",,,,"53000",,,[5]],,,,"IE",,,,,,,,,,,,,,,,,,[,,"112|999",,,,"112",,,[3]],,[,,"11(?:2|6(?:00[06]|1(?:1[17]|23)))|999|(?:1(?:18|9)|5[0137]\\d)\\d\\d",,,,"112"],[,,"51\\d{3}",,,,"51000",,,[5]],[,,"51210",,,,"51210",,,[5]],,[,,"51210|(?:118|5[037]\\d)\\d\\d",,,,"11800",,,[5]]],IL:[,[,,"[12]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:0[0-2]|12)",,,,"100",,,[3]],[,,,,,,,,,[-1]],,,,"IL",,,,,,,,,,,,,,,,,,[,,"1(?:0[0-2]|12)",,,,"100",,,[3]],,[,,"1(?:0[0-2]|1(?:[013-9]\\d|2)|[2-9]\\d\\d)|2407|(?:104|27)00",,,,"100"],[,,,,,,,,,[-1]],[,,"104\\d\\d",,,,"10400",,,[5]],,[,,"104\\d\\d",,,,"10400",,,[5]]],IM:[,[,,"[189]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"999",,,,"999",,,[3]],[,,,,,,,,,[-1]],,,,"IM",,,,,,,,,,,,,,,,,,[,,"999",,,,"999",,,[3]],,[,,"1\\d\\d(?:\\d{3})?|8(?:6444|9887)|999",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"8(?:64|98)\\d\\d",,,,"86400",,,[5]]],IN:[,[,,"[12578]\\d{2,8}",,,,,,,[3,4,5,6,7,8,9]],,,[,,"1(?:0[0-248]|1[289]|21|[39][89]|4[01]|6(?:1|6\\d?)|8[12])|777|800|1[05]5\\d|1(?:07|51|94)\\d\\d?|(?:1(?:[05]5\\d|70)\\d|261)\\d|1(?:0[369]|10|29|3[126]|9[0-256])\\d",,,,"100",,,[3,4,5,6]],[,,"11[67]\\d{4}|56161561",,,,"1160000",,,[7,8]],,,,"IN",,,,,,,,,,,,,,,,,,[,,"1(?:0[0-28]|12|298)|2611",,,,"100",,,[3,4]],,[,,"1(?:0(?:[0-248]|3[39]|5(?:010|6)|6[3468]|7(?:[01357]|[28]0?|4[01])|9[0135-9])|1(?:00|[289])|2(?:1|98)|3(?:11|2[0-2]|63|[89])|4[01]|5(?:1(?:0[0-36]|[127])|54)|6(?:1|6[01]?)|7000|8[12]|9(?:0[013-59]|12|25|4[4-9]\\d?|50|6[1347]|[89]))|2611|5(?:0(?:0(?:0\\d|1|20?)|325|5[2-79]\\d{3,5})|1(?:234|555|717|818|96[49])|2(?:0(?:0[01]|[14]0)|151|555|666|888|9(?:06|99\\d?))|3(?:0[01]0|131|553|(?:66|77)6)|(?:464|55[05])\\d{1,3}|6(?:070|3[68]|43)|717\\d)|777|800|5(?:05(?:0|1\\d)|221|3(?:03|3[23]))\\d{1,4}|5(?:(?:04|88)0|2(?:2[0267]|3[16])|4(?:1[04]|20|3[02])|5(?:3[16]|67)|6(?:06|[67]\\d)|787|9(?:64|90))\\d\\d?|(?:1(?:05[79]|(?:1[67][0-2]|802)\\d|55[23])\\d|5(?:(?:00(?:0\\d|1)|(?:304|616)\\d\\d)\\d|1(?:0[12]|4[2-4])|2(?:2[3589]|3(?:1\\d{3}|2)|4[04]|7[78])|4(?:[02]4|32\\d{4}|4[04]|99)|5(?:1[25]|[36]5|4[45]|93)|7(?:(?:17\\d|57)\\d\\d|[27]7|88)|8(?:3[4-69]|4[01]|5[58]|88(?:8\\d\\d|9)|99)|9(?:0(?:0|2\\d{3})|55|6[67]|77|88)))\\d",,,,"100"],[,,"5(?:14(?:2[5-9]|[34]\\d)|757555)",,,,"51425",,,[5,7]],[,,"1(?:(?:1[67]\\d\\d|70)\\d\\d|55330|909)|5(?:300\\d|6161(?:17[89]|561))|1(?:[19][89]|21|4[01])",,,,"118",,,[3,4,5,6,7,8]],,[,,"1(?:39|90[019])|5(?:14(?:2[5-9]|[34]\\d)|6161(?:17[89]|561)|757555)",,,,"139",,,[3,4,5,7,8]]],IQ:[,[,,"[1479]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:0[04]|15|22)",,,,"100",,,[3]],[,,,,,,,,,[-1]],,,,"IQ",,,,,,,,,,,,,,,,,,[,,"1(?:0[04]|15|22)",,,,"100",,,[3]],,[,,"1(?:0[04]|15|22)|4432|71117|9988",,,,"100"],[,,,,,,,,,[-1]],[,,"(?:443|711\\d|998)\\d",,,,"4430",,,[4,5]],,[,,"(?:443|711\\d|998)\\d",,,,"4430",,,[4,5]]],IR:[,[,,"[129]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:1[0-68]|2[0-59]|9[0-579])|911",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"IR",,,,,,,,,,,,,,,,,,[,,"1(?:1[025]|25)|911",,,,"110",,,[3]],,[,,"1(?:1[0-68]|2[0-59]|3[346-8]|4(?:[0147]|[289]0)|5(?:0[14]|1[02479]|2[0-3]|39|[49]0|65)|6(?:[16]6|[27]|90)|8(?:03|1[18]|22|3[37]|4[28]|88|99)|9[0-579])|20(?:[09]0|1(?:[038]|1[079]|26|9[69])|2[01])|9(?:11|9(?:0009|90))",,,,"110"],[,,"1(?:5[0-469]|8[0-489])\\d",,,,"1500",,,[4]],[,,"(?:1(?:5[0-469]|8[0-489])|99(?:0\\d\\d|9))\\d",,,,"1500",,,[4,6]],,[,,"990\\d{3}",,,,"990000",,,[6]]],IS:[,[,,"1\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"1(?:12|71\\d)",,,,"112",,,[3,4]],[,,,,,,,,,[-1]],,,,"IS",,,,,,,,,,,,,,,,,,[,,"112",,,,"112",,,[3]],,[,,"1(?:1(?:[28]|61(?:16|23))|4(?:00|1[145]|4[0146])|55|7(?:00|17|7[07-9])|8(?:[02]0|1[16-9]|88)|900)",,,,"112"],[,,,,,,,,,[-1]],[,,"14(?:0\\d|41)",,,,"1400",,,[4]],,[,,"1(?:415|90\\d)",,,,"1415",,,[4]]],IT:[,[,,"[14]\\d{2,6}",,,,,,,[3,4,5,6,7]],,,[,,"1(?:1(?:[2358]|6\\d{3})|87)",,,,"112",,,[3,6]],[,,"(?:12|4(?:[478](?:[0-4]|[5-9]\\d\\d)|55))\\d\\d",,,,"1200",,,[4,5,7]],,,,"IT",,,,,,,,,,,,,,,,,,[,,"11[2358]",,,,"112",,,[3]],,[,,"1(?:0\\d{2,3}|1(?:[2-57-9]|6(?:000|111))|3[39]|4(?:82|9\\d{1,3})|5(?:00|1[58]|2[25]|3[03]|44|[59])|60|8[67]|9(?:[01]|2[2-9]|4\\d|696))|4(?:2323|5045)|(?:1(?:2|92[01])|4(?:3(?:[01]|[45]\\d\\d)|[478](?:[0-4]|[5-9]\\d\\d)|55))\\d\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"4(?:3(?:[01]|[45]\\d\\d)|[478](?:[0-4]|[5-9]\\d\\d)|5[05])\\d\\d",,,,"43000",,,[5,7]]],JE:[,[,,"[129]\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"112|999",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"JE",,,,,,,,,,,,,,,,,,[,,"112|999",,,,"112",,,[3]],,[,,"1(?:00|1(?:2|8\\d{3})|23|4(?:[14]|28|7\\d)|5\\d|7(?:0[12]|[128]|35?)|808|9[0135])|23[2-4]|999",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],JM:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"11[029]|9(?:11|88)",,,,"110"],[,,,,,,,,,[-1]],,,,"JM",,,,,,,,,,,,,,,,,,[,,"11[029]|911",,,,"110"],,[,,"1(?:1[029]|76)|9(?:11|88)",,,,"110"],[,,,,,,,,,[-1]],[,,"176",,,,"176"],,[,,"176",,,,"176"]],JO:[,[,,"[19]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"1(?:0[235]|1[2-6]|9[127])|911",,,,"102",,,[3]],[,,"9[0-4689]\\d{3}",,,,"90000",,,[5]],,,,"JO",,,,,,,,,,,,,,,,,,[,,"1(?:12|9[127])|911",,,,"112",,,[3]],,[,,"1(?:0[2359]|1[0-68]|9[0-24-79])|9[0-4689]\\d{3}|911",,,,"102"],[,,,,,,,,,[-1]],[,,"9[0-4689]\\d{3}",,,,"90000",,,[5]],,[,,"9[0-4689]\\d{3}",,,,"90000",,,[5]]],JP:[,[,,"[01]\\d\\d(?:\\d{7})?",,,,,,,[3,10]],,,[,,"11[089]",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"JP",,,,,,,,,,,,,,,,,,[,,"11[09]",,,,"110",,,[3]],,[,,"000[259]\\d{6}|1(?:0[24]|1[089]|44|89)",,,,"102"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"000[259]\\d{6}",,,,"0002000000",,,[10]]],KE:[,[,,"[1-9]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:1(?:[246]|9\\d)|5(?:01|2[127]|6[26]\\d))|999",,,,"112"],[,,"909\\d\\d",,,,"90900",,,[5]],,,,"KE",,,,,,,,,,,,,,,,,,[,,"11[24]|999",,,,"112",,,[3]],,[,,"1(?:0(?:[07-9]|1[0-25]|400)|1(?:[024-6]|9[0-579])|2[1-3]|3[01]|4[14]|5(?:[01][01]|2[0-24-79]|33|4[05]|5[59]|6(?:00|29|6[67]))|(?:6[035]\\d|[78])\\d|9(?:[02-9]\\d\\d|19))|(?:(?:2[0-79]|[37][0-29]|4[0-4]|6[2357]|8\\d)\\d|5(?:[0-7]\\d|99))\\d\\d|9(?:09\\d\\d|99)|8988",,,,"100"],[,,,,,,,,,[-1]],[,,"1(?:(?:04|6[35])\\d\\d|3[01]|4[14]|5(?:1\\d|2[25]))|(?:(?:2[0-79]|[37][0-29]|4[0-4]|6[2357]|8\\d)\\d|5(?:[0-7]\\d|99)|909)\\d\\d|898\\d",,,,"130"],,[,,"1(?:(?:04|6[035])\\d\\d|4[14]|5(?:01|55|6[26]\\d))|40404|8988|909\\d\\d",,,,"141"]],KG:[,[,,"[14]\\d{2,3}",,,,,,,[3,4]],,,[,,"10[1-3]",,,,"101",,,[3]],[,,,,,,,,,[-1]],,,,"KG",,,,,,,,,,,,,,,,,,[,,"10[1-3]",,,,"101",,,[3]],,[,,"10[1-3]|4040",,,,"101"],[,,,,,,,,,[-1]],[,,"404\\d",,,,"4040",,,[4]],,[,,"404\\d",,,,"4040",,,[4]]],KH:[,[,,"[146]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"11[7-9]|666",,,,"117",,,[3]],[,,,,,,,,,[-1]],,,,"KH",,,,,,,,,,,,,,,,,,[,,"11[7-9]|666",,,,"117",,,[3]],,[,,"11[7-9]|40404|666",,,,"117"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],KI:[,[,,"[179]\\d{2,3}",,,,,,,[3,4]],,,[,,"19[2-5]|99[2-4]",,,,"192",,,[3]],[,,,,,,,,,[-1]],,,,"KI",,,,,,,,,,,,,,,,,,[,,"19[2-5]|99[2-4]",,,,"192",,,[3]],,[,,"1(?:05[0-259]|88|9[2-5])|777|99[2-4]|10[0-8]",,,,"100"],[,,"103",,,,"103",,,[3]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],KM:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],,,,"KM",,,,,,,,,,,,,,,,,,[,,"1[78]",,,,"17"],,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],KN:[,[,,"[39]\\d\\d",,,,,,,[3]],,,[,,"333|9(?:11|88|99)",,,,"333"],[,,,,,,,,,[-1]],,,,"KN",,,,,,,,,,,,,,,,,,[,,"333|9(?:11|99)",,,,"333"],,[,,"333|9(?:11|88|99)",,,,"333"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],KP:[,[,,"[18]\\d\\d",,,,,,,[3]],,,[,,"11[29]|819",,,,"112"],[,,,,,,,,,[-1]],,,,"KP",,,,,,,,,,,,,,,,,,[,,"11[29]|819",,,,"112"],,[,,"11[29]|819",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],KR:[,[,,"1\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:1[27-9]|28|330|82)",,,,"112",,,[3,4]],[,,,,,,,,,[-1]],,,,"KR",,,,,,,,,,,,,,,,,,[,,"11[29]",,,,"112",,,[3]],,[,,"1(?:[016-9]114|3(?:0[01]|2|3[0-35-9]|45?|5[057]|6[569]|7[79]|8[2589]|9[0189]))|1(?:0[015]|1\\d|2[01357-9]|41|8[28])",,,,"100"],[,,,,,,,,,[-1]],[,,"1(?:0[01]|1[4-6]|41)|1(?:[06-9]1\\d|111)\\d",,,,"100",,,[3,5]],,[,,,,,,,,,[-1]]],KW:[,[,,"[18]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"112",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"KW",,,,,,,,,,,,,,,,,,[,,"112",,,,"112",,,[3]],,[,,"1[0-7]\\d|89887",,,,"100"],[,,,,,,,,,[-1]],[,,"898\\d\\d",,,,"89800",,,[5]],,[,,,,,,,,,[-1]]],KY:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"KY",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],KZ:[,[,,"[134]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:0[1-3]|12)",,,,"101",,,[3]],[,,,,,,,,,[-1]],,,,"KZ",,,,,,,,,,,,,,,,,,[,,"1(?:0[1-3]|12)",,,,"101",,,[3]],,[,,"1(?:0[1-4]|12)|(?:3040|404)0",,,,"101"],[,,,,,,,,,[-1]],[,,"(?:304\\d|404)\\d",,,,"4040",,,[4,5]],,[,,"(?:304\\d|404)\\d",,,,"4040",,,[4,5]]],LA:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"19[015]",,,,"190"],[,,,,,,,,,[-1]],,,,"LA",,,,,,,,,,,,,,,,,,[,,"19[015]",,,,"190"],,[,,"19[015]",,,,"190"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LB:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"1(?:12|40|75)|999",,,,"112"],[,,,,,,,,,[-1]],,,,"LB",,,,,,,,,,,,,,,,,,[,,"1(?:12|40|75)|999",,,,"112"],,[,,"1(?:12|40|75)|999",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LC:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"LC",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LI:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[278]|44)",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"LI",,,,,,,,,,,,,,,,,,[,,"1(?:1[278]|44)",,,,"112",,,[3]],,[,,"1(?:1(?:[278]|45)|4[3-57]|50|75|81[18])",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LK:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"11[02689]",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"LK",,,,,,,,,,,,,,,,,,[,,"11[02689]",,,,"110",,,[3]],,[,,"1(?:1[024-9]|3(?:00|1[2-49]|2[23]|3[1-3]|44|5[07]|[67]9|88|9[039])|9(?:0[0-2589]|1[0-357-9]|2[0-25689]|3[0389]|4[0489]|5[014-69]|6[0-2689]|7[03579]|8[02457-9]|9[0-2569]))",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LR:[,[,,"[3489]\\d{2,3}",,,,,,,[3,4]],,,[,,"355|911",,,,"355",,,[3]],[,,,,,,,,,[-1]],,,,"LR",,,,,,,,,,,,,,,,,,[,,"355|911",,,,"355",,,[3]],,[,,"355|4040|8(?:400|933)|911",,,,"355"],[,,,,,,,,,[-1]],[,,"(?:404|8(?:40|93))\\d",,,,"4040",,,[4]],,[,,"(?:404|8(?:40|93))\\d",,,,"4040",,,[4]]],LS:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[257]",,,,"112"],[,,,,,,,,,[-1]],,,,"LS",,,,,,,,,,,,,,,,,,[,,"11[257]",,,,"112"],,[,,"11[257]",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LT:[,[,,"[01]\\d(?:\\d(?:\\d{3})?)?",,,,,,,[2,3,6]],,,[,,"0(?:11?|22?|33?)|1(?:0[1-3]|1(?:2|6111))|116(?:0\\d|12)\\d",,,,"01"],[,,,,,,,,,[-1]],,,,"LT",,,,,,,,,,,,,,,,,,[,,"0(?:11?|22?|33?)|1(?:0[1-3]|12)",,,,"01",,,[2,3]],,[,,"0(?:11?|22?|33?)|1(?:0[1-3]|1(?:[27-9]|6(?:000|1(?:1[17]|23))))",,,,"01"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LU:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:[23]|6\\d{3})",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"LU",,,,,,,,,,,,,,,,,,[,,"11[23]",,,,"112",,,[3]],,[,,"11(?:[23]|6(?:000|111))|1(?:18|[25]\\d|3)\\d\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],LV:[,[,,"[018]\\d{1,5}",,,,,,,[2,3,4,5,6]],,,[,,"0[1-3]|11(?:[023]|6\\d{3})",,,,"01",,,[2,3,6]],[,,"1180|821\\d\\d",,,,"1180",,,[4,5]],,,,"LV",,,,,,,,,,,,,,,,,,[,,"0[1-3]|11[023]",,,,"01",,,[2,3]],,[,,"0[1-4]|1(?:1(?:[02-4]|6(?:000|111)|8[0189])|(?:5|65)5|77)|821[57]4",,,,"01"],[,,"1181",,,,"1181",,,[4]],[,,"165\\d",,,,"1650",,,[4]],,[,,,,,,,,,[-1]]],LY:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"19[013]",,,,"190"],[,,,,,,,,,[-1]],,,,"LY",,,,,,,,,,,,,,,,,,[,,"19[013]",,,,"190"],,[,,"19[013]",,,,"190"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MA:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:[59]|77)",,,,"15"],[,,,,,,,,,[-1]],,,,"MA",,,,,,,,,,,,,,,,,,[,,"1(?:[59]|77)",,,,"15"],,[,,"1(?:[59]|77)",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MC:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:12|[578])",,,,"15"],[,,,,,,,,,[-1]],,,,"MC",,,,,,,,,,,,,,,,,,[,,"1(?:12|[578])",,,,"15"],,[,,"1(?:12|41|[578])",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MD:[,[,,"[19]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:2|6(?:000|1(?:11|2\\d)))|90[1-3]",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"MD",,,,,,,,,,,,,,,,,,[,,"112|90[1-3]",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:00[06]|1(?:1[17]|23))|8\\d\\d?|99)|90[04-9])|90[1-3]|1(?:4\\d\\d|6[0-389]|9[1-4])\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ME:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:12|2[2-4])",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"ME",,,,,,,,,,,,,,,,,,[,,"1(?:12|2[2-4])",,,,"112",,,[3]],,[,,"1(?:1(?:(?:[013-57-9]|6\\d\\d)\\d|2)|[249]\\d{3}|5999|8(?:0[089]|1[0-8]|888))|1(?:[02-5]\\d\\d|60[06]|700)|12\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MF:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],,,,"MF",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15"],,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MG:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:1[78]|[78])",,,,"17"],[,,,,,,,,,[-1]],,,,"MG",,,,,,,,,,,,,,,,,,[,,"1(?:1[78]|[78])",,,,"17"],,[,,"1(?:1[78]|[78])",,,,"17"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MH:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"911",,,,"911"],[,,,,,,,,,[-1]],,,,"MH",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"911",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MK:[,[,,"1\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"1(?:1(?:2|6\\d{3})|9[2-4])",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"MK",,,,,,,,,,,,,,,,,,[,,"1(?:12|9[2-4])",,,,"112",,,[3]],,[,,"1(?:1(?:2|8\\d)|3\\d|9[2-4])|1(?:16|2\\d)\\d{3}",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ML:[,[,,"[136-8]\\d{1,4}",,,,,,,[2,3,4,5]],,,[,,"1[578]|(?:352|67)00|7402|(?:677|744|8000)\\d",,,,"15",,,[2,4,5]],[,,"(?:12|800)2\\d|3(?:52(?:11|2[02]|3[04-6]|99)|7574)",,,,"1220",,,[4,5]],,,,"ML",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15",,,[2]],,[,,"1(?:1(?:[013-9]\\d|2)|2(?:1[02-469]|2[13])|[578])|350(?:35|57)|67(?:0[09]|[59]9|77|8[89])|74(?:0[02]|44|55)|800[0-2][12]|3(?:52|[67]\\d)\\d\\d",,,,"15"],[,,"37(?:433|575)|7400|8001\\d",,,,"7400",,,[4,5]],[,,"3503\\d|(?:3[67]\\d|800)\\d\\d",,,,"35030",,,[5]],,[,,"374(?:0[24-9]|[1-9]\\d)|7400|3(?:6\\d|75)\\d\\d",,,,"7400",,,[4,5]]],MM:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"199",,,,"199"],[,,,,,,,,,[-1]],,,,"MM",,,,,,,,,,,,,,,,,,[,,"199",,,,"199"],,[,,"199",,,,"199"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MN:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"10[0-35]",,,,"100"],[,,,,,,,,,[-1]],,,,"MN",,,,,,,,,,,,,,,,,,[,,"10[0-35]",,,,"100"],,[,,"10[0-35]",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MO:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"MO",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"999",,,,"999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MP:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"MP",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MQ:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:12|[578])",,,,"15"],[,,,,,,,,,[-1]],,,,"MQ",,,,,,,,,,,,,,,,,,[,,"1(?:12|[578])",,,,"15"],,[,,"1(?:12|[578])",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MR:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],,,,"MR",,,,,,,,,,,,,,,,,,[,,"1[78]",,,,"17"],,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MS:[,[,,"[29]\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"MS",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"211|9(?:11|88|99)",,,,"211"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MT:[,[,,"1\\d\\d(?:\\d{3})?",,,,,,,[3,6]],,,[,,"11(?:2|6\\d{3})",,,,"112"],[,,,,,,,,,[-1]],,,,"MT",,,,,,,,,,,,,,,,,,[,,"112",,,,"112",,,[3]],,[,,"11(?:2|6(?:000|1(?:11|23)))",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MU:[,[,,"[189]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"11[45]|99[59]",,,,"114",,,[3]],[,,,,,,,,,[-1]],,,,"MU",,,,,,,,,,,,,,,,,,[,,"11[45]|99[59]",,,,"114",,,[3]],,[,,"1\\d{2,4}|(?:8\\d\\d|99)\\d",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],MV:[,[,,"[14]\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:02|1[89])",,,,"102",,,[3]],[,,,,,,,,,[-1]],,,,"MV",,,,,,,,,,,,,,,,,,[,,"1(?:02|1[89])",,,,"102",,,[3]],,[,,"1(?:[0-37-9]|[4-6]\\d)\\d|4040|1[45]1",,,,"100"],[,,,,,,,,,[-1]],[,,"1[45]1",,,,"141",,,[3]],,[,,,,,,,,,[-1]]],MW:[,[,,"[189]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"199|99[7-9]",,,,"199",,,[3]],[,,,,,,,,,[-1]],,,,"MW",,,,,,,,,,,,,,,,,,[,,"199|99[7-9]",,,,"199",,,[3]],,[,,"199|80400|99[7-9]",,,,"199"],[,,,,,,,,,[-1]],[,,"804\\d\\d",,,,"80400",,,[5]],,[,,"804\\d\\d",,,,"80400",,,[5]]],MX:[,[,,"[0579]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"0(?:6[0568]|80)|911",,,,"060",,,[3]],[,,"(?:530\\d|776)\\d",,,,"7760",,,[4,5]],,,,"MX",,,,,,,,,,,,,,,,,,[,,"0(?:6[0568]|80)|911",,,,"060",,,[3]],,[,,"0[1-9]\\d|53053|7766|911",,,,"010"],[,,,,,,,,,[-1]],[,,"0(?:[249]0|[35][01])",,,,"020",,,[3]],,[,,,,,,,,,[-1]]],MY:[,[,,"[1369]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"112|999",,,,"112",,,[3]],[,,,,,,,,,[-1]],,,,"MY",,,,,,,,,,,,,,,,,,[,,"112|999",,,,"112",,,[3]],,[,,"1(?:0[01348]|1(?:[02]|1[128]|311)|2(?:0[125]|[13-6]|2\\d{0,2})|(?:3[1-35-79]|7[45])\\d\\d?|5(?:454|5\\d\\d?|77|888|999?)|8(?:18?|2|8[18])|9(?:[124]\\d?|68|71|9[0679]))|66628|99[1-469]|13[5-7]|(?:1(?:0[569]|309|5[12]|7[136-9]|9[03])|3[23679]\\d\\d)\\d",,,,"100"],[,,"666\\d\\d",,,,"66600",,,[5]],[,,,,,,,,,[-1]],,[,,"(?:3[23679]\\d|666)\\d\\d",,,,"32000",,,[5]]],MZ:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[79]|9[78])",,,,"117",,,[3]],[,,,,,,,,,[-1]],,,,"MZ",,,,,,,,,,,,,,,,,,[,,"1(?:1[79]|9[78])",,,,"117",,,[3]],,[,,"1(?:[02-5]\\d\\d|1[79]|9[78])",,,,"117"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NA:[,[,,"[19]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"10111",,,,"10111",,,[5]],[,,,,,,,,,[-1]],,,,"NA",,,,,,,,,,,,,,,,,,[,,"10111",,,,"10111",,,[5]],,[,,"(?:10|93)111|(?:1\\d|9)\\d\\d",,,,"900"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NC:[,[,,"[135]\\d{1,3}",,,,,,,[2,3,4]],,,[,,"1(?:0(?:00|1[23]|3[0-2]|8\\d)|[5-8])|363\\d|577",,,,"15"],[,,,,,,,,,[-1]],,,,"NC",,,,,,,,,,,,,,,,,,[,,"1[5-8]",,,,"15",,,[2]],,[,,"1(?:0(?:0[06]|1[02-46]|20|3[0-25]|42|5[058]|77|88)|[5-8])|3631|5[6-8]\\d",,,,"15"],[,,"5(?:67|88)",,,,"567",,,[3]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NE:[,[,,"[1-3578]\\d(?:\\d(?:\\d{3})?)?",,,,,,,[2,3,6]],,,[,,"1(?:18|[578])|723\\d{3}",,,,"15"],[,,,,,,,,,[-1]],,,,"NE",,,,,,,,,,,,,,,,,,[,,"1(?:18|[578])|723141",,,,"15"],,[,,"1(?:0[01]|1[128]|2[034]|3[013]|[46]0|55?|[78])|222|333|555|723141|888",,,,"15"],[,,,,,,,,,[-1]],[,,"1(?:0[01]|1[12]|2[034]|3[013]|[46]0|55)|222|333|555|888",,,,"100",,,[3]],,[,,,,,,,,,[-1]]],NF:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|55|77)",,,,"911"],[,,,,,,,,,[-1]],,,,"NF",,,,,,,,,,,,,,,,,,[,,"9(?:11|55|77)",,,,"911"],,[,,"9(?:11|55|77)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NG:[,[,,"[14]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"199",,,,"199",,,[3]],[,,,,,,,,,[-1]],,,,"NG",,,,,,,,,,,,,,,,,,[,,"199",,,,"199",,,[3]],,[,,"199|40700",,,,"199"],[,,,,,,,,,[-1]],[,,"407\\d\\d",,,,"40700",,,[5]],,[,,"407\\d\\d",,,,"40700",,,[5]]],NI:[,[,,"[12467]\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[58]|2[08])|737\\d",,,,"115"],[,,,,,,,,,[-1]],,,,"NI",,,,,,,,,,,,,,,,,,[,,"1(?:1[58]|2[08])",,,,"115",,,[3]],,[,,"1(?:1[58]|200)|4878|7(?:010|373)|12[0158]|(?:19|[267]1)00",,,,"115"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NL:[,[,,"[1349]\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"11(?:2|6\\d{3})|911",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"NL",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:00[06]|1(?:11|23)))|2(?:0[0-4]|3[34]|44)|3[03-9]\\d|400|8(?:[02-9]\\d|1[0-79]))|[34]000|911",,,,"112"],[,,,,,,,,,[-1]],[,,"120\\d",,,,"1200",,,[4]],,[,,"[34]00\\d",,,,"3000",,,[4]]],NO:[,[,,"1\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"11(?:[023]|6\\d{3})",,,,"110",,,[3,6]],[,,,,,,,,,[-1]],,,,"NO",,,,,,,,,,,,,,,,,,[,,"11[023]",,,,"110",,,[3]],,[,,"1(?:1(?:[0239]|61(?:1[17]|23))|2[048]|4(?:12|[59])|7[57]|8[5-9]\\d|90)",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NP:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:0[0-36]|12)|1(?:09|11)\\d",,,,"100"],[,,,,,,,,,[-1]],,,,"NP",,,,,,,,,,,,,,,,,,[,,"1(?:0[0-3]|12)",,,,"100",,,[3]],,[,,"1(?:0(?:[0-36]|98)|1(?:1[1-4]|2))",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NR:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[0-2]",,,,"110"],[,,,,,,,,,[-1]],,,,"NR",,,,,,,,,,,,,,,,,,[,,"11[0-2]",,,,"110"],,[,,"1(?:1[0-2]|23|92)",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],NU:[,[,,"[019]\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"NU",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"01[05]|101|999",,,,"010"],[,,,,,,,,,[-1]],[,,"010",,,,"010"],,[,,,,,,,,,[-1]]],NZ:[,[,,"\\d{3,4}",,,,,,,[3,4]],,,[,,"111",,,,"111",,,[3]],[,,"018",,,,"018",,,[3]],,,,"NZ",,,,,,,,,,,,,,,,,,[,,"111",,,,"111",,,[3]],,[,,"018|1(?:(?:1|37)1|(?:23|94)4|7[03]7)|[2-57-9]\\d{2,3}|6(?:161|26[0-3]|742)",,,,"018"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"018|(?:1(?:23|37|7[03]|94)|6(?:[12]6|74))\\d|[2-57-9]\\d{2,3}",,,,"018"]],OM:[,[,,"[19]\\d{3}",,,,,,,[4]],,,[,,"1444|999\\d",,,,"1444"],[,,,,,,,,,[-1]],,,,"OM",,,,,,,,,,,,,,,,,,[,,"1444|9999",,,,"1444"],,[,,"1(?:111|222|4(?:4[0-5]|50|66|7[7-9])|51[0-8])|9999|1(?:2[3-5]|3[0-2]|50)\\d",,,,"1111"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PA:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"911",,,,"911"],[,,,,,,,,,[-1]],,,,"PA",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"10[2-4]|911",,,,"102"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PE:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"1(?:05|1[67])",,,,"105"],[,,,,,,,,,[-1]],,,,"PE",,,,,,,,,,,,,,,,,,[,,"1(?:05|1[67])",,,,"105"],,[,,"1(?:05|1[67])",,,,"105"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PF:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],,,,"PF",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15"],,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PG:[,[,,"[01]\\d{2,6}",,,,,,,[3,4,5,6,7]],,,[,,"000|11[01]",,,,"000",,,[3]],[,,,,,,,,,[-1]],,,,"PG",,,,,,,,,,,,,,,,,,[,,"000|11[01]",,,,"000",,,[3]],,[,,"000|1(?:1[01]|5\\d\\d|6\\d{2,5})",,,,"000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"16\\d{2,5}",,,,"1600",,,[4,5,6,7]]],PH:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"11[27]|911",,,,"112"],[,,,,,,,,,[-1]],,,,"PH",,,,,,,,,,,,,,,,,,[,,"11[27]|911",,,,"112"],,[,,"11[27]|911",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PK:[,[,,"1\\d{1,3}",,,,,,,[2,3,4]],,,[,,"1(?:1(?:2\\d?|5)|[56])",,,,"15"],[,,,,,,,,,[-1]],,,,"PK",,,,,,,,,,,,,,,,,,[,,"1(?:1(?:22?|5)|[56])",,,,"15"],,[,,"1(?:122|3[014]|[56])|11[2457-9]",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PL:[,[,,"[19]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"11(?:2|6\\d{3})|99[7-9]",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"PL",,,,,,,,,,,,,,,,,,[,,"112|99[7-9]",,,,"112",,,[3]],,[,,"1(?:1(?:2|61(?:11|23)|891[23])|9\\d{3})|9(?:8[4-7]|9[1-9])|11[68]000",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PM:[,[,,"[13]\\d(?:\\d{2})?",,,,,,,[2,4]],,,[,,"1[578]",,,,"15",,,[2]],[,,,,,,,,,[-1]],,,,"PM",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15",,,[2]],,[,,"1[578]|3103",,,,"15"],[,,,,,,,,,[-1]],[,,"310\\d",,,,"3100",,,[4]],,[,,,,,,,,,[-1]]],PR:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"PR",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PS:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:0[0-2]|66)",,,,"100",,,[3]],[,,,,,,,,,[-1]],,,,"PS",,,,,,,,,,,,,,,,,,[,,"10[0-2]",,,,"100",,,[3]],,[,,"1(?:0[0-2]|122|44|66|99)",,,,"100"],[,,,,,,,,,[-1]],[,,"112\\d",,,,"1120",,,[4]],,[,,,,,,,,,[-1]]],PT:[,[,,"1\\d\\d(?:\\d(?:\\d{2})?)?",,,,,,,[3,4,6]],,,[,,"11[257]|1(?:16\\d\\d|5[1589]|8[279])\\d",,,,"112"],[,,,,,,,,,[-1]],,,,"PT",,,,,,,,,,,,,,,,,,[,,"11[25]",,,,"112",,,[3]],,[,,"1(?:0(?:45|5[01])|1(?:[2578]|600[06])|4(?:1[45]|4)|583|6(?:1[0236]|3[02]|9[169]))|1(?:1611|59)1|1[068]78|1[08]9[16]|1(?:0[1-38]|40|5[15]|6[258]|82)0",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PW:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"911",,,,"911"],[,,,,,,,,,[-1]],,,,"PW",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"911",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],PY:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"128|911",,,,"128"],[,,,,,,,,,[-1]],,,,"PY",,,,,,,,,,,,,,,,,,[,,"128|911",,,,"128"],,[,,"1[1-9]\\d|911",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],QA:[,[,,"[129]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"99\\d",,,,"990",,,[3]],[,,"900",,,,"900",,,[3]],,,,"QA",,,,,,,,,,,,,,,,,,[,,"999",,,,"999",,,[3]],,[,,"9(?:00|[19]\\d)|(?:1|20|9[27]\\d)\\d\\d",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],RE:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:12|[578])",,,,"15"],[,,,,,,,,,[-1]],,,,"RE",,,,,,,,,,,,,,,,,,[,,"1(?:12|[578])",,,,"15"],,[,,"1(?:12|[578])",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],RO:[,[,,"[18]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:2|6\\d{3})",,,,"112",,,[3,6]],[,,"(?:1(?:18[39]|[24])|8[48])\\d\\d",,,,"1200",,,[4,6]],,,,"RO",,,,,,,,,,,,,,,,,,[,,"112",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:000|1(?:11|23))|8(?:(?:01|8[18])1|119|[23]00|932))|[24]\\d\\d|9(?:0(?:00|19)|1[19]|21|3[02]|5[178]))|8[48]\\d\\d",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"(?:1[24]|8[48])\\d\\d",,,,"1200",,,[4]]],RS:[,[,,"[19]\\d{1,5}",,,,,,,[2,3,4,5,6]],,,[,,"112|9[2-4]",,,,"92",,,[2,3]],[,,,,,,,,,[-1]],,,,"RS",,,,,,,,,,,,,,,,,,[,,"112|9[2-4]",,,,"92",,,[2,3]],,[,,"1[189]\\d{1,4}|9[2-4]",,,,"92"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],RU:[,[,,"[01]\\d\\d?",,,,,,,[2,3]],,,[,,"112|(?:0|10)[1-3]",,,,"01"],[,,,,,,,,,[-1]],,,,"RU",,,,,,,,,,,,,,,,,,[,,"112|(?:0|10)[1-3]",,,,"01"],,[,,"112|(?:0|10)[1-4]",,,,"01"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],RW:[,[,,"[14]\\d\\d",,,,,,,[3]],,,[,,"11[1245]",,,,"111"],[,,,,,,,,,[-1]],,,,"RW",,,,,,,,,,,,,,,,,,[,,"11[12]",,,,"111"],,[,,"1(?:0[0-2]|1[0-24-6]|2[13]|70|99)|456",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SA:[,[,,"[19]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:2|6\\d{3})|9(?:11|37|9[7-9])",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"SA",,,,,,,,,,,,,,,,,,[,,"112|9(?:11|9[79])",,,,"112",,,[3]],,[,,"1(?:1(?:00|2|6111)|410|9(?:00|1[89]|9(?:099|22|9[0-3])))|9(?:0[24-79]|11|3[379]|40|66|8[5-9]|9[02-9])",,,,"112"],[,,"141\\d",,,,"1410",,,[4]],[,,"1(?:10|41)\\d|90[24679]",,,,"902",,,[3,4]],,[,,,,,,,,,[-1]]],SB:[,[,,"[127-9]\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"SB",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"1(?:[02]\\d|1[12]|[35][01]|[49][1-9]|6[2-9]|7[7-9]|8[0-8])|269|777|835|9(?:[01]1|22|33|55|77|88|99)",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SC:[,[,,"[19]\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[1468]|60)|999",,,,"111",,,[3]],[,,,,,,,,,[-1]],,,,"SC",,,,,,,,,,,,,,,,,,[,,"999",,,,"999",,,[3]],,[,,"1(?:[06]\\d|1[0-246-8]|2[0-8]|3[13]|4[0-2]|5[15]|7[124-6]|8[158]|9[015])|9(?:6\\d\\d|99)",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SD:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"SD",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"999",,,,"999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SE:[,[,,"[1-37-9]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:2|(?:3|6\\d)\\d\\d|414|77)|900\\d\\d",,,,"112"],[,,"11811[89]|72\\d{3}",,,,"72000",,,[5,6]],,,,"SE",,,,,,,,,,,,,,,,,,[,,"112|90000",,,,"112",,,[3,5]],,[,,"11(?:[25]|313|6(?:00[06]|1(?:1[17]|23))|7[0-8])|2(?:2[02358]|33|4[01]|50|6[1-4])|32[13]|8(?:22|88)|9(?:0(?:00|51)0|12)|(?:11(?:4|8[02-46-9])|7\\d\\d|90[2-4])\\d\\d|(?:118|90)1(?:[02-9]\\d|1[013-9])",,,,"112"],[,,,,,,,,,[-1]],[,,"2(?:2[02358]|33|4[01]|50|6[1-4])|32[13]|8(?:22|88)|912",,,,"220",,,[3]],,[,,"7\\d{4}",,,,"70000",,,[5]]],SG:[,[,,"[179]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"99[359]",,,,"993",,,[3]],[,,,,,,,,,[-1]],,,,"SG",,,,,,,,,,,,,,,,,,[,,"99[359]",,,,"993",,,[3]],,[,,"1(?:(?:[01368]\\d|44)\\d|[57]\\d{2,3}|9(?:0[1-9]|[1-9]\\d))|77222|99[02-9]|100",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,"772\\d\\d",,,,"77200",,,[5]]],SH:[,[,,"[129]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"9(?:11|99)",,,,"911",,,[3]],[,,,,,,,,,[-1]],,,,"SH",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911",,,[3]],,[,,"1\\d{2,3}|26[01]\\d\\d|9(?:11|99)",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SI:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"11(?:(?:0|6\\d)\\d\\d|[23]|8\\d\\d?)",,,,"112"],[,,,,,,,,,[-1]],,,,"SI",,,,,,,,,,,,,,,,,,[,,"11[23]",,,,"112",,,[3]],,[,,"1(?:1(?:00[146]|[23]|6(?:000|1(?:11|23))|8(?:[08]|99))|9(?:059|1(?:0[12]|16)|5|70|87|9(?:00|[149])))|19(?:08|81)[09]",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SJ:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[023]",,,,"110"],[,,,,,,,,,[-1]],,,,"SJ",,,,,,,,,,,,,,,,,,[,,"11[023]",,,,"110"],,[,,"11[023]",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SK:[,[,,"1\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:1(?:2|6\\d{3})|5[058])",,,,"112",,,[3,6]],[,,,,,,,,,[-1]],,,,"SK",,,,,,,,,,,,,,,,,,[,,"1(?:12|5[058])",,,,"112",,,[3]],,[,,"1(?:1(?:2|6(?:000|111)|8[0-8])|[248]\\d{3}|5[0589])",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SL:[,[,,"[069]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"(?:01|99)9",,,,"019",,,[3]],[,,,,,,,,,[-1]],,,,"SL",,,,,,,,,,,,,,,,,,[,,"(?:01|99)9",,,,"019",,,[3]],,[,,"(?:01|99)9|60400",,,,"019"],[,,,,,,,,,[-1]],[,,"604\\d\\d",,,,"60400",,,[5]],,[,,"604\\d\\d",,,,"60400",,,[5]]],SM:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[358]",,,,"113"],[,,,,,,,,,[-1]],,,,"SM",,,,,,,,,,,,,,,,,,[,,"11[358]",,,,"113"],,[,,"11[358]",,,,"113"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SN:[,[,,"[12]\\d{1,5}",,,,,,,[2,3,4,5,6]],,,[,,"1(?:515|[78])|2(?:00|1)\\d{3}",,,,"17",,,[2,4,5,6]],[,,"2(?:0[246]|[468])\\d{3}",,,,"24000",,,[5,6]],,,,"SN",,,,,,,,,,,,,,,,,,[,,"1[78]",,,,"17",,,[2]],,[,,"1(?:1[69]|(?:[246]\\d|51)\\d)|2(?:0[0-246]|[12468])\\d{3}|1[278]",,,,"12"],[,,"2(?:01|2)\\d{3}",,,,"22000",,,[5,6]],[,,"1[46]\\d\\d",,,,"1400",,,[4]],,[,,"2[468]\\d{3}",,,,"24000",,,[5]]],SO:[,[,,"[57-9]\\d\\d",,,,,,,[3]],,,[,,"555|888|999",,,,"555"],[,,,,,,,,,[-1]],,,,"SO",,,,,,,,,,,,,,,,,,[,,"555|888|999",,,,"555"],,[,,"555|777|888|999",,,,"555"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SR:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"115",,,,"115",,,[3]],[,,,,,,,,,[-1]],,,,"SR",,,,,,,,,,,,,,,,,,[,,"115",,,,"115",,,[3]],,[,,"1\\d{2,3}",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SS:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"SS",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"999",,,,"999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ST:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"112",,,,"112"],[,,,,,,,,,[-1]],,,,"ST",,,,,,,,,,,,,,,,,,[,,"112",,,,"112"],,[,,"112",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SV:[,[,,"[149]\\d\\d(?:\\d{2,3})?",,,,,,,[3,5,6]],,,[,,"116\\d{3}|911",,,,"911",,,[3,6]],[,,,,,,,,,[-1]],,,,"SV",,,,,,,,,,,,,,,,,,[,,"91[13]",,,,"911",,,[3]],,[,,"1(?:1(?:2|6111)|2[136-8]|3[0-6]|9[05])|40404|9(?:1\\d|29)",,,,"112"],[,,,,,,,,,[-1]],[,,"404\\d\\d",,,,"40400",,,[5]],,[,,"404\\d\\d",,,,"40400",,,[5]]],SX:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:19|88)",,,,"919"],[,,,,,,,,,[-1]],,,,"SX",,,,,,,,,,,,,,,,,,[,,"919",,,,"919"],,[,,"9(?:19|88)",,,,"919"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SY:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[023]",,,,"110"],[,,,,,,,,,[-1]],,,,"SY",,,,,,,,,,,,,,,,,,[,,"11[023]",,,,"110"],,[,,"11[023]",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],SZ:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"SZ",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"999",,,,"999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TC:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"TC",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TD:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],,,,"TD",,,,,,,,,,,,,,,,,,[,,"1[78]",,,,"17"],,[,,"1[78]",,,,"17"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TG:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1[78]|7[127])",,,,"117",,,[3]],[,,,,,,,,,[-1]],,,,"TG",,,,,,,,,,,,,,,,,,[,,"1(?:1[78]|7[127])",,,,"117",,,[3]],,[,,"1(?:011|1[078]|7[127])",,,,"110"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TH:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"1(?:1(?:00|2[03]|3[3479]|7[67]|9[0246])|578|6(?:44|6[79]|88|9[16])|88\\d|9[19])|1[15]55",,,,"191"],[,,"1(?:113|2[23]\\d|5(?:09|56))",,,,"1113",,,[4]],,,,"TH",,,,,,,,,,,,,,,,,,[,,"1(?:669|9[19])",,,,"191"],,[,,"1(?:0[0-2]|1(?:0[03]|1[1-35]|2[0358]|3[03-79]|4[02-489]|5[04-9]|6[04-79]|7[03-9]|8[027-9]|9[02-9])|2(?:22|3[89]|66)|3(?:18|2[23]|3[013]|5[56]|6[45]|73)|477|5(?:0\\d|4[0-37-9]|5[1-8]|6[01679]|7[12568]|8[0-24589]|9[013589])|6(?:0[0-29]|2[03]|4[3-6]|6[1-9]|7[0257-9]|8[0158]|9[014-9])|7(?:[14]9|7[27]|90)|888|9[19])",,,,"100"],[,,"1(?:1(?:03|1[15]|2[58]|3[056]|4[02-49]|5[046-9]|7[03-589]|9[57-9])|5(?:0[0-8]|4[0-378]|5[1-478]|7[156])|6(?:20|4[356]|6[1-68]|7[057-9]|8[015]|9[0457-9]))|1(?:1[68]|26|3[1-35]|5[689]|60|7[17])\\d",,,,"1103",,,[4]],[,,"114[89]",,,,"1148",,,[4]],,[,,,,,,,,,[-1]]],TJ:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"1(?:0[1-3]|12)",,,,"101"],[,,,,,,,,,[-1]],,,,"TJ",,,,,,,,,,,,,,,,,,[,,"1(?:0[1-3]|12)",,,,"101"],,[,,"1(?:0[1-3]|12)",,,,"101"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TL:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[25]",,,,"112"],[,,,,,,,,,[-1]],,,,"TL",,,,,,,,,,,,,,,,,,[,,"11[25]",,,,"112"],,[,,"1(?:0[02]|1[25]|2[0138]|72|9[07])",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TM:[,[,,"0\\d",,,,,,,[2]],,,[,,"0[1-49]",,,,"01"],[,,,,,,,,,[-1]],,,,"TM",,,,,,,,,,,,,,,,,,[,,"0[1-3]",,,,"01"],,[,,"0[1-49]",,,,"01"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TN:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"19[078]",,,,"190"],[,,,,,,,,,[-1]],,,,"TN",,,,,,,,,,,,,,,,,,[,,"19[078]",,,,"190"],,[,,"19[078]",,,,"190"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TO:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|22|33|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"TO",,,,,,,,,,,,,,,,,,[,,"9(?:11|22|33|99)",,,,"911"],,[,,"9(?:11|22|33|99)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TR:[,[,,"[1-9]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:1[02]|22|3[126]|4[04]|5[15-9]|6[18]|77|83)",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"TR",,,,,,,,,,,,,,,,,,[,,"1(?:1[02]|55)",,,,"110",,,[3]],,[,,"1(?:1(?:[02-79]|8(?:1[018]|2[0245]|3[2-4]|42|5[058]|6[06]|7[07]|8[01389]|9[089]))|3(?:37|[58]6|65)|471|5(?:07|78)|6(?:[02]6|99)|8(?:63|95))|2(?:077|268|4(?:17|23)|5(?:7[26]|82)|6[14]4|8\\d\\d|9(?:30|89))|3(?:0(?:05|72)|353|4(?:06|30|64)|502|674|747|851|9(?:1[29]|60))|4(?:0(?:25|3[12]|[47]2)|3(?:3[13]|[89]1)|439|5(?:43|55)|717|832)|5(?:145|290|[4-6]\\d\\d|772|833|9(?:[06]1|92))|6(?:236|6(?:12|39|8[59])|769)|7890|8(?:688|7(?:28|65)|85[06])|9(?:159|290)|1[2-9]\\d",,,,"110"],[,,"(?:285|542)0",,,,"2850",,,[4]],[,,,,,,,,,[-1]],,[,,"1(?:3(?:37|[58]6|65)|4(?:4|71)|5(?:07|78)|6(?:[02]6|99)|8(?:3|63|95))|(?:2(?:07|26|4[12]|5[78]|6[14]|8\\d|9[38])|3(?:0[07]|[38]5|4[036]|50|67|74|9[16])|4(?:0[2-47]|3[389]|[48]3|5[45]|71)|5(?:14|29|[4-6]\\d|77|83|9[069])|6(?:23|6[138]|76)|789|8(?:68|7[26]|85)|9(?:15|29))\\d",,,,"144",,,[3,4]]],TT:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:88|9[09])",,,,"988"],[,,,,,,,,,[-1]],,,,"TT",,,,,,,,,,,,,,,,,,[,,"99[09]",,,,"990"],,[,,"9(?:88|9[09])",,,,"988"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TV:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"911",,,,"911"],[,,,,,,,,,[-1]],,,,"TV",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"1\\d\\d|911",,,,"100"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TW:[,[,,"1\\d{2,3}",,,,,,,[3,4]],,,[,,"11[0289]|1(?:81|92)\\d",,,,"110"],[,,"10[56]",,,,"105",,,[3]],,,,"TW",,,,,,,,,,,,,,,,,,[,,"11[029]",,,,"110",,,[3]],,[,,"1(?:0[04-6]|1[0237-9]|3[389]|6[05-8]|7[07]|8(?:0|11)|9(?:19|22|5[057]|68|8[05]|9[15689]))",,,,"100"],[,,"1(?:65|9(?:1\\d|50|85|98))",,,,"165"],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],TZ:[,[,,"[149]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"1(?:1[0-79]|9[09])|999",,,,"110",,,[3]],[,,,,,,,,,[-1]],,,,"TZ",,,,,,,,,,,,,,,,,,[,,"11[0-245]|999",,,,"110",,,[3]],,[,,"1(?:1\\d|9[09])|46400|999",,,,"110"],[,,,,,,,,,[-1]],[,,"464\\d\\d",,,,"46400",,,[5]],,[,,"464\\d\\d",,,,"46400",,,[5]]],UA:[,[,,"[189]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"1(?:0[1-3]|1(?:2|6\\d{3}))",,,,"101",,,[3,6]],[,,,,,,,,,[-1]],,,,"UA",,,,,,,,,,,,,,,,,,[,,"1(?:0[1-3]|12)",,,,"101",,,[3]],,[,,"1(?:0[1-49]|1(?:2|6(?:000|1(?:11|23))|8\\d\\d?)|(?:[278]|5\\d)\\d)|[89]00\\d\\d?|151|1(?:06|4\\d|6)\\d\\d",,,,"101"],[,,,,,,,,,[-1]],[,,"(?:118|[89]00)\\d\\d?",,,,"1180",,,[4,5]],,[,,,,,,,,,[-1]]],UG:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"999",,,,"999"],[,,,,,,,,,[-1]],,,,"UG",,,,,,,,,,,,,,,,,,[,,"999",,,,"999"],,[,,"999",,,,"999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],US:[,[,,"[1-9]\\d{2,5}",,,,,,,[3,4,5,6]],,,[,,"112|611|9(?:11|33|88)",,,,"112",,,[3]],[,,"24280|(?:381|968)35|4(?:3355|7553|8221)|5(?:(?:489|934)2|5928)|72078|(?:323|960)40|(?:276|414)63|(?:2(?:520|744)|7390|9968)9|(?:693|732|976)88|(?:3(?:556|825)|5294|8623|9729)4|(?:3378|4136|7642|8961|9979)6|(?:4(?:6(?:15|32)|827)|(?:591|720)8|9529)7",,,,"24280",,,[5]],,,,"US",,,,,,,,,,,,,,,,,,[,,"112|911",,,,"112",,,[3]],,[,,"11(?:2|5[1-47]|[68]\\d|7[0-57]|98)|[2-9]\\d{3,5}|[2-8]11|9(?:11|33|88)",,,,"112"],[,,"2(?:3333|(?:4224|7562|900)2|56447|6688)|3(?:1010|2665|7404)|40404|560560|6(?:0060|22639|5246|7622)|7(?:0701|3822|4666)|8(?:(?:3825|7226)5|4816)|99099",,,,"23333",,,[5,6]],[,,"336\\d\\d|[2-9]\\d{3}|[2356]11",,,,"211",,,[3,4,5]],,[,,"[2-9]\\d{4,5}",,,,"20000",,,[5,6]]],UY:[,[,,"[19]\\d{2,3}",,,,,,,[3,4]],,,[,,"128|911",,,,"128",,,[3]],[,,,,,,,,,[-1]],,,,"UY",,,,,,,,,,,,,,,,,,[,,"128|911",,,,"128",,,[3]],,[,,"1(?:0[4-9]|1[2368]|2[0-3568]|787)|911",,,,"104"],[,,"178\\d",,,,"1780",,,[4]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],UZ:[,[,,"[04]\\d(?:\\d(?:\\d{2})?)?",,,,,,,[2,3,5]],,,[,,"0(?:0[1-3]|[1-3]|50)",,,,"01",,,[2,3]],[,,,,,,,,,[-1]],,,,"UZ",,,,,,,,,,,,,,,,,,[,,"0(?:0[1-3]|[1-3]|50)",,,,"01",,,[2,3]],,[,,"0(?:0[1-3]|[1-3]|50)|45400",,,,"01"],[,,,,,,,,,[-1]],[,,"454\\d\\d",,,,"45400",,,[5]],,[,,"454\\d\\d",,,,"45400",,,[5]]],VA:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[2358]",,,,"112"],[,,,,,,,,,[-1]],,,,"VA",,,,,,,,,,,,,,,,,,[,,"11[2358]",,,,"112"],,[,,"11[2358]",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],VC:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"VC",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],VE:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"1(?:12|71)|911",,,,"112"],[,,,,,,,,,[-1]],,,,"VE",,,,,,,,,,,,,,,,,,[,,"1(?:12|71)|911",,,,"112"],,[,,"1(?:12|71)|911",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],VG:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],,,,"VG",,,,,,,,,,,,,,,,,,[,,"9(?:11|99)",,,,"911"],,[,,"9(?:11|88|99)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],VI:[,[,,"9\\d\\d",,,,,,,[3]],,,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],,,,"VI",,,,,,,,,,,,,,,,,,[,,"911",,,,"911"],,[,,"9(?:11|88)",,,,"911"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],VN:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"11[3-5]",,,,"113"],[,,,,,,,,,[-1]],,,,"VN",,,,,,,,,,,,,,,,,,[,,"11[3-5]",,,,"113"],,[,,"11[3-5]",,,,"113"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],VU:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"112",,,,"112"],[,,,,,,,,,[-1]],,,,"VU",,,,,,,,,,,,,,,,,,[,,"112",,,,"112"],,[,,"112",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],WF:[,[,,"1\\d",,,,,,,[2]],,,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],,,,"WF",,,,,,,,,,,,,,,,,,[,,"1[578]",,,,"15"],,[,,"1[578]",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],WS:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"9(?:11|9[4-69])",,,,"911"],[,,,,,,,,,[-1]],,,,"WS",,,,,,,,,,,,,,,,,,[,,"9(?:11|9[4-69])",,,,"911"],,[,,"1(?:1[12]|2[0-6]|[39]0)|9(?:11|9[4-79])",,,,"111"],[,,,,,,,,,[-1]],[,,"12[0-6]",,,,"120"],,[,,,,,,,,,[-1]]],XK:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"1(?:12|9[2-4])",,,,"112"],[,,,,,,,,,[-1]],,,,"XK",,,,,,,,,,,,,,,,,,[,,"1(?:12|9[2-4])",,,,"112"],,[,,"1(?:12|9[2-4])",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],YE:[,[,,"1\\d\\d",,,,,,,[3]],,,[,,"19[1459]",,,,"191"],[,,,,,,,,,[-1]],,,,"YE",,,,,,,,,,,,,,,,,,[,,"19[1459]",,,,"191"],,[,,"19[1459]",,,,"191"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],YT:[,[,,"1\\d\\d?",,,,,,,[2,3]],,,[,,"1(?:12|5)",,,,"15"],[,,,,,,,,,[-1]],,,,"YT",,,,,,,,,,,,,,,,,,[,,"1(?:12|5)",,,,"15"],,[,,"1(?:12|5)",,,,"15"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ZA:[,[,,"[134]\\d{2,4}",,,,,,,[3,4,5]],,,[,,"1(?:01\\d\\d|12)",,,,"112",,,[3,5]],[,,"41(?:348|851)",,,,"41348",,,[5]],,,,"ZA",,,,,,,,,,,,,,,,,,[,,"1(?:01(?:11|77)|12)",,,,"112",,,[3,5]],,[,,"1(?:0(?:1(?:11|77)|20|7)|1[12]|77(?:3[237]|[45]7|6[279]|9[26]))|[34]\\d{4}",,,,"107"],[,,"3(?:078[23]|7(?:064|567)|8126)|4(?:394[16]|7751|8837)|4[23]699",,,,"30782",,,[5]],[,,"111",,,,"111",,,[3]],,[,,"[34]\\d{4}",,,,"30000",,,[5]]],ZM:[,[,,"[19]\\d\\d",,,,,,,[3]],,,[,,"112|99[139]",,,,"112"],[,,,,,,,,,[-1]],,,,"ZM",,,,,,,,,,,,,,,,,,[,,"112|99[139]",,,,"112"],,[,,"112|99[139]",,,,"112"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,[,,,,,,,,,[-1]]],ZW:[,[,,"[139]\\d\\d(?:\\d{2})?",,,,,,,[3,5]],,,[,,"112|9(?:5[023]|61|9[3-59])",,,,"112",,,[3]],[,,"3[013-57-9]\\d{3}",,,,"30000",,,[5]],,,,"ZW",,,,,,,,,,,,,,,,,,[,,"112|99[3-59]",,,,"112",,,[3]],,[,,"11[2469]|3[013-57-9]\\d{3}|9(?:5[023]|6[0-25]|9[3-59])",,,,"112"],[,,,,,,,,,[-1]],[,,"114|9(?:5[023]|6[0-25])",,,,"114",,,[3]],,[,,,,,,,,,[-1]]]},i18n.phonenumbers.ShortNumberInfo=function(){this.regionToMetadataMap={}},goog.addSingletonGetter(i18n.phonenumbers.ShortNumberInfo),i18n.phonenumbers.ShortNumberInfo.REGIONS_WHERE_EMERGENCY_NUMBERS_MUST_BE_EXACT_=["BR","CL","NI"],i18n.phonenumbers.ShortNumberInfo.ShortNumberCost={TOLL_FREE:0,STANDARD_RATE:1,PREMIUM_RATE:2,UNKNOWN_COST:3},i18n.phonenumbers.ShortNumberInfo.prototype.getRegionCodesForCountryCode_=function(o){return(o=i18n.phonenumbers.metadata.countryCodeToRegionCodeMap[o])?o:[]},i18n.phonenumbers.ShortNumberInfo.prototype.regionDialingFromMatchesNumber_=function(o,i){return o=this.getRegionCodesForCountryCode_(o.getCountryCodeOrDefault()),i!=null&&o.includes(i)},i18n.phonenumbers.ShortNumberInfo.prototype.isPossibleShortNumberForRegion=function(o,i){return!this.regionDialingFromMatchesNumber_(o,i)||(i=this.getMetadataForRegion_(i),!i)?!1:(o=this.getNationalSignificantNumber_(o).length,i.getGeneralDesc().possibleLengthArray().includes(o))},i18n.phonenumbers.ShortNumberInfo.prototype.isPossibleShortNumber=function(o){var i=this.getRegionCodesForCountryCode_(o.getCountryCodeOrDefault());o=this.getNationalSignificantNumber_(o).length;for(var et=0;et<i.length;et++){var nt=this.getMetadataForRegion_(i[et]);if(nt&&nt.getGeneralDesc().possibleLengthArray().includes(o))return!0}return!1},i18n.phonenumbers.ShortNumberInfo.prototype.isValidShortNumberForRegion=function(o,i){if(!this.regionDialingFromMatchesNumber_(o,i)||(i=this.getMetadataForRegion_(i),!i))return!1;o=this.getNationalSignificantNumber_(o);var et=i.getGeneralDesc();return this.matchesPossibleNumberAndNationalNumber_(o,et)?(i=i.getShortCode(),this.matchesPossibleNumberAndNationalNumber_(o,i)):!1},i18n.phonenumbers.ShortNumberInfo.prototype.isValidShortNumber=function(o){var i=this.getRegionCodesForCountryCode_(o.getCountryCodeOrDefault()),et=this.getRegionCodeForShortNumberFromRegionList_(o,i);return 1<i.length&&et!=null?!0:this.isValidShortNumberForRegion(o,et)},i18n.phonenumbers.ShortNumberInfo.prototype.getExpectedCostForRegion=function(o,i){var et=i18n.phonenumbers.ShortNumberInfo.ShortNumberCost;if(!this.regionDialingFromMatchesNumber_(o,i))return et.UNKNOWN_COST;var nt=this.getMetadataForRegion_(i);return nt?(o=this.getNationalSignificantNumber_(o),nt.getGeneralDesc().possibleLengthArray().includes(o.length)?this.matchesPossibleNumberAndNationalNumber_(o,nt.getPremiumRate())?et.PREMIUM_RATE:this.matchesPossibleNumberAndNationalNumber_(o,nt.getStandardRate())?et.STANDARD_RATE:this.matchesPossibleNumberAndNationalNumber_(o,nt.getTollFree())||this.isEmergencyNumber(o,i)?et.TOLL_FREE:et.UNKNOWN_COST:et.UNKNOWN_COST):et.UNKNOWN_COST},i18n.phonenumbers.ShortNumberInfo.prototype.getExpectedCost=function(o){var i=i18n.phonenumbers.ShortNumberInfo.ShortNumberCost,et=this.getRegionCodesForCountryCode_(o.getCountryCodeOrDefault());if(et.length===0)return i.UNKNOWN_COST;if(et.length===1)return this.getExpectedCostForRegion(o,et[0]);for(var nt=i.TOLL_FREE,ot=0;ot<et.length;ot++){var st=this.getExpectedCostForRegion(o,et[ot]);switch(st){case i.PREMIUM_RATE:return i.PREMIUM_RATE;case i.UNKNOWN_COST:nt=i.UNKNOWN_COST;break;case i.STANDARD_RATE:nt!==i.UNKNOWN_COST&&(nt=i.STANDARD_RATE);break;case i.TOLL_FREE:break;default:throw Error("Unrecognized cost for region: "+st)}}return nt},i18n.phonenumbers.ShortNumberInfo.prototype.getRegionCodeForShortNumberFromRegionList_=function(o,i){if(i.length===0)return null;if(i.length===1)return i[0];o=this.getNationalSignificantNumber_(o);for(var et=0;et<i.length;et++){var nt=i[et],ot=this.getMetadataForRegion_(nt);if(ot&&this.matchesPossibleNumberAndNationalNumber_(o,ot.getShortCode()))return nt}return null},i18n.phonenumbers.ShortNumberInfo.prototype.getSupportedRegions=function(){return Object.keys(i18n.phonenumbers.shortnumbermetadata.countryToMetadata).filter(function(o){return isNaN(o)})},i18n.phonenumbers.ShortNumberInfo.prototype.getExampleShortNumber=function(o){return o=this.getMetadataForRegion_(o),o?(o=o.getShortCode(),o.hasExampleNumber()&&o.getExampleNumber()||""):""},i18n.phonenumbers.ShortNumberInfo.prototype.getExampleShortNumberForCost=function(o,i){if(o=this.getMetadataForRegion_(o),!o)return"";var et=i18n.phonenumbers.ShortNumberInfo.ShortNumberCost,nt=null;switch(i){case et.TOLL_FREE:nt=o.getTollFree();break;case et.STANDARD_RATE:nt=o.getStandardRate();break;case et.PREMIUM_RATE:nt=o.getPremiumRate()}return nt&&nt.hasExampleNumber()&&nt.getExampleNumber()||""},i18n.phonenumbers.ShortNumberInfo.prototype.connectsToEmergencyNumber=function(o,i){return this.matchesEmergencyNumberHelper_(o,i,!0)},i18n.phonenumbers.ShortNumberInfo.prototype.isEmergencyNumber=function(o,i){return this.matchesEmergencyNumberHelper_(o,i,!1)},i18n.phonenumbers.ShortNumberInfo.prototype.getMetadataForRegion_=function(o){if(!o)return null;o=o.toUpperCase();var i=this.regionToMetadataMap[o];if(i==null){i=new goog.proto2.PbLiteSerializer;var et=i18n.phonenumbers.shortnumbermetadata.countryToMetadata[o];if(et==null)return null;i=i.deserialize(i18n.phonenumbers.PhoneMetadata.getDescriptor(),et),this.regionToMetadataMap[o]=i}return i},i18n.phonenumbers.ShortNumberInfo.prototype.matchesEmergencyNumberHelper_=function(o,i,et){var nt=i18n.phonenumbers.PhoneNumberUtil.extractPossibleNumber(o);return i18n.phonenumbers.PhoneNumberUtil.LEADING_PLUS_CHARS_PATTERN.test(nt)||(o=this.getMetadataForRegion_(i),o==null||!o.hasEmergency())?!1:(nt=i18n.phonenumbers.PhoneNumberUtil.normalizeDigitsOnly(nt),i=et&&!i18n.phonenumbers.ShortNumberInfo.REGIONS_WHERE_EMERGENCY_NUMBERS_MUST_BE_EXACT_.includes(i),et=o.getEmergency().getNationalNumberPatternOrDefault(),i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(et,nt)||i&&i18n.phonenumbers.PhoneNumberUtil.matchesPrefix(et,nt))},i18n.phonenumbers.ShortNumberInfo.prototype.isCarrierSpecific=function(o){var i=this.getRegionCodesForCountryCode_(o.getCountryCodeOrDefault());return i=this.getRegionCodeForShortNumberFromRegionList_(o,i),o=this.getNationalSignificantNumber_(o),i=this.getMetadataForRegion_(i),!!i&&this.matchesPossibleNumberAndNationalNumber_(o,i.getCarrierSpecific())},i18n.phonenumbers.ShortNumberInfo.prototype.isCarrierSpecificForRegion=function(o,i){return this.regionDialingFromMatchesNumber_(o,i)?(o=this.getNationalSignificantNumber_(o),i=this.getMetadataForRegion_(i),!!i&&this.matchesPossibleNumberAndNationalNumber_(o,i.getCarrierSpecific())):!1},i18n.phonenumbers.ShortNumberInfo.prototype.isSmsServiceForRegion=function(o,i){return this.regionDialingFromMatchesNumber_(o,i)?(i=this.getMetadataForRegion_(i),o=this.getNationalSignificantNumber_(o),!!i&&this.matchesPossibleNumberAndNationalNumber_(o,i.getSmsServices())):!1},i18n.phonenumbers.ShortNumberInfo.prototype.getNationalSignificantNumber_=function(o){if(!o.hasNationalNumber())return"";var i=""+o.getNationalNumber();return o.hasItalianLeadingZero()&&o.getItalianLeadingZero()&&0<o.getNumberOfLeadingZerosOrDefault()?Array(o.getNumberOfLeadingZerosOrDefault()+1).join("0")+i:i},i18n.phonenumbers.ShortNumberInfo.prototype.matchesPossibleNumberAndNationalNumber_=function(o,i){return 0<i.possibleLengthArray().length&&!i.possibleLengthArray().includes(o.length)?!1:i18n.phonenumbers.PhoneNumberUtil.matchesEntirely(i.getNationalNumberPatternOrDefault(),o.toString())},i18n.phonenumbers.AsYouTypeFormatter=function(o){this.DIGIT_PLACEHOLDER_=" ",this.DIGIT_PATTERN_=new RegExp(this.DIGIT_PLACEHOLDER_),this.currentOutput_="",this.formattingTemplate_=new goog.string.StringBuffer,this.currentFormattingPattern_="",this.accruedInput_=new goog.string.StringBuffer,this.accruedInputWithoutFormatting_=new goog.string.StringBuffer,this.ableToFormat_=!0,this.isExpectingCountryCallingCode_=this.isCompleteNumber_=this.inputHasFormatting_=!1,this.phoneUtil_=i18n.phonenumbers.PhoneNumberUtil.getInstance(),this.positionToRemember_=this.originalPosition_=this.lastMatchPosition_=0,this.prefixBeforeNationalNumber_=new goog.string.StringBuffer,this.shouldAddSpaceAfterNationalPrefix_=!1,this.extractedNationalPrefix_="",this.nationalNumber_=new goog.string.StringBuffer,this.possibleFormats_=[],this.defaultCountry_=o,this.defaultMetadata_=this.currentMetadata_=this.getMetadataForRegion_(this.defaultCountry_)},i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_=" ",i18n.phonenumbers.AsYouTypeFormatter.EMPTY_METADATA_=new i18n.phonenumbers.PhoneMetadata,i18n.phonenumbers.AsYouTypeFormatter.EMPTY_METADATA_.setInternationalPrefix("NA"),i18n.phonenumbers.AsYouTypeFormatter.ELIGIBLE_FORMAT_PATTERN_=new RegExp("^["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]*\\$1["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]*(\\$\\d["+i18n.phonenumbers.PhoneNumberUtil.VALID_PUNCTUATION+"]*)*$"),i18n.phonenumbers.AsYouTypeFormatter.NATIONAL_PREFIX_SEPARATORS_PATTERN_=/[- ]/,i18n.phonenumbers.AsYouTypeFormatter.MIN_LEADING_DIGITS_LENGTH_=3,i18n.phonenumbers.AsYouTypeFormatter.prototype.getMetadataForRegion_=function(o){return o=this.phoneUtil_.getCountryCodeForRegion(o),o=this.phoneUtil_.getRegionCodeForCountryCode(o),o=this.phoneUtil_.getMetadataForRegion(o),o??i18n.phonenumbers.AsYouTypeFormatter.EMPTY_METADATA_},i18n.phonenumbers.AsYouTypeFormatter.prototype.maybeCreateNewTemplate_=function(){for(var o=this.possibleFormats_.length,i=0;i<o;++i){var et=this.possibleFormats_[i],nt=et.getPatternOrDefault();if(this.currentFormattingPattern_==nt)return!1;if(this.createFormattingTemplate_(et))return this.currentFormattingPattern_=nt,this.shouldAddSpaceAfterNationalPrefix_=i18n.phonenumbers.AsYouTypeFormatter.NATIONAL_PREFIX_SEPARATORS_PATTERN_.test(et.getNationalPrefixFormattingRule()),this.lastMatchPosition_=0,!0}return this.ableToFormat_=!1},i18n.phonenumbers.AsYouTypeFormatter.prototype.getAvailableFormats_=function(o){for(var i=this.isCompleteNumber_&&this.extractedNationalPrefix_.length==0&&0<this.currentMetadata_.intlNumberFormatCount()?this.currentMetadata_.intlNumberFormatArray():this.currentMetadata_.numberFormatArray(),et=i.length,nt=0;nt<et;++nt){var ot=i[nt];0<this.extractedNationalPrefix_.length&&this.phoneUtil_.formattingRuleHasFirstGroupOnly(ot.getNationalPrefixFormattingRuleOrDefault())&&!ot.getNationalPrefixOptionalWhenFormatting()&&!ot.hasDomesticCarrierCodeFormattingRule()||(this.extractedNationalPrefix_.length!=0||this.isCompleteNumber_||this.phoneUtil_.formattingRuleHasFirstGroupOnly(ot.getNationalPrefixFormattingRuleOrDefault())||ot.getNationalPrefixOptionalWhenFormatting())&&i18n.phonenumbers.AsYouTypeFormatter.ELIGIBLE_FORMAT_PATTERN_.test(ot.getFormatOrDefault())&&this.possibleFormats_.push(ot)}this.narrowDownPossibleFormats_(o)},i18n.phonenumbers.AsYouTypeFormatter.prototype.narrowDownPossibleFormats_=function(o){for(var i=[],et=o.length-i18n.phonenumbers.AsYouTypeFormatter.MIN_LEADING_DIGITS_LENGTH_,nt=this.possibleFormats_.length,ot=0;ot<nt;++ot){var st=this.possibleFormats_[ot];if(st.leadingDigitsPatternCount()==0)i.push(this.possibleFormats_[ot]);else{var lt=Math.min(et,st.leadingDigitsPatternCount()-1);st=st.getLeadingDigitsPattern(lt),o.search(st)==0&&i.push(this.possibleFormats_[ot])}}this.possibleFormats_=i},i18n.phonenumbers.AsYouTypeFormatter.prototype.createFormattingTemplate_=function(o){var i=o.getPatternOrDefault();return this.formattingTemplate_.clear(),o=this.getFormattingTemplate_(i,o.getFormatOrDefault()),0<o.length?(this.formattingTemplate_.append(o),!0):!1},i18n.phonenumbers.AsYouTypeFormatter.prototype.getFormattingTemplate_=function(o,i){var et="999999999999999".match(o)[0];return et.length<this.nationalNumber_.getLength()?"":(o=et.replace(new RegExp(o,"g"),i),o=o.replace(/9/g,this.DIGIT_PLACEHOLDER_))},i18n.phonenumbers.AsYouTypeFormatter.prototype.clear=function(){this.currentOutput_="",this.accruedInput_.clear(),this.accruedInputWithoutFormatting_.clear(),this.formattingTemplate_.clear(),this.lastMatchPosition_=0,this.currentFormattingPattern_="",this.prefixBeforeNationalNumber_.clear(),this.extractedNationalPrefix_="",this.nationalNumber_.clear(),this.ableToFormat_=!0,this.inputHasFormatting_=!1,this.originalPosition_=this.positionToRemember_=0,this.isExpectingCountryCallingCode_=this.isCompleteNumber_=!1,this.possibleFormats_=[],this.shouldAddSpaceAfterNationalPrefix_=!1,this.currentMetadata_!=this.defaultMetadata_&&(this.currentMetadata_=this.getMetadataForRegion_(this.defaultCountry_))},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigit=function(o){return this.currentOutput_=this.inputDigitWithOptionToRememberPosition_(o,!1)},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigitAndRememberPosition=function(o){return this.currentOutput_=this.inputDigitWithOptionToRememberPosition_(o,!0)},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigitWithOptionToRememberPosition_=function(o,i){if(this.accruedInput_.append(o),i&&(this.originalPosition_=this.accruedInput_.getLength()),this.isDigitOrLeadingPlusSign_(o)?o=this.normalizeAndAccrueDigitsAndPlusSign_(o,i):(this.ableToFormat_=!1,this.inputHasFormatting_=!0),!this.ableToFormat_){if(!this.inputHasFormatting_){if(this.attemptToExtractIdd_()){if(this.attemptToExtractCountryCallingCode_())return this.attemptToChoosePatternWithPrefixExtracted_()}else if(this.ableToExtractLongerNdd_())return this.prefixBeforeNationalNumber_.append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),this.attemptToChoosePatternWithPrefixExtracted_()}return this.accruedInput_.toString()}switch(this.accruedInputWithoutFormatting_.getLength()){case 0:case 1:case 2:return this.accruedInput_.toString();case 3:if(this.attemptToExtractIdd_())this.isExpectingCountryCallingCode_=!0;else return this.extractedNationalPrefix_=this.removeNationalPrefixFromNationalNumber_(),this.attemptToChooseFormattingPattern_();default:return this.isExpectingCountryCallingCode_?(this.attemptToExtractCountryCallingCode_()&&(this.isExpectingCountryCallingCode_=!1),this.prefixBeforeNationalNumber_.toString()+this.nationalNumber_.toString()):0<this.possibleFormats_.length?(o=this.inputDigitHelper_(o),i=this.attemptToFormatAccruedDigits_(),0<i.length?i:(this.narrowDownPossibleFormats_(this.nationalNumber_.toString()),this.maybeCreateNewTemplate_()?this.inputAccruedNationalNumber_():this.ableToFormat_?this.appendNationalNumber_(o):this.accruedInput_.toString())):this.attemptToChooseFormattingPattern_()}},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToChoosePatternWithPrefixExtracted_=function(){return this.ableToFormat_=!0,this.isExpectingCountryCallingCode_=!1,this.possibleFormats_=[],this.lastMatchPosition_=0,this.formattingTemplate_.clear(),this.currentFormattingPattern_="",this.attemptToChooseFormattingPattern_()},i18n.phonenumbers.AsYouTypeFormatter.prototype.getExtractedNationalPrefix_=function(){return this.extractedNationalPrefix_},i18n.phonenumbers.AsYouTypeFormatter.prototype.ableToExtractLongerNdd_=function(){if(0<this.extractedNationalPrefix_.length){var o=this.nationalNumber_.toString();this.nationalNumber_.clear(),this.nationalNumber_.append(this.extractedNationalPrefix_),this.nationalNumber_.append(o),o=this.prefixBeforeNationalNumber_.toString();var i=o.lastIndexOf(this.extractedNationalPrefix_);this.prefixBeforeNationalNumber_.clear(),this.prefixBeforeNationalNumber_.append(o.substring(0,i))}return this.extractedNationalPrefix_!=this.removeNationalPrefixFromNationalNumber_()},i18n.phonenumbers.AsYouTypeFormatter.prototype.isDigitOrLeadingPlusSign_=function(o){return i18n.phonenumbers.PhoneNumberUtil.CAPTURING_DIGIT_PATTERN.test(o)||this.accruedInput_.getLength()==1&&i18n.phonenumbers.PhoneNumberUtil.PLUS_CHARS_PATTERN.test(o)},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToFormatAccruedDigits_=function(){for(var o=this.nationalNumber_.toString(),i=this.possibleFormats_.length,et=0;et<i;++et){var nt=this.possibleFormats_[et],ot=nt.getPatternOrDefault();if(new RegExp("^(?:"+ot+")$").test(o)&&(this.shouldAddSpaceAfterNationalPrefix_=i18n.phonenumbers.AsYouTypeFormatter.NATIONAL_PREFIX_SEPARATORS_PATTERN_.test(nt.getNationalPrefixFormattingRule()),nt=o.replace(new RegExp(ot,"g"),nt.getFormat()),nt=this.appendNationalNumber_(nt),i18n.phonenumbers.PhoneNumberUtil.normalizeDiallableCharsOnly(nt)==this.accruedInputWithoutFormatting_))return nt}return""},i18n.phonenumbers.AsYouTypeFormatter.prototype.appendNationalNumber_=function(o){var i=this.prefixBeforeNationalNumber_.getLength();return this.shouldAddSpaceAfterNationalPrefix_&&0<i&&this.prefixBeforeNationalNumber_.toString().charAt(i-1)!=i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_?this.prefixBeforeNationalNumber_+i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_+o:this.prefixBeforeNationalNumber_+o},i18n.phonenumbers.AsYouTypeFormatter.prototype.getRememberedPosition=function(){if(!this.ableToFormat_)return this.originalPosition_;for(var o=0,i=0,et=this.accruedInputWithoutFormatting_.toString(),nt=this.currentOutput_.toString();o<this.positionToRemember_&&i<nt.length;)et.charAt(o)==nt.charAt(i)&&o++,i++;return i},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToChooseFormattingPattern_=function(){var o=this.nationalNumber_.toString();return o.length>=i18n.phonenumbers.AsYouTypeFormatter.MIN_LEADING_DIGITS_LENGTH_?(this.getAvailableFormats_(o),o=this.attemptToFormatAccruedDigits_(),0<o.length?o:this.maybeCreateNewTemplate_()?this.inputAccruedNationalNumber_():this.accruedInput_.toString()):this.appendNationalNumber_(o)},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputAccruedNationalNumber_=function(){var o=this.nationalNumber_.toString(),i=o.length;if(0<i){for(var et="",nt=0;nt<i;nt++)et=this.inputDigitHelper_(o.charAt(nt));return this.ableToFormat_?this.appendNationalNumber_(et):this.accruedInput_.toString()}return this.prefixBeforeNationalNumber_.toString()},i18n.phonenumbers.AsYouTypeFormatter.prototype.isNanpaNumberWithNationalPrefix_=function(){if(this.currentMetadata_.getCountryCode()!=1)return!1;var o=this.nationalNumber_.toString();return o.charAt(0)=="1"&&o.charAt(1)!="0"&&o.charAt(1)!="1"},i18n.phonenumbers.AsYouTypeFormatter.prototype.removeNationalPrefixFromNationalNumber_=function(){var o=this.nationalNumber_.toString(),i=0;if(this.isNanpaNumberWithNationalPrefix_())i=1,this.prefixBeforeNationalNumber_.append("1").append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),this.isCompleteNumber_=!0;else if(this.currentMetadata_.hasNationalPrefixForParsing()){var et=new RegExp("^(?:"+this.currentMetadata_.getNationalPrefixForParsing()+")");et=o.match(et),et!=null&&et[0]!=null&&0<et[0].length&&(this.isCompleteNumber_=!0,i=et[0].length,this.prefixBeforeNationalNumber_.append(o.substring(0,i)))}return this.nationalNumber_.clear(),this.nationalNumber_.append(o.substring(i)),o.substring(0,i)},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToExtractIdd_=function(){var o=this.accruedInputWithoutFormatting_.toString(),i=new RegExp("^(?:\\"+i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN+"|"+this.currentMetadata_.getInternationalPrefix()+")");return i=o.match(i),i!=null&&i[0]!=null&&0<i[0].length?(this.isCompleteNumber_=!0,i=i[0].length,this.nationalNumber_.clear(),this.nationalNumber_.append(o.substring(i)),this.prefixBeforeNationalNumber_.clear(),this.prefixBeforeNationalNumber_.append(o.substring(0,i)),o.charAt(0)!=i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN&&this.prefixBeforeNationalNumber_.append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),!0):!1},i18n.phonenumbers.AsYouTypeFormatter.prototype.attemptToExtractCountryCallingCode_=function(){if(this.nationalNumber_.getLength()==0)return!1;var o=new goog.string.StringBuffer,i=this.phoneUtil_.extractCountryCode(this.nationalNumber_,o);return i==0?!1:(this.nationalNumber_.clear(),this.nationalNumber_.append(o.toString()),o=this.phoneUtil_.getRegionCodeForCountryCode(i),i18n.phonenumbers.PhoneNumberUtil.REGION_CODE_FOR_NON_GEO_ENTITY==o?this.currentMetadata_=this.phoneUtil_.getMetadataForNonGeographicalRegion(i):o!=this.defaultCountry_&&(this.currentMetadata_=this.getMetadataForRegion_(o)),this.prefixBeforeNationalNumber_.append(""+i).append(i18n.phonenumbers.AsYouTypeFormatter.SEPARATOR_BEFORE_NATIONAL_NUMBER_),this.extractedNationalPrefix_="",!0)},i18n.phonenumbers.AsYouTypeFormatter.prototype.normalizeAndAccrueDigitsAndPlusSign_=function(o,i){if(o==i18n.phonenumbers.PhoneNumberUtil.PLUS_SIGN){var et=o;this.accruedInputWithoutFormatting_.append(o)}else et=i18n.phonenumbers.PhoneNumberUtil.DIGIT_MAPPINGS[o],this.accruedInputWithoutFormatting_.append(et),this.nationalNumber_.append(et);return i&&(this.positionToRemember_=this.accruedInputWithoutFormatting_.getLength()),et},i18n.phonenumbers.AsYouTypeFormatter.prototype.inputDigitHelper_=function(o){var i=this.formattingTemplate_.toString();if(0<=i.substring(this.lastMatchPosition_).search(this.DIGIT_PATTERN_)){var et=i.search(this.DIGIT_PATTERN_);return o=i.replace(this.DIGIT_PATTERN_,o),this.formattingTemplate_.clear(),this.formattingTemplate_.append(o),this.lastMatchPosition_=et,o.substring(0,this.lastMatchPosition_+1)}return this.possibleFormats_.length==1&&(this.ableToFormat_=!1),this.currentFormattingPattern_="",this.accruedInput_.toString()},Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i18n.phonenumbers,module.exports=exports.default}).call(this)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[1])(1)})})(libphonenumber);var libphonenumberExports=libphonenumber.exports;const avatars=["https://i.imgur.com/Z8s6XZF.png","https://i.imgur.com/Ry2kszP.png","https://i.imgur.com/ENxs30f.png","https://i.imgur.com/7X4uk7F.png","https://i.imgur.com/pU6meFa.png","https://i.imgur.com/65C4LTL.png","https://i.imgur.com/bYwbomU.png"];function CreateAccount(){const[o,i]=reactExports.useState(""),[et,nt]=reactExports.useState(""),[ot,st]=reactExports.useState(""),[lt,ht]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[vt,Rt]=reactExports.useState(""),[wt,$t]=reactExports.useState(""),[Dt,Pt]=reactExports.useState(0),[Ut,Ot]=reactExports.useState(""),[Lt,xt]=reactExports.useState(!1),[jt,Ht]=reactExports.useState(!1),[qt,Kt]=reactExports.useState(!1),[nn,Zt]=reactExports.useState(!1),[tn,dn]=reactExports.useState(!1),[wn,In]=reactExports.useState(!1),Sn=useAppDispatch(),Nn=useNavigate(),Rn=bn=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(bn),Ln=bn=>{const tr=libphonenumberExports.PhoneNumberUtil.getInstance();try{const Zn=tr.parse(`+46${bn}`);return tr.isValidNumber(Zn)}catch(Zn){return console.error("NumberParseException was thrown:",Zn),!1}},gn=async()=>{xt(!1),Zt(!1),Ht(!1),Kt(!1),dn(!1),In(!1),o&&et&&ot&&lt&&ft&&vt&&wt&&Dt&&Ut?lt===ft&&lt.length>=6&&Rn(ot)&&Ln(vt)&&Dt>=16?(await Sn(createUserAsync({id:"",firstName:o,lastName:et,email:ot,phoneNumber:vt,gender:wt,age:Dt,password:lt,avatarUrl:Ut})),Nn("/signin")):lt!==ft?xt(!0):lt.length<6||ft.length<6?Zt(!0):Rn(ot)?Ln(vt)?Dt<16?dn(!0):In(!0):Kt(!0):Ht(!0):In(!0)},_n=window.innerWidth<=500;return jsxRuntimeExports.jsx(Container$1,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:_n?"column":"row"},children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h5",sx:{margin:2},children:"Skapa ett konto"}),Lt&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Lösenord matchar inte"}),nn&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Lösenordet måste bestå av minst 6 tecken"}),qt&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Ange ett giltigt telefonnummer"}),jt&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Ange en giltig e-post"}),tn&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Du måste vara minst 16 år för att skapa ett konto"}),wn&&jsxRuntimeExports.jsx(Typography$1,{color:"error",children:"Alla fält måste fyllas i"}),jsxRuntimeExports.jsx(TextField$1,{label:"Förnamn",variant:"outlined",type:"fname",value:o,onChange:bn=>i(bn.target.value),sx:{margin:1}}),jsxRuntimeExports.jsx(TextField$1,{label:"Efternamn",variant:"outlined",type:"lname",value:et,onChange:bn=>nt(bn.target.value),sx:{margin:1}}),jsxRuntimeExports.jsx(TextField$1,{label:"Email",variant:"outlined",value:ot,type:"email",onChange:bn=>st(bn.target.value),sx:{margin:1}}),jsxRuntimeExports.jsx(TextField$1,{label:"Telefonnummer",variant:"outlined",value:vt,type:"tel",onChange:bn=>Rt(bn.target.value),sx:{margin:1}}),jsxRuntimeExports.jsx(TextField$1,{label:"Lösenord",variant:"outlined",type:"password",value:lt,onChange:bn=>ht(bn.target.value),sx:{margin:1}}),jsxRuntimeExports.jsx(TextField$1,{label:"Bekräfta lösenord",variant:"outlined",type:"password",value:ft,onChange:bn=>St(bn.target.value),sx:{margin:1}}),jsxRuntimeExports.jsxs(FormControl$1,{variant:"outlined",sx:{margin:1},children:[jsxRuntimeExports.jsx(InputLabel$1,{id:"gender-label",children:"Kön"}),jsxRuntimeExports.jsxs(Select$1,{labelId:"gender-label",value:wt,label:"Kön",sx:{width:"100px"},onChange:bn=>$t(bn.target.value),children:[jsxRuntimeExports.jsx(MenuItem$1,{value:"Man",children:"Man"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"Kvinna",children:"Kvinna"}),jsxRuntimeExports.jsx(MenuItem$1,{value:"Ickebinär",children:"Ickebinär"})]})]}),jsxRuntimeExports.jsx(TextField$1,{label:"Ålder",variant:"outlined",type:"number",value:Dt,onChange:bn=>Pt(Number(bn.target.value)),sx:{margin:1}}),jsxRuntimeExports.jsx(Typography$1,{variant:"body1",sx:{margin:1},children:"Välj en avatar"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",gap:10,marginBottom:20,flexWrap:"wrap"},children:avatars.map((bn,tr)=>jsxRuntimeExports.jsx(Avatar$1,{alt:`Avatar ${tr+1}`,src:bn,sx:{cursor:"pointer",width:70,height:70,opacity:Ut==bn?"0.3":"none"},onClick:()=>Ot(bn)},tr))}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",onClick:gn,sx:{margin:1,fontSize:20},children:"Skapa konto"})]})})}function ForgotPassword(){const o=useAppSelector(lt=>lt.authSlice.success),i=useAppSelector(lt=>lt.authSlice.error),et=useAppDispatch(),[nt,ot]=reactExports.useState(""),st=async()=>{try{await et(forgotPasswordAsync({email:nt}))}catch(lt){console.error("Sign in error:",lt)}};return jsxRuntimeExports.jsxs(Container$1,{sx:{padding:"20px",height:"100vh",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,backgroundColor:"pink",padding:50},children:"EN LOGGA KANSKE OCH NÅGOT KUL?"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,padding:50},children:[i?jsxRuntimeExports.jsx(Typography$1,{variant:"h6",children:"Något gick fel vid utskick av nytt lösenord."}):null,o?jsxRuntimeExports.jsx(Typography$1,{variant:"h6",children:"Ett nytt lösenord har skickats till din email."}):null,jsxRuntimeExports.jsx(TextField$1,{id:"standard-basic",label:"Email",variant:"standard",sx:{width:"250px",marginTop:5},onChange:lt=>{ot(lt.target.value)}}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",sx:{marginTop:4,marginBottom:1,paddingRight:5,paddingLeft:5},onClick:st,children:"Nytt lösenord"})]})]})}function IndexPage(){const o=useNavigate();return jsxRuntimeExports.jsxs(Container$1,{sx:{padding:"20px",flexDirection:"column",alignItems:"center",justifyContent:"center",display:"flex",flex:1},children:[jsxRuntimeExports.jsxs("div",{style:{alignItems:"flex-start",justifyContent:"flex-start",width:"100%"},children:[jsxRuntimeExports.jsxs("section",{style:{margin:"20px 0"},children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h5",gutterBottom:!0,children:"Trött på att använda flera olika verktyg när du kan ha allt på ett ställe?"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"Effektivt samarbete"}),jsxRuntimeExports.jsx("li",{children:"Säker och tydlig plattform"}),jsxRuntimeExports.jsx("li",{children:"Enkel och intuitiv användning"})]})]}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",color:"primary",size:"large",style:{margin:"10px 0",width:"50%"},onClick:()=>o("/createaccount"),children:"Skapa ett konto idag"})]}),jsxRuntimeExports.jsx("img",{alt:"working remotly image",width:"100%",src:"https://enterprise.gov.ie/images_upload/djei/en/imagelibrary/Remote-working-EN-banner.jpg"}),jsxRuntimeExports.jsxs("div",{style:{marginTop:2,display:"flex",alignItems:"flex-end",justifyContent:"flex-end",width:"100%",flexDirection:"column"},children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h5",gutterBottom:!0,children:"Är du redan en användare?"}),jsxRuntimeExports.jsx(Button$1,{variant:"outlined",color:"primary",size:"large",fullWidth:!0,style:{margin:"10px 0",width:"50%"},onClick:()=>o("/signin"),children:"Logga in"})]})]})}var Visibility={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(Visibility,"__esModule",{value:!0});var default_1$4=Visibility.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=Visibility.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var VisibilityOff={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(VisibilityOff,"__esModule",{value:!0});var default_1$3=VisibilityOff.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=VisibilityOff.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");function SignIn(){const o=useAppSelector(Ot=>Ot.userSlice.error),i=useAppSelector(Ot=>Ot.userSlice.user),et=useAppSelector(Ot=>Ot.teamSlice.teams),nt=useAppDispatch(),ot=useNavigate(),[st,lt]=reactExports.useState(""),[ht,ft]=reactExports.useState(""),[St,vt]=reactExports.useState(!1),[Rt,wt]=reactExports.useState(!1),$t=()=>vt(Ot=>!Ot),Dt=Ot=>{Ot.preventDefault()};reactExports.useEffect(()=>{console.log("LOGGAR UT"),nt(logOutUserAsync())},[]);const Pt=async()=>{try{console.log("LOGGAR IN"),await nt(logInUserAsync({email:st,password:ht})),await nt(GetMyTeamsAsync()),wt(!0)}catch(Ot){console.error("Sign in error:",Ot)}};reactExports.useEffect(()=>{i&&!o&&et&&Rt&&(console.log("HÄR INNE"),ot("/chooseteam"))},[i,et,Rt]);const Ut=Ot=>{Ot.key==="Enter"&&Pt()};return jsxRuntimeExports.jsx(Container$1,{sx:{padding:"20px",height:"100vh",width:"100%"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,padding:50},children:[o?jsxRuntimeExports.jsx(Typography$1,{variant:"h6",children:"Inloggning misslyckades"}):null,jsxRuntimeExports.jsx(TextField$1,{id:"standard-basic",label:"Email",variant:"standard",sx:{width:"250px",marginTop:5},onChange:Ot=>{lt(Ot.target.value)},onKeyDown:Ut}),jsxRuntimeExports.jsxs(FormControl$1,{sx:{width:"250px",marginTop:5},variant:"standard",children:[jsxRuntimeExports.jsx(InputLabel$1,{htmlFor:"standard-adornment-password",children:"Password"}),jsxRuntimeExports.jsx(Input$1,{id:"standard-adornment-password",type:St?"text":"password",onChange:Ot=>{ft(Ot.target.value)},onKeyDown:Ut,endAdornment:jsxRuntimeExports.jsx(InputAdornment$1,{position:"end",children:jsxRuntimeExports.jsx(IconButton$1,{"aria-label":"toggle password visibility",onClick:$t,onMouseDown:Dt,children:St?jsxRuntimeExports.jsx(default_1$3,{}):jsxRuntimeExports.jsx(default_1$4,{})})})})]}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",sx:{marginTop:4,marginBottom:1,paddingRight:5,paddingLeft:5},onClick:Pt,children:"Logga in"}),jsxRuntimeExports.jsx(Link$1,{href:"forgotpassword",underline:"hover",children:"Glömt lösenord?"}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",sx:{marginTop:2},onClick:()=>{ot("/createaccount")},children:"Skapa Konto"})]})})}var Computer={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Computer,"__esModule",{value:!0});var default_1$2=Computer.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=Computer.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"Computer");const RootLayout=()=>{const o=window.innerWidth<=500,i=useAppDispatch(),et=useNavigate(),nt=useAppSelector(st=>st.userSlice.user),ot=async()=>{await i(logOutUserAsync()).then(()=>{et("/signin")})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen",children:[jsxRuntimeExports.jsxs(AppBar$1,{position:"static",sx:{backgroundColor:"white",height:"3rem",flexDirection:"row",backdropFilter:"blur(10px)",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx(Link$2,{to:nt?"/chooseteam":"/",style:{textDecoration:"none",color:"black"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(default_1$2,{fontSize:"large",sx:{paddingRight:2,paddingLeft:2}}),jsxRuntimeExports.jsx(Typography$1,{sx:{fontSize:o?16:35},children:"CY Virtual Workplace"})]})}),nt?jsxRuntimeExports.jsxs("div",{children:[" ",jsxRuntimeExports.jsx(Button$1,{sx:{paddingRight:2,paddingLeft:2},onClick:ot,children:"Logga ut"})," "]}):null]}),jsxRuntimeExports.jsx("main",{className:"bg-neutral-100 flex flex-1 flex-col",children:jsxRuntimeExports.jsx(Outlet,{})}),jsxRuntimeExports.jsx("footer",{className:"flex bg-neutral-900"})]})};var Add={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Add,"__esModule",{value:!0});var default_1$1=Add.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=Add.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var ConnectWithoutContact={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(ConnectWithoutContact,"__esModule",{value:!0});var default_1=ConnectWithoutContact.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=ConnectWithoutContact.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M11 14H9c0-4.97 4.03-9 9-9v2c-3.87 0-7 3.13-7 7m7-3V9c-2.76 0-5 2.24-5 5h2c0-1.66 1.34-3 3-3M7 4c0-1.11-.89-2-2-2s-2 .89-2 2 .89 2 2 2 2-.89 2-2m4.45.5h-2C9.21 5.92 7.99 7 6.5 7h-3C2.67 7 2 7.67 2 8.5V11h6V8.74c1.86-.59 3.25-2.23 3.45-4.24M19 17c1.11 0 2-.89 2-2s-.89-2-2-2-2 .89-2 2 .89 2 2 2m1.5 1h-3c-1.49 0-2.71-1.08-2.95-2.5h-2c.2 2.01 1.59 3.65 3.45 4.24V22h6v-2.5c0-.83-.67-1.5-1.5-1.5"}),"ConnectWithoutContact");function ChooseTeam(){const o=useAppSelector(ht=>ht.userSlice.user),i=useAppSelector(ht=>ht.teamSlice.teams),et=useAppDispatch(),nt=useNavigate(),ot=theme1.palette.primary.main,st=ht=>{et(setActiveTeam(ht)),nt("/enterhouse")};reactExports.useEffect(()=>{et(GetMyTeamsAsync())},[]);const lt=window.innerWidth<=500;return jsxRuntimeExports.jsxs(Container$1,{sx:{padding:"20px"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly"},children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outlined",color:"primary",size:"large",fullWidth:!0,style:{margin:"10px 0",width:"30%",flexDirection:"row",justifyContent:"center"},onClick:()=>nt("/createteam"),children:[jsxRuntimeExports.jsx(default_1$1,{sx:{padding:.5}})," ",jsxRuntimeExports.jsx(Typography$1,{sx:{padding:.5},children:"Skapa team"})]}),jsxRuntimeExports.jsxs(Button$1,{variant:"outlined",color:"primary",size:"large",fullWidth:!0,style:{margin:"10px 0",width:"30%",flexDirection:"row",justifyContent:"center"},onClick:()=>nt("/jointeam"),children:[jsxRuntimeExports.jsx(default_1,{sx:{padding:.5}})," ",jsxRuntimeExports.jsx(Typography$1,{sx:{padding:.5},children:"Gå med i team"})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20,alignItems:"center"},children:[jsxRuntimeExports.jsxs(Typography$1,{variant:"h5",children:[" Välkommen ",o==null?void 0:o.firstName,"!"]}),Array.isArray(i)&&(i==null?void 0:i.map(ht=>jsxRuntimeExports.jsx(Card$1,{sx:{display:"flex",minWidth:lt?"100px":"250px",backgroundColor:ot},children:jsxRuntimeExports.jsx(CardActionArea$1,{onClick:()=>{st(ht.id)},children:jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsx(CardContent$1,{sx:{flex:"1 0 auto"},children:jsxRuntimeExports.jsxs(Typography$1,{component:"div",variant:"h5",sx:{textAlign:"center"},children:[ht.name," "]})})})})},ht.id)))]})]})}function CreateTeam(){const o=useAppDispatch(),[i,et]=reactExports.useState(""),[nt,ot]=reactExports.useState(""),[st,lt]=reactExports.useState(""),[ht,ft]=reactExports.useState(!1),St=useNavigate(),vt=async()=>{i.trim()!==""&&nt.trim()!==""&&st.trim()!==""?(ft(!1),await o(createTeamAsync({teamName:i,teamRole:nt,profileRole:st})).then(()=>{St("/chooseteam")})):ft(!0)};return jsxRuntimeExports.jsx(Container$1,{sx:{padding:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[ht?jsxRuntimeExports.jsx(Typography$1,{children:"Alla fält måste vara ifyllda"}):null,jsxRuntimeExports.jsx(TextField$1,{id:"firstname",label:"Namn på team",variant:"standard",sx:{width:"250px",marginTop:2},onChange:Rt=>{et(Rt.target.value)}}),jsxRuntimeExports.jsx(Tooltip$1,{title:"Ange typen av teamet eller avdelningen, t.ex. 'Skolklass', 'Arbetslag', 'Utvecklingsteam' osv.",children:jsxRuntimeExports.jsx(TextField$1,{id:"team-role",label:"Typ/avdelning",variant:"standard",sx:{width:"250px",marginTop:2},onChange:Rt=>{ot(Rt.target.value)}})}),jsxRuntimeExports.jsx(Tooltip$1,{title:"Beskriv din roll eller ansvar i teamet. Exempelvis 'Projektledare', 'Utvecklare', 'Designer' etc. Detta hjälper andra att förstå din funktion inom teamet.",children:jsxRuntimeExports.jsx(TextField$1,{id:"firstname",label:"Din roll i teamet",variant:"standard",sx:{width:"250px",marginTop:2},onChange:Rt=>{lt(Rt.target.value)}})}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",sx:{marginTop:4,marginBottom:1,paddingRight:5,paddingLeft:5},onClick:vt,children:"Skapa Team"})]})})}function JoinTeam(){const[o,i]=reactExports.useState(["","","","","",""]),et=reactExports.useRef([]),[nt,ot]=reactExports.useState(!1),[st,lt]=reactExports.useState(""),ht=useAppDispatch(),ft=useNavigate(),St=theme1.palette.primary.main;reactExports.useEffect(()=>{o.every(Dt=>Dt!=="")&&st!==""&&vt()},[o]),reactExports.useEffect(()=>{st!==""&&o.every(Dt=>Dt!=="")&&vt()},[o]);const vt=async()=>{o.every(Dt=>Dt!=="")&&st!==""?(ot(!1),await ht(createJoinAsync({code:o.join(""),role:st})),ft("/chooseteam")):ot(!0)},Rt=(Dt,Pt)=>{var Ut;i(Ot=>{const Lt=[...Ot];return Lt[Dt]=Pt,Lt}),Dt<et.current.length-1&&Pt!==""&&((Ut=et.current[Dt+1])==null||Ut.focus())},wt=Dt=>{Dt.key==="Enter"&&(Dt.preventDefault(),vt())},$t=Dt=>{Dt.preventDefault();const Ut=Dt.clipboardData.getData("text").split("").slice(0,o.length);i(Ut)};return jsxRuntimeExports.jsx(Container$1,{sx:{padding:"20px"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:20},children:[nt?jsxRuntimeExports.jsx(Typography$1,{children:"Alla fält måste vara ifyllda"}):null,jsxRuntimeExports.jsx(TextField$1,{variant:"outlined",label:"Din roll i teamet",style:{borderColor:St,minWidth:"40%"},onChange:Dt=>lt(Dt.target.value),onKeyDown:wt}),jsxRuntimeExports.jsx(Typography$1,{variant:"h6",sx:{marginTop:10},children:"Skriv in den kod som du får från ett befintligt team"}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:10},onPaste:$t,children:o.map((Dt,Pt)=>jsxRuntimeExports.jsx(TextField$1,{variant:"outlined",sx:{width:"10%",margin:"5px"},value:o[Pt],onChange:Ut=>Rt(Pt,Ut.target.value),onKeyDown:Ut=>{var Ot;Ut.key==="Backspace"&&Ut.target.value===""&&Pt>0&&((Ot=et.current[Pt-1])==null||Ot.focus())},inputRef:Ut=>et.current[Pt]=Ut},Pt))})]})})}const Navigation=()=>{const o=useAppSelector(st=>st.userSlice.user);console.log("User:",o);const i=useAppDispatch();reactExports.useEffect(()=>{i(getUserAsync())},[]);const et=useNavigate(),nt=ni(Ix.createClient({codec:"vp8",mode:"rtc"})),ot=st=>{et(`/via/${st}`)};return jsxRuntimeExports.jsx(Routes,{children:o?jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(RootLayout,{}),children:[jsxRuntimeExports.jsx(Route,{path:"chooseteam",element:jsxRuntimeExports.jsx(ChooseTeam,{})}),jsxRuntimeExports.jsx(Route,{path:"createteam",element:jsxRuntimeExports.jsx(CreateTeam,{})}),jsxRuntimeExports.jsx(Route,{path:"jointeam",element:jsxRuntimeExports.jsx(JoinTeam,{})}),jsxRuntimeExports.jsx(Route,{path:"enterhouse",element:jsxRuntimeExports.jsx(EnterHouse,{})}),jsxRuntimeExports.jsx(Route,{path:"menu",element:jsxRuntimeExports.jsx(Menu,{})}),jsxRuntimeExports.jsx(Route,{path:"meetingroom",element:jsxRuntimeExports.jsx(MeetingRoom,{connectToVideo:ot})}),jsxRuntimeExports.jsx(Route,{path:"office",element:jsxRuntimeExports.jsx(Office,{})}),jsxRuntimeExports.jsx(Route,{path:"chatroom",element:jsxRuntimeExports.jsx(ChatRoom,{})}),jsxRuntimeExports.jsx(Route,{path:"createmeeting",element:jsxRuntimeExports.jsx(CreateMeetingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"invitetomeeting",element:jsxRuntimeExports.jsx(InviteToMeeting,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(IndexPage,{})}),jsxRuntimeExports.jsx(Route,{path:"signin",element:jsxRuntimeExports.jsx(SignIn,{})}),jsxRuntimeExports.jsx(Route,{path:"createaccount",element:jsxRuntimeExports.jsx(CreateAccount,{})}),jsxRuntimeExports.jsx(Route,{path:"forgotpassword",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"meetinginteam",element:jsxRuntimeExports.jsx(MeetingInTeamsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"joinmeeting",element:jsxRuntimeExports.jsx(OngoingMeeting,{})}),jsxRuntimeExports.jsx(Route,{path:"/via/:channelName",element:jsxRuntimeExports.jsx(m2,{client:nt,children:jsxRuntimeExports.jsx(LiveVideo,{})})})]}):jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(RootLayout,{}),children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(IndexPage,{})}),jsxRuntimeExports.jsx(Route,{path:"signin",element:jsxRuntimeExports.jsx(SignIn,{})}),jsxRuntimeExports.jsx(Route,{path:"createaccount",element:jsxRuntimeExports.jsx(CreateAccount,{})}),jsxRuntimeExports.jsx(Route,{path:"forgotpassword",element:jsxRuntimeExports.jsx(ForgotPassword,{})})]})})};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(Provider_default,{store,children:jsxRuntimeExports.jsx(ThemeProvider,{theme:theme1,children:jsxRuntimeExports.jsxs(BrowserRouter,{children:[" ",jsxRuntimeExports.jsx(Navigation,{})]})})})}));
